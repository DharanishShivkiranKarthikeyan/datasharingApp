var Uo=s=>{throw TypeError(s)};var As=(s,e,o)=>e.has(s)?Uo("Cannot add the same private member more than once"):e instanceof WeakSet?e.add(s):e.set(s,o);function _mergeNamespaces(s,e){for(var o=0;o<e.length;o++){const a=e[o];if(typeof a!="string"&&!Array.isArray(a)){for(const d in a)if(d!=="default"&&!(d in s)){const c=Object.getOwnPropertyDescriptor(a,d);c&&Object.defineProperty(s,d,c.get?c:{enumerable:!0,get:()=>a[d]})}}}return Object.freeze(Object.defineProperty(s,Symbol.toStringTag,{value:"Module"}))}(function(){const e=document.createElement("link").relList;if(e&&e.supports&&e.supports("modulepreload"))return;for(const d of document.querySelectorAll('link[rel="modulepreload"]'))a(d);new MutationObserver(d=>{for(const c of d)if(c.type==="childList")for(const j of c.addedNodes)j.tagName==="LINK"&&j.rel==="modulepreload"&&a(j)}).observe(document,{childList:!0,subtree:!0});function o(d){const c={};return d.integrity&&(c.integrity=d.integrity),d.referrerPolicy&&(c.referrerPolicy=d.referrerPolicy),d.crossOrigin==="use-credentials"?c.credentials="include":d.crossOrigin==="anonymous"?c.credentials="omit":c.credentials="same-origin",c}function a(d){if(d.ep)return;d.ep=!0;const c=o(d);fetch(d.href,c)}})();var commonjsGlobal$2=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};function getDefaultExportFromCjs$1(s){return s&&s.__esModule&&Object.prototype.hasOwnProperty.call(s,"default")?s.default:s}function getAugmentedNamespace(s){if(s.__esModule)return s;var e=s.default;if(typeof e=="function"){var o=function a(){return this instanceof a?Reflect.construct(e,arguments,this.constructor):e.apply(this,arguments)};o.prototype=e.prototype}else o={};return Object.defineProperty(o,"__esModule",{value:!0}),Object.keys(s).forEach(function(a){var d=Object.getOwnPropertyDescriptor(s,a);Object.defineProperty(o,a,d.get?d:{enumerable:!0,get:function(){return s[a]}})}),o}var jsxRuntime={exports:{}},reactJsxRuntime_production_min={},react={exports:{}},react_production_min={};/**
 * @license React
 * react.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var l$1=Symbol.for("react.element"),n$1=Symbol.for("react.portal"),p$2=Symbol.for("react.fragment"),q$1=Symbol.for("react.strict_mode"),r=Symbol.for("react.profiler"),t=Symbol.for("react.provider"),u=Symbol.for("react.context"),v$2=Symbol.for("react.forward_ref"),w=Symbol.for("react.suspense"),x$1=Symbol.for("react.memo"),y=Symbol.for("react.lazy"),z$1=Symbol.iterator;function A$1(s){return s===null||typeof s!="object"?null:(s=z$1&&s[z$1]||s["@@iterator"],typeof s=="function"?s:null)}var B$2={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}},C$2=Object.assign,D$2={};function E$1(s,e,o){this.props=s,this.context=e,this.refs=D$2,this.updater=o||B$2}E$1.prototype.isReactComponent={};E$1.prototype.setState=function(s,e){if(typeof s!="object"&&typeof s!="function"&&s!=null)throw Error("setState(...): takes an object of state variables to update or a function which returns an object of state variables.");this.updater.enqueueSetState(this,s,e,"setState")};E$1.prototype.forceUpdate=function(s){this.updater.enqueueForceUpdate(this,s,"forceUpdate")};function F$1(){}F$1.prototype=E$1.prototype;function G$1(s,e,o){this.props=s,this.context=e,this.refs=D$2,this.updater=o||B$2}var H$1=G$1.prototype=new F$1;H$1.constructor=G$1;C$2(H$1,E$1.prototype);H$1.isPureReactComponent=!0;var I$1=Array.isArray,J=Object.prototype.hasOwnProperty,K$1={current:null},L$2={key:!0,ref:!0,__self:!0,__source:!0};function M$2(s,e,o){var a,d={},c=null,j=null;if(e!=null)for(a in e.ref!==void 0&&(j=e.ref),e.key!==void 0&&(c=""+e.key),e)J.call(e,a)&&!L$2.hasOwnProperty(a)&&(d[a]=e[a]);var _e=arguments.length-2;if(_e===1)d.children=o;else if(1<_e){for(var pt=Array(_e),yt=0;yt<_e;yt++)pt[yt]=arguments[yt+2];d.children=pt}if(s&&s.defaultProps)for(a in _e=s.defaultProps,_e)d[a]===void 0&&(d[a]=_e[a]);return{$$typeof:l$1,type:s,key:c,ref:j,props:d,_owner:K$1.current}}function N$2(s,e){return{$$typeof:l$1,type:s.type,key:e,ref:s.ref,props:s.props,_owner:s._owner}}function O$2(s){return typeof s=="object"&&s!==null&&s.$$typeof===l$1}function escape$1(s){var e={"=":"=0",":":"=2"};return"$"+s.replace(/[=:]/g,function(o){return e[o]})}var P$1=/\/+/g;function Q$1(s,e){return typeof s=="object"&&s!==null&&s.key!=null?escape$1(""+s.key):e.toString(36)}function R$1(s,e,o,a,d){var c=typeof s;(c==="undefined"||c==="boolean")&&(s=null);var j=!1;if(s===null)j=!0;else switch(c){case"string":case"number":j=!0;break;case"object":switch(s.$$typeof){case l$1:case n$1:j=!0}}if(j)return j=s,d=d(j),s=a===""?"."+Q$1(j,0):a,I$1(d)?(o="",s!=null&&(o=s.replace(P$1,"$&/")+"/"),R$1(d,e,o,"",function(yt){return yt})):d!=null&&(O$2(d)&&(d=N$2(d,o+(!d.key||j&&j.key===d.key?"":(""+d.key).replace(P$1,"$&/")+"/")+s)),e.push(d)),1;if(j=0,a=a===""?".":a+":",I$1(s))for(var _e=0;_e<s.length;_e++){c=s[_e];var pt=a+Q$1(c,_e);j+=R$1(c,e,o,pt,d)}else if(pt=A$1(s),typeof pt=="function")for(s=pt.call(s),_e=0;!(c=s.next()).done;)c=c.value,pt=a+Q$1(c,_e++),j+=R$1(c,e,o,pt,d);else if(c==="object")throw e=String(s),Error("Objects are not valid as a React child (found: "+(e==="[object Object]"?"object with keys {"+Object.keys(s).join(", ")+"}":e)+"). If you meant to render a collection of children, use an array instead.");return j}function S$2(s,e,o){if(s==null)return s;var a=[],d=0;return R$1(s,a,"","",function(c){return e.call(o,c,d++)}),a}function T$1(s){if(s._status===-1){var e=s._result;e=e(),e.then(function(o){(s._status===0||s._status===-1)&&(s._status=1,s._result=o)},function(o){(s._status===0||s._status===-1)&&(s._status=2,s._result=o)}),s._status===-1&&(s._status=0,s._result=e)}if(s._status===1)return s._result.default;throw s._result}var U$2={current:null},V$1={transition:null},W$1={ReactCurrentDispatcher:U$2,ReactCurrentBatchConfig:V$1,ReactCurrentOwner:K$1};function X$1(){throw Error("act(...) is not supported in production builds of React.")}react_production_min.Children={map:S$2,forEach:function(s,e,o){S$2(s,function(){e.apply(this,arguments)},o)},count:function(s){var e=0;return S$2(s,function(){e++}),e},toArray:function(s){return S$2(s,function(e){return e})||[]},only:function(s){if(!O$2(s))throw Error("React.Children.only expected to receive a single React element child.");return s}};react_production_min.Component=E$1;react_production_min.Fragment=p$2;react_production_min.Profiler=r;react_production_min.PureComponent=G$1;react_production_min.StrictMode=q$1;react_production_min.Suspense=w;react_production_min.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=W$1;react_production_min.act=X$1;react_production_min.cloneElement=function(s,e,o){if(s==null)throw Error("React.cloneElement(...): The argument must be a React element, but you passed "+s+".");var a=C$2({},s.props),d=s.key,c=s.ref,j=s._owner;if(e!=null){if(e.ref!==void 0&&(c=e.ref,j=K$1.current),e.key!==void 0&&(d=""+e.key),s.type&&s.type.defaultProps)var _e=s.type.defaultProps;for(pt in e)J.call(e,pt)&&!L$2.hasOwnProperty(pt)&&(a[pt]=e[pt]===void 0&&_e!==void 0?_e[pt]:e[pt])}var pt=arguments.length-2;if(pt===1)a.children=o;else if(1<pt){_e=Array(pt);for(var yt=0;yt<pt;yt++)_e[yt]=arguments[yt+2];a.children=_e}return{$$typeof:l$1,type:s.type,key:d,ref:c,props:a,_owner:j}};react_production_min.createContext=function(s){return s={$$typeof:u,_currentValue:s,_currentValue2:s,_threadCount:0,Provider:null,Consumer:null,_defaultValue:null,_globalName:null},s.Provider={$$typeof:t,_context:s},s.Consumer=s};react_production_min.createElement=M$2;react_production_min.createFactory=function(s){var e=M$2.bind(null,s);return e.type=s,e};react_production_min.createRef=function(){return{current:null}};react_production_min.forwardRef=function(s){return{$$typeof:v$2,render:s}};react_production_min.isValidElement=O$2;react_production_min.lazy=function(s){return{$$typeof:y,_payload:{_status:-1,_result:s},_init:T$1}};react_production_min.memo=function(s,e){return{$$typeof:x$1,type:s,compare:e===void 0?null:e}};react_production_min.startTransition=function(s){var e=V$1.transition;V$1.transition={};try{s()}finally{V$1.transition=e}};react_production_min.unstable_act=X$1;react_production_min.useCallback=function(s,e){return U$2.current.useCallback(s,e)};react_production_min.useContext=function(s){return U$2.current.useContext(s)};react_production_min.useDebugValue=function(){};react_production_min.useDeferredValue=function(s){return U$2.current.useDeferredValue(s)};react_production_min.useEffect=function(s,e){return U$2.current.useEffect(s,e)};react_production_min.useId=function(){return U$2.current.useId()};react_production_min.useImperativeHandle=function(s,e,o){return U$2.current.useImperativeHandle(s,e,o)};react_production_min.useInsertionEffect=function(s,e){return U$2.current.useInsertionEffect(s,e)};react_production_min.useLayoutEffect=function(s,e){return U$2.current.useLayoutEffect(s,e)};react_production_min.useMemo=function(s,e){return U$2.current.useMemo(s,e)};react_production_min.useReducer=function(s,e,o){return U$2.current.useReducer(s,e,o)};react_production_min.useRef=function(s){return U$2.current.useRef(s)};react_production_min.useState=function(s){return U$2.current.useState(s)};react_production_min.useSyncExternalStore=function(s,e,o){return U$2.current.useSyncExternalStore(s,e,o)};react_production_min.useTransition=function(){return U$2.current.useTransition()};react_production_min.version="18.3.1";react.exports=react_production_min;var reactExports=react.exports;const index=getDefaultExportFromCjs$1(reactExports),React=_mergeNamespaces({__proto__:null,default:index},[reactExports]);/**
 * @license React
 * react-jsx-runtime.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var f=reactExports,k=Symbol.for("react.element"),l=Symbol.for("react.fragment"),m$1=Object.prototype.hasOwnProperty,n=f.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED.ReactCurrentOwner,p$1={key:!0,ref:!0,__self:!0,__source:!0};function q(s,e,o){var a,d={},c=null,j=null;o!==void 0&&(c=""+o),e.key!==void 0&&(c=""+e.key),e.ref!==void 0&&(j=e.ref);for(a in e)m$1.call(e,a)&&!p$1.hasOwnProperty(a)&&(d[a]=e[a]);if(s&&s.defaultProps)for(a in e=s.defaultProps,e)d[a]===void 0&&(d[a]=e[a]);return{$$typeof:k,type:s,key:c,ref:j,props:d,_owner:n.current}}reactJsxRuntime_production_min.Fragment=l;reactJsxRuntime_production_min.jsx=q;reactJsxRuntime_production_min.jsxs=q;jsxRuntime.exports=reactJsxRuntime_production_min;var jsxRuntimeExports=jsxRuntime.exports,client={},reactDom={exports:{}},reactDom_production_min={},scheduler={exports:{}},scheduler_production_min={};/**
 * @license React
 * scheduler.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */(function(s){function e(Ft,xt){var g=Ft.length;Ft.push(xt);e:for(;0<g;){var wt=g-1>>>1,nr=Ft[wt];if(0<d(nr,xt))Ft[wt]=xt,Ft[g]=nr,g=wt;else break e}}function o(Ft){return Ft.length===0?null:Ft[0]}function a(Ft){if(Ft.length===0)return null;var xt=Ft[0],g=Ft.pop();if(g!==xt){Ft[0]=g;e:for(var wt=0,nr=Ft.length,or=nr>>>1;wt<or;){var cr=2*(wt+1)-1,Rr=Ft[cr],Ar=cr+1,pr=Ft[Ar];if(0>d(Rr,g))Ar<nr&&0>d(pr,Rr)?(Ft[wt]=pr,Ft[Ar]=g,wt=Ar):(Ft[wt]=Rr,Ft[cr]=g,wt=cr);else if(Ar<nr&&0>d(pr,g))Ft[wt]=pr,Ft[Ar]=g,wt=Ar;else break e}}return xt}function d(Ft,xt){var g=Ft.sortIndex-xt.sortIndex;return g!==0?g:Ft.id-xt.id}if(typeof performance=="object"&&typeof performance.now=="function"){var c=performance;s.unstable_now=function(){return c.now()}}else{var j=Date,_e=j.now();s.unstable_now=function(){return j.now()-_e}}var pt=[],yt=[],ct=1,Ct=null,qt=3,Ot=!1,Lt=!1,Qt=!1,ir=typeof setTimeout=="function"?setTimeout:null,er=typeof clearTimeout=="function"?clearTimeout:null,tr=typeof setImmediate<"u"?setImmediate:null;typeof navigator<"u"&&navigator.scheduling!==void 0&&navigator.scheduling.isInputPending!==void 0&&navigator.scheduling.isInputPending.bind(navigator.scheduling);function sr(Ft){for(var xt=o(yt);xt!==null;){if(xt.callback===null)a(yt);else if(xt.startTime<=Ft)a(yt),xt.sortIndex=xt.expirationTime,e(pt,xt);else break;xt=o(yt)}}function ar(Ft){if(Qt=!1,sr(Ft),!Lt)if(o(pt)!==null)Lt=!0,Rt(hr);else{var xt=o(yt);xt!==null&&kt(ar,xt.startTime-Ft)}}function hr(Ft,xt){Lt=!1,Qt&&(Qt=!1,er(ur),ur=-1),Ot=!0;var g=qt;try{for(sr(xt),Ct=o(pt);Ct!==null&&(!(Ct.expirationTime>xt)||Ft&&!Mt());){var wt=Ct.callback;if(typeof wt=="function"){Ct.callback=null,qt=Ct.priorityLevel;var nr=wt(Ct.expirationTime<=xt);xt=s.unstable_now(),typeof nr=="function"?Ct.callback=nr:Ct===o(pt)&&a(pt),sr(xt)}else a(pt);Ct=o(pt)}if(Ct!==null)var or=!0;else{var cr=o(yt);cr!==null&&kt(ar,cr.startTime-xt),or=!1}return or}finally{Ct=null,qt=g,Ot=!1}}var _r=!1,dr=null,ur=-1,lr=5,gr=-1;function Mt(){return!(s.unstable_now()-gr<lr)}function h(){if(dr!==null){var Ft=s.unstable_now();gr=Ft;var xt=!0;try{xt=dr(!0,Ft)}finally{xt?_():(_r=!1,dr=null)}}else _r=!1}var _;if(typeof tr=="function")_=function(){tr(h)};else if(typeof MessageChannel<"u"){var b=new MessageChannel,lt=b.port2;b.port1.onmessage=h,_=function(){lt.postMessage(null)}}else _=function(){ir(h,0)};function Rt(Ft){dr=Ft,_r||(_r=!0,_())}function kt(Ft,xt){ur=ir(function(){Ft(s.unstable_now())},xt)}s.unstable_IdlePriority=5,s.unstable_ImmediatePriority=1,s.unstable_LowPriority=4,s.unstable_NormalPriority=3,s.unstable_Profiling=null,s.unstable_UserBlockingPriority=2,s.unstable_cancelCallback=function(Ft){Ft.callback=null},s.unstable_continueExecution=function(){Lt||Ot||(Lt=!0,Rt(hr))},s.unstable_forceFrameRate=function(Ft){0>Ft||125<Ft?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):lr=0<Ft?Math.floor(1e3/Ft):5},s.unstable_getCurrentPriorityLevel=function(){return qt},s.unstable_getFirstCallbackNode=function(){return o(pt)},s.unstable_next=function(Ft){switch(qt){case 1:case 2:case 3:var xt=3;break;default:xt=qt}var g=qt;qt=xt;try{return Ft()}finally{qt=g}},s.unstable_pauseExecution=function(){},s.unstable_requestPaint=function(){},s.unstable_runWithPriority=function(Ft,xt){switch(Ft){case 1:case 2:case 3:case 4:case 5:break;default:Ft=3}var g=qt;qt=Ft;try{return xt()}finally{qt=g}},s.unstable_scheduleCallback=function(Ft,xt,g){var wt=s.unstable_now();switch(typeof g=="object"&&g!==null?(g=g.delay,g=typeof g=="number"&&0<g?wt+g:wt):g=wt,Ft){case 1:var nr=-1;break;case 2:nr=250;break;case 5:nr=1073741823;break;case 4:nr=1e4;break;default:nr=5e3}return nr=g+nr,Ft={id:ct++,callback:xt,priorityLevel:Ft,startTime:g,expirationTime:nr,sortIndex:-1},g>wt?(Ft.sortIndex=g,e(yt,Ft),o(pt)===null&&Ft===o(yt)&&(Qt?(er(ur),ur=-1):Qt=!0,kt(ar,g-wt))):(Ft.sortIndex=nr,e(pt,Ft),Lt||Ot||(Lt=!0,Rt(hr))),Ft},s.unstable_shouldYield=Mt,s.unstable_wrapCallback=function(Ft){var xt=qt;return function(){var g=qt;qt=xt;try{return Ft.apply(this,arguments)}finally{qt=g}}}})(scheduler_production_min);scheduler.exports=scheduler_production_min;var schedulerExports=scheduler.exports;/**
 * @license React
 * react-dom.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var aa=reactExports,ca=schedulerExports;function p(s){for(var e="https://reactjs.org/docs/error-decoder.html?invariant="+s,o=1;o<arguments.length;o++)e+="&args[]="+encodeURIComponent(arguments[o]);return"Minified React error #"+s+"; visit "+e+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}var da=new Set,ea={};function fa(s,e){ha(s,e),ha(s+"Capture",e)}function ha(s,e){for(ea[s]=e,s=0;s<e.length;s++)da.add(e[s])}var ia=!(typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"),ja=Object.prototype.hasOwnProperty,ka=/^[:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD][:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD\-.0-9\u00B7\u0300-\u036F\u203F-\u2040]*$/,la={},ma={};function oa(s){return ja.call(ma,s)?!0:ja.call(la,s)?!1:ka.test(s)?ma[s]=!0:(la[s]=!0,!1)}function pa(s,e,o,a){if(o!==null&&o.type===0)return!1;switch(typeof e){case"function":case"symbol":return!0;case"boolean":return a?!1:o!==null?!o.acceptsBooleans:(s=s.toLowerCase().slice(0,5),s!=="data-"&&s!=="aria-");default:return!1}}function qa(s,e,o,a){if(e===null||typeof e>"u"||pa(s,e,o,a))return!0;if(a)return!1;if(o!==null)switch(o.type){case 3:return!e;case 4:return e===!1;case 5:return isNaN(e);case 6:return isNaN(e)||1>e}return!1}function v$1(s,e,o,a,d,c,j){this.acceptsBooleans=e===2||e===3||e===4,this.attributeName=a,this.attributeNamespace=d,this.mustUseProperty=o,this.propertyName=s,this.type=e,this.sanitizeURL=c,this.removeEmptyString=j}var z={};"children dangerouslySetInnerHTML defaultValue defaultChecked innerHTML suppressContentEditableWarning suppressHydrationWarning style".split(" ").forEach(function(s){z[s]=new v$1(s,0,!1,s,null,!1,!1)});[["acceptCharset","accept-charset"],["className","class"],["htmlFor","for"],["httpEquiv","http-equiv"]].forEach(function(s){var e=s[0];z[e]=new v$1(e,1,!1,s[1],null,!1,!1)});["contentEditable","draggable","spellCheck","value"].forEach(function(s){z[s]=new v$1(s,2,!1,s.toLowerCase(),null,!1,!1)});["autoReverse","externalResourcesRequired","focusable","preserveAlpha"].forEach(function(s){z[s]=new v$1(s,2,!1,s,null,!1,!1)});"allowFullScreen async autoFocus autoPlay controls default defer disabled disablePictureInPicture disableRemotePlayback formNoValidate hidden loop noModule noValidate open playsInline readOnly required reversed scoped seamless itemScope".split(" ").forEach(function(s){z[s]=new v$1(s,3,!1,s.toLowerCase(),null,!1,!1)});["checked","multiple","muted","selected"].forEach(function(s){z[s]=new v$1(s,3,!0,s,null,!1,!1)});["capture","download"].forEach(function(s){z[s]=new v$1(s,4,!1,s,null,!1,!1)});["cols","rows","size","span"].forEach(function(s){z[s]=new v$1(s,6,!1,s,null,!1,!1)});["rowSpan","start"].forEach(function(s){z[s]=new v$1(s,5,!1,s.toLowerCase(),null,!1,!1)});var ra=/[\-:]([a-z])/g;function sa(s){return s[1].toUpperCase()}"accent-height alignment-baseline arabic-form baseline-shift cap-height clip-path clip-rule color-interpolation color-interpolation-filters color-profile color-rendering dominant-baseline enable-background fill-opacity fill-rule flood-color flood-opacity font-family font-size font-size-adjust font-stretch font-style font-variant font-weight glyph-name glyph-orientation-horizontal glyph-orientation-vertical horiz-adv-x horiz-origin-x image-rendering letter-spacing lighting-color marker-end marker-mid marker-start overline-position overline-thickness paint-order panose-1 pointer-events rendering-intent shape-rendering stop-color stop-opacity strikethrough-position strikethrough-thickness stroke-dasharray stroke-dashoffset stroke-linecap stroke-linejoin stroke-miterlimit stroke-opacity stroke-width text-anchor text-decoration text-rendering underline-position underline-thickness unicode-bidi unicode-range units-per-em v-alphabetic v-hanging v-ideographic v-mathematical vector-effect vert-adv-y vert-origin-x vert-origin-y word-spacing writing-mode xmlns:xlink x-height".split(" ").forEach(function(s){var e=s.replace(ra,sa);z[e]=new v$1(e,1,!1,s,null,!1,!1)});"xlink:actuate xlink:arcrole xlink:role xlink:show xlink:title xlink:type".split(" ").forEach(function(s){var e=s.replace(ra,sa);z[e]=new v$1(e,1,!1,s,"http://www.w3.org/1999/xlink",!1,!1)});["xml:base","xml:lang","xml:space"].forEach(function(s){var e=s.replace(ra,sa);z[e]=new v$1(e,1,!1,s,"http://www.w3.org/XML/1998/namespace",!1,!1)});["tabIndex","crossOrigin"].forEach(function(s){z[s]=new v$1(s,1,!1,s.toLowerCase(),null,!1,!1)});z.xlinkHref=new v$1("xlinkHref",1,!1,"xlink:href","http://www.w3.org/1999/xlink",!0,!1);["src","href","action","formAction"].forEach(function(s){z[s]=new v$1(s,1,!1,s.toLowerCase(),null,!0,!0)});function ta(s,e,o,a){var d=z.hasOwnProperty(e)?z[e]:null;(d!==null?d.type!==0:a||!(2<e.length)||e[0]!=="o"&&e[0]!=="O"||e[1]!=="n"&&e[1]!=="N")&&(qa(e,o,d,a)&&(o=null),a||d===null?oa(e)&&(o===null?s.removeAttribute(e):s.setAttribute(e,""+o)):d.mustUseProperty?s[d.propertyName]=o===null?d.type===3?!1:"":o:(e=d.attributeName,a=d.attributeNamespace,o===null?s.removeAttribute(e):(d=d.type,o=d===3||d===4&&o===!0?"":""+o,a?s.setAttributeNS(a,e,o):s.setAttribute(e,o))))}var ua=aa.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED,va=Symbol.for("react.element"),wa=Symbol.for("react.portal"),ya=Symbol.for("react.fragment"),za=Symbol.for("react.strict_mode"),Aa=Symbol.for("react.profiler"),Ba=Symbol.for("react.provider"),Ca=Symbol.for("react.context"),Da=Symbol.for("react.forward_ref"),Ea=Symbol.for("react.suspense"),Fa=Symbol.for("react.suspense_list"),Ga=Symbol.for("react.memo"),Ha=Symbol.for("react.lazy"),Ia=Symbol.for("react.offscreen"),Ja=Symbol.iterator;function Ka(s){return s===null||typeof s!="object"?null:(s=Ja&&s[Ja]||s["@@iterator"],typeof s=="function"?s:null)}var A=Object.assign,La;function Ma(s){if(La===void 0)try{throw Error()}catch(o){var e=o.stack.trim().match(/\n( *(at )?)/);La=e&&e[1]||""}return`
`+La+s}var Na=!1;function Oa(s,e){if(!s||Na)return"";Na=!0;var o=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{if(e)if(e=function(){throw Error()},Object.defineProperty(e.prototype,"props",{set:function(){throw Error()}}),typeof Reflect=="object"&&Reflect.construct){try{Reflect.construct(e,[])}catch(yt){var a=yt}Reflect.construct(s,[],e)}else{try{e.call()}catch(yt){a=yt}s.call(e.prototype)}else{try{throw Error()}catch(yt){a=yt}s()}}catch(yt){if(yt&&a&&typeof yt.stack=="string"){for(var d=yt.stack.split(`
`),c=a.stack.split(`
`),j=d.length-1,_e=c.length-1;1<=j&&0<=_e&&d[j]!==c[_e];)_e--;for(;1<=j&&0<=_e;j--,_e--)if(d[j]!==c[_e]){if(j!==1||_e!==1)do if(j--,_e--,0>_e||d[j]!==c[_e]){var pt=`
`+d[j].replace(" at new "," at ");return s.displayName&&pt.includes("<anonymous>")&&(pt=pt.replace("<anonymous>",s.displayName)),pt}while(1<=j&&0<=_e);break}}}finally{Na=!1,Error.prepareStackTrace=o}return(s=s?s.displayName||s.name:"")?Ma(s):""}function Pa(s){switch(s.tag){case 5:return Ma(s.type);case 16:return Ma("Lazy");case 13:return Ma("Suspense");case 19:return Ma("SuspenseList");case 0:case 2:case 15:return s=Oa(s.type,!1),s;case 11:return s=Oa(s.type.render,!1),s;case 1:return s=Oa(s.type,!0),s;default:return""}}function Qa(s){if(s==null)return null;if(typeof s=="function")return s.displayName||s.name||null;if(typeof s=="string")return s;switch(s){case ya:return"Fragment";case wa:return"Portal";case Aa:return"Profiler";case za:return"StrictMode";case Ea:return"Suspense";case Fa:return"SuspenseList"}if(typeof s=="object")switch(s.$$typeof){case Ca:return(s.displayName||"Context")+".Consumer";case Ba:return(s._context.displayName||"Context")+".Provider";case Da:var e=s.render;return s=s.displayName,s||(s=e.displayName||e.name||"",s=s!==""?"ForwardRef("+s+")":"ForwardRef"),s;case Ga:return e=s.displayName||null,e!==null?e:Qa(s.type)||"Memo";case Ha:e=s._payload,s=s._init;try{return Qa(s(e))}catch{}}return null}function Ra(s){var e=s.type;switch(s.tag){case 24:return"Cache";case 9:return(e.displayName||"Context")+".Consumer";case 10:return(e._context.displayName||"Context")+".Provider";case 18:return"DehydratedFragment";case 11:return s=e.render,s=s.displayName||s.name||"",e.displayName||(s!==""?"ForwardRef("+s+")":"ForwardRef");case 7:return"Fragment";case 5:return e;case 4:return"Portal";case 3:return"Root";case 6:return"Text";case 16:return Qa(e);case 8:return e===za?"StrictMode":"Mode";case 22:return"Offscreen";case 12:return"Profiler";case 21:return"Scope";case 13:return"Suspense";case 19:return"SuspenseList";case 25:return"TracingMarker";case 1:case 0:case 17:case 2:case 14:case 15:if(typeof e=="function")return e.displayName||e.name||null;if(typeof e=="string")return e}return null}function Sa(s){switch(typeof s){case"boolean":case"number":case"string":case"undefined":return s;case"object":return s;default:return""}}function Ta(s){var e=s.type;return(s=s.nodeName)&&s.toLowerCase()==="input"&&(e==="checkbox"||e==="radio")}function Ua(s){var e=Ta(s)?"checked":"value",o=Object.getOwnPropertyDescriptor(s.constructor.prototype,e),a=""+s[e];if(!s.hasOwnProperty(e)&&typeof o<"u"&&typeof o.get=="function"&&typeof o.set=="function"){var d=o.get,c=o.set;return Object.defineProperty(s,e,{configurable:!0,get:function(){return d.call(this)},set:function(j){a=""+j,c.call(this,j)}}),Object.defineProperty(s,e,{enumerable:o.enumerable}),{getValue:function(){return a},setValue:function(j){a=""+j},stopTracking:function(){s._valueTracker=null,delete s[e]}}}}function Va(s){s._valueTracker||(s._valueTracker=Ua(s))}function Wa(s){if(!s)return!1;var e=s._valueTracker;if(!e)return!0;var o=e.getValue(),a="";return s&&(a=Ta(s)?s.checked?"true":"false":s.value),s=a,s!==o?(e.setValue(s),!0):!1}function Xa(s){if(s=s||(typeof document<"u"?document:void 0),typeof s>"u")return null;try{return s.activeElement||s.body}catch{return s.body}}function Ya(s,e){var o=e.checked;return A({},e,{defaultChecked:void 0,defaultValue:void 0,value:void 0,checked:o??s._wrapperState.initialChecked})}function Za(s,e){var o=e.defaultValue==null?"":e.defaultValue,a=e.checked!=null?e.checked:e.defaultChecked;o=Sa(e.value!=null?e.value:o),s._wrapperState={initialChecked:a,initialValue:o,controlled:e.type==="checkbox"||e.type==="radio"?e.checked!=null:e.value!=null}}function ab(s,e){e=e.checked,e!=null&&ta(s,"checked",e,!1)}function bb(s,e){ab(s,e);var o=Sa(e.value),a=e.type;if(o!=null)a==="number"?(o===0&&s.value===""||s.value!=o)&&(s.value=""+o):s.value!==""+o&&(s.value=""+o);else if(a==="submit"||a==="reset"){s.removeAttribute("value");return}e.hasOwnProperty("value")?cb(s,e.type,o):e.hasOwnProperty("defaultValue")&&cb(s,e.type,Sa(e.defaultValue)),e.checked==null&&e.defaultChecked!=null&&(s.defaultChecked=!!e.defaultChecked)}function db$1(s,e,o){if(e.hasOwnProperty("value")||e.hasOwnProperty("defaultValue")){var a=e.type;if(!(a!=="submit"&&a!=="reset"||e.value!==void 0&&e.value!==null))return;e=""+s._wrapperState.initialValue,o||e===s.value||(s.value=e),s.defaultValue=e}o=s.name,o!==""&&(s.name=""),s.defaultChecked=!!s._wrapperState.initialChecked,o!==""&&(s.name=o)}function cb(s,e,o){(e!=="number"||Xa(s.ownerDocument)!==s)&&(o==null?s.defaultValue=""+s._wrapperState.initialValue:s.defaultValue!==""+o&&(s.defaultValue=""+o))}var eb=Array.isArray;function fb(s,e,o,a){if(s=s.options,e){e={};for(var d=0;d<o.length;d++)e["$"+o[d]]=!0;for(o=0;o<s.length;o++)d=e.hasOwnProperty("$"+s[o].value),s[o].selected!==d&&(s[o].selected=d),d&&a&&(s[o].defaultSelected=!0)}else{for(o=""+Sa(o),e=null,d=0;d<s.length;d++){if(s[d].value===o){s[d].selected=!0,a&&(s[d].defaultSelected=!0);return}e!==null||s[d].disabled||(e=s[d])}e!==null&&(e.selected=!0)}}function gb(s,e){if(e.dangerouslySetInnerHTML!=null)throw Error(p(91));return A({},e,{value:void 0,defaultValue:void 0,children:""+s._wrapperState.initialValue})}function hb(s,e){var o=e.value;if(o==null){if(o=e.children,e=e.defaultValue,o!=null){if(e!=null)throw Error(p(92));if(eb(o)){if(1<o.length)throw Error(p(93));o=o[0]}e=o}e==null&&(e=""),o=e}s._wrapperState={initialValue:Sa(o)}}function ib(s,e){var o=Sa(e.value),a=Sa(e.defaultValue);o!=null&&(o=""+o,o!==s.value&&(s.value=o),e.defaultValue==null&&s.defaultValue!==o&&(s.defaultValue=o)),a!=null&&(s.defaultValue=""+a)}function jb(s){var e=s.textContent;e===s._wrapperState.initialValue&&e!==""&&e!==null&&(s.value=e)}function kb(s){switch(s){case"svg":return"http://www.w3.org/2000/svg";case"math":return"http://www.w3.org/1998/Math/MathML";default:return"http://www.w3.org/1999/xhtml"}}function lb(s,e){return s==null||s==="http://www.w3.org/1999/xhtml"?kb(e):s==="http://www.w3.org/2000/svg"&&e==="foreignObject"?"http://www.w3.org/1999/xhtml":s}var mb,nb=function(s){return typeof MSApp<"u"&&MSApp.execUnsafeLocalFunction?function(e,o,a,d){MSApp.execUnsafeLocalFunction(function(){return s(e,o,a,d)})}:s}(function(s,e){if(s.namespaceURI!=="http://www.w3.org/2000/svg"||"innerHTML"in s)s.innerHTML=e;else{for(mb=mb||document.createElement("div"),mb.innerHTML="<svg>"+e.valueOf().toString()+"</svg>",e=mb.firstChild;s.firstChild;)s.removeChild(s.firstChild);for(;e.firstChild;)s.appendChild(e.firstChild)}});function ob(s,e){if(e){var o=s.firstChild;if(o&&o===s.lastChild&&o.nodeType===3){o.nodeValue=e;return}}s.textContent=e}var pb={animationIterationCount:!0,aspectRatio:!0,borderImageOutset:!0,borderImageSlice:!0,borderImageWidth:!0,boxFlex:!0,boxFlexGroup:!0,boxOrdinalGroup:!0,columnCount:!0,columns:!0,flex:!0,flexGrow:!0,flexPositive:!0,flexShrink:!0,flexNegative:!0,flexOrder:!0,gridArea:!0,gridRow:!0,gridRowEnd:!0,gridRowSpan:!0,gridRowStart:!0,gridColumn:!0,gridColumnEnd:!0,gridColumnSpan:!0,gridColumnStart:!0,fontWeight:!0,lineClamp:!0,lineHeight:!0,opacity:!0,order:!0,orphans:!0,tabSize:!0,widows:!0,zIndex:!0,zoom:!0,fillOpacity:!0,floodOpacity:!0,stopOpacity:!0,strokeDasharray:!0,strokeDashoffset:!0,strokeMiterlimit:!0,strokeOpacity:!0,strokeWidth:!0},qb=["Webkit","ms","Moz","O"];Object.keys(pb).forEach(function(s){qb.forEach(function(e){e=e+s.charAt(0).toUpperCase()+s.substring(1),pb[e]=pb[s]})});function rb(s,e,o){return e==null||typeof e=="boolean"||e===""?"":o||typeof e!="number"||e===0||pb.hasOwnProperty(s)&&pb[s]?(""+e).trim():e+"px"}function sb(s,e){s=s.style;for(var o in e)if(e.hasOwnProperty(o)){var a=o.indexOf("--")===0,d=rb(o,e[o],a);o==="float"&&(o="cssFloat"),a?s.setProperty(o,d):s[o]=d}}var tb=A({menuitem:!0},{area:!0,base:!0,br:!0,col:!0,embed:!0,hr:!0,img:!0,input:!0,keygen:!0,link:!0,meta:!0,param:!0,source:!0,track:!0,wbr:!0});function ub(s,e){if(e){if(tb[s]&&(e.children!=null||e.dangerouslySetInnerHTML!=null))throw Error(p(137,s));if(e.dangerouslySetInnerHTML!=null){if(e.children!=null)throw Error(p(60));if(typeof e.dangerouslySetInnerHTML!="object"||!("__html"in e.dangerouslySetInnerHTML))throw Error(p(61))}if(e.style!=null&&typeof e.style!="object")throw Error(p(62))}}function vb(s,e){if(s.indexOf("-")===-1)return typeof e.is=="string";switch(s){case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return!1;default:return!0}}var wb=null;function xb(s){return s=s.target||s.srcElement||window,s.correspondingUseElement&&(s=s.correspondingUseElement),s.nodeType===3?s.parentNode:s}var yb=null,zb=null,Ab=null;function Bb(s){if(s=Cb(s)){if(typeof yb!="function")throw Error(p(280));var e=s.stateNode;e&&(e=Db(e),yb(s.stateNode,s.type,e))}}function Eb(s){zb?Ab?Ab.push(s):Ab=[s]:zb=s}function Fb(){if(zb){var s=zb,e=Ab;if(Ab=zb=null,Bb(s),e)for(s=0;s<e.length;s++)Bb(e[s])}}function Gb(s,e){return s(e)}function Hb(){}var Ib=!1;function Jb(s,e,o){if(Ib)return s(e,o);Ib=!0;try{return Gb(s,e,o)}finally{Ib=!1,(zb!==null||Ab!==null)&&(Hb(),Fb())}}function Kb(s,e){var o=s.stateNode;if(o===null)return null;var a=Db(o);if(a===null)return null;o=a[e];e:switch(e){case"onClick":case"onClickCapture":case"onDoubleClick":case"onDoubleClickCapture":case"onMouseDown":case"onMouseDownCapture":case"onMouseMove":case"onMouseMoveCapture":case"onMouseUp":case"onMouseUpCapture":case"onMouseEnter":(a=!a.disabled)||(s=s.type,a=!(s==="button"||s==="input"||s==="select"||s==="textarea")),s=!a;break e;default:s=!1}if(s)return null;if(o&&typeof o!="function")throw Error(p(231,e,typeof o));return o}var Lb=!1;if(ia)try{var Mb={};Object.defineProperty(Mb,"passive",{get:function(){Lb=!0}}),window.addEventListener("test",Mb,Mb),window.removeEventListener("test",Mb,Mb)}catch{Lb=!1}function Nb(s,e,o,a,d,c,j,_e,pt){var yt=Array.prototype.slice.call(arguments,3);try{e.apply(o,yt)}catch(ct){this.onError(ct)}}var Ob=!1,Pb=null,Qb=!1,Rb=null,Sb={onError:function(s){Ob=!0,Pb=s}};function Tb(s,e,o,a,d,c,j,_e,pt){Ob=!1,Pb=null,Nb.apply(Sb,arguments)}function Ub(s,e,o,a,d,c,j,_e,pt){if(Tb.apply(this,arguments),Ob){if(Ob){var yt=Pb;Ob=!1,Pb=null}else throw Error(p(198));Qb||(Qb=!0,Rb=yt)}}function Vb(s){var e=s,o=s;if(s.alternate)for(;e.return;)e=e.return;else{s=e;do e=s,e.flags&4098&&(o=e.return),s=e.return;while(s)}return e.tag===3?o:null}function Wb(s){if(s.tag===13){var e=s.memoizedState;if(e===null&&(s=s.alternate,s!==null&&(e=s.memoizedState)),e!==null)return e.dehydrated}return null}function Xb(s){if(Vb(s)!==s)throw Error(p(188))}function Yb(s){var e=s.alternate;if(!e){if(e=Vb(s),e===null)throw Error(p(188));return e!==s?null:s}for(var o=s,a=e;;){var d=o.return;if(d===null)break;var c=d.alternate;if(c===null){if(a=d.return,a!==null){o=a;continue}break}if(d.child===c.child){for(c=d.child;c;){if(c===o)return Xb(d),s;if(c===a)return Xb(d),e;c=c.sibling}throw Error(p(188))}if(o.return!==a.return)o=d,a=c;else{for(var j=!1,_e=d.child;_e;){if(_e===o){j=!0,o=d,a=c;break}if(_e===a){j=!0,a=d,o=c;break}_e=_e.sibling}if(!j){for(_e=c.child;_e;){if(_e===o){j=!0,o=c,a=d;break}if(_e===a){j=!0,a=c,o=d;break}_e=_e.sibling}if(!j)throw Error(p(189))}}if(o.alternate!==a)throw Error(p(190))}if(o.tag!==3)throw Error(p(188));return o.stateNode.current===o?s:e}function Zb(s){return s=Yb(s),s!==null?$b(s):null}function $b(s){if(s.tag===5||s.tag===6)return s;for(s=s.child;s!==null;){var e=$b(s);if(e!==null)return e;s=s.sibling}return null}var ac=ca.unstable_scheduleCallback,bc=ca.unstable_cancelCallback,cc=ca.unstable_shouldYield,dc=ca.unstable_requestPaint,B$1=ca.unstable_now,ec$1=ca.unstable_getCurrentPriorityLevel,fc=ca.unstable_ImmediatePriority,gc=ca.unstable_UserBlockingPriority,hc=ca.unstable_NormalPriority,ic=ca.unstable_LowPriority,jc=ca.unstable_IdlePriority,kc=null,lc=null;function mc(s){if(lc&&typeof lc.onCommitFiberRoot=="function")try{lc.onCommitFiberRoot(kc,s,void 0,(s.current.flags&128)===128)}catch{}}var oc=Math.clz32?Math.clz32:nc,pc=Math.log,qc=Math.LN2;function nc(s){return s>>>=0,s===0?32:31-(pc(s)/qc|0)|0}var rc=64,sc=4194304;function tc(s){switch(s&-s){case 1:return 1;case 2:return 2;case 4:return 4;case 8:return 8;case 16:return 16;case 32:return 32;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return s&4194240;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return s&130023424;case 134217728:return 134217728;case 268435456:return 268435456;case 536870912:return 536870912;case 1073741824:return 1073741824;default:return s}}function uc(s,e){var o=s.pendingLanes;if(o===0)return 0;var a=0,d=s.suspendedLanes,c=s.pingedLanes,j=o&268435455;if(j!==0){var _e=j&~d;_e!==0?a=tc(_e):(c&=j,c!==0&&(a=tc(c)))}else j=o&~d,j!==0?a=tc(j):c!==0&&(a=tc(c));if(a===0)return 0;if(e!==0&&e!==a&&!(e&d)&&(d=a&-a,c=e&-e,d>=c||d===16&&(c&4194240)!==0))return e;if(a&4&&(a|=o&16),e=s.entangledLanes,e!==0)for(s=s.entanglements,e&=a;0<e;)o=31-oc(e),d=1<<o,a|=s[o],e&=~d;return a}function vc(s,e){switch(s){case 1:case 2:case 4:return e+250;case 8:case 16:case 32:case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return e+5e3;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return-1;case 134217728:case 268435456:case 536870912:case 1073741824:return-1;default:return-1}}function wc(s,e){for(var o=s.suspendedLanes,a=s.pingedLanes,d=s.expirationTimes,c=s.pendingLanes;0<c;){var j=31-oc(c),_e=1<<j,pt=d[j];pt===-1?(!(_e&o)||_e&a)&&(d[j]=vc(_e,e)):pt<=e&&(s.expiredLanes|=_e),c&=~_e}}function xc(s){return s=s.pendingLanes&-1073741825,s!==0?s:s&1073741824?1073741824:0}function yc(){var s=rc;return rc<<=1,!(rc&4194240)&&(rc=64),s}function zc(s){for(var e=[],o=0;31>o;o++)e.push(s);return e}function Ac(s,e,o){s.pendingLanes|=e,e!==536870912&&(s.suspendedLanes=0,s.pingedLanes=0),s=s.eventTimes,e=31-oc(e),s[e]=o}function Bc(s,e){var o=s.pendingLanes&~e;s.pendingLanes=e,s.suspendedLanes=0,s.pingedLanes=0,s.expiredLanes&=e,s.mutableReadLanes&=e,s.entangledLanes&=e,e=s.entanglements;var a=s.eventTimes;for(s=s.expirationTimes;0<o;){var d=31-oc(o),c=1<<d;e[d]=0,a[d]=-1,s[d]=-1,o&=~c}}function Cc(s,e){var o=s.entangledLanes|=e;for(s=s.entanglements;o;){var a=31-oc(o),d=1<<a;d&e|s[a]&e&&(s[a]|=e),o&=~d}}var C$1=0;function Dc(s){return s&=-s,1<s?4<s?s&268435455?16:536870912:4:1}var Ec,Fc,Gc,Hc,Ic,Jc=!1,Kc=[],Lc=null,Mc=null,Nc=null,Oc=new Map,Pc=new Map,Qc=[],Rc="mousedown mouseup touchcancel touchend touchstart auxclick dblclick pointercancel pointerdown pointerup dragend dragstart drop compositionend compositionstart keydown keypress keyup input textInput copy cut paste click change contextmenu reset submit".split(" ");function Sc(s,e){switch(s){case"focusin":case"focusout":Lc=null;break;case"dragenter":case"dragleave":Mc=null;break;case"mouseover":case"mouseout":Nc=null;break;case"pointerover":case"pointerout":Oc.delete(e.pointerId);break;case"gotpointercapture":case"lostpointercapture":Pc.delete(e.pointerId)}}function Tc(s,e,o,a,d,c){return s===null||s.nativeEvent!==c?(s={blockedOn:e,domEventName:o,eventSystemFlags:a,nativeEvent:c,targetContainers:[d]},e!==null&&(e=Cb(e),e!==null&&Fc(e)),s):(s.eventSystemFlags|=a,e=s.targetContainers,d!==null&&e.indexOf(d)===-1&&e.push(d),s)}function Uc(s,e,o,a,d){switch(e){case"focusin":return Lc=Tc(Lc,s,e,o,a,d),!0;case"dragenter":return Mc=Tc(Mc,s,e,o,a,d),!0;case"mouseover":return Nc=Tc(Nc,s,e,o,a,d),!0;case"pointerover":var c=d.pointerId;return Oc.set(c,Tc(Oc.get(c)||null,s,e,o,a,d)),!0;case"gotpointercapture":return c=d.pointerId,Pc.set(c,Tc(Pc.get(c)||null,s,e,o,a,d)),!0}return!1}function Vc(s){var e=Wc(s.target);if(e!==null){var o=Vb(e);if(o!==null){if(e=o.tag,e===13){if(e=Wb(o),e!==null){s.blockedOn=e,Ic(s.priority,function(){Gc(o)});return}}else if(e===3&&o.stateNode.current.memoizedState.isDehydrated){s.blockedOn=o.tag===3?o.stateNode.containerInfo:null;return}}}s.blockedOn=null}function Xc(s){if(s.blockedOn!==null)return!1;for(var e=s.targetContainers;0<e.length;){var o=Yc(s.domEventName,s.eventSystemFlags,e[0],s.nativeEvent);if(o===null){o=s.nativeEvent;var a=new o.constructor(o.type,o);wb=a,o.target.dispatchEvent(a),wb=null}else return e=Cb(o),e!==null&&Fc(e),s.blockedOn=o,!1;e.shift()}return!0}function Zc(s,e,o){Xc(s)&&o.delete(e)}function $c(){Jc=!1,Lc!==null&&Xc(Lc)&&(Lc=null),Mc!==null&&Xc(Mc)&&(Mc=null),Nc!==null&&Xc(Nc)&&(Nc=null),Oc.forEach(Zc),Pc.forEach(Zc)}function ad(s,e){s.blockedOn===e&&(s.blockedOn=null,Jc||(Jc=!0,ca.unstable_scheduleCallback(ca.unstable_NormalPriority,$c)))}function bd(s){function e(d){return ad(d,s)}if(0<Kc.length){ad(Kc[0],s);for(var o=1;o<Kc.length;o++){var a=Kc[o];a.blockedOn===s&&(a.blockedOn=null)}}for(Lc!==null&&ad(Lc,s),Mc!==null&&ad(Mc,s),Nc!==null&&ad(Nc,s),Oc.forEach(e),Pc.forEach(e),o=0;o<Qc.length;o++)a=Qc[o],a.blockedOn===s&&(a.blockedOn=null);for(;0<Qc.length&&(o=Qc[0],o.blockedOn===null);)Vc(o),o.blockedOn===null&&Qc.shift()}var cd=ua.ReactCurrentBatchConfig,dd=!0;function ed(s,e,o,a){var d=C$1,c=cd.transition;cd.transition=null;try{C$1=1,fd(s,e,o,a)}finally{C$1=d,cd.transition=c}}function gd(s,e,o,a){var d=C$1,c=cd.transition;cd.transition=null;try{C$1=4,fd(s,e,o,a)}finally{C$1=d,cd.transition=c}}function fd(s,e,o,a){if(dd){var d=Yc(s,e,o,a);if(d===null)hd(s,e,a,id,o),Sc(s,a);else if(Uc(d,s,e,o,a))a.stopPropagation();else if(Sc(s,a),e&4&&-1<Rc.indexOf(s)){for(;d!==null;){var c=Cb(d);if(c!==null&&Ec(c),c=Yc(s,e,o,a),c===null&&hd(s,e,a,id,o),c===d)break;d=c}d!==null&&a.stopPropagation()}else hd(s,e,a,null,o)}}var id=null;function Yc(s,e,o,a){if(id=null,s=xb(a),s=Wc(s),s!==null)if(e=Vb(s),e===null)s=null;else if(o=e.tag,o===13){if(s=Wb(e),s!==null)return s;s=null}else if(o===3){if(e.stateNode.current.memoizedState.isDehydrated)return e.tag===3?e.stateNode.containerInfo:null;s=null}else e!==s&&(s=null);return id=s,null}function jd(s){switch(s){case"cancel":case"click":case"close":case"contextmenu":case"copy":case"cut":case"auxclick":case"dblclick":case"dragend":case"dragstart":case"drop":case"focusin":case"focusout":case"input":case"invalid":case"keydown":case"keypress":case"keyup":case"mousedown":case"mouseup":case"paste":case"pause":case"play":case"pointercancel":case"pointerdown":case"pointerup":case"ratechange":case"reset":case"resize":case"seeked":case"submit":case"touchcancel":case"touchend":case"touchstart":case"volumechange":case"change":case"selectionchange":case"textInput":case"compositionstart":case"compositionend":case"compositionupdate":case"beforeblur":case"afterblur":case"beforeinput":case"blur":case"fullscreenchange":case"focus":case"hashchange":case"popstate":case"select":case"selectstart":return 1;case"drag":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"mousemove":case"mouseout":case"mouseover":case"pointermove":case"pointerout":case"pointerover":case"scroll":case"toggle":case"touchmove":case"wheel":case"mouseenter":case"mouseleave":case"pointerenter":case"pointerleave":return 4;case"message":switch(ec$1()){case fc:return 1;case gc:return 4;case hc:case ic:return 16;case jc:return 536870912;default:return 16}default:return 16}}var kd=null,ld=null,md=null;function nd(){if(md)return md;var s,e=ld,o=e.length,a,d="value"in kd?kd.value:kd.textContent,c=d.length;for(s=0;s<o&&e[s]===d[s];s++);var j=o-s;for(a=1;a<=j&&e[o-a]===d[c-a];a++);return md=d.slice(s,1<a?1-a:void 0)}function od(s){var e=s.keyCode;return"charCode"in s?(s=s.charCode,s===0&&e===13&&(s=13)):s=e,s===10&&(s=13),32<=s||s===13?s:0}function pd(){return!0}function qd(){return!1}function rd(s){function e(o,a,d,c,j){this._reactName=o,this._targetInst=d,this.type=a,this.nativeEvent=c,this.target=j,this.currentTarget=null;for(var _e in s)s.hasOwnProperty(_e)&&(o=s[_e],this[_e]=o?o(c):c[_e]);return this.isDefaultPrevented=(c.defaultPrevented!=null?c.defaultPrevented:c.returnValue===!1)?pd:qd,this.isPropagationStopped=qd,this}return A(e.prototype,{preventDefault:function(){this.defaultPrevented=!0;var o=this.nativeEvent;o&&(o.preventDefault?o.preventDefault():typeof o.returnValue!="unknown"&&(o.returnValue=!1),this.isDefaultPrevented=pd)},stopPropagation:function(){var o=this.nativeEvent;o&&(o.stopPropagation?o.stopPropagation():typeof o.cancelBubble!="unknown"&&(o.cancelBubble=!0),this.isPropagationStopped=pd)},persist:function(){},isPersistent:pd}),e}var sd={eventPhase:0,bubbles:0,cancelable:0,timeStamp:function(s){return s.timeStamp||Date.now()},defaultPrevented:0,isTrusted:0},td=rd(sd),ud=A({},sd,{view:0,detail:0}),vd=rd(ud),wd,xd,yd,Ad=A({},ud,{screenX:0,screenY:0,clientX:0,clientY:0,pageX:0,pageY:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,getModifierState:zd,button:0,buttons:0,relatedTarget:function(s){return s.relatedTarget===void 0?s.fromElement===s.srcElement?s.toElement:s.fromElement:s.relatedTarget},movementX:function(s){return"movementX"in s?s.movementX:(s!==yd&&(yd&&s.type==="mousemove"?(wd=s.screenX-yd.screenX,xd=s.screenY-yd.screenY):xd=wd=0,yd=s),wd)},movementY:function(s){return"movementY"in s?s.movementY:xd}}),Bd=rd(Ad),Cd=A({},Ad,{dataTransfer:0}),Dd=rd(Cd),Ed=A({},ud,{relatedTarget:0}),Fd=rd(Ed),Gd=A({},sd,{animationName:0,elapsedTime:0,pseudoElement:0}),Hd=rd(Gd),Id=A({},sd,{clipboardData:function(s){return"clipboardData"in s?s.clipboardData:window.clipboardData}}),Jd=rd(Id),Kd=A({},sd,{data:0}),Ld=rd(Kd),Md={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},Nd={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"},Od={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"};function Pd(s){var e=this.nativeEvent;return e.getModifierState?e.getModifierState(s):(s=Od[s])?!!e[s]:!1}function zd(){return Pd}var Qd=A({},ud,{key:function(s){if(s.key){var e=Md[s.key]||s.key;if(e!=="Unidentified")return e}return s.type==="keypress"?(s=od(s),s===13?"Enter":String.fromCharCode(s)):s.type==="keydown"||s.type==="keyup"?Nd[s.keyCode]||"Unidentified":""},code:0,location:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,repeat:0,locale:0,getModifierState:zd,charCode:function(s){return s.type==="keypress"?od(s):0},keyCode:function(s){return s.type==="keydown"||s.type==="keyup"?s.keyCode:0},which:function(s){return s.type==="keypress"?od(s):s.type==="keydown"||s.type==="keyup"?s.keyCode:0}}),Rd=rd(Qd),Sd=A({},Ad,{pointerId:0,width:0,height:0,pressure:0,tangentialPressure:0,tiltX:0,tiltY:0,twist:0,pointerType:0,isPrimary:0}),Td=rd(Sd),Ud=A({},ud,{touches:0,targetTouches:0,changedTouches:0,altKey:0,metaKey:0,ctrlKey:0,shiftKey:0,getModifierState:zd}),Vd=rd(Ud),Wd=A({},sd,{propertyName:0,elapsedTime:0,pseudoElement:0}),Xd=rd(Wd),Yd=A({},Ad,{deltaX:function(s){return"deltaX"in s?s.deltaX:"wheelDeltaX"in s?-s.wheelDeltaX:0},deltaY:function(s){return"deltaY"in s?s.deltaY:"wheelDeltaY"in s?-s.wheelDeltaY:"wheelDelta"in s?-s.wheelDelta:0},deltaZ:0,deltaMode:0}),Zd=rd(Yd),$d=[9,13,27,32],ae=ia&&"CompositionEvent"in window,be=null;ia&&"documentMode"in document&&(be=document.documentMode);var ce=ia&&"TextEvent"in window&&!be,de=ia&&(!ae||be&&8<be&&11>=be),ee=" ",fe=!1;function ge(s,e){switch(s){case"keyup":return $d.indexOf(e.keyCode)!==-1;case"keydown":return e.keyCode!==229;case"keypress":case"mousedown":case"focusout":return!0;default:return!1}}function he(s){return s=s.detail,typeof s=="object"&&"data"in s?s.data:null}var ie=!1;function je(s,e){switch(s){case"compositionend":return he(e);case"keypress":return e.which!==32?null:(fe=!0,ee);case"textInput":return s=e.data,s===ee&&fe?null:s;default:return null}}function ke(s,e){if(ie)return s==="compositionend"||!ae&&ge(s,e)?(s=nd(),md=ld=kd=null,ie=!1,s):null;switch(s){case"paste":return null;case"keypress":if(!(e.ctrlKey||e.altKey||e.metaKey)||e.ctrlKey&&e.altKey){if(e.char&&1<e.char.length)return e.char;if(e.which)return String.fromCharCode(e.which)}return null;case"compositionend":return de&&e.locale!=="ko"?null:e.data;default:return null}}var le={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};function me(s){var e=s&&s.nodeName&&s.nodeName.toLowerCase();return e==="input"?!!le[s.type]:e==="textarea"}function ne(s,e,o,a){Eb(a),e=oe(e,"onChange"),0<e.length&&(o=new td("onChange","change",null,o,a),s.push({event:o,listeners:e}))}var pe=null,qe=null;function re(s){se(s,0)}function te(s){var e=ue(s);if(Wa(e))return s}function ve(s,e){if(s==="change")return e}var we=!1;if(ia){var xe;if(ia){var ye="oninput"in document;if(!ye){var ze=document.createElement("div");ze.setAttribute("oninput","return;"),ye=typeof ze.oninput=="function"}xe=ye}else xe=!1;we=xe&&(!document.documentMode||9<document.documentMode)}function Ae(){pe&&(pe.detachEvent("onpropertychange",Be),qe=pe=null)}function Be(s){if(s.propertyName==="value"&&te(qe)){var e=[];ne(e,qe,s,xb(s)),Jb(re,e)}}function Ce(s,e,o){s==="focusin"?(Ae(),pe=e,qe=o,pe.attachEvent("onpropertychange",Be)):s==="focusout"&&Ae()}function De(s){if(s==="selectionchange"||s==="keyup"||s==="keydown")return te(qe)}function Ee(s,e){if(s==="click")return te(e)}function Fe(s,e){if(s==="input"||s==="change")return te(e)}function Ge(s,e){return s===e&&(s!==0||1/s===1/e)||s!==s&&e!==e}var He=typeof Object.is=="function"?Object.is:Ge;function Ie(s,e){if(He(s,e))return!0;if(typeof s!="object"||s===null||typeof e!="object"||e===null)return!1;var o=Object.keys(s),a=Object.keys(e);if(o.length!==a.length)return!1;for(a=0;a<o.length;a++){var d=o[a];if(!ja.call(e,d)||!He(s[d],e[d]))return!1}return!0}function Je(s){for(;s&&s.firstChild;)s=s.firstChild;return s}function Ke(s,e){var o=Je(s);s=0;for(var a;o;){if(o.nodeType===3){if(a=s+o.textContent.length,s<=e&&a>=e)return{node:o,offset:e-s};s=a}e:{for(;o;){if(o.nextSibling){o=o.nextSibling;break e}o=o.parentNode}o=void 0}o=Je(o)}}function Le(s,e){return s&&e?s===e?!0:s&&s.nodeType===3?!1:e&&e.nodeType===3?Le(s,e.parentNode):"contains"in s?s.contains(e):s.compareDocumentPosition?!!(s.compareDocumentPosition(e)&16):!1:!1}function Me(){for(var s=window,e=Xa();e instanceof s.HTMLIFrameElement;){try{var o=typeof e.contentWindow.location.href=="string"}catch{o=!1}if(o)s=e.contentWindow;else break;e=Xa(s.document)}return e}function Ne(s){var e=s&&s.nodeName&&s.nodeName.toLowerCase();return e&&(e==="input"&&(s.type==="text"||s.type==="search"||s.type==="tel"||s.type==="url"||s.type==="password")||e==="textarea"||s.contentEditable==="true")}function Oe(s){var e=Me(),o=s.focusedElem,a=s.selectionRange;if(e!==o&&o&&o.ownerDocument&&Le(o.ownerDocument.documentElement,o)){if(a!==null&&Ne(o)){if(e=a.start,s=a.end,s===void 0&&(s=e),"selectionStart"in o)o.selectionStart=e,o.selectionEnd=Math.min(s,o.value.length);else if(s=(e=o.ownerDocument||document)&&e.defaultView||window,s.getSelection){s=s.getSelection();var d=o.textContent.length,c=Math.min(a.start,d);a=a.end===void 0?c:Math.min(a.end,d),!s.extend&&c>a&&(d=a,a=c,c=d),d=Ke(o,c);var j=Ke(o,a);d&&j&&(s.rangeCount!==1||s.anchorNode!==d.node||s.anchorOffset!==d.offset||s.focusNode!==j.node||s.focusOffset!==j.offset)&&(e=e.createRange(),e.setStart(d.node,d.offset),s.removeAllRanges(),c>a?(s.addRange(e),s.extend(j.node,j.offset)):(e.setEnd(j.node,j.offset),s.addRange(e)))}}for(e=[],s=o;s=s.parentNode;)s.nodeType===1&&e.push({element:s,left:s.scrollLeft,top:s.scrollTop});for(typeof o.focus=="function"&&o.focus(),o=0;o<e.length;o++)s=e[o],s.element.scrollLeft=s.left,s.element.scrollTop=s.top}}var Pe=ia&&"documentMode"in document&&11>=document.documentMode,Qe=null,Re=null,Se=null,Te=!1;function Ue(s,e,o){var a=o.window===o?o.document:o.nodeType===9?o:o.ownerDocument;Te||Qe==null||Qe!==Xa(a)||(a=Qe,"selectionStart"in a&&Ne(a)?a={start:a.selectionStart,end:a.selectionEnd}:(a=(a.ownerDocument&&a.ownerDocument.defaultView||window).getSelection(),a={anchorNode:a.anchorNode,anchorOffset:a.anchorOffset,focusNode:a.focusNode,focusOffset:a.focusOffset}),Se&&Ie(Se,a)||(Se=a,a=oe(Re,"onSelect"),0<a.length&&(e=new td("onSelect","select",null,e,o),s.push({event:e,listeners:a}),e.target=Qe)))}function Ve(s,e){var o={};return o[s.toLowerCase()]=e.toLowerCase(),o["Webkit"+s]="webkit"+e,o["Moz"+s]="moz"+e,o}var We={animationend:Ve("Animation","AnimationEnd"),animationiteration:Ve("Animation","AnimationIteration"),animationstart:Ve("Animation","AnimationStart"),transitionend:Ve("Transition","TransitionEnd")},Xe$1={},Ye={};ia&&(Ye=document.createElement("div").style,"AnimationEvent"in window||(delete We.animationend.animation,delete We.animationiteration.animation,delete We.animationstart.animation),"TransitionEvent"in window||delete We.transitionend.transition);function Ze(s){if(Xe$1[s])return Xe$1[s];if(!We[s])return s;var e=We[s],o;for(o in e)if(e.hasOwnProperty(o)&&o in Ye)return Xe$1[s]=e[o];return s}var $e=Ze("animationend"),af=Ze("animationiteration"),bf=Ze("animationstart"),cf=Ze("transitionend"),df=new Map,ef="abort auxClick cancel canPlay canPlayThrough click close contextMenu copy cut drag dragEnd dragEnter dragExit dragLeave dragOver dragStart drop durationChange emptied encrypted ended error gotPointerCapture input invalid keyDown keyPress keyUp load loadedData loadedMetadata loadStart lostPointerCapture mouseDown mouseMove mouseOut mouseOver mouseUp paste pause play playing pointerCancel pointerDown pointerMove pointerOut pointerOver pointerUp progress rateChange reset resize seeked seeking stalled submit suspend timeUpdate touchCancel touchEnd touchStart volumeChange scroll toggle touchMove waiting wheel".split(" ");function ff(s,e){df.set(s,e),fa(e,[s])}for(var gf=0;gf<ef.length;gf++){var hf=ef[gf],jf=hf.toLowerCase(),kf=hf[0].toUpperCase()+hf.slice(1);ff(jf,"on"+kf)}ff($e,"onAnimationEnd");ff(af,"onAnimationIteration");ff(bf,"onAnimationStart");ff("dblclick","onDoubleClick");ff("focusin","onFocus");ff("focusout","onBlur");ff(cf,"onTransitionEnd");ha("onMouseEnter",["mouseout","mouseover"]);ha("onMouseLeave",["mouseout","mouseover"]);ha("onPointerEnter",["pointerout","pointerover"]);ha("onPointerLeave",["pointerout","pointerover"]);fa("onChange","change click focusin focusout input keydown keyup selectionchange".split(" "));fa("onSelect","focusout contextmenu dragend focusin keydown keyup mousedown mouseup selectionchange".split(" "));fa("onBeforeInput",["compositionend","keypress","textInput","paste"]);fa("onCompositionEnd","compositionend focusout keydown keypress keyup mousedown".split(" "));fa("onCompositionStart","compositionstart focusout keydown keypress keyup mousedown".split(" "));fa("onCompositionUpdate","compositionupdate focusout keydown keypress keyup mousedown".split(" "));var lf="abort canplay canplaythrough durationchange emptied encrypted ended error loadeddata loadedmetadata loadstart pause play playing progress ratechange resize seeked seeking stalled suspend timeupdate volumechange waiting".split(" "),mf=new Set("cancel close invalid load scroll toggle".split(" ").concat(lf));function nf(s,e,o){var a=s.type||"unknown-event";s.currentTarget=o,Ub(a,e,void 0,s),s.currentTarget=null}function se(s,e){e=(e&4)!==0;for(var o=0;o<s.length;o++){var a=s[o],d=a.event;a=a.listeners;e:{var c=void 0;if(e)for(var j=a.length-1;0<=j;j--){var _e=a[j],pt=_e.instance,yt=_e.currentTarget;if(_e=_e.listener,pt!==c&&d.isPropagationStopped())break e;nf(d,_e,yt),c=pt}else for(j=0;j<a.length;j++){if(_e=a[j],pt=_e.instance,yt=_e.currentTarget,_e=_e.listener,pt!==c&&d.isPropagationStopped())break e;nf(d,_e,yt),c=pt}}}if(Qb)throw s=Rb,Qb=!1,Rb=null,s}function D$1(s,e){var o=e[of];o===void 0&&(o=e[of]=new Set);var a=s+"__bubble";o.has(a)||(pf(e,s,2,!1),o.add(a))}function qf(s,e,o){var a=0;e&&(a|=4),pf(o,s,a,e)}var rf="_reactListening"+Math.random().toString(36).slice(2);function sf(s){if(!s[rf]){s[rf]=!0,da.forEach(function(o){o!=="selectionchange"&&(mf.has(o)||qf(o,!1,s),qf(o,!0,s))});var e=s.nodeType===9?s:s.ownerDocument;e===null||e[rf]||(e[rf]=!0,qf("selectionchange",!1,e))}}function pf(s,e,o,a){switch(jd(e)){case 1:var d=ed;break;case 4:d=gd;break;default:d=fd}o=d.bind(null,e,o,s),d=void 0,!Lb||e!=="touchstart"&&e!=="touchmove"&&e!=="wheel"||(d=!0),a?d!==void 0?s.addEventListener(e,o,{capture:!0,passive:d}):s.addEventListener(e,o,!0):d!==void 0?s.addEventListener(e,o,{passive:d}):s.addEventListener(e,o,!1)}function hd(s,e,o,a,d){var c=a;if(!(e&1)&&!(e&2)&&a!==null)e:for(;;){if(a===null)return;var j=a.tag;if(j===3||j===4){var _e=a.stateNode.containerInfo;if(_e===d||_e.nodeType===8&&_e.parentNode===d)break;if(j===4)for(j=a.return;j!==null;){var pt=j.tag;if((pt===3||pt===4)&&(pt=j.stateNode.containerInfo,pt===d||pt.nodeType===8&&pt.parentNode===d))return;j=j.return}for(;_e!==null;){if(j=Wc(_e),j===null)return;if(pt=j.tag,pt===5||pt===6){a=c=j;continue e}_e=_e.parentNode}}a=a.return}Jb(function(){var yt=c,ct=xb(o),Ct=[];e:{var qt=df.get(s);if(qt!==void 0){var Ot=td,Lt=s;switch(s){case"keypress":if(od(o)===0)break e;case"keydown":case"keyup":Ot=Rd;break;case"focusin":Lt="focus",Ot=Fd;break;case"focusout":Lt="blur",Ot=Fd;break;case"beforeblur":case"afterblur":Ot=Fd;break;case"click":if(o.button===2)break e;case"auxclick":case"dblclick":case"mousedown":case"mousemove":case"mouseup":case"mouseout":case"mouseover":case"contextmenu":Ot=Bd;break;case"drag":case"dragend":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"dragstart":case"drop":Ot=Dd;break;case"touchcancel":case"touchend":case"touchmove":case"touchstart":Ot=Vd;break;case $e:case af:case bf:Ot=Hd;break;case cf:Ot=Xd;break;case"scroll":Ot=vd;break;case"wheel":Ot=Zd;break;case"copy":case"cut":case"paste":Ot=Jd;break;case"gotpointercapture":case"lostpointercapture":case"pointercancel":case"pointerdown":case"pointermove":case"pointerout":case"pointerover":case"pointerup":Ot=Td}var Qt=(e&4)!==0,ir=!Qt&&s==="scroll",er=Qt?qt!==null?qt+"Capture":null:qt;Qt=[];for(var tr=yt,sr;tr!==null;){sr=tr;var ar=sr.stateNode;if(sr.tag===5&&ar!==null&&(sr=ar,er!==null&&(ar=Kb(tr,er),ar!=null&&Qt.push(tf(tr,ar,sr)))),ir)break;tr=tr.return}0<Qt.length&&(qt=new Ot(qt,Lt,null,o,ct),Ct.push({event:qt,listeners:Qt}))}}if(!(e&7)){e:{if(qt=s==="mouseover"||s==="pointerover",Ot=s==="mouseout"||s==="pointerout",qt&&o!==wb&&(Lt=o.relatedTarget||o.fromElement)&&(Wc(Lt)||Lt[uf]))break e;if((Ot||qt)&&(qt=ct.window===ct?ct:(qt=ct.ownerDocument)?qt.defaultView||qt.parentWindow:window,Ot?(Lt=o.relatedTarget||o.toElement,Ot=yt,Lt=Lt?Wc(Lt):null,Lt!==null&&(ir=Vb(Lt),Lt!==ir||Lt.tag!==5&&Lt.tag!==6)&&(Lt=null)):(Ot=null,Lt=yt),Ot!==Lt)){if(Qt=Bd,ar="onMouseLeave",er="onMouseEnter",tr="mouse",(s==="pointerout"||s==="pointerover")&&(Qt=Td,ar="onPointerLeave",er="onPointerEnter",tr="pointer"),ir=Ot==null?qt:ue(Ot),sr=Lt==null?qt:ue(Lt),qt=new Qt(ar,tr+"leave",Ot,o,ct),qt.target=ir,qt.relatedTarget=sr,ar=null,Wc(ct)===yt&&(Qt=new Qt(er,tr+"enter",Lt,o,ct),Qt.target=sr,Qt.relatedTarget=ir,ar=Qt),ir=ar,Ot&&Lt)t:{for(Qt=Ot,er=Lt,tr=0,sr=Qt;sr;sr=vf(sr))tr++;for(sr=0,ar=er;ar;ar=vf(ar))sr++;for(;0<tr-sr;)Qt=vf(Qt),tr--;for(;0<sr-tr;)er=vf(er),sr--;for(;tr--;){if(Qt===er||er!==null&&Qt===er.alternate)break t;Qt=vf(Qt),er=vf(er)}Qt=null}else Qt=null;Ot!==null&&wf(Ct,qt,Ot,Qt,!1),Lt!==null&&ir!==null&&wf(Ct,ir,Lt,Qt,!0)}}e:{if(qt=yt?ue(yt):window,Ot=qt.nodeName&&qt.nodeName.toLowerCase(),Ot==="select"||Ot==="input"&&qt.type==="file")var hr=ve;else if(me(qt))if(we)hr=Fe;else{hr=De;var _r=Ce}else(Ot=qt.nodeName)&&Ot.toLowerCase()==="input"&&(qt.type==="checkbox"||qt.type==="radio")&&(hr=Ee);if(hr&&(hr=hr(s,yt))){ne(Ct,hr,o,ct);break e}_r&&_r(s,qt,yt),s==="focusout"&&(_r=qt._wrapperState)&&_r.controlled&&qt.type==="number"&&cb(qt,"number",qt.value)}switch(_r=yt?ue(yt):window,s){case"focusin":(me(_r)||_r.contentEditable==="true")&&(Qe=_r,Re=yt,Se=null);break;case"focusout":Se=Re=Qe=null;break;case"mousedown":Te=!0;break;case"contextmenu":case"mouseup":case"dragend":Te=!1,Ue(Ct,o,ct);break;case"selectionchange":if(Pe)break;case"keydown":case"keyup":Ue(Ct,o,ct)}var dr;if(ae)e:{switch(s){case"compositionstart":var ur="onCompositionStart";break e;case"compositionend":ur="onCompositionEnd";break e;case"compositionupdate":ur="onCompositionUpdate";break e}ur=void 0}else ie?ge(s,o)&&(ur="onCompositionEnd"):s==="keydown"&&o.keyCode===229&&(ur="onCompositionStart");ur&&(de&&o.locale!=="ko"&&(ie||ur!=="onCompositionStart"?ur==="onCompositionEnd"&&ie&&(dr=nd()):(kd=ct,ld="value"in kd?kd.value:kd.textContent,ie=!0)),_r=oe(yt,ur),0<_r.length&&(ur=new Ld(ur,s,null,o,ct),Ct.push({event:ur,listeners:_r}),dr?ur.data=dr:(dr=he(o),dr!==null&&(ur.data=dr)))),(dr=ce?je(s,o):ke(s,o))&&(yt=oe(yt,"onBeforeInput"),0<yt.length&&(ct=new Ld("onBeforeInput","beforeinput",null,o,ct),Ct.push({event:ct,listeners:yt}),ct.data=dr))}se(Ct,e)})}function tf(s,e,o){return{instance:s,listener:e,currentTarget:o}}function oe(s,e){for(var o=e+"Capture",a=[];s!==null;){var d=s,c=d.stateNode;d.tag===5&&c!==null&&(d=c,c=Kb(s,o),c!=null&&a.unshift(tf(s,c,d)),c=Kb(s,e),c!=null&&a.push(tf(s,c,d))),s=s.return}return a}function vf(s){if(s===null)return null;do s=s.return;while(s&&s.tag!==5);return s||null}function wf(s,e,o,a,d){for(var c=e._reactName,j=[];o!==null&&o!==a;){var _e=o,pt=_e.alternate,yt=_e.stateNode;if(pt!==null&&pt===a)break;_e.tag===5&&yt!==null&&(_e=yt,d?(pt=Kb(o,c),pt!=null&&j.unshift(tf(o,pt,_e))):d||(pt=Kb(o,c),pt!=null&&j.push(tf(o,pt,_e)))),o=o.return}j.length!==0&&s.push({event:e,listeners:j})}var xf=/\r\n?/g,yf=/\u0000|\uFFFD/g;function zf(s){return(typeof s=="string"?s:""+s).replace(xf,`
`).replace(yf,"")}function Af(s,e,o){if(e=zf(e),zf(s)!==e&&o)throw Error(p(425))}function Bf(){}var Cf=null,Df=null;function Ef(s,e){return s==="textarea"||s==="noscript"||typeof e.children=="string"||typeof e.children=="number"||typeof e.dangerouslySetInnerHTML=="object"&&e.dangerouslySetInnerHTML!==null&&e.dangerouslySetInnerHTML.__html!=null}var Ff=typeof setTimeout=="function"?setTimeout:void 0,Gf=typeof clearTimeout=="function"?clearTimeout:void 0,Hf=typeof Promise=="function"?Promise:void 0,Jf=typeof queueMicrotask=="function"?queueMicrotask:typeof Hf<"u"?function(s){return Hf.resolve(null).then(s).catch(If)}:Ff;function If(s){setTimeout(function(){throw s})}function Kf(s,e){var o=e,a=0;do{var d=o.nextSibling;if(s.removeChild(o),d&&d.nodeType===8)if(o=d.data,o==="/$"){if(a===0){s.removeChild(d),bd(e);return}a--}else o!=="$"&&o!=="$?"&&o!=="$!"||a++;o=d}while(o);bd(e)}function Lf(s){for(;s!=null;s=s.nextSibling){var e=s.nodeType;if(e===1||e===3)break;if(e===8){if(e=s.data,e==="$"||e==="$!"||e==="$?")break;if(e==="/$")return null}}return s}function Mf(s){s=s.previousSibling;for(var e=0;s;){if(s.nodeType===8){var o=s.data;if(o==="$"||o==="$!"||o==="$?"){if(e===0)return s;e--}else o==="/$"&&e++}s=s.previousSibling}return null}var Nf=Math.random().toString(36).slice(2),Of="__reactFiber$"+Nf,Pf="__reactProps$"+Nf,uf="__reactContainer$"+Nf,of="__reactEvents$"+Nf,Qf="__reactListeners$"+Nf,Rf="__reactHandles$"+Nf;function Wc(s){var e=s[Of];if(e)return e;for(var o=s.parentNode;o;){if(e=o[uf]||o[Of]){if(o=e.alternate,e.child!==null||o!==null&&o.child!==null)for(s=Mf(s);s!==null;){if(o=s[Of])return o;s=Mf(s)}return e}s=o,o=s.parentNode}return null}function Cb(s){return s=s[Of]||s[uf],!s||s.tag!==5&&s.tag!==6&&s.tag!==13&&s.tag!==3?null:s}function ue(s){if(s.tag===5||s.tag===6)return s.stateNode;throw Error(p(33))}function Db(s){return s[Pf]||null}var Sf=[],Tf=-1;function Uf(s){return{current:s}}function E(s){0>Tf||(s.current=Sf[Tf],Sf[Tf]=null,Tf--)}function G(s,e){Tf++,Sf[Tf]=s.current,s.current=e}var Vf={},H=Uf(Vf),Wf=Uf(!1),Xf=Vf;function Yf(s,e){var o=s.type.contextTypes;if(!o)return Vf;var a=s.stateNode;if(a&&a.__reactInternalMemoizedUnmaskedChildContext===e)return a.__reactInternalMemoizedMaskedChildContext;var d={},c;for(c in o)d[c]=e[c];return a&&(s=s.stateNode,s.__reactInternalMemoizedUnmaskedChildContext=e,s.__reactInternalMemoizedMaskedChildContext=d),d}function Zf(s){return s=s.childContextTypes,s!=null}function $f(){E(Wf),E(H)}function ag(s,e,o){if(H.current!==Vf)throw Error(p(168));G(H,e),G(Wf,o)}function bg(s,e,o){var a=s.stateNode;if(e=e.childContextTypes,typeof a.getChildContext!="function")return o;a=a.getChildContext();for(var d in a)if(!(d in e))throw Error(p(108,Ra(s)||"Unknown",d));return A({},o,a)}function cg(s){return s=(s=s.stateNode)&&s.__reactInternalMemoizedMergedChildContext||Vf,Xf=H.current,G(H,s),G(Wf,Wf.current),!0}function dg(s,e,o){var a=s.stateNode;if(!a)throw Error(p(169));o?(s=bg(s,e,Xf),a.__reactInternalMemoizedMergedChildContext=s,E(Wf),E(H),G(H,s)):E(Wf),G(Wf,o)}var eg=null,fg=!1,gg=!1;function hg(s){eg===null?eg=[s]:eg.push(s)}function ig(s){fg=!0,hg(s)}function jg(){if(!gg&&eg!==null){gg=!0;var s=0,e=C$1;try{var o=eg;for(C$1=1;s<o.length;s++){var a=o[s];do a=a(!0);while(a!==null)}eg=null,fg=!1}catch(d){throw eg!==null&&(eg=eg.slice(s+1)),ac(fc,jg),d}finally{C$1=e,gg=!1}}return null}var kg=[],lg=0,mg=null,ng=0,og=[],pg=0,qg=null,rg=1,sg="";function tg(s,e){kg[lg++]=ng,kg[lg++]=mg,mg=s,ng=e}function ug(s,e,o){og[pg++]=rg,og[pg++]=sg,og[pg++]=qg,qg=s;var a=rg;s=sg;var d=32-oc(a)-1;a&=~(1<<d),o+=1;var c=32-oc(e)+d;if(30<c){var j=d-d%5;c=(a&(1<<j)-1).toString(32),a>>=j,d-=j,rg=1<<32-oc(e)+d|o<<d|a,sg=c+s}else rg=1<<c|o<<d|a,sg=s}function vg(s){s.return!==null&&(tg(s,1),ug(s,1,0))}function wg(s){for(;s===mg;)mg=kg[--lg],kg[lg]=null,ng=kg[--lg],kg[lg]=null;for(;s===qg;)qg=og[--pg],og[pg]=null,sg=og[--pg],og[pg]=null,rg=og[--pg],og[pg]=null}var xg=null,yg=null,I=!1,zg=null;function Ag(s,e){var o=Bg(5,null,null,0);o.elementType="DELETED",o.stateNode=e,o.return=s,e=s.deletions,e===null?(s.deletions=[o],s.flags|=16):e.push(o)}function Cg(s,e){switch(s.tag){case 5:var o=s.type;return e=e.nodeType!==1||o.toLowerCase()!==e.nodeName.toLowerCase()?null:e,e!==null?(s.stateNode=e,xg=s,yg=Lf(e.firstChild),!0):!1;case 6:return e=s.pendingProps===""||e.nodeType!==3?null:e,e!==null?(s.stateNode=e,xg=s,yg=null,!0):!1;case 13:return e=e.nodeType!==8?null:e,e!==null?(o=qg!==null?{id:rg,overflow:sg}:null,s.memoizedState={dehydrated:e,treeContext:o,retryLane:1073741824},o=Bg(18,null,null,0),o.stateNode=e,o.return=s,s.child=o,xg=s,yg=null,!0):!1;default:return!1}}function Dg(s){return(s.mode&1)!==0&&(s.flags&128)===0}function Eg(s){if(I){var e=yg;if(e){var o=e;if(!Cg(s,e)){if(Dg(s))throw Error(p(418));e=Lf(o.nextSibling);var a=xg;e&&Cg(s,e)?Ag(a,o):(s.flags=s.flags&-4097|2,I=!1,xg=s)}}else{if(Dg(s))throw Error(p(418));s.flags=s.flags&-4097|2,I=!1,xg=s}}}function Fg(s){for(s=s.return;s!==null&&s.tag!==5&&s.tag!==3&&s.tag!==13;)s=s.return;xg=s}function Gg(s){if(s!==xg)return!1;if(!I)return Fg(s),I=!0,!1;var e;if((e=s.tag!==3)&&!(e=s.tag!==5)&&(e=s.type,e=e!=="head"&&e!=="body"&&!Ef(s.type,s.memoizedProps)),e&&(e=yg)){if(Dg(s))throw Hg(),Error(p(418));for(;e;)Ag(s,e),e=Lf(e.nextSibling)}if(Fg(s),s.tag===13){if(s=s.memoizedState,s=s!==null?s.dehydrated:null,!s)throw Error(p(317));e:{for(s=s.nextSibling,e=0;s;){if(s.nodeType===8){var o=s.data;if(o==="/$"){if(e===0){yg=Lf(s.nextSibling);break e}e--}else o!=="$"&&o!=="$!"&&o!=="$?"||e++}s=s.nextSibling}yg=null}}else yg=xg?Lf(s.stateNode.nextSibling):null;return!0}function Hg(){for(var s=yg;s;)s=Lf(s.nextSibling)}function Ig(){yg=xg=null,I=!1}function Jg(s){zg===null?zg=[s]:zg.push(s)}var Kg=ua.ReactCurrentBatchConfig;function Lg(s,e,o){if(s=o.ref,s!==null&&typeof s!="function"&&typeof s!="object"){if(o._owner){if(o=o._owner,o){if(o.tag!==1)throw Error(p(309));var a=o.stateNode}if(!a)throw Error(p(147,s));var d=a,c=""+s;return e!==null&&e.ref!==null&&typeof e.ref=="function"&&e.ref._stringRef===c?e.ref:(e=function(j){var _e=d.refs;j===null?delete _e[c]:_e[c]=j},e._stringRef=c,e)}if(typeof s!="string")throw Error(p(284));if(!o._owner)throw Error(p(290,s))}return s}function Mg(s,e){throw s=Object.prototype.toString.call(e),Error(p(31,s==="[object Object]"?"object with keys {"+Object.keys(e).join(", ")+"}":s))}function Ng(s){var e=s._init;return e(s._payload)}function Og(s){function e(er,tr){if(s){var sr=er.deletions;sr===null?(er.deletions=[tr],er.flags|=16):sr.push(tr)}}function o(er,tr){if(!s)return null;for(;tr!==null;)e(er,tr),tr=tr.sibling;return null}function a(er,tr){for(er=new Map;tr!==null;)tr.key!==null?er.set(tr.key,tr):er.set(tr.index,tr),tr=tr.sibling;return er}function d(er,tr){return er=Pg(er,tr),er.index=0,er.sibling=null,er}function c(er,tr,sr){return er.index=sr,s?(sr=er.alternate,sr!==null?(sr=sr.index,sr<tr?(er.flags|=2,tr):sr):(er.flags|=2,tr)):(er.flags|=1048576,tr)}function j(er){return s&&er.alternate===null&&(er.flags|=2),er}function _e(er,tr,sr,ar){return tr===null||tr.tag!==6?(tr=Qg(sr,er.mode,ar),tr.return=er,tr):(tr=d(tr,sr),tr.return=er,tr)}function pt(er,tr,sr,ar){var hr=sr.type;return hr===ya?ct(er,tr,sr.props.children,ar,sr.key):tr!==null&&(tr.elementType===hr||typeof hr=="object"&&hr!==null&&hr.$$typeof===Ha&&Ng(hr)===tr.type)?(ar=d(tr,sr.props),ar.ref=Lg(er,tr,sr),ar.return=er,ar):(ar=Rg(sr.type,sr.key,sr.props,null,er.mode,ar),ar.ref=Lg(er,tr,sr),ar.return=er,ar)}function yt(er,tr,sr,ar){return tr===null||tr.tag!==4||tr.stateNode.containerInfo!==sr.containerInfo||tr.stateNode.implementation!==sr.implementation?(tr=Sg(sr,er.mode,ar),tr.return=er,tr):(tr=d(tr,sr.children||[]),tr.return=er,tr)}function ct(er,tr,sr,ar,hr){return tr===null||tr.tag!==7?(tr=Tg(sr,er.mode,ar,hr),tr.return=er,tr):(tr=d(tr,sr),tr.return=er,tr)}function Ct(er,tr,sr){if(typeof tr=="string"&&tr!==""||typeof tr=="number")return tr=Qg(""+tr,er.mode,sr),tr.return=er,tr;if(typeof tr=="object"&&tr!==null){switch(tr.$$typeof){case va:return sr=Rg(tr.type,tr.key,tr.props,null,er.mode,sr),sr.ref=Lg(er,null,tr),sr.return=er,sr;case wa:return tr=Sg(tr,er.mode,sr),tr.return=er,tr;case Ha:var ar=tr._init;return Ct(er,ar(tr._payload),sr)}if(eb(tr)||Ka(tr))return tr=Tg(tr,er.mode,sr,null),tr.return=er,tr;Mg(er,tr)}return null}function qt(er,tr,sr,ar){var hr=tr!==null?tr.key:null;if(typeof sr=="string"&&sr!==""||typeof sr=="number")return hr!==null?null:_e(er,tr,""+sr,ar);if(typeof sr=="object"&&sr!==null){switch(sr.$$typeof){case va:return sr.key===hr?pt(er,tr,sr,ar):null;case wa:return sr.key===hr?yt(er,tr,sr,ar):null;case Ha:return hr=sr._init,qt(er,tr,hr(sr._payload),ar)}if(eb(sr)||Ka(sr))return hr!==null?null:ct(er,tr,sr,ar,null);Mg(er,sr)}return null}function Ot(er,tr,sr,ar,hr){if(typeof ar=="string"&&ar!==""||typeof ar=="number")return er=er.get(sr)||null,_e(tr,er,""+ar,hr);if(typeof ar=="object"&&ar!==null){switch(ar.$$typeof){case va:return er=er.get(ar.key===null?sr:ar.key)||null,pt(tr,er,ar,hr);case wa:return er=er.get(ar.key===null?sr:ar.key)||null,yt(tr,er,ar,hr);case Ha:var _r=ar._init;return Ot(er,tr,sr,_r(ar._payload),hr)}if(eb(ar)||Ka(ar))return er=er.get(sr)||null,ct(tr,er,ar,hr,null);Mg(tr,ar)}return null}function Lt(er,tr,sr,ar){for(var hr=null,_r=null,dr=tr,ur=tr=0,lr=null;dr!==null&&ur<sr.length;ur++){dr.index>ur?(lr=dr,dr=null):lr=dr.sibling;var gr=qt(er,dr,sr[ur],ar);if(gr===null){dr===null&&(dr=lr);break}s&&dr&&gr.alternate===null&&e(er,dr),tr=c(gr,tr,ur),_r===null?hr=gr:_r.sibling=gr,_r=gr,dr=lr}if(ur===sr.length)return o(er,dr),I&&tg(er,ur),hr;if(dr===null){for(;ur<sr.length;ur++)dr=Ct(er,sr[ur],ar),dr!==null&&(tr=c(dr,tr,ur),_r===null?hr=dr:_r.sibling=dr,_r=dr);return I&&tg(er,ur),hr}for(dr=a(er,dr);ur<sr.length;ur++)lr=Ot(dr,er,ur,sr[ur],ar),lr!==null&&(s&&lr.alternate!==null&&dr.delete(lr.key===null?ur:lr.key),tr=c(lr,tr,ur),_r===null?hr=lr:_r.sibling=lr,_r=lr);return s&&dr.forEach(function(Mt){return e(er,Mt)}),I&&tg(er,ur),hr}function Qt(er,tr,sr,ar){var hr=Ka(sr);if(typeof hr!="function")throw Error(p(150));if(sr=hr.call(sr),sr==null)throw Error(p(151));for(var _r=hr=null,dr=tr,ur=tr=0,lr=null,gr=sr.next();dr!==null&&!gr.done;ur++,gr=sr.next()){dr.index>ur?(lr=dr,dr=null):lr=dr.sibling;var Mt=qt(er,dr,gr.value,ar);if(Mt===null){dr===null&&(dr=lr);break}s&&dr&&Mt.alternate===null&&e(er,dr),tr=c(Mt,tr,ur),_r===null?hr=Mt:_r.sibling=Mt,_r=Mt,dr=lr}if(gr.done)return o(er,dr),I&&tg(er,ur),hr;if(dr===null){for(;!gr.done;ur++,gr=sr.next())gr=Ct(er,gr.value,ar),gr!==null&&(tr=c(gr,tr,ur),_r===null?hr=gr:_r.sibling=gr,_r=gr);return I&&tg(er,ur),hr}for(dr=a(er,dr);!gr.done;ur++,gr=sr.next())gr=Ot(dr,er,ur,gr.value,ar),gr!==null&&(s&&gr.alternate!==null&&dr.delete(gr.key===null?ur:gr.key),tr=c(gr,tr,ur),_r===null?hr=gr:_r.sibling=gr,_r=gr);return s&&dr.forEach(function(h){return e(er,h)}),I&&tg(er,ur),hr}function ir(er,tr,sr,ar){if(typeof sr=="object"&&sr!==null&&sr.type===ya&&sr.key===null&&(sr=sr.props.children),typeof sr=="object"&&sr!==null){switch(sr.$$typeof){case va:e:{for(var hr=sr.key,_r=tr;_r!==null;){if(_r.key===hr){if(hr=sr.type,hr===ya){if(_r.tag===7){o(er,_r.sibling),tr=d(_r,sr.props.children),tr.return=er,er=tr;break e}}else if(_r.elementType===hr||typeof hr=="object"&&hr!==null&&hr.$$typeof===Ha&&Ng(hr)===_r.type){o(er,_r.sibling),tr=d(_r,sr.props),tr.ref=Lg(er,_r,sr),tr.return=er,er=tr;break e}o(er,_r);break}else e(er,_r);_r=_r.sibling}sr.type===ya?(tr=Tg(sr.props.children,er.mode,ar,sr.key),tr.return=er,er=tr):(ar=Rg(sr.type,sr.key,sr.props,null,er.mode,ar),ar.ref=Lg(er,tr,sr),ar.return=er,er=ar)}return j(er);case wa:e:{for(_r=sr.key;tr!==null;){if(tr.key===_r)if(tr.tag===4&&tr.stateNode.containerInfo===sr.containerInfo&&tr.stateNode.implementation===sr.implementation){o(er,tr.sibling),tr=d(tr,sr.children||[]),tr.return=er,er=tr;break e}else{o(er,tr);break}else e(er,tr);tr=tr.sibling}tr=Sg(sr,er.mode,ar),tr.return=er,er=tr}return j(er);case Ha:return _r=sr._init,ir(er,tr,_r(sr._payload),ar)}if(eb(sr))return Lt(er,tr,sr,ar);if(Ka(sr))return Qt(er,tr,sr,ar);Mg(er,sr)}return typeof sr=="string"&&sr!==""||typeof sr=="number"?(sr=""+sr,tr!==null&&tr.tag===6?(o(er,tr.sibling),tr=d(tr,sr),tr.return=er,er=tr):(o(er,tr),tr=Qg(sr,er.mode,ar),tr.return=er,er=tr),j(er)):o(er,tr)}return ir}var Ug=Og(!0),Vg=Og(!1),Wg=Uf(null),Xg=null,Yg=null,Zg=null;function $g(){Zg=Yg=Xg=null}function ah(s){var e=Wg.current;E(Wg),s._currentValue=e}function bh(s,e,o){for(;s!==null;){var a=s.alternate;if((s.childLanes&e)!==e?(s.childLanes|=e,a!==null&&(a.childLanes|=e)):a!==null&&(a.childLanes&e)!==e&&(a.childLanes|=e),s===o)break;s=s.return}}function ch(s,e){Xg=s,Zg=Yg=null,s=s.dependencies,s!==null&&s.firstContext!==null&&(s.lanes&e&&(dh$1=!0),s.firstContext=null)}function eh(s){var e=s._currentValue;if(Zg!==s)if(s={context:s,memoizedValue:e,next:null},Yg===null){if(Xg===null)throw Error(p(308));Yg=s,Xg.dependencies={lanes:0,firstContext:s}}else Yg=Yg.next=s;return e}var fh=null;function gh(s){fh===null?fh=[s]:fh.push(s)}function hh(s,e,o,a){var d=e.interleaved;return d===null?(o.next=o,gh(e)):(o.next=d.next,d.next=o),e.interleaved=o,ih(s,a)}function ih(s,e){s.lanes|=e;var o=s.alternate;for(o!==null&&(o.lanes|=e),o=s,s=s.return;s!==null;)s.childLanes|=e,o=s.alternate,o!==null&&(o.childLanes|=e),o=s,s=s.return;return o.tag===3?o.stateNode:null}var jh=!1;function kh(s){s.updateQueue={baseState:s.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null,interleaved:null,lanes:0},effects:null}}function lh(s,e){s=s.updateQueue,e.updateQueue===s&&(e.updateQueue={baseState:s.baseState,firstBaseUpdate:s.firstBaseUpdate,lastBaseUpdate:s.lastBaseUpdate,shared:s.shared,effects:s.effects})}function mh(s,e){return{eventTime:s,lane:e,tag:0,payload:null,callback:null,next:null}}function nh(s,e,o){var a=s.updateQueue;if(a===null)return null;if(a=a.shared,K&2){var d=a.pending;return d===null?e.next=e:(e.next=d.next,d.next=e),a.pending=e,ih(s,o)}return d=a.interleaved,d===null?(e.next=e,gh(a)):(e.next=d.next,d.next=e),a.interleaved=e,ih(s,o)}function oh(s,e,o){if(e=e.updateQueue,e!==null&&(e=e.shared,(o&4194240)!==0)){var a=e.lanes;a&=s.pendingLanes,o|=a,e.lanes=o,Cc(s,o)}}function ph(s,e){var o=s.updateQueue,a=s.alternate;if(a!==null&&(a=a.updateQueue,o===a)){var d=null,c=null;if(o=o.firstBaseUpdate,o!==null){do{var j={eventTime:o.eventTime,lane:o.lane,tag:o.tag,payload:o.payload,callback:o.callback,next:null};c===null?d=c=j:c=c.next=j,o=o.next}while(o!==null);c===null?d=c=e:c=c.next=e}else d=c=e;o={baseState:a.baseState,firstBaseUpdate:d,lastBaseUpdate:c,shared:a.shared,effects:a.effects},s.updateQueue=o;return}s=o.lastBaseUpdate,s===null?o.firstBaseUpdate=e:s.next=e,o.lastBaseUpdate=e}function qh(s,e,o,a){var d=s.updateQueue;jh=!1;var c=d.firstBaseUpdate,j=d.lastBaseUpdate,_e=d.shared.pending;if(_e!==null){d.shared.pending=null;var pt=_e,yt=pt.next;pt.next=null,j===null?c=yt:j.next=yt,j=pt;var ct=s.alternate;ct!==null&&(ct=ct.updateQueue,_e=ct.lastBaseUpdate,_e!==j&&(_e===null?ct.firstBaseUpdate=yt:_e.next=yt,ct.lastBaseUpdate=pt))}if(c!==null){var Ct=d.baseState;j=0,ct=yt=pt=null,_e=c;do{var qt=_e.lane,Ot=_e.eventTime;if((a&qt)===qt){ct!==null&&(ct=ct.next={eventTime:Ot,lane:0,tag:_e.tag,payload:_e.payload,callback:_e.callback,next:null});e:{var Lt=s,Qt=_e;switch(qt=e,Ot=o,Qt.tag){case 1:if(Lt=Qt.payload,typeof Lt=="function"){Ct=Lt.call(Ot,Ct,qt);break e}Ct=Lt;break e;case 3:Lt.flags=Lt.flags&-65537|128;case 0:if(Lt=Qt.payload,qt=typeof Lt=="function"?Lt.call(Ot,Ct,qt):Lt,qt==null)break e;Ct=A({},Ct,qt);break e;case 2:jh=!0}}_e.callback!==null&&_e.lane!==0&&(s.flags|=64,qt=d.effects,qt===null?d.effects=[_e]:qt.push(_e))}else Ot={eventTime:Ot,lane:qt,tag:_e.tag,payload:_e.payload,callback:_e.callback,next:null},ct===null?(yt=ct=Ot,pt=Ct):ct=ct.next=Ot,j|=qt;if(_e=_e.next,_e===null){if(_e=d.shared.pending,_e===null)break;qt=_e,_e=qt.next,qt.next=null,d.lastBaseUpdate=qt,d.shared.pending=null}}while(!0);if(ct===null&&(pt=Ct),d.baseState=pt,d.firstBaseUpdate=yt,d.lastBaseUpdate=ct,e=d.shared.interleaved,e!==null){d=e;do j|=d.lane,d=d.next;while(d!==e)}else c===null&&(d.shared.lanes=0);rh|=j,s.lanes=j,s.memoizedState=Ct}}function sh(s,e,o){if(s=e.effects,e.effects=null,s!==null)for(e=0;e<s.length;e++){var a=s[e],d=a.callback;if(d!==null){if(a.callback=null,a=o,typeof d!="function")throw Error(p(191,d));d.call(a)}}}var th={},uh=Uf(th),vh=Uf(th),wh=Uf(th);function xh(s){if(s===th)throw Error(p(174));return s}function yh(s,e){switch(G(wh,e),G(vh,s),G(uh,th),s=e.nodeType,s){case 9:case 11:e=(e=e.documentElement)?e.namespaceURI:lb(null,"");break;default:s=s===8?e.parentNode:e,e=s.namespaceURI||null,s=s.tagName,e=lb(e,s)}E(uh),G(uh,e)}function zh(){E(uh),E(vh),E(wh)}function Ah(s){xh(wh.current);var e=xh(uh.current),o=lb(e,s.type);e!==o&&(G(vh,s),G(uh,o))}function Bh(s){vh.current===s&&(E(uh),E(vh))}var L$1=Uf(0);function Ch(s){for(var e=s;e!==null;){if(e.tag===13){var o=e.memoizedState;if(o!==null&&(o=o.dehydrated,o===null||o.data==="$?"||o.data==="$!"))return e}else if(e.tag===19&&e.memoizedProps.revealOrder!==void 0){if(e.flags&128)return e}else if(e.child!==null){e.child.return=e,e=e.child;continue}if(e===s)break;for(;e.sibling===null;){if(e.return===null||e.return===s)return null;e=e.return}e.sibling.return=e.return,e=e.sibling}return null}var Dh=[];function Eh(){for(var s=0;s<Dh.length;s++)Dh[s]._workInProgressVersionPrimary=null;Dh.length=0}var Fh=ua.ReactCurrentDispatcher,Gh=ua.ReactCurrentBatchConfig,Hh=0,M$1=null,N$1=null,O$1=null,Ih=!1,Jh=!1,Kh=0,Lh=0;function P(){throw Error(p(321))}function Mh(s,e){if(e===null)return!1;for(var o=0;o<e.length&&o<s.length;o++)if(!He(s[o],e[o]))return!1;return!0}function Nh(s,e,o,a,d,c){if(Hh=c,M$1=e,e.memoizedState=null,e.updateQueue=null,e.lanes=0,Fh.current=s===null||s.memoizedState===null?Oh:Ph,s=o(a,d),Jh){c=0;do{if(Jh=!1,Kh=0,25<=c)throw Error(p(301));c+=1,O$1=N$1=null,e.updateQueue=null,Fh.current=Qh,s=o(a,d)}while(Jh)}if(Fh.current=Rh,e=N$1!==null&&N$1.next!==null,Hh=0,O$1=N$1=M$1=null,Ih=!1,e)throw Error(p(300));return s}function Sh(){var s=Kh!==0;return Kh=0,s}function Th(){var s={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return O$1===null?M$1.memoizedState=O$1=s:O$1=O$1.next=s,O$1}function Uh(){if(N$1===null){var s=M$1.alternate;s=s!==null?s.memoizedState:null}else s=N$1.next;var e=O$1===null?M$1.memoizedState:O$1.next;if(e!==null)O$1=e,N$1=s;else{if(s===null)throw Error(p(310));N$1=s,s={memoizedState:N$1.memoizedState,baseState:N$1.baseState,baseQueue:N$1.baseQueue,queue:N$1.queue,next:null},O$1===null?M$1.memoizedState=O$1=s:O$1=O$1.next=s}return O$1}function Vh(s,e){return typeof e=="function"?e(s):e}function Wh(s){var e=Uh(),o=e.queue;if(o===null)throw Error(p(311));o.lastRenderedReducer=s;var a=N$1,d=a.baseQueue,c=o.pending;if(c!==null){if(d!==null){var j=d.next;d.next=c.next,c.next=j}a.baseQueue=d=c,o.pending=null}if(d!==null){c=d.next,a=a.baseState;var _e=j=null,pt=null,yt=c;do{var ct=yt.lane;if((Hh&ct)===ct)pt!==null&&(pt=pt.next={lane:0,action:yt.action,hasEagerState:yt.hasEagerState,eagerState:yt.eagerState,next:null}),a=yt.hasEagerState?yt.eagerState:s(a,yt.action);else{var Ct={lane:ct,action:yt.action,hasEagerState:yt.hasEagerState,eagerState:yt.eagerState,next:null};pt===null?(_e=pt=Ct,j=a):pt=pt.next=Ct,M$1.lanes|=ct,rh|=ct}yt=yt.next}while(yt!==null&&yt!==c);pt===null?j=a:pt.next=_e,He(a,e.memoizedState)||(dh$1=!0),e.memoizedState=a,e.baseState=j,e.baseQueue=pt,o.lastRenderedState=a}if(s=o.interleaved,s!==null){d=s;do c=d.lane,M$1.lanes|=c,rh|=c,d=d.next;while(d!==s)}else d===null&&(o.lanes=0);return[e.memoizedState,o.dispatch]}function Xh(s){var e=Uh(),o=e.queue;if(o===null)throw Error(p(311));o.lastRenderedReducer=s;var a=o.dispatch,d=o.pending,c=e.memoizedState;if(d!==null){o.pending=null;var j=d=d.next;do c=s(c,j.action),j=j.next;while(j!==d);He(c,e.memoizedState)||(dh$1=!0),e.memoizedState=c,e.baseQueue===null&&(e.baseState=c),o.lastRenderedState=c}return[c,a]}function Yh(){}function Zh(s,e){var o=M$1,a=Uh(),d=e(),c=!He(a.memoizedState,d);if(c&&(a.memoizedState=d,dh$1=!0),a=a.queue,$h(ai.bind(null,o,a,s),[s]),a.getSnapshot!==e||c||O$1!==null&&O$1.memoizedState.tag&1){if(o.flags|=2048,bi(9,ci.bind(null,o,a,d,e),void 0,null),Q===null)throw Error(p(349));Hh&30||di(o,e,d)}return d}function di(s,e,o){s.flags|=16384,s={getSnapshot:e,value:o},e=M$1.updateQueue,e===null?(e={lastEffect:null,stores:null},M$1.updateQueue=e,e.stores=[s]):(o=e.stores,o===null?e.stores=[s]:o.push(s))}function ci(s,e,o,a){e.value=o,e.getSnapshot=a,ei(e)&&fi(s)}function ai(s,e,o){return o(function(){ei(e)&&fi(s)})}function ei(s){var e=s.getSnapshot;s=s.value;try{var o=e();return!He(s,o)}catch{return!0}}function fi(s){var e=ih(s,1);e!==null&&gi(e,s,1,-1)}function hi(s){var e=Th();return typeof s=="function"&&(s=s()),e.memoizedState=e.baseState=s,s={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:Vh,lastRenderedState:s},e.queue=s,s=s.dispatch=ii.bind(null,M$1,s),[e.memoizedState,s]}function bi(s,e,o,a){return s={tag:s,create:e,destroy:o,deps:a,next:null},e=M$1.updateQueue,e===null?(e={lastEffect:null,stores:null},M$1.updateQueue=e,e.lastEffect=s.next=s):(o=e.lastEffect,o===null?e.lastEffect=s.next=s:(a=o.next,o.next=s,s.next=a,e.lastEffect=s)),s}function ji(){return Uh().memoizedState}function ki(s,e,o,a){var d=Th();M$1.flags|=s,d.memoizedState=bi(1|e,o,void 0,a===void 0?null:a)}function li(s,e,o,a){var d=Uh();a=a===void 0?null:a;var c=void 0;if(N$1!==null){var j=N$1.memoizedState;if(c=j.destroy,a!==null&&Mh(a,j.deps)){d.memoizedState=bi(e,o,c,a);return}}M$1.flags|=s,d.memoizedState=bi(1|e,o,c,a)}function mi(s,e){return ki(8390656,8,s,e)}function $h(s,e){return li(2048,8,s,e)}function ni(s,e){return li(4,2,s,e)}function oi(s,e){return li(4,4,s,e)}function pi(s,e){if(typeof e=="function")return s=s(),e(s),function(){e(null)};if(e!=null)return s=s(),e.current=s,function(){e.current=null}}function qi(s,e,o){return o=o!=null?o.concat([s]):null,li(4,4,pi.bind(null,e,s),o)}function ri(){}function si(s,e){var o=Uh();e=e===void 0?null:e;var a=o.memoizedState;return a!==null&&e!==null&&Mh(e,a[1])?a[0]:(o.memoizedState=[s,e],s)}function ti(s,e){var o=Uh();e=e===void 0?null:e;var a=o.memoizedState;return a!==null&&e!==null&&Mh(e,a[1])?a[0]:(s=s(),o.memoizedState=[s,e],s)}function ui(s,e,o){return Hh&21?(He(o,e)||(o=yc(),M$1.lanes|=o,rh|=o,s.baseState=!0),e):(s.baseState&&(s.baseState=!1,dh$1=!0),s.memoizedState=o)}function vi(s,e){var o=C$1;C$1=o!==0&&4>o?o:4,s(!0);var a=Gh.transition;Gh.transition={};try{s(!1),e()}finally{C$1=o,Gh.transition=a}}function wi(){return Uh().memoizedState}function xi(s,e,o){var a=yi(s);if(o={lane:a,action:o,hasEagerState:!1,eagerState:null,next:null},zi(s))Ai(e,o);else if(o=hh(s,e,o,a),o!==null){var d=R();gi(o,s,a,d),Bi(o,e,a)}}function ii(s,e,o){var a=yi(s),d={lane:a,action:o,hasEagerState:!1,eagerState:null,next:null};if(zi(s))Ai(e,d);else{var c=s.alternate;if(s.lanes===0&&(c===null||c.lanes===0)&&(c=e.lastRenderedReducer,c!==null))try{var j=e.lastRenderedState,_e=c(j,o);if(d.hasEagerState=!0,d.eagerState=_e,He(_e,j)){var pt=e.interleaved;pt===null?(d.next=d,gh(e)):(d.next=pt.next,pt.next=d),e.interleaved=d;return}}catch{}finally{}o=hh(s,e,d,a),o!==null&&(d=R(),gi(o,s,a,d),Bi(o,e,a))}}function zi(s){var e=s.alternate;return s===M$1||e!==null&&e===M$1}function Ai(s,e){Jh=Ih=!0;var o=s.pending;o===null?e.next=e:(e.next=o.next,o.next=e),s.pending=e}function Bi(s,e,o){if(o&4194240){var a=e.lanes;a&=s.pendingLanes,o|=a,e.lanes=o,Cc(s,o)}}var Rh={readContext:eh,useCallback:P,useContext:P,useEffect:P,useImperativeHandle:P,useInsertionEffect:P,useLayoutEffect:P,useMemo:P,useReducer:P,useRef:P,useState:P,useDebugValue:P,useDeferredValue:P,useTransition:P,useMutableSource:P,useSyncExternalStore:P,useId:P,unstable_isNewReconciler:!1},Oh={readContext:eh,useCallback:function(s,e){return Th().memoizedState=[s,e===void 0?null:e],s},useContext:eh,useEffect:mi,useImperativeHandle:function(s,e,o){return o=o!=null?o.concat([s]):null,ki(4194308,4,pi.bind(null,e,s),o)},useLayoutEffect:function(s,e){return ki(4194308,4,s,e)},useInsertionEffect:function(s,e){return ki(4,2,s,e)},useMemo:function(s,e){var o=Th();return e=e===void 0?null:e,s=s(),o.memoizedState=[s,e],s},useReducer:function(s,e,o){var a=Th();return e=o!==void 0?o(e):e,a.memoizedState=a.baseState=e,s={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:s,lastRenderedState:e},a.queue=s,s=s.dispatch=xi.bind(null,M$1,s),[a.memoizedState,s]},useRef:function(s){var e=Th();return s={current:s},e.memoizedState=s},useState:hi,useDebugValue:ri,useDeferredValue:function(s){return Th().memoizedState=s},useTransition:function(){var s=hi(!1),e=s[0];return s=vi.bind(null,s[1]),Th().memoizedState=s,[e,s]},useMutableSource:function(){},useSyncExternalStore:function(s,e,o){var a=M$1,d=Th();if(I){if(o===void 0)throw Error(p(407));o=o()}else{if(o=e(),Q===null)throw Error(p(349));Hh&30||di(a,e,o)}d.memoizedState=o;var c={value:o,getSnapshot:e};return d.queue=c,mi(ai.bind(null,a,c,s),[s]),a.flags|=2048,bi(9,ci.bind(null,a,c,o,e),void 0,null),o},useId:function(){var s=Th(),e=Q.identifierPrefix;if(I){var o=sg,a=rg;o=(a&~(1<<32-oc(a)-1)).toString(32)+o,e=":"+e+"R"+o,o=Kh++,0<o&&(e+="H"+o.toString(32)),e+=":"}else o=Lh++,e=":"+e+"r"+o.toString(32)+":";return s.memoizedState=e},unstable_isNewReconciler:!1},Ph={readContext:eh,useCallback:si,useContext:eh,useEffect:$h,useImperativeHandle:qi,useInsertionEffect:ni,useLayoutEffect:oi,useMemo:ti,useReducer:Wh,useRef:ji,useState:function(){return Wh(Vh)},useDebugValue:ri,useDeferredValue:function(s){var e=Uh();return ui(e,N$1.memoizedState,s)},useTransition:function(){var s=Wh(Vh)[0],e=Uh().memoizedState;return[s,e]},useMutableSource:Yh,useSyncExternalStore:Zh,useId:wi,unstable_isNewReconciler:!1},Qh={readContext:eh,useCallback:si,useContext:eh,useEffect:$h,useImperativeHandle:qi,useInsertionEffect:ni,useLayoutEffect:oi,useMemo:ti,useReducer:Xh,useRef:ji,useState:function(){return Xh(Vh)},useDebugValue:ri,useDeferredValue:function(s){var e=Uh();return N$1===null?e.memoizedState=s:ui(e,N$1.memoizedState,s)},useTransition:function(){var s=Xh(Vh)[0],e=Uh().memoizedState;return[s,e]},useMutableSource:Yh,useSyncExternalStore:Zh,useId:wi,unstable_isNewReconciler:!1};function Ci(s,e){if(s&&s.defaultProps){e=A({},e),s=s.defaultProps;for(var o in s)e[o]===void 0&&(e[o]=s[o]);return e}return e}function Di(s,e,o,a){e=s.memoizedState,o=o(a,e),o=o==null?e:A({},e,o),s.memoizedState=o,s.lanes===0&&(s.updateQueue.baseState=o)}var Ei={isMounted:function(s){return(s=s._reactInternals)?Vb(s)===s:!1},enqueueSetState:function(s,e,o){s=s._reactInternals;var a=R(),d=yi(s),c=mh(a,d);c.payload=e,o!=null&&(c.callback=o),e=nh(s,c,d),e!==null&&(gi(e,s,d,a),oh(e,s,d))},enqueueReplaceState:function(s,e,o){s=s._reactInternals;var a=R(),d=yi(s),c=mh(a,d);c.tag=1,c.payload=e,o!=null&&(c.callback=o),e=nh(s,c,d),e!==null&&(gi(e,s,d,a),oh(e,s,d))},enqueueForceUpdate:function(s,e){s=s._reactInternals;var o=R(),a=yi(s),d=mh(o,a);d.tag=2,e!=null&&(d.callback=e),e=nh(s,d,a),e!==null&&(gi(e,s,a,o),oh(e,s,a))}};function Fi(s,e,o,a,d,c,j){return s=s.stateNode,typeof s.shouldComponentUpdate=="function"?s.shouldComponentUpdate(a,c,j):e.prototype&&e.prototype.isPureReactComponent?!Ie(o,a)||!Ie(d,c):!0}function Gi(s,e,o){var a=!1,d=Vf,c=e.contextType;return typeof c=="object"&&c!==null?c=eh(c):(d=Zf(e)?Xf:H.current,a=e.contextTypes,c=(a=a!=null)?Yf(s,d):Vf),e=new e(o,c),s.memoizedState=e.state!==null&&e.state!==void 0?e.state:null,e.updater=Ei,s.stateNode=e,e._reactInternals=s,a&&(s=s.stateNode,s.__reactInternalMemoizedUnmaskedChildContext=d,s.__reactInternalMemoizedMaskedChildContext=c),e}function Hi(s,e,o,a){s=e.state,typeof e.componentWillReceiveProps=="function"&&e.componentWillReceiveProps(o,a),typeof e.UNSAFE_componentWillReceiveProps=="function"&&e.UNSAFE_componentWillReceiveProps(o,a),e.state!==s&&Ei.enqueueReplaceState(e,e.state,null)}function Ii(s,e,o,a){var d=s.stateNode;d.props=o,d.state=s.memoizedState,d.refs={},kh(s);var c=e.contextType;typeof c=="object"&&c!==null?d.context=eh(c):(c=Zf(e)?Xf:H.current,d.context=Yf(s,c)),d.state=s.memoizedState,c=e.getDerivedStateFromProps,typeof c=="function"&&(Di(s,e,c,o),d.state=s.memoizedState),typeof e.getDerivedStateFromProps=="function"||typeof d.getSnapshotBeforeUpdate=="function"||typeof d.UNSAFE_componentWillMount!="function"&&typeof d.componentWillMount!="function"||(e=d.state,typeof d.componentWillMount=="function"&&d.componentWillMount(),typeof d.UNSAFE_componentWillMount=="function"&&d.UNSAFE_componentWillMount(),e!==d.state&&Ei.enqueueReplaceState(d,d.state,null),qh(s,o,d,a),d.state=s.memoizedState),typeof d.componentDidMount=="function"&&(s.flags|=4194308)}function Ji(s,e){try{var o="",a=e;do o+=Pa(a),a=a.return;while(a);var d=o}catch(c){d=`
Error generating stack: `+c.message+`
`+c.stack}return{value:s,source:e,stack:d,digest:null}}function Ki(s,e,o){return{value:s,source:null,stack:o??null,digest:e??null}}function Li(s,e){try{console.error(e.value)}catch(o){setTimeout(function(){throw o})}}var Mi=typeof WeakMap=="function"?WeakMap:Map;function Ni(s,e,o){o=mh(-1,o),o.tag=3,o.payload={element:null};var a=e.value;return o.callback=function(){Oi||(Oi=!0,Pi=a),Li(s,e)},o}function Qi(s,e,o){o=mh(-1,o),o.tag=3;var a=s.type.getDerivedStateFromError;if(typeof a=="function"){var d=e.value;o.payload=function(){return a(d)},o.callback=function(){Li(s,e)}}var c=s.stateNode;return c!==null&&typeof c.componentDidCatch=="function"&&(o.callback=function(){Li(s,e),typeof a!="function"&&(Ri===null?Ri=new Set([this]):Ri.add(this));var j=e.stack;this.componentDidCatch(e.value,{componentStack:j!==null?j:""})}),o}function Si(s,e,o){var a=s.pingCache;if(a===null){a=s.pingCache=new Mi;var d=new Set;a.set(e,d)}else d=a.get(e),d===void 0&&(d=new Set,a.set(e,d));d.has(o)||(d.add(o),s=Ti.bind(null,s,e,o),e.then(s,s))}function Ui(s){do{var e;if((e=s.tag===13)&&(e=s.memoizedState,e=e!==null?e.dehydrated!==null:!0),e)return s;s=s.return}while(s!==null);return null}function Vi(s,e,o,a,d){return s.mode&1?(s.flags|=65536,s.lanes=d,s):(s===e?s.flags|=65536:(s.flags|=128,o.flags|=131072,o.flags&=-52805,o.tag===1&&(o.alternate===null?o.tag=17:(e=mh(-1,1),e.tag=2,nh(o,e,1))),o.lanes|=1),s)}var Wi=ua.ReactCurrentOwner,dh$1=!1;function Xi(s,e,o,a){e.child=s===null?Vg(e,null,o,a):Ug(e,s.child,o,a)}function Yi(s,e,o,a,d){o=o.render;var c=e.ref;return ch(e,d),a=Nh(s,e,o,a,c,d),o=Sh(),s!==null&&!dh$1?(e.updateQueue=s.updateQueue,e.flags&=-2053,s.lanes&=~d,Zi(s,e,d)):(I&&o&&vg(e),e.flags|=1,Xi(s,e,a,d),e.child)}function $i(s,e,o,a,d){if(s===null){var c=o.type;return typeof c=="function"&&!aj(c)&&c.defaultProps===void 0&&o.compare===null&&o.defaultProps===void 0?(e.tag=15,e.type=c,bj(s,e,c,a,d)):(s=Rg(o.type,null,a,e,e.mode,d),s.ref=e.ref,s.return=e,e.child=s)}if(c=s.child,!(s.lanes&d)){var j=c.memoizedProps;if(o=o.compare,o=o!==null?o:Ie,o(j,a)&&s.ref===e.ref)return Zi(s,e,d)}return e.flags|=1,s=Pg(c,a),s.ref=e.ref,s.return=e,e.child=s}function bj(s,e,o,a,d){if(s!==null){var c=s.memoizedProps;if(Ie(c,a)&&s.ref===e.ref)if(dh$1=!1,e.pendingProps=a=c,(s.lanes&d)!==0)s.flags&131072&&(dh$1=!0);else return e.lanes=s.lanes,Zi(s,e,d)}return cj(s,e,o,a,d)}function dj(s,e,o){var a=e.pendingProps,d=a.children,c=s!==null?s.memoizedState:null;if(a.mode==="hidden")if(!(e.mode&1))e.memoizedState={baseLanes:0,cachePool:null,transitions:null},G(ej,fj),fj|=o;else{if(!(o&1073741824))return s=c!==null?c.baseLanes|o:o,e.lanes=e.childLanes=1073741824,e.memoizedState={baseLanes:s,cachePool:null,transitions:null},e.updateQueue=null,G(ej,fj),fj|=s,null;e.memoizedState={baseLanes:0,cachePool:null,transitions:null},a=c!==null?c.baseLanes:o,G(ej,fj),fj|=a}else c!==null?(a=c.baseLanes|o,e.memoizedState=null):a=o,G(ej,fj),fj|=a;return Xi(s,e,d,o),e.child}function gj(s,e){var o=e.ref;(s===null&&o!==null||s!==null&&s.ref!==o)&&(e.flags|=512,e.flags|=2097152)}function cj(s,e,o,a,d){var c=Zf(o)?Xf:H.current;return c=Yf(e,c),ch(e,d),o=Nh(s,e,o,a,c,d),a=Sh(),s!==null&&!dh$1?(e.updateQueue=s.updateQueue,e.flags&=-2053,s.lanes&=~d,Zi(s,e,d)):(I&&a&&vg(e),e.flags|=1,Xi(s,e,o,d),e.child)}function hj(s,e,o,a,d){if(Zf(o)){var c=!0;cg(e)}else c=!1;if(ch(e,d),e.stateNode===null)ij(s,e),Gi(e,o,a),Ii(e,o,a,d),a=!0;else if(s===null){var j=e.stateNode,_e=e.memoizedProps;j.props=_e;var pt=j.context,yt=o.contextType;typeof yt=="object"&&yt!==null?yt=eh(yt):(yt=Zf(o)?Xf:H.current,yt=Yf(e,yt));var ct=o.getDerivedStateFromProps,Ct=typeof ct=="function"||typeof j.getSnapshotBeforeUpdate=="function";Ct||typeof j.UNSAFE_componentWillReceiveProps!="function"&&typeof j.componentWillReceiveProps!="function"||(_e!==a||pt!==yt)&&Hi(e,j,a,yt),jh=!1;var qt=e.memoizedState;j.state=qt,qh(e,a,j,d),pt=e.memoizedState,_e!==a||qt!==pt||Wf.current||jh?(typeof ct=="function"&&(Di(e,o,ct,a),pt=e.memoizedState),(_e=jh||Fi(e,o,_e,a,qt,pt,yt))?(Ct||typeof j.UNSAFE_componentWillMount!="function"&&typeof j.componentWillMount!="function"||(typeof j.componentWillMount=="function"&&j.componentWillMount(),typeof j.UNSAFE_componentWillMount=="function"&&j.UNSAFE_componentWillMount()),typeof j.componentDidMount=="function"&&(e.flags|=4194308)):(typeof j.componentDidMount=="function"&&(e.flags|=4194308),e.memoizedProps=a,e.memoizedState=pt),j.props=a,j.state=pt,j.context=yt,a=_e):(typeof j.componentDidMount=="function"&&(e.flags|=4194308),a=!1)}else{j=e.stateNode,lh(s,e),_e=e.memoizedProps,yt=e.type===e.elementType?_e:Ci(e.type,_e),j.props=yt,Ct=e.pendingProps,qt=j.context,pt=o.contextType,typeof pt=="object"&&pt!==null?pt=eh(pt):(pt=Zf(o)?Xf:H.current,pt=Yf(e,pt));var Ot=o.getDerivedStateFromProps;(ct=typeof Ot=="function"||typeof j.getSnapshotBeforeUpdate=="function")||typeof j.UNSAFE_componentWillReceiveProps!="function"&&typeof j.componentWillReceiveProps!="function"||(_e!==Ct||qt!==pt)&&Hi(e,j,a,pt),jh=!1,qt=e.memoizedState,j.state=qt,qh(e,a,j,d);var Lt=e.memoizedState;_e!==Ct||qt!==Lt||Wf.current||jh?(typeof Ot=="function"&&(Di(e,o,Ot,a),Lt=e.memoizedState),(yt=jh||Fi(e,o,yt,a,qt,Lt,pt)||!1)?(ct||typeof j.UNSAFE_componentWillUpdate!="function"&&typeof j.componentWillUpdate!="function"||(typeof j.componentWillUpdate=="function"&&j.componentWillUpdate(a,Lt,pt),typeof j.UNSAFE_componentWillUpdate=="function"&&j.UNSAFE_componentWillUpdate(a,Lt,pt)),typeof j.componentDidUpdate=="function"&&(e.flags|=4),typeof j.getSnapshotBeforeUpdate=="function"&&(e.flags|=1024)):(typeof j.componentDidUpdate!="function"||_e===s.memoizedProps&&qt===s.memoizedState||(e.flags|=4),typeof j.getSnapshotBeforeUpdate!="function"||_e===s.memoizedProps&&qt===s.memoizedState||(e.flags|=1024),e.memoizedProps=a,e.memoizedState=Lt),j.props=a,j.state=Lt,j.context=pt,a=yt):(typeof j.componentDidUpdate!="function"||_e===s.memoizedProps&&qt===s.memoizedState||(e.flags|=4),typeof j.getSnapshotBeforeUpdate!="function"||_e===s.memoizedProps&&qt===s.memoizedState||(e.flags|=1024),a=!1)}return jj(s,e,o,a,c,d)}function jj(s,e,o,a,d,c){gj(s,e);var j=(e.flags&128)!==0;if(!a&&!j)return d&&dg(e,o,!1),Zi(s,e,c);a=e.stateNode,Wi.current=e;var _e=j&&typeof o.getDerivedStateFromError!="function"?null:a.render();return e.flags|=1,s!==null&&j?(e.child=Ug(e,s.child,null,c),e.child=Ug(e,null,_e,c)):Xi(s,e,_e,c),e.memoizedState=a.state,d&&dg(e,o,!0),e.child}function kj(s){var e=s.stateNode;e.pendingContext?ag(s,e.pendingContext,e.pendingContext!==e.context):e.context&&ag(s,e.context,!1),yh(s,e.containerInfo)}function lj(s,e,o,a,d){return Ig(),Jg(d),e.flags|=256,Xi(s,e,o,a),e.child}var mj={dehydrated:null,treeContext:null,retryLane:0};function nj(s){return{baseLanes:s,cachePool:null,transitions:null}}function oj(s,e,o){var a=e.pendingProps,d=L$1.current,c=!1,j=(e.flags&128)!==0,_e;if((_e=j)||(_e=s!==null&&s.memoizedState===null?!1:(d&2)!==0),_e?(c=!0,e.flags&=-129):(s===null||s.memoizedState!==null)&&(d|=1),G(L$1,d&1),s===null)return Eg(e),s=e.memoizedState,s!==null&&(s=s.dehydrated,s!==null)?(e.mode&1?s.data==="$!"?e.lanes=8:e.lanes=1073741824:e.lanes=1,null):(j=a.children,s=a.fallback,c?(a=e.mode,c=e.child,j={mode:"hidden",children:j},!(a&1)&&c!==null?(c.childLanes=0,c.pendingProps=j):c=pj(j,a,0,null),s=Tg(s,a,o,null),c.return=e,s.return=e,c.sibling=s,e.child=c,e.child.memoizedState=nj(o),e.memoizedState=mj,s):qj(e,j));if(d=s.memoizedState,d!==null&&(_e=d.dehydrated,_e!==null))return rj(s,e,j,a,_e,d,o);if(c){c=a.fallback,j=e.mode,d=s.child,_e=d.sibling;var pt={mode:"hidden",children:a.children};return!(j&1)&&e.child!==d?(a=e.child,a.childLanes=0,a.pendingProps=pt,e.deletions=null):(a=Pg(d,pt),a.subtreeFlags=d.subtreeFlags&14680064),_e!==null?c=Pg(_e,c):(c=Tg(c,j,o,null),c.flags|=2),c.return=e,a.return=e,a.sibling=c,e.child=a,a=c,c=e.child,j=s.child.memoizedState,j=j===null?nj(o):{baseLanes:j.baseLanes|o,cachePool:null,transitions:j.transitions},c.memoizedState=j,c.childLanes=s.childLanes&~o,e.memoizedState=mj,a}return c=s.child,s=c.sibling,a=Pg(c,{mode:"visible",children:a.children}),!(e.mode&1)&&(a.lanes=o),a.return=e,a.sibling=null,s!==null&&(o=e.deletions,o===null?(e.deletions=[s],e.flags|=16):o.push(s)),e.child=a,e.memoizedState=null,a}function qj(s,e){return e=pj({mode:"visible",children:e},s.mode,0,null),e.return=s,s.child=e}function sj(s,e,o,a){return a!==null&&Jg(a),Ug(e,s.child,null,o),s=qj(e,e.pendingProps.children),s.flags|=2,e.memoizedState=null,s}function rj(s,e,o,a,d,c,j){if(o)return e.flags&256?(e.flags&=-257,a=Ki(Error(p(422))),sj(s,e,j,a)):e.memoizedState!==null?(e.child=s.child,e.flags|=128,null):(c=a.fallback,d=e.mode,a=pj({mode:"visible",children:a.children},d,0,null),c=Tg(c,d,j,null),c.flags|=2,a.return=e,c.return=e,a.sibling=c,e.child=a,e.mode&1&&Ug(e,s.child,null,j),e.child.memoizedState=nj(j),e.memoizedState=mj,c);if(!(e.mode&1))return sj(s,e,j,null);if(d.data==="$!"){if(a=d.nextSibling&&d.nextSibling.dataset,a)var _e=a.dgst;return a=_e,c=Error(p(419)),a=Ki(c,a,void 0),sj(s,e,j,a)}if(_e=(j&s.childLanes)!==0,dh$1||_e){if(a=Q,a!==null){switch(j&-j){case 4:d=2;break;case 16:d=8;break;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:d=32;break;case 536870912:d=268435456;break;default:d=0}d=d&(a.suspendedLanes|j)?0:d,d!==0&&d!==c.retryLane&&(c.retryLane=d,ih(s,d),gi(a,s,d,-1))}return tj(),a=Ki(Error(p(421))),sj(s,e,j,a)}return d.data==="$?"?(e.flags|=128,e.child=s.child,e=uj.bind(null,s),d._reactRetry=e,null):(s=c.treeContext,yg=Lf(d.nextSibling),xg=e,I=!0,zg=null,s!==null&&(og[pg++]=rg,og[pg++]=sg,og[pg++]=qg,rg=s.id,sg=s.overflow,qg=e),e=qj(e,a.children),e.flags|=4096,e)}function vj(s,e,o){s.lanes|=e;var a=s.alternate;a!==null&&(a.lanes|=e),bh(s.return,e,o)}function wj(s,e,o,a,d){var c=s.memoizedState;c===null?s.memoizedState={isBackwards:e,rendering:null,renderingStartTime:0,last:a,tail:o,tailMode:d}:(c.isBackwards=e,c.rendering=null,c.renderingStartTime=0,c.last=a,c.tail=o,c.tailMode=d)}function xj(s,e,o){var a=e.pendingProps,d=a.revealOrder,c=a.tail;if(Xi(s,e,a.children,o),a=L$1.current,a&2)a=a&1|2,e.flags|=128;else{if(s!==null&&s.flags&128)e:for(s=e.child;s!==null;){if(s.tag===13)s.memoizedState!==null&&vj(s,o,e);else if(s.tag===19)vj(s,o,e);else if(s.child!==null){s.child.return=s,s=s.child;continue}if(s===e)break e;for(;s.sibling===null;){if(s.return===null||s.return===e)break e;s=s.return}s.sibling.return=s.return,s=s.sibling}a&=1}if(G(L$1,a),!(e.mode&1))e.memoizedState=null;else switch(d){case"forwards":for(o=e.child,d=null;o!==null;)s=o.alternate,s!==null&&Ch(s)===null&&(d=o),o=o.sibling;o=d,o===null?(d=e.child,e.child=null):(d=o.sibling,o.sibling=null),wj(e,!1,d,o,c);break;case"backwards":for(o=null,d=e.child,e.child=null;d!==null;){if(s=d.alternate,s!==null&&Ch(s)===null){e.child=d;break}s=d.sibling,d.sibling=o,o=d,d=s}wj(e,!0,o,null,c);break;case"together":wj(e,!1,null,null,void 0);break;default:e.memoizedState=null}return e.child}function ij(s,e){!(e.mode&1)&&s!==null&&(s.alternate=null,e.alternate=null,e.flags|=2)}function Zi(s,e,o){if(s!==null&&(e.dependencies=s.dependencies),rh|=e.lanes,!(o&e.childLanes))return null;if(s!==null&&e.child!==s.child)throw Error(p(153));if(e.child!==null){for(s=e.child,o=Pg(s,s.pendingProps),e.child=o,o.return=e;s.sibling!==null;)s=s.sibling,o=o.sibling=Pg(s,s.pendingProps),o.return=e;o.sibling=null}return e.child}function yj(s,e,o){switch(e.tag){case 3:kj(e),Ig();break;case 5:Ah(e);break;case 1:Zf(e.type)&&cg(e);break;case 4:yh(e,e.stateNode.containerInfo);break;case 10:var a=e.type._context,d=e.memoizedProps.value;G(Wg,a._currentValue),a._currentValue=d;break;case 13:if(a=e.memoizedState,a!==null)return a.dehydrated!==null?(G(L$1,L$1.current&1),e.flags|=128,null):o&e.child.childLanes?oj(s,e,o):(G(L$1,L$1.current&1),s=Zi(s,e,o),s!==null?s.sibling:null);G(L$1,L$1.current&1);break;case 19:if(a=(o&e.childLanes)!==0,s.flags&128){if(a)return xj(s,e,o);e.flags|=128}if(d=e.memoizedState,d!==null&&(d.rendering=null,d.tail=null,d.lastEffect=null),G(L$1,L$1.current),a)break;return null;case 22:case 23:return e.lanes=0,dj(s,e,o)}return Zi(s,e,o)}var zj,Aj,Bj,Cj;zj=function(s,e){for(var o=e.child;o!==null;){if(o.tag===5||o.tag===6)s.appendChild(o.stateNode);else if(o.tag!==4&&o.child!==null){o.child.return=o,o=o.child;continue}if(o===e)break;for(;o.sibling===null;){if(o.return===null||o.return===e)return;o=o.return}o.sibling.return=o.return,o=o.sibling}};Aj=function(){};Bj=function(s,e,o,a){var d=s.memoizedProps;if(d!==a){s=e.stateNode,xh(uh.current);var c=null;switch(o){case"input":d=Ya(s,d),a=Ya(s,a),c=[];break;case"select":d=A({},d,{value:void 0}),a=A({},a,{value:void 0}),c=[];break;case"textarea":d=gb(s,d),a=gb(s,a),c=[];break;default:typeof d.onClick!="function"&&typeof a.onClick=="function"&&(s.onclick=Bf)}ub(o,a);var j;o=null;for(yt in d)if(!a.hasOwnProperty(yt)&&d.hasOwnProperty(yt)&&d[yt]!=null)if(yt==="style"){var _e=d[yt];for(j in _e)_e.hasOwnProperty(j)&&(o||(o={}),o[j]="")}else yt!=="dangerouslySetInnerHTML"&&yt!=="children"&&yt!=="suppressContentEditableWarning"&&yt!=="suppressHydrationWarning"&&yt!=="autoFocus"&&(ea.hasOwnProperty(yt)?c||(c=[]):(c=c||[]).push(yt,null));for(yt in a){var pt=a[yt];if(_e=d!=null?d[yt]:void 0,a.hasOwnProperty(yt)&&pt!==_e&&(pt!=null||_e!=null))if(yt==="style")if(_e){for(j in _e)!_e.hasOwnProperty(j)||pt&&pt.hasOwnProperty(j)||(o||(o={}),o[j]="");for(j in pt)pt.hasOwnProperty(j)&&_e[j]!==pt[j]&&(o||(o={}),o[j]=pt[j])}else o||(c||(c=[]),c.push(yt,o)),o=pt;else yt==="dangerouslySetInnerHTML"?(pt=pt?pt.__html:void 0,_e=_e?_e.__html:void 0,pt!=null&&_e!==pt&&(c=c||[]).push(yt,pt)):yt==="children"?typeof pt!="string"&&typeof pt!="number"||(c=c||[]).push(yt,""+pt):yt!=="suppressContentEditableWarning"&&yt!=="suppressHydrationWarning"&&(ea.hasOwnProperty(yt)?(pt!=null&&yt==="onScroll"&&D$1("scroll",s),c||_e===pt||(c=[])):(c=c||[]).push(yt,pt))}o&&(c=c||[]).push("style",o);var yt=c;(e.updateQueue=yt)&&(e.flags|=4)}};Cj=function(s,e,o,a){o!==a&&(e.flags|=4)};function Dj(s,e){if(!I)switch(s.tailMode){case"hidden":e=s.tail;for(var o=null;e!==null;)e.alternate!==null&&(o=e),e=e.sibling;o===null?s.tail=null:o.sibling=null;break;case"collapsed":o=s.tail;for(var a=null;o!==null;)o.alternate!==null&&(a=o),o=o.sibling;a===null?e||s.tail===null?s.tail=null:s.tail.sibling=null:a.sibling=null}}function S$1(s){var e=s.alternate!==null&&s.alternate.child===s.child,o=0,a=0;if(e)for(var d=s.child;d!==null;)o|=d.lanes|d.childLanes,a|=d.subtreeFlags&14680064,a|=d.flags&14680064,d.return=s,d=d.sibling;else for(d=s.child;d!==null;)o|=d.lanes|d.childLanes,a|=d.subtreeFlags,a|=d.flags,d.return=s,d=d.sibling;return s.subtreeFlags|=a,s.childLanes=o,e}function Ej(s,e,o){var a=e.pendingProps;switch(wg(e),e.tag){case 2:case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return S$1(e),null;case 1:return Zf(e.type)&&$f(),S$1(e),null;case 3:return a=e.stateNode,zh(),E(Wf),E(H),Eh(),a.pendingContext&&(a.context=a.pendingContext,a.pendingContext=null),(s===null||s.child===null)&&(Gg(e)?e.flags|=4:s===null||s.memoizedState.isDehydrated&&!(e.flags&256)||(e.flags|=1024,zg!==null&&(Fj(zg),zg=null))),Aj(s,e),S$1(e),null;case 5:Bh(e);var d=xh(wh.current);if(o=e.type,s!==null&&e.stateNode!=null)Bj(s,e,o,a,d),s.ref!==e.ref&&(e.flags|=512,e.flags|=2097152);else{if(!a){if(e.stateNode===null)throw Error(p(166));return S$1(e),null}if(s=xh(uh.current),Gg(e)){a=e.stateNode,o=e.type;var c=e.memoizedProps;switch(a[Of]=e,a[Pf]=c,s=(e.mode&1)!==0,o){case"dialog":D$1("cancel",a),D$1("close",a);break;case"iframe":case"object":case"embed":D$1("load",a);break;case"video":case"audio":for(d=0;d<lf.length;d++)D$1(lf[d],a);break;case"source":D$1("error",a);break;case"img":case"image":case"link":D$1("error",a),D$1("load",a);break;case"details":D$1("toggle",a);break;case"input":Za(a,c),D$1("invalid",a);break;case"select":a._wrapperState={wasMultiple:!!c.multiple},D$1("invalid",a);break;case"textarea":hb(a,c),D$1("invalid",a)}ub(o,c),d=null;for(var j in c)if(c.hasOwnProperty(j)){var _e=c[j];j==="children"?typeof _e=="string"?a.textContent!==_e&&(c.suppressHydrationWarning!==!0&&Af(a.textContent,_e,s),d=["children",_e]):typeof _e=="number"&&a.textContent!==""+_e&&(c.suppressHydrationWarning!==!0&&Af(a.textContent,_e,s),d=["children",""+_e]):ea.hasOwnProperty(j)&&_e!=null&&j==="onScroll"&&D$1("scroll",a)}switch(o){case"input":Va(a),db$1(a,c,!0);break;case"textarea":Va(a),jb(a);break;case"select":case"option":break;default:typeof c.onClick=="function"&&(a.onclick=Bf)}a=d,e.updateQueue=a,a!==null&&(e.flags|=4)}else{j=d.nodeType===9?d:d.ownerDocument,s==="http://www.w3.org/1999/xhtml"&&(s=kb(o)),s==="http://www.w3.org/1999/xhtml"?o==="script"?(s=j.createElement("div"),s.innerHTML="<script><\/script>",s=s.removeChild(s.firstChild)):typeof a.is=="string"?s=j.createElement(o,{is:a.is}):(s=j.createElement(o),o==="select"&&(j=s,a.multiple?j.multiple=!0:a.size&&(j.size=a.size))):s=j.createElementNS(s,o),s[Of]=e,s[Pf]=a,zj(s,e,!1,!1),e.stateNode=s;e:{switch(j=vb(o,a),o){case"dialog":D$1("cancel",s),D$1("close",s),d=a;break;case"iframe":case"object":case"embed":D$1("load",s),d=a;break;case"video":case"audio":for(d=0;d<lf.length;d++)D$1(lf[d],s);d=a;break;case"source":D$1("error",s),d=a;break;case"img":case"image":case"link":D$1("error",s),D$1("load",s),d=a;break;case"details":D$1("toggle",s),d=a;break;case"input":Za(s,a),d=Ya(s,a),D$1("invalid",s);break;case"option":d=a;break;case"select":s._wrapperState={wasMultiple:!!a.multiple},d=A({},a,{value:void 0}),D$1("invalid",s);break;case"textarea":hb(s,a),d=gb(s,a),D$1("invalid",s);break;default:d=a}ub(o,d),_e=d;for(c in _e)if(_e.hasOwnProperty(c)){var pt=_e[c];c==="style"?sb(s,pt):c==="dangerouslySetInnerHTML"?(pt=pt?pt.__html:void 0,pt!=null&&nb(s,pt)):c==="children"?typeof pt=="string"?(o!=="textarea"||pt!=="")&&ob(s,pt):typeof pt=="number"&&ob(s,""+pt):c!=="suppressContentEditableWarning"&&c!=="suppressHydrationWarning"&&c!=="autoFocus"&&(ea.hasOwnProperty(c)?pt!=null&&c==="onScroll"&&D$1("scroll",s):pt!=null&&ta(s,c,pt,j))}switch(o){case"input":Va(s),db$1(s,a,!1);break;case"textarea":Va(s),jb(s);break;case"option":a.value!=null&&s.setAttribute("value",""+Sa(a.value));break;case"select":s.multiple=!!a.multiple,c=a.value,c!=null?fb(s,!!a.multiple,c,!1):a.defaultValue!=null&&fb(s,!!a.multiple,a.defaultValue,!0);break;default:typeof d.onClick=="function"&&(s.onclick=Bf)}switch(o){case"button":case"input":case"select":case"textarea":a=!!a.autoFocus;break e;case"img":a=!0;break e;default:a=!1}}a&&(e.flags|=4)}e.ref!==null&&(e.flags|=512,e.flags|=2097152)}return S$1(e),null;case 6:if(s&&e.stateNode!=null)Cj(s,e,s.memoizedProps,a);else{if(typeof a!="string"&&e.stateNode===null)throw Error(p(166));if(o=xh(wh.current),xh(uh.current),Gg(e)){if(a=e.stateNode,o=e.memoizedProps,a[Of]=e,(c=a.nodeValue!==o)&&(s=xg,s!==null))switch(s.tag){case 3:Af(a.nodeValue,o,(s.mode&1)!==0);break;case 5:s.memoizedProps.suppressHydrationWarning!==!0&&Af(a.nodeValue,o,(s.mode&1)!==0)}c&&(e.flags|=4)}else a=(o.nodeType===9?o:o.ownerDocument).createTextNode(a),a[Of]=e,e.stateNode=a}return S$1(e),null;case 13:if(E(L$1),a=e.memoizedState,s===null||s.memoizedState!==null&&s.memoizedState.dehydrated!==null){if(I&&yg!==null&&e.mode&1&&!(e.flags&128))Hg(),Ig(),e.flags|=98560,c=!1;else if(c=Gg(e),a!==null&&a.dehydrated!==null){if(s===null){if(!c)throw Error(p(318));if(c=e.memoizedState,c=c!==null?c.dehydrated:null,!c)throw Error(p(317));c[Of]=e}else Ig(),!(e.flags&128)&&(e.memoizedState=null),e.flags|=4;S$1(e),c=!1}else zg!==null&&(Fj(zg),zg=null),c=!0;if(!c)return e.flags&65536?e:null}return e.flags&128?(e.lanes=o,e):(a=a!==null,a!==(s!==null&&s.memoizedState!==null)&&a&&(e.child.flags|=8192,e.mode&1&&(s===null||L$1.current&1?T===0&&(T=3):tj())),e.updateQueue!==null&&(e.flags|=4),S$1(e),null);case 4:return zh(),Aj(s,e),s===null&&sf(e.stateNode.containerInfo),S$1(e),null;case 10:return ah(e.type._context),S$1(e),null;case 17:return Zf(e.type)&&$f(),S$1(e),null;case 19:if(E(L$1),c=e.memoizedState,c===null)return S$1(e),null;if(a=(e.flags&128)!==0,j=c.rendering,j===null)if(a)Dj(c,!1);else{if(T!==0||s!==null&&s.flags&128)for(s=e.child;s!==null;){if(j=Ch(s),j!==null){for(e.flags|=128,Dj(c,!1),a=j.updateQueue,a!==null&&(e.updateQueue=a,e.flags|=4),e.subtreeFlags=0,a=o,o=e.child;o!==null;)c=o,s=a,c.flags&=14680066,j=c.alternate,j===null?(c.childLanes=0,c.lanes=s,c.child=null,c.subtreeFlags=0,c.memoizedProps=null,c.memoizedState=null,c.updateQueue=null,c.dependencies=null,c.stateNode=null):(c.childLanes=j.childLanes,c.lanes=j.lanes,c.child=j.child,c.subtreeFlags=0,c.deletions=null,c.memoizedProps=j.memoizedProps,c.memoizedState=j.memoizedState,c.updateQueue=j.updateQueue,c.type=j.type,s=j.dependencies,c.dependencies=s===null?null:{lanes:s.lanes,firstContext:s.firstContext}),o=o.sibling;return G(L$1,L$1.current&1|2),e.child}s=s.sibling}c.tail!==null&&B$1()>Gj&&(e.flags|=128,a=!0,Dj(c,!1),e.lanes=4194304)}else{if(!a)if(s=Ch(j),s!==null){if(e.flags|=128,a=!0,o=s.updateQueue,o!==null&&(e.updateQueue=o,e.flags|=4),Dj(c,!0),c.tail===null&&c.tailMode==="hidden"&&!j.alternate&&!I)return S$1(e),null}else 2*B$1()-c.renderingStartTime>Gj&&o!==1073741824&&(e.flags|=128,a=!0,Dj(c,!1),e.lanes=4194304);c.isBackwards?(j.sibling=e.child,e.child=j):(o=c.last,o!==null?o.sibling=j:e.child=j,c.last=j)}return c.tail!==null?(e=c.tail,c.rendering=e,c.tail=e.sibling,c.renderingStartTime=B$1(),e.sibling=null,o=L$1.current,G(L$1,a?o&1|2:o&1),e):(S$1(e),null);case 22:case 23:return Hj(),a=e.memoizedState!==null,s!==null&&s.memoizedState!==null!==a&&(e.flags|=8192),a&&e.mode&1?fj&1073741824&&(S$1(e),e.subtreeFlags&6&&(e.flags|=8192)):S$1(e),null;case 24:return null;case 25:return null}throw Error(p(156,e.tag))}function Ij(s,e){switch(wg(e),e.tag){case 1:return Zf(e.type)&&$f(),s=e.flags,s&65536?(e.flags=s&-65537|128,e):null;case 3:return zh(),E(Wf),E(H),Eh(),s=e.flags,s&65536&&!(s&128)?(e.flags=s&-65537|128,e):null;case 5:return Bh(e),null;case 13:if(E(L$1),s=e.memoizedState,s!==null&&s.dehydrated!==null){if(e.alternate===null)throw Error(p(340));Ig()}return s=e.flags,s&65536?(e.flags=s&-65537|128,e):null;case 19:return E(L$1),null;case 4:return zh(),null;case 10:return ah(e.type._context),null;case 22:case 23:return Hj(),null;case 24:return null;default:return null}}var Jj=!1,U$1=!1,Kj=typeof WeakSet=="function"?WeakSet:Set,V=null;function Lj(s,e){var o=s.ref;if(o!==null)if(typeof o=="function")try{o(null)}catch(a){W(s,e,a)}else o.current=null}function Mj(s,e,o){try{o()}catch(a){W(s,e,a)}}var Nj=!1;function Oj(s,e){if(Cf=dd,s=Me(),Ne(s)){if("selectionStart"in s)var o={start:s.selectionStart,end:s.selectionEnd};else e:{o=(o=s.ownerDocument)&&o.defaultView||window;var a=o.getSelection&&o.getSelection();if(a&&a.rangeCount!==0){o=a.anchorNode;var d=a.anchorOffset,c=a.focusNode;a=a.focusOffset;try{o.nodeType,c.nodeType}catch{o=null;break e}var j=0,_e=-1,pt=-1,yt=0,ct=0,Ct=s,qt=null;t:for(;;){for(var Ot;Ct!==o||d!==0&&Ct.nodeType!==3||(_e=j+d),Ct!==c||a!==0&&Ct.nodeType!==3||(pt=j+a),Ct.nodeType===3&&(j+=Ct.nodeValue.length),(Ot=Ct.firstChild)!==null;)qt=Ct,Ct=Ot;for(;;){if(Ct===s)break t;if(qt===o&&++yt===d&&(_e=j),qt===c&&++ct===a&&(pt=j),(Ot=Ct.nextSibling)!==null)break;Ct=qt,qt=Ct.parentNode}Ct=Ot}o=_e===-1||pt===-1?null:{start:_e,end:pt}}else o=null}o=o||{start:0,end:0}}else o=null;for(Df={focusedElem:s,selectionRange:o},dd=!1,V=e;V!==null;)if(e=V,s=e.child,(e.subtreeFlags&1028)!==0&&s!==null)s.return=e,V=s;else for(;V!==null;){e=V;try{var Lt=e.alternate;if(e.flags&1024)switch(e.tag){case 0:case 11:case 15:break;case 1:if(Lt!==null){var Qt=Lt.memoizedProps,ir=Lt.memoizedState,er=e.stateNode,tr=er.getSnapshotBeforeUpdate(e.elementType===e.type?Qt:Ci(e.type,Qt),ir);er.__reactInternalSnapshotBeforeUpdate=tr}break;case 3:var sr=e.stateNode.containerInfo;sr.nodeType===1?sr.textContent="":sr.nodeType===9&&sr.documentElement&&sr.removeChild(sr.documentElement);break;case 5:case 6:case 4:case 17:break;default:throw Error(p(163))}}catch(ar){W(e,e.return,ar)}if(s=e.sibling,s!==null){s.return=e.return,V=s;break}V=e.return}return Lt=Nj,Nj=!1,Lt}function Pj(s,e,o){var a=e.updateQueue;if(a=a!==null?a.lastEffect:null,a!==null){var d=a=a.next;do{if((d.tag&s)===s){var c=d.destroy;d.destroy=void 0,c!==void 0&&Mj(e,o,c)}d=d.next}while(d!==a)}}function Qj(s,e){if(e=e.updateQueue,e=e!==null?e.lastEffect:null,e!==null){var o=e=e.next;do{if((o.tag&s)===s){var a=o.create;o.destroy=a()}o=o.next}while(o!==e)}}function Rj(s){var e=s.ref;if(e!==null){var o=s.stateNode;switch(s.tag){case 5:s=o;break;default:s=o}typeof e=="function"?e(s):e.current=s}}function Sj(s){var e=s.alternate;e!==null&&(s.alternate=null,Sj(e)),s.child=null,s.deletions=null,s.sibling=null,s.tag===5&&(e=s.stateNode,e!==null&&(delete e[Of],delete e[Pf],delete e[of],delete e[Qf],delete e[Rf])),s.stateNode=null,s.return=null,s.dependencies=null,s.memoizedProps=null,s.memoizedState=null,s.pendingProps=null,s.stateNode=null,s.updateQueue=null}function Tj(s){return s.tag===5||s.tag===3||s.tag===4}function Uj(s){e:for(;;){for(;s.sibling===null;){if(s.return===null||Tj(s.return))return null;s=s.return}for(s.sibling.return=s.return,s=s.sibling;s.tag!==5&&s.tag!==6&&s.tag!==18;){if(s.flags&2||s.child===null||s.tag===4)continue e;s.child.return=s,s=s.child}if(!(s.flags&2))return s.stateNode}}function Vj(s,e,o){var a=s.tag;if(a===5||a===6)s=s.stateNode,e?o.nodeType===8?o.parentNode.insertBefore(s,e):o.insertBefore(s,e):(o.nodeType===8?(e=o.parentNode,e.insertBefore(s,o)):(e=o,e.appendChild(s)),o=o._reactRootContainer,o!=null||e.onclick!==null||(e.onclick=Bf));else if(a!==4&&(s=s.child,s!==null))for(Vj(s,e,o),s=s.sibling;s!==null;)Vj(s,e,o),s=s.sibling}function Wj(s,e,o){var a=s.tag;if(a===5||a===6)s=s.stateNode,e?o.insertBefore(s,e):o.appendChild(s);else if(a!==4&&(s=s.child,s!==null))for(Wj(s,e,o),s=s.sibling;s!==null;)Wj(s,e,o),s=s.sibling}var X=null,Xj=!1;function Yj(s,e,o){for(o=o.child;o!==null;)Zj(s,e,o),o=o.sibling}function Zj(s,e,o){if(lc&&typeof lc.onCommitFiberUnmount=="function")try{lc.onCommitFiberUnmount(kc,o)}catch{}switch(o.tag){case 5:U$1||Lj(o,e);case 6:var a=X,d=Xj;X=null,Yj(s,e,o),X=a,Xj=d,X!==null&&(Xj?(s=X,o=o.stateNode,s.nodeType===8?s.parentNode.removeChild(o):s.removeChild(o)):X.removeChild(o.stateNode));break;case 18:X!==null&&(Xj?(s=X,o=o.stateNode,s.nodeType===8?Kf(s.parentNode,o):s.nodeType===1&&Kf(s,o),bd(s)):Kf(X,o.stateNode));break;case 4:a=X,d=Xj,X=o.stateNode.containerInfo,Xj=!0,Yj(s,e,o),X=a,Xj=d;break;case 0:case 11:case 14:case 15:if(!U$1&&(a=o.updateQueue,a!==null&&(a=a.lastEffect,a!==null))){d=a=a.next;do{var c=d,j=c.destroy;c=c.tag,j!==void 0&&(c&2||c&4)&&Mj(o,e,j),d=d.next}while(d!==a)}Yj(s,e,o);break;case 1:if(!U$1&&(Lj(o,e),a=o.stateNode,typeof a.componentWillUnmount=="function"))try{a.props=o.memoizedProps,a.state=o.memoizedState,a.componentWillUnmount()}catch(_e){W(o,e,_e)}Yj(s,e,o);break;case 21:Yj(s,e,o);break;case 22:o.mode&1?(U$1=(a=U$1)||o.memoizedState!==null,Yj(s,e,o),U$1=a):Yj(s,e,o);break;default:Yj(s,e,o)}}function ak(s){var e=s.updateQueue;if(e!==null){s.updateQueue=null;var o=s.stateNode;o===null&&(o=s.stateNode=new Kj),e.forEach(function(a){var d=bk.bind(null,s,a);o.has(a)||(o.add(a),a.then(d,d))})}}function ck(s,e){var o=e.deletions;if(o!==null)for(var a=0;a<o.length;a++){var d=o[a];try{var c=s,j=e,_e=j;e:for(;_e!==null;){switch(_e.tag){case 5:X=_e.stateNode,Xj=!1;break e;case 3:X=_e.stateNode.containerInfo,Xj=!0;break e;case 4:X=_e.stateNode.containerInfo,Xj=!0;break e}_e=_e.return}if(X===null)throw Error(p(160));Zj(c,j,d),X=null,Xj=!1;var pt=d.alternate;pt!==null&&(pt.return=null),d.return=null}catch(yt){W(d,e,yt)}}if(e.subtreeFlags&12854)for(e=e.child;e!==null;)dk(e,s),e=e.sibling}function dk(s,e){var o=s.alternate,a=s.flags;switch(s.tag){case 0:case 11:case 14:case 15:if(ck(e,s),ek(s),a&4){try{Pj(3,s,s.return),Qj(3,s)}catch(Qt){W(s,s.return,Qt)}try{Pj(5,s,s.return)}catch(Qt){W(s,s.return,Qt)}}break;case 1:ck(e,s),ek(s),a&512&&o!==null&&Lj(o,o.return);break;case 5:if(ck(e,s),ek(s),a&512&&o!==null&&Lj(o,o.return),s.flags&32){var d=s.stateNode;try{ob(d,"")}catch(Qt){W(s,s.return,Qt)}}if(a&4&&(d=s.stateNode,d!=null)){var c=s.memoizedProps,j=o!==null?o.memoizedProps:c,_e=s.type,pt=s.updateQueue;if(s.updateQueue=null,pt!==null)try{_e==="input"&&c.type==="radio"&&c.name!=null&&ab(d,c),vb(_e,j);var yt=vb(_e,c);for(j=0;j<pt.length;j+=2){var ct=pt[j],Ct=pt[j+1];ct==="style"?sb(d,Ct):ct==="dangerouslySetInnerHTML"?nb(d,Ct):ct==="children"?ob(d,Ct):ta(d,ct,Ct,yt)}switch(_e){case"input":bb(d,c);break;case"textarea":ib(d,c);break;case"select":var qt=d._wrapperState.wasMultiple;d._wrapperState.wasMultiple=!!c.multiple;var Ot=c.value;Ot!=null?fb(d,!!c.multiple,Ot,!1):qt!==!!c.multiple&&(c.defaultValue!=null?fb(d,!!c.multiple,c.defaultValue,!0):fb(d,!!c.multiple,c.multiple?[]:"",!1))}d[Pf]=c}catch(Qt){W(s,s.return,Qt)}}break;case 6:if(ck(e,s),ek(s),a&4){if(s.stateNode===null)throw Error(p(162));d=s.stateNode,c=s.memoizedProps;try{d.nodeValue=c}catch(Qt){W(s,s.return,Qt)}}break;case 3:if(ck(e,s),ek(s),a&4&&o!==null&&o.memoizedState.isDehydrated)try{bd(e.containerInfo)}catch(Qt){W(s,s.return,Qt)}break;case 4:ck(e,s),ek(s);break;case 13:ck(e,s),ek(s),d=s.child,d.flags&8192&&(c=d.memoizedState!==null,d.stateNode.isHidden=c,!c||d.alternate!==null&&d.alternate.memoizedState!==null||(fk=B$1())),a&4&&ak(s);break;case 22:if(ct=o!==null&&o.memoizedState!==null,s.mode&1?(U$1=(yt=U$1)||ct,ck(e,s),U$1=yt):ck(e,s),ek(s),a&8192){if(yt=s.memoizedState!==null,(s.stateNode.isHidden=yt)&&!ct&&s.mode&1)for(V=s,ct=s.child;ct!==null;){for(Ct=V=ct;V!==null;){switch(qt=V,Ot=qt.child,qt.tag){case 0:case 11:case 14:case 15:Pj(4,qt,qt.return);break;case 1:Lj(qt,qt.return);var Lt=qt.stateNode;if(typeof Lt.componentWillUnmount=="function"){a=qt,o=qt.return;try{e=a,Lt.props=e.memoizedProps,Lt.state=e.memoizedState,Lt.componentWillUnmount()}catch(Qt){W(a,o,Qt)}}break;case 5:Lj(qt,qt.return);break;case 22:if(qt.memoizedState!==null){gk(Ct);continue}}Ot!==null?(Ot.return=qt,V=Ot):gk(Ct)}ct=ct.sibling}e:for(ct=null,Ct=s;;){if(Ct.tag===5){if(ct===null){ct=Ct;try{d=Ct.stateNode,yt?(c=d.style,typeof c.setProperty=="function"?c.setProperty("display","none","important"):c.display="none"):(_e=Ct.stateNode,pt=Ct.memoizedProps.style,j=pt!=null&&pt.hasOwnProperty("display")?pt.display:null,_e.style.display=rb("display",j))}catch(Qt){W(s,s.return,Qt)}}}else if(Ct.tag===6){if(ct===null)try{Ct.stateNode.nodeValue=yt?"":Ct.memoizedProps}catch(Qt){W(s,s.return,Qt)}}else if((Ct.tag!==22&&Ct.tag!==23||Ct.memoizedState===null||Ct===s)&&Ct.child!==null){Ct.child.return=Ct,Ct=Ct.child;continue}if(Ct===s)break e;for(;Ct.sibling===null;){if(Ct.return===null||Ct.return===s)break e;ct===Ct&&(ct=null),Ct=Ct.return}ct===Ct&&(ct=null),Ct.sibling.return=Ct.return,Ct=Ct.sibling}}break;case 19:ck(e,s),ek(s),a&4&&ak(s);break;case 21:break;default:ck(e,s),ek(s)}}function ek(s){var e=s.flags;if(e&2){try{e:{for(var o=s.return;o!==null;){if(Tj(o)){var a=o;break e}o=o.return}throw Error(p(160))}switch(a.tag){case 5:var d=a.stateNode;a.flags&32&&(ob(d,""),a.flags&=-33);var c=Uj(s);Wj(s,c,d);break;case 3:case 4:var j=a.stateNode.containerInfo,_e=Uj(s);Vj(s,_e,j);break;default:throw Error(p(161))}}catch(pt){W(s,s.return,pt)}s.flags&=-3}e&4096&&(s.flags&=-4097)}function hk(s,e,o){V=s,ik(s)}function ik(s,e,o){for(var a=(s.mode&1)!==0;V!==null;){var d=V,c=d.child;if(d.tag===22&&a){var j=d.memoizedState!==null||Jj;if(!j){var _e=d.alternate,pt=_e!==null&&_e.memoizedState!==null||U$1;_e=Jj;var yt=U$1;if(Jj=j,(U$1=pt)&&!yt)for(V=d;V!==null;)j=V,pt=j.child,j.tag===22&&j.memoizedState!==null?jk(d):pt!==null?(pt.return=j,V=pt):jk(d);for(;c!==null;)V=c,ik(c),c=c.sibling;V=d,Jj=_e,U$1=yt}kk(s)}else d.subtreeFlags&8772&&c!==null?(c.return=d,V=c):kk(s)}}function kk(s){for(;V!==null;){var e=V;if(e.flags&8772){var o=e.alternate;try{if(e.flags&8772)switch(e.tag){case 0:case 11:case 15:U$1||Qj(5,e);break;case 1:var a=e.stateNode;if(e.flags&4&&!U$1)if(o===null)a.componentDidMount();else{var d=e.elementType===e.type?o.memoizedProps:Ci(e.type,o.memoizedProps);a.componentDidUpdate(d,o.memoizedState,a.__reactInternalSnapshotBeforeUpdate)}var c=e.updateQueue;c!==null&&sh(e,c,a);break;case 3:var j=e.updateQueue;if(j!==null){if(o=null,e.child!==null)switch(e.child.tag){case 5:o=e.child.stateNode;break;case 1:o=e.child.stateNode}sh(e,j,o)}break;case 5:var _e=e.stateNode;if(o===null&&e.flags&4){o=_e;var pt=e.memoizedProps;switch(e.type){case"button":case"input":case"select":case"textarea":pt.autoFocus&&o.focus();break;case"img":pt.src&&(o.src=pt.src)}}break;case 6:break;case 4:break;case 12:break;case 13:if(e.memoizedState===null){var yt=e.alternate;if(yt!==null){var ct=yt.memoizedState;if(ct!==null){var Ct=ct.dehydrated;Ct!==null&&bd(Ct)}}}break;case 19:case 17:case 21:case 22:case 23:case 25:break;default:throw Error(p(163))}U$1||e.flags&512&&Rj(e)}catch(qt){W(e,e.return,qt)}}if(e===s){V=null;break}if(o=e.sibling,o!==null){o.return=e.return,V=o;break}V=e.return}}function gk(s){for(;V!==null;){var e=V;if(e===s){V=null;break}var o=e.sibling;if(o!==null){o.return=e.return,V=o;break}V=e.return}}function jk(s){for(;V!==null;){var e=V;try{switch(e.tag){case 0:case 11:case 15:var o=e.return;try{Qj(4,e)}catch(pt){W(e,o,pt)}break;case 1:var a=e.stateNode;if(typeof a.componentDidMount=="function"){var d=e.return;try{a.componentDidMount()}catch(pt){W(e,d,pt)}}var c=e.return;try{Rj(e)}catch(pt){W(e,c,pt)}break;case 5:var j=e.return;try{Rj(e)}catch(pt){W(e,j,pt)}}}catch(pt){W(e,e.return,pt)}if(e===s){V=null;break}var _e=e.sibling;if(_e!==null){_e.return=e.return,V=_e;break}V=e.return}}var lk=Math.ceil,mk=ua.ReactCurrentDispatcher,nk=ua.ReactCurrentOwner,ok=ua.ReactCurrentBatchConfig,K=0,Q=null,Y=null,Z=0,fj=0,ej=Uf(0),T=0,pk=null,rh=0,qk=0,rk=0,sk=null,tk=null,fk=0,Gj=1/0,uk=null,Oi=!1,Pi=null,Ri=null,vk=!1,wk=null,xk=0,yk=0,zk=null,Ak=-1,Bk=0;function R(){return K&6?B$1():Ak!==-1?Ak:Ak=B$1()}function yi(s){return s.mode&1?K&2&&Z!==0?Z&-Z:Kg.transition!==null?(Bk===0&&(Bk=yc()),Bk):(s=C$1,s!==0||(s=window.event,s=s===void 0?16:jd(s.type)),s):1}function gi(s,e,o,a){if(50<yk)throw yk=0,zk=null,Error(p(185));Ac(s,o,a),(!(K&2)||s!==Q)&&(s===Q&&(!(K&2)&&(qk|=o),T===4&&Ck(s,Z)),Dk(s,a),o===1&&K===0&&!(e.mode&1)&&(Gj=B$1()+500,fg&&jg()))}function Dk(s,e){var o=s.callbackNode;wc(s,e);var a=uc(s,s===Q?Z:0);if(a===0)o!==null&&bc(o),s.callbackNode=null,s.callbackPriority=0;else if(e=a&-a,s.callbackPriority!==e){if(o!=null&&bc(o),e===1)s.tag===0?ig(Ek.bind(null,s)):hg(Ek.bind(null,s)),Jf(function(){!(K&6)&&jg()}),o=null;else{switch(Dc(a)){case 1:o=fc;break;case 4:o=gc;break;case 16:o=hc;break;case 536870912:o=jc;break;default:o=hc}o=Fk(o,Gk.bind(null,s))}s.callbackPriority=e,s.callbackNode=o}}function Gk(s,e){if(Ak=-1,Bk=0,K&6)throw Error(p(327));var o=s.callbackNode;if(Hk()&&s.callbackNode!==o)return null;var a=uc(s,s===Q?Z:0);if(a===0)return null;if(a&30||a&s.expiredLanes||e)e=Ik(s,a);else{e=a;var d=K;K|=2;var c=Jk();(Q!==s||Z!==e)&&(uk=null,Gj=B$1()+500,Kk(s,e));do try{Lk();break}catch(_e){Mk(s,_e)}while(!0);$g(),mk.current=c,K=d,Y!==null?e=0:(Q=null,Z=0,e=T)}if(e!==0){if(e===2&&(d=xc(s),d!==0&&(a=d,e=Nk(s,d))),e===1)throw o=pk,Kk(s,0),Ck(s,a),Dk(s,B$1()),o;if(e===6)Ck(s,a);else{if(d=s.current.alternate,!(a&30)&&!Ok(d)&&(e=Ik(s,a),e===2&&(c=xc(s),c!==0&&(a=c,e=Nk(s,c))),e===1))throw o=pk,Kk(s,0),Ck(s,a),Dk(s,B$1()),o;switch(s.finishedWork=d,s.finishedLanes=a,e){case 0:case 1:throw Error(p(345));case 2:Pk(s,tk,uk);break;case 3:if(Ck(s,a),(a&130023424)===a&&(e=fk+500-B$1(),10<e)){if(uc(s,0)!==0)break;if(d=s.suspendedLanes,(d&a)!==a){R(),s.pingedLanes|=s.suspendedLanes&d;break}s.timeoutHandle=Ff(Pk.bind(null,s,tk,uk),e);break}Pk(s,tk,uk);break;case 4:if(Ck(s,a),(a&4194240)===a)break;for(e=s.eventTimes,d=-1;0<a;){var j=31-oc(a);c=1<<j,j=e[j],j>d&&(d=j),a&=~c}if(a=d,a=B$1()-a,a=(120>a?120:480>a?480:1080>a?1080:1920>a?1920:3e3>a?3e3:4320>a?4320:1960*lk(a/1960))-a,10<a){s.timeoutHandle=Ff(Pk.bind(null,s,tk,uk),a);break}Pk(s,tk,uk);break;case 5:Pk(s,tk,uk);break;default:throw Error(p(329))}}}return Dk(s,B$1()),s.callbackNode===o?Gk.bind(null,s):null}function Nk(s,e){var o=sk;return s.current.memoizedState.isDehydrated&&(Kk(s,e).flags|=256),s=Ik(s,e),s!==2&&(e=tk,tk=o,e!==null&&Fj(e)),s}function Fj(s){tk===null?tk=s:tk.push.apply(tk,s)}function Ok(s){for(var e=s;;){if(e.flags&16384){var o=e.updateQueue;if(o!==null&&(o=o.stores,o!==null))for(var a=0;a<o.length;a++){var d=o[a],c=d.getSnapshot;d=d.value;try{if(!He(c(),d))return!1}catch{return!1}}}if(o=e.child,e.subtreeFlags&16384&&o!==null)o.return=e,e=o;else{if(e===s)break;for(;e.sibling===null;){if(e.return===null||e.return===s)return!0;e=e.return}e.sibling.return=e.return,e=e.sibling}}return!0}function Ck(s,e){for(e&=~rk,e&=~qk,s.suspendedLanes|=e,s.pingedLanes&=~e,s=s.expirationTimes;0<e;){var o=31-oc(e),a=1<<o;s[o]=-1,e&=~a}}function Ek(s){if(K&6)throw Error(p(327));Hk();var e=uc(s,0);if(!(e&1))return Dk(s,B$1()),null;var o=Ik(s,e);if(s.tag!==0&&o===2){var a=xc(s);a!==0&&(e=a,o=Nk(s,a))}if(o===1)throw o=pk,Kk(s,0),Ck(s,e),Dk(s,B$1()),o;if(o===6)throw Error(p(345));return s.finishedWork=s.current.alternate,s.finishedLanes=e,Pk(s,tk,uk),Dk(s,B$1()),null}function Qk(s,e){var o=K;K|=1;try{return s(e)}finally{K=o,K===0&&(Gj=B$1()+500,fg&&jg())}}function Rk(s){wk!==null&&wk.tag===0&&!(K&6)&&Hk();var e=K;K|=1;var o=ok.transition,a=C$1;try{if(ok.transition=null,C$1=1,s)return s()}finally{C$1=a,ok.transition=o,K=e,!(K&6)&&jg()}}function Hj(){fj=ej.current,E(ej)}function Kk(s,e){s.finishedWork=null,s.finishedLanes=0;var o=s.timeoutHandle;if(o!==-1&&(s.timeoutHandle=-1,Gf(o)),Y!==null)for(o=Y.return;o!==null;){var a=o;switch(wg(a),a.tag){case 1:a=a.type.childContextTypes,a!=null&&$f();break;case 3:zh(),E(Wf),E(H),Eh();break;case 5:Bh(a);break;case 4:zh();break;case 13:E(L$1);break;case 19:E(L$1);break;case 10:ah(a.type._context);break;case 22:case 23:Hj()}o=o.return}if(Q=s,Y=s=Pg(s.current,null),Z=fj=e,T=0,pk=null,rk=qk=rh=0,tk=sk=null,fh!==null){for(e=0;e<fh.length;e++)if(o=fh[e],a=o.interleaved,a!==null){o.interleaved=null;var d=a.next,c=o.pending;if(c!==null){var j=c.next;c.next=d,a.next=j}o.pending=a}fh=null}return s}function Mk(s,e){do{var o=Y;try{if($g(),Fh.current=Rh,Ih){for(var a=M$1.memoizedState;a!==null;){var d=a.queue;d!==null&&(d.pending=null),a=a.next}Ih=!1}if(Hh=0,O$1=N$1=M$1=null,Jh=!1,Kh=0,nk.current=null,o===null||o.return===null){T=1,pk=e,Y=null;break}e:{var c=s,j=o.return,_e=o,pt=e;if(e=Z,_e.flags|=32768,pt!==null&&typeof pt=="object"&&typeof pt.then=="function"){var yt=pt,ct=_e,Ct=ct.tag;if(!(ct.mode&1)&&(Ct===0||Ct===11||Ct===15)){var qt=ct.alternate;qt?(ct.updateQueue=qt.updateQueue,ct.memoizedState=qt.memoizedState,ct.lanes=qt.lanes):(ct.updateQueue=null,ct.memoizedState=null)}var Ot=Ui(j);if(Ot!==null){Ot.flags&=-257,Vi(Ot,j,_e,c,e),Ot.mode&1&&Si(c,yt,e),e=Ot,pt=yt;var Lt=e.updateQueue;if(Lt===null){var Qt=new Set;Qt.add(pt),e.updateQueue=Qt}else Lt.add(pt);break e}else{if(!(e&1)){Si(c,yt,e),tj();break e}pt=Error(p(426))}}else if(I&&_e.mode&1){var ir=Ui(j);if(ir!==null){!(ir.flags&65536)&&(ir.flags|=256),Vi(ir,j,_e,c,e),Jg(Ji(pt,_e));break e}}c=pt=Ji(pt,_e),T!==4&&(T=2),sk===null?sk=[c]:sk.push(c),c=j;do{switch(c.tag){case 3:c.flags|=65536,e&=-e,c.lanes|=e;var er=Ni(c,pt,e);ph(c,er);break e;case 1:_e=pt;var tr=c.type,sr=c.stateNode;if(!(c.flags&128)&&(typeof tr.getDerivedStateFromError=="function"||sr!==null&&typeof sr.componentDidCatch=="function"&&(Ri===null||!Ri.has(sr)))){c.flags|=65536,e&=-e,c.lanes|=e;var ar=Qi(c,_e,e);ph(c,ar);break e}}c=c.return}while(c!==null)}Sk(o)}catch(hr){e=hr,Y===o&&o!==null&&(Y=o=o.return);continue}break}while(!0)}function Jk(){var s=mk.current;return mk.current=Rh,s===null?Rh:s}function tj(){(T===0||T===3||T===2)&&(T=4),Q===null||!(rh&268435455)&&!(qk&268435455)||Ck(Q,Z)}function Ik(s,e){var o=K;K|=2;var a=Jk();(Q!==s||Z!==e)&&(uk=null,Kk(s,e));do try{Tk();break}catch(d){Mk(s,d)}while(!0);if($g(),K=o,mk.current=a,Y!==null)throw Error(p(261));return Q=null,Z=0,T}function Tk(){for(;Y!==null;)Uk(Y)}function Lk(){for(;Y!==null&&!cc();)Uk(Y)}function Uk(s){var e=Vk(s.alternate,s,fj);s.memoizedProps=s.pendingProps,e===null?Sk(s):Y=e,nk.current=null}function Sk(s){var e=s;do{var o=e.alternate;if(s=e.return,e.flags&32768){if(o=Ij(o,e),o!==null){o.flags&=32767,Y=o;return}if(s!==null)s.flags|=32768,s.subtreeFlags=0,s.deletions=null;else{T=6,Y=null;return}}else if(o=Ej(o,e,fj),o!==null){Y=o;return}if(e=e.sibling,e!==null){Y=e;return}Y=e=s}while(e!==null);T===0&&(T=5)}function Pk(s,e,o){var a=C$1,d=ok.transition;try{ok.transition=null,C$1=1,Wk(s,e,o,a)}finally{ok.transition=d,C$1=a}return null}function Wk(s,e,o,a){do Hk();while(wk!==null);if(K&6)throw Error(p(327));o=s.finishedWork;var d=s.finishedLanes;if(o===null)return null;if(s.finishedWork=null,s.finishedLanes=0,o===s.current)throw Error(p(177));s.callbackNode=null,s.callbackPriority=0;var c=o.lanes|o.childLanes;if(Bc(s,c),s===Q&&(Y=Q=null,Z=0),!(o.subtreeFlags&2064)&&!(o.flags&2064)||vk||(vk=!0,Fk(hc,function(){return Hk(),null})),c=(o.flags&15990)!==0,o.subtreeFlags&15990||c){c=ok.transition,ok.transition=null;var j=C$1;C$1=1;var _e=K;K|=4,nk.current=null,Oj(s,o),dk(o,s),Oe(Df),dd=!!Cf,Df=Cf=null,s.current=o,hk(o),dc(),K=_e,C$1=j,ok.transition=c}else s.current=o;if(vk&&(vk=!1,wk=s,xk=d),c=s.pendingLanes,c===0&&(Ri=null),mc(o.stateNode),Dk(s,B$1()),e!==null)for(a=s.onRecoverableError,o=0;o<e.length;o++)d=e[o],a(d.value,{componentStack:d.stack,digest:d.digest});if(Oi)throw Oi=!1,s=Pi,Pi=null,s;return xk&1&&s.tag!==0&&Hk(),c=s.pendingLanes,c&1?s===zk?yk++:(yk=0,zk=s):yk=0,jg(),null}function Hk(){if(wk!==null){var s=Dc(xk),e=ok.transition,o=C$1;try{if(ok.transition=null,C$1=16>s?16:s,wk===null)var a=!1;else{if(s=wk,wk=null,xk=0,K&6)throw Error(p(331));var d=K;for(K|=4,V=s.current;V!==null;){var c=V,j=c.child;if(V.flags&16){var _e=c.deletions;if(_e!==null){for(var pt=0;pt<_e.length;pt++){var yt=_e[pt];for(V=yt;V!==null;){var ct=V;switch(ct.tag){case 0:case 11:case 15:Pj(8,ct,c)}var Ct=ct.child;if(Ct!==null)Ct.return=ct,V=Ct;else for(;V!==null;){ct=V;var qt=ct.sibling,Ot=ct.return;if(Sj(ct),ct===yt){V=null;break}if(qt!==null){qt.return=Ot,V=qt;break}V=Ot}}}var Lt=c.alternate;if(Lt!==null){var Qt=Lt.child;if(Qt!==null){Lt.child=null;do{var ir=Qt.sibling;Qt.sibling=null,Qt=ir}while(Qt!==null)}}V=c}}if(c.subtreeFlags&2064&&j!==null)j.return=c,V=j;else e:for(;V!==null;){if(c=V,c.flags&2048)switch(c.tag){case 0:case 11:case 15:Pj(9,c,c.return)}var er=c.sibling;if(er!==null){er.return=c.return,V=er;break e}V=c.return}}var tr=s.current;for(V=tr;V!==null;){j=V;var sr=j.child;if(j.subtreeFlags&2064&&sr!==null)sr.return=j,V=sr;else e:for(j=tr;V!==null;){if(_e=V,_e.flags&2048)try{switch(_e.tag){case 0:case 11:case 15:Qj(9,_e)}}catch(hr){W(_e,_e.return,hr)}if(_e===j){V=null;break e}var ar=_e.sibling;if(ar!==null){ar.return=_e.return,V=ar;break e}V=_e.return}}if(K=d,jg(),lc&&typeof lc.onPostCommitFiberRoot=="function")try{lc.onPostCommitFiberRoot(kc,s)}catch{}a=!0}return a}finally{C$1=o,ok.transition=e}}return!1}function Xk(s,e,o){e=Ji(o,e),e=Ni(s,e,1),s=nh(s,e,1),e=R(),s!==null&&(Ac(s,1,e),Dk(s,e))}function W(s,e,o){if(s.tag===3)Xk(s,s,o);else for(;e!==null;){if(e.tag===3){Xk(e,s,o);break}else if(e.tag===1){var a=e.stateNode;if(typeof e.type.getDerivedStateFromError=="function"||typeof a.componentDidCatch=="function"&&(Ri===null||!Ri.has(a))){s=Ji(o,s),s=Qi(e,s,1),e=nh(e,s,1),s=R(),e!==null&&(Ac(e,1,s),Dk(e,s));break}}e=e.return}}function Ti(s,e,o){var a=s.pingCache;a!==null&&a.delete(e),e=R(),s.pingedLanes|=s.suspendedLanes&o,Q===s&&(Z&o)===o&&(T===4||T===3&&(Z&130023424)===Z&&500>B$1()-fk?Kk(s,0):rk|=o),Dk(s,e)}function Yk(s,e){e===0&&(s.mode&1?(e=sc,sc<<=1,!(sc&130023424)&&(sc=4194304)):e=1);var o=R();s=ih(s,e),s!==null&&(Ac(s,e,o),Dk(s,o))}function uj(s){var e=s.memoizedState,o=0;e!==null&&(o=e.retryLane),Yk(s,o)}function bk(s,e){var o=0;switch(s.tag){case 13:var a=s.stateNode,d=s.memoizedState;d!==null&&(o=d.retryLane);break;case 19:a=s.stateNode;break;default:throw Error(p(314))}a!==null&&a.delete(e),Yk(s,o)}var Vk;Vk=function(s,e,o){if(s!==null)if(s.memoizedProps!==e.pendingProps||Wf.current)dh$1=!0;else{if(!(s.lanes&o)&&!(e.flags&128))return dh$1=!1,yj(s,e,o);dh$1=!!(s.flags&131072)}else dh$1=!1,I&&e.flags&1048576&&ug(e,ng,e.index);switch(e.lanes=0,e.tag){case 2:var a=e.type;ij(s,e),s=e.pendingProps;var d=Yf(e,H.current);ch(e,o),d=Nh(null,e,a,s,d,o);var c=Sh();return e.flags|=1,typeof d=="object"&&d!==null&&typeof d.render=="function"&&d.$$typeof===void 0?(e.tag=1,e.memoizedState=null,e.updateQueue=null,Zf(a)?(c=!0,cg(e)):c=!1,e.memoizedState=d.state!==null&&d.state!==void 0?d.state:null,kh(e),d.updater=Ei,e.stateNode=d,d._reactInternals=e,Ii(e,a,s,o),e=jj(null,e,a,!0,c,o)):(e.tag=0,I&&c&&vg(e),Xi(null,e,d,o),e=e.child),e;case 16:a=e.elementType;e:{switch(ij(s,e),s=e.pendingProps,d=a._init,a=d(a._payload),e.type=a,d=e.tag=Zk(a),s=Ci(a,s),d){case 0:e=cj(null,e,a,s,o);break e;case 1:e=hj(null,e,a,s,o);break e;case 11:e=Yi(null,e,a,s,o);break e;case 14:e=$i(null,e,a,Ci(a.type,s),o);break e}throw Error(p(306,a,""))}return e;case 0:return a=e.type,d=e.pendingProps,d=e.elementType===a?d:Ci(a,d),cj(s,e,a,d,o);case 1:return a=e.type,d=e.pendingProps,d=e.elementType===a?d:Ci(a,d),hj(s,e,a,d,o);case 3:e:{if(kj(e),s===null)throw Error(p(387));a=e.pendingProps,c=e.memoizedState,d=c.element,lh(s,e),qh(e,a,null,o);var j=e.memoizedState;if(a=j.element,c.isDehydrated)if(c={element:a,isDehydrated:!1,cache:j.cache,pendingSuspenseBoundaries:j.pendingSuspenseBoundaries,transitions:j.transitions},e.updateQueue.baseState=c,e.memoizedState=c,e.flags&256){d=Ji(Error(p(423)),e),e=lj(s,e,a,o,d);break e}else if(a!==d){d=Ji(Error(p(424)),e),e=lj(s,e,a,o,d);break e}else for(yg=Lf(e.stateNode.containerInfo.firstChild),xg=e,I=!0,zg=null,o=Vg(e,null,a,o),e.child=o;o;)o.flags=o.flags&-3|4096,o=o.sibling;else{if(Ig(),a===d){e=Zi(s,e,o);break e}Xi(s,e,a,o)}e=e.child}return e;case 5:return Ah(e),s===null&&Eg(e),a=e.type,d=e.pendingProps,c=s!==null?s.memoizedProps:null,j=d.children,Ef(a,d)?j=null:c!==null&&Ef(a,c)&&(e.flags|=32),gj(s,e),Xi(s,e,j,o),e.child;case 6:return s===null&&Eg(e),null;case 13:return oj(s,e,o);case 4:return yh(e,e.stateNode.containerInfo),a=e.pendingProps,s===null?e.child=Ug(e,null,a,o):Xi(s,e,a,o),e.child;case 11:return a=e.type,d=e.pendingProps,d=e.elementType===a?d:Ci(a,d),Yi(s,e,a,d,o);case 7:return Xi(s,e,e.pendingProps,o),e.child;case 8:return Xi(s,e,e.pendingProps.children,o),e.child;case 12:return Xi(s,e,e.pendingProps.children,o),e.child;case 10:e:{if(a=e.type._context,d=e.pendingProps,c=e.memoizedProps,j=d.value,G(Wg,a._currentValue),a._currentValue=j,c!==null)if(He(c.value,j)){if(c.children===d.children&&!Wf.current){e=Zi(s,e,o);break e}}else for(c=e.child,c!==null&&(c.return=e);c!==null;){var _e=c.dependencies;if(_e!==null){j=c.child;for(var pt=_e.firstContext;pt!==null;){if(pt.context===a){if(c.tag===1){pt=mh(-1,o&-o),pt.tag=2;var yt=c.updateQueue;if(yt!==null){yt=yt.shared;var ct=yt.pending;ct===null?pt.next=pt:(pt.next=ct.next,ct.next=pt),yt.pending=pt}}c.lanes|=o,pt=c.alternate,pt!==null&&(pt.lanes|=o),bh(c.return,o,e),_e.lanes|=o;break}pt=pt.next}}else if(c.tag===10)j=c.type===e.type?null:c.child;else if(c.tag===18){if(j=c.return,j===null)throw Error(p(341));j.lanes|=o,_e=j.alternate,_e!==null&&(_e.lanes|=o),bh(j,o,e),j=c.sibling}else j=c.child;if(j!==null)j.return=c;else for(j=c;j!==null;){if(j===e){j=null;break}if(c=j.sibling,c!==null){c.return=j.return,j=c;break}j=j.return}c=j}Xi(s,e,d.children,o),e=e.child}return e;case 9:return d=e.type,a=e.pendingProps.children,ch(e,o),d=eh(d),a=a(d),e.flags|=1,Xi(s,e,a,o),e.child;case 14:return a=e.type,d=Ci(a,e.pendingProps),d=Ci(a.type,d),$i(s,e,a,d,o);case 15:return bj(s,e,e.type,e.pendingProps,o);case 17:return a=e.type,d=e.pendingProps,d=e.elementType===a?d:Ci(a,d),ij(s,e),e.tag=1,Zf(a)?(s=!0,cg(e)):s=!1,ch(e,o),Gi(e,a,d),Ii(e,a,d,o),jj(null,e,a,!0,s,o);case 19:return xj(s,e,o);case 22:return dj(s,e,o)}throw Error(p(156,e.tag))};function Fk(s,e){return ac(s,e)}function $k(s,e,o,a){this.tag=s,this.key=o,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.ref=null,this.pendingProps=e,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=a,this.subtreeFlags=this.flags=0,this.deletions=null,this.childLanes=this.lanes=0,this.alternate=null}function Bg(s,e,o,a){return new $k(s,e,o,a)}function aj(s){return s=s.prototype,!(!s||!s.isReactComponent)}function Zk(s){if(typeof s=="function")return aj(s)?1:0;if(s!=null){if(s=s.$$typeof,s===Da)return 11;if(s===Ga)return 14}return 2}function Pg(s,e){var o=s.alternate;return o===null?(o=Bg(s.tag,e,s.key,s.mode),o.elementType=s.elementType,o.type=s.type,o.stateNode=s.stateNode,o.alternate=s,s.alternate=o):(o.pendingProps=e,o.type=s.type,o.flags=0,o.subtreeFlags=0,o.deletions=null),o.flags=s.flags&14680064,o.childLanes=s.childLanes,o.lanes=s.lanes,o.child=s.child,o.memoizedProps=s.memoizedProps,o.memoizedState=s.memoizedState,o.updateQueue=s.updateQueue,e=s.dependencies,o.dependencies=e===null?null:{lanes:e.lanes,firstContext:e.firstContext},o.sibling=s.sibling,o.index=s.index,o.ref=s.ref,o}function Rg(s,e,o,a,d,c){var j=2;if(a=s,typeof s=="function")aj(s)&&(j=1);else if(typeof s=="string")j=5;else e:switch(s){case ya:return Tg(o.children,d,c,e);case za:j=8,d|=8;break;case Aa:return s=Bg(12,o,e,d|2),s.elementType=Aa,s.lanes=c,s;case Ea:return s=Bg(13,o,e,d),s.elementType=Ea,s.lanes=c,s;case Fa:return s=Bg(19,o,e,d),s.elementType=Fa,s.lanes=c,s;case Ia:return pj(o,d,c,e);default:if(typeof s=="object"&&s!==null)switch(s.$$typeof){case Ba:j=10;break e;case Ca:j=9;break e;case Da:j=11;break e;case Ga:j=14;break e;case Ha:j=16,a=null;break e}throw Error(p(130,s==null?s:typeof s,""))}return e=Bg(j,o,e,d),e.elementType=s,e.type=a,e.lanes=c,e}function Tg(s,e,o,a){return s=Bg(7,s,a,e),s.lanes=o,s}function pj(s,e,o,a){return s=Bg(22,s,a,e),s.elementType=Ia,s.lanes=o,s.stateNode={isHidden:!1},s}function Qg(s,e,o){return s=Bg(6,s,null,e),s.lanes=o,s}function Sg(s,e,o){return e=Bg(4,s.children!==null?s.children:[],s.key,e),e.lanes=o,e.stateNode={containerInfo:s.containerInfo,pendingChildren:null,implementation:s.implementation},e}function al(s,e,o,a,d){this.tag=e,this.containerInfo=s,this.finishedWork=this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=-1,this.callbackNode=this.pendingContext=this.context=null,this.callbackPriority=0,this.eventTimes=zc(0),this.expirationTimes=zc(-1),this.entangledLanes=this.finishedLanes=this.mutableReadLanes=this.expiredLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=zc(0),this.identifierPrefix=a,this.onRecoverableError=d,this.mutableSourceEagerHydrationData=null}function bl(s,e,o,a,d,c,j,_e,pt){return s=new al(s,e,o,_e,pt),e===1?(e=1,c===!0&&(e|=8)):e=0,c=Bg(3,null,null,e),s.current=c,c.stateNode=s,c.memoizedState={element:a,isDehydrated:o,cache:null,transitions:null,pendingSuspenseBoundaries:null},kh(c),s}function cl(s,e,o){var a=3<arguments.length&&arguments[3]!==void 0?arguments[3]:null;return{$$typeof:wa,key:a==null?null:""+a,children:s,containerInfo:e,implementation:o}}function dl(s){if(!s)return Vf;s=s._reactInternals;e:{if(Vb(s)!==s||s.tag!==1)throw Error(p(170));var e=s;do{switch(e.tag){case 3:e=e.stateNode.context;break e;case 1:if(Zf(e.type)){e=e.stateNode.__reactInternalMemoizedMergedChildContext;break e}}e=e.return}while(e!==null);throw Error(p(171))}if(s.tag===1){var o=s.type;if(Zf(o))return bg(s,o,e)}return e}function el(s,e,o,a,d,c,j,_e,pt){return s=bl(o,a,!0,s,d,c,j,_e,pt),s.context=dl(null),o=s.current,a=R(),d=yi(o),c=mh(a,d),c.callback=e??null,nh(o,c,d),s.current.lanes=d,Ac(s,d,a),Dk(s,a),s}function fl(s,e,o,a){var d=e.current,c=R(),j=yi(d);return o=dl(o),e.context===null?e.context=o:e.pendingContext=o,e=mh(c,j),e.payload={element:s},a=a===void 0?null:a,a!==null&&(e.callback=a),s=nh(d,e,j),s!==null&&(gi(s,d,j,c),oh(s,d,j)),j}function gl(s){if(s=s.current,!s.child)return null;switch(s.child.tag){case 5:return s.child.stateNode;default:return s.child.stateNode}}function hl(s,e){if(s=s.memoizedState,s!==null&&s.dehydrated!==null){var o=s.retryLane;s.retryLane=o!==0&&o<e?o:e}}function il(s,e){hl(s,e),(s=s.alternate)&&hl(s,e)}function jl(){return null}var kl=typeof reportError=="function"?reportError:function(s){console.error(s)};function ll(s){this._internalRoot=s}ml.prototype.render=ll.prototype.render=function(s){var e=this._internalRoot;if(e===null)throw Error(p(409));fl(s,e,null,null)};ml.prototype.unmount=ll.prototype.unmount=function(){var s=this._internalRoot;if(s!==null){this._internalRoot=null;var e=s.containerInfo;Rk(function(){fl(null,s,null,null)}),e[uf]=null}};function ml(s){this._internalRoot=s}ml.prototype.unstable_scheduleHydration=function(s){if(s){var e=Hc();s={blockedOn:null,target:s,priority:e};for(var o=0;o<Qc.length&&e!==0&&e<Qc[o].priority;o++);Qc.splice(o,0,s),o===0&&Vc(s)}};function nl(s){return!(!s||s.nodeType!==1&&s.nodeType!==9&&s.nodeType!==11)}function ol(s){return!(!s||s.nodeType!==1&&s.nodeType!==9&&s.nodeType!==11&&(s.nodeType!==8||s.nodeValue!==" react-mount-point-unstable "))}function pl(){}function ql(s,e,o,a,d){if(d){if(typeof a=="function"){var c=a;a=function(){var yt=gl(j);c.call(yt)}}var j=el(e,a,s,0,null,!1,!1,"",pl);return s._reactRootContainer=j,s[uf]=j.current,sf(s.nodeType===8?s.parentNode:s),Rk(),j}for(;d=s.lastChild;)s.removeChild(d);if(typeof a=="function"){var _e=a;a=function(){var yt=gl(pt);_e.call(yt)}}var pt=bl(s,0,!1,null,null,!1,!1,"",pl);return s._reactRootContainer=pt,s[uf]=pt.current,sf(s.nodeType===8?s.parentNode:s),Rk(function(){fl(e,pt,o,a)}),pt}function rl(s,e,o,a,d){var c=o._reactRootContainer;if(c){var j=c;if(typeof d=="function"){var _e=d;d=function(){var pt=gl(j);_e.call(pt)}}fl(e,j,s,d)}else j=ql(o,e,s,d,a);return gl(j)}Ec=function(s){switch(s.tag){case 3:var e=s.stateNode;if(e.current.memoizedState.isDehydrated){var o=tc(e.pendingLanes);o!==0&&(Cc(e,o|1),Dk(e,B$1()),!(K&6)&&(Gj=B$1()+500,jg()))}break;case 13:Rk(function(){var a=ih(s,1);if(a!==null){var d=R();gi(a,s,1,d)}}),il(s,1)}};Fc=function(s){if(s.tag===13){var e=ih(s,134217728);if(e!==null){var o=R();gi(e,s,134217728,o)}il(s,134217728)}};Gc=function(s){if(s.tag===13){var e=yi(s),o=ih(s,e);if(o!==null){var a=R();gi(o,s,e,a)}il(s,e)}};Hc=function(){return C$1};Ic=function(s,e){var o=C$1;try{return C$1=s,e()}finally{C$1=o}};yb=function(s,e,o){switch(e){case"input":if(bb(s,o),e=o.name,o.type==="radio"&&e!=null){for(o=s;o.parentNode;)o=o.parentNode;for(o=o.querySelectorAll("input[name="+JSON.stringify(""+e)+'][type="radio"]'),e=0;e<o.length;e++){var a=o[e];if(a!==s&&a.form===s.form){var d=Db(a);if(!d)throw Error(p(90));Wa(a),bb(a,d)}}}break;case"textarea":ib(s,o);break;case"select":e=o.value,e!=null&&fb(s,!!o.multiple,e,!1)}};Gb=Qk;Hb=Rk;var sl={usingClientEntryPoint:!1,Events:[Cb,ue,Db,Eb,Fb,Qk]},tl={findFiberByHostInstance:Wc,bundleType:0,version:"18.3.1",rendererPackageName:"react-dom"},ul={bundleType:tl.bundleType,version:tl.version,rendererPackageName:tl.rendererPackageName,rendererConfig:tl.rendererConfig,overrideHookState:null,overrideHookStateDeletePath:null,overrideHookStateRenamePath:null,overrideProps:null,overridePropsDeletePath:null,overridePropsRenamePath:null,setErrorHandler:null,setSuspenseHandler:null,scheduleUpdate:null,currentDispatcherRef:ua.ReactCurrentDispatcher,findHostInstanceByFiber:function(s){return s=Zb(s),s===null?null:s.stateNode},findFiberByHostInstance:tl.findFiberByHostInstance||jl,findHostInstancesForRefresh:null,scheduleRefresh:null,scheduleRoot:null,setRefreshHandler:null,getCurrentFiber:null,reconcilerVersion:"18.3.1-next-f1338f8080-20240426"};if(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__<"u"){var vl=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(!vl.isDisabled&&vl.supportsFiber)try{kc=vl.inject(ul),lc=vl}catch{}}reactDom_production_min.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=sl;reactDom_production_min.createPortal=function(s,e){var o=2<arguments.length&&arguments[2]!==void 0?arguments[2]:null;if(!nl(e))throw Error(p(200));return cl(s,e,null,o)};reactDom_production_min.createRoot=function(s,e){if(!nl(s))throw Error(p(299));var o=!1,a="",d=kl;return e!=null&&(e.unstable_strictMode===!0&&(o=!0),e.identifierPrefix!==void 0&&(a=e.identifierPrefix),e.onRecoverableError!==void 0&&(d=e.onRecoverableError)),e=bl(s,1,!1,null,null,o,!1,a,d),s[uf]=e.current,sf(s.nodeType===8?s.parentNode:s),new ll(e)};reactDom_production_min.findDOMNode=function(s){if(s==null)return null;if(s.nodeType===1)return s;var e=s._reactInternals;if(e===void 0)throw typeof s.render=="function"?Error(p(188)):(s=Object.keys(s).join(","),Error(p(268,s)));return s=Zb(e),s=s===null?null:s.stateNode,s};reactDom_production_min.flushSync=function(s){return Rk(s)};reactDom_production_min.hydrate=function(s,e,o){if(!ol(e))throw Error(p(200));return rl(null,s,e,!0,o)};reactDom_production_min.hydrateRoot=function(s,e,o){if(!nl(s))throw Error(p(405));var a=o!=null&&o.hydratedSources||null,d=!1,c="",j=kl;if(o!=null&&(o.unstable_strictMode===!0&&(d=!0),o.identifierPrefix!==void 0&&(c=o.identifierPrefix),o.onRecoverableError!==void 0&&(j=o.onRecoverableError)),e=el(e,null,s,1,o??null,d,!1,c,j),s[uf]=e.current,sf(s),a)for(s=0;s<a.length;s++)o=a[s],d=o._getVersion,d=d(o._source),e.mutableSourceEagerHydrationData==null?e.mutableSourceEagerHydrationData=[o,d]:e.mutableSourceEagerHydrationData.push(o,d);return new ml(e)};reactDom_production_min.render=function(s,e,o){if(!ol(e))throw Error(p(200));return rl(null,s,e,!1,o)};reactDom_production_min.unmountComponentAtNode=function(s){if(!ol(s))throw Error(p(40));return s._reactRootContainer?(Rk(function(){rl(null,null,s,!1,function(){s._reactRootContainer=null,s[uf]=null})}),!0):!1};reactDom_production_min.unstable_batchedUpdates=Qk;reactDom_production_min.unstable_renderSubtreeIntoContainer=function(s,e,o,a){if(!ol(o))throw Error(p(200));if(s==null||s._reactInternals===void 0)throw Error(p(38));return rl(s,e,o,!1,a)};reactDom_production_min.version="18.3.1-next-f1338f8080-20240426";function checkDCE(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(checkDCE)}catch(s){console.error(s)}}checkDCE(),reactDom.exports=reactDom_production_min;var reactDomExports=reactDom.exports,m=reactDomExports;client.createRoot=m.createRoot,client.hydrateRoot=m.hydrateRoot;/**
 * @remix-run/router v1.23.0
 *
 * Copyright (c) Remix Software Inc.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE.md file in the root directory of this source tree.
 *
 * @license MIT
 */function _extends$1(){return _extends$1=Object.assign?Object.assign.bind():function(s){for(var e=1;e<arguments.length;e++){var o=arguments[e];for(var a in o)Object.prototype.hasOwnProperty.call(o,a)&&(s[a]=o[a])}return s},_extends$1.apply(this,arguments)}var Action;(function(s){s.Pop="POP",s.Push="PUSH",s.Replace="REPLACE"})(Action||(Action={}));const PopStateEventType="popstate";function createBrowserHistory(s){s===void 0&&(s={});function e(a,d){let{pathname:c,search:j,hash:_e}=a.location;return createLocation("",{pathname:c,search:j,hash:_e},d.state&&d.state.usr||null,d.state&&d.state.key||"default")}function o(a,d){return typeof d=="string"?d:createPath(d)}return getUrlBasedHistory(e,o,null,s)}function invariant(s,e){if(s===!1||s===null||typeof s>"u")throw new Error(e)}function warning(s,e){if(!s){typeof console<"u"&&console.warn(e);try{throw new Error(e)}catch{}}}function createKey(){return Math.random().toString(36).substr(2,8)}function getHistoryState(s,e){return{usr:s.state,key:s.key,idx:e}}function createLocation(s,e,o,a){return o===void 0&&(o=null),_extends$1({pathname:typeof s=="string"?s:s.pathname,search:"",hash:""},typeof e=="string"?parsePath(e):e,{state:o,key:e&&e.key||a||createKey()})}function createPath(s){let{pathname:e="/",search:o="",hash:a=""}=s;return o&&o!=="?"&&(e+=o.charAt(0)==="?"?o:"?"+o),a&&a!=="#"&&(e+=a.charAt(0)==="#"?a:"#"+a),e}function parsePath(s){let e={};if(s){let o=s.indexOf("#");o>=0&&(e.hash=s.substr(o),s=s.substr(0,o));let a=s.indexOf("?");a>=0&&(e.search=s.substr(a),s=s.substr(0,a)),s&&(e.pathname=s)}return e}function getUrlBasedHistory(s,e,o,a){a===void 0&&(a={});let{window:d=document.defaultView,v5Compat:c=!1}=a,j=d.history,_e=Action.Pop,pt=null,yt=ct();yt==null&&(yt=0,j.replaceState(_extends$1({},j.state,{idx:yt}),""));function ct(){return(j.state||{idx:null}).idx}function Ct(){_e=Action.Pop;let ir=ct(),er=ir==null?null:ir-yt;yt=ir,pt&&pt({action:_e,location:Qt.location,delta:er})}function qt(ir,er){_e=Action.Push;let tr=createLocation(Qt.location,ir,er);yt=ct()+1;let sr=getHistoryState(tr,yt),ar=Qt.createHref(tr);try{j.pushState(sr,"",ar)}catch(hr){if(hr instanceof DOMException&&hr.name==="DataCloneError")throw hr;d.location.assign(ar)}c&&pt&&pt({action:_e,location:Qt.location,delta:1})}function Ot(ir,er){_e=Action.Replace;let tr=createLocation(Qt.location,ir,er);yt=ct();let sr=getHistoryState(tr,yt),ar=Qt.createHref(tr);j.replaceState(sr,"",ar),c&&pt&&pt({action:_e,location:Qt.location,delta:0})}function Lt(ir){let er=d.location.origin!=="null"?d.location.origin:d.location.href,tr=typeof ir=="string"?ir:createPath(ir);return tr=tr.replace(/ $/,"%20"),invariant(er,"No window.location.(origin|href) available to create URL for href: "+tr),new URL(tr,er)}let Qt={get action(){return _e},get location(){return s(d,j)},listen(ir){if(pt)throw new Error("A history only accepts one active listener");return d.addEventListener(PopStateEventType,Ct),pt=ir,()=>{d.removeEventListener(PopStateEventType,Ct),pt=null}},createHref(ir){return e(d,ir)},createURL:Lt,encodeLocation(ir){let er=Lt(ir);return{pathname:er.pathname,search:er.search,hash:er.hash}},push:qt,replace:Ot,go(ir){return j.go(ir)}};return Qt}var ResultType;(function(s){s.data="data",s.deferred="deferred",s.redirect="redirect",s.error="error"})(ResultType||(ResultType={}));function matchRoutes(s,e,o){return o===void 0&&(o="/"),matchRoutesImpl(s,e,o)}function matchRoutesImpl(s,e,o,a){let d=typeof e=="string"?parsePath(e):e,c=stripBasename(d.pathname||"/",o);if(c==null)return null;let j=flattenRoutes(s);rankRouteBranches(j);let _e=null;for(let pt=0;_e==null&&pt<j.length;++pt){let yt=decodePath(c);_e=matchRouteBranch(j[pt],yt)}return _e}function flattenRoutes(s,e,o,a){e===void 0&&(e=[]),o===void 0&&(o=[]),a===void 0&&(a="");let d=(c,j,_e)=>{let pt={relativePath:_e===void 0?c.path||"":_e,caseSensitive:c.caseSensitive===!0,childrenIndex:j,route:c};pt.relativePath.startsWith("/")&&(invariant(pt.relativePath.startsWith(a),'Absolute route path "'+pt.relativePath+'" nested under path '+('"'+a+'" is not valid. An absolute child route path ')+"must start with the combined path of all its parent routes."),pt.relativePath=pt.relativePath.slice(a.length));let yt=joinPaths([a,pt.relativePath]),ct=o.concat(pt);c.children&&c.children.length>0&&(invariant(c.index!==!0,"Index routes must not have child routes. Please remove "+('all child routes from route path "'+yt+'".')),flattenRoutes(c.children,e,ct,yt)),!(c.path==null&&!c.index)&&e.push({path:yt,score:computeScore(yt,c.index),routesMeta:ct})};return s.forEach((c,j)=>{var _e;if(c.path===""||!((_e=c.path)!=null&&_e.includes("?")))d(c,j);else for(let pt of explodeOptionalSegments(c.path))d(c,j,pt)}),e}function explodeOptionalSegments(s){let e=s.split("/");if(e.length===0)return[];let[o,...a]=e,d=o.endsWith("?"),c=o.replace(/\?$/,"");if(a.length===0)return d?[c,""]:[c];let j=explodeOptionalSegments(a.join("/")),_e=[];return _e.push(...j.map(pt=>pt===""?c:[c,pt].join("/"))),d&&_e.push(...j),_e.map(pt=>s.startsWith("/")&&pt===""?"/":pt)}function rankRouteBranches(s){s.sort((e,o)=>e.score!==o.score?o.score-e.score:compareIndexes(e.routesMeta.map(a=>a.childrenIndex),o.routesMeta.map(a=>a.childrenIndex)))}const paramRe=/^:[\w-]+$/,dynamicSegmentValue=3,indexRouteValue=2,emptySegmentValue=1,staticSegmentValue=10,splatPenalty=-2,isSplat=s=>s==="*";function computeScore(s,e){let o=s.split("/"),a=o.length;return o.some(isSplat)&&(a+=splatPenalty),e&&(a+=indexRouteValue),o.filter(d=>!isSplat(d)).reduce((d,c)=>d+(paramRe.test(c)?dynamicSegmentValue:c===""?emptySegmentValue:staticSegmentValue),a)}function compareIndexes(s,e){return s.length===e.length&&s.slice(0,-1).every((a,d)=>a===e[d])?s[s.length-1]-e[e.length-1]:0}function matchRouteBranch(s,e,o){let{routesMeta:a}=s,d={},c="/",j=[];for(let _e=0;_e<a.length;++_e){let pt=a[_e],yt=_e===a.length-1,ct=c==="/"?e:e.slice(c.length)||"/",Ct=matchPath({path:pt.relativePath,caseSensitive:pt.caseSensitive,end:yt},ct),qt=pt.route;if(!Ct)return null;Object.assign(d,Ct.params),j.push({params:d,pathname:joinPaths([c,Ct.pathname]),pathnameBase:normalizePathname(joinPaths([c,Ct.pathnameBase])),route:qt}),Ct.pathnameBase!=="/"&&(c=joinPaths([c,Ct.pathnameBase]))}return j}function matchPath(s,e){typeof s=="string"&&(s={path:s,caseSensitive:!1,end:!0});let[o,a]=compilePath(s.path,s.caseSensitive,s.end),d=e.match(o);if(!d)return null;let c=d[0],j=c.replace(/(.)\/+$/,"$1"),_e=d.slice(1);return{params:a.reduce((yt,ct,Ct)=>{let{paramName:qt,isOptional:Ot}=ct;if(qt==="*"){let Qt=_e[Ct]||"";j=c.slice(0,c.length-Qt.length).replace(/(.)\/+$/,"$1")}const Lt=_e[Ct];return Ot&&!Lt?yt[qt]=void 0:yt[qt]=(Lt||"").replace(/%2F/g,"/"),yt},{}),pathname:c,pathnameBase:j,pattern:s}}function compilePath(s,e,o){e===void 0&&(e=!1),o===void 0&&(o=!0),warning(s==="*"||!s.endsWith("*")||s.endsWith("/*"),'Route path "'+s+'" will be treated as if it were '+('"'+s.replace(/\*$/,"/*")+'" because the `*` character must ')+"always follow a `/` in the pattern. To get rid of this warning, "+('please change the route path to "'+s.replace(/\*$/,"/*")+'".'));let a=[],d="^"+s.replace(/\/*\*?$/,"").replace(/^\/*/,"/").replace(/[\\.*+^${}|()[\]]/g,"\\$&").replace(/\/:([\w-]+)(\?)?/g,(j,_e,pt)=>(a.push({paramName:_e,isOptional:pt!=null}),pt?"/?([^\\/]+)?":"/([^\\/]+)"));return s.endsWith("*")?(a.push({paramName:"*"}),d+=s==="*"||s==="/*"?"(.*)$":"(?:\\/(.+)|\\/*)$"):o?d+="\\/*$":s!==""&&s!=="/"&&(d+="(?:(?=\\/|$))"),[new RegExp(d,e?void 0:"i"),a]}function decodePath(s){try{return s.split("/").map(e=>decodeURIComponent(e).replace(/\//g,"%2F")).join("/")}catch(e){return warning(!1,'The URL path "'+s+'" could not be decoded because it is is a malformed URL segment. This is probably due to a bad percent '+("encoding ("+e+").")),s}}function stripBasename(s,e){if(e==="/")return s;if(!s.toLowerCase().startsWith(e.toLowerCase()))return null;let o=e.endsWith("/")?e.length-1:e.length,a=s.charAt(o);return a&&a!=="/"?null:s.slice(o)||"/"}function resolvePath(s,e){e===void 0&&(e="/");let{pathname:o,search:a="",hash:d=""}=typeof s=="string"?parsePath(s):s;return{pathname:o?o.startsWith("/")?o:resolvePathname(o,e):e,search:normalizeSearch(a),hash:normalizeHash(d)}}function resolvePathname(s,e){let o=e.replace(/\/+$/,"").split("/");return s.split("/").forEach(d=>{d===".."?o.length>1&&o.pop():d!=="."&&o.push(d)}),o.length>1?o.join("/"):"/"}function getInvalidPathError(s,e,o,a){return"Cannot include a '"+s+"' character in a manually specified "+("`to."+e+"` field ["+JSON.stringify(a)+"].  Please separate it out to the ")+("`to."+o+"` field. Alternatively you may provide the full path as ")+'a string in <Link to="..."> and the router will parse it for you.'}function getPathContributingMatches(s){return s.filter((e,o)=>o===0||e.route.path&&e.route.path.length>0)}function getResolveToMatches(s,e){let o=getPathContributingMatches(s);return e?o.map((a,d)=>d===o.length-1?a.pathname:a.pathnameBase):o.map(a=>a.pathnameBase)}function resolveTo(s,e,o,a){a===void 0&&(a=!1);let d;typeof s=="string"?d=parsePath(s):(d=_extends$1({},s),invariant(!d.pathname||!d.pathname.includes("?"),getInvalidPathError("?","pathname","search",d)),invariant(!d.pathname||!d.pathname.includes("#"),getInvalidPathError("#","pathname","hash",d)),invariant(!d.search||!d.search.includes("#"),getInvalidPathError("#","search","hash",d)));let c=s===""||d.pathname==="",j=c?"/":d.pathname,_e;if(j==null)_e=o;else{let Ct=e.length-1;if(!a&&j.startsWith("..")){let qt=j.split("/");for(;qt[0]==="..";)qt.shift(),Ct-=1;d.pathname=qt.join("/")}_e=Ct>=0?e[Ct]:"/"}let pt=resolvePath(d,_e),yt=j&&j!=="/"&&j.endsWith("/"),ct=(c||j===".")&&o.endsWith("/");return!pt.pathname.endsWith("/")&&(yt||ct)&&(pt.pathname+="/"),pt}const joinPaths=s=>s.join("/").replace(/\/\/+/g,"/"),normalizePathname=s=>s.replace(/\/+$/,"").replace(/^\/*/,"/"),normalizeSearch=s=>!s||s==="?"?"":s.startsWith("?")?s:"?"+s,normalizeHash=s=>!s||s==="#"?"":s.startsWith("#")?s:"#"+s;function isRouteErrorResponse(s){return s!=null&&typeof s.status=="number"&&typeof s.statusText=="string"&&typeof s.internal=="boolean"&&"data"in s}const validMutationMethodsArr=["post","put","patch","delete"];new Set(validMutationMethodsArr);const validRequestMethodsArr=["get",...validMutationMethodsArr];new Set(validRequestMethodsArr);/**
 * React Router v6.30.0
 *
 * Copyright (c) Remix Software Inc.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE.md file in the root directory of this source tree.
 *
 * @license MIT
 */function _extends(){return _extends=Object.assign?Object.assign.bind():function(s){for(var e=1;e<arguments.length;e++){var o=arguments[e];for(var a in o)Object.prototype.hasOwnProperty.call(o,a)&&(s[a]=o[a])}return s},_extends.apply(this,arguments)}const DataRouterContext=reactExports.createContext(null),DataRouterStateContext=reactExports.createContext(null),NavigationContext=reactExports.createContext(null),LocationContext=reactExports.createContext(null),RouteContext=reactExports.createContext({outlet:null,matches:[],isDataRoute:!1}),RouteErrorContext=reactExports.createContext(null);function useInRouterContext(){return reactExports.useContext(LocationContext)!=null}function useLocation(){return useInRouterContext()||invariant(!1),reactExports.useContext(LocationContext).location}function useIsomorphicLayoutEffect(s){reactExports.useContext(NavigationContext).static||reactExports.useLayoutEffect(s)}function useNavigate(){let{isDataRoute:s}=reactExports.useContext(RouteContext);return s?useNavigateStable():useNavigateUnstable()}function useNavigateUnstable(){useInRouterContext()||invariant(!1);let s=reactExports.useContext(DataRouterContext),{basename:e,future:o,navigator:a}=reactExports.useContext(NavigationContext),{matches:d}=reactExports.useContext(RouteContext),{pathname:c}=useLocation(),j=JSON.stringify(getResolveToMatches(d,o.v7_relativeSplatPath)),_e=reactExports.useRef(!1);return useIsomorphicLayoutEffect(()=>{_e.current=!0}),reactExports.useCallback(function(yt,ct){if(ct===void 0&&(ct={}),!_e.current)return;if(typeof yt=="number"){a.go(yt);return}let Ct=resolveTo(yt,JSON.parse(j),c,ct.relative==="path");s==null&&e!=="/"&&(Ct.pathname=Ct.pathname==="/"?e:joinPaths([e,Ct.pathname])),(ct.replace?a.replace:a.push)(Ct,ct.state,ct)},[e,a,j,c,s])}function useRoutes(s,e){return useRoutesImpl(s,e)}function useRoutesImpl(s,e,o,a){useInRouterContext()||invariant(!1);let{navigator:d,static:c}=reactExports.useContext(NavigationContext),{matches:j}=reactExports.useContext(RouteContext),_e=j[j.length-1],pt=_e?_e.params:{};_e&&_e.pathname;let yt=_e?_e.pathnameBase:"/";_e&&_e.route;let ct=useLocation(),Ct;if(e){var qt;let er=typeof e=="string"?parsePath(e):e;yt==="/"||(qt=er.pathname)!=null&&qt.startsWith(yt)||invariant(!1),Ct=er}else Ct=ct;let Ot=Ct.pathname||"/",Lt=Ot;if(yt!=="/"){let er=yt.replace(/^\//,"").split("/");Lt="/"+Ot.replace(/^\//,"").split("/").slice(er.length).join("/")}let Qt=matchRoutes(s,{pathname:Lt}),ir=_renderMatches(Qt&&Qt.map(er=>Object.assign({},er,{params:Object.assign({},pt,er.params),pathname:joinPaths([yt,d.encodeLocation?d.encodeLocation(er.pathname).pathname:er.pathname]),pathnameBase:er.pathnameBase==="/"?yt:joinPaths([yt,d.encodeLocation?d.encodeLocation(er.pathnameBase).pathname:er.pathnameBase])})),j,o,a);return e&&ir?reactExports.createElement(LocationContext.Provider,{value:{location:_extends({pathname:"/",search:"",hash:"",state:null,key:"default"},Ct),navigationType:Action.Pop}},ir):ir}function DefaultErrorComponent(){let s=useRouteError(),e=isRouteErrorResponse(s)?s.status+" "+s.statusText:s instanceof Error?s.message:JSON.stringify(s),o=s instanceof Error?s.stack:null,d={padding:"0.5rem",backgroundColor:"rgba(200,200,200, 0.5)"};return reactExports.createElement(reactExports.Fragment,null,reactExports.createElement("h2",null,"Unexpected Application Error!"),reactExports.createElement("h3",{style:{fontStyle:"italic"}},e),o?reactExports.createElement("pre",{style:d},o):null,null)}const defaultErrorElement=reactExports.createElement(DefaultErrorComponent,null);class RenderErrorBoundary extends reactExports.Component{constructor(e){super(e),this.state={location:e.location,revalidation:e.revalidation,error:e.error}}static getDerivedStateFromError(e){return{error:e}}static getDerivedStateFromProps(e,o){return o.location!==e.location||o.revalidation!=="idle"&&e.revalidation==="idle"?{error:e.error,location:e.location,revalidation:e.revalidation}:{error:e.error!==void 0?e.error:o.error,location:o.location,revalidation:e.revalidation||o.revalidation}}componentDidCatch(e,o){console.error("React Router caught the following error during render",e,o)}render(){return this.state.error!==void 0?reactExports.createElement(RouteContext.Provider,{value:this.props.routeContext},reactExports.createElement(RouteErrorContext.Provider,{value:this.state.error,children:this.props.component})):this.props.children}}function RenderedRoute(s){let{routeContext:e,match:o,children:a}=s,d=reactExports.useContext(DataRouterContext);return d&&d.static&&d.staticContext&&(o.route.errorElement||o.route.ErrorBoundary)&&(d.staticContext._deepestRenderedBoundaryId=o.route.id),reactExports.createElement(RouteContext.Provider,{value:e},a)}function _renderMatches(s,e,o,a){var d;if(e===void 0&&(e=[]),o===void 0&&(o=null),a===void 0&&(a=null),s==null){var c;if(!o)return null;if(o.errors)s=o.matches;else if((c=a)!=null&&c.v7_partialHydration&&e.length===0&&!o.initialized&&o.matches.length>0)s=o.matches;else return null}let j=s,_e=(d=o)==null?void 0:d.errors;if(_e!=null){let ct=j.findIndex(Ct=>Ct.route.id&&(_e==null?void 0:_e[Ct.route.id])!==void 0);ct>=0||invariant(!1),j=j.slice(0,Math.min(j.length,ct+1))}let pt=!1,yt=-1;if(o&&a&&a.v7_partialHydration)for(let ct=0;ct<j.length;ct++){let Ct=j[ct];if((Ct.route.HydrateFallback||Ct.route.hydrateFallbackElement)&&(yt=ct),Ct.route.id){let{loaderData:qt,errors:Ot}=o,Lt=Ct.route.loader&&qt[Ct.route.id]===void 0&&(!Ot||Ot[Ct.route.id]===void 0);if(Ct.route.lazy||Lt){pt=!0,yt>=0?j=j.slice(0,yt+1):j=[j[0]];break}}}return j.reduceRight((ct,Ct,qt)=>{let Ot,Lt=!1,Qt=null,ir=null;o&&(Ot=_e&&Ct.route.id?_e[Ct.route.id]:void 0,Qt=Ct.route.errorElement||defaultErrorElement,pt&&(yt<0&&qt===0?(warningOnce("route-fallback"),Lt=!0,ir=null):yt===qt&&(Lt=!0,ir=Ct.route.hydrateFallbackElement||null)));let er=e.concat(j.slice(0,qt+1)),tr=()=>{let sr;return Ot?sr=Qt:Lt?sr=ir:Ct.route.Component?sr=reactExports.createElement(Ct.route.Component,null):Ct.route.element?sr=Ct.route.element:sr=ct,reactExports.createElement(RenderedRoute,{match:Ct,routeContext:{outlet:ct,matches:er,isDataRoute:o!=null},children:sr})};return o&&(Ct.route.ErrorBoundary||Ct.route.errorElement||qt===0)?reactExports.createElement(RenderErrorBoundary,{location:o.location,revalidation:o.revalidation,component:Qt,error:Ot,children:tr(),routeContext:{outlet:null,matches:er,isDataRoute:!0}}):tr()},null)}var DataRouterHook$1=function(s){return s.UseBlocker="useBlocker",s.UseRevalidator="useRevalidator",s.UseNavigateStable="useNavigate",s}(DataRouterHook$1||{}),DataRouterStateHook$1=function(s){return s.UseBlocker="useBlocker",s.UseLoaderData="useLoaderData",s.UseActionData="useActionData",s.UseRouteError="useRouteError",s.UseNavigation="useNavigation",s.UseRouteLoaderData="useRouteLoaderData",s.UseMatches="useMatches",s.UseRevalidator="useRevalidator",s.UseNavigateStable="useNavigate",s.UseRouteId="useRouteId",s}(DataRouterStateHook$1||{});function useDataRouterContext(s){let e=reactExports.useContext(DataRouterContext);return e||invariant(!1),e}function useDataRouterState(s){let e=reactExports.useContext(DataRouterStateContext);return e||invariant(!1),e}function useRouteContext(s){let e=reactExports.useContext(RouteContext);return e||invariant(!1),e}function useCurrentRouteId(s){let e=useRouteContext(),o=e.matches[e.matches.length-1];return o.route.id||invariant(!1),o.route.id}function useRouteError(){var s;let e=reactExports.useContext(RouteErrorContext),o=useDataRouterState(),a=useCurrentRouteId();return e!==void 0?e:(s=o.errors)==null?void 0:s[a]}function useNavigateStable(){let{router:s}=useDataRouterContext(DataRouterHook$1.UseNavigateStable),e=useCurrentRouteId(DataRouterStateHook$1.UseNavigateStable),o=reactExports.useRef(!1);return useIsomorphicLayoutEffect(()=>{o.current=!0}),reactExports.useCallback(function(d,c){c===void 0&&(c={}),o.current&&(typeof d=="number"?s.navigate(d):s.navigate(d,_extends({fromRouteId:e},c)))},[s,e])}const alreadyWarned$1={};function warningOnce(s,e,o){alreadyWarned$1[s]||(alreadyWarned$1[s]=!0)}function logV6DeprecationWarnings(s,e){s==null||s.v7_startTransition,s==null||s.v7_relativeSplatPath}function Navigate(s){let{to:e,replace:o,state:a,relative:d}=s;useInRouterContext()||invariant(!1);let{future:c,static:j}=reactExports.useContext(NavigationContext),{matches:_e}=reactExports.useContext(RouteContext),{pathname:pt}=useLocation(),yt=useNavigate(),ct=resolveTo(e,getResolveToMatches(_e,c.v7_relativeSplatPath),pt,d==="path"),Ct=JSON.stringify(ct);return reactExports.useEffect(()=>yt(JSON.parse(Ct),{replace:o,state:a,relative:d}),[yt,Ct,d,o,a]),null}function Route(s){invariant(!1)}function Router(s){let{basename:e="/",children:o=null,location:a,navigationType:d=Action.Pop,navigator:c,static:j=!1,future:_e}=s;useInRouterContext()&&invariant(!1);let pt=e.replace(/^\/*/,"/"),yt=reactExports.useMemo(()=>({basename:pt,navigator:c,static:j,future:_extends({v7_relativeSplatPath:!1},_e)}),[pt,_e,c,j]);typeof a=="string"&&(a=parsePath(a));let{pathname:ct="/",search:Ct="",hash:qt="",state:Ot=null,key:Lt="default"}=a,Qt=reactExports.useMemo(()=>{let ir=stripBasename(ct,pt);return ir==null?null:{location:{pathname:ir,search:Ct,hash:qt,state:Ot,key:Lt},navigationType:d}},[pt,ct,Ct,qt,Ot,Lt,d]);return Qt==null?null:reactExports.createElement(NavigationContext.Provider,{value:yt},reactExports.createElement(LocationContext.Provider,{children:o,value:Qt}))}function Routes(s){let{children:e,location:o}=s;return useRoutes(createRoutesFromChildren(e),o)}new Promise(()=>{});function createRoutesFromChildren(s,e){e===void 0&&(e=[]);let o=[];return reactExports.Children.forEach(s,(a,d)=>{if(!reactExports.isValidElement(a))return;let c=[...e,d];if(a.type===reactExports.Fragment){o.push.apply(o,createRoutesFromChildren(a.props.children,c));return}a.type!==Route&&invariant(!1),!a.props.index||!a.props.children||invariant(!1);let j={id:a.props.id||c.join("-"),caseSensitive:a.props.caseSensitive,element:a.props.element,Component:a.props.Component,index:a.props.index,path:a.props.path,loader:a.props.loader,action:a.props.action,errorElement:a.props.errorElement,ErrorBoundary:a.props.ErrorBoundary,hasErrorBoundary:a.props.ErrorBoundary!=null||a.props.errorElement!=null,shouldRevalidate:a.props.shouldRevalidate,handle:a.props.handle,lazy:a.props.lazy};a.props.children&&(j.children=createRoutesFromChildren(a.props.children,c)),o.push(j)}),o}/**
 * React Router DOM v6.30.0
 *
 * Copyright (c) Remix Software Inc.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE.md file in the root directory of this source tree.
 *
 * @license MIT
 */const REACT_ROUTER_VERSION="6";try{window.__reactRouterVersion=REACT_ROUTER_VERSION}catch{}const START_TRANSITION="startTransition",startTransitionImpl=React[START_TRANSITION];function BrowserRouter(s){let{basename:e,children:o,future:a,window:d}=s,c=reactExports.useRef();c.current==null&&(c.current=createBrowserHistory({window:d,v5Compat:!0}));let j=c.current,[_e,pt]=reactExports.useState({action:j.action,location:j.location}),{v7_startTransition:yt}=a||{},ct=reactExports.useCallback(Ct=>{yt&&startTransitionImpl?startTransitionImpl(()=>pt(Ct)):pt(Ct)},[pt,yt]);return reactExports.useLayoutEffect(()=>j.listen(ct),[j,ct]),reactExports.useEffect(()=>logV6DeprecationWarnings(a),[a]),reactExports.createElement(Router,{basename:e,children:o,location:_e.location,navigationType:_e.action,navigator:j,future:a})}var DataRouterHook;(function(s){s.UseScrollRestoration="useScrollRestoration",s.UseSubmit="useSubmit",s.UseSubmitFetcher="useSubmitFetcher",s.UseFetcher="useFetcher",s.useViewTransitionState="useViewTransitionState"})(DataRouterHook||(DataRouterHook={}));var DataRouterStateHook;(function(s){s.UseFetcher="useFetcher",s.UseFetchers="useFetchers",s.UseScrollRestoration="useScrollRestoration"})(DataRouterStateHook||(DataRouterStateHook={}));function getDefaultExportFromCjs(s){return s&&s.__esModule&&Object.prototype.hasOwnProperty.call(s,"default")?s.default:s}var browser$d={exports:{}},process=browser$d.exports={},cachedSetTimeout,cachedClearTimeout;function defaultSetTimout(){throw new Error("setTimeout has not been defined")}function defaultClearTimeout(){throw new Error("clearTimeout has not been defined")}(function(){try{typeof setTimeout=="function"?cachedSetTimeout=setTimeout:cachedSetTimeout=defaultSetTimout}catch{cachedSetTimeout=defaultSetTimout}try{typeof clearTimeout=="function"?cachedClearTimeout=clearTimeout:cachedClearTimeout=defaultClearTimeout}catch{cachedClearTimeout=defaultClearTimeout}})();function runTimeout(s){if(cachedSetTimeout===setTimeout)return setTimeout(s,0);if((cachedSetTimeout===defaultSetTimout||!cachedSetTimeout)&&setTimeout)return cachedSetTimeout=setTimeout,setTimeout(s,0);try{return cachedSetTimeout(s,0)}catch{try{return cachedSetTimeout.call(null,s,0)}catch{return cachedSetTimeout.call(this,s,0)}}}function runClearTimeout(s){if(cachedClearTimeout===clearTimeout)return clearTimeout(s);if((cachedClearTimeout===defaultClearTimeout||!cachedClearTimeout)&&clearTimeout)return cachedClearTimeout=clearTimeout,clearTimeout(s);try{return cachedClearTimeout(s)}catch{try{return cachedClearTimeout.call(null,s)}catch{return cachedClearTimeout.call(this,s)}}}var queue=[],draining=!1,currentQueue,queueIndex=-1;function cleanUpNextTick(){!draining||!currentQueue||(draining=!1,currentQueue.length?queue=currentQueue.concat(queue):queueIndex=-1,queue.length&&drainQueue())}function drainQueue(){if(!draining){var s=runTimeout(cleanUpNextTick);draining=!0;for(var e=queue.length;e;){for(currentQueue=queue,queue=[];++queueIndex<e;)currentQueue&&currentQueue[queueIndex].run();queueIndex=-1,e=queue.length}currentQueue=null,draining=!1,runClearTimeout(s)}}process.nextTick=function(s){var e=new Array(arguments.length-1);if(arguments.length>1)for(var o=1;o<arguments.length;o++)e[o-1]=arguments[o];queue.push(new Item(s,e)),queue.length===1&&!draining&&runTimeout(drainQueue)};function Item(s,e){this.fun=s,this.array=e}Item.prototype.run=function(){this.fun.apply(null,this.array)};process.title="browser";process.browser=!0;process.env={};process.argv=[];process.version="";process.versions={};function noop$1(){}process.on=noop$1;process.addListener=noop$1;process.once=noop$1;process.off=noop$1;process.removeListener=noop$1;process.removeAllListeners=noop$1;process.emit=noop$1;process.prependListener=noop$1;process.prependOnceListener=noop$1;process.listeners=function(s){return[]};process.binding=function(s){throw new Error("process.binding is not supported")};process.cwd=function(){return"/"};process.chdir=function(s){throw new Error("process.chdir is not supported")};process.umask=function(){return 0};var browserExports=browser$d.exports;const process$1=getDefaultExportFromCjs(browserExports);var buffer$1={},base64Js={};base64Js.byteLength=byteLength;base64Js.toByteArray=toByteArray;base64Js.fromByteArray=fromByteArray;var lookup=[],revLookup=[],Arr=typeof Uint8Array<"u"?Uint8Array:Array,code="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/";for(var i=0,len=code.length;i<len;++i)lookup[i]=code[i],revLookup[code.charCodeAt(i)]=i;revLookup[45]=62;revLookup[95]=63;function getLens(s){var e=s.length;if(e%4>0)throw new Error("Invalid string. Length must be a multiple of 4");var o=s.indexOf("=");o===-1&&(o=e);var a=o===e?0:4-o%4;return[o,a]}function byteLength(s){var e=getLens(s),o=e[0],a=e[1];return(o+a)*3/4-a}function _byteLength(s,e,o){return(e+o)*3/4-o}function toByteArray(s){var e,o=getLens(s),a=o[0],d=o[1],c=new Arr(_byteLength(s,a,d)),j=0,_e=d>0?a-4:a,pt;for(pt=0;pt<_e;pt+=4)e=revLookup[s.charCodeAt(pt)]<<18|revLookup[s.charCodeAt(pt+1)]<<12|revLookup[s.charCodeAt(pt+2)]<<6|revLookup[s.charCodeAt(pt+3)],c[j++]=e>>16&255,c[j++]=e>>8&255,c[j++]=e&255;return d===2&&(e=revLookup[s.charCodeAt(pt)]<<2|revLookup[s.charCodeAt(pt+1)]>>4,c[j++]=e&255),d===1&&(e=revLookup[s.charCodeAt(pt)]<<10|revLookup[s.charCodeAt(pt+1)]<<4|revLookup[s.charCodeAt(pt+2)]>>2,c[j++]=e>>8&255,c[j++]=e&255),c}function tripletToBase64(s){return lookup[s>>18&63]+lookup[s>>12&63]+lookup[s>>6&63]+lookup[s&63]}function encodeChunk(s,e,o){for(var a,d=[],c=e;c<o;c+=3)a=(s[c]<<16&16711680)+(s[c+1]<<8&65280)+(s[c+2]&255),d.push(tripletToBase64(a));return d.join("")}function fromByteArray(s){for(var e,o=s.length,a=o%3,d=[],c=16383,j=0,_e=o-a;j<_e;j+=c)d.push(encodeChunk(s,j,j+c>_e?_e:j+c));return a===1?(e=s[o-1],d.push(lookup[e>>2]+lookup[e<<4&63]+"==")):a===2&&(e=(s[o-2]<<8)+s[o-1],d.push(lookup[e>>10]+lookup[e>>4&63]+lookup[e<<2&63]+"=")),d.join("")}var ieee754={};/*! ieee754. BSD-3-Clause License. Feross Aboukhadijeh <https://feross.org/opensource> */ieee754.read=function(s,e,o,a,d){var c,j,_e=d*8-a-1,pt=(1<<_e)-1,yt=pt>>1,ct=-7,Ct=o?d-1:0,qt=o?-1:1,Ot=s[e+Ct];for(Ct+=qt,c=Ot&(1<<-ct)-1,Ot>>=-ct,ct+=_e;ct>0;c=c*256+s[e+Ct],Ct+=qt,ct-=8);for(j=c&(1<<-ct)-1,c>>=-ct,ct+=a;ct>0;j=j*256+s[e+Ct],Ct+=qt,ct-=8);if(c===0)c=1-yt;else{if(c===pt)return j?NaN:(Ot?-1:1)*(1/0);j=j+Math.pow(2,a),c=c-yt}return(Ot?-1:1)*j*Math.pow(2,c-a)};ieee754.write=function(s,e,o,a,d,c){var j,_e,pt,yt=c*8-d-1,ct=(1<<yt)-1,Ct=ct>>1,qt=d===23?Math.pow(2,-24)-Math.pow(2,-77):0,Ot=a?0:c-1,Lt=a?1:-1,Qt=e<0||e===0&&1/e<0?1:0;for(e=Math.abs(e),isNaN(e)||e===1/0?(_e=isNaN(e)?1:0,j=ct):(j=Math.floor(Math.log(e)/Math.LN2),e*(pt=Math.pow(2,-j))<1&&(j--,pt*=2),j+Ct>=1?e+=qt/pt:e+=qt*Math.pow(2,1-Ct),e*pt>=2&&(j++,pt/=2),j+Ct>=ct?(_e=0,j=ct):j+Ct>=1?(_e=(e*pt-1)*Math.pow(2,d),j=j+Ct):(_e=e*Math.pow(2,Ct-1)*Math.pow(2,d),j=0));d>=8;s[o+Ot]=_e&255,Ot+=Lt,_e/=256,d-=8);for(j=j<<d|_e,yt+=d;yt>0;s[o+Ot]=j&255,Ot+=Lt,j/=256,yt-=8);s[o+Ot-Lt]|=Qt*128};/*!
 * The buffer module from node.js, for the browser.
 *
 * @author   Feross Aboukhadijeh <https://feross.org>
 * @license  MIT
 */(function(s){const e=base64Js,o=ieee754,a=typeof Symbol=="function"&&typeof Symbol.for=="function"?Symbol.for("nodejs.util.inspect.custom"):null;s.Buffer=ct,s.SlowBuffer=hr,s.INSPECT_MAX_BYTES=50;const d=2147483647;s.kMaxLength=d;const{Uint8Array:c,ArrayBuffer:j,SharedArrayBuffer:_e}=globalThis;ct.TYPED_ARRAY_SUPPORT=pt(),!ct.TYPED_ARRAY_SUPPORT&&typeof console<"u"&&typeof console.error=="function"&&console.error("This browser lacks typed array (Uint8Array) support which is required by `buffer` v5.x. Use `buffer` v4.x if you require old browser support.");function pt(){try{const xr=new c(1),fr={foo:function(){return 42}};return Object.setPrototypeOf(fr,c.prototype),Object.setPrototypeOf(xr,fr),xr.foo()===42}catch{return!1}}Object.defineProperty(ct.prototype,"parent",{enumerable:!0,get:function(){if(ct.isBuffer(this))return this.buffer}}),Object.defineProperty(ct.prototype,"offset",{enumerable:!0,get:function(){if(ct.isBuffer(this))return this.byteOffset}});function yt(xr){if(xr>d)throw new RangeError('The value "'+xr+'" is invalid for option "size"');const fr=new c(xr);return Object.setPrototypeOf(fr,ct.prototype),fr}function ct(xr,fr,yr){if(typeof xr=="number"){if(typeof fr=="string")throw new TypeError('The "string" argument must be of type string. Received type number');return Lt(xr)}return Ct(xr,fr,yr)}ct.poolSize=8192;function Ct(xr,fr,yr){if(typeof xr=="string")return Qt(xr,fr);if(j.isView(xr))return er(xr);if(xr==null)throw new TypeError("The first argument must be one of type string, Buffer, ArrayBuffer, Array, or Array-like Object. Received type "+typeof xr);if(Wr(xr,j)||xr&&Wr(xr.buffer,j)||typeof _e<"u"&&(Wr(xr,_e)||xr&&Wr(xr.buffer,_e)))return tr(xr,fr,yr);if(typeof xr=="number")throw new TypeError('The "value" argument must not be of type number. Received type number');const Mr=xr.valueOf&&xr.valueOf();if(Mr!=null&&Mr!==xr)return ct.from(Mr,fr,yr);const Pr=sr(xr);if(Pr)return Pr;if(typeof Symbol<"u"&&Symbol.toPrimitive!=null&&typeof xr[Symbol.toPrimitive]=="function")return ct.from(xr[Symbol.toPrimitive]("string"),fr,yr);throw new TypeError("The first argument must be one of type string, Buffer, ArrayBuffer, Array, or Array-like Object. Received type "+typeof xr)}ct.from=function(xr,fr,yr){return Ct(xr,fr,yr)},Object.setPrototypeOf(ct.prototype,c.prototype),Object.setPrototypeOf(ct,c);function qt(xr){if(typeof xr!="number")throw new TypeError('"size" argument must be of type number');if(xr<0)throw new RangeError('The value "'+xr+'" is invalid for option "size"')}function Ot(xr,fr,yr){return qt(xr),xr<=0?yt(xr):fr!==void 0?typeof yr=="string"?yt(xr).fill(fr,yr):yt(xr).fill(fr):yt(xr)}ct.alloc=function(xr,fr,yr){return Ot(xr,fr,yr)};function Lt(xr){return qt(xr),yt(xr<0?0:ar(xr)|0)}ct.allocUnsafe=function(xr){return Lt(xr)},ct.allocUnsafeSlow=function(xr){return Lt(xr)};function Qt(xr,fr){if((typeof fr!="string"||fr==="")&&(fr="utf8"),!ct.isEncoding(fr))throw new TypeError("Unknown encoding: "+fr);const yr=_r(xr,fr)|0;let Mr=yt(yr);const Pr=Mr.write(xr,fr);return Pr!==yr&&(Mr=Mr.slice(0,Pr)),Mr}function ir(xr){const fr=xr.length<0?0:ar(xr.length)|0,yr=yt(fr);for(let Mr=0;Mr<fr;Mr+=1)yr[Mr]=xr[Mr]&255;return yr}function er(xr){if(Wr(xr,c)){const fr=new c(xr);return tr(fr.buffer,fr.byteOffset,fr.byteLength)}return ir(xr)}function tr(xr,fr,yr){if(fr<0||xr.byteLength<fr)throw new RangeError('"offset" is outside of buffer bounds');if(xr.byteLength<fr+(yr||0))throw new RangeError('"length" is outside of buffer bounds');let Mr;return fr===void 0&&yr===void 0?Mr=new c(xr):yr===void 0?Mr=new c(xr,fr):Mr=new c(xr,fr,yr),Object.setPrototypeOf(Mr,ct.prototype),Mr}function sr(xr){if(ct.isBuffer(xr)){const fr=ar(xr.length)|0,yr=yt(fr);return yr.length===0||xr.copy(yr,0,0,fr),yr}if(xr.length!==void 0)return typeof xr.length!="number"||xn(xr.length)?yt(0):ir(xr);if(xr.type==="Buffer"&&Array.isArray(xr.data))return ir(xr.data)}function ar(xr){if(xr>=d)throw new RangeError("Attempt to allocate Buffer larger than maximum size: 0x"+d.toString(16)+" bytes");return xr|0}function hr(xr){return+xr!=xr&&(xr=0),ct.alloc(+xr)}ct.isBuffer=function(fr){return fr!=null&&fr._isBuffer===!0&&fr!==ct.prototype},ct.compare=function(fr,yr){if(Wr(fr,c)&&(fr=ct.from(fr,fr.offset,fr.byteLength)),Wr(yr,c)&&(yr=ct.from(yr,yr.offset,yr.byteLength)),!ct.isBuffer(fr)||!ct.isBuffer(yr))throw new TypeError('The "buf1", "buf2" arguments must be one of type Buffer or Uint8Array');if(fr===yr)return 0;let Mr=fr.length,Pr=yr.length;for(let Vr=0,Br=Math.min(Mr,Pr);Vr<Br;++Vr)if(fr[Vr]!==yr[Vr]){Mr=fr[Vr],Pr=yr[Vr];break}return Mr<Pr?-1:Pr<Mr?1:0},ct.isEncoding=function(fr){switch(String(fr).toLowerCase()){case"hex":case"utf8":case"utf-8":case"ascii":case"latin1":case"binary":case"base64":case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return!0;default:return!1}},ct.concat=function(fr,yr){if(!Array.isArray(fr))throw new TypeError('"list" argument must be an Array of Buffers');if(fr.length===0)return ct.alloc(0);let Mr;if(yr===void 0)for(yr=0,Mr=0;Mr<fr.length;++Mr)yr+=fr[Mr].length;const Pr=ct.allocUnsafe(yr);let Vr=0;for(Mr=0;Mr<fr.length;++Mr){let Br=fr[Mr];if(Wr(Br,c))Vr+Br.length>Pr.length?(ct.isBuffer(Br)||(Br=ct.from(Br)),Br.copy(Pr,Vr)):c.prototype.set.call(Pr,Br,Vr);else if(ct.isBuffer(Br))Br.copy(Pr,Vr);else throw new TypeError('"list" argument must be an Array of Buffers');Vr+=Br.length}return Pr};function _r(xr,fr){if(ct.isBuffer(xr))return xr.length;if(j.isView(xr)||Wr(xr,j))return xr.byteLength;if(typeof xr!="string")throw new TypeError('The "string" argument must be one of type string, Buffer, or ArrayBuffer. Received type '+typeof xr);const yr=xr.length,Mr=arguments.length>2&&arguments[2]===!0;if(!Mr&&yr===0)return 0;let Pr=!1;for(;;)switch(fr){case"ascii":case"latin1":case"binary":return yr;case"utf8":case"utf-8":return En(xr).length;case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return yr*2;case"hex":return yr>>>1;case"base64":return yn(xr).length;default:if(Pr)return Mr?-1:En(xr).length;fr=(""+fr).toLowerCase(),Pr=!0}}ct.byteLength=_r;function dr(xr,fr,yr){let Mr=!1;if((fr===void 0||fr<0)&&(fr=0),fr>this.length||((yr===void 0||yr>this.length)&&(yr=this.length),yr<=0)||(yr>>>=0,fr>>>=0,yr<=fr))return"";for(xr||(xr="utf8");;)switch(xr){case"hex":return nr(this,fr,yr);case"utf8":case"utf-8":return kt(this,fr,yr);case"ascii":return g(this,fr,yr);case"latin1":case"binary":return wt(this,fr,yr);case"base64":return Rt(this,fr,yr);case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return or(this,fr,yr);default:if(Mr)throw new TypeError("Unknown encoding: "+xr);xr=(xr+"").toLowerCase(),Mr=!0}}ct.prototype._isBuffer=!0;function ur(xr,fr,yr){const Mr=xr[fr];xr[fr]=xr[yr],xr[yr]=Mr}ct.prototype.swap16=function(){const fr=this.length;if(fr%2!==0)throw new RangeError("Buffer size must be a multiple of 16-bits");for(let yr=0;yr<fr;yr+=2)ur(this,yr,yr+1);return this},ct.prototype.swap32=function(){const fr=this.length;if(fr%4!==0)throw new RangeError("Buffer size must be a multiple of 32-bits");for(let yr=0;yr<fr;yr+=4)ur(this,yr,yr+3),ur(this,yr+1,yr+2);return this},ct.prototype.swap64=function(){const fr=this.length;if(fr%8!==0)throw new RangeError("Buffer size must be a multiple of 64-bits");for(let yr=0;yr<fr;yr+=8)ur(this,yr,yr+7),ur(this,yr+1,yr+6),ur(this,yr+2,yr+5),ur(this,yr+3,yr+4);return this},ct.prototype.toString=function(){const fr=this.length;return fr===0?"":arguments.length===0?kt(this,0,fr):dr.apply(this,arguments)},ct.prototype.toLocaleString=ct.prototype.toString,ct.prototype.equals=function(fr){if(!ct.isBuffer(fr))throw new TypeError("Argument must be a Buffer");return this===fr?!0:ct.compare(this,fr)===0},ct.prototype.inspect=function(){let fr="";const yr=s.INSPECT_MAX_BYTES;return fr=this.toString("hex",0,yr).replace(/(.{2})/g,"$1 ").trim(),this.length>yr&&(fr+=" ... "),"<Buffer "+fr+">"},a&&(ct.prototype[a]=ct.prototype.inspect),ct.prototype.compare=function(fr,yr,Mr,Pr,Vr){if(Wr(fr,c)&&(fr=ct.from(fr,fr.offset,fr.byteLength)),!ct.isBuffer(fr))throw new TypeError('The "target" argument must be one of type Buffer or Uint8Array. Received type '+typeof fr);if(yr===void 0&&(yr=0),Mr===void 0&&(Mr=fr?fr.length:0),Pr===void 0&&(Pr=0),Vr===void 0&&(Vr=this.length),yr<0||Mr>fr.length||Pr<0||Vr>this.length)throw new RangeError("out of range index");if(Pr>=Vr&&yr>=Mr)return 0;if(Pr>=Vr)return-1;if(yr>=Mr)return 1;if(yr>>>=0,Mr>>>=0,Pr>>>=0,Vr>>>=0,this===fr)return 0;let Br=Vr-Pr,jr=Mr-yr;const An=Math.min(Br,jr),Ur=this.slice(Pr,Vr),Gr=fr.slice(yr,Mr);for(let wn=0;wn<An;++wn)if(Ur[wn]!==Gr[wn]){Br=Ur[wn],jr=Gr[wn];break}return Br<jr?-1:jr<Br?1:0};function lr(xr,fr,yr,Mr,Pr){if(xr.length===0)return-1;if(typeof yr=="string"?(Mr=yr,yr=0):yr>2147483647?yr=2147483647:yr<-2147483648&&(yr=-2147483648),yr=+yr,xn(yr)&&(yr=Pr?0:xr.length-1),yr<0&&(yr=xr.length+yr),yr>=xr.length){if(Pr)return-1;yr=xr.length-1}else if(yr<0)if(Pr)yr=0;else return-1;if(typeof fr=="string"&&(fr=ct.from(fr,Mr)),ct.isBuffer(fr))return fr.length===0?-1:gr(xr,fr,yr,Mr,Pr);if(typeof fr=="number")return fr=fr&255,typeof c.prototype.indexOf=="function"?Pr?c.prototype.indexOf.call(xr,fr,yr):c.prototype.lastIndexOf.call(xr,fr,yr):gr(xr,[fr],yr,Mr,Pr);throw new TypeError("val must be string, number or Buffer")}function gr(xr,fr,yr,Mr,Pr){let Vr=1,Br=xr.length,jr=fr.length;if(Mr!==void 0&&(Mr=String(Mr).toLowerCase(),Mr==="ucs2"||Mr==="ucs-2"||Mr==="utf16le"||Mr==="utf-16le")){if(xr.length<2||fr.length<2)return-1;Vr=2,Br/=2,jr/=2,yr/=2}function An(Gr,wn){return Vr===1?Gr[wn]:Gr.readUInt16BE(wn*Vr)}let Ur;if(Pr){let Gr=-1;for(Ur=yr;Ur<Br;Ur++)if(An(xr,Ur)===An(fr,Gr===-1?0:Ur-Gr)){if(Gr===-1&&(Gr=Ur),Ur-Gr+1===jr)return Gr*Vr}else Gr!==-1&&(Ur-=Ur-Gr),Gr=-1}else for(yr+jr>Br&&(yr=Br-jr),Ur=yr;Ur>=0;Ur--){let Gr=!0;for(let wn=0;wn<jr;wn++)if(An(xr,Ur+wn)!==An(fr,wn)){Gr=!1;break}if(Gr)return Ur}return-1}ct.prototype.includes=function(fr,yr,Mr){return this.indexOf(fr,yr,Mr)!==-1},ct.prototype.indexOf=function(fr,yr,Mr){return lr(this,fr,yr,Mr,!0)},ct.prototype.lastIndexOf=function(fr,yr,Mr){return lr(this,fr,yr,Mr,!1)};function Mt(xr,fr,yr,Mr){yr=Number(yr)||0;const Pr=xr.length-yr;Mr?(Mr=Number(Mr),Mr>Pr&&(Mr=Pr)):Mr=Pr;const Vr=fr.length;Mr>Vr/2&&(Mr=Vr/2);let Br;for(Br=0;Br<Mr;++Br){const jr=parseInt(fr.substr(Br*2,2),16);if(xn(jr))return Br;xr[yr+Br]=jr}return Br}function h(xr,fr,yr,Mr){return Nr(En(fr,xr.length-yr),xr,yr,Mr)}function _(xr,fr,yr,Mr){return Nr(Fr(fr),xr,yr,Mr)}function b(xr,fr,yr,Mr){return Nr(yn(fr),xr,yr,Mr)}function lt(xr,fr,yr,Mr){return Nr(zr(fr,xr.length-yr),xr,yr,Mr)}ct.prototype.write=function(fr,yr,Mr,Pr){if(yr===void 0)Pr="utf8",Mr=this.length,yr=0;else if(Mr===void 0&&typeof yr=="string")Pr=yr,Mr=this.length,yr=0;else if(isFinite(yr))yr=yr>>>0,isFinite(Mr)?(Mr=Mr>>>0,Pr===void 0&&(Pr="utf8")):(Pr=Mr,Mr=void 0);else throw new Error("Buffer.write(string, encoding, offset[, length]) is no longer supported");const Vr=this.length-yr;if((Mr===void 0||Mr>Vr)&&(Mr=Vr),fr.length>0&&(Mr<0||yr<0)||yr>this.length)throw new RangeError("Attempt to write outside buffer bounds");Pr||(Pr="utf8");let Br=!1;for(;;)switch(Pr){case"hex":return Mt(this,fr,yr,Mr);case"utf8":case"utf-8":return h(this,fr,yr,Mr);case"ascii":case"latin1":case"binary":return _(this,fr,yr,Mr);case"base64":return b(this,fr,yr,Mr);case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return lt(this,fr,yr,Mr);default:if(Br)throw new TypeError("Unknown encoding: "+Pr);Pr=(""+Pr).toLowerCase(),Br=!0}},ct.prototype.toJSON=function(){return{type:"Buffer",data:Array.prototype.slice.call(this._arr||this,0)}};function Rt(xr,fr,yr){return fr===0&&yr===xr.length?e.fromByteArray(xr):e.fromByteArray(xr.slice(fr,yr))}function kt(xr,fr,yr){yr=Math.min(xr.length,yr);const Mr=[];let Pr=fr;for(;Pr<yr;){const Vr=xr[Pr];let Br=null,jr=Vr>239?4:Vr>223?3:Vr>191?2:1;if(Pr+jr<=yr){let An,Ur,Gr,wn;switch(jr){case 1:Vr<128&&(Br=Vr);break;case 2:An=xr[Pr+1],(An&192)===128&&(wn=(Vr&31)<<6|An&63,wn>127&&(Br=wn));break;case 3:An=xr[Pr+1],Ur=xr[Pr+2],(An&192)===128&&(Ur&192)===128&&(wn=(Vr&15)<<12|(An&63)<<6|Ur&63,wn>2047&&(wn<55296||wn>57343)&&(Br=wn));break;case 4:An=xr[Pr+1],Ur=xr[Pr+2],Gr=xr[Pr+3],(An&192)===128&&(Ur&192)===128&&(Gr&192)===128&&(wn=(Vr&15)<<18|(An&63)<<12|(Ur&63)<<6|Gr&63,wn>65535&&wn<1114112&&(Br=wn))}}Br===null?(Br=65533,jr=1):Br>65535&&(Br-=65536,Mr.push(Br>>>10&1023|55296),Br=56320|Br&1023),Mr.push(Br),Pr+=jr}return xt(Mr)}const Ft=4096;function xt(xr){const fr=xr.length;if(fr<=Ft)return String.fromCharCode.apply(String,xr);let yr="",Mr=0;for(;Mr<fr;)yr+=String.fromCharCode.apply(String,xr.slice(Mr,Mr+=Ft));return yr}function g(xr,fr,yr){let Mr="";yr=Math.min(xr.length,yr);for(let Pr=fr;Pr<yr;++Pr)Mr+=String.fromCharCode(xr[Pr]&127);return Mr}function wt(xr,fr,yr){let Mr="";yr=Math.min(xr.length,yr);for(let Pr=fr;Pr<yr;++Pr)Mr+=String.fromCharCode(xr[Pr]);return Mr}function nr(xr,fr,yr){const Mr=xr.length;(!fr||fr<0)&&(fr=0),(!yr||yr<0||yr>Mr)&&(yr=Mr);let Pr="";for(let Vr=fr;Vr<yr;++Vr)Pr+=Or[xr[Vr]];return Pr}function or(xr,fr,yr){const Mr=xr.slice(fr,yr);let Pr="";for(let Vr=0;Vr<Mr.length-1;Vr+=2)Pr+=String.fromCharCode(Mr[Vr]+Mr[Vr+1]*256);return Pr}ct.prototype.slice=function(fr,yr){const Mr=this.length;fr=~~fr,yr=yr===void 0?Mr:~~yr,fr<0?(fr+=Mr,fr<0&&(fr=0)):fr>Mr&&(fr=Mr),yr<0?(yr+=Mr,yr<0&&(yr=0)):yr>Mr&&(yr=Mr),yr<fr&&(yr=fr);const Pr=this.subarray(fr,yr);return Object.setPrototypeOf(Pr,ct.prototype),Pr};function cr(xr,fr,yr){if(xr%1!==0||xr<0)throw new RangeError("offset is not uint");if(xr+fr>yr)throw new RangeError("Trying to access beyond buffer length")}ct.prototype.readUintLE=ct.prototype.readUIntLE=function(fr,yr,Mr){fr=fr>>>0,yr=yr>>>0,Mr||cr(fr,yr,this.length);let Pr=this[fr],Vr=1,Br=0;for(;++Br<yr&&(Vr*=256);)Pr+=this[fr+Br]*Vr;return Pr},ct.prototype.readUintBE=ct.prototype.readUIntBE=function(fr,yr,Mr){fr=fr>>>0,yr=yr>>>0,Mr||cr(fr,yr,this.length);let Pr=this[fr+--yr],Vr=1;for(;yr>0&&(Vr*=256);)Pr+=this[fr+--yr]*Vr;return Pr},ct.prototype.readUint8=ct.prototype.readUInt8=function(fr,yr){return fr=fr>>>0,yr||cr(fr,1,this.length),this[fr]},ct.prototype.readUint16LE=ct.prototype.readUInt16LE=function(fr,yr){return fr=fr>>>0,yr||cr(fr,2,this.length),this[fr]|this[fr+1]<<8},ct.prototype.readUint16BE=ct.prototype.readUInt16BE=function(fr,yr){return fr=fr>>>0,yr||cr(fr,2,this.length),this[fr]<<8|this[fr+1]},ct.prototype.readUint32LE=ct.prototype.readUInt32LE=function(fr,yr){return fr=fr>>>0,yr||cr(fr,4,this.length),(this[fr]|this[fr+1]<<8|this[fr+2]<<16)+this[fr+3]*16777216},ct.prototype.readUint32BE=ct.prototype.readUInt32BE=function(fr,yr){return fr=fr>>>0,yr||cr(fr,4,this.length),this[fr]*16777216+(this[fr+1]<<16|this[fr+2]<<8|this[fr+3])},ct.prototype.readBigUInt64LE=Yr(function(fr){fr=fr>>>0,$r(fr,"offset");const yr=this[fr],Mr=this[fr+7];(yr===void 0||Mr===void 0)&&gn(fr,this.length-8);const Pr=yr+this[++fr]*2**8+this[++fr]*2**16+this[++fr]*2**24,Vr=this[++fr]+this[++fr]*2**8+this[++fr]*2**16+Mr*2**24;return BigInt(Pr)+(BigInt(Vr)<<BigInt(32))}),ct.prototype.readBigUInt64BE=Yr(function(fr){fr=fr>>>0,$r(fr,"offset");const yr=this[fr],Mr=this[fr+7];(yr===void 0||Mr===void 0)&&gn(fr,this.length-8);const Pr=yr*2**24+this[++fr]*2**16+this[++fr]*2**8+this[++fr],Vr=this[++fr]*2**24+this[++fr]*2**16+this[++fr]*2**8+Mr;return(BigInt(Pr)<<BigInt(32))+BigInt(Vr)}),ct.prototype.readIntLE=function(fr,yr,Mr){fr=fr>>>0,yr=yr>>>0,Mr||cr(fr,yr,this.length);let Pr=this[fr],Vr=1,Br=0;for(;++Br<yr&&(Vr*=256);)Pr+=this[fr+Br]*Vr;return Vr*=128,Pr>=Vr&&(Pr-=Math.pow(2,8*yr)),Pr},ct.prototype.readIntBE=function(fr,yr,Mr){fr=fr>>>0,yr=yr>>>0,Mr||cr(fr,yr,this.length);let Pr=yr,Vr=1,Br=this[fr+--Pr];for(;Pr>0&&(Vr*=256);)Br+=this[fr+--Pr]*Vr;return Vr*=128,Br>=Vr&&(Br-=Math.pow(2,8*yr)),Br},ct.prototype.readInt8=function(fr,yr){return fr=fr>>>0,yr||cr(fr,1,this.length),this[fr]&128?(255-this[fr]+1)*-1:this[fr]},ct.prototype.readInt16LE=function(fr,yr){fr=fr>>>0,yr||cr(fr,2,this.length);const Mr=this[fr]|this[fr+1]<<8;return Mr&32768?Mr|4294901760:Mr},ct.prototype.readInt16BE=function(fr,yr){fr=fr>>>0,yr||cr(fr,2,this.length);const Mr=this[fr+1]|this[fr]<<8;return Mr&32768?Mr|4294901760:Mr},ct.prototype.readInt32LE=function(fr,yr){return fr=fr>>>0,yr||cr(fr,4,this.length),this[fr]|this[fr+1]<<8|this[fr+2]<<16|this[fr+3]<<24},ct.prototype.readInt32BE=function(fr,yr){return fr=fr>>>0,yr||cr(fr,4,this.length),this[fr]<<24|this[fr+1]<<16|this[fr+2]<<8|this[fr+3]},ct.prototype.readBigInt64LE=Yr(function(fr){fr=fr>>>0,$r(fr,"offset");const yr=this[fr],Mr=this[fr+7];(yr===void 0||Mr===void 0)&&gn(fr,this.length-8);const Pr=this[fr+4]+this[fr+5]*2**8+this[fr+6]*2**16+(Mr<<24);return(BigInt(Pr)<<BigInt(32))+BigInt(yr+this[++fr]*2**8+this[++fr]*2**16+this[++fr]*2**24)}),ct.prototype.readBigInt64BE=Yr(function(fr){fr=fr>>>0,$r(fr,"offset");const yr=this[fr],Mr=this[fr+7];(yr===void 0||Mr===void 0)&&gn(fr,this.length-8);const Pr=(yr<<24)+this[++fr]*2**16+this[++fr]*2**8+this[++fr];return(BigInt(Pr)<<BigInt(32))+BigInt(this[++fr]*2**24+this[++fr]*2**16+this[++fr]*2**8+Mr)}),ct.prototype.readFloatLE=function(fr,yr){return fr=fr>>>0,yr||cr(fr,4,this.length),o.read(this,fr,!0,23,4)},ct.prototype.readFloatBE=function(fr,yr){return fr=fr>>>0,yr||cr(fr,4,this.length),o.read(this,fr,!1,23,4)},ct.prototype.readDoubleLE=function(fr,yr){return fr=fr>>>0,yr||cr(fr,8,this.length),o.read(this,fr,!0,52,8)},ct.prototype.readDoubleBE=function(fr,yr){return fr=fr>>>0,yr||cr(fr,8,this.length),o.read(this,fr,!1,52,8)};function Rr(xr,fr,yr,Mr,Pr,Vr){if(!ct.isBuffer(xr))throw new TypeError('"buffer" argument must be a Buffer instance');if(fr>Pr||fr<Vr)throw new RangeError('"value" argument is out of bounds');if(yr+Mr>xr.length)throw new RangeError("Index out of range")}ct.prototype.writeUintLE=ct.prototype.writeUIntLE=function(fr,yr,Mr,Pr){if(fr=+fr,yr=yr>>>0,Mr=Mr>>>0,!Pr){const jr=Math.pow(2,8*Mr)-1;Rr(this,fr,yr,Mr,jr,0)}let Vr=1,Br=0;for(this[yr]=fr&255;++Br<Mr&&(Vr*=256);)this[yr+Br]=fr/Vr&255;return yr+Mr},ct.prototype.writeUintBE=ct.prototype.writeUIntBE=function(fr,yr,Mr,Pr){if(fr=+fr,yr=yr>>>0,Mr=Mr>>>0,!Pr){const jr=Math.pow(2,8*Mr)-1;Rr(this,fr,yr,Mr,jr,0)}let Vr=Mr-1,Br=1;for(this[yr+Vr]=fr&255;--Vr>=0&&(Br*=256);)this[yr+Vr]=fr/Br&255;return yr+Mr},ct.prototype.writeUint8=ct.prototype.writeUInt8=function(fr,yr,Mr){return fr=+fr,yr=yr>>>0,Mr||Rr(this,fr,yr,1,255,0),this[yr]=fr&255,yr+1},ct.prototype.writeUint16LE=ct.prototype.writeUInt16LE=function(fr,yr,Mr){return fr=+fr,yr=yr>>>0,Mr||Rr(this,fr,yr,2,65535,0),this[yr]=fr&255,this[yr+1]=fr>>>8,yr+2},ct.prototype.writeUint16BE=ct.prototype.writeUInt16BE=function(fr,yr,Mr){return fr=+fr,yr=yr>>>0,Mr||Rr(this,fr,yr,2,65535,0),this[yr]=fr>>>8,this[yr+1]=fr&255,yr+2},ct.prototype.writeUint32LE=ct.prototype.writeUInt32LE=function(fr,yr,Mr){return fr=+fr,yr=yr>>>0,Mr||Rr(this,fr,yr,4,4294967295,0),this[yr+3]=fr>>>24,this[yr+2]=fr>>>16,this[yr+1]=fr>>>8,this[yr]=fr&255,yr+4},ct.prototype.writeUint32BE=ct.prototype.writeUInt32BE=function(fr,yr,Mr){return fr=+fr,yr=yr>>>0,Mr||Rr(this,fr,yr,4,4294967295,0),this[yr]=fr>>>24,this[yr+1]=fr>>>16,this[yr+2]=fr>>>8,this[yr+3]=fr&255,yr+4};function Ar(xr,fr,yr,Mr,Pr){qr(fr,Mr,Pr,xr,yr,7);let Vr=Number(fr&BigInt(4294967295));xr[yr++]=Vr,Vr=Vr>>8,xr[yr++]=Vr,Vr=Vr>>8,xr[yr++]=Vr,Vr=Vr>>8,xr[yr++]=Vr;let Br=Number(fr>>BigInt(32)&BigInt(4294967295));return xr[yr++]=Br,Br=Br>>8,xr[yr++]=Br,Br=Br>>8,xr[yr++]=Br,Br=Br>>8,xr[yr++]=Br,yr}function pr(xr,fr,yr,Mr,Pr){qr(fr,Mr,Pr,xr,yr,7);let Vr=Number(fr&BigInt(4294967295));xr[yr+7]=Vr,Vr=Vr>>8,xr[yr+6]=Vr,Vr=Vr>>8,xr[yr+5]=Vr,Vr=Vr>>8,xr[yr+4]=Vr;let Br=Number(fr>>BigInt(32)&BigInt(4294967295));return xr[yr+3]=Br,Br=Br>>8,xr[yr+2]=Br,Br=Br>>8,xr[yr+1]=Br,Br=Br>>8,xr[yr]=Br,yr+8}ct.prototype.writeBigUInt64LE=Yr(function(fr,yr=0){return Ar(this,fr,yr,BigInt(0),BigInt("0xffffffffffffffff"))}),ct.prototype.writeBigUInt64BE=Yr(function(fr,yr=0){return pr(this,fr,yr,BigInt(0),BigInt("0xffffffffffffffff"))}),ct.prototype.writeIntLE=function(fr,yr,Mr,Pr){if(fr=+fr,yr=yr>>>0,!Pr){const An=Math.pow(2,8*Mr-1);Rr(this,fr,yr,Mr,An-1,-An)}let Vr=0,Br=1,jr=0;for(this[yr]=fr&255;++Vr<Mr&&(Br*=256);)fr<0&&jr===0&&this[yr+Vr-1]!==0&&(jr=1),this[yr+Vr]=(fr/Br>>0)-jr&255;return yr+Mr},ct.prototype.writeIntBE=function(fr,yr,Mr,Pr){if(fr=+fr,yr=yr>>>0,!Pr){const An=Math.pow(2,8*Mr-1);Rr(this,fr,yr,Mr,An-1,-An)}let Vr=Mr-1,Br=1,jr=0;for(this[yr+Vr]=fr&255;--Vr>=0&&(Br*=256);)fr<0&&jr===0&&this[yr+Vr+1]!==0&&(jr=1),this[yr+Vr]=(fr/Br>>0)-jr&255;return yr+Mr},ct.prototype.writeInt8=function(fr,yr,Mr){return fr=+fr,yr=yr>>>0,Mr||Rr(this,fr,yr,1,127,-128),fr<0&&(fr=255+fr+1),this[yr]=fr&255,yr+1},ct.prototype.writeInt16LE=function(fr,yr,Mr){return fr=+fr,yr=yr>>>0,Mr||Rr(this,fr,yr,2,32767,-32768),this[yr]=fr&255,this[yr+1]=fr>>>8,yr+2},ct.prototype.writeInt16BE=function(fr,yr,Mr){return fr=+fr,yr=yr>>>0,Mr||Rr(this,fr,yr,2,32767,-32768),this[yr]=fr>>>8,this[yr+1]=fr&255,yr+2},ct.prototype.writeInt32LE=function(fr,yr,Mr){return fr=+fr,yr=yr>>>0,Mr||Rr(this,fr,yr,4,2147483647,-2147483648),this[yr]=fr&255,this[yr+1]=fr>>>8,this[yr+2]=fr>>>16,this[yr+3]=fr>>>24,yr+4},ct.prototype.writeInt32BE=function(fr,yr,Mr){return fr=+fr,yr=yr>>>0,Mr||Rr(this,fr,yr,4,2147483647,-2147483648),fr<0&&(fr=4294967295+fr+1),this[yr]=fr>>>24,this[yr+1]=fr>>>16,this[yr+2]=fr>>>8,this[yr+3]=fr&255,yr+4},ct.prototype.writeBigInt64LE=Yr(function(fr,yr=0){return Ar(this,fr,yr,-BigInt("0x8000000000000000"),BigInt("0x7fffffffffffffff"))}),ct.prototype.writeBigInt64BE=Yr(function(fr,yr=0){return pr(this,fr,yr,-BigInt("0x8000000000000000"),BigInt("0x7fffffffffffffff"))});function wr(xr,fr,yr,Mr,Pr,Vr){if(yr+Mr>xr.length)throw new RangeError("Index out of range");if(yr<0)throw new RangeError("Index out of range")}function Tr(xr,fr,yr,Mr,Pr){return fr=+fr,yr=yr>>>0,Pr||wr(xr,fr,yr,4),o.write(xr,fr,yr,Mr,23,4),yr+4}ct.prototype.writeFloatLE=function(fr,yr,Mr){return Tr(this,fr,yr,!0,Mr)},ct.prototype.writeFloatBE=function(fr,yr,Mr){return Tr(this,fr,yr,!1,Mr)};function Ir(xr,fr,yr,Mr,Pr){return fr=+fr,yr=yr>>>0,Pr||wr(xr,fr,yr,8),o.write(xr,fr,yr,Mr,52,8),yr+8}ct.prototype.writeDoubleLE=function(fr,yr,Mr){return Ir(this,fr,yr,!0,Mr)},ct.prototype.writeDoubleBE=function(fr,yr,Mr){return Ir(this,fr,yr,!1,Mr)},ct.prototype.copy=function(fr,yr,Mr,Pr){if(!ct.isBuffer(fr))throw new TypeError("argument should be a Buffer");if(Mr||(Mr=0),!Pr&&Pr!==0&&(Pr=this.length),yr>=fr.length&&(yr=fr.length),yr||(yr=0),Pr>0&&Pr<Mr&&(Pr=Mr),Pr===Mr||fr.length===0||this.length===0)return 0;if(yr<0)throw new RangeError("targetStart out of bounds");if(Mr<0||Mr>=this.length)throw new RangeError("Index out of range");if(Pr<0)throw new RangeError("sourceEnd out of bounds");Pr>this.length&&(Pr=this.length),fr.length-yr<Pr-Mr&&(Pr=fr.length-yr+Mr);const Vr=Pr-Mr;return this===fr&&typeof c.prototype.copyWithin=="function"?this.copyWithin(yr,Mr,Pr):c.prototype.set.call(fr,this.subarray(Mr,Pr),yr),Vr},ct.prototype.fill=function(fr,yr,Mr,Pr){if(typeof fr=="string"){if(typeof yr=="string"?(Pr=yr,yr=0,Mr=this.length):typeof Mr=="string"&&(Pr=Mr,Mr=this.length),Pr!==void 0&&typeof Pr!="string")throw new TypeError("encoding must be a string");if(typeof Pr=="string"&&!ct.isEncoding(Pr))throw new TypeError("Unknown encoding: "+Pr);if(fr.length===1){const Br=fr.charCodeAt(0);(Pr==="utf8"&&Br<128||Pr==="latin1")&&(fr=Br)}}else typeof fr=="number"?fr=fr&255:typeof fr=="boolean"&&(fr=Number(fr));if(yr<0||this.length<yr||this.length<Mr)throw new RangeError("Out of range index");if(Mr<=yr)return this;yr=yr>>>0,Mr=Mr===void 0?this.length:Mr>>>0,fr||(fr=0);let Vr;if(typeof fr=="number")for(Vr=yr;Vr<Mr;++Vr)this[Vr]=fr;else{const Br=ct.isBuffer(fr)?fr:ct.from(fr,Pr),jr=Br.length;if(jr===0)throw new TypeError('The value "'+fr+'" is invalid for argument "value"');for(Vr=0;Vr<Mr-yr;++Vr)this[Vr+yr]=Br[Vr%jr]}return this};const Sr={};function br(xr,fr,yr){Sr[xr]=class extends yr{constructor(){super(),Object.defineProperty(this,"message",{value:fr.apply(this,arguments),writable:!0,configurable:!0}),this.name=`${this.name} [${xr}]`,this.stack,delete this.name}get code(){return xr}set code(Pr){Object.defineProperty(this,"code",{configurable:!0,enumerable:!0,value:Pr,writable:!0})}toString(){return`${this.name} [${xr}]: ${this.message}`}}}br("ERR_BUFFER_OUT_OF_BOUNDS",function(xr){return xr?`${xr} is outside of buffer bounds`:"Attempt to access memory outside buffer bounds"},RangeError),br("ERR_INVALID_ARG_TYPE",function(xr,fr){return`The "${xr}" argument must be of type number. Received type ${typeof fr}`},TypeError),br("ERR_OUT_OF_RANGE",function(xr,fr,yr){let Mr=`The value of "${xr}" is out of range.`,Pr=yr;return Number.isInteger(yr)&&Math.abs(yr)>2**32?Pr=kr(String(yr)):typeof yr=="bigint"&&(Pr=String(yr),(yr>BigInt(2)**BigInt(32)||yr<-(BigInt(2)**BigInt(32)))&&(Pr=kr(Pr)),Pr+="n"),Mr+=` It must be ${fr}. Received ${Pr}`,Mr},RangeError);function kr(xr){let fr="",yr=xr.length;const Mr=xr[0]==="-"?1:0;for(;yr>=Mr+4;yr-=3)fr=`_${xr.slice(yr-3,yr)}${fr}`;return`${xr.slice(0,yr)}${fr}`}function Qr(xr,fr,yr){$r(fr,"offset"),(xr[fr]===void 0||xr[fr+yr]===void 0)&&gn(fr,xr.length-(yr+1))}function qr(xr,fr,yr,Mr,Pr,Vr){if(xr>yr||xr<fr){const Br=typeof fr=="bigint"?"n":"";let jr;throw fr===0||fr===BigInt(0)?jr=`>= 0${Br} and < 2${Br} ** ${(Vr+1)*8}${Br}`:jr=`>= -(2${Br} ** ${(Vr+1)*8-1}${Br}) and < 2 ** ${(Vr+1)*8-1}${Br}`,new Sr.ERR_OUT_OF_RANGE("value",jr,xr)}Qr(Mr,Pr,Vr)}function $r(xr,fr){if(typeof xr!="number")throw new Sr.ERR_INVALID_ARG_TYPE(fr,"number",xr)}function gn(xr,fr,yr){throw Math.floor(xr)!==xr?($r(xr,yr),new Sr.ERR_OUT_OF_RANGE("offset","an integer",xr)):fr<0?new Sr.ERR_BUFFER_OUT_OF_BOUNDS:new Sr.ERR_OUT_OF_RANGE("offset",`>= 0 and <= ${fr}`,xr)}const Lr=/[^+/0-9A-Za-z-_]/g;function Dr(xr){if(xr=xr.split("=")[0],xr=xr.trim().replace(Lr,""),xr.length<2)return"";for(;xr.length%4!==0;)xr=xr+"=";return xr}function En(xr,fr){fr=fr||1/0;let yr;const Mr=xr.length;let Pr=null;const Vr=[];for(let Br=0;Br<Mr;++Br){if(yr=xr.charCodeAt(Br),yr>55295&&yr<57344){if(!Pr){if(yr>56319){(fr-=3)>-1&&Vr.push(239,191,189);continue}else if(Br+1===Mr){(fr-=3)>-1&&Vr.push(239,191,189);continue}Pr=yr;continue}if(yr<56320){(fr-=3)>-1&&Vr.push(239,191,189),Pr=yr;continue}yr=(Pr-55296<<10|yr-56320)+65536}else Pr&&(fr-=3)>-1&&Vr.push(239,191,189);if(Pr=null,yr<128){if((fr-=1)<0)break;Vr.push(yr)}else if(yr<2048){if((fr-=2)<0)break;Vr.push(yr>>6|192,yr&63|128)}else if(yr<65536){if((fr-=3)<0)break;Vr.push(yr>>12|224,yr>>6&63|128,yr&63|128)}else if(yr<1114112){if((fr-=4)<0)break;Vr.push(yr>>18|240,yr>>12&63|128,yr>>6&63|128,yr&63|128)}else throw new Error("Invalid code point")}return Vr}function Fr(xr){const fr=[];for(let yr=0;yr<xr.length;++yr)fr.push(xr.charCodeAt(yr)&255);return fr}function zr(xr,fr){let yr,Mr,Pr;const Vr=[];for(let Br=0;Br<xr.length&&!((fr-=2)<0);++Br)yr=xr.charCodeAt(Br),Mr=yr>>8,Pr=yr%256,Vr.push(Pr),Vr.push(Mr);return Vr}function yn(xr){return e.toByteArray(Dr(xr))}function Nr(xr,fr,yr,Mr){let Pr;for(Pr=0;Pr<Mr&&!(Pr+yr>=fr.length||Pr>=xr.length);++Pr)fr[Pr+yr]=xr[Pr];return Pr}function Wr(xr,fr){return xr instanceof fr||xr!=null&&xr.constructor!=null&&xr.constructor.name!=null&&xr.constructor.name===fr.name}function xn(xr){return xr!==xr}const Or=function(){const xr="0123456789abcdef",fr=new Array(256);for(let yr=0;yr<16;++yr){const Mr=yr*16;for(let Pr=0;Pr<16;++Pr)fr[Mr+Pr]=xr[yr]+xr[Pr]}return fr}();function Yr(xr){return typeof BigInt>"u"?Pn:xr}function Pn(){throw new Error("BigInt not supported")}})(buffer$1);const Buffer=buffer$1.Buffer,Blob$1=buffer$1.Blob,BlobOptions=buffer$1.BlobOptions,Buffer$1=buffer$1.Buffer,File=buffer$1.File,FileOptions=buffer$1.FileOptions,INSPECT_MAX_BYTES=buffer$1.INSPECT_MAX_BYTES,SlowBuffer=buffer$1.SlowBuffer,TranscodeEncoding=buffer$1.TranscodeEncoding,atob$1=buffer$1.atob,btoa$1=buffer$1.btoa,constants$1=buffer$1.constants,isAscii=buffer$1.isAscii,isUtf8=buffer$1.isUtf8,kMaxLength=buffer$1.kMaxLength,kStringMaxLength=buffer$1.kStringMaxLength,resolveObjectURL=buffer$1.resolveObjectURL,transcode=buffer$1.transcode,dist=Object.freeze(Object.defineProperty({__proto__:null,Blob:Blob$1,BlobOptions,Buffer:Buffer$1,File,FileOptions,INSPECT_MAX_BYTES,SlowBuffer,TranscodeEncoding,atob:atob$1,btoa:btoa$1,constants:constants$1,default:Buffer,isAscii,isUtf8,kMaxLength,kStringMaxLength,resolveObjectURL,transcode},Symbol.toStringTag,{value:"Module"})),global$1=globalThis||void 0||self,getDefaultsFromPostinstall=()=>{};var define_process_env_default={};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const stringToByteArray$1=function(s){const e=[];let o=0;for(let a=0;a<s.length;a++){let d=s.charCodeAt(a);d<128?e[o++]=d:d<2048?(e[o++]=d>>6|192,e[o++]=d&63|128):(d&64512)===55296&&a+1<s.length&&(s.charCodeAt(a+1)&64512)===56320?(d=65536+((d&1023)<<10)+(s.charCodeAt(++a)&1023),e[o++]=d>>18|240,e[o++]=d>>12&63|128,e[o++]=d>>6&63|128,e[o++]=d&63|128):(e[o++]=d>>12|224,e[o++]=d>>6&63|128,e[o++]=d&63|128)}return e},byteArrayToString=function(s){const e=[];let o=0,a=0;for(;o<s.length;){const d=s[o++];if(d<128)e[a++]=String.fromCharCode(d);else if(d>191&&d<224){const c=s[o++];e[a++]=String.fromCharCode((d&31)<<6|c&63)}else if(d>239&&d<365){const c=s[o++],j=s[o++],_e=s[o++],pt=((d&7)<<18|(c&63)<<12|(j&63)<<6|_e&63)-65536;e[a++]=String.fromCharCode(55296+(pt>>10)),e[a++]=String.fromCharCode(56320+(pt&1023))}else{const c=s[o++],j=s[o++];e[a++]=String.fromCharCode((d&15)<<12|(c&63)<<6|j&63)}}return e.join("")},base64={byteToCharMap_:null,charToByteMap_:null,byteToCharMapWebSafe_:null,charToByteMapWebSafe_:null,ENCODED_VALS_BASE:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",get ENCODED_VALS(){return this.ENCODED_VALS_BASE+"+/="},get ENCODED_VALS_WEBSAFE(){return this.ENCODED_VALS_BASE+"-_."},HAS_NATIVE_SUPPORT:typeof atob=="function",encodeByteArray(s,e){if(!Array.isArray(s))throw Error("encodeByteArray takes an array as a parameter");this.init_();const o=e?this.byteToCharMapWebSafe_:this.byteToCharMap_,a=[];for(let d=0;d<s.length;d+=3){const c=s[d],j=d+1<s.length,_e=j?s[d+1]:0,pt=d+2<s.length,yt=pt?s[d+2]:0,ct=c>>2,Ct=(c&3)<<4|_e>>4;let qt=(_e&15)<<2|yt>>6,Ot=yt&63;pt||(Ot=64,j||(qt=64)),a.push(o[ct],o[Ct],o[qt],o[Ot])}return a.join("")},encodeString(s,e){return this.HAS_NATIVE_SUPPORT&&!e?btoa(s):this.encodeByteArray(stringToByteArray$1(s),e)},decodeString(s,e){return this.HAS_NATIVE_SUPPORT&&!e?atob(s):byteArrayToString(this.decodeStringToByteArray(s,e))},decodeStringToByteArray(s,e){this.init_();const o=e?this.charToByteMapWebSafe_:this.charToByteMap_,a=[];for(let d=0;d<s.length;){const c=o[s.charAt(d++)],_e=d<s.length?o[s.charAt(d)]:0;++d;const yt=d<s.length?o[s.charAt(d)]:64;++d;const Ct=d<s.length?o[s.charAt(d)]:64;if(++d,c==null||_e==null||yt==null||Ct==null)throw new DecodeBase64StringError;const qt=c<<2|_e>>4;if(a.push(qt),yt!==64){const Ot=_e<<4&240|yt>>2;if(a.push(Ot),Ct!==64){const Lt=yt<<6&192|Ct;a.push(Lt)}}}return a},init_(){if(!this.byteToCharMap_){this.byteToCharMap_={},this.charToByteMap_={},this.byteToCharMapWebSafe_={},this.charToByteMapWebSafe_={};for(let s=0;s<this.ENCODED_VALS.length;s++)this.byteToCharMap_[s]=this.ENCODED_VALS.charAt(s),this.charToByteMap_[this.byteToCharMap_[s]]=s,this.byteToCharMapWebSafe_[s]=this.ENCODED_VALS_WEBSAFE.charAt(s),this.charToByteMapWebSafe_[this.byteToCharMapWebSafe_[s]]=s,s>=this.ENCODED_VALS_BASE.length&&(this.charToByteMap_[this.ENCODED_VALS_WEBSAFE.charAt(s)]=s,this.charToByteMapWebSafe_[this.ENCODED_VALS.charAt(s)]=s)}}};class DecodeBase64StringError extends Error{constructor(){super(...arguments),this.name="DecodeBase64StringError"}}const base64Encode=function(s){const e=stringToByteArray$1(s);return base64.encodeByteArray(e,!0)},base64urlEncodeWithoutPadding=function(s){return base64Encode(s).replace(/\./g,"")},base64Decode=function(s){try{return base64.decodeString(s,!0)}catch(e){console.error("base64Decode failed: ",e)}return null};/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function getGlobal(){if(typeof self<"u")return self;if(typeof window<"u")return window;if(typeof global$1<"u")return global$1;throw new Error("Unable to locate global object.")}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const getDefaultsFromGlobal=()=>getGlobal().__FIREBASE_DEFAULTS__,getDefaultsFromEnvVariable=()=>{if(typeof process$1>"u"||typeof define_process_env_default>"u")return;const s=define_process_env_default.__FIREBASE_DEFAULTS__;if(s)return JSON.parse(s)},getDefaultsFromCookie=()=>{if(typeof document>"u")return;let s;try{s=document.cookie.match(/__FIREBASE_DEFAULTS__=([^;]+)/)}catch{return}const e=s&&base64Decode(s[1]);return e&&JSON.parse(e)},getDefaults=()=>{try{return getDefaultsFromPostinstall()||getDefaultsFromGlobal()||getDefaultsFromEnvVariable()||getDefaultsFromCookie()}catch(s){console.info(`Unable to get __FIREBASE_DEFAULTS__ due to: ${s}`);return}},getDefaultEmulatorHost=s=>{var e,o;return(o=(e=getDefaults())===null||e===void 0?void 0:e.emulatorHosts)===null||o===void 0?void 0:o[s]},getDefaultEmulatorHostnameAndPort=s=>{const e=getDefaultEmulatorHost(s);if(!e)return;const o=e.lastIndexOf(":");if(o<=0||o+1===e.length)throw new Error(`Invalid host ${e} with no separate hostname and port!`);const a=parseInt(e.substring(o+1),10);return e[0]==="["?[e.substring(1,o-1),a]:[e.substring(0,o),a]},getDefaultAppConfig=()=>{var s;return(s=getDefaults())===null||s===void 0?void 0:s.config},getExperimentalSetting=s=>{var e;return(e=getDefaults())===null||e===void 0?void 0:e[`_${s}`]};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Deferred{constructor(){this.reject=()=>{},this.resolve=()=>{},this.promise=new Promise((e,o)=>{this.resolve=e,this.reject=o})}wrapCallback(e){return(o,a)=>{o?this.reject(o):this.resolve(a),typeof e=="function"&&(this.promise.catch(()=>{}),e.length===1?e(o):e(o,a))}}}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function createMockUserToken(s,e){if(s.uid)throw new Error('The "uid" field is no longer supported by mockUserToken. Please use "sub" instead for Firebase Auth User ID.');const o={alg:"none",type:"JWT"},a=e||"demo-project",d=s.iat||0,c=s.sub||s.user_id;if(!c)throw new Error("mockUserToken must contain 'sub' or 'user_id' field!");const j=Object.assign({iss:`https://securetoken.google.com/${a}`,aud:a,iat:d,exp:d+3600,auth_time:d,sub:c,user_id:c,firebase:{sign_in_provider:"custom",identities:{}}},s);return[base64urlEncodeWithoutPadding(JSON.stringify(o)),base64urlEncodeWithoutPadding(JSON.stringify(j)),""].join(".")}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function getUA(){return typeof navigator<"u"&&typeof navigator.userAgent=="string"?navigator.userAgent:""}function isMobileCordova(){return typeof window<"u"&&!!(window.cordova||window.phonegap||window.PhoneGap)&&/ios|iphone|ipod|ipad|android|blackberry|iemobile/i.test(getUA())}function isNode(){var s;const e=(s=getDefaults())===null||s===void 0?void 0:s.forceEnvironment;if(e==="node")return!0;if(e==="browser")return!1;try{return Object.prototype.toString.call(global$1.process)==="[object process]"}catch{return!1}}function isCloudflareWorker(){return typeof navigator<"u"&&navigator.userAgent==="Cloudflare-Workers"}function isBrowserExtension(){const s=typeof chrome=="object"?chrome.runtime:typeof browser=="object"?browser.runtime:void 0;return typeof s=="object"&&s.id!==void 0}function isReactNative(){return typeof navigator=="object"&&navigator.product==="ReactNative"}function isIE(){const s=getUA();return s.indexOf("MSIE ")>=0||s.indexOf("Trident/")>=0}function isSafari(){return!isNode()&&!!navigator.userAgent&&navigator.userAgent.includes("Safari")&&!navigator.userAgent.includes("Chrome")}function isIndexedDBAvailable(){try{return typeof indexedDB=="object"}catch{return!1}}function validateIndexedDBOpenable(){return new Promise((s,e)=>{try{let o=!0;const a="validate-browser-context-for-indexeddb-analytics-module",d=self.indexedDB.open(a);d.onsuccess=()=>{d.result.close(),o||self.indexedDB.deleteDatabase(a),s(!0)},d.onupgradeneeded=()=>{o=!1},d.onerror=()=>{var c;e(((c=d.error)===null||c===void 0?void 0:c.message)||"")}}catch(o){e(o)}})}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const ERROR_NAME="FirebaseError";class FirebaseError extends Error{constructor(e,o,a){super(o),this.code=e,this.customData=a,this.name=ERROR_NAME,Object.setPrototypeOf(this,FirebaseError.prototype),Error.captureStackTrace&&Error.captureStackTrace(this,ErrorFactory.prototype.create)}}class ErrorFactory{constructor(e,o,a){this.service=e,this.serviceName=o,this.errors=a}create(e,...o){const a=o[0]||{},d=`${this.service}/${e}`,c=this.errors[e],j=c?replaceTemplate(c,a):"Error",_e=`${this.serviceName}: ${j} (${d}).`;return new FirebaseError(d,_e,a)}}function replaceTemplate(s,e){return s.replace(PATTERN,(o,a)=>{const d=e[a];return d!=null?String(d):`<${a}?>`})}const PATTERN=/\{\$([^}]+)}/g;function isEmpty$1(s){for(const e in s)if(Object.prototype.hasOwnProperty.call(s,e))return!1;return!0}function deepEqual(s,e){if(s===e)return!0;const o=Object.keys(s),a=Object.keys(e);for(const d of o){if(!a.includes(d))return!1;const c=s[d],j=e[d];if(isObject$1(c)&&isObject$1(j)){if(!deepEqual(c,j))return!1}else if(c!==j)return!1}for(const d of a)if(!o.includes(d))return!1;return!0}function isObject$1(s){return s!==null&&typeof s=="object"}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function querystring(s){const e=[];for(const[o,a]of Object.entries(s))Array.isArray(a)?a.forEach(d=>{e.push(encodeURIComponent(o)+"="+encodeURIComponent(d))}):e.push(encodeURIComponent(o)+"="+encodeURIComponent(a));return e.length?"&"+e.join("&"):""}function createSubscribe(s,e){const o=new ObserverProxy(s,e);return o.subscribe.bind(o)}class ObserverProxy{constructor(e,o){this.observers=[],this.unsubscribes=[],this.observerCount=0,this.task=Promise.resolve(),this.finalized=!1,this.onNoObservers=o,this.task.then(()=>{e(this)}).catch(a=>{this.error(a)})}next(e){this.forEachObserver(o=>{o.next(e)})}error(e){this.forEachObserver(o=>{o.error(e)}),this.close(e)}complete(){this.forEachObserver(e=>{e.complete()}),this.close()}subscribe(e,o,a){let d;if(e===void 0&&o===void 0&&a===void 0)throw new Error("Missing Observer.");implementsAnyMethods(e,["next","error","complete"])?d=e:d={next:e,error:o,complete:a},d.next===void 0&&(d.next=noop),d.error===void 0&&(d.error=noop),d.complete===void 0&&(d.complete=noop);const c=this.unsubscribeOne.bind(this,this.observers.length);return this.finalized&&this.task.then(()=>{try{this.finalError?d.error(this.finalError):d.complete()}catch{}}),this.observers.push(d),c}unsubscribeOne(e){this.observers===void 0||this.observers[e]===void 0||(delete this.observers[e],this.observerCount-=1,this.observerCount===0&&this.onNoObservers!==void 0&&this.onNoObservers(this))}forEachObserver(e){if(!this.finalized)for(let o=0;o<this.observers.length;o++)this.sendOne(o,e)}sendOne(e,o){this.task.then(()=>{if(this.observers!==void 0&&this.observers[e]!==void 0)try{o(this.observers[e])}catch(a){typeof console<"u"&&console.error&&console.error(a)}})}close(e){this.finalized||(this.finalized=!0,e!==void 0&&(this.finalError=e),this.task.then(()=>{this.observers=void 0,this.onNoObservers=void 0}))}}function implementsAnyMethods(s,e){if(typeof s!="object"||s===null)return!1;for(const o of e)if(o in s&&typeof s[o]=="function")return!0;return!1}function noop(){}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function getModularInstance(s){return s&&s._delegate?s._delegate:s}class Component{constructor(e,o,a){this.name=e,this.instanceFactory=o,this.type=a,this.multipleInstances=!1,this.serviceProps={},this.instantiationMode="LAZY",this.onInstanceCreated=null}setInstantiationMode(e){return this.instantiationMode=e,this}setMultipleInstances(e){return this.multipleInstances=e,this}setServiceProps(e){return this.serviceProps=e,this}setInstanceCreatedCallback(e){return this.onInstanceCreated=e,this}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const DEFAULT_ENTRY_NAME$1="[DEFAULT]";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Provider{constructor(e,o){this.name=e,this.container=o,this.component=null,this.instances=new Map,this.instancesDeferred=new Map,this.instancesOptions=new Map,this.onInitCallbacks=new Map}get(e){const o=this.normalizeInstanceIdentifier(e);if(!this.instancesDeferred.has(o)){const a=new Deferred;if(this.instancesDeferred.set(o,a),this.isInitialized(o)||this.shouldAutoInitialize())try{const d=this.getOrInitializeService({instanceIdentifier:o});d&&a.resolve(d)}catch{}}return this.instancesDeferred.get(o).promise}getImmediate(e){var o;const a=this.normalizeInstanceIdentifier(e==null?void 0:e.identifier),d=(o=e==null?void 0:e.optional)!==null&&o!==void 0?o:!1;if(this.isInitialized(a)||this.shouldAutoInitialize())try{return this.getOrInitializeService({instanceIdentifier:a})}catch(c){if(d)return null;throw c}else{if(d)return null;throw Error(`Service ${this.name} is not available`)}}getComponent(){return this.component}setComponent(e){if(e.name!==this.name)throw Error(`Mismatching Component ${e.name} for Provider ${this.name}.`);if(this.component)throw Error(`Component for ${this.name} has already been provided`);if(this.component=e,!!this.shouldAutoInitialize()){if(isComponentEager(e))try{this.getOrInitializeService({instanceIdentifier:DEFAULT_ENTRY_NAME$1})}catch{}for(const[o,a]of this.instancesDeferred.entries()){const d=this.normalizeInstanceIdentifier(o);try{const c=this.getOrInitializeService({instanceIdentifier:d});a.resolve(c)}catch{}}}}clearInstance(e=DEFAULT_ENTRY_NAME$1){this.instancesDeferred.delete(e),this.instancesOptions.delete(e),this.instances.delete(e)}async delete(){const e=Array.from(this.instances.values());await Promise.all([...e.filter(o=>"INTERNAL"in o).map(o=>o.INTERNAL.delete()),...e.filter(o=>"_delete"in o).map(o=>o._delete())])}isComponentSet(){return this.component!=null}isInitialized(e=DEFAULT_ENTRY_NAME$1){return this.instances.has(e)}getOptions(e=DEFAULT_ENTRY_NAME$1){return this.instancesOptions.get(e)||{}}initialize(e={}){const{options:o={}}=e,a=this.normalizeInstanceIdentifier(e.instanceIdentifier);if(this.isInitialized(a))throw Error(`${this.name}(${a}) has already been initialized`);if(!this.isComponentSet())throw Error(`Component ${this.name} has not been registered yet`);const d=this.getOrInitializeService({instanceIdentifier:a,options:o});for(const[c,j]of this.instancesDeferred.entries()){const _e=this.normalizeInstanceIdentifier(c);a===_e&&j.resolve(d)}return d}onInit(e,o){var a;const d=this.normalizeInstanceIdentifier(o),c=(a=this.onInitCallbacks.get(d))!==null&&a!==void 0?a:new Set;c.add(e),this.onInitCallbacks.set(d,c);const j=this.instances.get(d);return j&&e(j,d),()=>{c.delete(e)}}invokeOnInitCallbacks(e,o){const a=this.onInitCallbacks.get(o);if(a)for(const d of a)try{d(e,o)}catch{}}getOrInitializeService({instanceIdentifier:e,options:o={}}){let a=this.instances.get(e);if(!a&&this.component&&(a=this.component.instanceFactory(this.container,{instanceIdentifier:normalizeIdentifierForFactory(e),options:o}),this.instances.set(e,a),this.instancesOptions.set(e,o),this.invokeOnInitCallbacks(a,e),this.component.onInstanceCreated))try{this.component.onInstanceCreated(this.container,e,a)}catch{}return a||null}normalizeInstanceIdentifier(e=DEFAULT_ENTRY_NAME$1){return this.component?this.component.multipleInstances?e:DEFAULT_ENTRY_NAME$1:e}shouldAutoInitialize(){return!!this.component&&this.component.instantiationMode!=="EXPLICIT"}}function normalizeIdentifierForFactory(s){return s===DEFAULT_ENTRY_NAME$1?void 0:s}function isComponentEager(s){return s.instantiationMode==="EAGER"}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ComponentContainer{constructor(e){this.name=e,this.providers=new Map}addComponent(e){const o=this.getProvider(e.name);if(o.isComponentSet())throw new Error(`Component ${e.name} has already been registered with ${this.name}`);o.setComponent(e)}addOrOverwriteComponent(e){this.getProvider(e.name).isComponentSet()&&this.providers.delete(e.name),this.addComponent(e)}getProvider(e){if(this.providers.has(e))return this.providers.get(e);const o=new Provider(e,this);return this.providers.set(e,o),o}getProviders(){return Array.from(this.providers.values())}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var LogLevel;(function(s){s[s.DEBUG=0]="DEBUG",s[s.VERBOSE=1]="VERBOSE",s[s.INFO=2]="INFO",s[s.WARN=3]="WARN",s[s.ERROR=4]="ERROR",s[s.SILENT=5]="SILENT"})(LogLevel||(LogLevel={}));const levelStringToEnum={debug:LogLevel.DEBUG,verbose:LogLevel.VERBOSE,info:LogLevel.INFO,warn:LogLevel.WARN,error:LogLevel.ERROR,silent:LogLevel.SILENT},defaultLogLevel=LogLevel.INFO,ConsoleMethod={[LogLevel.DEBUG]:"log",[LogLevel.VERBOSE]:"log",[LogLevel.INFO]:"info",[LogLevel.WARN]:"warn",[LogLevel.ERROR]:"error"},defaultLogHandler=(s,e,...o)=>{if(e<s.logLevel)return;const a=new Date().toISOString(),d=ConsoleMethod[e];if(d)console[d](`[${a}]  ${s.name}:`,...o);else throw new Error(`Attempted to log a message with an invalid logType (value: ${e})`)};class Logger{constructor(e){this.name=e,this._logLevel=defaultLogLevel,this._logHandler=defaultLogHandler,this._userLogHandler=null}get logLevel(){return this._logLevel}set logLevel(e){if(!(e in LogLevel))throw new TypeError(`Invalid value "${e}" assigned to \`logLevel\``);this._logLevel=e}setLogLevel(e){this._logLevel=typeof e=="string"?levelStringToEnum[e]:e}get logHandler(){return this._logHandler}set logHandler(e){if(typeof e!="function")throw new TypeError("Value assigned to `logHandler` must be a function");this._logHandler=e}get userLogHandler(){return this._userLogHandler}set userLogHandler(e){this._userLogHandler=e}debug(...e){this._userLogHandler&&this._userLogHandler(this,LogLevel.DEBUG,...e),this._logHandler(this,LogLevel.DEBUG,...e)}log(...e){this._userLogHandler&&this._userLogHandler(this,LogLevel.VERBOSE,...e),this._logHandler(this,LogLevel.VERBOSE,...e)}info(...e){this._userLogHandler&&this._userLogHandler(this,LogLevel.INFO,...e),this._logHandler(this,LogLevel.INFO,...e)}warn(...e){this._userLogHandler&&this._userLogHandler(this,LogLevel.WARN,...e),this._logHandler(this,LogLevel.WARN,...e)}error(...e){this._userLogHandler&&this._userLogHandler(this,LogLevel.ERROR,...e),this._logHandler(this,LogLevel.ERROR,...e)}}const instanceOfAny=(s,e)=>e.some(o=>s instanceof o);let idbProxyableTypes,cursorAdvanceMethods;function getIdbProxyableTypes(){return idbProxyableTypes||(idbProxyableTypes=[IDBDatabase,IDBObjectStore,IDBIndex,IDBCursor,IDBTransaction])}function getCursorAdvanceMethods(){return cursorAdvanceMethods||(cursorAdvanceMethods=[IDBCursor.prototype.advance,IDBCursor.prototype.continue,IDBCursor.prototype.continuePrimaryKey])}const cursorRequestMap=new WeakMap,transactionDoneMap=new WeakMap,transactionStoreNamesMap=new WeakMap,transformCache=new WeakMap,reverseTransformCache=new WeakMap;function promisifyRequest(s){const e=new Promise((o,a)=>{const d=()=>{s.removeEventListener("success",c),s.removeEventListener("error",j)},c=()=>{o(wrap(s.result)),d()},j=()=>{a(s.error),d()};s.addEventListener("success",c),s.addEventListener("error",j)});return e.then(o=>{o instanceof IDBCursor&&cursorRequestMap.set(o,s)}).catch(()=>{}),reverseTransformCache.set(e,s),e}function cacheDonePromiseForTransaction(s){if(transactionDoneMap.has(s))return;const e=new Promise((o,a)=>{const d=()=>{s.removeEventListener("complete",c),s.removeEventListener("error",j),s.removeEventListener("abort",j)},c=()=>{o(),d()},j=()=>{a(s.error||new DOMException("AbortError","AbortError")),d()};s.addEventListener("complete",c),s.addEventListener("error",j),s.addEventListener("abort",j)});transactionDoneMap.set(s,e)}let idbProxyTraps={get(s,e,o){if(s instanceof IDBTransaction){if(e==="done")return transactionDoneMap.get(s);if(e==="objectStoreNames")return s.objectStoreNames||transactionStoreNamesMap.get(s);if(e==="store")return o.objectStoreNames[1]?void 0:o.objectStore(o.objectStoreNames[0])}return wrap(s[e])},set(s,e,o){return s[e]=o,!0},has(s,e){return s instanceof IDBTransaction&&(e==="done"||e==="store")?!0:e in s}};function replaceTraps(s){idbProxyTraps=s(idbProxyTraps)}function wrapFunction(s){return s===IDBDatabase.prototype.transaction&&!("objectStoreNames"in IDBTransaction.prototype)?function(e,...o){const a=s.call(unwrap(this),e,...o);return transactionStoreNamesMap.set(a,e.sort?e.sort():[e]),wrap(a)}:getCursorAdvanceMethods().includes(s)?function(...e){return s.apply(unwrap(this),e),wrap(cursorRequestMap.get(this))}:function(...e){return wrap(s.apply(unwrap(this),e))}}function transformCachableValue(s){return typeof s=="function"?wrapFunction(s):(s instanceof IDBTransaction&&cacheDonePromiseForTransaction(s),instanceOfAny(s,getIdbProxyableTypes())?new Proxy(s,idbProxyTraps):s)}function wrap(s){if(s instanceof IDBRequest)return promisifyRequest(s);if(transformCache.has(s))return transformCache.get(s);const e=transformCachableValue(s);return e!==s&&(transformCache.set(s,e),reverseTransformCache.set(e,s)),e}const unwrap=s=>reverseTransformCache.get(s);function openDB(s,e,{blocked:o,upgrade:a,blocking:d,terminated:c}={}){const j=indexedDB.open(s,e),_e=wrap(j);return a&&j.addEventListener("upgradeneeded",pt=>{a(wrap(j.result),pt.oldVersion,pt.newVersion,wrap(j.transaction),pt)}),o&&j.addEventListener("blocked",pt=>o(pt.oldVersion,pt.newVersion,pt)),_e.then(pt=>{c&&pt.addEventListener("close",()=>c()),d&&pt.addEventListener("versionchange",yt=>d(yt.oldVersion,yt.newVersion,yt))}).catch(()=>{}),_e}const readMethods=["get","getKey","getAll","getAllKeys","count"],writeMethods=["put","add","delete","clear"],cachedMethods=new Map;function getMethod(s,e){if(!(s instanceof IDBDatabase&&!(e in s)&&typeof e=="string"))return;if(cachedMethods.get(e))return cachedMethods.get(e);const o=e.replace(/FromIndex$/,""),a=e!==o,d=writeMethods.includes(o);if(!(o in(a?IDBIndex:IDBObjectStore).prototype)||!(d||readMethods.includes(o)))return;const c=async function(j,..._e){const pt=this.transaction(j,d?"readwrite":"readonly");let yt=pt.store;return a&&(yt=yt.index(_e.shift())),(await Promise.all([yt[o](..._e),d&&pt.done]))[0]};return cachedMethods.set(e,c),c}replaceTraps(s=>({...s,get:(e,o,a)=>getMethod(e,o)||s.get(e,o,a),has:(e,o)=>!!getMethod(e,o)||s.has(e,o)}));/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class PlatformLoggerServiceImpl{constructor(e){this.container=e}getPlatformInfoString(){return this.container.getProviders().map(o=>{if(isVersionServiceProvider(o)){const a=o.getImmediate();return`${a.library}/${a.version}`}else return null}).filter(o=>o).join(" ")}}function isVersionServiceProvider(s){const e=s.getComponent();return(e==null?void 0:e.type)==="VERSION"}const name$q="@firebase/app",version$1$1="0.11.5";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const logger=new Logger("@firebase/app"),name$p="@firebase/app-compat",name$o="@firebase/analytics-compat",name$n="@firebase/analytics",name$m="@firebase/app-check-compat",name$l="@firebase/app-check",name$k="@firebase/auth",name$j="@firebase/auth-compat",name$i="@firebase/database",name$h="@firebase/data-connect",name$g="@firebase/database-compat",name$f="@firebase/functions",name$e="@firebase/functions-compat",name$d="@firebase/installations",name$c="@firebase/installations-compat",name$b="@firebase/messaging",name$a="@firebase/messaging-compat",name$9="@firebase/performance",name$8="@firebase/performance-compat",name$7="@firebase/remote-config",name$6="@firebase/remote-config-compat",name$5="@firebase/storage",name$4="@firebase/storage-compat",name$3="@firebase/firestore",name$2$1="@firebase/vertexai",name$1$1="@firebase/firestore-compat",name$r="firebase",version$4="11.6.1";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const DEFAULT_ENTRY_NAME="[DEFAULT]",PLATFORM_LOG_STRING={[name$q]:"fire-core",[name$p]:"fire-core-compat",[name$n]:"fire-analytics",[name$o]:"fire-analytics-compat",[name$l]:"fire-app-check",[name$m]:"fire-app-check-compat",[name$k]:"fire-auth",[name$j]:"fire-auth-compat",[name$i]:"fire-rtdb",[name$h]:"fire-data-connect",[name$g]:"fire-rtdb-compat",[name$f]:"fire-fn",[name$e]:"fire-fn-compat",[name$d]:"fire-iid",[name$c]:"fire-iid-compat",[name$b]:"fire-fcm",[name$a]:"fire-fcm-compat",[name$9]:"fire-perf",[name$8]:"fire-perf-compat",[name$7]:"fire-rc",[name$6]:"fire-rc-compat",[name$5]:"fire-gcs",[name$4]:"fire-gcs-compat",[name$3]:"fire-fst",[name$1$1]:"fire-fst-compat",[name$2$1]:"fire-vertex","fire-js":"fire-js",[name$r]:"fire-js-all"};/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const _apps=new Map,_serverApps=new Map,_components=new Map;function _addComponent(s,e){try{s.container.addComponent(e)}catch(o){logger.debug(`Component ${e.name} failed to register with FirebaseApp ${s.name}`,o)}}function _registerComponent(s){const e=s.name;if(_components.has(e))return logger.debug(`There were multiple attempts to register component ${e}.`),!1;_components.set(e,s);for(const o of _apps.values())_addComponent(o,s);for(const o of _serverApps.values())_addComponent(o,s);return!0}function _getProvider(s,e){const o=s.container.getProvider("heartbeat").getImmediate({optional:!0});return o&&o.triggerHeartbeat(),s.container.getProvider(e)}function _isFirebaseServerApp(s){return s==null?!1:s.settings!==void 0}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const ERRORS={"no-app":"No Firebase App '{$appName}' has been created - call initializeApp() first","bad-app-name":"Illegal App name: '{$appName}'","duplicate-app":"Firebase App named '{$appName}' already exists with different options or config","app-deleted":"Firebase App named '{$appName}' already deleted","server-app-deleted":"Firebase Server App has been deleted","no-options":"Need to provide options, when not being deployed to hosting via source.","invalid-app-argument":"firebase.{$appName}() takes either no argument or a Firebase App instance.","invalid-log-argument":"First argument to `onLog` must be null or a function.","idb-open":"Error thrown when opening IndexedDB. Original error: {$originalErrorMessage}.","idb-get":"Error thrown when reading from IndexedDB. Original error: {$originalErrorMessage}.","idb-set":"Error thrown when writing to IndexedDB. Original error: {$originalErrorMessage}.","idb-delete":"Error thrown when deleting from IndexedDB. Original error: {$originalErrorMessage}.","finalization-registry-not-supported":"FirebaseServerApp deleteOnDeref field defined but the JS runtime does not support FinalizationRegistry.","invalid-server-app-environment":"FirebaseServerApp is not for use in browser environments."},ERROR_FACTORY=new ErrorFactory("app","Firebase",ERRORS);/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class FirebaseAppImpl{constructor(e,o,a){this._isDeleted=!1,this._options=Object.assign({},e),this._config=Object.assign({},o),this._name=o.name,this._automaticDataCollectionEnabled=o.automaticDataCollectionEnabled,this._container=a,this.container.addComponent(new Component("app",()=>this,"PUBLIC"))}get automaticDataCollectionEnabled(){return this.checkDestroyed(),this._automaticDataCollectionEnabled}set automaticDataCollectionEnabled(e){this.checkDestroyed(),this._automaticDataCollectionEnabled=e}get name(){return this.checkDestroyed(),this._name}get options(){return this.checkDestroyed(),this._options}get config(){return this.checkDestroyed(),this._config}get container(){return this._container}get isDeleted(){return this._isDeleted}set isDeleted(e){this._isDeleted=e}checkDestroyed(){if(this.isDeleted)throw ERROR_FACTORY.create("app-deleted",{appName:this._name})}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const SDK_VERSION=version$4;function initializeApp(s,e={}){let o=s;typeof e!="object"&&(e={name:e});const a=Object.assign({name:DEFAULT_ENTRY_NAME,automaticDataCollectionEnabled:!1},e),d=a.name;if(typeof d!="string"||!d)throw ERROR_FACTORY.create("bad-app-name",{appName:String(d)});if(o||(o=getDefaultAppConfig()),!o)throw ERROR_FACTORY.create("no-options");const c=_apps.get(d);if(c){if(deepEqual(o,c.options)&&deepEqual(a,c.config))return c;throw ERROR_FACTORY.create("duplicate-app",{appName:d})}const j=new ComponentContainer(d);for(const pt of _components.values())j.addComponent(pt);const _e=new FirebaseAppImpl(o,a,j);return _apps.set(d,_e),_e}function getApp(s=DEFAULT_ENTRY_NAME){const e=_apps.get(s);if(!e&&s===DEFAULT_ENTRY_NAME&&getDefaultAppConfig())return initializeApp();if(!e)throw ERROR_FACTORY.create("no-app",{appName:s});return e}function registerVersion(s,e,o){var a;let d=(a=PLATFORM_LOG_STRING[s])!==null&&a!==void 0?a:s;o&&(d+=`-${o}`);const c=d.match(/\s|\//),j=e.match(/\s|\//);if(c||j){const _e=[`Unable to register library "${d}" with version "${e}":`];c&&_e.push(`library name "${d}" contains illegal characters (whitespace or "/")`),c&&j&&_e.push("and"),j&&_e.push(`version name "${e}" contains illegal characters (whitespace or "/")`),logger.warn(_e.join(" "));return}_registerComponent(new Component(`${d}-version`,()=>({library:d,version:e}),"VERSION"))}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const DB_NAME$1="firebase-heartbeat-database",DB_VERSION$1=1,STORE_NAME="firebase-heartbeat-store";let dbPromise=null;function getDbPromise(){return dbPromise||(dbPromise=openDB(DB_NAME$1,DB_VERSION$1,{upgrade:(s,e)=>{switch(e){case 0:try{s.createObjectStore(STORE_NAME)}catch(o){console.warn(o)}}}}).catch(s=>{throw ERROR_FACTORY.create("idb-open",{originalErrorMessage:s.message})})),dbPromise}async function readHeartbeatsFromIndexedDB(s){try{const o=(await getDbPromise()).transaction(STORE_NAME),a=await o.objectStore(STORE_NAME).get(computeKey(s));return await o.done,a}catch(e){if(e instanceof FirebaseError)logger.warn(e.message);else{const o=ERROR_FACTORY.create("idb-get",{originalErrorMessage:e==null?void 0:e.message});logger.warn(o.message)}}}async function writeHeartbeatsToIndexedDB(s,e){try{const a=(await getDbPromise()).transaction(STORE_NAME,"readwrite");await a.objectStore(STORE_NAME).put(e,computeKey(s)),await a.done}catch(o){if(o instanceof FirebaseError)logger.warn(o.message);else{const a=ERROR_FACTORY.create("idb-set",{originalErrorMessage:o==null?void 0:o.message});logger.warn(a.message)}}}function computeKey(s){return`${s.name}!${s.options.appId}`}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const MAX_HEADER_BYTES=1024,MAX_NUM_STORED_HEARTBEATS=30;class HeartbeatServiceImpl{constructor(e){this.container=e,this._heartbeatsCache=null;const o=this.container.getProvider("app").getImmediate();this._storage=new HeartbeatStorageImpl(o),this._heartbeatsCachePromise=this._storage.read().then(a=>(this._heartbeatsCache=a,a))}async triggerHeartbeat(){var e,o;try{const d=this.container.getProvider("platform-logger").getImmediate().getPlatformInfoString(),c=getUTCDateString();if(((e=this._heartbeatsCache)===null||e===void 0?void 0:e.heartbeats)==null&&(this._heartbeatsCache=await this._heartbeatsCachePromise,((o=this._heartbeatsCache)===null||o===void 0?void 0:o.heartbeats)==null)||this._heartbeatsCache.lastSentHeartbeatDate===c||this._heartbeatsCache.heartbeats.some(j=>j.date===c))return;if(this._heartbeatsCache.heartbeats.push({date:c,agent:d}),this._heartbeatsCache.heartbeats.length>MAX_NUM_STORED_HEARTBEATS){const j=getEarliestHeartbeatIdx(this._heartbeatsCache.heartbeats);this._heartbeatsCache.heartbeats.splice(j,1)}return this._storage.overwrite(this._heartbeatsCache)}catch(a){logger.warn(a)}}async getHeartbeatsHeader(){var e;try{if(this._heartbeatsCache===null&&await this._heartbeatsCachePromise,((e=this._heartbeatsCache)===null||e===void 0?void 0:e.heartbeats)==null||this._heartbeatsCache.heartbeats.length===0)return"";const o=getUTCDateString(),{heartbeatsToSend:a,unsentEntries:d}=extractHeartbeatsForHeader(this._heartbeatsCache.heartbeats),c=base64urlEncodeWithoutPadding(JSON.stringify({version:2,heartbeats:a}));return this._heartbeatsCache.lastSentHeartbeatDate=o,d.length>0?(this._heartbeatsCache.heartbeats=d,await this._storage.overwrite(this._heartbeatsCache)):(this._heartbeatsCache.heartbeats=[],this._storage.overwrite(this._heartbeatsCache)),c}catch(o){return logger.warn(o),""}}}function getUTCDateString(){return new Date().toISOString().substring(0,10)}function extractHeartbeatsForHeader(s,e=MAX_HEADER_BYTES){const o=[];let a=s.slice();for(const d of s){const c=o.find(j=>j.agent===d.agent);if(c){if(c.dates.push(d.date),countBytes(o)>e){c.dates.pop();break}}else if(o.push({agent:d.agent,dates:[d.date]}),countBytes(o)>e){o.pop();break}a=a.slice(1)}return{heartbeatsToSend:o,unsentEntries:a}}class HeartbeatStorageImpl{constructor(e){this.app=e,this._canUseIndexedDBPromise=this.runIndexedDBEnvironmentCheck()}async runIndexedDBEnvironmentCheck(){return isIndexedDBAvailable()?validateIndexedDBOpenable().then(()=>!0).catch(()=>!1):!1}async read(){if(await this._canUseIndexedDBPromise){const o=await readHeartbeatsFromIndexedDB(this.app);return o!=null&&o.heartbeats?o:{heartbeats:[]}}else return{heartbeats:[]}}async overwrite(e){var o;if(await this._canUseIndexedDBPromise){const d=await this.read();return writeHeartbeatsToIndexedDB(this.app,{lastSentHeartbeatDate:(o=e.lastSentHeartbeatDate)!==null&&o!==void 0?o:d.lastSentHeartbeatDate,heartbeats:e.heartbeats})}else return}async add(e){var o;if(await this._canUseIndexedDBPromise){const d=await this.read();return writeHeartbeatsToIndexedDB(this.app,{lastSentHeartbeatDate:(o=e.lastSentHeartbeatDate)!==null&&o!==void 0?o:d.lastSentHeartbeatDate,heartbeats:[...d.heartbeats,...e.heartbeats]})}else return}}function countBytes(s){return base64urlEncodeWithoutPadding(JSON.stringify({version:2,heartbeats:s})).length}function getEarliestHeartbeatIdx(s){if(s.length===0)return-1;let e=0,o=s[0].date;for(let a=1;a<s.length;a++)s[a].date<o&&(o=s[a].date,e=a);return e}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function registerCoreComponents(s){_registerComponent(new Component("platform-logger",e=>new PlatformLoggerServiceImpl(e),"PRIVATE")),_registerComponent(new Component("heartbeat",e=>new HeartbeatServiceImpl(e),"PRIVATE")),registerVersion(name$q,version$1$1,s),registerVersion(name$q,version$1$1,"esm2017"),registerVersion("fire-js","")}registerCoreComponents("");var commonjsGlobal$1=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global$1<"u"?global$1:typeof self<"u"?self:{};/** @license
Copyright The Closure Library Authors.
SPDX-License-Identifier: Apache-2.0
*/var Integer,Md5;(function(){var s;/** @license

 Copyright The Closure Library Authors.
 SPDX-License-Identifier: Apache-2.0
*/function e(dr,ur){function lr(){}lr.prototype=ur.prototype,dr.D=ur.prototype,dr.prototype=new lr,dr.prototype.constructor=dr,dr.C=function(gr,Mt,h){for(var _=Array(arguments.length-2),b=2;b<arguments.length;b++)_[b-2]=arguments[b];return ur.prototype[Mt].apply(gr,_)}}function o(){this.blockSize=-1}function a(){this.blockSize=-1,this.blockSize=64,this.g=Array(4),this.B=Array(this.blockSize),this.o=this.h=0,this.s()}e(a,o),a.prototype.s=function(){this.g[0]=1732584193,this.g[1]=4023233417,this.g[2]=2562383102,this.g[3]=271733878,this.o=this.h=0};function d(dr,ur,lr){lr||(lr=0);var gr=Array(16);if(typeof ur=="string")for(var Mt=0;16>Mt;++Mt)gr[Mt]=ur.charCodeAt(lr++)|ur.charCodeAt(lr++)<<8|ur.charCodeAt(lr++)<<16|ur.charCodeAt(lr++)<<24;else for(Mt=0;16>Mt;++Mt)gr[Mt]=ur[lr++]|ur[lr++]<<8|ur[lr++]<<16|ur[lr++]<<24;ur=dr.g[0],lr=dr.g[1],Mt=dr.g[2];var h=dr.g[3],_=ur+(h^lr&(Mt^h))+gr[0]+3614090360&4294967295;ur=lr+(_<<7&4294967295|_>>>25),_=h+(Mt^ur&(lr^Mt))+gr[1]+3905402710&4294967295,h=ur+(_<<12&4294967295|_>>>20),_=Mt+(lr^h&(ur^lr))+gr[2]+606105819&4294967295,Mt=h+(_<<17&4294967295|_>>>15),_=lr+(ur^Mt&(h^ur))+gr[3]+3250441966&4294967295,lr=Mt+(_<<22&4294967295|_>>>10),_=ur+(h^lr&(Mt^h))+gr[4]+4118548399&4294967295,ur=lr+(_<<7&4294967295|_>>>25),_=h+(Mt^ur&(lr^Mt))+gr[5]+1200080426&4294967295,h=ur+(_<<12&4294967295|_>>>20),_=Mt+(lr^h&(ur^lr))+gr[6]+2821735955&4294967295,Mt=h+(_<<17&4294967295|_>>>15),_=lr+(ur^Mt&(h^ur))+gr[7]+4249261313&4294967295,lr=Mt+(_<<22&4294967295|_>>>10),_=ur+(h^lr&(Mt^h))+gr[8]+1770035416&4294967295,ur=lr+(_<<7&4294967295|_>>>25),_=h+(Mt^ur&(lr^Mt))+gr[9]+2336552879&4294967295,h=ur+(_<<12&4294967295|_>>>20),_=Mt+(lr^h&(ur^lr))+gr[10]+4294925233&4294967295,Mt=h+(_<<17&4294967295|_>>>15),_=lr+(ur^Mt&(h^ur))+gr[11]+2304563134&4294967295,lr=Mt+(_<<22&4294967295|_>>>10),_=ur+(h^lr&(Mt^h))+gr[12]+1804603682&4294967295,ur=lr+(_<<7&4294967295|_>>>25),_=h+(Mt^ur&(lr^Mt))+gr[13]+4254626195&4294967295,h=ur+(_<<12&4294967295|_>>>20),_=Mt+(lr^h&(ur^lr))+gr[14]+2792965006&4294967295,Mt=h+(_<<17&4294967295|_>>>15),_=lr+(ur^Mt&(h^ur))+gr[15]+1236535329&4294967295,lr=Mt+(_<<22&4294967295|_>>>10),_=ur+(Mt^h&(lr^Mt))+gr[1]+4129170786&4294967295,ur=lr+(_<<5&4294967295|_>>>27),_=h+(lr^Mt&(ur^lr))+gr[6]+3225465664&4294967295,h=ur+(_<<9&4294967295|_>>>23),_=Mt+(ur^lr&(h^ur))+gr[11]+643717713&4294967295,Mt=h+(_<<14&4294967295|_>>>18),_=lr+(h^ur&(Mt^h))+gr[0]+3921069994&4294967295,lr=Mt+(_<<20&4294967295|_>>>12),_=ur+(Mt^h&(lr^Mt))+gr[5]+3593408605&4294967295,ur=lr+(_<<5&4294967295|_>>>27),_=h+(lr^Mt&(ur^lr))+gr[10]+38016083&4294967295,h=ur+(_<<9&4294967295|_>>>23),_=Mt+(ur^lr&(h^ur))+gr[15]+3634488961&4294967295,Mt=h+(_<<14&4294967295|_>>>18),_=lr+(h^ur&(Mt^h))+gr[4]+3889429448&4294967295,lr=Mt+(_<<20&4294967295|_>>>12),_=ur+(Mt^h&(lr^Mt))+gr[9]+568446438&4294967295,ur=lr+(_<<5&4294967295|_>>>27),_=h+(lr^Mt&(ur^lr))+gr[14]+3275163606&4294967295,h=ur+(_<<9&4294967295|_>>>23),_=Mt+(ur^lr&(h^ur))+gr[3]+4107603335&4294967295,Mt=h+(_<<14&4294967295|_>>>18),_=lr+(h^ur&(Mt^h))+gr[8]+1163531501&4294967295,lr=Mt+(_<<20&4294967295|_>>>12),_=ur+(Mt^h&(lr^Mt))+gr[13]+2850285829&4294967295,ur=lr+(_<<5&4294967295|_>>>27),_=h+(lr^Mt&(ur^lr))+gr[2]+4243563512&4294967295,h=ur+(_<<9&4294967295|_>>>23),_=Mt+(ur^lr&(h^ur))+gr[7]+1735328473&4294967295,Mt=h+(_<<14&4294967295|_>>>18),_=lr+(h^ur&(Mt^h))+gr[12]+2368359562&4294967295,lr=Mt+(_<<20&4294967295|_>>>12),_=ur+(lr^Mt^h)+gr[5]+4294588738&4294967295,ur=lr+(_<<4&4294967295|_>>>28),_=h+(ur^lr^Mt)+gr[8]+2272392833&4294967295,h=ur+(_<<11&4294967295|_>>>21),_=Mt+(h^ur^lr)+gr[11]+1839030562&4294967295,Mt=h+(_<<16&4294967295|_>>>16),_=lr+(Mt^h^ur)+gr[14]+4259657740&4294967295,lr=Mt+(_<<23&4294967295|_>>>9),_=ur+(lr^Mt^h)+gr[1]+2763975236&4294967295,ur=lr+(_<<4&4294967295|_>>>28),_=h+(ur^lr^Mt)+gr[4]+1272893353&4294967295,h=ur+(_<<11&4294967295|_>>>21),_=Mt+(h^ur^lr)+gr[7]+4139469664&4294967295,Mt=h+(_<<16&4294967295|_>>>16),_=lr+(Mt^h^ur)+gr[10]+3200236656&4294967295,lr=Mt+(_<<23&4294967295|_>>>9),_=ur+(lr^Mt^h)+gr[13]+681279174&4294967295,ur=lr+(_<<4&4294967295|_>>>28),_=h+(ur^lr^Mt)+gr[0]+3936430074&4294967295,h=ur+(_<<11&4294967295|_>>>21),_=Mt+(h^ur^lr)+gr[3]+3572445317&4294967295,Mt=h+(_<<16&4294967295|_>>>16),_=lr+(Mt^h^ur)+gr[6]+76029189&4294967295,lr=Mt+(_<<23&4294967295|_>>>9),_=ur+(lr^Mt^h)+gr[9]+3654602809&4294967295,ur=lr+(_<<4&4294967295|_>>>28),_=h+(ur^lr^Mt)+gr[12]+3873151461&4294967295,h=ur+(_<<11&4294967295|_>>>21),_=Mt+(h^ur^lr)+gr[15]+530742520&4294967295,Mt=h+(_<<16&4294967295|_>>>16),_=lr+(Mt^h^ur)+gr[2]+3299628645&4294967295,lr=Mt+(_<<23&4294967295|_>>>9),_=ur+(Mt^(lr|~h))+gr[0]+4096336452&4294967295,ur=lr+(_<<6&4294967295|_>>>26),_=h+(lr^(ur|~Mt))+gr[7]+1126891415&4294967295,h=ur+(_<<10&4294967295|_>>>22),_=Mt+(ur^(h|~lr))+gr[14]+2878612391&4294967295,Mt=h+(_<<15&4294967295|_>>>17),_=lr+(h^(Mt|~ur))+gr[5]+4237533241&4294967295,lr=Mt+(_<<21&4294967295|_>>>11),_=ur+(Mt^(lr|~h))+gr[12]+1700485571&4294967295,ur=lr+(_<<6&4294967295|_>>>26),_=h+(lr^(ur|~Mt))+gr[3]+2399980690&4294967295,h=ur+(_<<10&4294967295|_>>>22),_=Mt+(ur^(h|~lr))+gr[10]+4293915773&4294967295,Mt=h+(_<<15&4294967295|_>>>17),_=lr+(h^(Mt|~ur))+gr[1]+2240044497&4294967295,lr=Mt+(_<<21&4294967295|_>>>11),_=ur+(Mt^(lr|~h))+gr[8]+1873313359&4294967295,ur=lr+(_<<6&4294967295|_>>>26),_=h+(lr^(ur|~Mt))+gr[15]+4264355552&4294967295,h=ur+(_<<10&4294967295|_>>>22),_=Mt+(ur^(h|~lr))+gr[6]+2734768916&4294967295,Mt=h+(_<<15&4294967295|_>>>17),_=lr+(h^(Mt|~ur))+gr[13]+1309151649&4294967295,lr=Mt+(_<<21&4294967295|_>>>11),_=ur+(Mt^(lr|~h))+gr[4]+4149444226&4294967295,ur=lr+(_<<6&4294967295|_>>>26),_=h+(lr^(ur|~Mt))+gr[11]+3174756917&4294967295,h=ur+(_<<10&4294967295|_>>>22),_=Mt+(ur^(h|~lr))+gr[2]+718787259&4294967295,Mt=h+(_<<15&4294967295|_>>>17),_=lr+(h^(Mt|~ur))+gr[9]+3951481745&4294967295,dr.g[0]=dr.g[0]+ur&4294967295,dr.g[1]=dr.g[1]+(Mt+(_<<21&4294967295|_>>>11))&4294967295,dr.g[2]=dr.g[2]+Mt&4294967295,dr.g[3]=dr.g[3]+h&4294967295}a.prototype.u=function(dr,ur){ur===void 0&&(ur=dr.length);for(var lr=ur-this.blockSize,gr=this.B,Mt=this.h,h=0;h<ur;){if(Mt==0)for(;h<=lr;)d(this,dr,h),h+=this.blockSize;if(typeof dr=="string"){for(;h<ur;)if(gr[Mt++]=dr.charCodeAt(h++),Mt==this.blockSize){d(this,gr),Mt=0;break}}else for(;h<ur;)if(gr[Mt++]=dr[h++],Mt==this.blockSize){d(this,gr),Mt=0;break}}this.h=Mt,this.o+=ur},a.prototype.v=function(){var dr=Array((56>this.h?this.blockSize:2*this.blockSize)-this.h);dr[0]=128;for(var ur=1;ur<dr.length-8;++ur)dr[ur]=0;var lr=8*this.o;for(ur=dr.length-8;ur<dr.length;++ur)dr[ur]=lr&255,lr/=256;for(this.u(dr),dr=Array(16),ur=lr=0;4>ur;++ur)for(var gr=0;32>gr;gr+=8)dr[lr++]=this.g[ur]>>>gr&255;return dr};function c(dr,ur){var lr=_e;return Object.prototype.hasOwnProperty.call(lr,dr)?lr[dr]:lr[dr]=ur(dr)}function j(dr,ur){this.h=ur;for(var lr=[],gr=!0,Mt=dr.length-1;0<=Mt;Mt--){var h=dr[Mt]|0;gr&&h==ur||(lr[Mt]=h,gr=!1)}this.g=lr}var _e={};function pt(dr){return-128<=dr&&128>dr?c(dr,function(ur){return new j([ur|0],0>ur?-1:0)}):new j([dr|0],0>dr?-1:0)}function yt(dr){if(isNaN(dr)||!isFinite(dr))return Ct;if(0>dr)return ir(yt(-dr));for(var ur=[],lr=1,gr=0;dr>=lr;gr++)ur[gr]=dr/lr|0,lr*=4294967296;return new j(ur,0)}function ct(dr,ur){if(dr.length==0)throw Error("number format error: empty string");if(ur=ur||10,2>ur||36<ur)throw Error("radix out of range: "+ur);if(dr.charAt(0)=="-")return ir(ct(dr.substring(1),ur));if(0<=dr.indexOf("-"))throw Error('number format error: interior "-" character');for(var lr=yt(Math.pow(ur,8)),gr=Ct,Mt=0;Mt<dr.length;Mt+=8){var h=Math.min(8,dr.length-Mt),_=parseInt(dr.substring(Mt,Mt+h),ur);8>h?(h=yt(Math.pow(ur,h)),gr=gr.j(h).add(yt(_))):(gr=gr.j(lr),gr=gr.add(yt(_)))}return gr}var Ct=pt(0),qt=pt(1),Ot=pt(16777216);s=j.prototype,s.m=function(){if(Qt(this))return-ir(this).m();for(var dr=0,ur=1,lr=0;lr<this.g.length;lr++){var gr=this.i(lr);dr+=(0<=gr?gr:4294967296+gr)*ur,ur*=4294967296}return dr},s.toString=function(dr){if(dr=dr||10,2>dr||36<dr)throw Error("radix out of range: "+dr);if(Lt(this))return"0";if(Qt(this))return"-"+ir(this).toString(dr);for(var ur=yt(Math.pow(dr,6)),lr=this,gr="";;){var Mt=ar(lr,ur).g;lr=er(lr,Mt.j(ur));var h=((0<lr.g.length?lr.g[0]:lr.h)>>>0).toString(dr);if(lr=Mt,Lt(lr))return h+gr;for(;6>h.length;)h="0"+h;gr=h+gr}},s.i=function(dr){return 0>dr?0:dr<this.g.length?this.g[dr]:this.h};function Lt(dr){if(dr.h!=0)return!1;for(var ur=0;ur<dr.g.length;ur++)if(dr.g[ur]!=0)return!1;return!0}function Qt(dr){return dr.h==-1}s.l=function(dr){return dr=er(this,dr),Qt(dr)?-1:Lt(dr)?0:1};function ir(dr){for(var ur=dr.g.length,lr=[],gr=0;gr<ur;gr++)lr[gr]=~dr.g[gr];return new j(lr,~dr.h).add(qt)}s.abs=function(){return Qt(this)?ir(this):this},s.add=function(dr){for(var ur=Math.max(this.g.length,dr.g.length),lr=[],gr=0,Mt=0;Mt<=ur;Mt++){var h=gr+(this.i(Mt)&65535)+(dr.i(Mt)&65535),_=(h>>>16)+(this.i(Mt)>>>16)+(dr.i(Mt)>>>16);gr=_>>>16,h&=65535,_&=65535,lr[Mt]=_<<16|h}return new j(lr,lr[lr.length-1]&-2147483648?-1:0)};function er(dr,ur){return dr.add(ir(ur))}s.j=function(dr){if(Lt(this)||Lt(dr))return Ct;if(Qt(this))return Qt(dr)?ir(this).j(ir(dr)):ir(ir(this).j(dr));if(Qt(dr))return ir(this.j(ir(dr)));if(0>this.l(Ot)&&0>dr.l(Ot))return yt(this.m()*dr.m());for(var ur=this.g.length+dr.g.length,lr=[],gr=0;gr<2*ur;gr++)lr[gr]=0;for(gr=0;gr<this.g.length;gr++)for(var Mt=0;Mt<dr.g.length;Mt++){var h=this.i(gr)>>>16,_=this.i(gr)&65535,b=dr.i(Mt)>>>16,lt=dr.i(Mt)&65535;lr[2*gr+2*Mt]+=_*lt,tr(lr,2*gr+2*Mt),lr[2*gr+2*Mt+1]+=h*lt,tr(lr,2*gr+2*Mt+1),lr[2*gr+2*Mt+1]+=_*b,tr(lr,2*gr+2*Mt+1),lr[2*gr+2*Mt+2]+=h*b,tr(lr,2*gr+2*Mt+2)}for(gr=0;gr<ur;gr++)lr[gr]=lr[2*gr+1]<<16|lr[2*gr];for(gr=ur;gr<2*ur;gr++)lr[gr]=0;return new j(lr,0)};function tr(dr,ur){for(;(dr[ur]&65535)!=dr[ur];)dr[ur+1]+=dr[ur]>>>16,dr[ur]&=65535,ur++}function sr(dr,ur){this.g=dr,this.h=ur}function ar(dr,ur){if(Lt(ur))throw Error("division by zero");if(Lt(dr))return new sr(Ct,Ct);if(Qt(dr))return ur=ar(ir(dr),ur),new sr(ir(ur.g),ir(ur.h));if(Qt(ur))return ur=ar(dr,ir(ur)),new sr(ir(ur.g),ur.h);if(30<dr.g.length){if(Qt(dr)||Qt(ur))throw Error("slowDivide_ only works with positive integers.");for(var lr=qt,gr=ur;0>=gr.l(dr);)lr=hr(lr),gr=hr(gr);var Mt=_r(lr,1),h=_r(gr,1);for(gr=_r(gr,2),lr=_r(lr,2);!Lt(gr);){var _=h.add(gr);0>=_.l(dr)&&(Mt=Mt.add(lr),h=_),gr=_r(gr,1),lr=_r(lr,1)}return ur=er(dr,Mt.j(ur)),new sr(Mt,ur)}for(Mt=Ct;0<=dr.l(ur);){for(lr=Math.max(1,Math.floor(dr.m()/ur.m())),gr=Math.ceil(Math.log(lr)/Math.LN2),gr=48>=gr?1:Math.pow(2,gr-48),h=yt(lr),_=h.j(ur);Qt(_)||0<_.l(dr);)lr-=gr,h=yt(lr),_=h.j(ur);Lt(h)&&(h=qt),Mt=Mt.add(h),dr=er(dr,_)}return new sr(Mt,dr)}s.A=function(dr){return ar(this,dr).h},s.and=function(dr){for(var ur=Math.max(this.g.length,dr.g.length),lr=[],gr=0;gr<ur;gr++)lr[gr]=this.i(gr)&dr.i(gr);return new j(lr,this.h&dr.h)},s.or=function(dr){for(var ur=Math.max(this.g.length,dr.g.length),lr=[],gr=0;gr<ur;gr++)lr[gr]=this.i(gr)|dr.i(gr);return new j(lr,this.h|dr.h)},s.xor=function(dr){for(var ur=Math.max(this.g.length,dr.g.length),lr=[],gr=0;gr<ur;gr++)lr[gr]=this.i(gr)^dr.i(gr);return new j(lr,this.h^dr.h)};function hr(dr){for(var ur=dr.g.length+1,lr=[],gr=0;gr<ur;gr++)lr[gr]=dr.i(gr)<<1|dr.i(gr-1)>>>31;return new j(lr,dr.h)}function _r(dr,ur){var lr=ur>>5;ur%=32;for(var gr=dr.g.length-lr,Mt=[],h=0;h<gr;h++)Mt[h]=0<ur?dr.i(h+lr)>>>ur|dr.i(h+lr+1)<<32-ur:dr.i(h+lr);return new j(Mt,dr.h)}a.prototype.digest=a.prototype.v,a.prototype.reset=a.prototype.s,a.prototype.update=a.prototype.u,Md5=a,j.prototype.add=j.prototype.add,j.prototype.multiply=j.prototype.j,j.prototype.modulo=j.prototype.A,j.prototype.compare=j.prototype.l,j.prototype.toNumber=j.prototype.m,j.prototype.toString=j.prototype.toString,j.prototype.getBits=j.prototype.i,j.fromNumber=yt,j.fromString=ct,Integer=j}).apply(typeof commonjsGlobal$1<"u"?commonjsGlobal$1:typeof self<"u"?self:typeof window<"u"?window:{});var commonjsGlobal=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global$1<"u"?global$1:typeof self<"u"?self:{};/** @license
Copyright The Closure Library Authors.
SPDX-License-Identifier: Apache-2.0
*/var XhrIo,WebChannel,EventType,ErrorCode$1,Stat,Event$1,getStatEventTarget,createWebChannelTransport;(function(){var s,e=typeof Object.defineProperties=="function"?Object.defineProperty:function(rr,vr,Er){return rr==Array.prototype||rr==Object.prototype||(rr[vr]=Er.value),rr};function o(rr){rr=[typeof globalThis=="object"&&globalThis,rr,typeof window=="object"&&window,typeof self=="object"&&self,typeof commonjsGlobal=="object"&&commonjsGlobal];for(var vr=0;vr<rr.length;++vr){var Er=rr[vr];if(Er&&Er.Math==Math)return Er}throw Error("Cannot find global object")}var a=o(this);function d(rr,vr){if(vr)e:{var Er=a;rr=rr.split(".");for(var Cr=0;Cr<rr.length-1;Cr++){var Hr=rr[Cr];if(!(Hr in Er))break e;Er=Er[Hr]}rr=rr[rr.length-1],Cr=Er[rr],vr=vr(Cr),vr!=Cr&&vr!=null&&e(Er,rr,{configurable:!0,writable:!0,value:vr})}}function c(rr,vr){rr instanceof String&&(rr+="");var Er=0,Cr=!1,Hr={next:function(){if(!Cr&&Er<rr.length){var cn=Er++;return{value:vr(cn,rr[cn]),done:!1}}return Cr=!0,{done:!0,value:void 0}}};return Hr[Symbol.iterator]=function(){return Hr},Hr}d("Array.prototype.values",function(rr){return rr||function(){return c(this,function(vr,Er){return Er})}});/** @license

 Copyright The Closure Library Authors.
 SPDX-License-Identifier: Apache-2.0
*/var j=j||{},_e=this||self;function pt(rr){var vr=typeof rr;return vr=vr!="object"?vr:rr?Array.isArray(rr)?"array":vr:"null",vr=="array"||vr=="object"&&typeof rr.length=="number"}function yt(rr){var vr=typeof rr;return vr=="object"&&rr!=null||vr=="function"}function ct(rr,vr,Er){return rr.call.apply(rr.bind,arguments)}function Ct(rr,vr,Er){if(!rr)throw Error();if(2<arguments.length){var Cr=Array.prototype.slice.call(arguments,2);return function(){var Hr=Array.prototype.slice.call(arguments);return Array.prototype.unshift.apply(Hr,Cr),rr.apply(vr,Hr)}}return function(){return rr.apply(vr,arguments)}}function qt(rr,vr,Er){return qt=Function.prototype.bind&&Function.prototype.bind.toString().indexOf("native code")!=-1?ct:Ct,qt.apply(null,arguments)}function Ot(rr,vr){var Er=Array.prototype.slice.call(arguments,1);return function(){var Cr=Er.slice();return Cr.push.apply(Cr,arguments),rr.apply(this,Cr)}}function Lt(rr,vr){function Er(){}Er.prototype=vr.prototype,rr.aa=vr.prototype,rr.prototype=new Er,rr.prototype.constructor=rr,rr.Qb=function(Cr,Hr,cn){for(var _n=Array(arguments.length-2),Yn=2;Yn<arguments.length;Yn++)_n[Yn-2]=arguments[Yn];return vr.prototype[Hr].apply(Cr,_n)}}function Qt(rr){const vr=rr.length;if(0<vr){const Er=Array(vr);for(let Cr=0;Cr<vr;Cr++)Er[Cr]=rr[Cr];return Er}return[]}function ir(rr,vr){for(let Er=1;Er<arguments.length;Er++){const Cr=arguments[Er];if(pt(Cr)){const Hr=rr.length||0,cn=Cr.length||0;rr.length=Hr+cn;for(let _n=0;_n<cn;_n++)rr[Hr+_n]=Cr[_n]}else rr.push(Cr)}}class er{constructor(vr,Er){this.i=vr,this.j=Er,this.h=0,this.g=null}get(){let vr;return 0<this.h?(this.h--,vr=this.g,this.g=vr.next,vr.next=null):vr=this.i(),vr}}function tr(rr){return/^[\s\xa0]*$/.test(rr)}function sr(){var rr=_e.navigator;return rr&&(rr=rr.userAgent)?rr:""}function ar(rr){return ar[" "](rr),rr}ar[" "]=function(){};var hr=sr().indexOf("Gecko")!=-1&&!(sr().toLowerCase().indexOf("webkit")!=-1&&sr().indexOf("Edge")==-1)&&!(sr().indexOf("Trident")!=-1||sr().indexOf("MSIE")!=-1)&&sr().indexOf("Edge")==-1;function _r(rr,vr,Er){for(const Cr in rr)vr.call(Er,rr[Cr],Cr,rr)}function dr(rr,vr){for(const Er in rr)vr.call(void 0,rr[Er],Er,rr)}function ur(rr){const vr={};for(const Er in rr)vr[Er]=rr[Er];return vr}const lr="constructor hasOwnProperty isPrototypeOf propertyIsEnumerable toLocaleString toString valueOf".split(" ");function gr(rr,vr){let Er,Cr;for(let Hr=1;Hr<arguments.length;Hr++){Cr=arguments[Hr];for(Er in Cr)rr[Er]=Cr[Er];for(let cn=0;cn<lr.length;cn++)Er=lr[cn],Object.prototype.hasOwnProperty.call(Cr,Er)&&(rr[Er]=Cr[Er])}}function Mt(rr){var vr=1;rr=rr.split(":");const Er=[];for(;0<vr&&rr.length;)Er.push(rr.shift()),vr--;return rr.length&&Er.push(rr.join(":")),Er}function h(rr){_e.setTimeout(()=>{throw rr},0)}function _(){var rr=xt;let vr=null;return rr.g&&(vr=rr.g,rr.g=rr.g.next,rr.g||(rr.h=null),vr.next=null),vr}class b{constructor(){this.h=this.g=null}add(vr,Er){const Cr=lt.get();Cr.set(vr,Er),this.h?this.h.next=Cr:this.g=Cr,this.h=Cr}}var lt=new er(()=>new Rt,rr=>rr.reset());class Rt{constructor(){this.next=this.g=this.h=null}set(vr,Er){this.h=vr,this.g=Er,this.next=null}reset(){this.next=this.g=this.h=null}}let kt,Ft=!1,xt=new b,g=()=>{const rr=_e.Promise.resolve(void 0);kt=()=>{rr.then(wt)}};var wt=()=>{for(var rr;rr=_();){try{rr.h.call(rr.g)}catch(Er){h(Er)}var vr=lt;vr.j(rr),100>vr.h&&(vr.h++,rr.next=vr.g,vr.g=rr)}Ft=!1};function nr(){this.s=this.s,this.C=this.C}nr.prototype.s=!1,nr.prototype.ma=function(){this.s||(this.s=!0,this.N())},nr.prototype.N=function(){if(this.C)for(;this.C.length;)this.C.shift()()};function or(rr,vr){this.type=rr,this.g=this.target=vr,this.defaultPrevented=!1}or.prototype.h=function(){this.defaultPrevented=!0};var cr=function(){if(!_e.addEventListener||!Object.defineProperty)return!1;var rr=!1,vr=Object.defineProperty({},"passive",{get:function(){rr=!0}});try{const Er=()=>{};_e.addEventListener("test",Er,vr),_e.removeEventListener("test",Er,vr)}catch{}return rr}();function Rr(rr,vr){if(or.call(this,rr?rr.type:""),this.relatedTarget=this.g=this.target=null,this.button=this.screenY=this.screenX=this.clientY=this.clientX=0,this.key="",this.metaKey=this.shiftKey=this.altKey=this.ctrlKey=!1,this.state=null,this.pointerId=0,this.pointerType="",this.i=null,rr){var Er=this.type=rr.type,Cr=rr.changedTouches&&rr.changedTouches.length?rr.changedTouches[0]:null;if(this.target=rr.target||rr.srcElement,this.g=vr,vr=rr.relatedTarget){if(hr){e:{try{ar(vr.nodeName);var Hr=!0;break e}catch{}Hr=!1}Hr||(vr=null)}}else Er=="mouseover"?vr=rr.fromElement:Er=="mouseout"&&(vr=rr.toElement);this.relatedTarget=vr,Cr?(this.clientX=Cr.clientX!==void 0?Cr.clientX:Cr.pageX,this.clientY=Cr.clientY!==void 0?Cr.clientY:Cr.pageY,this.screenX=Cr.screenX||0,this.screenY=Cr.screenY||0):(this.clientX=rr.clientX!==void 0?rr.clientX:rr.pageX,this.clientY=rr.clientY!==void 0?rr.clientY:rr.pageY,this.screenX=rr.screenX||0,this.screenY=rr.screenY||0),this.button=rr.button,this.key=rr.key||"",this.ctrlKey=rr.ctrlKey,this.altKey=rr.altKey,this.shiftKey=rr.shiftKey,this.metaKey=rr.metaKey,this.pointerId=rr.pointerId||0,this.pointerType=typeof rr.pointerType=="string"?rr.pointerType:Ar[rr.pointerType]||"",this.state=rr.state,this.i=rr,rr.defaultPrevented&&Rr.aa.h.call(this)}}Lt(Rr,or);var Ar={2:"touch",3:"pen",4:"mouse"};Rr.prototype.h=function(){Rr.aa.h.call(this);var rr=this.i;rr.preventDefault?rr.preventDefault():rr.returnValue=!1};var pr="closure_listenable_"+(1e6*Math.random()|0),wr=0;function Tr(rr,vr,Er,Cr,Hr){this.listener=rr,this.proxy=null,this.src=vr,this.type=Er,this.capture=!!Cr,this.ha=Hr,this.key=++wr,this.da=this.fa=!1}function Ir(rr){rr.da=!0,rr.listener=null,rr.proxy=null,rr.src=null,rr.ha=null}function Sr(rr){this.src=rr,this.g={},this.h=0}Sr.prototype.add=function(rr,vr,Er,Cr,Hr){var cn=rr.toString();rr=this.g[cn],rr||(rr=this.g[cn]=[],this.h++);var _n=kr(rr,vr,Cr,Hr);return-1<_n?(vr=rr[_n],Er||(vr.fa=!1)):(vr=new Tr(vr,this.src,cn,!!Cr,Hr),vr.fa=Er,rr.push(vr)),vr};function br(rr,vr){var Er=vr.type;if(Er in rr.g){var Cr=rr.g[Er],Hr=Array.prototype.indexOf.call(Cr,vr,void 0),cn;(cn=0<=Hr)&&Array.prototype.splice.call(Cr,Hr,1),cn&&(Ir(vr),rr.g[Er].length==0&&(delete rr.g[Er],rr.h--))}}function kr(rr,vr,Er,Cr){for(var Hr=0;Hr<rr.length;++Hr){var cn=rr[Hr];if(!cn.da&&cn.listener==vr&&cn.capture==!!Er&&cn.ha==Cr)return Hr}return-1}var Qr="closure_lm_"+(1e6*Math.random()|0),qr={};function $r(rr,vr,Er,Cr,Hr){if(Array.isArray(vr)){for(var cn=0;cn<vr.length;cn++)$r(rr,vr[cn],Er,Cr,Hr);return null}return Er=Wr(Er),rr&&rr[pr]?rr.K(vr,Er,yt(Cr)?!!Cr.capture:!1,Hr):gn(rr,vr,Er,!1,Cr,Hr)}function gn(rr,vr,Er,Cr,Hr,cn){if(!vr)throw Error("Invalid event type");var _n=yt(Hr)?!!Hr.capture:!!Hr,Yn=yn(rr);if(Yn||(rr[Qr]=Yn=new Sr(rr)),Er=Yn.add(vr,Er,Cr,_n,cn),Er.proxy)return Er;if(Cr=Lr(),Er.proxy=Cr,Cr.src=rr,Cr.listener=Er,rr.addEventListener)cr||(Hr=_n),Hr===void 0&&(Hr=!1),rr.addEventListener(vr.toString(),Cr,Hr);else if(rr.attachEvent)rr.attachEvent(Fr(vr.toString()),Cr);else if(rr.addListener&&rr.removeListener)rr.addListener(Cr);else throw Error("addEventListener and attachEvent are unavailable.");return Er}function Lr(){function rr(Er){return vr.call(rr.src,rr.listener,Er)}const vr=zr;return rr}function Dr(rr,vr,Er,Cr,Hr){if(Array.isArray(vr))for(var cn=0;cn<vr.length;cn++)Dr(rr,vr[cn],Er,Cr,Hr);else Cr=yt(Cr)?!!Cr.capture:!!Cr,Er=Wr(Er),rr&&rr[pr]?(rr=rr.i,vr=String(vr).toString(),vr in rr.g&&(cn=rr.g[vr],Er=kr(cn,Er,Cr,Hr),-1<Er&&(Ir(cn[Er]),Array.prototype.splice.call(cn,Er,1),cn.length==0&&(delete rr.g[vr],rr.h--)))):rr&&(rr=yn(rr))&&(vr=rr.g[vr.toString()],rr=-1,vr&&(rr=kr(vr,Er,Cr,Hr)),(Er=-1<rr?vr[rr]:null)&&En(Er))}function En(rr){if(typeof rr!="number"&&rr&&!rr.da){var vr=rr.src;if(vr&&vr[pr])br(vr.i,rr);else{var Er=rr.type,Cr=rr.proxy;vr.removeEventListener?vr.removeEventListener(Er,Cr,rr.capture):vr.detachEvent?vr.detachEvent(Fr(Er),Cr):vr.addListener&&vr.removeListener&&vr.removeListener(Cr),(Er=yn(vr))?(br(Er,rr),Er.h==0&&(Er.src=null,vr[Qr]=null)):Ir(rr)}}}function Fr(rr){return rr in qr?qr[rr]:qr[rr]="on"+rr}function zr(rr,vr){if(rr.da)rr=!0;else{vr=new Rr(vr,this);var Er=rr.listener,Cr=rr.ha||rr.src;rr.fa&&En(rr),rr=Er.call(Cr,vr)}return rr}function yn(rr){return rr=rr[Qr],rr instanceof Sr?rr:null}var Nr="__closure_events_fn_"+(1e9*Math.random()>>>0);function Wr(rr){return typeof rr=="function"?rr:(rr[Nr]||(rr[Nr]=function(vr){return rr.handleEvent(vr)}),rr[Nr])}function xn(){nr.call(this),this.i=new Sr(this),this.M=this,this.F=null}Lt(xn,nr),xn.prototype[pr]=!0,xn.prototype.removeEventListener=function(rr,vr,Er,Cr){Dr(this,rr,vr,Er,Cr)};function Or(rr,vr){var Er,Cr=rr.F;if(Cr)for(Er=[];Cr;Cr=Cr.F)Er.push(Cr);if(rr=rr.M,Cr=vr.type||vr,typeof vr=="string")vr=new or(vr,rr);else if(vr instanceof or)vr.target=vr.target||rr;else{var Hr=vr;vr=new or(Cr,rr),gr(vr,Hr)}if(Hr=!0,Er)for(var cn=Er.length-1;0<=cn;cn--){var _n=vr.g=Er[cn];Hr=Yr(_n,Cr,!0,vr)&&Hr}if(_n=vr.g=rr,Hr=Yr(_n,Cr,!0,vr)&&Hr,Hr=Yr(_n,Cr,!1,vr)&&Hr,Er)for(cn=0;cn<Er.length;cn++)_n=vr.g=Er[cn],Hr=Yr(_n,Cr,!1,vr)&&Hr}xn.prototype.N=function(){if(xn.aa.N.call(this),this.i){var rr=this.i,vr;for(vr in rr.g){for(var Er=rr.g[vr],Cr=0;Cr<Er.length;Cr++)Ir(Er[Cr]);delete rr.g[vr],rr.h--}}this.F=null},xn.prototype.K=function(rr,vr,Er,Cr){return this.i.add(String(rr),vr,!1,Er,Cr)},xn.prototype.L=function(rr,vr,Er,Cr){return this.i.add(String(rr),vr,!0,Er,Cr)};function Yr(rr,vr,Er,Cr){if(vr=rr.i.g[String(vr)],!vr)return!0;vr=vr.concat();for(var Hr=!0,cn=0;cn<vr.length;++cn){var _n=vr[cn];if(_n&&!_n.da&&_n.capture==Er){var Yn=_n.listener,es=_n.ha||_n.src;_n.fa&&br(rr.i,_n),Hr=Yn.call(es,Cr)!==!1&&Hr}}return Hr&&!Cr.defaultPrevented}function Pn(rr,vr,Er){if(typeof rr=="function")Er&&(rr=qt(rr,Er));else if(rr&&typeof rr.handleEvent=="function")rr=qt(rr.handleEvent,rr);else throw Error("Invalid listener argument");return 2147483647<Number(vr)?-1:_e.setTimeout(rr,vr||0)}function xr(rr){rr.g=Pn(()=>{rr.g=null,rr.i&&(rr.i=!1,xr(rr))},rr.l);const vr=rr.h;rr.h=null,rr.m.apply(null,vr)}class fr extends nr{constructor(vr,Er){super(),this.m=vr,this.l=Er,this.h=null,this.i=!1,this.g=null}j(vr){this.h=arguments,this.g?this.i=!0:xr(this)}N(){super.N(),this.g&&(_e.clearTimeout(this.g),this.g=null,this.i=!1,this.h=null)}}function yr(rr){nr.call(this),this.h=rr,this.g={}}Lt(yr,nr);var Mr=[];function Pr(rr){_r(rr.g,function(vr,Er){this.g.hasOwnProperty(Er)&&En(vr)},rr),rr.g={}}yr.prototype.N=function(){yr.aa.N.call(this),Pr(this)},yr.prototype.handleEvent=function(){throw Error("EventHandler.handleEvent not implemented")};var Vr=_e.JSON.stringify,Br=_e.JSON.parse,jr=class{stringify(rr){return _e.JSON.stringify(rr,void 0)}parse(rr){return _e.JSON.parse(rr,void 0)}};function An(){}An.prototype.h=null;function Ur(rr){return rr.h||(rr.h=rr.i())}function Gr(){}var wn={OPEN:"a",kb:"b",Ja:"c",wb:"d"};function Xr(){or.call(this,"d")}Lt(Xr,or);function hn(){or.call(this,"c")}Lt(hn,or);var In={},Jr=null;function fn(){return Jr=Jr||new xn}In.La="serverreachability";function kn(rr){or.call(this,In.La,rr)}Lt(kn,or);function Kr(rr){const vr=fn();Or(vr,new kn(vr))}In.STAT_EVENT="statevent";function dn(rr,vr){or.call(this,In.STAT_EVENT,rr),this.stat=vr}Lt(dn,or);function Rn(rr){const vr=fn();Or(vr,new dn(vr,rr))}In.Ma="timingevent";function Zr(rr,vr){or.call(this,In.Ma,rr),this.size=vr}Lt(Zr,or);function un(rr,vr){if(typeof rr!="function")throw Error("Fn must not be null and must be a function");return _e.setTimeout(function(){rr()},vr)}function Mn(){this.g=!0}Mn.prototype.xa=function(){this.g=!1};function rn(rr,vr,Er,Cr,Hr,cn){rr.info(function(){if(rr.g)if(cn)for(var _n="",Yn=cn.split("&"),es=0;es<Yn.length;es++){var Fn=Yn[es].split("=");if(1<Fn.length){var ts=Fn[0];Fn=Fn[1];var rs=ts.split("_");_n=2<=rs.length&&rs[1]=="type"?_n+(ts+"="+Fn+"&"):_n+(ts+"=redacted&")}}else _n=null;else _n=cn;return"XMLHTTP REQ ("+Cr+") [attempt "+Hr+"]: "+vr+`
`+Er+`
`+_n})}function pn(rr,vr,Er,Cr,Hr,cn,_n){rr.info(function(){return"XMLHTTP RESP ("+Cr+") [ attempt "+Hr+"]: "+vr+`
`+Er+`
`+cn+" "+_n})}function Cn(rr,vr,Er,Cr){rr.info(function(){return"XMLHTTP TEXT ("+vr+"): "+vn(rr,Er)+(Cr?" "+Cr:"")})}function ln(rr,vr){rr.info(function(){return"TIMEOUT: "+vr})}Mn.prototype.info=function(){};function vn(rr,vr){if(!rr.g)return vr;if(!vr)return null;try{var Er=JSON.parse(vr);if(Er){for(rr=0;rr<Er.length;rr++)if(Array.isArray(Er[rr])){var Cr=Er[rr];if(!(2>Cr.length)){var Hr=Cr[1];if(Array.isArray(Hr)&&!(1>Hr.length)){var cn=Hr[0];if(cn!="noop"&&cn!="stop"&&cn!="close")for(var _n=1;_n<Hr.length;_n++)Hr[_n]=""}}}}return Vr(Er)}catch{return vr}}var Bn={NO_ERROR:0,gb:1,tb:2,sb:3,nb:4,rb:5,ub:6,Ia:7,TIMEOUT:8,xb:9},an={lb:"complete",Hb:"success",Ja:"error",Ia:"abort",zb:"ready",Ab:"readystatechange",TIMEOUT:"timeout",vb:"incrementaldata",yb:"progress",ob:"downloadprogress",Pb:"uploadprogress"},mn;function Sn(){}Lt(Sn,An),Sn.prototype.g=function(){return new XMLHttpRequest},Sn.prototype.i=function(){return{}},mn=new Sn;function Tn(rr,vr,Er,Cr){this.j=rr,this.i=vr,this.l=Er,this.R=Cr||1,this.U=new yr(this),this.I=45e3,this.H=null,this.o=!1,this.m=this.A=this.v=this.L=this.F=this.S=this.B=null,this.D=[],this.g=null,this.C=0,this.s=this.u=null,this.X=-1,this.J=!1,this.O=0,this.M=null,this.W=this.K=this.T=this.P=!1,this.h=new Un}function Un(){this.i=null,this.g="",this.h=!1}var jn={},Vn={};function Nn(rr,vr,Er){rr.L=1,rr.v=Is(ss(vr)),rr.m=Er,rr.P=!0,zn(rr,null)}function zn(rr,vr){rr.F=Date.now(),qn(rr),rr.A=ss(rr.v);var Er=rr.A,Cr=rr.R;Array.isArray(Cr)||(Cr=[String(Cr)]),to(Er.i,"t",Cr),rr.C=0,Er=rr.j.J,rr.h=new Un,rr.g=bo(rr.j,Er?vr:null,!rr.m),0<rr.O&&(rr.M=new fr(qt(rr.Y,rr,rr.g),rr.O)),vr=rr.U,Er=rr.g,Cr=rr.ca;var Hr="readystatechange";Array.isArray(Hr)||(Hr&&(Mr[0]=Hr.toString()),Hr=Mr);for(var cn=0;cn<Hr.length;cn++){var _n=$r(Er,Hr[cn],Cr||vr.handleEvent,!1,vr.h||vr);if(!_n)break;vr.g[_n.key]=_n}vr=rr.H?ur(rr.H):{},rr.m?(rr.u||(rr.u="POST"),vr["Content-Type"]="application/x-www-form-urlencoded",rr.g.ea(rr.A,rr.u,rr.m,vr)):(rr.u="GET",rr.g.ea(rr.A,rr.u,null,vr)),Kr(),rn(rr.i,rr.u,rr.A,rr.l,rr.R,rr.m)}Tn.prototype.ca=function(rr){rr=rr.target;const vr=this.M;vr&&os(rr)==3?vr.j():this.Y(rr)},Tn.prototype.Y=function(rr){try{if(rr==this.g)e:{const rs=os(this.g);var vr=this.g.Ba();const vs=this.g.Z();if(!(3>rs)&&(rs!=3||this.g&&(this.h.h||this.g.oa()||uo(this.g)))){this.J||rs!=4||vr==7||(vr==8||0>=vs?Kr(3):Kr(2)),On(this);var Er=this.g.Z();this.X=Er;t:if(Hn(this)){var Cr=uo(this.g);rr="";var Hr=Cr.length,cn=os(this.g)==4;if(!this.h.i){if(typeof TextDecoder>"u"){Dn(this),$n(this);var _n="";break t}this.h.i=new _e.TextDecoder}for(vr=0;vr<Hr;vr++)this.h.h=!0,rr+=this.h.i.decode(Cr[vr],{stream:!(cn&&vr==Hr-1)});Cr.length=0,this.h.g+=rr,this.C=0,_n=this.h.g}else _n=this.g.oa();if(this.o=Er==200,pn(this.i,this.u,this.A,this.l,this.R,rs,Er),this.o){if(this.T&&!this.K){t:{if(this.g){var Yn,es=this.g;if((Yn=es.g?es.g.getResponseHeader("X-HTTP-Initial-Response"):null)&&!tr(Yn)){var Fn=Yn;break t}}Fn=null}if(Er=Fn)Cn(this.i,this.l,Er,"Initial handshake response via X-HTTP-Initial-Response"),this.K=!0,Ln(this,Er);else{this.o=!1,this.s=3,Rn(12),Dn(this),$n(this);break e}}if(this.P){Er=!0;let is;for(;!this.J&&this.C<_n.length;)if(is=Xn(this,_n),is==Vn){rs==4&&(this.s=4,Rn(14),Er=!1),Cn(this.i,this.l,null,"[Incomplete Response]");break}else if(is==jn){this.s=4,Rn(15),Cn(this.i,this.l,_n,"[Invalid Chunk]"),Er=!1;break}else Cn(this.i,this.l,is,null),Ln(this,is);if(Hn(this)&&this.C!=0&&(this.h.g=this.h.g.slice(this.C),this.C=0),rs!=4||_n.length!=0||this.h.h||(this.s=1,Rn(16),Er=!1),this.o=this.o&&Er,!Er)Cn(this.i,this.l,_n,"[Invalid Chunked Response]"),Dn(this),$n(this);else if(0<_n.length&&!this.W){this.W=!0;var ts=this.j;ts.g==this&&ts.ba&&!ts.M&&(ts.j.info("Great, no buffering proxy detected. Bytes received: "+_n.length),Ls(ts),ts.M=!0,Rn(11))}}else Cn(this.i,this.l,_n,null),Ln(this,_n);rs==4&&Dn(this),this.o&&!this.J&&(rs==4?vo(this.j,this):(this.o=!1,qn(this)))}else Oo(this.g),Er==400&&0<_n.indexOf("Unknown SID")?(this.s=3,Rn(12)):(this.s=0,Rn(13)),Dn(this),$n(this)}}}catch{}finally{}};function Hn(rr){return rr.g?rr.u=="GET"&&rr.L!=2&&rr.j.Ca:!1}function Xn(rr,vr){var Er=rr.C,Cr=vr.indexOf(`
`,Er);return Cr==-1?Vn:(Er=Number(vr.substring(Er,Cr)),isNaN(Er)?jn:(Cr+=1,Cr+Er>vr.length?Vn:(vr=vr.slice(Cr,Cr+Er),rr.C=Cr+Er,vr)))}Tn.prototype.cancel=function(){this.J=!0,Dn(this)};function qn(rr){rr.S=Date.now()+rr.I,Wn(rr,rr.I)}function Wn(rr,vr){if(rr.B!=null)throw Error("WatchDog timer not null");rr.B=un(qt(rr.ba,rr),vr)}function On(rr){rr.B&&(_e.clearTimeout(rr.B),rr.B=null)}Tn.prototype.ba=function(){this.B=null;const rr=Date.now();0<=rr-this.S?(ln(this.i,this.A),this.L!=2&&(Kr(),Rn(17)),Dn(this),this.s=2,$n(this)):Wn(this,this.S-rr)};function $n(rr){rr.j.G==0||rr.J||vo(rr.j,rr)}function Dn(rr){On(rr);var vr=rr.M;vr&&typeof vr.ma=="function"&&vr.ma(),rr.M=null,Pr(rr.U),rr.g&&(vr=rr.g,rr.g=null,vr.abort(),vr.ma())}function Ln(rr,vr){try{var Er=rr.j;if(Er.G!=0&&(Er.g==rr||ls(Er.h,rr))){if(!rr.K&&ls(Er.h,rr)&&Er.G==3){try{var Cr=Er.Da.g.parse(vr)}catch{Cr=null}if(Array.isArray(Cr)&&Cr.length==3){var Hr=Cr;if(Hr[0]==0){e:if(!Er.u){if(Er.g)if(Er.g.F+3e3<rr.F)$s(Er),Bs(Er);else break e;Os(Er),Rn(18)}}else Er.za=Hr[1],0<Er.za-Er.T&&37500>Hr[2]&&Er.F&&Er.v==0&&!Er.C&&(Er.C=un(qt(Er.Za,Er),6e3));if(1>=Qn(Er.h)&&Er.ca){try{Er.ca()}catch{}Er.ca=void 0}}else hs(Er,11)}else if((rr.K||Er.g==rr)&&$s(Er),!tr(vr))for(Hr=Er.Da.g.parse(vr),vr=0;vr<Hr.length;vr++){let Fn=Hr[vr];if(Er.T=Fn[0],Fn=Fn[1],Er.G==2)if(Fn[0]=="c"){Er.K=Fn[1],Er.ia=Fn[2];const ts=Fn[3];ts!=null&&(Er.la=ts,Er.j.info("VER="+Er.la));const rs=Fn[4];rs!=null&&(Er.Aa=rs,Er.j.info("SVER="+Er.Aa));const vs=Fn[5];vs!=null&&typeof vs=="number"&&0<vs&&(Cr=1.5*vs,Er.L=Cr,Er.j.info("backChannelRequestTimeoutMs_="+Cr)),Cr=Er;const is=rr.g;if(is){const Fs=is.g?is.g.getResponseHeader("X-Client-Wire-Protocol"):null;if(Fs){var cn=Cr.h;cn.g||Fs.indexOf("spdy")==-1&&Fs.indexOf("quic")==-1&&Fs.indexOf("h2")==-1||(cn.j=cn.l,cn.g=new Set,cn.h&&(fs(cn,cn.h),cn.h=null))}if(Cr.D){const Us=is.g?is.g.getResponseHeader("X-HTTP-Session-Id"):null;Us&&(Cr.ya=Us,Jn(Cr.I,Cr.D,Us))}}Er.G=3,Er.l&&Er.l.ua(),Er.ba&&(Er.R=Date.now()-rr.F,Er.j.info("Handshake RTT: "+Er.R+"ms")),Cr=Er;var _n=rr;if(Cr.qa=yo(Cr,Cr.J?Cr.ia:null,Cr.W),_n.K){Gs(Cr.h,_n);var Yn=_n,es=Cr.L;es&&(Yn.I=es),Yn.B&&(On(Yn),qn(Yn)),Cr.g=_n}else po(Cr);0<Er.i.length&&Ds(Er)}else Fn[0]!="stop"&&Fn[0]!="close"||hs(Er,7);else Er.G==3&&(Fn[0]=="stop"||Fn[0]=="close"?Fn[0]=="stop"?hs(Er,7):Ns(Er):Fn[0]!="noop"&&Er.l&&Er.l.ta(Fn),Er.v=0)}}Kr(4)}catch{}}var Zn=class{constructor(rr,vr){this.g=rr,this.map=vr}};function Gn(rr){this.l=rr||10,_e.PerformanceNavigationTiming?(rr=_e.performance.getEntriesByType("navigation"),rr=0<rr.length&&(rr[0].nextHopProtocol=="hq"||rr[0].nextHopProtocol=="h2")):rr=!!(_e.chrome&&_e.chrome.loadTimes&&_e.chrome.loadTimes()&&_e.chrome.loadTimes().wasFetchedViaSpdy),this.j=rr?this.l:1,this.g=null,1<this.j&&(this.g=new Set),this.h=null,this.i=[]}function Kn(rr){return rr.h?!0:rr.g?rr.g.size>=rr.j:!1}function Qn(rr){return rr.h?1:rr.g?rr.g.size:0}function ls(rr,vr){return rr.h?rr.h==vr:rr.g?rr.g.has(vr):!1}function fs(rr,vr){rr.g?rr.g.add(vr):rr.h=vr}function Gs(rr,vr){rr.h&&rr.h==vr?rr.h=null:rr.g&&rr.g.has(vr)&&rr.g.delete(vr)}Gn.prototype.cancel=function(){if(this.i=Ks(this),this.h)this.h.cancel(),this.h=null;else if(this.g&&this.g.size!==0){for(const rr of this.g.values())rr.cancel();this.g.clear()}};function Ks(rr){if(rr.h!=null)return rr.i.concat(rr.h.D);if(rr.g!=null&&rr.g.size!==0){let vr=rr.i;for(const Er of rr.g.values())vr=vr.concat(Er.D);return vr}return Qt(rr.i)}function Ro(rr){if(rr.V&&typeof rr.V=="function")return rr.V();if(typeof Map<"u"&&rr instanceof Map||typeof Set<"u"&&rr instanceof Set)return Array.from(rr.values());if(typeof rr=="string")return rr.split("");if(pt(rr)){for(var vr=[],Er=rr.length,Cr=0;Cr<Er;Cr++)vr.push(rr[Cr]);return vr}vr=[],Er=0;for(Cr in rr)vr[Er++]=rr[Cr];return vr}function Mo(rr){if(rr.na&&typeof rr.na=="function")return rr.na();if(!rr.V||typeof rr.V!="function"){if(typeof Map<"u"&&rr instanceof Map)return Array.from(rr.keys());if(!(typeof Set<"u"&&rr instanceof Set)){if(pt(rr)||typeof rr=="string"){var vr=[];rr=rr.length;for(var Er=0;Er<rr;Er++)vr.push(Er);return vr}vr=[],Er=0;for(const Cr in rr)vr[Er++]=Cr;return vr}}}function Qs(rr,vr){if(rr.forEach&&typeof rr.forEach=="function")rr.forEach(vr,void 0);else if(pt(rr)||typeof rr=="string")Array.prototype.forEach.call(rr,vr,void 0);else for(var Er=Mo(rr),Cr=Ro(rr),Hr=Cr.length,cn=0;cn<Hr;cn++)vr.call(void 0,Cr[cn],Er&&Er[cn],rr)}var Xs=RegExp("^(?:([^:/?#.]+):)?(?://(?:([^\\\\/?#]*)@)?([^\\\\/?#]*?)(?::([0-9]+))?(?=[\\\\/?#]|$))?([^?#]+)?(?:\\?([^#]*))?(?:#([\\s\\S]*))?$");function To(rr,vr){if(rr){rr=rr.split("&");for(var Er=0;Er<rr.length;Er++){var Cr=rr[Er].indexOf("="),Hr=null;if(0<=Cr){var cn=rr[Er].substring(0,Cr);Hr=rr[Er].substring(Cr+1)}else cn=rr[Er];vr(cn,Hr?decodeURIComponent(Hr.replace(/\+/g," ")):"")}}}function cs(rr){if(this.g=this.o=this.j="",this.s=null,this.m=this.l="",this.h=!1,rr instanceof cs){this.h=rr.h,Ts(this,rr.j),this.o=rr.o,this.g=rr.g,Ss(this,rr.s),this.l=rr.l;var vr=rr.i,Er=new ys;Er.i=vr.i,vr.g&&(Er.g=new Map(vr.g),Er.h=vr.h),Zs(this,Er),this.m=rr.m}else rr&&(vr=String(rr).match(Xs))?(this.h=!1,Ts(this,vr[1]||"",!0),this.o=gs(vr[2]||""),this.g=gs(vr[3]||"",!0),Ss(this,vr[4]),this.l=gs(vr[5]||"",!0),Zs(this,vr[6]||"",!0),this.m=gs(vr[7]||"")):(this.h=!1,this.i=new ys(null,this.h))}cs.prototype.toString=function(){var rr=[],vr=this.j;vr&&rr.push(_s(vr,Ys,!0),":");var Er=this.g;return(Er||vr=="file")&&(rr.push("//"),(vr=this.o)&&rr.push(_s(vr,Ys,!0),"@"),rr.push(encodeURIComponent(String(Er)).replace(/%25([0-9a-fA-F]{2})/g,"%$1")),Er=this.s,Er!=null&&rr.push(":",String(Er))),(Er=this.l)&&(this.g&&Er.charAt(0)!="/"&&rr.push("/"),rr.push(_s(Er,Er.charAt(0)=="/"?Po:Io,!0))),(Er=this.i.toString())&&rr.push("?",Er),(Er=this.m)&&rr.push("#",_s(Er,ko)),rr.join("")};function ss(rr){return new cs(rr)}function Ts(rr,vr,Er){rr.j=Er?gs(vr,!0):vr,rr.j&&(rr.j=rr.j.replace(/:$/,""))}function Ss(rr,vr){if(vr){if(vr=Number(vr),isNaN(vr)||0>vr)throw Error("Bad port number "+vr);rr.s=vr}else rr.s=null}function Zs(rr,vr,Er){vr instanceof ys?(rr.i=vr,Bo(rr.i,rr.h)):(Er||(vr=_s(vr,Co)),rr.i=new ys(vr,rr.h))}function Jn(rr,vr,Er){rr.i.set(vr,Er)}function Is(rr){return Jn(rr,"zx",Math.floor(2147483648*Math.random()).toString(36)+Math.abs(Math.floor(2147483648*Math.random())^Date.now()).toString(36)),rr}function gs(rr,vr){return rr?vr?decodeURI(rr.replace(/%25/g,"%2525")):decodeURIComponent(rr):""}function _s(rr,vr,Er){return typeof rr=="string"?(rr=encodeURI(rr).replace(vr,So),Er&&(rr=rr.replace(/%25([0-9a-fA-F]{2})/g,"%$1")),rr):null}function So(rr){return rr=rr.charCodeAt(0),"%"+(rr>>4&15).toString(16)+(rr&15).toString(16)}var Ys=/[#\/\?@]/g,Io=/[#\?:]/g,Po=/[#\?]/g,Co=/[#\?@]/g,ko=/#/g;function ys(rr,vr){this.h=this.g=null,this.i=rr||null,this.j=!!vr}function as(rr){rr.g||(rr.g=new Map,rr.h=0,rr.i&&To(rr.i,function(vr,Er){rr.add(decodeURIComponent(vr.replace(/\+/g," ")),Er)}))}s=ys.prototype,s.add=function(rr,vr){as(this),this.i=null,rr=ps(this,rr);var Er=this.g.get(rr);return Er||this.g.set(rr,Er=[]),Er.push(vr),this.h+=1,this};function Js(rr,vr){as(rr),vr=ps(rr,vr),rr.g.has(vr)&&(rr.i=null,rr.h-=rr.g.get(vr).length,rr.g.delete(vr))}function eo(rr,vr){return as(rr),vr=ps(rr,vr),rr.g.has(vr)}s.forEach=function(rr,vr){as(this),this.g.forEach(function(Er,Cr){Er.forEach(function(Hr){rr.call(vr,Hr,Cr,this)},this)},this)},s.na=function(){as(this);const rr=Array.from(this.g.values()),vr=Array.from(this.g.keys()),Er=[];for(let Cr=0;Cr<vr.length;Cr++){const Hr=rr[Cr];for(let cn=0;cn<Hr.length;cn++)Er.push(vr[Cr])}return Er},s.V=function(rr){as(this);let vr=[];if(typeof rr=="string")eo(this,rr)&&(vr=vr.concat(this.g.get(ps(this,rr))));else{rr=Array.from(this.g.values());for(let Er=0;Er<rr.length;Er++)vr=vr.concat(rr[Er])}return vr},s.set=function(rr,vr){return as(this),this.i=null,rr=ps(this,rr),eo(this,rr)&&(this.h-=this.g.get(rr).length),this.g.set(rr,[vr]),this.h+=1,this},s.get=function(rr,vr){return rr?(rr=this.V(rr),0<rr.length?String(rr[0]):vr):vr};function to(rr,vr,Er){Js(rr,vr),0<Er.length&&(rr.i=null,rr.g.set(ps(rr,vr),Qt(Er)),rr.h+=Er.length)}s.toString=function(){if(this.i)return this.i;if(!this.g)return"";const rr=[],vr=Array.from(this.g.keys());for(var Er=0;Er<vr.length;Er++){var Cr=vr[Er];const cn=encodeURIComponent(String(Cr)),_n=this.V(Cr);for(Cr=0;Cr<_n.length;Cr++){var Hr=cn;_n[Cr]!==""&&(Hr+="="+encodeURIComponent(String(_n[Cr]))),rr.push(Hr)}}return this.i=rr.join("&")};function ps(rr,vr){return vr=String(vr),rr.j&&(vr=vr.toLowerCase()),vr}function Bo(rr,vr){vr&&!rr.j&&(as(rr),rr.i=null,rr.g.forEach(function(Er,Cr){var Hr=Cr.toLowerCase();Cr!=Hr&&(Js(this,Cr),to(this,Hr,Er))},rr)),rr.j=vr}function Do(rr,vr){const Er=new Mn;if(_e.Image){const Cr=new Image;Cr.onload=Ot(us,Er,"TestLoadImage: loaded",!0,vr,Cr),Cr.onerror=Ot(us,Er,"TestLoadImage: error",!1,vr,Cr),Cr.onabort=Ot(us,Er,"TestLoadImage: abort",!1,vr,Cr),Cr.ontimeout=Ot(us,Er,"TestLoadImage: timeout",!1,vr,Cr),_e.setTimeout(function(){Cr.ontimeout&&Cr.ontimeout()},1e4),Cr.src=rr}else vr(!1)}function $o(rr,vr){const Er=new Mn,Cr=new AbortController,Hr=setTimeout(()=>{Cr.abort(),us(Er,"TestPingServer: timeout",!1,vr)},1e4);fetch(rr,{signal:Cr.signal}).then(cn=>{clearTimeout(Hr),cn.ok?us(Er,"TestPingServer: ok",!0,vr):us(Er,"TestPingServer: server error",!1,vr)}).catch(()=>{clearTimeout(Hr),us(Er,"TestPingServer: error",!1,vr)})}function us(rr,vr,Er,Cr,Hr){try{Hr&&(Hr.onload=null,Hr.onerror=null,Hr.onabort=null,Hr.ontimeout=null),Cr(Er)}catch{}}function qo(){this.g=new jr}function Fo(rr,vr,Er){const Cr=Er||"";try{Qs(rr,function(Hr,cn){let _n=Hr;yt(Hr)&&(_n=Vr(Hr)),vr.push(Cr+cn+"="+encodeURIComponent(_n))})}catch(Hr){throw vr.push(Cr+"type="+encodeURIComponent("_badmap")),Hr}}function Ps(rr){this.l=rr.Ub||null,this.j=rr.eb||!1}Lt(Ps,An),Ps.prototype.g=function(){return new Cs(this.l,this.j)},Ps.prototype.i=function(rr){return function(){return rr}}({});function Cs(rr,vr){xn.call(this),this.D=rr,this.o=vr,this.m=void 0,this.status=this.readyState=0,this.responseType=this.responseText=this.response=this.statusText="",this.onreadystatechange=null,this.u=new Headers,this.h=null,this.B="GET",this.A="",this.g=!1,this.v=this.j=this.l=null}Lt(Cs,xn),s=Cs.prototype,s.open=function(rr,vr){if(this.readyState!=0)throw this.abort(),Error("Error reopening a connection");this.B=rr,this.A=vr,this.readyState=1,xs(this)},s.send=function(rr){if(this.readyState!=1)throw this.abort(),Error("need to call open() first. ");this.g=!0;const vr={headers:this.u,method:this.B,credentials:this.m,cache:void 0};rr&&(vr.body=rr),(this.D||_e).fetch(new Request(this.A,vr)).then(this.Sa.bind(this),this.ga.bind(this))},s.abort=function(){this.response=this.responseText="",this.u=new Headers,this.status=0,this.j&&this.j.cancel("Request was aborted.").catch(()=>{}),1<=this.readyState&&this.g&&this.readyState!=4&&(this.g=!1,bs(this)),this.readyState=0},s.Sa=function(rr){if(this.g&&(this.l=rr,this.h||(this.status=this.l.status,this.statusText=this.l.statusText,this.h=rr.headers,this.readyState=2,xs(this)),this.g&&(this.readyState=3,xs(this),this.g)))if(this.responseType==="arraybuffer")rr.arrayBuffer().then(this.Qa.bind(this),this.ga.bind(this));else if(typeof _e.ReadableStream<"u"&&"body"in rr){if(this.j=rr.body.getReader(),this.o){if(this.responseType)throw Error('responseType must be empty for "streamBinaryChunks" mode responses.');this.response=[]}else this.response=this.responseText="",this.v=new TextDecoder;ro(this)}else rr.text().then(this.Ra.bind(this),this.ga.bind(this))};function ro(rr){rr.j.read().then(rr.Pa.bind(rr)).catch(rr.ga.bind(rr))}s.Pa=function(rr){if(this.g){if(this.o&&rr.value)this.response.push(rr.value);else if(!this.o){var vr=rr.value?rr.value:new Uint8Array(0);(vr=this.v.decode(vr,{stream:!rr.done}))&&(this.response=this.responseText+=vr)}rr.done?bs(this):xs(this),this.readyState==3&&ro(this)}},s.Ra=function(rr){this.g&&(this.response=this.responseText=rr,bs(this))},s.Qa=function(rr){this.g&&(this.response=rr,bs(this))},s.ga=function(){this.g&&bs(this)};function bs(rr){rr.readyState=4,rr.l=null,rr.j=null,rr.v=null,xs(rr)}s.setRequestHeader=function(rr,vr){this.u.append(rr,vr)},s.getResponseHeader=function(rr){return this.h&&this.h.get(rr.toLowerCase())||""},s.getAllResponseHeaders=function(){if(!this.h)return"";const rr=[],vr=this.h.entries();for(var Er=vr.next();!Er.done;)Er=Er.value,rr.push(Er[0]+": "+Er[1]),Er=vr.next();return rr.join(`\r
`)};function xs(rr){rr.onreadystatechange&&rr.onreadystatechange.call(rr)}Object.defineProperty(Cs.prototype,"withCredentials",{get:function(){return this.m==="include"},set:function(rr){this.m=rr?"include":"same-origin"}});function no(rr){let vr="";return _r(rr,function(Er,Cr){vr+=Cr,vr+=":",vr+=Er,vr+=`\r
`}),vr}function Vs(rr,vr,Er){e:{for(Cr in Er){var Cr=!1;break e}Cr=!0}Cr||(Er=no(Er),typeof rr=="string"?Er!=null&&encodeURIComponent(String(Er)):Jn(rr,vr,Er))}function _i(rr){xn.call(this),this.headers=new Map,this.o=rr||null,this.h=!1,this.v=this.g=null,this.D="",this.m=0,this.l="",this.j=this.B=this.u=this.A=!1,this.I=null,this.H="",this.J=!1}Lt(_i,xn);var Vo=/^https?$/i,No=["POST","PUT"];s=_i.prototype,s.Ha=function(rr){this.J=rr},s.ea=function(rr,vr,Er,Cr){if(this.g)throw Error("[goog.net.XhrIo] Object is active with another request="+this.D+"; newUri="+rr);vr=vr?vr.toUpperCase():"GET",this.D=rr,this.l="",this.m=0,this.A=!1,this.h=!0,this.g=this.o?this.o.g():mn.g(),this.v=this.o?Ur(this.o):Ur(mn),this.g.onreadystatechange=qt(this.Ea,this);try{this.B=!0,this.g.open(vr,String(rr),!0),this.B=!1}catch(cn){io(this,cn);return}if(rr=Er||"",Er=new Map(this.headers),Cr)if(Object.getPrototypeOf(Cr)===Object.prototype)for(var Hr in Cr)Er.set(Hr,Cr[Hr]);else if(typeof Cr.keys=="function"&&typeof Cr.get=="function")for(const cn of Cr.keys())Er.set(cn,Cr.get(cn));else throw Error("Unknown input type for opt_headers: "+String(Cr));Cr=Array.from(Er.keys()).find(cn=>cn.toLowerCase()=="content-type"),Hr=_e.FormData&&rr instanceof _e.FormData,!(0<=Array.prototype.indexOf.call(No,vr,void 0))||Cr||Hr||Er.set("Content-Type","application/x-www-form-urlencoded;charset=utf-8");for(const[cn,_n]of Er)this.g.setRequestHeader(cn,_n);this.H&&(this.g.responseType=this.H),"withCredentials"in this.g&&this.g.withCredentials!==this.J&&(this.g.withCredentials=this.J);try{ao(this),this.u=!0,this.g.send(rr),this.u=!1}catch(cn){io(this,cn)}};function io(rr,vr){rr.h=!1,rr.g&&(rr.j=!0,rr.g.abort(),rr.j=!1),rr.l=vr,rr.m=5,so(rr),ks(rr)}function so(rr){rr.A||(rr.A=!0,Or(rr,"complete"),Or(rr,"error"))}s.abort=function(rr){this.g&&this.h&&(this.h=!1,this.j=!0,this.g.abort(),this.j=!1,this.m=rr||7,Or(this,"complete"),Or(this,"abort"),ks(this))},s.N=function(){this.g&&(this.h&&(this.h=!1,this.j=!0,this.g.abort(),this.j=!1),ks(this,!0)),_i.aa.N.call(this)},s.Ea=function(){this.s||(this.B||this.u||this.j?oo(this):this.bb())},s.bb=function(){oo(this)};function oo(rr){if(rr.h&&typeof j<"u"&&(!rr.v[1]||os(rr)!=4||rr.Z()!=2)){if(rr.u&&os(rr)==4)Pn(rr.Ea,0,rr);else if(Or(rr,"readystatechange"),os(rr)==4){rr.h=!1;try{const _n=rr.Z();e:switch(_n){case 200:case 201:case 202:case 204:case 206:case 304:case 1223:var vr=!0;break e;default:vr=!1}var Er;if(!(Er=vr)){var Cr;if(Cr=_n===0){var Hr=String(rr.D).match(Xs)[1]||null;!Hr&&_e.self&&_e.self.location&&(Hr=_e.self.location.protocol.slice(0,-1)),Cr=!Vo.test(Hr?Hr.toLowerCase():"")}Er=Cr}if(Er)Or(rr,"complete"),Or(rr,"success");else{rr.m=6;try{var cn=2<os(rr)?rr.g.statusText:""}catch{cn=""}rr.l=cn+" ["+rr.Z()+"]",so(rr)}}finally{ks(rr)}}}}function ks(rr,vr){if(rr.g){ao(rr);const Er=rr.g,Cr=rr.v[0]?()=>{}:null;rr.g=null,rr.v=null,vr||Or(rr,"ready");try{Er.onreadystatechange=Cr}catch{}}}function ao(rr){rr.I&&(_e.clearTimeout(rr.I),rr.I=null)}s.isActive=function(){return!!this.g};function os(rr){return rr.g?rr.g.readyState:0}s.Z=function(){try{return 2<os(this)?this.g.status:-1}catch{return-1}},s.oa=function(){try{return this.g?this.g.responseText:""}catch{return""}},s.Oa=function(rr){if(this.g){var vr=this.g.responseText;return rr&&vr.indexOf(rr)==0&&(vr=vr.substring(rr.length)),Br(vr)}};function uo(rr){try{if(!rr.g)return null;if("response"in rr.g)return rr.g.response;switch(rr.H){case"":case"text":return rr.g.responseText;case"arraybuffer":if("mozResponseArrayBuffer"in rr.g)return rr.g.mozResponseArrayBuffer}return null}catch{return null}}function Oo(rr){const vr={};rr=(rr.g&&2<=os(rr)&&rr.g.getAllResponseHeaders()||"").split(`\r
`);for(let Cr=0;Cr<rr.length;Cr++){if(tr(rr[Cr]))continue;var Er=Mt(rr[Cr]);const Hr=Er[0];if(Er=Er[1],typeof Er!="string")continue;Er=Er.trim();const cn=vr[Hr]||[];vr[Hr]=cn,cn.push(Er)}dr(vr,function(Cr){return Cr.join(", ")})}s.Ba=function(){return this.m},s.Ka=function(){return typeof this.l=="string"?this.l:String(this.l)};function ws(rr,vr,Er){return Er&&Er.internalChannelParams&&Er.internalChannelParams[rr]||vr}function lo(rr){this.Aa=0,this.i=[],this.j=new Mn,this.ia=this.qa=this.I=this.W=this.g=this.ya=this.D=this.H=this.m=this.S=this.o=null,this.Ya=this.U=0,this.Va=ws("failFast",!1,rr),this.F=this.C=this.u=this.s=this.l=null,this.X=!0,this.za=this.T=-1,this.Y=this.v=this.B=0,this.Ta=ws("baseRetryDelayMs",5e3,rr),this.cb=ws("retryDelaySeedMs",1e4,rr),this.Wa=ws("forwardChannelMaxRetries",2,rr),this.wa=ws("forwardChannelRequestTimeoutMs",2e4,rr),this.pa=rr&&rr.xmlHttpFactory||void 0,this.Xa=rr&&rr.Tb||void 0,this.Ca=rr&&rr.useFetchStreams||!1,this.L=void 0,this.J=rr&&rr.supportsCrossDomainXhr||!1,this.K="",this.h=new Gn(rr&&rr.concurrentRequestLimit),this.Da=new qo,this.P=rr&&rr.fastHandshake||!1,this.O=rr&&rr.encodeInitMessageHeaders||!1,this.P&&this.O&&(this.O=!1),this.Ua=rr&&rr.Rb||!1,rr&&rr.xa&&this.j.xa(),rr&&rr.forceLongPolling&&(this.X=!1),this.ba=!this.P&&this.X&&rr&&rr.detectBufferingProxy||!1,this.ja=void 0,rr&&rr.longPollingTimeout&&0<rr.longPollingTimeout&&(this.ja=rr.longPollingTimeout),this.ca=void 0,this.R=0,this.M=!1,this.ka=this.A=null}s=lo.prototype,s.la=8,s.G=1,s.connect=function(rr,vr,Er,Cr){Rn(0),this.W=rr,this.H=vr||{},Er&&Cr!==void 0&&(this.H.OSID=Er,this.H.OAID=Cr),this.F=this.X,this.I=yo(this,null,this.W),Ds(this)};function Ns(rr){if(fo(rr),rr.G==3){var vr=rr.U++,Er=ss(rr.I);if(Jn(Er,"SID",rr.K),Jn(Er,"RID",vr),Jn(Er,"TYPE","terminate"),Es(rr,Er),vr=new Tn(rr,rr.j,vr),vr.L=2,vr.v=Is(ss(Er)),Er=!1,_e.navigator&&_e.navigator.sendBeacon)try{Er=_e.navigator.sendBeacon(vr.v.toString(),"")}catch{}!Er&&_e.Image&&(new Image().src=vr.v,Er=!0),Er||(vr.g=bo(vr.j,null),vr.g.ea(vr.v)),vr.F=Date.now(),qn(vr)}_o(rr)}function Bs(rr){rr.g&&(Ls(rr),rr.g.cancel(),rr.g=null)}function fo(rr){Bs(rr),rr.u&&(_e.clearTimeout(rr.u),rr.u=null),$s(rr),rr.h.cancel(),rr.s&&(typeof rr.s=="number"&&_e.clearTimeout(rr.s),rr.s=null)}function Ds(rr){if(!Kn(rr.h)&&!rr.s){rr.s=!0;var vr=rr.Ga;kt||g(),Ft||(kt(),Ft=!0),xt.add(vr,rr),rr.B=0}}function Lo(rr,vr){return Qn(rr.h)>=rr.h.j-(rr.s?1:0)?!1:rr.s?(rr.i=vr.D.concat(rr.i),!0):rr.G==1||rr.G==2||rr.B>=(rr.Va?0:rr.Wa)?!1:(rr.s=un(qt(rr.Ga,rr,vr),go(rr,rr.B)),rr.B++,!0)}s.Ga=function(rr){if(this.s)if(this.s=null,this.G==1){if(!rr){this.U=Math.floor(1e5*Math.random()),rr=this.U++;const Hr=new Tn(this,this.j,rr);let cn=this.o;if(this.S&&(cn?(cn=ur(cn),gr(cn,this.S)):cn=this.S),this.m!==null||this.O||(Hr.H=cn,cn=null),this.P)e:{for(var vr=0,Er=0;Er<this.i.length;Er++){t:{var Cr=this.i[Er];if("__data__"in Cr.map&&(Cr=Cr.map.__data__,typeof Cr=="string")){Cr=Cr.length;break t}Cr=void 0}if(Cr===void 0)break;if(vr+=Cr,4096<vr){vr=Er;break e}if(vr===4096||Er===this.i.length-1){vr=Er+1;break e}}vr=1e3}else vr=1e3;vr=ho(this,Hr,vr),Er=ss(this.I),Jn(Er,"RID",rr),Jn(Er,"CVER",22),this.D&&Jn(Er,"X-HTTP-Session-Id",this.D),Es(this,Er),cn&&(this.O?vr="headers="+encodeURIComponent(String(no(cn)))+"&"+vr:this.m&&Vs(Er,this.m,cn)),fs(this.h,Hr),this.Ua&&Jn(Er,"TYPE","init"),this.P?(Jn(Er,"$req",vr),Jn(Er,"SID","null"),Hr.T=!0,Nn(Hr,Er,null)):Nn(Hr,Er,vr),this.G=2}}else this.G==3&&(rr?co(this,rr):this.i.length==0||Kn(this.h)||co(this))};function co(rr,vr){var Er;vr?Er=vr.l:Er=rr.U++;const Cr=ss(rr.I);Jn(Cr,"SID",rr.K),Jn(Cr,"RID",Er),Jn(Cr,"AID",rr.T),Es(rr,Cr),rr.m&&rr.o&&Vs(Cr,rr.m,rr.o),Er=new Tn(rr,rr.j,Er,rr.B+1),rr.m===null&&(Er.H=rr.o),vr&&(rr.i=vr.D.concat(rr.i)),vr=ho(rr,Er,1e3),Er.I=Math.round(.5*rr.wa)+Math.round(.5*rr.wa*Math.random()),fs(rr.h,Er),Nn(Er,Cr,vr)}function Es(rr,vr){rr.H&&_r(rr.H,function(Er,Cr){Jn(vr,Cr,Er)}),rr.l&&Qs({},function(Er,Cr){Jn(vr,Cr,Er)})}function ho(rr,vr,Er){Er=Math.min(rr.i.length,Er);var Cr=rr.l?qt(rr.l.Na,rr.l,rr):null;e:{var Hr=rr.i;let cn=-1;for(;;){const _n=["count="+Er];cn==-1?0<Er?(cn=Hr[0].g,_n.push("ofs="+cn)):cn=0:_n.push("ofs="+cn);let Yn=!0;for(let es=0;es<Er;es++){let Fn=Hr[es].g;const ts=Hr[es].map;if(Fn-=cn,0>Fn)cn=Math.max(0,Hr[es].g-100),Yn=!1;else try{Fo(ts,_n,"req"+Fn+"_")}catch{Cr&&Cr(ts)}}if(Yn){Cr=_n.join("&");break e}}}return rr=rr.i.splice(0,Er),vr.D=rr,Cr}function po(rr){if(!rr.g&&!rr.u){rr.Y=1;var vr=rr.Fa;kt||g(),Ft||(kt(),Ft=!0),xt.add(vr,rr),rr.v=0}}function Os(rr){return rr.g||rr.u||3<=rr.v?!1:(rr.Y++,rr.u=un(qt(rr.Fa,rr),go(rr,rr.v)),rr.v++,!0)}s.Fa=function(){if(this.u=null,mo(this),this.ba&&!(this.M||this.g==null||0>=this.R)){var rr=2*this.R;this.j.info("BP detection timer enabled: "+rr),this.A=un(qt(this.ab,this),rr)}},s.ab=function(){this.A&&(this.A=null,this.j.info("BP detection timeout reached."),this.j.info("Buffering proxy detected and switch to long-polling!"),this.F=!1,this.M=!0,Rn(10),Bs(this),mo(this))};function Ls(rr){rr.A!=null&&(_e.clearTimeout(rr.A),rr.A=null)}function mo(rr){rr.g=new Tn(rr,rr.j,"rpc",rr.Y),rr.m===null&&(rr.g.H=rr.o),rr.g.O=0;var vr=ss(rr.qa);Jn(vr,"RID","rpc"),Jn(vr,"SID",rr.K),Jn(vr,"AID",rr.T),Jn(vr,"CI",rr.F?"0":"1"),!rr.F&&rr.ja&&Jn(vr,"TO",rr.ja),Jn(vr,"TYPE","xmlhttp"),Es(rr,vr),rr.m&&rr.o&&Vs(vr,rr.m,rr.o),rr.L&&(rr.g.I=rr.L);var Er=rr.g;rr=rr.ia,Er.L=1,Er.v=Is(ss(vr)),Er.m=null,Er.P=!0,zn(Er,rr)}s.Za=function(){this.C!=null&&(this.C=null,Bs(this),Os(this),Rn(19))};function $s(rr){rr.C!=null&&(_e.clearTimeout(rr.C),rr.C=null)}function vo(rr,vr){var Er=null;if(rr.g==vr){$s(rr),Ls(rr),rr.g=null;var Cr=2}else if(ls(rr.h,vr))Er=vr.D,Gs(rr.h,vr),Cr=1;else return;if(rr.G!=0){if(vr.o)if(Cr==1){Er=vr.m?vr.m.length:0,vr=Date.now()-vr.F;var Hr=rr.B;Cr=fn(),Or(Cr,new Zr(Cr,Er)),Ds(rr)}else po(rr);else if(Hr=vr.s,Hr==3||Hr==0&&0<vr.X||!(Cr==1&&Lo(rr,vr)||Cr==2&&Os(rr)))switch(Er&&0<Er.length&&(vr=rr.h,vr.i=vr.i.concat(Er)),Hr){case 1:hs(rr,5);break;case 4:hs(rr,10);break;case 3:hs(rr,6);break;default:hs(rr,2)}}}function go(rr,vr){let Er=rr.Ta+Math.floor(Math.random()*rr.cb);return rr.isActive()||(Er*=2),Er*vr}function hs(rr,vr){if(rr.j.info("Error code "+vr),vr==2){var Er=qt(rr.fb,rr),Cr=rr.Xa;const Hr=!Cr;Cr=new cs(Cr||"//www.google.com/images/cleardot.gif"),_e.location&&_e.location.protocol=="http"||Ts(Cr,"https"),Is(Cr),Hr?Do(Cr.toString(),Er):$o(Cr.toString(),Er)}else Rn(2);rr.G=0,rr.l&&rr.l.sa(vr),_o(rr),fo(rr)}s.fb=function(rr){rr?(this.j.info("Successfully pinged google.com"),Rn(2)):(this.j.info("Failed to ping google.com"),Rn(1))};function _o(rr){if(rr.G=0,rr.ka=[],rr.l){const vr=Ks(rr.h);(vr.length!=0||rr.i.length!=0)&&(ir(rr.ka,vr),ir(rr.ka,rr.i),rr.h.i.length=0,Qt(rr.i),rr.i.length=0),rr.l.ra()}}function yo(rr,vr,Er){var Cr=Er instanceof cs?ss(Er):new cs(Er);if(Cr.g!="")vr&&(Cr.g=vr+"."+Cr.g),Ss(Cr,Cr.s);else{var Hr=_e.location;Cr=Hr.protocol,vr=vr?vr+"."+Hr.hostname:Hr.hostname,Hr=+Hr.port;var cn=new cs(null);Cr&&Ts(cn,Cr),vr&&(cn.g=vr),Hr&&Ss(cn,Hr),Er&&(cn.l=Er),Cr=cn}return Er=rr.D,vr=rr.ya,Er&&vr&&Jn(Cr,Er,vr),Jn(Cr,"VER",rr.la),Es(rr,Cr),Cr}function bo(rr,vr,Er){if(vr&&!rr.J)throw Error("Can't create secondary domain capable XhrIo object.");return vr=rr.Ca&&!rr.pa?new _i(new Ps({eb:Er})):new _i(rr.pa),vr.Ha(rr.J),vr}s.isActive=function(){return!!this.l&&this.l.isActive(this)};function xo(){}s=xo.prototype,s.ua=function(){},s.ta=function(){},s.sa=function(){},s.ra=function(){},s.isActive=function(){return!0},s.Na=function(){};function qs(){}qs.prototype.g=function(rr,vr){return new ns(rr,vr)};function ns(rr,vr){xn.call(this),this.g=new lo(vr),this.l=rr,this.h=vr&&vr.messageUrlParams||null,rr=vr&&vr.messageHeaders||null,vr&&vr.clientProtocolHeaderRequired&&(rr?rr["X-Client-Protocol"]="webchannel":rr={"X-Client-Protocol":"webchannel"}),this.g.o=rr,rr=vr&&vr.initMessageHeaders||null,vr&&vr.messageContentType&&(rr?rr["X-WebChannel-Content-Type"]=vr.messageContentType:rr={"X-WebChannel-Content-Type":vr.messageContentType}),vr&&vr.va&&(rr?rr["X-WebChannel-Client-Profile"]=vr.va:rr={"X-WebChannel-Client-Profile":vr.va}),this.g.S=rr,(rr=vr&&vr.Sb)&&!tr(rr)&&(this.g.m=rr),this.v=vr&&vr.supportsCrossDomainXhr||!1,this.u=vr&&vr.sendRawJson||!1,(vr=vr&&vr.httpSessionIdParam)&&!tr(vr)&&(this.g.D=vr,rr=this.h,rr!==null&&vr in rr&&(rr=this.h,vr in rr&&delete rr[vr])),this.j=new ms(this)}Lt(ns,xn),ns.prototype.m=function(){this.g.l=this.j,this.v&&(this.g.J=!0),this.g.connect(this.l,this.h||void 0)},ns.prototype.close=function(){Ns(this.g)},ns.prototype.o=function(rr){var vr=this.g;if(typeof rr=="string"){var Er={};Er.__data__=rr,rr=Er}else this.u&&(Er={},Er.__data__=Vr(rr),rr=Er);vr.i.push(new Zn(vr.Ya++,rr)),vr.G==3&&Ds(vr)},ns.prototype.N=function(){this.g.l=null,delete this.j,Ns(this.g),delete this.g,ns.aa.N.call(this)};function wo(rr){Xr.call(this),rr.__headers__&&(this.headers=rr.__headers__,this.statusCode=rr.__status__,delete rr.__headers__,delete rr.__status__);var vr=rr.__sm__;if(vr){e:{for(const Er in vr){rr=Er;break e}rr=void 0}(this.i=rr)&&(rr=this.i,vr=vr!==null&&rr in vr?vr[rr]:void 0),this.data=vr}else this.data=rr}Lt(wo,Xr);function Eo(){hn.call(this),this.status=1}Lt(Eo,hn);function ms(rr){this.g=rr}Lt(ms,xo),ms.prototype.ua=function(){Or(this.g,"a")},ms.prototype.ta=function(rr){Or(this.g,new wo(rr))},ms.prototype.sa=function(rr){Or(this.g,new Eo)},ms.prototype.ra=function(){Or(this.g,"b")},qs.prototype.createWebChannel=qs.prototype.g,ns.prototype.send=ns.prototype.o,ns.prototype.open=ns.prototype.m,ns.prototype.close=ns.prototype.close,createWebChannelTransport=function(){return new qs},getStatEventTarget=function(){return fn()},Event$1=In,Stat={mb:0,pb:1,qb:2,Jb:3,Ob:4,Lb:5,Mb:6,Kb:7,Ib:8,Nb:9,PROXY:10,NOPROXY:11,Gb:12,Cb:13,Db:14,Bb:15,Eb:16,Fb:17,ib:18,hb:19,jb:20},Bn.NO_ERROR=0,Bn.TIMEOUT=8,Bn.HTTP_ERROR=6,ErrorCode$1=Bn,an.COMPLETE="complete",EventType=an,Gr.EventType=wn,wn.OPEN="a",wn.CLOSE="b",wn.ERROR="c",wn.MESSAGE="d",xn.prototype.listen=xn.prototype.K,WebChannel=Gr,_i.prototype.listenOnce=_i.prototype.L,_i.prototype.getLastError=_i.prototype.Ka,_i.prototype.getLastErrorCode=_i.prototype.Ba,_i.prototype.getStatus=_i.prototype.Z,_i.prototype.getResponseJson=_i.prototype.Oa,_i.prototype.getResponseText=_i.prototype.oa,_i.prototype.send=_i.prototype.ea,_i.prototype.setWithCredentials=_i.prototype.Ha,XhrIo=_i}).apply(typeof commonjsGlobal<"u"?commonjsGlobal:typeof self<"u"?self:typeof window<"u"?window:{});const S="@firebase/firestore",D="4.7.11";/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class User{constructor(e){this.uid=e}isAuthenticated(){return this.uid!=null}toKey(){return this.isAuthenticated()?"uid:"+this.uid:"anonymous-user"}isEqual(e){return e.uid===this.uid}}User.UNAUTHENTICATED=new User(null),User.GOOGLE_CREDENTIALS=new User("google-credentials-uid"),User.FIRST_PARTY=new User("first-party-uid"),User.MOCK_USER=new User("mock-user");/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let v="11.6.1";/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const C=new Logger("@firebase/firestore");function __PRIVATE_getLogLevel(){return C.logLevel}function __PRIVATE_logDebug(s,...e){if(C.logLevel<=LogLevel.DEBUG){const o=e.map(__PRIVATE_argToString);C.debug(`Firestore (${v}): ${s}`,...o)}}function __PRIVATE_logError(s,...e){if(C.logLevel<=LogLevel.ERROR){const o=e.map(__PRIVATE_argToString);C.error(`Firestore (${v}): ${s}`,...o)}}function __PRIVATE_logWarn(s,...e){if(C.logLevel<=LogLevel.WARN){const o=e.map(__PRIVATE_argToString);C.warn(`Firestore (${v}): ${s}`,...o)}}function __PRIVATE_argToString(s){if(typeof s=="string")return s;try{/**
* @license
* Copyright 2020 Google LLC
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*   http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/return function(o){return JSON.stringify(o)}(s)}catch{return s}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function fail(s,e,o){let a="Unexpected state";typeof e=="string"?a=e:o=e,__PRIVATE__fail(s,a,o)}function __PRIVATE__fail(s,e,o){let a=`FIRESTORE (${v}) INTERNAL ASSERTION FAILED: ${e} (ID: ${s.toString(16)})`;if(o!==void 0)try{a+=" CONTEXT: "+JSON.stringify(o)}catch{a+=" CONTEXT: "+o}throw __PRIVATE_logError(a),new Error(a)}function __PRIVATE_hardAssert(s,e,o,a){let d="Unexpected state";typeof o=="string"?d=o:a=o,s||__PRIVATE__fail(e,d,a)}function __PRIVATE_debugCast(s,e){return s}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const F={OK:"ok",CANCELLED:"cancelled",UNKNOWN:"unknown",INVALID_ARGUMENT:"invalid-argument",DEADLINE_EXCEEDED:"deadline-exceeded",NOT_FOUND:"not-found",ALREADY_EXISTS:"already-exists",PERMISSION_DENIED:"permission-denied",UNAUTHENTICATED:"unauthenticated",RESOURCE_EXHAUSTED:"resource-exhausted",FAILED_PRECONDITION:"failed-precondition",ABORTED:"aborted",OUT_OF_RANGE:"out-of-range",UNIMPLEMENTED:"unimplemented",INTERNAL:"internal",UNAVAILABLE:"unavailable",DATA_LOSS:"data-loss"};class FirestoreError extends FirebaseError{constructor(e,o){super(e,o),this.code=e,this.message=o,this.toString=()=>`${this.name}: [code=${this.code}]: ${this.message}`}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class __PRIVATE_Deferred{constructor(){this.promise=new Promise((e,o)=>{this.resolve=e,this.reject=o})}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class __PRIVATE_OAuthToken{constructor(e,o){this.user=o,this.type="OAuth",this.headers=new Map,this.headers.set("Authorization",`Bearer ${e}`)}}class __PRIVATE_EmptyAuthCredentialsProvider{getToken(){return Promise.resolve(null)}invalidateToken(){}start(e,o){e.enqueueRetryable(()=>o(User.UNAUTHENTICATED))}shutdown(){}}class __PRIVATE_EmulatorAuthCredentialsProvider{constructor(e){this.token=e,this.changeListener=null}getToken(){return Promise.resolve(this.token)}invalidateToken(){}start(e,o){this.changeListener=o,e.enqueueRetryable(()=>o(this.token.user))}shutdown(){this.changeListener=null}}class __PRIVATE_FirebaseAuthCredentialsProvider{constructor(e){this.t=e,this.currentUser=User.UNAUTHENTICATED,this.i=0,this.forceRefresh=!1,this.auth=null}start(e,o){__PRIVATE_hardAssert(this.o===void 0,42304);let a=this.i;const d=pt=>this.i!==a?(a=this.i,o(pt)):Promise.resolve();let c=new __PRIVATE_Deferred;this.o=()=>{this.i++,this.currentUser=this.u(),c.resolve(),c=new __PRIVATE_Deferred,e.enqueueRetryable(()=>d(this.currentUser))};const j=()=>{const pt=c;e.enqueueRetryable(async()=>{await pt.promise,await d(this.currentUser)})},_e=pt=>{__PRIVATE_logDebug("FirebaseAuthCredentialsProvider","Auth detected"),this.auth=pt,this.o&&(this.auth.addAuthTokenListener(this.o),j())};this.t.onInit(pt=>_e(pt)),setTimeout(()=>{if(!this.auth){const pt=this.t.getImmediate({optional:!0});pt?_e(pt):(__PRIVATE_logDebug("FirebaseAuthCredentialsProvider","Auth not yet detected"),c.resolve(),c=new __PRIVATE_Deferred)}},0),j()}getToken(){const e=this.i,o=this.forceRefresh;return this.forceRefresh=!1,this.auth?this.auth.getToken(o).then(a=>this.i!==e?(__PRIVATE_logDebug("FirebaseAuthCredentialsProvider","getToken aborted due to token change."),this.getToken()):a?(__PRIVATE_hardAssert(typeof a.accessToken=="string",31837,{l:a}),new __PRIVATE_OAuthToken(a.accessToken,this.currentUser)):null):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.auth&&this.o&&this.auth.removeAuthTokenListener(this.o),this.o=void 0}u(){const e=this.auth&&this.auth.getUid();return __PRIVATE_hardAssert(e===null||typeof e=="string",2055,{h:e}),new User(e)}}class __PRIVATE_FirstPartyToken{constructor(e,o,a){this.P=e,this.T=o,this.I=a,this.type="FirstParty",this.user=User.FIRST_PARTY,this.A=new Map}R(){return this.I?this.I():null}get headers(){this.A.set("X-Goog-AuthUser",this.P);const e=this.R();return e&&this.A.set("Authorization",e),this.T&&this.A.set("X-Goog-Iam-Authorization-Token",this.T),this.A}}class __PRIVATE_FirstPartyAuthCredentialsProvider{constructor(e,o,a){this.P=e,this.T=o,this.I=a}getToken(){return Promise.resolve(new __PRIVATE_FirstPartyToken(this.P,this.T,this.I))}start(e,o){e.enqueueRetryable(()=>o(User.FIRST_PARTY))}shutdown(){}invalidateToken(){}}class AppCheckToken{constructor(e){this.value=e,this.type="AppCheck",this.headers=new Map,e&&e.length>0&&this.headers.set("x-firebase-appcheck",this.value)}}class __PRIVATE_FirebaseAppCheckTokenProvider{constructor(e,o){this.V=o,this.forceRefresh=!1,this.appCheck=null,this.m=null,this.p=null,_isFirebaseServerApp(e)&&e.settings.appCheckToken&&(this.p=e.settings.appCheckToken)}start(e,o){__PRIVATE_hardAssert(this.o===void 0,3512);const a=c=>{c.error!=null&&__PRIVATE_logDebug("FirebaseAppCheckTokenProvider",`Error getting App Check token; using placeholder token instead. Error: ${c.error.message}`);const j=c.token!==this.m;return this.m=c.token,__PRIVATE_logDebug("FirebaseAppCheckTokenProvider",`Received ${j?"new":"existing"} token.`),j?o(c.token):Promise.resolve()};this.o=c=>{e.enqueueRetryable(()=>a(c))};const d=c=>{__PRIVATE_logDebug("FirebaseAppCheckTokenProvider","AppCheck detected"),this.appCheck=c,this.o&&this.appCheck.addTokenListener(this.o)};this.V.onInit(c=>d(c)),setTimeout(()=>{if(!this.appCheck){const c=this.V.getImmediate({optional:!0});c?d(c):__PRIVATE_logDebug("FirebaseAppCheckTokenProvider","AppCheck not yet detected")}},0)}getToken(){if(this.p)return Promise.resolve(new AppCheckToken(this.p));const e=this.forceRefresh;return this.forceRefresh=!1,this.appCheck?this.appCheck.getToken(e).then(o=>o?(__PRIVATE_hardAssert(typeof o.token=="string",44558,{tokenResult:o}),this.m=o.token,new AppCheckToken(o.token)):null):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.appCheck&&this.o&&this.appCheck.removeTokenListener(this.o),this.o=void 0}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function __PRIVATE_randomBytes(s){const e=typeof self<"u"&&(self.crypto||self.msCrypto),o=new Uint8Array(s);if(e&&typeof e.getRandomValues=="function")e.getRandomValues(o);else for(let a=0;a<s;a++)o[a]=Math.floor(256*Math.random());return o}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function __PRIVATE_newTextEncoder(){return new TextEncoder}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class __PRIVATE_AutoId{static newId(){const e="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",o=62*Math.floor(4.129032258064516);let a="";for(;a.length<20;){const d=__PRIVATE_randomBytes(40);for(let c=0;c<d.length;++c)a.length<20&&d[c]<o&&(a+=e.charAt(d[c]%62))}return a}}function __PRIVATE_primitiveComparator(s,e){return s<e?-1:s>e?1:0}function __PRIVATE_compareUtf8Strings(s,e){let o=0;for(;o<s.length&&o<e.length;){const a=s.codePointAt(o),d=e.codePointAt(o);if(a!==d){if(a<128&&d<128)return __PRIVATE_primitiveComparator(a,d);{const c=__PRIVATE_newTextEncoder(),j=__PRIVATE_compareByteArrays$1(c.encode(__PRIVATE_getUtf8SafeSubstring(s,o)),c.encode(__PRIVATE_getUtf8SafeSubstring(e,o)));return j!==0?j:__PRIVATE_primitiveComparator(a,d)}}o+=a>65535?2:1}return __PRIVATE_primitiveComparator(s.length,e.length)}function __PRIVATE_getUtf8SafeSubstring(s,e){return s.codePointAt(e)>65535?s.substring(e,e+2):s.substring(e,e+1)}function __PRIVATE_compareByteArrays$1(s,e){for(let o=0;o<s.length&&o<e.length;++o)if(s[o]!==e[o])return __PRIVATE_primitiveComparator(s[o],e[o]);return __PRIVATE_primitiveComparator(s.length,e.length)}function __PRIVATE_arrayEquals(s,e,o){return s.length===e.length&&s.every((a,d)=>o(a,e[d]))}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const M=-62135596800,x=1e6;class Timestamp{static now(){return Timestamp.fromMillis(Date.now())}static fromDate(e){return Timestamp.fromMillis(e.getTime())}static fromMillis(e){const o=Math.floor(e/1e3),a=Math.floor((e-1e3*o)*x);return new Timestamp(o,a)}constructor(e,o){if(this.seconds=e,this.nanoseconds=o,o<0)throw new FirestoreError(F.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+o);if(o>=1e9)throw new FirestoreError(F.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+o);if(e<M)throw new FirestoreError(F.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e);if(e>=253402300800)throw new FirestoreError(F.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e)}toDate(){return new Date(this.toMillis())}toMillis(){return 1e3*this.seconds+this.nanoseconds/x}_compareTo(e){return this.seconds===e.seconds?__PRIVATE_primitiveComparator(this.nanoseconds,e.nanoseconds):__PRIVATE_primitiveComparator(this.seconds,e.seconds)}isEqual(e){return e.seconds===this.seconds&&e.nanoseconds===this.nanoseconds}toString(){return"Timestamp(seconds="+this.seconds+", nanoseconds="+this.nanoseconds+")"}toJSON(){return{seconds:this.seconds,nanoseconds:this.nanoseconds}}valueOf(){const e=this.seconds-M;return String(e).padStart(12,"0")+"."+String(this.nanoseconds).padStart(9,"0")}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class SnapshotVersion{static fromTimestamp(e){return new SnapshotVersion(e)}static min(){return new SnapshotVersion(new Timestamp(0,0))}static max(){return new SnapshotVersion(new Timestamp(253402300799,999999999))}constructor(e){this.timestamp=e}compareTo(e){return this.timestamp._compareTo(e.timestamp)}isEqual(e){return this.timestamp.isEqual(e.timestamp)}toMicroseconds(){return 1e6*this.timestamp.seconds+this.timestamp.nanoseconds/1e3}toString(){return"SnapshotVersion("+this.timestamp.toString()+")"}toTimestamp(){return this.timestamp}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const O="__name__";class BasePath{constructor(e,o,a){o===void 0?o=0:o>e.length&&fail(637,{offset:o,range:e.length}),a===void 0?a=e.length-o:a>e.length-o&&fail(1746,{length:a,range:e.length-o}),this.segments=e,this.offset=o,this.len=a}get length(){return this.len}isEqual(e){return BasePath.comparator(this,e)===0}child(e){const o=this.segments.slice(this.offset,this.limit());return e instanceof BasePath?e.forEach(a=>{o.push(a)}):o.push(e),this.construct(o)}limit(){return this.offset+this.length}popFirst(e){return e=e===void 0?1:e,this.construct(this.segments,this.offset+e,this.length-e)}popLast(){return this.construct(this.segments,this.offset,this.length-1)}firstSegment(){return this.segments[this.offset]}lastSegment(){return this.get(this.length-1)}get(e){return this.segments[this.offset+e]}isEmpty(){return this.length===0}isPrefixOf(e){if(e.length<this.length)return!1;for(let o=0;o<this.length;o++)if(this.get(o)!==e.get(o))return!1;return!0}isImmediateParentOf(e){if(this.length+1!==e.length)return!1;for(let o=0;o<this.length;o++)if(this.get(o)!==e.get(o))return!1;return!0}forEach(e){for(let o=this.offset,a=this.limit();o<a;o++)e(this.segments[o])}toArray(){return this.segments.slice(this.offset,this.limit())}static comparator(e,o){const a=Math.min(e.length,o.length);for(let d=0;d<a;d++){const c=BasePath.compareSegments(e.get(d),o.get(d));if(c!==0)return c}return __PRIVATE_primitiveComparator(e.length,o.length)}static compareSegments(e,o){const a=BasePath.isNumericId(e),d=BasePath.isNumericId(o);return a&&!d?-1:!a&&d?1:a&&d?BasePath.extractNumericId(e).compare(BasePath.extractNumericId(o)):__PRIVATE_compareUtf8Strings(e,o)}static isNumericId(e){return e.startsWith("__id")&&e.endsWith("__")}static extractNumericId(e){return Integer.fromString(e.substring(4,e.length-2))}}class ResourcePath extends BasePath{construct(e,o,a){return new ResourcePath(e,o,a)}canonicalString(){return this.toArray().join("/")}toString(){return this.canonicalString()}toUriEncodedString(){return this.toArray().map(encodeURIComponent).join("/")}static fromString(...e){const o=[];for(const a of e){if(a.indexOf("//")>=0)throw new FirestoreError(F.INVALID_ARGUMENT,`Invalid segment (${a}). Paths must not contain // in them.`);o.push(...a.split("/").filter(d=>d.length>0))}return new ResourcePath(o)}static emptyPath(){return new ResourcePath([])}}const N=/^[_a-zA-Z][_a-zA-Z0-9]*$/;class FieldPath$1 extends BasePath{construct(e,o,a){return new FieldPath$1(e,o,a)}static isValidIdentifier(e){return N.test(e)}canonicalString(){return this.toArray().map(e=>(e=e.replace(/\\/g,"\\\\").replace(/`/g,"\\`"),FieldPath$1.isValidIdentifier(e)||(e="`"+e+"`"),e)).join(".")}toString(){return this.canonicalString()}isKeyField(){return this.length===1&&this.get(0)===O}static keyField(){return new FieldPath$1([O])}static fromServerFormat(e){const o=[];let a="",d=0;const c=()=>{if(a.length===0)throw new FirestoreError(F.INVALID_ARGUMENT,`Invalid field path (${e}). Paths must not be empty, begin with '.', end with '.', or contain '..'`);o.push(a),a=""};let j=!1;for(;d<e.length;){const _e=e[d];if(_e==="\\"){if(d+1===e.length)throw new FirestoreError(F.INVALID_ARGUMENT,"Path has trailing escape character: "+e);const pt=e[d+1];if(pt!=="\\"&&pt!=="."&&pt!=="`")throw new FirestoreError(F.INVALID_ARGUMENT,"Path has invalid escape sequence: "+e);a+=pt,d+=2}else _e==="`"?(j=!j,d++):_e!=="."||j?(a+=_e,d++):(c(),d++)}if(c(),j)throw new FirestoreError(F.INVALID_ARGUMENT,"Unterminated ` in path: "+e);return new FieldPath$1(o)}static emptyPath(){return new FieldPath$1([])}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class DocumentKey{constructor(e){this.path=e}static fromPath(e){return new DocumentKey(ResourcePath.fromString(e))}static fromName(e){return new DocumentKey(ResourcePath.fromString(e).popFirst(5))}static empty(){return new DocumentKey(ResourcePath.emptyPath())}get collectionGroup(){return this.path.popLast().lastSegment()}hasCollectionId(e){return this.path.length>=2&&this.path.get(this.path.length-2)===e}getCollectionGroup(){return this.path.get(this.path.length-2)}getCollectionPath(){return this.path.popLast()}isEqual(e){return e!==null&&ResourcePath.comparator(this.path,e.path)===0}toString(){return this.path.toString()}static comparator(e,o){return ResourcePath.comparator(e.path,o.path)}static isDocumentKey(e){return e.length%2==0}static fromSegments(e){return new DocumentKey(new ResourcePath(e.slice()))}}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const B=-1;function __PRIVATE_newIndexOffsetSuccessorFromReadTime(s,e){const o=s.toTimestamp().seconds,a=s.toTimestamp().nanoseconds+1,d=SnapshotVersion.fromTimestamp(a===1e9?new Timestamp(o+1,0):new Timestamp(o,a));return new IndexOffset(d,DocumentKey.empty(),e)}function __PRIVATE_newIndexOffsetFromDocument(s){return new IndexOffset(s.readTime,s.key,B)}class IndexOffset{constructor(e,o,a){this.readTime=e,this.documentKey=o,this.largestBatchId=a}static min(){return new IndexOffset(SnapshotVersion.min(),DocumentKey.empty(),B)}static max(){return new IndexOffset(SnapshotVersion.max(),DocumentKey.empty(),B)}}function __PRIVATE_indexOffsetComparator(s,e){let o=s.readTime.compareTo(e.readTime);return o!==0?o:(o=DocumentKey.comparator(s.documentKey,e.documentKey),o!==0?o:__PRIVATE_primitiveComparator(s.largestBatchId,e.largestBatchId))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const L="The current tab is not in the required state to perform this operation. It might be necessary to refresh the browser tab.";class PersistenceTransaction{constructor(){this.onCommittedListeners=[]}addOnCommittedListener(e){this.onCommittedListeners.push(e)}raiseOnCommittedEvent(){this.onCommittedListeners.forEach(e=>e())}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function __PRIVATE_ignoreIfPrimaryLeaseLoss(s){if(s.code!==F.FAILED_PRECONDITION||s.message!==L)throw s;__PRIVATE_logDebug("LocalStore","Unexpectedly lost primary lease")}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class PersistencePromise{constructor(e){this.nextCallback=null,this.catchCallback=null,this.result=void 0,this.error=void 0,this.isDone=!1,this.callbackAttached=!1,e(o=>{this.isDone=!0,this.result=o,this.nextCallback&&this.nextCallback(o)},o=>{this.isDone=!0,this.error=o,this.catchCallback&&this.catchCallback(o)})}catch(e){return this.next(void 0,e)}next(e,o){return this.callbackAttached&&fail(59440),this.callbackAttached=!0,this.isDone?this.error?this.wrapFailure(o,this.error):this.wrapSuccess(e,this.result):new PersistencePromise((a,d)=>{this.nextCallback=c=>{this.wrapSuccess(e,c).next(a,d)},this.catchCallback=c=>{this.wrapFailure(o,c).next(a,d)}})}toPromise(){return new Promise((e,o)=>{this.next(e,o)})}wrapUserFunction(e){try{const o=e();return o instanceof PersistencePromise?o:PersistencePromise.resolve(o)}catch(o){return PersistencePromise.reject(o)}}wrapSuccess(e,o){return e?this.wrapUserFunction(()=>e(o)):PersistencePromise.resolve(o)}wrapFailure(e,o){return e?this.wrapUserFunction(()=>e(o)):PersistencePromise.reject(o)}static resolve(e){return new PersistencePromise((o,a)=>{o(e)})}static reject(e){return new PersistencePromise((o,a)=>{a(e)})}static waitFor(e){return new PersistencePromise((o,a)=>{let d=0,c=0,j=!1;e.forEach(_e=>{++d,_e.next(()=>{++c,j&&c===d&&o()},pt=>a(pt))}),j=!0,c===d&&o()})}static or(e){let o=PersistencePromise.resolve(!1);for(const a of e)o=o.next(d=>d?PersistencePromise.resolve(d):a());return o}static forEach(e,o){const a=[];return e.forEach((d,c)=>{a.push(o.call(this,d,c))}),this.waitFor(a)}static mapArray(e,o){return new PersistencePromise((a,d)=>{const c=e.length,j=new Array(c);let _e=0;for(let pt=0;pt<c;pt++){const yt=pt;o(e[yt]).next(ct=>{j[yt]=ct,++_e,_e===c&&a(j)},ct=>d(ct))}})}static doWhile(e,o){return new PersistencePromise((a,d)=>{const c=()=>{e()===!0?o().next(()=>{c()},d):a()};c()})}}function __PRIVATE_getAndroidVersion(s){const e=s.match(/Android ([\d.]+)/i),o=e?e[1].split(".").slice(0,2).join("."):"-1";return Number(o)}function __PRIVATE_isIndexedDbTransactionError(s){return s.name==="IndexedDbTransactionError"}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class __PRIVATE_ListenSequence{constructor(e,o){this.previousValue=e,o&&(o.sequenceNumberHandler=a=>this.ue(a),this.ce=a=>o.writeSequenceNumber(a))}ue(e){return this.previousValue=Math.max(e,this.previousValue),this.previousValue}next(){const e=++this.previousValue;return this.ce&&this.ce(e),e}}__PRIVATE_ListenSequence.le=-1;/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const $=-1;function __PRIVATE_isNullOrUndefined(s){return s==null}function __PRIVATE_isNegativeZero(s){return s===0&&1/s==-1/0}function isSafeInteger(s){return typeof s=="number"&&Number.isInteger(s)&&!__PRIVATE_isNegativeZero(s)&&s<=Number.MAX_SAFE_INTEGER&&s>=Number.MIN_SAFE_INTEGER}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const U="";function __PRIVATE_encodeResourcePath(s){let e="";for(let o=0;o<s.length;o++)e.length>0&&(e=__PRIVATE_encodeSeparator(e)),e=__PRIVATE_encodeSegment(s.get(o),e);return __PRIVATE_encodeSeparator(e)}function __PRIVATE_encodeSegment(s,e){let o=e;const a=s.length;for(let d=0;d<a;d++){const c=s.charAt(d);switch(c){case"\0":o+="";break;case U:o+="";break;default:o+=c}}return o}function __PRIVATE_encodeSeparator(s){return s+U+""}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function __PRIVATE_objectSize(s){let e=0;for(const o in s)Object.prototype.hasOwnProperty.call(s,o)&&e++;return e}function forEach$1(s,e){for(const o in s)Object.prototype.hasOwnProperty.call(s,o)&&e(o,s[o])}function isEmpty(s){for(const e in s)if(Object.prototype.hasOwnProperty.call(s,e))return!1;return!0}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class SortedMap{constructor(e,o){this.comparator=e,this.root=o||LLRBNode.EMPTY}insert(e,o){return new SortedMap(this.comparator,this.root.insert(e,o,this.comparator).copy(null,null,LLRBNode.BLACK,null,null))}remove(e){return new SortedMap(this.comparator,this.root.remove(e,this.comparator).copy(null,null,LLRBNode.BLACK,null,null))}get(e){let o=this.root;for(;!o.isEmpty();){const a=this.comparator(e,o.key);if(a===0)return o.value;a<0?o=o.left:a>0&&(o=o.right)}return null}indexOf(e){let o=0,a=this.root;for(;!a.isEmpty();){const d=this.comparator(e,a.key);if(d===0)return o+a.left.size;d<0?a=a.left:(o+=a.left.size+1,a=a.right)}return-1}isEmpty(){return this.root.isEmpty()}get size(){return this.root.size}minKey(){return this.root.minKey()}maxKey(){return this.root.maxKey()}inorderTraversal(e){return this.root.inorderTraversal(e)}forEach(e){this.inorderTraversal((o,a)=>(e(o,a),!1))}toString(){const e=[];return this.inorderTraversal((o,a)=>(e.push(`${o}:${a}`),!1)),`{${e.join(", ")}}`}reverseTraversal(e){return this.root.reverseTraversal(e)}getIterator(){return new SortedMapIterator(this.root,null,this.comparator,!1)}getIteratorFrom(e){return new SortedMapIterator(this.root,e,this.comparator,!1)}getReverseIterator(){return new SortedMapIterator(this.root,null,this.comparator,!0)}getReverseIteratorFrom(e){return new SortedMapIterator(this.root,e,this.comparator,!0)}}class SortedMapIterator{constructor(e,o,a,d){this.isReverse=d,this.nodeStack=[];let c=1;for(;!e.isEmpty();)if(c=o?a(e.key,o):1,o&&d&&(c*=-1),c<0)e=this.isReverse?e.left:e.right;else{if(c===0){this.nodeStack.push(e);break}this.nodeStack.push(e),e=this.isReverse?e.right:e.left}}getNext(){let e=this.nodeStack.pop();const o={key:e.key,value:e.value};if(this.isReverse)for(e=e.left;!e.isEmpty();)this.nodeStack.push(e),e=e.right;else for(e=e.right;!e.isEmpty();)this.nodeStack.push(e),e=e.left;return o}hasNext(){return this.nodeStack.length>0}peek(){if(this.nodeStack.length===0)return null;const e=this.nodeStack[this.nodeStack.length-1];return{key:e.key,value:e.value}}}class LLRBNode{constructor(e,o,a,d,c){this.key=e,this.value=o,this.color=a??LLRBNode.RED,this.left=d??LLRBNode.EMPTY,this.right=c??LLRBNode.EMPTY,this.size=this.left.size+1+this.right.size}copy(e,o,a,d,c){return new LLRBNode(e??this.key,o??this.value,a??this.color,d??this.left,c??this.right)}isEmpty(){return!1}inorderTraversal(e){return this.left.inorderTraversal(e)||e(this.key,this.value)||this.right.inorderTraversal(e)}reverseTraversal(e){return this.right.reverseTraversal(e)||e(this.key,this.value)||this.left.reverseTraversal(e)}min(){return this.left.isEmpty()?this:this.left.min()}minKey(){return this.min().key}maxKey(){return this.right.isEmpty()?this.key:this.right.maxKey()}insert(e,o,a){let d=this;const c=a(e,d.key);return d=c<0?d.copy(null,null,null,d.left.insert(e,o,a),null):c===0?d.copy(null,o,null,null,null):d.copy(null,null,null,null,d.right.insert(e,o,a)),d.fixUp()}removeMin(){if(this.left.isEmpty())return LLRBNode.EMPTY;let e=this;return e.left.isRed()||e.left.left.isRed()||(e=e.moveRedLeft()),e=e.copy(null,null,null,e.left.removeMin(),null),e.fixUp()}remove(e,o){let a,d=this;if(o(e,d.key)<0)d.left.isEmpty()||d.left.isRed()||d.left.left.isRed()||(d=d.moveRedLeft()),d=d.copy(null,null,null,d.left.remove(e,o),null);else{if(d.left.isRed()&&(d=d.rotateRight()),d.right.isEmpty()||d.right.isRed()||d.right.left.isRed()||(d=d.moveRedRight()),o(e,d.key)===0){if(d.right.isEmpty())return LLRBNode.EMPTY;a=d.right.min(),d=d.copy(a.key,a.value,null,null,d.right.removeMin())}d=d.copy(null,null,null,null,d.right.remove(e,o))}return d.fixUp()}isRed(){return this.color}fixUp(){let e=this;return e.right.isRed()&&!e.left.isRed()&&(e=e.rotateLeft()),e.left.isRed()&&e.left.left.isRed()&&(e=e.rotateRight()),e.left.isRed()&&e.right.isRed()&&(e=e.colorFlip()),e}moveRedLeft(){let e=this.colorFlip();return e.right.left.isRed()&&(e=e.copy(null,null,null,null,e.right.rotateRight()),e=e.rotateLeft(),e=e.colorFlip()),e}moveRedRight(){let e=this.colorFlip();return e.left.left.isRed()&&(e=e.rotateRight(),e=e.colorFlip()),e}rotateLeft(){const e=this.copy(null,null,LLRBNode.RED,null,this.right.left);return this.right.copy(null,null,this.color,e,null)}rotateRight(){const e=this.copy(null,null,LLRBNode.RED,this.left.right,null);return this.left.copy(null,null,this.color,null,e)}colorFlip(){const e=this.left.copy(null,null,!this.left.color,null,null),o=this.right.copy(null,null,!this.right.color,null,null);return this.copy(null,null,!this.color,e,o)}checkMaxDepth(){const e=this.check();return Math.pow(2,e)<=this.size+1}check(){if(this.isRed()&&this.left.isRed())throw fail(43730,{key:this.key,value:this.value});if(this.right.isRed())throw fail(14113,{key:this.key,value:this.value});const e=this.left.check();if(e!==this.right.check())throw fail(27949);return e+(this.isRed()?0:1)}}LLRBNode.EMPTY=null,LLRBNode.RED=!0,LLRBNode.BLACK=!1;LLRBNode.EMPTY=new class{constructor(){this.size=0}get key(){throw fail(57766)}get value(){throw fail(16141)}get color(){throw fail(16727)}get left(){throw fail(29726)}get right(){throw fail(36894)}copy(e,o,a,d,c){return this}insert(e,o,a){return new LLRBNode(e,o)}remove(e,o){return this}isEmpty(){return!0}inorderTraversal(e){return!1}reverseTraversal(e){return!1}minKey(){return null}maxKey(){return null}isRed(){return!1}checkMaxDepth(){return!0}check(){return 0}};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class SortedSet{constructor(e){this.comparator=e,this.data=new SortedMap(this.comparator)}has(e){return this.data.get(e)!==null}first(){return this.data.minKey()}last(){return this.data.maxKey()}get size(){return this.data.size}indexOf(e){return this.data.indexOf(e)}forEach(e){this.data.inorderTraversal((o,a)=>(e(o),!1))}forEachInRange(e,o){const a=this.data.getIteratorFrom(e[0]);for(;a.hasNext();){const d=a.getNext();if(this.comparator(d.key,e[1])>=0)return;o(d.key)}}forEachWhile(e,o){let a;for(a=o!==void 0?this.data.getIteratorFrom(o):this.data.getIterator();a.hasNext();)if(!e(a.getNext().key))return}firstAfterOrEqual(e){const o=this.data.getIteratorFrom(e);return o.hasNext()?o.getNext().key:null}getIterator(){return new SortedSetIterator(this.data.getIterator())}getIteratorFrom(e){return new SortedSetIterator(this.data.getIteratorFrom(e))}add(e){return this.copy(this.data.remove(e).insert(e,!0))}delete(e){return this.has(e)?this.copy(this.data.remove(e)):this}isEmpty(){return this.data.isEmpty()}unionWith(e){let o=this;return o.size<e.size&&(o=e,e=this),e.forEach(a=>{o=o.add(a)}),o}isEqual(e){if(!(e instanceof SortedSet)||this.size!==e.size)return!1;const o=this.data.getIterator(),a=e.data.getIterator();for(;o.hasNext();){const d=o.getNext().key,c=a.getNext().key;if(this.comparator(d,c)!==0)return!1}return!0}toArray(){const e=[];return this.forEach(o=>{e.push(o)}),e}toString(){const e=[];return this.forEach(o=>e.push(o)),"SortedSet("+e.toString()+")"}copy(e){const o=new SortedSet(this.comparator);return o.data=e,o}}class SortedSetIterator{constructor(e){this.iter=e}getNext(){return this.iter.getNext().key}hasNext(){return this.iter.hasNext()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class FieldMask{constructor(e){this.fields=e,e.sort(FieldPath$1.comparator)}static empty(){return new FieldMask([])}unionWith(e){let o=new SortedSet(FieldPath$1.comparator);for(const a of this.fields)o=o.add(a);for(const a of e)o=o.add(a);return new FieldMask(o.toArray())}covers(e){for(const o of this.fields)if(o.isPrefixOf(e))return!0;return!1}isEqual(e){return __PRIVATE_arrayEquals(this.fields,e.fields,(o,a)=>o.isEqual(a))}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class __PRIVATE_Base64DecodeError extends Error{constructor(){super(...arguments),this.name="Base64DecodeError"}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ByteString{constructor(e){this.binaryString=e}static fromBase64String(e){const o=function(d){try{return atob(d)}catch(c){throw typeof DOMException<"u"&&c instanceof DOMException?new __PRIVATE_Base64DecodeError("Invalid base64 string: "+c):c}}(e);return new ByteString(o)}static fromUint8Array(e){const o=function(d){let c="";for(let j=0;j<d.length;++j)c+=String.fromCharCode(d[j]);return c}(e);return new ByteString(o)}[Symbol.iterator](){let e=0;return{next:()=>e<this.binaryString.length?{value:this.binaryString.charCodeAt(e++),done:!1}:{value:void 0,done:!0}}}toBase64(){return function(o){return btoa(o)}(this.binaryString)}toUint8Array(){return function(o){const a=new Uint8Array(o.length);for(let d=0;d<o.length;d++)a[d]=o.charCodeAt(d);return a}(this.binaryString)}approximateByteSize(){return 2*this.binaryString.length}compareTo(e){return __PRIVATE_primitiveComparator(this.binaryString,e.binaryString)}isEqual(e){return this.binaryString===e.binaryString}}ByteString.EMPTY_BYTE_STRING=new ByteString("");const Xe=new RegExp(/^\d{4}-\d\d-\d\dT\d\d:\d\d:\d\d(?:\.(\d+))?Z$/);function __PRIVATE_normalizeTimestamp(s){if(__PRIVATE_hardAssert(!!s,39018),typeof s=="string"){let e=0;const o=Xe.exec(s);if(__PRIVATE_hardAssert(!!o,46558,{timestamp:s}),o[1]){let d=o[1];d=(d+"000000000").substr(0,9),e=Number(d)}const a=new Date(s);return{seconds:Math.floor(a.getTime()/1e3),nanos:e}}return{seconds:__PRIVATE_normalizeNumber(s.seconds),nanos:__PRIVATE_normalizeNumber(s.nanos)}}function __PRIVATE_normalizeNumber(s){return typeof s=="number"?s:typeof s=="string"?Number(s):0}function __PRIVATE_normalizeByteString(s){return typeof s=="string"?ByteString.fromBase64String(s):ByteString.fromUint8Array(s)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const et="server_timestamp",tt="__type__",nt="__previous_value__",rt="__local_write_time__";function __PRIVATE_isServerTimestamp(s){var e,o;return((o=(((e=s==null?void 0:s.mapValue)===null||e===void 0?void 0:e.fields)||{})[tt])===null||o===void 0?void 0:o.stringValue)===et}function __PRIVATE_getPreviousValue(s){const e=s.mapValue.fields[nt];return __PRIVATE_isServerTimestamp(e)?__PRIVATE_getPreviousValue(e):e}function __PRIVATE_getLocalWriteTime(s){const e=__PRIVATE_normalizeTimestamp(s.mapValue.fields[rt].timestampValue);return new Timestamp(e.seconds,e.nanos)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class DatabaseInfo{constructor(e,o,a,d,c,j,_e,pt,yt){this.databaseId=e,this.appId=o,this.persistenceKey=a,this.host=d,this.ssl=c,this.forceLongPolling=j,this.autoDetectLongPolling=_e,this.longPollingOptions=pt,this.useFetchStreams=yt}}const it="(default)";class DatabaseId{constructor(e,o){this.projectId=e,this.database=o||it}static empty(){return new DatabaseId("","")}get isDefaultDatabase(){return this.database===it}isEqual(e){return e instanceof DatabaseId&&e.projectId===this.projectId&&e.database===this.database}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const st="__type__",ot="__max__",_t={mapValue:{}},at="__vector__",ut="value";function __PRIVATE_typeOrder(s){return"nullValue"in s?0:"booleanValue"in s?1:"integerValue"in s||"doubleValue"in s?2:"timestampValue"in s?3:"stringValue"in s?5:"bytesValue"in s?6:"referenceValue"in s?7:"geoPointValue"in s?8:"arrayValue"in s?9:"mapValue"in s?__PRIVATE_isServerTimestamp(s)?4:__PRIVATE_isMaxValue(s)?9007199254740991:__PRIVATE_isVectorValue(s)?10:11:fail(28295,{value:s})}function __PRIVATE_valueEquals(s,e){if(s===e)return!0;const o=__PRIVATE_typeOrder(s);if(o!==__PRIVATE_typeOrder(e))return!1;switch(o){case 0:case 9007199254740991:return!0;case 1:return s.booleanValue===e.booleanValue;case 4:return __PRIVATE_getLocalWriteTime(s).isEqual(__PRIVATE_getLocalWriteTime(e));case 3:return function(d,c){if(typeof d.timestampValue=="string"&&typeof c.timestampValue=="string"&&d.timestampValue.length===c.timestampValue.length)return d.timestampValue===c.timestampValue;const j=__PRIVATE_normalizeTimestamp(d.timestampValue),_e=__PRIVATE_normalizeTimestamp(c.timestampValue);return j.seconds===_e.seconds&&j.nanos===_e.nanos}(s,e);case 5:return s.stringValue===e.stringValue;case 6:return function(d,c){return __PRIVATE_normalizeByteString(d.bytesValue).isEqual(__PRIVATE_normalizeByteString(c.bytesValue))}(s,e);case 7:return s.referenceValue===e.referenceValue;case 8:return function(d,c){return __PRIVATE_normalizeNumber(d.geoPointValue.latitude)===__PRIVATE_normalizeNumber(c.geoPointValue.latitude)&&__PRIVATE_normalizeNumber(d.geoPointValue.longitude)===__PRIVATE_normalizeNumber(c.geoPointValue.longitude)}(s,e);case 2:return function(d,c){if("integerValue"in d&&"integerValue"in c)return __PRIVATE_normalizeNumber(d.integerValue)===__PRIVATE_normalizeNumber(c.integerValue);if("doubleValue"in d&&"doubleValue"in c){const j=__PRIVATE_normalizeNumber(d.doubleValue),_e=__PRIVATE_normalizeNumber(c.doubleValue);return j===_e?__PRIVATE_isNegativeZero(j)===__PRIVATE_isNegativeZero(_e):isNaN(j)&&isNaN(_e)}return!1}(s,e);case 9:return __PRIVATE_arrayEquals(s.arrayValue.values||[],e.arrayValue.values||[],__PRIVATE_valueEquals);case 10:case 11:return function(d,c){const j=d.mapValue.fields||{},_e=c.mapValue.fields||{};if(__PRIVATE_objectSize(j)!==__PRIVATE_objectSize(_e))return!1;for(const pt in j)if(j.hasOwnProperty(pt)&&(_e[pt]===void 0||!__PRIVATE_valueEquals(j[pt],_e[pt])))return!1;return!0}(s,e);default:return fail(52216,{left:s})}}function __PRIVATE_arrayValueContains(s,e){return(s.values||[]).find(o=>__PRIVATE_valueEquals(o,e))!==void 0}function __PRIVATE_valueCompare(s,e){if(s===e)return 0;const o=__PRIVATE_typeOrder(s),a=__PRIVATE_typeOrder(e);if(o!==a)return __PRIVATE_primitiveComparator(o,a);switch(o){case 0:case 9007199254740991:return 0;case 1:return __PRIVATE_primitiveComparator(s.booleanValue,e.booleanValue);case 2:return function(c,j){const _e=__PRIVATE_normalizeNumber(c.integerValue||c.doubleValue),pt=__PRIVATE_normalizeNumber(j.integerValue||j.doubleValue);return _e<pt?-1:_e>pt?1:_e===pt?0:isNaN(_e)?isNaN(pt)?0:-1:1}(s,e);case 3:return __PRIVATE_compareTimestamps(s.timestampValue,e.timestampValue);case 4:return __PRIVATE_compareTimestamps(__PRIVATE_getLocalWriteTime(s),__PRIVATE_getLocalWriteTime(e));case 5:return __PRIVATE_compareUtf8Strings(s.stringValue,e.stringValue);case 6:return function(c,j){const _e=__PRIVATE_normalizeByteString(c),pt=__PRIVATE_normalizeByteString(j);return _e.compareTo(pt)}(s.bytesValue,e.bytesValue);case 7:return function(c,j){const _e=c.split("/"),pt=j.split("/");for(let yt=0;yt<_e.length&&yt<pt.length;yt++){const ct=__PRIVATE_primitiveComparator(_e[yt],pt[yt]);if(ct!==0)return ct}return __PRIVATE_primitiveComparator(_e.length,pt.length)}(s.referenceValue,e.referenceValue);case 8:return function(c,j){const _e=__PRIVATE_primitiveComparator(__PRIVATE_normalizeNumber(c.latitude),__PRIVATE_normalizeNumber(j.latitude));return _e!==0?_e:__PRIVATE_primitiveComparator(__PRIVATE_normalizeNumber(c.longitude),__PRIVATE_normalizeNumber(j.longitude))}(s.geoPointValue,e.geoPointValue);case 9:return __PRIVATE_compareArrays(s.arrayValue,e.arrayValue);case 10:return function(c,j){var _e,pt,yt,ct;const Ct=c.fields||{},qt=j.fields||{},Ot=(_e=Ct[ut])===null||_e===void 0?void 0:_e.arrayValue,Lt=(pt=qt[ut])===null||pt===void 0?void 0:pt.arrayValue,Qt=__PRIVATE_primitiveComparator(((yt=Ot==null?void 0:Ot.values)===null||yt===void 0?void 0:yt.length)||0,((ct=Lt==null?void 0:Lt.values)===null||ct===void 0?void 0:ct.length)||0);return Qt!==0?Qt:__PRIVATE_compareArrays(Ot,Lt)}(s.mapValue,e.mapValue);case 11:return function(c,j){if(c===_t.mapValue&&j===_t.mapValue)return 0;if(c===_t.mapValue)return 1;if(j===_t.mapValue)return-1;const _e=c.fields||{},pt=Object.keys(_e),yt=j.fields||{},ct=Object.keys(yt);pt.sort(),ct.sort();for(let Ct=0;Ct<pt.length&&Ct<ct.length;++Ct){const qt=__PRIVATE_compareUtf8Strings(pt[Ct],ct[Ct]);if(qt!==0)return qt;const Ot=__PRIVATE_valueCompare(_e[pt[Ct]],yt[ct[Ct]]);if(Ot!==0)return Ot}return __PRIVATE_primitiveComparator(pt.length,ct.length)}(s.mapValue,e.mapValue);default:throw fail(23264,{Pe:o})}}function __PRIVATE_compareTimestamps(s,e){if(typeof s=="string"&&typeof e=="string"&&s.length===e.length)return __PRIVATE_primitiveComparator(s,e);const o=__PRIVATE_normalizeTimestamp(s),a=__PRIVATE_normalizeTimestamp(e),d=__PRIVATE_primitiveComparator(o.seconds,a.seconds);return d!==0?d:__PRIVATE_primitiveComparator(o.nanos,a.nanos)}function __PRIVATE_compareArrays(s,e){const o=s.values||[],a=e.values||[];for(let d=0;d<o.length&&d<a.length;++d){const c=__PRIVATE_valueCompare(o[d],a[d]);if(c)return c}return __PRIVATE_primitiveComparator(o.length,a.length)}function canonicalId(s){return __PRIVATE_canonifyValue(s)}function __PRIVATE_canonifyValue(s){return"nullValue"in s?"null":"booleanValue"in s?""+s.booleanValue:"integerValue"in s?""+s.integerValue:"doubleValue"in s?""+s.doubleValue:"timestampValue"in s?function(o){const a=__PRIVATE_normalizeTimestamp(o);return`time(${a.seconds},${a.nanos})`}(s.timestampValue):"stringValue"in s?s.stringValue:"bytesValue"in s?function(o){return __PRIVATE_normalizeByteString(o).toBase64()}(s.bytesValue):"referenceValue"in s?function(o){return DocumentKey.fromName(o).toString()}(s.referenceValue):"geoPointValue"in s?function(o){return`geo(${o.latitude},${o.longitude})`}(s.geoPointValue):"arrayValue"in s?function(o){let a="[",d=!0;for(const c of o.values||[])d?d=!1:a+=",",a+=__PRIVATE_canonifyValue(c);return a+"]"}(s.arrayValue):"mapValue"in s?function(o){const a=Object.keys(o.fields||{}).sort();let d="{",c=!0;for(const j of a)c?c=!1:d+=",",d+=`${j}:${__PRIVATE_canonifyValue(o.fields[j])}`;return d+"}"}(s.mapValue):fail(61005,{value:s})}function __PRIVATE_estimateByteSize(s){switch(__PRIVATE_typeOrder(s)){case 0:case 1:return 4;case 2:return 8;case 3:case 8:return 16;case 4:const e=__PRIVATE_getPreviousValue(s);return e?16+__PRIVATE_estimateByteSize(e):16;case 5:return 2*s.stringValue.length;case 6:return __PRIVATE_normalizeByteString(s.bytesValue).approximateByteSize();case 7:return s.referenceValue.length;case 9:return function(a){return(a.values||[]).reduce((d,c)=>d+__PRIVATE_estimateByteSize(c),0)}(s.arrayValue);case 10:case 11:return function(a){let d=0;return forEach$1(a.fields,(c,j)=>{d+=c.length+__PRIVATE_estimateByteSize(j)}),d}(s.mapValue);default:throw fail(13486,{value:s})}}function __PRIVATE_refValue(s,e){return{referenceValue:`projects/${s.projectId}/databases/${s.database}/documents/${e.path.canonicalString()}`}}function isInteger(s){return!!s&&"integerValue"in s}function isArray(s){return!!s&&"arrayValue"in s}function __PRIVATE_isNullValue(s){return!!s&&"nullValue"in s}function __PRIVATE_isNanValue(s){return!!s&&"doubleValue"in s&&isNaN(Number(s.doubleValue))}function __PRIVATE_isMapValue(s){return!!s&&"mapValue"in s}function __PRIVATE_isVectorValue(s){var e,o;return((o=(((e=s==null?void 0:s.mapValue)===null||e===void 0?void 0:e.fields)||{})[st])===null||o===void 0?void 0:o.stringValue)===at}function __PRIVATE_deepClone(s){if(s.geoPointValue)return{geoPointValue:Object.assign({},s.geoPointValue)};if(s.timestampValue&&typeof s.timestampValue=="object")return{timestampValue:Object.assign({},s.timestampValue)};if(s.mapValue){const e={mapValue:{fields:{}}};return forEach$1(s.mapValue.fields,(o,a)=>e.mapValue.fields[o]=__PRIVATE_deepClone(a)),e}if(s.arrayValue){const e={arrayValue:{values:[]}};for(let o=0;o<(s.arrayValue.values||[]).length;++o)e.arrayValue.values[o]=__PRIVATE_deepClone(s.arrayValue.values[o]);return e}return Object.assign({},s)}function __PRIVATE_isMaxValue(s){return(((s.mapValue||{}).fields||{}).__type__||{}).stringValue===ot}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ObjectValue{constructor(e){this.value=e}static empty(){return new ObjectValue({mapValue:{}})}field(e){if(e.isEmpty())return this.value;{let o=this.value;for(let a=0;a<e.length-1;++a)if(o=(o.mapValue.fields||{})[e.get(a)],!__PRIVATE_isMapValue(o))return null;return o=(o.mapValue.fields||{})[e.lastSegment()],o||null}}set(e,o){this.getFieldsMap(e.popLast())[e.lastSegment()]=__PRIVATE_deepClone(o)}setAll(e){let o=FieldPath$1.emptyPath(),a={},d=[];e.forEach((j,_e)=>{if(!o.isImmediateParentOf(_e)){const pt=this.getFieldsMap(o);this.applyChanges(pt,a,d),a={},d=[],o=_e.popLast()}j?a[_e.lastSegment()]=__PRIVATE_deepClone(j):d.push(_e.lastSegment())});const c=this.getFieldsMap(o);this.applyChanges(c,a,d)}delete(e){const o=this.field(e.popLast());__PRIVATE_isMapValue(o)&&o.mapValue.fields&&delete o.mapValue.fields[e.lastSegment()]}isEqual(e){return __PRIVATE_valueEquals(this.value,e.value)}getFieldsMap(e){let o=this.value;o.mapValue.fields||(o.mapValue={fields:{}});for(let a=0;a<e.length;++a){let d=o.mapValue.fields[e.get(a)];__PRIVATE_isMapValue(d)&&d.mapValue.fields||(d={mapValue:{fields:{}}},o.mapValue.fields[e.get(a)]=d),o=d}return o.mapValue.fields}applyChanges(e,o,a){forEach$1(o,(d,c)=>e[d]=c);for(const d of a)delete e[d]}clone(){return new ObjectValue(__PRIVATE_deepClone(this.value))}}function __PRIVATE_extractFieldMask(s){const e=[];return forEach$1(s.fields,(o,a)=>{const d=new FieldPath$1([o]);if(__PRIVATE_isMapValue(a)){const c=__PRIVATE_extractFieldMask(a.mapValue).fields;if(c.length===0)e.push(d);else for(const j of c)e.push(d.child(j))}else e.push(d)}),new FieldMask(e)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class MutableDocument{constructor(e,o,a,d,c,j,_e){this.key=e,this.documentType=o,this.version=a,this.readTime=d,this.createTime=c,this.data=j,this.documentState=_e}static newInvalidDocument(e){return new MutableDocument(e,0,SnapshotVersion.min(),SnapshotVersion.min(),SnapshotVersion.min(),ObjectValue.empty(),0)}static newFoundDocument(e,o,a,d){return new MutableDocument(e,1,o,SnapshotVersion.min(),a,d,0)}static newNoDocument(e,o){return new MutableDocument(e,2,o,SnapshotVersion.min(),SnapshotVersion.min(),ObjectValue.empty(),0)}static newUnknownDocument(e,o){return new MutableDocument(e,3,o,SnapshotVersion.min(),SnapshotVersion.min(),ObjectValue.empty(),2)}convertToFoundDocument(e,o){return!this.createTime.isEqual(SnapshotVersion.min())||this.documentType!==2&&this.documentType!==0||(this.createTime=e),this.version=e,this.documentType=1,this.data=o,this.documentState=0,this}convertToNoDocument(e){return this.version=e,this.documentType=2,this.data=ObjectValue.empty(),this.documentState=0,this}convertToUnknownDocument(e){return this.version=e,this.documentType=3,this.data=ObjectValue.empty(),this.documentState=2,this}setHasCommittedMutations(){return this.documentState=2,this}setHasLocalMutations(){return this.documentState=1,this.version=SnapshotVersion.min(),this}setReadTime(e){return this.readTime=e,this}get hasLocalMutations(){return this.documentState===1}get hasCommittedMutations(){return this.documentState===2}get hasPendingWrites(){return this.hasLocalMutations||this.hasCommittedMutations}isValidDocument(){return this.documentType!==0}isFoundDocument(){return this.documentType===1}isNoDocument(){return this.documentType===2}isUnknownDocument(){return this.documentType===3}isEqual(e){return e instanceof MutableDocument&&this.key.isEqual(e.key)&&this.version.isEqual(e.version)&&this.documentType===e.documentType&&this.documentState===e.documentState&&this.data.isEqual(e.data)}mutableCopy(){return new MutableDocument(this.key,this.documentType,this.version,this.readTime,this.createTime,this.data.clone(),this.documentState)}toString(){return`Document(${this.key}, ${this.version}, ${JSON.stringify(this.data.value)}, {createTime: ${this.createTime}}), {documentType: ${this.documentType}}), {documentState: ${this.documentState}})`}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Bound{constructor(e,o){this.position=e,this.inclusive=o}}function __PRIVATE_boundCompareToDocument(s,e,o){let a=0;for(let d=0;d<s.position.length;d++){const c=e[d],j=s.position[d];if(c.field.isKeyField()?a=DocumentKey.comparator(DocumentKey.fromName(j.referenceValue),o.key):a=__PRIVATE_valueCompare(j,o.data.field(c.field)),c.dir==="desc"&&(a*=-1),a!==0)break}return a}function __PRIVATE_boundEquals(s,e){if(s===null)return e===null;if(e===null||s.inclusive!==e.inclusive||s.position.length!==e.position.length)return!1;for(let o=0;o<s.position.length;o++)if(!__PRIVATE_valueEquals(s.position[o],e.position[o]))return!1;return!0}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class OrderBy{constructor(e,o="asc"){this.field=e,this.dir=o}}function __PRIVATE_orderByEquals(s,e){return s.dir===e.dir&&s.field.isEqual(e.field)}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Filter{}class FieldFilter extends Filter{constructor(e,o,a){super(),this.field=e,this.op=o,this.value=a}static create(e,o,a){return e.isKeyField()?o==="in"||o==="not-in"?this.createKeyFieldInFilter(e,o,a):new __PRIVATE_KeyFieldFilter(e,o,a):o==="array-contains"?new __PRIVATE_ArrayContainsFilter(e,a):o==="in"?new __PRIVATE_InFilter(e,a):o==="not-in"?new __PRIVATE_NotInFilter(e,a):o==="array-contains-any"?new __PRIVATE_ArrayContainsAnyFilter(e,a):new FieldFilter(e,o,a)}static createKeyFieldInFilter(e,o,a){return o==="in"?new __PRIVATE_KeyFieldInFilter(e,a):new __PRIVATE_KeyFieldNotInFilter(e,a)}matches(e){const o=e.data.field(this.field);return this.op==="!="?o!==null&&o.nullValue===void 0&&this.matchesComparison(__PRIVATE_valueCompare(o,this.value)):o!==null&&__PRIVATE_typeOrder(this.value)===__PRIVATE_typeOrder(o)&&this.matchesComparison(__PRIVATE_valueCompare(o,this.value))}matchesComparison(e){switch(this.op){case"<":return e<0;case"<=":return e<=0;case"==":return e===0;case"!=":return e!==0;case">":return e>0;case">=":return e>=0;default:return fail(47266,{operator:this.op})}}isInequality(){return["<","<=",">",">=","!=","not-in"].indexOf(this.op)>=0}getFlattenedFilters(){return[this]}getFilters(){return[this]}}class CompositeFilter extends Filter{constructor(e,o){super(),this.filters=e,this.op=o,this.Te=null}static create(e,o){return new CompositeFilter(e,o)}matches(e){return __PRIVATE_compositeFilterIsConjunction(this)?this.filters.find(o=>!o.matches(e))===void 0:this.filters.find(o=>o.matches(e))!==void 0}getFlattenedFilters(){return this.Te!==null||(this.Te=this.filters.reduce((e,o)=>e.concat(o.getFlattenedFilters()),[])),this.Te}getFilters(){return Object.assign([],this.filters)}}function __PRIVATE_compositeFilterIsConjunction(s){return s.op==="and"}function __PRIVATE_compositeFilterIsFlatConjunction(s){return __PRIVATE_compositeFilterIsFlat(s)&&__PRIVATE_compositeFilterIsConjunction(s)}function __PRIVATE_compositeFilterIsFlat(s){for(const e of s.filters)if(e instanceof CompositeFilter)return!1;return!0}function __PRIVATE_canonifyFilter(s){if(s instanceof FieldFilter)return s.field.canonicalString()+s.op.toString()+canonicalId(s.value);if(__PRIVATE_compositeFilterIsFlatConjunction(s))return s.filters.map(e=>__PRIVATE_canonifyFilter(e)).join(",");{const e=s.filters.map(o=>__PRIVATE_canonifyFilter(o)).join(",");return`${s.op}(${e})`}}function __PRIVATE_filterEquals(s,e){return s instanceof FieldFilter?function(a,d){return d instanceof FieldFilter&&a.op===d.op&&a.field.isEqual(d.field)&&__PRIVATE_valueEquals(a.value,d.value)}(s,e):s instanceof CompositeFilter?function(a,d){return d instanceof CompositeFilter&&a.op===d.op&&a.filters.length===d.filters.length?a.filters.reduce((c,j,_e)=>c&&__PRIVATE_filterEquals(j,d.filters[_e]),!0):!1}(s,e):void fail(19439)}function __PRIVATE_stringifyFilter(s){return s instanceof FieldFilter?function(o){return`${o.field.canonicalString()} ${o.op} ${canonicalId(o.value)}`}(s):s instanceof CompositeFilter?function(o){return o.op.toString()+" {"+o.getFilters().map(__PRIVATE_stringifyFilter).join(" ,")+"}"}(s):"Filter"}class __PRIVATE_KeyFieldFilter extends FieldFilter{constructor(e,o,a){super(e,o,a),this.key=DocumentKey.fromName(a.referenceValue)}matches(e){const o=DocumentKey.comparator(e.key,this.key);return this.matchesComparison(o)}}class __PRIVATE_KeyFieldInFilter extends FieldFilter{constructor(e,o){super(e,"in",o),this.keys=__PRIVATE_extractDocumentKeysFromArrayValue("in",o)}matches(e){return this.keys.some(o=>o.isEqual(e.key))}}class __PRIVATE_KeyFieldNotInFilter extends FieldFilter{constructor(e,o){super(e,"not-in",o),this.keys=__PRIVATE_extractDocumentKeysFromArrayValue("not-in",o)}matches(e){return!this.keys.some(o=>o.isEqual(e.key))}}function __PRIVATE_extractDocumentKeysFromArrayValue(s,e){var o;return(((o=e.arrayValue)===null||o===void 0?void 0:o.values)||[]).map(a=>DocumentKey.fromName(a.referenceValue))}class __PRIVATE_ArrayContainsFilter extends FieldFilter{constructor(e,o){super(e,"array-contains",o)}matches(e){const o=e.data.field(this.field);return isArray(o)&&__PRIVATE_arrayValueContains(o.arrayValue,this.value)}}class __PRIVATE_InFilter extends FieldFilter{constructor(e,o){super(e,"in",o)}matches(e){const o=e.data.field(this.field);return o!==null&&__PRIVATE_arrayValueContains(this.value.arrayValue,o)}}class __PRIVATE_NotInFilter extends FieldFilter{constructor(e,o){super(e,"not-in",o)}matches(e){if(__PRIVATE_arrayValueContains(this.value.arrayValue,{nullValue:"NULL_VALUE"}))return!1;const o=e.data.field(this.field);return o!==null&&o.nullValue===void 0&&!__PRIVATE_arrayValueContains(this.value.arrayValue,o)}}class __PRIVATE_ArrayContainsAnyFilter extends FieldFilter{constructor(e,o){super(e,"array-contains-any",o)}matches(e){const o=e.data.field(this.field);return!(!isArray(o)||!o.arrayValue.values)&&o.arrayValue.values.some(a=>__PRIVATE_arrayValueContains(this.value.arrayValue,a))}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class __PRIVATE_TargetImpl{constructor(e,o=null,a=[],d=[],c=null,j=null,_e=null){this.path=e,this.collectionGroup=o,this.orderBy=a,this.filters=d,this.limit=c,this.startAt=j,this.endAt=_e,this.Ie=null}}function __PRIVATE_newTarget(s,e=null,o=[],a=[],d=null,c=null,j=null){return new __PRIVATE_TargetImpl(s,e,o,a,d,c,j)}function __PRIVATE_canonifyTarget(s){const e=__PRIVATE_debugCast(s);if(e.Ie===null){let o=e.path.canonicalString();e.collectionGroup!==null&&(o+="|cg:"+e.collectionGroup),o+="|f:",o+=e.filters.map(a=>__PRIVATE_canonifyFilter(a)).join(","),o+="|ob:",o+=e.orderBy.map(a=>function(c){return c.field.canonicalString()+c.dir}(a)).join(","),__PRIVATE_isNullOrUndefined(e.limit)||(o+="|l:",o+=e.limit),e.startAt&&(o+="|lb:",o+=e.startAt.inclusive?"b:":"a:",o+=e.startAt.position.map(a=>canonicalId(a)).join(",")),e.endAt&&(o+="|ub:",o+=e.endAt.inclusive?"a:":"b:",o+=e.endAt.position.map(a=>canonicalId(a)).join(",")),e.Ie=o}return e.Ie}function __PRIVATE_targetEquals(s,e){if(s.limit!==e.limit||s.orderBy.length!==e.orderBy.length)return!1;for(let o=0;o<s.orderBy.length;o++)if(!__PRIVATE_orderByEquals(s.orderBy[o],e.orderBy[o]))return!1;if(s.filters.length!==e.filters.length)return!1;for(let o=0;o<s.filters.length;o++)if(!__PRIVATE_filterEquals(s.filters[o],e.filters[o]))return!1;return s.collectionGroup===e.collectionGroup&&!!s.path.isEqual(e.path)&&!!__PRIVATE_boundEquals(s.startAt,e.startAt)&&__PRIVATE_boundEquals(s.endAt,e.endAt)}function __PRIVATE_targetIsDocumentTarget(s){return DocumentKey.isDocumentKey(s.path)&&s.collectionGroup===null&&s.filters.length===0}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class __PRIVATE_QueryImpl{constructor(e,o=null,a=[],d=[],c=null,j="F",_e=null,pt=null){this.path=e,this.collectionGroup=o,this.explicitOrderBy=a,this.filters=d,this.limit=c,this.limitType=j,this.startAt=_e,this.endAt=pt,this.Ee=null,this.de=null,this.Ae=null,this.startAt,this.endAt}}function __PRIVATE_newQuery(s,e,o,a,d,c,j,_e){return new __PRIVATE_QueryImpl(s,e,o,a,d,c,j,_e)}function __PRIVATE_newQueryForPath(s){return new __PRIVATE_QueryImpl(s)}function __PRIVATE_queryMatchesAllDocuments(s){return s.filters.length===0&&s.limit===null&&s.startAt==null&&s.endAt==null&&(s.explicitOrderBy.length===0||s.explicitOrderBy.length===1&&s.explicitOrderBy[0].field.isKeyField())}function __PRIVATE_isCollectionGroupQuery(s){return s.collectionGroup!==null}function __PRIVATE_queryNormalizedOrderBy(s){const e=__PRIVATE_debugCast(s);if(e.Ee===null){e.Ee=[];const o=new Set;for(const c of e.explicitOrderBy)e.Ee.push(c),o.add(c.field.canonicalString());const a=e.explicitOrderBy.length>0?e.explicitOrderBy[e.explicitOrderBy.length-1].dir:"asc";(function(j){let _e=new SortedSet(FieldPath$1.comparator);return j.filters.forEach(pt=>{pt.getFlattenedFilters().forEach(yt=>{yt.isInequality()&&(_e=_e.add(yt.field))})}),_e})(e).forEach(c=>{o.has(c.canonicalString())||c.isKeyField()||e.Ee.push(new OrderBy(c,a))}),o.has(FieldPath$1.keyField().canonicalString())||e.Ee.push(new OrderBy(FieldPath$1.keyField(),a))}return e.Ee}function __PRIVATE_queryToTarget(s){const e=__PRIVATE_debugCast(s);return e.de||(e.de=__PRIVATE__queryToTarget(e,__PRIVATE_queryNormalizedOrderBy(s))),e.de}function __PRIVATE__queryToTarget(s,e){if(s.limitType==="F")return __PRIVATE_newTarget(s.path,s.collectionGroup,e,s.filters,s.limit,s.startAt,s.endAt);{e=e.map(d=>{const c=d.dir==="desc"?"asc":"desc";return new OrderBy(d.field,c)});const o=s.endAt?new Bound(s.endAt.position,s.endAt.inclusive):null,a=s.startAt?new Bound(s.startAt.position,s.startAt.inclusive):null;return __PRIVATE_newTarget(s.path,s.collectionGroup,e,s.filters,s.limit,o,a)}}function __PRIVATE_queryWithAddedFilter(s,e){const o=s.filters.concat([e]);return new __PRIVATE_QueryImpl(s.path,s.collectionGroup,s.explicitOrderBy.slice(),o,s.limit,s.limitType,s.startAt,s.endAt)}function __PRIVATE_queryWithLimit(s,e,o){return new __PRIVATE_QueryImpl(s.path,s.collectionGroup,s.explicitOrderBy.slice(),s.filters.slice(),e,o,s.startAt,s.endAt)}function __PRIVATE_queryEquals(s,e){return __PRIVATE_targetEquals(__PRIVATE_queryToTarget(s),__PRIVATE_queryToTarget(e))&&s.limitType===e.limitType}function __PRIVATE_canonifyQuery(s){return`${__PRIVATE_canonifyTarget(__PRIVATE_queryToTarget(s))}|lt:${s.limitType}`}function __PRIVATE_stringifyQuery(s){return`Query(target=${function(o){let a=o.path.canonicalString();return o.collectionGroup!==null&&(a+=" collectionGroup="+o.collectionGroup),o.filters.length>0&&(a+=`, filters: [${o.filters.map(d=>__PRIVATE_stringifyFilter(d)).join(", ")}]`),__PRIVATE_isNullOrUndefined(o.limit)||(a+=", limit: "+o.limit),o.orderBy.length>0&&(a+=`, orderBy: [${o.orderBy.map(d=>function(j){return`${j.field.canonicalString()} (${j.dir})`}(d)).join(", ")}]`),o.startAt&&(a+=", startAt: ",a+=o.startAt.inclusive?"b:":"a:",a+=o.startAt.position.map(d=>canonicalId(d)).join(",")),o.endAt&&(a+=", endAt: ",a+=o.endAt.inclusive?"a:":"b:",a+=o.endAt.position.map(d=>canonicalId(d)).join(",")),`Target(${a})`}(__PRIVATE_queryToTarget(s))}; limitType=${s.limitType})`}function __PRIVATE_queryMatches(s,e){return e.isFoundDocument()&&function(a,d){const c=d.key.path;return a.collectionGroup!==null?d.key.hasCollectionId(a.collectionGroup)&&a.path.isPrefixOf(c):DocumentKey.isDocumentKey(a.path)?a.path.isEqual(c):a.path.isImmediateParentOf(c)}(s,e)&&function(a,d){for(const c of __PRIVATE_queryNormalizedOrderBy(a))if(!c.field.isKeyField()&&d.data.field(c.field)===null)return!1;return!0}(s,e)&&function(a,d){for(const c of a.filters)if(!c.matches(d))return!1;return!0}(s,e)&&function(a,d){return!(a.startAt&&!function(j,_e,pt){const yt=__PRIVATE_boundCompareToDocument(j,_e,pt);return j.inclusive?yt<=0:yt<0}(a.startAt,__PRIVATE_queryNormalizedOrderBy(a),d)||a.endAt&&!function(j,_e,pt){const yt=__PRIVATE_boundCompareToDocument(j,_e,pt);return j.inclusive?yt>=0:yt>0}(a.endAt,__PRIVATE_queryNormalizedOrderBy(a),d))}(s,e)}function __PRIVATE_queryCollectionGroup(s){return s.collectionGroup||(s.path.length%2==1?s.path.lastSegment():s.path.get(s.path.length-2))}function __PRIVATE_newQueryComparator(s){return(e,o)=>{let a=!1;for(const d of __PRIVATE_queryNormalizedOrderBy(s)){const c=__PRIVATE_compareDocs(d,e,o);if(c!==0)return c;a=a||d.field.isKeyField()}return 0}}function __PRIVATE_compareDocs(s,e,o){const a=s.field.isKeyField()?DocumentKey.comparator(e.key,o.key):function(c,j,_e){const pt=j.data.field(c),yt=_e.data.field(c);return pt!==null&&yt!==null?__PRIVATE_valueCompare(pt,yt):fail(42886)}(s.field,e,o);switch(s.dir){case"asc":return a;case"desc":return-1*a;default:return fail(19790,{direction:s.dir})}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ObjectMap{constructor(e,o){this.mapKeyFn=e,this.equalsFn=o,this.inner={},this.innerSize=0}get(e){const o=this.mapKeyFn(e),a=this.inner[o];if(a!==void 0){for(const[d,c]of a)if(this.equalsFn(d,e))return c}}has(e){return this.get(e)!==void 0}set(e,o){const a=this.mapKeyFn(e),d=this.inner[a];if(d===void 0)return this.inner[a]=[[e,o]],void this.innerSize++;for(let c=0;c<d.length;c++)if(this.equalsFn(d[c][0],e))return void(d[c]=[e,o]);d.push([e,o]),this.innerSize++}delete(e){const o=this.mapKeyFn(e),a=this.inner[o];if(a===void 0)return!1;for(let d=0;d<a.length;d++)if(this.equalsFn(a[d][0],e))return a.length===1?delete this.inner[o]:a.splice(d,1),this.innerSize--,!0;return!1}forEach(e){forEach$1(this.inner,(o,a)=>{for(const[d,c]of a)e(d,c)})}isEmpty(){return isEmpty(this.inner)}size(){return this.innerSize}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const ht=new SortedMap(DocumentKey.comparator);function __PRIVATE_mutableDocumentMap(){return ht}const Pt=new SortedMap(DocumentKey.comparator);function documentMap(...s){let e=Pt;for(const o of s)e=e.insert(o.key,o);return e}function __PRIVATE_convertOverlayedDocumentMapToDocumentMap(s){let e=Pt;return s.forEach((o,a)=>e=e.insert(o,a.overlayedDocument)),e}function __PRIVATE_newOverlayMap(){return __PRIVATE_newDocumentKeyMap()}function __PRIVATE_newMutationMap(){return __PRIVATE_newDocumentKeyMap()}function __PRIVATE_newDocumentKeyMap(){return new ObjectMap(s=>s.toString(),(s,e)=>s.isEqual(e))}const Tt=new SortedMap(DocumentKey.comparator),It=new SortedSet(DocumentKey.comparator);function __PRIVATE_documentKeySet(...s){let e=It;for(const o of s)e=e.add(o);return e}const Et=new SortedSet(__PRIVATE_primitiveComparator);function __PRIVATE_targetIdSet(){return Et}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function __PRIVATE_toDouble(s,e){if(s.useProto3Json){if(isNaN(e))return{doubleValue:"NaN"};if(e===1/0)return{doubleValue:"Infinity"};if(e===-1/0)return{doubleValue:"-Infinity"}}return{doubleValue:__PRIVATE_isNegativeZero(e)?"-0":e}}function __PRIVATE_toInteger(s){return{integerValue:""+s}}function toNumber(s,e){return isSafeInteger(e)?__PRIVATE_toInteger(e):__PRIVATE_toDouble(s,e)}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class TransformOperation{constructor(){this._=void 0}}function __PRIVATE_applyTransformOperationToLocalView(s,e,o){return s instanceof __PRIVATE_ServerTimestampTransform?function(d,c){const j={fields:{[tt]:{stringValue:et},[rt]:{timestampValue:{seconds:d.seconds,nanos:d.nanoseconds}}}};return c&&__PRIVATE_isServerTimestamp(c)&&(c=__PRIVATE_getPreviousValue(c)),c&&(j.fields[nt]=c),{mapValue:j}}(o,e):s instanceof __PRIVATE_ArrayUnionTransformOperation?__PRIVATE_applyArrayUnionTransformOperation(s,e):s instanceof __PRIVATE_ArrayRemoveTransformOperation?__PRIVATE_applyArrayRemoveTransformOperation(s,e):function(d,c){const j=__PRIVATE_computeTransformOperationBaseValue(d,c),_e=asNumber(j)+asNumber(d.Re);return isInteger(j)&&isInteger(d.Re)?__PRIVATE_toInteger(_e):__PRIVATE_toDouble(d.serializer,_e)}(s,e)}function __PRIVATE_applyTransformOperationToRemoteDocument(s,e,o){return s instanceof __PRIVATE_ArrayUnionTransformOperation?__PRIVATE_applyArrayUnionTransformOperation(s,e):s instanceof __PRIVATE_ArrayRemoveTransformOperation?__PRIVATE_applyArrayRemoveTransformOperation(s,e):o}function __PRIVATE_computeTransformOperationBaseValue(s,e){return s instanceof __PRIVATE_NumericIncrementTransformOperation?function(a){return isInteger(a)||function(c){return!!c&&"doubleValue"in c}(a)}(e)?e:{integerValue:0}:null}class __PRIVATE_ServerTimestampTransform extends TransformOperation{}class __PRIVATE_ArrayUnionTransformOperation extends TransformOperation{constructor(e){super(),this.elements=e}}function __PRIVATE_applyArrayUnionTransformOperation(s,e){const o=__PRIVATE_coercedFieldValuesArray(e);for(const a of s.elements)o.some(d=>__PRIVATE_valueEquals(d,a))||o.push(a);return{arrayValue:{values:o}}}class __PRIVATE_ArrayRemoveTransformOperation extends TransformOperation{constructor(e){super(),this.elements=e}}function __PRIVATE_applyArrayRemoveTransformOperation(s,e){let o=__PRIVATE_coercedFieldValuesArray(e);for(const a of s.elements)o=o.filter(d=>!__PRIVATE_valueEquals(d,a));return{arrayValue:{values:o}}}class __PRIVATE_NumericIncrementTransformOperation extends TransformOperation{constructor(e,o){super(),this.serializer=e,this.Re=o}}function asNumber(s){return __PRIVATE_normalizeNumber(s.integerValue||s.doubleValue)}function __PRIVATE_coercedFieldValuesArray(s){return isArray(s)&&s.arrayValue.values?s.arrayValue.values.slice():[]}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class FieldTransform{constructor(e,o){this.field=e,this.transform=o}}function __PRIVATE_fieldTransformEquals(s,e){return s.field.isEqual(e.field)&&function(a,d){return a instanceof __PRIVATE_ArrayUnionTransformOperation&&d instanceof __PRIVATE_ArrayUnionTransformOperation||a instanceof __PRIVATE_ArrayRemoveTransformOperation&&d instanceof __PRIVATE_ArrayRemoveTransformOperation?__PRIVATE_arrayEquals(a.elements,d.elements,__PRIVATE_valueEquals):a instanceof __PRIVATE_NumericIncrementTransformOperation&&d instanceof __PRIVATE_NumericIncrementTransformOperation?__PRIVATE_valueEquals(a.Re,d.Re):a instanceof __PRIVATE_ServerTimestampTransform&&d instanceof __PRIVATE_ServerTimestampTransform}(s.transform,e.transform)}class MutationResult{constructor(e,o){this.version=e,this.transformResults=o}}class Precondition{constructor(e,o){this.updateTime=e,this.exists=o}static none(){return new Precondition}static exists(e){return new Precondition(void 0,e)}static updateTime(e){return new Precondition(e)}get isNone(){return this.updateTime===void 0&&this.exists===void 0}isEqual(e){return this.exists===e.exists&&(this.updateTime?!!e.updateTime&&this.updateTime.isEqual(e.updateTime):!e.updateTime)}}function __PRIVATE_preconditionIsValidForDocument(s,e){return s.updateTime!==void 0?e.isFoundDocument()&&e.version.isEqual(s.updateTime):s.exists===void 0||s.exists===e.isFoundDocument()}class Mutation{}function __PRIVATE_calculateOverlayMutation(s,e){if(!s.hasLocalMutations||e&&e.fields.length===0)return null;if(e===null)return s.isNoDocument()?new __PRIVATE_DeleteMutation(s.key,Precondition.none()):new __PRIVATE_SetMutation(s.key,s.data,Precondition.none());{const o=s.data,a=ObjectValue.empty();let d=new SortedSet(FieldPath$1.comparator);for(let c of e.fields)if(!d.has(c)){let j=o.field(c);j===null&&c.length>1&&(c=c.popLast(),j=o.field(c)),j===null?a.delete(c):a.set(c,j),d=d.add(c)}return new __PRIVATE_PatchMutation(s.key,a,new FieldMask(d.toArray()),Precondition.none())}}function __PRIVATE_mutationApplyToRemoteDocument(s,e,o){s instanceof __PRIVATE_SetMutation?function(d,c,j){const _e=d.value.clone(),pt=__PRIVATE_serverTransformResults(d.fieldTransforms,c,j.transformResults);_e.setAll(pt),c.convertToFoundDocument(j.version,_e).setHasCommittedMutations()}(s,e,o):s instanceof __PRIVATE_PatchMutation?function(d,c,j){if(!__PRIVATE_preconditionIsValidForDocument(d.precondition,c))return void c.convertToUnknownDocument(j.version);const _e=__PRIVATE_serverTransformResults(d.fieldTransforms,c,j.transformResults),pt=c.data;pt.setAll(__PRIVATE_getPatch(d)),pt.setAll(_e),c.convertToFoundDocument(j.version,pt).setHasCommittedMutations()}(s,e,o):function(d,c,j){c.convertToNoDocument(j.version).setHasCommittedMutations()}(0,e,o)}function __PRIVATE_mutationApplyToLocalView(s,e,o,a){return s instanceof __PRIVATE_SetMutation?function(c,j,_e,pt){if(!__PRIVATE_preconditionIsValidForDocument(c.precondition,j))return _e;const yt=c.value.clone(),ct=__PRIVATE_localTransformResults(c.fieldTransforms,pt,j);return yt.setAll(ct),j.convertToFoundDocument(j.version,yt).setHasLocalMutations(),null}(s,e,o,a):s instanceof __PRIVATE_PatchMutation?function(c,j,_e,pt){if(!__PRIVATE_preconditionIsValidForDocument(c.precondition,j))return _e;const yt=__PRIVATE_localTransformResults(c.fieldTransforms,pt,j),ct=j.data;return ct.setAll(__PRIVATE_getPatch(c)),ct.setAll(yt),j.convertToFoundDocument(j.version,ct).setHasLocalMutations(),_e===null?null:_e.unionWith(c.fieldMask.fields).unionWith(c.fieldTransforms.map(Ct=>Ct.field))}(s,e,o,a):function(c,j,_e){return __PRIVATE_preconditionIsValidForDocument(c.precondition,j)?(j.convertToNoDocument(j.version).setHasLocalMutations(),null):_e}(s,e,o)}function __PRIVATE_mutationExtractBaseValue(s,e){let o=null;for(const a of s.fieldTransforms){const d=e.data.field(a.field),c=__PRIVATE_computeTransformOperationBaseValue(a.transform,d||null);c!=null&&(o===null&&(o=ObjectValue.empty()),o.set(a.field,c))}return o||null}function __PRIVATE_mutationEquals(s,e){return s.type===e.type&&!!s.key.isEqual(e.key)&&!!s.precondition.isEqual(e.precondition)&&!!function(a,d){return a===void 0&&d===void 0||!(!a||!d)&&__PRIVATE_arrayEquals(a,d,(c,j)=>__PRIVATE_fieldTransformEquals(c,j))}(s.fieldTransforms,e.fieldTransforms)&&(s.type===0?s.value.isEqual(e.value):s.type!==1||s.data.isEqual(e.data)&&s.fieldMask.isEqual(e.fieldMask))}class __PRIVATE_SetMutation extends Mutation{constructor(e,o,a,d=[]){super(),this.key=e,this.value=o,this.precondition=a,this.fieldTransforms=d,this.type=0}getFieldMask(){return null}}class __PRIVATE_PatchMutation extends Mutation{constructor(e,o,a,d,c=[]){super(),this.key=e,this.data=o,this.fieldMask=a,this.precondition=d,this.fieldTransforms=c,this.type=1}getFieldMask(){return this.fieldMask}}function __PRIVATE_getPatch(s){const e=new Map;return s.fieldMask.fields.forEach(o=>{if(!o.isEmpty()){const a=s.data.field(o);e.set(o,a)}}),e}function __PRIVATE_serverTransformResults(s,e,o){const a=new Map;__PRIVATE_hardAssert(s.length===o.length,32656,{Ve:o.length,me:s.length});for(let d=0;d<o.length;d++){const c=s[d],j=c.transform,_e=e.data.field(c.field);a.set(c.field,__PRIVATE_applyTransformOperationToRemoteDocument(j,_e,o[d]))}return a}function __PRIVATE_localTransformResults(s,e,o){const a=new Map;for(const d of s){const c=d.transform,j=o.data.field(d.field);a.set(d.field,__PRIVATE_applyTransformOperationToLocalView(c,j,e))}return a}class __PRIVATE_DeleteMutation extends Mutation{constructor(e,o){super(),this.key=e,this.precondition=o,this.type=2,this.fieldTransforms=[]}getFieldMask(){return null}}class __PRIVATE_VerifyMutation extends Mutation{constructor(e,o){super(),this.key=e,this.precondition=o,this.type=3,this.fieldTransforms=[]}getFieldMask(){return null}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class MutationBatch{constructor(e,o,a,d){this.batchId=e,this.localWriteTime=o,this.baseMutations=a,this.mutations=d}applyToRemoteDocument(e,o){const a=o.mutationResults;for(let d=0;d<this.mutations.length;d++){const c=this.mutations[d];c.key.isEqual(e.key)&&__PRIVATE_mutationApplyToRemoteDocument(c,e,a[d])}}applyToLocalView(e,o){for(const a of this.baseMutations)a.key.isEqual(e.key)&&(o=__PRIVATE_mutationApplyToLocalView(a,e,o,this.localWriteTime));for(const a of this.mutations)a.key.isEqual(e.key)&&(o=__PRIVATE_mutationApplyToLocalView(a,e,o,this.localWriteTime));return o}applyToLocalDocumentSet(e,o){const a=__PRIVATE_newMutationMap();return this.mutations.forEach(d=>{const c=e.get(d.key),j=c.overlayedDocument;let _e=this.applyToLocalView(j,c.mutatedFields);_e=o.has(d.key)?null:_e;const pt=__PRIVATE_calculateOverlayMutation(j,_e);pt!==null&&a.set(d.key,pt),j.isValidDocument()||j.convertToNoDocument(SnapshotVersion.min())}),a}keys(){return this.mutations.reduce((e,o)=>e.add(o.key),__PRIVATE_documentKeySet())}isEqual(e){return this.batchId===e.batchId&&__PRIVATE_arrayEquals(this.mutations,e.mutations,(o,a)=>__PRIVATE_mutationEquals(o,a))&&__PRIVATE_arrayEquals(this.baseMutations,e.baseMutations,(o,a)=>__PRIVATE_mutationEquals(o,a))}}class MutationBatchResult{constructor(e,o,a,d){this.batch=e,this.commitVersion=o,this.mutationResults=a,this.docVersions=d}static from(e,o,a){__PRIVATE_hardAssert(e.mutations.length===a.length,58842,{fe:e.mutations.length,ge:a.length});let d=function(){return Tt}();const c=e.mutations;for(let j=0;j<c.length;j++)d=d.insert(c[j].key,a[j].version);return new MutationBatchResult(e,o,a,d)}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Overlay{constructor(e,o){this.largestBatchId=e,this.mutation=o}getKey(){return this.mutation.key}isEqual(e){return e!==null&&this.mutation===e.mutation}toString(){return`Overlay{
      largestBatchId: ${this.largestBatchId},
      mutation: ${this.mutation.toString()}
    }`}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ExistenceFilter{constructor(e,o){this.count=e,this.unchangedNames=o}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var dt,At;function __PRIVATE_isPermanentError(s){switch(s){case F.OK:return fail(64938);case F.CANCELLED:case F.UNKNOWN:case F.DEADLINE_EXCEEDED:case F.RESOURCE_EXHAUSTED:case F.INTERNAL:case F.UNAVAILABLE:case F.UNAUTHENTICATED:return!1;case F.INVALID_ARGUMENT:case F.NOT_FOUND:case F.ALREADY_EXISTS:case F.PERMISSION_DENIED:case F.FAILED_PRECONDITION:case F.ABORTED:case F.OUT_OF_RANGE:case F.UNIMPLEMENTED:case F.DATA_LOSS:return!0;default:return fail(15467,{code:s})}}function __PRIVATE_mapCodeFromRpcCode(s){if(s===void 0)return __PRIVATE_logError("GRPC error has no .code"),F.UNKNOWN;switch(s){case dt.OK:return F.OK;case dt.CANCELLED:return F.CANCELLED;case dt.UNKNOWN:return F.UNKNOWN;case dt.DEADLINE_EXCEEDED:return F.DEADLINE_EXCEEDED;case dt.RESOURCE_EXHAUSTED:return F.RESOURCE_EXHAUSTED;case dt.INTERNAL:return F.INTERNAL;case dt.UNAVAILABLE:return F.UNAVAILABLE;case dt.UNAUTHENTICATED:return F.UNAUTHENTICATED;case dt.INVALID_ARGUMENT:return F.INVALID_ARGUMENT;case dt.NOT_FOUND:return F.NOT_FOUND;case dt.ALREADY_EXISTS:return F.ALREADY_EXISTS;case dt.PERMISSION_DENIED:return F.PERMISSION_DENIED;case dt.FAILED_PRECONDITION:return F.FAILED_PRECONDITION;case dt.ABORTED:return F.ABORTED;case dt.OUT_OF_RANGE:return F.OUT_OF_RANGE;case dt.UNIMPLEMENTED:return F.UNIMPLEMENTED;case dt.DATA_LOSS:return F.DATA_LOSS;default:return fail(39323,{code:s})}}(At=dt||(dt={}))[At.OK=0]="OK",At[At.CANCELLED=1]="CANCELLED",At[At.UNKNOWN=2]="UNKNOWN",At[At.INVALID_ARGUMENT=3]="INVALID_ARGUMENT",At[At.DEADLINE_EXCEEDED=4]="DEADLINE_EXCEEDED",At[At.NOT_FOUND=5]="NOT_FOUND",At[At.ALREADY_EXISTS=6]="ALREADY_EXISTS",At[At.PERMISSION_DENIED=7]="PERMISSION_DENIED",At[At.UNAUTHENTICATED=16]="UNAUTHENTICATED",At[At.RESOURCE_EXHAUSTED=8]="RESOURCE_EXHAUSTED",At[At.FAILED_PRECONDITION=9]="FAILED_PRECONDITION",At[At.ABORTED=10]="ABORTED",At[At.OUT_OF_RANGE=11]="OUT_OF_RANGE",At[At.UNIMPLEMENTED=12]="UNIMPLEMENTED",At[At.INTERNAL=13]="INTERNAL",At[At.UNAVAILABLE=14]="UNAVAILABLE",At[At.DATA_LOSS=15]="DATA_LOSS";/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Vt=new Integer([4294967295,4294967295],0);function __PRIVATE_getMd5HashValue(s){const e=__PRIVATE_newTextEncoder().encode(s),o=new Md5;return o.update(e),new Uint8Array(o.digest())}function __PRIVATE_get64BitUints(s){const e=new DataView(s.buffer),o=e.getUint32(0,!0),a=e.getUint32(4,!0),d=e.getUint32(8,!0),c=e.getUint32(12,!0);return[new Integer([o,a],0),new Integer([d,c],0)]}class BloomFilter{constructor(e,o,a){if(this.bitmap=e,this.padding=o,this.hashCount=a,o<0||o>=8)throw new __PRIVATE_BloomFilterError(`Invalid padding: ${o}`);if(a<0)throw new __PRIVATE_BloomFilterError(`Invalid hash count: ${a}`);if(e.length>0&&this.hashCount===0)throw new __PRIVATE_BloomFilterError(`Invalid hash count: ${a}`);if(e.length===0&&o!==0)throw new __PRIVATE_BloomFilterError(`Invalid padding when bitmap length is 0: ${o}`);this.pe=8*e.length-o,this.ye=Integer.fromNumber(this.pe)}we(e,o,a){let d=e.add(o.multiply(Integer.fromNumber(a)));return d.compare(Vt)===1&&(d=new Integer([d.getBits(0),d.getBits(1)],0)),d.modulo(this.ye).toNumber()}be(e){return!!(this.bitmap[Math.floor(e/8)]&1<<e%8)}mightContain(e){if(this.pe===0)return!1;const o=__PRIVATE_getMd5HashValue(e),[a,d]=__PRIVATE_get64BitUints(o);for(let c=0;c<this.hashCount;c++){const j=this.we(a,d,c);if(!this.be(j))return!1}return!0}static create(e,o,a){const d=e%8==0?0:8-e%8,c=new Uint8Array(Math.ceil(e/8)),j=new BloomFilter(c,d,o);return a.forEach(_e=>j.insert(_e)),j}insert(e){if(this.pe===0)return;const o=__PRIVATE_getMd5HashValue(e),[a,d]=__PRIVATE_get64BitUints(o);for(let c=0;c<this.hashCount;c++){const j=this.we(a,d,c);this.Se(j)}}Se(e){const o=Math.floor(e/8),a=e%8;this.bitmap[o]|=1<<a}}class __PRIVATE_BloomFilterError extends Error{constructor(){super(...arguments),this.name="BloomFilterError"}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class RemoteEvent{constructor(e,o,a,d,c){this.snapshotVersion=e,this.targetChanges=o,this.targetMismatches=a,this.documentUpdates=d,this.resolvedLimboDocuments=c}static createSynthesizedRemoteEventForCurrentChange(e,o,a){const d=new Map;return d.set(e,TargetChange.createSynthesizedTargetChangeForCurrentChange(e,o,a)),new RemoteEvent(SnapshotVersion.min(),d,new SortedMap(__PRIVATE_primitiveComparator),__PRIVATE_mutableDocumentMap(),__PRIVATE_documentKeySet())}}class TargetChange{constructor(e,o,a,d,c){this.resumeToken=e,this.current=o,this.addedDocuments=a,this.modifiedDocuments=d,this.removedDocuments=c}static createSynthesizedTargetChangeForCurrentChange(e,o,a){return new TargetChange(a,o,__PRIVATE_documentKeySet(),__PRIVATE_documentKeySet(),__PRIVATE_documentKeySet())}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class __PRIVATE_DocumentWatchChange{constructor(e,o,a,d){this.De=e,this.removedTargetIds=o,this.key=a,this.ve=d}}class __PRIVATE_ExistenceFilterChange{constructor(e,o){this.targetId=e,this.Ce=o}}class __PRIVATE_WatchTargetChange{constructor(e,o,a=ByteString.EMPTY_BYTE_STRING,d=null){this.state=e,this.targetIds=o,this.resumeToken=a,this.cause=d}}class __PRIVATE_TargetState{constructor(){this.Fe=0,this.Me=__PRIVATE_snapshotChangesMap(),this.xe=ByteString.EMPTY_BYTE_STRING,this.Oe=!1,this.Ne=!0}get current(){return this.Oe}get resumeToken(){return this.xe}get Be(){return this.Fe!==0}get Le(){return this.Ne}ke(e){e.approximateByteSize()>0&&(this.Ne=!0,this.xe=e)}qe(){let e=__PRIVATE_documentKeySet(),o=__PRIVATE_documentKeySet(),a=__PRIVATE_documentKeySet();return this.Me.forEach((d,c)=>{switch(c){case 0:e=e.add(d);break;case 2:o=o.add(d);break;case 1:a=a.add(d);break;default:fail(38017,{changeType:c})}}),new TargetChange(this.xe,this.Oe,e,o,a)}Qe(){this.Ne=!1,this.Me=__PRIVATE_snapshotChangesMap()}$e(e,o){this.Ne=!0,this.Me=this.Me.insert(e,o)}Ue(e){this.Ne=!0,this.Me=this.Me.remove(e)}Ke(){this.Fe+=1}We(){this.Fe-=1,__PRIVATE_hardAssert(this.Fe>=0,3241,{Fe:this.Fe})}Ge(){this.Ne=!0,this.Oe=!0}}class __PRIVATE_WatchChangeAggregator{constructor(e){this.ze=e,this.je=new Map,this.He=__PRIVATE_mutableDocumentMap(),this.Je=__PRIVATE_documentTargetMap(),this.Ye=__PRIVATE_documentTargetMap(),this.Ze=new SortedMap(__PRIVATE_primitiveComparator)}Xe(e){for(const o of e.De)e.ve&&e.ve.isFoundDocument()?this.et(o,e.ve):this.tt(o,e.key,e.ve);for(const o of e.removedTargetIds)this.tt(o,e.key,e.ve)}nt(e){this.forEachTarget(e,o=>{const a=this.rt(o);switch(e.state){case 0:this.it(o)&&a.ke(e.resumeToken);break;case 1:a.We(),a.Be||a.Qe(),a.ke(e.resumeToken);break;case 2:a.We(),a.Be||this.removeTarget(o);break;case 3:this.it(o)&&(a.Ge(),a.ke(e.resumeToken));break;case 4:this.it(o)&&(this.st(o),a.ke(e.resumeToken));break;default:fail(56790,{state:e.state})}})}forEachTarget(e,o){e.targetIds.length>0?e.targetIds.forEach(o):this.je.forEach((a,d)=>{this.it(d)&&o(d)})}ot(e){const o=e.targetId,a=e.Ce.count,d=this._t(o);if(d){const c=d.target;if(__PRIVATE_targetIsDocumentTarget(c))if(a===0){const j=new DocumentKey(c.path);this.tt(o,j,MutableDocument.newNoDocument(j,SnapshotVersion.min()))}else __PRIVATE_hardAssert(a===1,20013,{expectedCount:a});else{const j=this.ut(o);if(j!==a){const _e=this.ct(e),pt=_e?this.lt(_e,e,j):1;if(pt!==0){this.st(o);const yt=pt===2?"TargetPurposeExistenceFilterMismatchBloom":"TargetPurposeExistenceFilterMismatch";this.Ze=this.Ze.insert(o,yt)}}}}}ct(e){const o=e.Ce.unchangedNames;if(!o||!o.bits)return null;const{bits:{bitmap:a="",padding:d=0},hashCount:c=0}=o;let j,_e;try{j=__PRIVATE_normalizeByteString(a).toUint8Array()}catch(pt){if(pt instanceof __PRIVATE_Base64DecodeError)return __PRIVATE_logWarn("Decoding the base64 bloom filter in existence filter failed ("+pt.message+"); ignoring the bloom filter and falling back to full re-query."),null;throw pt}try{_e=new BloomFilter(j,d,c)}catch(pt){return __PRIVATE_logWarn(pt instanceof __PRIVATE_BloomFilterError?"BloomFilter error: ":"Applying bloom filter failed: ",pt),null}return _e.pe===0?null:_e}lt(e,o,a){return o.Ce.count===a-this.Tt(e,o.targetId)?0:2}Tt(e,o){const a=this.ze.getRemoteKeysForTarget(o);let d=0;return a.forEach(c=>{const j=this.ze.Pt(),_e=`projects/${j.projectId}/databases/${j.database}/documents/${c.path.canonicalString()}`;e.mightContain(_e)||(this.tt(o,c,null),d++)}),d}It(e){const o=new Map;this.je.forEach((c,j)=>{const _e=this._t(j);if(_e){if(c.current&&__PRIVATE_targetIsDocumentTarget(_e.target)){const pt=new DocumentKey(_e.target.path);this.Et(pt).has(j)||this.dt(j,pt)||this.tt(j,pt,MutableDocument.newNoDocument(pt,e))}c.Le&&(o.set(j,c.qe()),c.Qe())}});let a=__PRIVATE_documentKeySet();this.Ye.forEach((c,j)=>{let _e=!0;j.forEachWhile(pt=>{const yt=this._t(pt);return!yt||yt.purpose==="TargetPurposeLimboResolution"||(_e=!1,!1)}),_e&&(a=a.add(c))}),this.He.forEach((c,j)=>j.setReadTime(e));const d=new RemoteEvent(e,o,this.Ze,this.He,a);return this.He=__PRIVATE_mutableDocumentMap(),this.Je=__PRIVATE_documentTargetMap(),this.Ye=__PRIVATE_documentTargetMap(),this.Ze=new SortedMap(__PRIVATE_primitiveComparator),d}et(e,o){if(!this.it(e))return;const a=this.dt(e,o.key)?2:0;this.rt(e).$e(o.key,a),this.He=this.He.insert(o.key,o),this.Je=this.Je.insert(o.key,this.Et(o.key).add(e)),this.Ye=this.Ye.insert(o.key,this.At(o.key).add(e))}tt(e,o,a){if(!this.it(e))return;const d=this.rt(e);this.dt(e,o)?d.$e(o,1):d.Ue(o),this.Ye=this.Ye.insert(o,this.At(o).delete(e)),this.Ye=this.Ye.insert(o,this.At(o).add(e)),a&&(this.He=this.He.insert(o,a))}removeTarget(e){this.je.delete(e)}ut(e){const o=this.rt(e).qe();return this.ze.getRemoteKeysForTarget(e).size+o.addedDocuments.size-o.removedDocuments.size}Ke(e){this.rt(e).Ke()}rt(e){let o=this.je.get(e);return o||(o=new __PRIVATE_TargetState,this.je.set(e,o)),o}At(e){let o=this.Ye.get(e);return o||(o=new SortedSet(__PRIVATE_primitiveComparator),this.Ye=this.Ye.insert(e,o)),o}Et(e){let o=this.Je.get(e);return o||(o=new SortedSet(__PRIVATE_primitiveComparator),this.Je=this.Je.insert(e,o)),o}it(e){const o=this._t(e)!==null;return o||__PRIVATE_logDebug("WatchChangeAggregator","Detected inactive target",e),o}_t(e){const o=this.je.get(e);return o&&o.Be?null:this.ze.Rt(e)}st(e){this.je.set(e,new __PRIVATE_TargetState),this.ze.getRemoteKeysForTarget(e).forEach(o=>{this.tt(e,o,null)})}dt(e,o){return this.ze.getRemoteKeysForTarget(e).has(o)}}function __PRIVATE_documentTargetMap(){return new SortedMap(DocumentKey.comparator)}function __PRIVATE_snapshotChangesMap(){return new SortedMap(DocumentKey.comparator)}const mt={asc:"ASCENDING",desc:"DESCENDING"},ft={"<":"LESS_THAN","<=":"LESS_THAN_OR_EQUAL",">":"GREATER_THAN",">=":"GREATER_THAN_OR_EQUAL","==":"EQUAL","!=":"NOT_EQUAL","array-contains":"ARRAY_CONTAINS",in:"IN","not-in":"NOT_IN","array-contains-any":"ARRAY_CONTAINS_ANY"},gt={and:"AND",or:"OR"};class JsonProtoSerializer{constructor(e,o){this.databaseId=e,this.useProto3Json=o}}function __PRIVATE_toInt32Proto(s,e){return s.useProto3Json||__PRIVATE_isNullOrUndefined(e)?e:{value:e}}function toTimestamp(s,e){return s.useProto3Json?`${new Date(1e3*e.seconds).toISOString().replace(/\.\d*/,"").replace("Z","")}.${("000000000"+e.nanoseconds).slice(-9)}Z`:{seconds:""+e.seconds,nanos:e.nanoseconds}}function __PRIVATE_toBytes(s,e){return s.useProto3Json?e.toBase64():e.toUint8Array()}function __PRIVATE_toVersion(s,e){return toTimestamp(s,e.toTimestamp())}function __PRIVATE_fromVersion(s){return __PRIVATE_hardAssert(!!s,49232),SnapshotVersion.fromTimestamp(function(o){const a=__PRIVATE_normalizeTimestamp(o);return new Timestamp(a.seconds,a.nanos)}(s))}function __PRIVATE_toResourceName(s,e){return __PRIVATE_toResourcePath(s,e).canonicalString()}function __PRIVATE_toResourcePath(s,e){const o=function(d){return new ResourcePath(["projects",d.projectId,"databases",d.database])}(s).child("documents");return e===void 0?o:o.child(e)}function __PRIVATE_fromResourceName(s){const e=ResourcePath.fromString(s);return __PRIVATE_hardAssert(__PRIVATE_isValidResourceName(e),10190,{key:e.toString()}),e}function __PRIVATE_toName(s,e){return __PRIVATE_toResourceName(s.databaseId,e.path)}function fromName(s,e){const o=__PRIVATE_fromResourceName(e);if(o.get(1)!==s.databaseId.projectId)throw new FirestoreError(F.INVALID_ARGUMENT,"Tried to deserialize key from different project: "+o.get(1)+" vs "+s.databaseId.projectId);if(o.get(3)!==s.databaseId.database)throw new FirestoreError(F.INVALID_ARGUMENT,"Tried to deserialize key from different database: "+o.get(3)+" vs "+s.databaseId.database);return new DocumentKey(__PRIVATE_extractLocalPathFromResourceName(o))}function __PRIVATE_toQueryPath(s,e){return __PRIVATE_toResourceName(s.databaseId,e)}function __PRIVATE_fromQueryPath(s){const e=__PRIVATE_fromResourceName(s);return e.length===4?ResourcePath.emptyPath():__PRIVATE_extractLocalPathFromResourceName(e)}function __PRIVATE_getEncodedDatabaseId(s){return new ResourcePath(["projects",s.databaseId.projectId,"databases",s.databaseId.database]).canonicalString()}function __PRIVATE_extractLocalPathFromResourceName(s){return __PRIVATE_hardAssert(s.length>4&&s.get(4)==="documents",29091,{key:s.toString()}),s.popFirst(5)}function __PRIVATE_toMutationDocument(s,e,o){return{name:__PRIVATE_toName(s,e),fields:o.value.mapValue.fields}}function __PRIVATE_fromWatchChange(s,e){let o;if("targetChange"in e){e.targetChange;const a=function(yt){return yt==="NO_CHANGE"?0:yt==="ADD"?1:yt==="REMOVE"?2:yt==="CURRENT"?3:yt==="RESET"?4:fail(39313,{state:yt})}(e.targetChange.targetChangeType||"NO_CHANGE"),d=e.targetChange.targetIds||[],c=function(yt,ct){return yt.useProto3Json?(__PRIVATE_hardAssert(ct===void 0||typeof ct=="string",58123),ByteString.fromBase64String(ct||"")):(__PRIVATE_hardAssert(ct===void 0||ct instanceof Buffer||ct instanceof Uint8Array,16193),ByteString.fromUint8Array(ct||new Uint8Array))}(s,e.targetChange.resumeToken),j=e.targetChange.cause,_e=j&&function(yt){const ct=yt.code===void 0?F.UNKNOWN:__PRIVATE_mapCodeFromRpcCode(yt.code);return new FirestoreError(ct,yt.message||"")}(j);o=new __PRIVATE_WatchTargetChange(a,d,c,_e||null)}else if("documentChange"in e){e.documentChange;const a=e.documentChange;a.document,a.document.name,a.document.updateTime;const d=fromName(s,a.document.name),c=__PRIVATE_fromVersion(a.document.updateTime),j=a.document.createTime?__PRIVATE_fromVersion(a.document.createTime):SnapshotVersion.min(),_e=new ObjectValue({mapValue:{fields:a.document.fields}}),pt=MutableDocument.newFoundDocument(d,c,j,_e),yt=a.targetIds||[],ct=a.removedTargetIds||[];o=new __PRIVATE_DocumentWatchChange(yt,ct,pt.key,pt)}else if("documentDelete"in e){e.documentDelete;const a=e.documentDelete;a.document;const d=fromName(s,a.document),c=a.readTime?__PRIVATE_fromVersion(a.readTime):SnapshotVersion.min(),j=MutableDocument.newNoDocument(d,c),_e=a.removedTargetIds||[];o=new __PRIVATE_DocumentWatchChange([],_e,j.key,j)}else if("documentRemove"in e){e.documentRemove;const a=e.documentRemove;a.document;const d=fromName(s,a.document),c=a.removedTargetIds||[];o=new __PRIVATE_DocumentWatchChange([],c,d,null)}else{if(!("filter"in e))return fail(11601,{Vt:e});{e.filter;const a=e.filter;a.targetId;const{count:d=0,unchangedNames:c}=a,j=new ExistenceFilter(d,c),_e=a.targetId;o=new __PRIVATE_ExistenceFilterChange(_e,j)}}return o}function toMutation(s,e){let o;if(e instanceof __PRIVATE_SetMutation)o={update:__PRIVATE_toMutationDocument(s,e.key,e.value)};else if(e instanceof __PRIVATE_DeleteMutation)o={delete:__PRIVATE_toName(s,e.key)};else if(e instanceof __PRIVATE_PatchMutation)o={update:__PRIVATE_toMutationDocument(s,e.key,e.data),updateMask:__PRIVATE_toDocumentMask(e.fieldMask)};else{if(!(e instanceof __PRIVATE_VerifyMutation))return fail(16599,{ft:e.type});o={verify:__PRIVATE_toName(s,e.key)}}return e.fieldTransforms.length>0&&(o.updateTransforms=e.fieldTransforms.map(a=>function(c,j){const _e=j.transform;if(_e instanceof __PRIVATE_ServerTimestampTransform)return{fieldPath:j.field.canonicalString(),setToServerValue:"REQUEST_TIME"};if(_e instanceof __PRIVATE_ArrayUnionTransformOperation)return{fieldPath:j.field.canonicalString(),appendMissingElements:{values:_e.elements}};if(_e instanceof __PRIVATE_ArrayRemoveTransformOperation)return{fieldPath:j.field.canonicalString(),removeAllFromArray:{values:_e.elements}};if(_e instanceof __PRIVATE_NumericIncrementTransformOperation)return{fieldPath:j.field.canonicalString(),increment:_e.Re};throw fail(20930,{transform:j.transform})}(0,a))),e.precondition.isNone||(o.currentDocument=function(d,c){return c.updateTime!==void 0?{updateTime:__PRIVATE_toVersion(d,c.updateTime)}:c.exists!==void 0?{exists:c.exists}:fail(27497)}(s,e.precondition)),o}function __PRIVATE_fromWriteResults(s,e){return s&&s.length>0?(__PRIVATE_hardAssert(e!==void 0,14353),s.map(o=>function(d,c){let j=d.updateTime?__PRIVATE_fromVersion(d.updateTime):__PRIVATE_fromVersion(c);return j.isEqual(SnapshotVersion.min())&&(j=__PRIVATE_fromVersion(c)),new MutationResult(j,d.transformResults||[])}(o,e))):[]}function __PRIVATE_toDocumentsTarget(s,e){return{documents:[__PRIVATE_toQueryPath(s,e.path)]}}function __PRIVATE_toQueryTarget(s,e){const o={structuredQuery:{}},a=e.path;let d;e.collectionGroup!==null?(d=a,o.structuredQuery.from=[{collectionId:e.collectionGroup,allDescendants:!0}]):(d=a.popLast(),o.structuredQuery.from=[{collectionId:a.lastSegment()}]),o.parent=__PRIVATE_toQueryPath(s,d);const c=function(yt){if(yt.length!==0)return __PRIVATE_toFilter(CompositeFilter.create(yt,"and"))}(e.filters);c&&(o.structuredQuery.where=c);const j=function(yt){if(yt.length!==0)return yt.map(ct=>function(qt){return{field:__PRIVATE_toFieldPathReference(qt.field),direction:__PRIVATE_toDirection(qt.dir)}}(ct))}(e.orderBy);j&&(o.structuredQuery.orderBy=j);const _e=__PRIVATE_toInt32Proto(s,e.limit);return _e!==null&&(o.structuredQuery.limit=_e),e.startAt&&(o.structuredQuery.startAt=function(yt){return{before:yt.inclusive,values:yt.position}}(e.startAt)),e.endAt&&(o.structuredQuery.endAt=function(yt){return{before:!yt.inclusive,values:yt.position}}(e.endAt)),{gt:o,parent:d}}function __PRIVATE_convertQueryTargetToQuery(s){let e=__PRIVATE_fromQueryPath(s.parent);const o=s.structuredQuery,a=o.from?o.from.length:0;let d=null;if(a>0){__PRIVATE_hardAssert(a===1,65062);const ct=o.from[0];ct.allDescendants?d=ct.collectionId:e=e.child(ct.collectionId)}let c=[];o.where&&(c=function(Ct){const qt=__PRIVATE_fromFilter(Ct);return qt instanceof CompositeFilter&&__PRIVATE_compositeFilterIsFlatConjunction(qt)?qt.getFilters():[qt]}(o.where));let j=[];o.orderBy&&(j=function(Ct){return Ct.map(qt=>function(Lt){return new OrderBy(__PRIVATE_fromFieldPathReference(Lt.field),function(ir){switch(ir){case"ASCENDING":return"asc";case"DESCENDING":return"desc";default:return}}(Lt.direction))}(qt))}(o.orderBy));let _e=null;o.limit&&(_e=function(Ct){let qt;return qt=typeof Ct=="object"?Ct.value:Ct,__PRIVATE_isNullOrUndefined(qt)?null:qt}(o.limit));let pt=null;o.startAt&&(pt=function(Ct){const qt=!!Ct.before,Ot=Ct.values||[];return new Bound(Ot,qt)}(o.startAt));let yt=null;return o.endAt&&(yt=function(Ct){const qt=!Ct.before,Ot=Ct.values||[];return new Bound(Ot,qt)}(o.endAt)),__PRIVATE_newQuery(e,d,j,c,_e,"F",pt,yt)}function __PRIVATE_toListenRequestLabels(s,e){const o=function(d){switch(d){case"TargetPurposeListen":return null;case"TargetPurposeExistenceFilterMismatch":return"existence-filter-mismatch";case"TargetPurposeExistenceFilterMismatchBloom":return"existence-filter-mismatch-bloom";case"TargetPurposeLimboResolution":return"limbo-document";default:return fail(28987,{purpose:d})}}(e.purpose);return o==null?null:{"goog-listen-tags":o}}function __PRIVATE_fromFilter(s){return s.unaryFilter!==void 0?function(o){switch(o.unaryFilter.op){case"IS_NAN":const a=__PRIVATE_fromFieldPathReference(o.unaryFilter.field);return FieldFilter.create(a,"==",{doubleValue:NaN});case"IS_NULL":const d=__PRIVATE_fromFieldPathReference(o.unaryFilter.field);return FieldFilter.create(d,"==",{nullValue:"NULL_VALUE"});case"IS_NOT_NAN":const c=__PRIVATE_fromFieldPathReference(o.unaryFilter.field);return FieldFilter.create(c,"!=",{doubleValue:NaN});case"IS_NOT_NULL":const j=__PRIVATE_fromFieldPathReference(o.unaryFilter.field);return FieldFilter.create(j,"!=",{nullValue:"NULL_VALUE"});case"OPERATOR_UNSPECIFIED":return fail(61313);default:return fail(60726)}}(s):s.fieldFilter!==void 0?function(o){return FieldFilter.create(__PRIVATE_fromFieldPathReference(o.fieldFilter.field),function(d){switch(d){case"EQUAL":return"==";case"NOT_EQUAL":return"!=";case"GREATER_THAN":return">";case"GREATER_THAN_OR_EQUAL":return">=";case"LESS_THAN":return"<";case"LESS_THAN_OR_EQUAL":return"<=";case"ARRAY_CONTAINS":return"array-contains";case"IN":return"in";case"NOT_IN":return"not-in";case"ARRAY_CONTAINS_ANY":return"array-contains-any";case"OPERATOR_UNSPECIFIED":return fail(58110);default:return fail(50506)}}(o.fieldFilter.op),o.fieldFilter.value)}(s):s.compositeFilter!==void 0?function(o){return CompositeFilter.create(o.compositeFilter.filters.map(a=>__PRIVATE_fromFilter(a)),function(d){switch(d){case"AND":return"and";case"OR":return"or";default:return fail(1026)}}(o.compositeFilter.op))}(s):fail(30097,{filter:s})}function __PRIVATE_toDirection(s){return mt[s]}function __PRIVATE_toOperatorName(s){return ft[s]}function __PRIVATE_toCompositeOperatorName(s){return gt[s]}function __PRIVATE_toFieldPathReference(s){return{fieldPath:s.canonicalString()}}function __PRIVATE_fromFieldPathReference(s){return FieldPath$1.fromServerFormat(s.fieldPath)}function __PRIVATE_toFilter(s){return s instanceof FieldFilter?function(o){if(o.op==="=="){if(__PRIVATE_isNanValue(o.value))return{unaryFilter:{field:__PRIVATE_toFieldPathReference(o.field),op:"IS_NAN"}};if(__PRIVATE_isNullValue(o.value))return{unaryFilter:{field:__PRIVATE_toFieldPathReference(o.field),op:"IS_NULL"}}}else if(o.op==="!="){if(__PRIVATE_isNanValue(o.value))return{unaryFilter:{field:__PRIVATE_toFieldPathReference(o.field),op:"IS_NOT_NAN"}};if(__PRIVATE_isNullValue(o.value))return{unaryFilter:{field:__PRIVATE_toFieldPathReference(o.field),op:"IS_NOT_NULL"}}}return{fieldFilter:{field:__PRIVATE_toFieldPathReference(o.field),op:__PRIVATE_toOperatorName(o.op),value:o.value}}}(s):s instanceof CompositeFilter?function(o){const a=o.getFilters().map(d=>__PRIVATE_toFilter(d));return a.length===1?a[0]:{compositeFilter:{op:__PRIVATE_toCompositeOperatorName(o.op),filters:a}}}(s):fail(54877,{filter:s})}function __PRIVATE_toDocumentMask(s){const e=[];return s.fields.forEach(o=>e.push(o.canonicalString())),{fieldPaths:e}}function __PRIVATE_isValidResourceName(s){return s.length>=4&&s.get(0)==="projects"&&s.get(2)==="databases"}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class TargetData{constructor(e,o,a,d,c=SnapshotVersion.min(),j=SnapshotVersion.min(),_e=ByteString.EMPTY_BYTE_STRING,pt=null){this.target=e,this.targetId=o,this.purpose=a,this.sequenceNumber=d,this.snapshotVersion=c,this.lastLimboFreeSnapshotVersion=j,this.resumeToken=_e,this.expectedCount=pt}withSequenceNumber(e){return new TargetData(this.target,this.targetId,this.purpose,e,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken,this.expectedCount)}withResumeToken(e,o){return new TargetData(this.target,this.targetId,this.purpose,this.sequenceNumber,o,this.lastLimboFreeSnapshotVersion,e,null)}withExpectedCount(e){return new TargetData(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken,e)}withLastLimboFreeSnapshotVersion(e){return new TargetData(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,e,this.resumeToken,this.expectedCount)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class __PRIVATE_LocalSerializer{constructor(e){this.wt=e}}function __PRIVATE_fromBundledQuery(s){const e=__PRIVATE_convertQueryTargetToQuery({parent:s.parent,structuredQuery:s.structuredQuery});return s.limitType==="LAST"?__PRIVATE_queryWithLimit(e,e.limit,"L"):e}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class __PRIVATE_MemoryIndexManager{constructor(){this.yn=new __PRIVATE_MemoryCollectionParentIndex}addToCollectionParentIndex(e,o){return this.yn.add(o),PersistencePromise.resolve()}getCollectionParents(e,o){return PersistencePromise.resolve(this.yn.getEntries(o))}addFieldIndex(e,o){return PersistencePromise.resolve()}deleteFieldIndex(e,o){return PersistencePromise.resolve()}deleteAllFieldIndexes(e){return PersistencePromise.resolve()}createTargetIndexes(e,o){return PersistencePromise.resolve()}getDocumentsMatchingTarget(e,o){return PersistencePromise.resolve(null)}getIndexType(e,o){return PersistencePromise.resolve(0)}getFieldIndexes(e,o){return PersistencePromise.resolve([])}getNextCollectionGroupToUpdate(e){return PersistencePromise.resolve(null)}getMinOffset(e,o){return PersistencePromise.resolve(IndexOffset.min())}getMinOffsetFromCollectionGroup(e,o){return PersistencePromise.resolve(IndexOffset.min())}updateCollectionGroup(e,o,a){return PersistencePromise.resolve()}updateIndexEntries(e,o){return PersistencePromise.resolve()}}class __PRIVATE_MemoryCollectionParentIndex{constructor(){this.index={}}add(e){const o=e.lastSegment(),a=e.popLast(),d=this.index[o]||new SortedSet(ResourcePath.comparator),c=!d.has(a);return this.index[o]=d.add(a),c}has(e){const o=e.lastSegment(),a=e.popLast(),d=this.index[o];return d&&d.has(a)}getEntries(e){return(this.index[e]||new SortedSet(ResourcePath.comparator)).toArray()}}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const bt={didRun:!1,sequenceNumbersCollected:0,targetsRemoved:0,documentsRemoved:0},St=41943040;class LruParams{static withCacheSize(e){return new LruParams(e,LruParams.DEFAULT_COLLECTION_PERCENTILE,LruParams.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT)}constructor(e,o,a){this.cacheSizeCollectionThreshold=e,this.percentileToCollect=o,this.maximumSequenceNumbersToCollect=a}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */LruParams.DEFAULT_COLLECTION_PERCENTILE=10,LruParams.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT=1e3,LruParams.DEFAULT=new LruParams(St,LruParams.DEFAULT_COLLECTION_PERCENTILE,LruParams.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT),LruParams.DISABLED=new LruParams(-1,0,0);/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class __PRIVATE_TargetIdGenerator{constructor(e){this.nr=e}next(){return this.nr+=2,this.nr}static rr(){return new __PRIVATE_TargetIdGenerator(0)}static ir(){return new __PRIVATE_TargetIdGenerator(-1)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Dt="LruGarbageCollector",vt=1048576;function __PRIVATE_bufferEntryComparator([s,e],[o,a]){const d=__PRIVATE_primitiveComparator(s,o);return d===0?__PRIVATE_primitiveComparator(e,a):d}class __PRIVATE_RollingSequenceNumberBuffer{constructor(e){this.cr=e,this.buffer=new SortedSet(__PRIVATE_bufferEntryComparator),this.lr=0}hr(){return++this.lr}Pr(e){const o=[e,this.hr()];if(this.buffer.size<this.cr)this.buffer=this.buffer.add(o);else{const a=this.buffer.last();__PRIVATE_bufferEntryComparator(o,a)<0&&(this.buffer=this.buffer.delete(a).add(o))}}get maxValue(){return this.buffer.last()[0]}}class __PRIVATE_LruScheduler{constructor(e,o,a){this.garbageCollector=e,this.asyncQueue=o,this.localStore=a,this.Tr=null}start(){this.garbageCollector.params.cacheSizeCollectionThreshold!==-1&&this.Ir(6e4)}stop(){this.Tr&&(this.Tr.cancel(),this.Tr=null)}get started(){return this.Tr!==null}Ir(e){__PRIVATE_logDebug(Dt,`Garbage collection scheduled in ${e}ms`),this.Tr=this.asyncQueue.enqueueAfterDelay("lru_garbage_collection",e,async()=>{this.Tr=null;try{await this.localStore.collectGarbage(this.garbageCollector)}catch(o){__PRIVATE_isIndexedDbTransactionError(o)?__PRIVATE_logDebug(Dt,"Ignoring IndexedDB error during garbage collection: ",o):await __PRIVATE_ignoreIfPrimaryLeaseLoss(o)}await this.Ir(3e5)})}}class __PRIVATE_LruGarbageCollectorImpl{constructor(e,o){this.Er=e,this.params=o}calculateTargetCount(e,o){return this.Er.dr(e).next(a=>Math.floor(o/100*a))}nthSequenceNumber(e,o){if(o===0)return PersistencePromise.resolve(__PRIVATE_ListenSequence.le);const a=new __PRIVATE_RollingSequenceNumberBuffer(o);return this.Er.forEachTarget(e,d=>a.Pr(d.sequenceNumber)).next(()=>this.Er.Ar(e,d=>a.Pr(d))).next(()=>a.maxValue)}removeTargets(e,o,a){return this.Er.removeTargets(e,o,a)}removeOrphanedDocuments(e,o){return this.Er.removeOrphanedDocuments(e,o)}collect(e,o){return this.params.cacheSizeCollectionThreshold===-1?(__PRIVATE_logDebug("LruGarbageCollector","Garbage collection skipped; disabled"),PersistencePromise.resolve(bt)):this.getCacheSize(e).next(a=>a<this.params.cacheSizeCollectionThreshold?(__PRIVATE_logDebug("LruGarbageCollector",`Garbage collection skipped; Cache size ${a} is lower than threshold ${this.params.cacheSizeCollectionThreshold}`),bt):this.Rr(e,o))}getCacheSize(e){return this.Er.getCacheSize(e)}Rr(e,o){let a,d,c,j,_e,pt,yt;const ct=Date.now();return this.calculateTargetCount(e,this.params.percentileToCollect).next(Ct=>(Ct>this.params.maximumSequenceNumbersToCollect?(__PRIVATE_logDebug("LruGarbageCollector",`Capping sequence numbers to collect down to the maximum of ${this.params.maximumSequenceNumbersToCollect} from ${Ct}`),d=this.params.maximumSequenceNumbersToCollect):d=Ct,j=Date.now(),this.nthSequenceNumber(e,d))).next(Ct=>(a=Ct,_e=Date.now(),this.removeTargets(e,a,o))).next(Ct=>(c=Ct,pt=Date.now(),this.removeOrphanedDocuments(e,a))).next(Ct=>(yt=Date.now(),__PRIVATE_getLogLevel()<=LogLevel.DEBUG&&__PRIVATE_logDebug("LruGarbageCollector",`LRU Garbage Collection
	Counted targets in ${j-ct}ms
	Determined least recently used ${d} in `+(_e-j)+`ms
	Removed ${c} targets in `+(pt-_e)+`ms
	Removed ${Ct} documents in `+(yt-pt)+`ms
Total Duration: ${yt-ct}ms`),PersistencePromise.resolve({didRun:!0,sequenceNumbersCollected:d,targetsRemoved:c,documentsRemoved:Ct})))}}function __PRIVATE_newLruGarbageCollector(s,e){return new __PRIVATE_LruGarbageCollectorImpl(s,e)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class RemoteDocumentChangeBuffer{constructor(){this.changes=new ObjectMap(e=>e.toString(),(e,o)=>e.isEqual(o)),this.changesApplied=!1}addEntry(e){this.assertNotApplied(),this.changes.set(e.key,e)}removeEntry(e,o){this.assertNotApplied(),this.changes.set(e,MutableDocument.newInvalidDocument(e).setReadTime(o))}getEntry(e,o){this.assertNotApplied();const a=this.changes.get(o);return a!==void 0?PersistencePromise.resolve(a):this.getFromCache(e,o)}getEntries(e,o){return this.getAllFromCache(e,o)}apply(e){return this.assertNotApplied(),this.changesApplied=!0,this.applyChanges(e)}assertNotApplied(){}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 *//**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class OverlayedDocument{constructor(e,o){this.overlayedDocument=e,this.mutatedFields=o}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class LocalDocumentsView{constructor(e,o,a,d){this.remoteDocumentCache=e,this.mutationQueue=o,this.documentOverlayCache=a,this.indexManager=d}getDocument(e,o){let a=null;return this.documentOverlayCache.getOverlay(e,o).next(d=>(a=d,this.remoteDocumentCache.getEntry(e,o))).next(d=>(a!==null&&__PRIVATE_mutationApplyToLocalView(a.mutation,d,FieldMask.empty(),Timestamp.now()),d))}getDocuments(e,o){return this.remoteDocumentCache.getEntries(e,o).next(a=>this.getLocalViewOfDocuments(e,a,__PRIVATE_documentKeySet()).next(()=>a))}getLocalViewOfDocuments(e,o,a=__PRIVATE_documentKeySet()){const d=__PRIVATE_newOverlayMap();return this.populateOverlays(e,d,o).next(()=>this.computeViews(e,o,d,a).next(c=>{let j=documentMap();return c.forEach((_e,pt)=>{j=j.insert(_e,pt.overlayedDocument)}),j}))}getOverlayedDocuments(e,o){const a=__PRIVATE_newOverlayMap();return this.populateOverlays(e,a,o).next(()=>this.computeViews(e,o,a,__PRIVATE_documentKeySet()))}populateOverlays(e,o,a){const d=[];return a.forEach(c=>{o.has(c)||d.push(c)}),this.documentOverlayCache.getOverlays(e,d).next(c=>{c.forEach((j,_e)=>{o.set(j,_e)})})}computeViews(e,o,a,d){let c=__PRIVATE_mutableDocumentMap();const j=__PRIVATE_newDocumentKeyMap(),_e=function(){return __PRIVATE_newDocumentKeyMap()}();return o.forEach((pt,yt)=>{const ct=a.get(yt.key);d.has(yt.key)&&(ct===void 0||ct.mutation instanceof __PRIVATE_PatchMutation)?c=c.insert(yt.key,yt):ct!==void 0?(j.set(yt.key,ct.mutation.getFieldMask()),__PRIVATE_mutationApplyToLocalView(ct.mutation,yt,ct.mutation.getFieldMask(),Timestamp.now())):j.set(yt.key,FieldMask.empty())}),this.recalculateAndSaveOverlays(e,c).next(pt=>(pt.forEach((yt,ct)=>j.set(yt,ct)),o.forEach((yt,ct)=>{var Ct;return _e.set(yt,new OverlayedDocument(ct,(Ct=j.get(yt))!==null&&Ct!==void 0?Ct:null))}),_e))}recalculateAndSaveOverlays(e,o){const a=__PRIVATE_newDocumentKeyMap();let d=new SortedMap((j,_e)=>j-_e),c=__PRIVATE_documentKeySet();return this.mutationQueue.getAllMutationBatchesAffectingDocumentKeys(e,o).next(j=>{for(const _e of j)_e.keys().forEach(pt=>{const yt=o.get(pt);if(yt===null)return;let ct=a.get(pt)||FieldMask.empty();ct=_e.applyToLocalView(yt,ct),a.set(pt,ct);const Ct=(d.get(_e.batchId)||__PRIVATE_documentKeySet()).add(pt);d=d.insert(_e.batchId,Ct)})}).next(()=>{const j=[],_e=d.getReverseIterator();for(;_e.hasNext();){const pt=_e.getNext(),yt=pt.key,ct=pt.value,Ct=__PRIVATE_newMutationMap();ct.forEach(qt=>{if(!c.has(qt)){const Ot=__PRIVATE_calculateOverlayMutation(o.get(qt),a.get(qt));Ot!==null&&Ct.set(qt,Ot),c=c.add(qt)}}),j.push(this.documentOverlayCache.saveOverlays(e,yt,Ct))}return PersistencePromise.waitFor(j)}).next(()=>a)}recalculateAndSaveOverlaysForDocumentKeys(e,o){return this.remoteDocumentCache.getEntries(e,o).next(a=>this.recalculateAndSaveOverlays(e,a))}getDocumentsMatchingQuery(e,o,a,d){return function(j){return DocumentKey.isDocumentKey(j.path)&&j.collectionGroup===null&&j.filters.length===0}(o)?this.getDocumentsMatchingDocumentQuery(e,o.path):__PRIVATE_isCollectionGroupQuery(o)?this.getDocumentsMatchingCollectionGroupQuery(e,o,a,d):this.getDocumentsMatchingCollectionQuery(e,o,a,d)}getNextDocuments(e,o,a,d){return this.remoteDocumentCache.getAllFromCollectionGroup(e,o,a,d).next(c=>{const j=d-c.size>0?this.documentOverlayCache.getOverlaysForCollectionGroup(e,o,a.largestBatchId,d-c.size):PersistencePromise.resolve(__PRIVATE_newOverlayMap());let _e=B,pt=c;return j.next(yt=>PersistencePromise.forEach(yt,(ct,Ct)=>(_e<Ct.largestBatchId&&(_e=Ct.largestBatchId),c.get(ct)?PersistencePromise.resolve():this.remoteDocumentCache.getEntry(e,ct).next(qt=>{pt=pt.insert(ct,qt)}))).next(()=>this.populateOverlays(e,yt,c)).next(()=>this.computeViews(e,pt,yt,__PRIVATE_documentKeySet())).next(ct=>({batchId:_e,changes:__PRIVATE_convertOverlayedDocumentMapToDocumentMap(ct)})))})}getDocumentsMatchingDocumentQuery(e,o){return this.getDocument(e,new DocumentKey(o)).next(a=>{let d=documentMap();return a.isFoundDocument()&&(d=d.insert(a.key,a)),d})}getDocumentsMatchingCollectionGroupQuery(e,o,a,d){const c=o.collectionGroup;let j=documentMap();return this.indexManager.getCollectionParents(e,c).next(_e=>PersistencePromise.forEach(_e,pt=>{const yt=function(Ct,qt){return new __PRIVATE_QueryImpl(qt,null,Ct.explicitOrderBy.slice(),Ct.filters.slice(),Ct.limit,Ct.limitType,Ct.startAt,Ct.endAt)}(o,pt.child(c));return this.getDocumentsMatchingCollectionQuery(e,yt,a,d).next(ct=>{ct.forEach((Ct,qt)=>{j=j.insert(Ct,qt)})})}).next(()=>j))}getDocumentsMatchingCollectionQuery(e,o,a,d){let c;return this.documentOverlayCache.getOverlaysForCollection(e,o.path,a.largestBatchId).next(j=>(c=j,this.remoteDocumentCache.getDocumentsMatchingQuery(e,o,a,c,d))).next(j=>{c.forEach((pt,yt)=>{const ct=yt.getKey();j.get(ct)===null&&(j=j.insert(ct,MutableDocument.newInvalidDocument(ct)))});let _e=documentMap();return j.forEach((pt,yt)=>{const ct=c.get(pt);ct!==void 0&&__PRIVATE_mutationApplyToLocalView(ct.mutation,yt,FieldMask.empty(),Timestamp.now()),__PRIVATE_queryMatches(o,yt)&&(_e=_e.insert(pt,yt))}),_e})}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class __PRIVATE_MemoryBundleCache{constructor(e){this.serializer=e,this.Fr=new Map,this.Mr=new Map}getBundleMetadata(e,o){return PersistencePromise.resolve(this.Fr.get(o))}saveBundleMetadata(e,o){return this.Fr.set(o.id,function(d){return{id:d.id,version:d.version,createTime:__PRIVATE_fromVersion(d.createTime)}}(o)),PersistencePromise.resolve()}getNamedQuery(e,o){return PersistencePromise.resolve(this.Mr.get(o))}saveNamedQuery(e,o){return this.Mr.set(o.name,function(d){return{name:d.name,query:__PRIVATE_fromBundledQuery(d.bundledQuery),readTime:__PRIVATE_fromVersion(d.readTime)}}(o)),PersistencePromise.resolve()}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class __PRIVATE_MemoryDocumentOverlayCache{constructor(){this.overlays=new SortedMap(DocumentKey.comparator),this.Or=new Map}getOverlay(e,o){return PersistencePromise.resolve(this.overlays.get(o))}getOverlays(e,o){const a=__PRIVATE_newOverlayMap();return PersistencePromise.forEach(o,d=>this.getOverlay(e,d).next(c=>{c!==null&&a.set(d,c)})).next(()=>a)}saveOverlays(e,o,a){return a.forEach((d,c)=>{this.St(e,o,c)}),PersistencePromise.resolve()}removeOverlaysForBatchId(e,o,a){const d=this.Or.get(a);return d!==void 0&&(d.forEach(c=>this.overlays=this.overlays.remove(c)),this.Or.delete(a)),PersistencePromise.resolve()}getOverlaysForCollection(e,o,a){const d=__PRIVATE_newOverlayMap(),c=o.length+1,j=new DocumentKey(o.child("")),_e=this.overlays.getIteratorFrom(j);for(;_e.hasNext();){const pt=_e.getNext().value,yt=pt.getKey();if(!o.isPrefixOf(yt.path))break;yt.path.length===c&&pt.largestBatchId>a&&d.set(pt.getKey(),pt)}return PersistencePromise.resolve(d)}getOverlaysForCollectionGroup(e,o,a,d){let c=new SortedMap((yt,ct)=>yt-ct);const j=this.overlays.getIterator();for(;j.hasNext();){const yt=j.getNext().value;if(yt.getKey().getCollectionGroup()===o&&yt.largestBatchId>a){let ct=c.get(yt.largestBatchId);ct===null&&(ct=__PRIVATE_newOverlayMap(),c=c.insert(yt.largestBatchId,ct)),ct.set(yt.getKey(),yt)}}const _e=__PRIVATE_newOverlayMap(),pt=c.getIterator();for(;pt.hasNext()&&(pt.getNext().value.forEach((yt,ct)=>_e.set(yt,ct)),!(_e.size()>=d)););return PersistencePromise.resolve(_e)}St(e,o,a){const d=this.overlays.get(a.key);if(d!==null){const j=this.Or.get(d.largestBatchId).delete(a.key);this.Or.set(d.largestBatchId,j)}this.overlays=this.overlays.insert(a.key,new Overlay(o,a));let c=this.Or.get(o);c===void 0&&(c=__PRIVATE_documentKeySet(),this.Or.set(o,c)),this.Or.set(o,c.add(a.key))}}/**
 * @license
 * Copyright 2024 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class __PRIVATE_MemoryGlobalsCache{constructor(){this.sessionToken=ByteString.EMPTY_BYTE_STRING}getSessionToken(e){return PersistencePromise.resolve(this.sessionToken)}setSessionToken(e,o){return this.sessionToken=o,PersistencePromise.resolve()}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class __PRIVATE_ReferenceSet{constructor(){this.Nr=new SortedSet(__PRIVATE_DocReference.Br),this.Lr=new SortedSet(__PRIVATE_DocReference.kr)}isEmpty(){return this.Nr.isEmpty()}addReference(e,o){const a=new __PRIVATE_DocReference(e,o);this.Nr=this.Nr.add(a),this.Lr=this.Lr.add(a)}qr(e,o){e.forEach(a=>this.addReference(a,o))}removeReference(e,o){this.Qr(new __PRIVATE_DocReference(e,o))}$r(e,o){e.forEach(a=>this.removeReference(a,o))}Ur(e){const o=new DocumentKey(new ResourcePath([])),a=new __PRIVATE_DocReference(o,e),d=new __PRIVATE_DocReference(o,e+1),c=[];return this.Lr.forEachInRange([a,d],j=>{this.Qr(j),c.push(j.key)}),c}Kr(){this.Nr.forEach(e=>this.Qr(e))}Qr(e){this.Nr=this.Nr.delete(e),this.Lr=this.Lr.delete(e)}Wr(e){const o=new DocumentKey(new ResourcePath([])),a=new __PRIVATE_DocReference(o,e),d=new __PRIVATE_DocReference(o,e+1);let c=__PRIVATE_documentKeySet();return this.Lr.forEachInRange([a,d],j=>{c=c.add(j.key)}),c}containsKey(e){const o=new __PRIVATE_DocReference(e,0),a=this.Nr.firstAfterOrEqual(o);return a!==null&&e.isEqual(a.key)}}class __PRIVATE_DocReference{constructor(e,o){this.key=e,this.Gr=o}static Br(e,o){return DocumentKey.comparator(e.key,o.key)||__PRIVATE_primitiveComparator(e.Gr,o.Gr)}static kr(e,o){return __PRIVATE_primitiveComparator(e.Gr,o.Gr)||DocumentKey.comparator(e.key,o.key)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class __PRIVATE_MemoryMutationQueue{constructor(e,o){this.indexManager=e,this.referenceDelegate=o,this.mutationQueue=[],this.Jn=1,this.zr=new SortedSet(__PRIVATE_DocReference.Br)}checkEmpty(e){return PersistencePromise.resolve(this.mutationQueue.length===0)}addMutationBatch(e,o,a,d){const c=this.Jn;this.Jn++,this.mutationQueue.length>0&&this.mutationQueue[this.mutationQueue.length-1];const j=new MutationBatch(c,o,a,d);this.mutationQueue.push(j);for(const _e of d)this.zr=this.zr.add(new __PRIVATE_DocReference(_e.key,c)),this.indexManager.addToCollectionParentIndex(e,_e.key.path.popLast());return PersistencePromise.resolve(j)}lookupMutationBatch(e,o){return PersistencePromise.resolve(this.jr(o))}getNextMutationBatchAfterBatchId(e,o){const a=o+1,d=this.Hr(a),c=d<0?0:d;return PersistencePromise.resolve(this.mutationQueue.length>c?this.mutationQueue[c]:null)}getHighestUnacknowledgedBatchId(){return PersistencePromise.resolve(this.mutationQueue.length===0?$:this.Jn-1)}getAllMutationBatches(e){return PersistencePromise.resolve(this.mutationQueue.slice())}getAllMutationBatchesAffectingDocumentKey(e,o){const a=new __PRIVATE_DocReference(o,0),d=new __PRIVATE_DocReference(o,Number.POSITIVE_INFINITY),c=[];return this.zr.forEachInRange([a,d],j=>{const _e=this.jr(j.Gr);c.push(_e)}),PersistencePromise.resolve(c)}getAllMutationBatchesAffectingDocumentKeys(e,o){let a=new SortedSet(__PRIVATE_primitiveComparator);return o.forEach(d=>{const c=new __PRIVATE_DocReference(d,0),j=new __PRIVATE_DocReference(d,Number.POSITIVE_INFINITY);this.zr.forEachInRange([c,j],_e=>{a=a.add(_e.Gr)})}),PersistencePromise.resolve(this.Jr(a))}getAllMutationBatchesAffectingQuery(e,o){const a=o.path,d=a.length+1;let c=a;DocumentKey.isDocumentKey(c)||(c=c.child(""));const j=new __PRIVATE_DocReference(new DocumentKey(c),0);let _e=new SortedSet(__PRIVATE_primitiveComparator);return this.zr.forEachWhile(pt=>{const yt=pt.key.path;return!!a.isPrefixOf(yt)&&(yt.length===d&&(_e=_e.add(pt.Gr)),!0)},j),PersistencePromise.resolve(this.Jr(_e))}Jr(e){const o=[];return e.forEach(a=>{const d=this.jr(a);d!==null&&o.push(d)}),o}removeMutationBatch(e,o){__PRIVATE_hardAssert(this.Yr(o.batchId,"removed")===0,55003),this.mutationQueue.shift();let a=this.zr;return PersistencePromise.forEach(o.mutations,d=>{const c=new __PRIVATE_DocReference(d.key,o.batchId);return a=a.delete(c),this.referenceDelegate.markPotentiallyOrphaned(e,d.key)}).next(()=>{this.zr=a})}Xn(e){}containsKey(e,o){const a=new __PRIVATE_DocReference(o,0),d=this.zr.firstAfterOrEqual(a);return PersistencePromise.resolve(o.isEqual(d&&d.key))}performConsistencyCheck(e){return this.mutationQueue.length,PersistencePromise.resolve()}Yr(e,o){return this.Hr(e)}Hr(e){return this.mutationQueue.length===0?0:e-this.mutationQueue[0].batchId}jr(e){const o=this.Hr(e);return o<0||o>=this.mutationQueue.length?null:this.mutationQueue[o]}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class __PRIVATE_MemoryRemoteDocumentCacheImpl{constructor(e){this.Zr=e,this.docs=function(){return new SortedMap(DocumentKey.comparator)}(),this.size=0}setIndexManager(e){this.indexManager=e}addEntry(e,o){const a=o.key,d=this.docs.get(a),c=d?d.size:0,j=this.Zr(o);return this.docs=this.docs.insert(a,{document:o.mutableCopy(),size:j}),this.size+=j-c,this.indexManager.addToCollectionParentIndex(e,a.path.popLast())}removeEntry(e){const o=this.docs.get(e);o&&(this.docs=this.docs.remove(e),this.size-=o.size)}getEntry(e,o){const a=this.docs.get(o);return PersistencePromise.resolve(a?a.document.mutableCopy():MutableDocument.newInvalidDocument(o))}getEntries(e,o){let a=__PRIVATE_mutableDocumentMap();return o.forEach(d=>{const c=this.docs.get(d);a=a.insert(d,c?c.document.mutableCopy():MutableDocument.newInvalidDocument(d))}),PersistencePromise.resolve(a)}getDocumentsMatchingQuery(e,o,a,d){let c=__PRIVATE_mutableDocumentMap();const j=o.path,_e=new DocumentKey(j.child("__id-9223372036854775808__")),pt=this.docs.getIteratorFrom(_e);for(;pt.hasNext();){const{key:yt,value:{document:ct}}=pt.getNext();if(!j.isPrefixOf(yt.path))break;yt.path.length>j.length+1||__PRIVATE_indexOffsetComparator(__PRIVATE_newIndexOffsetFromDocument(ct),a)<=0||(d.has(ct.key)||__PRIVATE_queryMatches(o,ct))&&(c=c.insert(ct.key,ct.mutableCopy()))}return PersistencePromise.resolve(c)}getAllFromCollectionGroup(e,o,a,d){fail(9500)}Xr(e,o){return PersistencePromise.forEach(this.docs,a=>o(a))}newChangeBuffer(e){return new __PRIVATE_MemoryRemoteDocumentChangeBuffer(this)}getSize(e){return PersistencePromise.resolve(this.size)}}class __PRIVATE_MemoryRemoteDocumentChangeBuffer extends RemoteDocumentChangeBuffer{constructor(e){super(),this.vr=e}applyChanges(e){const o=[];return this.changes.forEach((a,d)=>{d.isValidDocument()?o.push(this.vr.addEntry(e,d)):this.vr.removeEntry(a)}),PersistencePromise.waitFor(o)}getFromCache(e,o){return this.vr.getEntry(e,o)}getAllFromCache(e,o){return this.vr.getEntries(e,o)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class __PRIVATE_MemoryTargetCache{constructor(e){this.persistence=e,this.ei=new ObjectMap(o=>__PRIVATE_canonifyTarget(o),__PRIVATE_targetEquals),this.lastRemoteSnapshotVersion=SnapshotVersion.min(),this.highestTargetId=0,this.ti=0,this.ni=new __PRIVATE_ReferenceSet,this.targetCount=0,this.ri=__PRIVATE_TargetIdGenerator.rr()}forEachTarget(e,o){return this.ei.forEach((a,d)=>o(d)),PersistencePromise.resolve()}getLastRemoteSnapshotVersion(e){return PersistencePromise.resolve(this.lastRemoteSnapshotVersion)}getHighestSequenceNumber(e){return PersistencePromise.resolve(this.ti)}allocateTargetId(e){return this.highestTargetId=this.ri.next(),PersistencePromise.resolve(this.highestTargetId)}setTargetsMetadata(e,o,a){return a&&(this.lastRemoteSnapshotVersion=a),o>this.ti&&(this.ti=o),PersistencePromise.resolve()}ar(e){this.ei.set(e.target,e);const o=e.targetId;o>this.highestTargetId&&(this.ri=new __PRIVATE_TargetIdGenerator(o),this.highestTargetId=o),e.sequenceNumber>this.ti&&(this.ti=e.sequenceNumber)}addTargetData(e,o){return this.ar(o),this.targetCount+=1,PersistencePromise.resolve()}updateTargetData(e,o){return this.ar(o),PersistencePromise.resolve()}removeTargetData(e,o){return this.ei.delete(o.target),this.ni.Ur(o.targetId),this.targetCount-=1,PersistencePromise.resolve()}removeTargets(e,o,a){let d=0;const c=[];return this.ei.forEach((j,_e)=>{_e.sequenceNumber<=o&&a.get(_e.targetId)===null&&(this.ei.delete(j),c.push(this.removeMatchingKeysForTargetId(e,_e.targetId)),d++)}),PersistencePromise.waitFor(c).next(()=>d)}getTargetCount(e){return PersistencePromise.resolve(this.targetCount)}getTargetData(e,o){const a=this.ei.get(o)||null;return PersistencePromise.resolve(a)}addMatchingKeys(e,o,a){return this.ni.qr(o,a),PersistencePromise.resolve()}removeMatchingKeys(e,o,a){this.ni.$r(o,a);const d=this.persistence.referenceDelegate,c=[];return d&&o.forEach(j=>{c.push(d.markPotentiallyOrphaned(e,j))}),PersistencePromise.waitFor(c)}removeMatchingKeysForTargetId(e,o){return this.ni.Ur(o),PersistencePromise.resolve()}getMatchingKeysForTargetId(e,o){const a=this.ni.Wr(o);return PersistencePromise.resolve(a)}containsKey(e,o){return PersistencePromise.resolve(this.ni.containsKey(o))}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class __PRIVATE_MemoryPersistence{constructor(e,o){this.ii={},this.overlays={},this.si=new __PRIVATE_ListenSequence(0),this.oi=!1,this.oi=!0,this._i=new __PRIVATE_MemoryGlobalsCache,this.referenceDelegate=e(this),this.ai=new __PRIVATE_MemoryTargetCache(this),this.indexManager=new __PRIVATE_MemoryIndexManager,this.remoteDocumentCache=function(d){return new __PRIVATE_MemoryRemoteDocumentCacheImpl(d)}(a=>this.referenceDelegate.ui(a)),this.serializer=new __PRIVATE_LocalSerializer(o),this.ci=new __PRIVATE_MemoryBundleCache(this.serializer)}start(){return Promise.resolve()}shutdown(){return this.oi=!1,Promise.resolve()}get started(){return this.oi}setDatabaseDeletedListener(){}setNetworkEnabled(){}getIndexManager(e){return this.indexManager}getDocumentOverlayCache(e){let o=this.overlays[e.toKey()];return o||(o=new __PRIVATE_MemoryDocumentOverlayCache,this.overlays[e.toKey()]=o),o}getMutationQueue(e,o){let a=this.ii[e.toKey()];return a||(a=new __PRIVATE_MemoryMutationQueue(o,this.referenceDelegate),this.ii[e.toKey()]=a),a}getGlobalsCache(){return this._i}getTargetCache(){return this.ai}getRemoteDocumentCache(){return this.remoteDocumentCache}getBundleCache(){return this.ci}runTransaction(e,o,a){__PRIVATE_logDebug("MemoryPersistence","Starting transaction:",e);const d=new __PRIVATE_MemoryTransaction(this.si.next());return this.referenceDelegate.li(),a(d).next(c=>this.referenceDelegate.hi(d).next(()=>c)).toPromise().then(c=>(d.raiseOnCommittedEvent(),c))}Pi(e,o){return PersistencePromise.or(Object.values(this.ii).map(a=>()=>a.containsKey(e,o)))}}class __PRIVATE_MemoryTransaction extends PersistenceTransaction{constructor(e){super(),this.currentSequenceNumber=e}}class __PRIVATE_MemoryEagerDelegate{constructor(e){this.persistence=e,this.Ti=new __PRIVATE_ReferenceSet,this.Ii=null}static Ei(e){return new __PRIVATE_MemoryEagerDelegate(e)}get di(){if(this.Ii)return this.Ii;throw fail(60996)}addReference(e,o,a){return this.Ti.addReference(a,o),this.di.delete(a.toString()),PersistencePromise.resolve()}removeReference(e,o,a){return this.Ti.removeReference(a,o),this.di.add(a.toString()),PersistencePromise.resolve()}markPotentiallyOrphaned(e,o){return this.di.add(o.toString()),PersistencePromise.resolve()}removeTarget(e,o){this.Ti.Ur(o.targetId).forEach(d=>this.di.add(d.toString()));const a=this.persistence.getTargetCache();return a.getMatchingKeysForTargetId(e,o.targetId).next(d=>{d.forEach(c=>this.di.add(c.toString()))}).next(()=>a.removeTargetData(e,o))}li(){this.Ii=new Set}hi(e){const o=this.persistence.getRemoteDocumentCache().newChangeBuffer();return PersistencePromise.forEach(this.di,a=>{const d=DocumentKey.fromPath(a);return this.Ai(e,d).next(c=>{c||o.removeEntry(d,SnapshotVersion.min())})}).next(()=>(this.Ii=null,o.apply(e)))}updateLimboDocument(e,o){return this.Ai(e,o).next(a=>{a?this.di.delete(o.toString()):this.di.add(o.toString())})}ui(e){return 0}Ai(e,o){return PersistencePromise.or([()=>PersistencePromise.resolve(this.Ti.containsKey(o)),()=>this.persistence.getTargetCache().containsKey(e,o),()=>this.persistence.Pi(e,o)])}}class __PRIVATE_MemoryLruDelegate{constructor(e,o){this.persistence=e,this.Ri=new ObjectMap(a=>__PRIVATE_encodeResourcePath(a.path),(a,d)=>a.isEqual(d)),this.garbageCollector=__PRIVATE_newLruGarbageCollector(this,o)}static Ei(e,o){return new __PRIVATE_MemoryLruDelegate(e,o)}li(){}hi(e){return PersistencePromise.resolve()}forEachTarget(e,o){return this.persistence.getTargetCache().forEachTarget(e,o)}dr(e){const o=this.Vr(e);return this.persistence.getTargetCache().getTargetCount(e).next(a=>o.next(d=>a+d))}Vr(e){let o=0;return this.Ar(e,a=>{o++}).next(()=>o)}Ar(e,o){return PersistencePromise.forEach(this.Ri,(a,d)=>this.gr(e,a,d).next(c=>c?PersistencePromise.resolve():o(d)))}removeTargets(e,o,a){return this.persistence.getTargetCache().removeTargets(e,o,a)}removeOrphanedDocuments(e,o){let a=0;const d=this.persistence.getRemoteDocumentCache(),c=d.newChangeBuffer();return d.Xr(e,j=>this.gr(e,j,o).next(_e=>{_e||(a++,c.removeEntry(j,SnapshotVersion.min()))})).next(()=>c.apply(e)).next(()=>a)}markPotentiallyOrphaned(e,o){return this.Ri.set(o,e.currentSequenceNumber),PersistencePromise.resolve()}removeTarget(e,o){const a=o.withSequenceNumber(e.currentSequenceNumber);return this.persistence.getTargetCache().updateTargetData(e,a)}addReference(e,o,a){return this.Ri.set(a,e.currentSequenceNumber),PersistencePromise.resolve()}removeReference(e,o,a){return this.Ri.set(a,e.currentSequenceNumber),PersistencePromise.resolve()}updateLimboDocument(e,o){return this.Ri.set(o,e.currentSequenceNumber),PersistencePromise.resolve()}ui(e){let o=e.key.toString().length;return e.isFoundDocument()&&(o+=__PRIVATE_estimateByteSize(e.data.value)),o}gr(e,o,a){return PersistencePromise.or([()=>this.persistence.Pi(e,o),()=>this.persistence.getTargetCache().containsKey(e,o),()=>{const d=this.Ri.get(o);return PersistencePromise.resolve(d!==void 0&&d>a)}])}getCacheSize(e){return this.persistence.getRemoteDocumentCache().getSize(e)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class __PRIVATE_LocalViewChanges{constructor(e,o,a,d){this.targetId=e,this.fromCache=o,this.ls=a,this.hs=d}static Ps(e,o){let a=__PRIVATE_documentKeySet(),d=__PRIVATE_documentKeySet();for(const c of o.docChanges)switch(c.type){case 0:a=a.add(c.doc.key);break;case 1:d=d.add(c.doc.key)}return new __PRIVATE_LocalViewChanges(e,o.fromCache,a,d)}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class QueryContext{constructor(){this._documentReadCount=0}get documentReadCount(){return this._documentReadCount}incrementDocumentReadCount(e){this._documentReadCount+=e}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class __PRIVATE_QueryEngine{constructor(){this.Ts=!1,this.Is=!1,this.Es=100,this.ds=function(){return isSafari()?8:__PRIVATE_getAndroidVersion(getUA())>0?6:4}()}initialize(e,o){this.As=e,this.indexManager=o,this.Ts=!0}getDocumentsMatchingQuery(e,o,a,d){const c={result:null};return this.Rs(e,o).next(j=>{c.result=j}).next(()=>{if(!c.result)return this.Vs(e,o,d,a).next(j=>{c.result=j})}).next(()=>{if(c.result)return;const j=new QueryContext;return this.fs(e,o,j).next(_e=>{if(c.result=_e,this.Is)return this.gs(e,o,j,_e.size)})}).next(()=>c.result)}gs(e,o,a,d){return a.documentReadCount<this.Es?(__PRIVATE_getLogLevel()<=LogLevel.DEBUG&&__PRIVATE_logDebug("QueryEngine","SDK will not create cache indexes for query:",__PRIVATE_stringifyQuery(o),"since it only creates cache indexes for collection contains","more than or equal to",this.Es,"documents"),PersistencePromise.resolve()):(__PRIVATE_getLogLevel()<=LogLevel.DEBUG&&__PRIVATE_logDebug("QueryEngine","Query:",__PRIVATE_stringifyQuery(o),"scans",a.documentReadCount,"local documents and returns",d,"documents as results."),a.documentReadCount>this.ds*d?(__PRIVATE_getLogLevel()<=LogLevel.DEBUG&&__PRIVATE_logDebug("QueryEngine","The SDK decides to create cache indexes for query:",__PRIVATE_stringifyQuery(o),"as using cache indexes may help improve performance."),this.indexManager.createTargetIndexes(e,__PRIVATE_queryToTarget(o))):PersistencePromise.resolve())}Rs(e,o){if(__PRIVATE_queryMatchesAllDocuments(o))return PersistencePromise.resolve(null);let a=__PRIVATE_queryToTarget(o);return this.indexManager.getIndexType(e,a).next(d=>d===0?null:(o.limit!==null&&d===1&&(o=__PRIVATE_queryWithLimit(o,null,"F"),a=__PRIVATE_queryToTarget(o)),this.indexManager.getDocumentsMatchingTarget(e,a).next(c=>{const j=__PRIVATE_documentKeySet(...c);return this.As.getDocuments(e,j).next(_e=>this.indexManager.getMinOffset(e,a).next(pt=>{const yt=this.ps(o,_e);return this.ys(o,yt,j,pt.readTime)?this.Rs(e,__PRIVATE_queryWithLimit(o,null,"F")):this.ws(e,yt,o,pt)}))})))}Vs(e,o,a,d){return __PRIVATE_queryMatchesAllDocuments(o)||d.isEqual(SnapshotVersion.min())?PersistencePromise.resolve(null):this.As.getDocuments(e,a).next(c=>{const j=this.ps(o,c);return this.ys(o,j,a,d)?PersistencePromise.resolve(null):(__PRIVATE_getLogLevel()<=LogLevel.DEBUG&&__PRIVATE_logDebug("QueryEngine","Re-using previous result from %s to execute query: %s",d.toString(),__PRIVATE_stringifyQuery(o)),this.ws(e,j,o,__PRIVATE_newIndexOffsetSuccessorFromReadTime(d,B)).next(_e=>_e))})}ps(e,o){let a=new SortedSet(__PRIVATE_newQueryComparator(e));return o.forEach((d,c)=>{__PRIVATE_queryMatches(e,c)&&(a=a.add(c))}),a}ys(e,o,a,d){if(e.limit===null)return!1;if(a.size!==o.size)return!0;const c=e.limitType==="F"?o.last():o.first();return!!c&&(c.hasPendingWrites||c.version.compareTo(d)>0)}fs(e,o,a){return __PRIVATE_getLogLevel()<=LogLevel.DEBUG&&__PRIVATE_logDebug("QueryEngine","Using full collection scan to execute query:",__PRIVATE_stringifyQuery(o)),this.As.getDocumentsMatchingQuery(e,o,IndexOffset.min(),a)}ws(e,o,a,d){return this.As.getDocumentsMatchingQuery(e,a,d).next(c=>(o.forEach(j=>{c=c.insert(j.key,j)}),c))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Nt="LocalStore",Bt=3e8;class __PRIVATE_LocalStoreImpl{constructor(e,o,a,d){this.persistence=e,this.bs=o,this.serializer=d,this.Ss=new SortedMap(__PRIVATE_primitiveComparator),this.Ds=new ObjectMap(c=>__PRIVATE_canonifyTarget(c),__PRIVATE_targetEquals),this.vs=new Map,this.Cs=e.getRemoteDocumentCache(),this.ai=e.getTargetCache(),this.ci=e.getBundleCache(),this.Fs(a)}Fs(e){this.documentOverlayCache=this.persistence.getDocumentOverlayCache(e),this.indexManager=this.persistence.getIndexManager(e),this.mutationQueue=this.persistence.getMutationQueue(e,this.indexManager),this.localDocuments=new LocalDocumentsView(this.Cs,this.mutationQueue,this.documentOverlayCache,this.indexManager),this.Cs.setIndexManager(this.indexManager),this.bs.initialize(this.localDocuments,this.indexManager)}collectGarbage(e){return this.persistence.runTransaction("Collect garbage","readwrite-primary",o=>e.collect(o,this.Ss))}}function __PRIVATE_newLocalStore(s,e,o,a){return new __PRIVATE_LocalStoreImpl(s,e,o,a)}async function __PRIVATE_localStoreHandleUserChange(s,e){const o=__PRIVATE_debugCast(s);return await o.persistence.runTransaction("Handle user change","readonly",a=>{let d;return o.mutationQueue.getAllMutationBatches(a).next(c=>(d=c,o.Fs(e),o.mutationQueue.getAllMutationBatches(a))).next(c=>{const j=[],_e=[];let pt=__PRIVATE_documentKeySet();for(const yt of d){j.push(yt.batchId);for(const ct of yt.mutations)pt=pt.add(ct.key)}for(const yt of c){_e.push(yt.batchId);for(const ct of yt.mutations)pt=pt.add(ct.key)}return o.localDocuments.getDocuments(a,pt).next(yt=>({Ms:yt,removedBatchIds:j,addedBatchIds:_e}))})})}function __PRIVATE_localStoreAcknowledgeBatch(s,e){const o=__PRIVATE_debugCast(s);return o.persistence.runTransaction("Acknowledge batch","readwrite-primary",a=>{const d=e.batch.keys(),c=o.Cs.newChangeBuffer({trackRemovals:!0});return function(_e,pt,yt,ct){const Ct=yt.batch,qt=Ct.keys();let Ot=PersistencePromise.resolve();return qt.forEach(Lt=>{Ot=Ot.next(()=>ct.getEntry(pt,Lt)).next(Qt=>{const ir=yt.docVersions.get(Lt);__PRIVATE_hardAssert(ir!==null,48541),Qt.version.compareTo(ir)<0&&(Ct.applyToRemoteDocument(Qt,yt),Qt.isValidDocument()&&(Qt.setReadTime(yt.commitVersion),ct.addEntry(Qt)))})}),Ot.next(()=>_e.mutationQueue.removeMutationBatch(pt,Ct))}(o,a,e,c).next(()=>c.apply(a)).next(()=>o.mutationQueue.performConsistencyCheck(a)).next(()=>o.documentOverlayCache.removeOverlaysForBatchId(a,d,e.batch.batchId)).next(()=>o.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(a,function(_e){let pt=__PRIVATE_documentKeySet();for(let yt=0;yt<_e.mutationResults.length;++yt)_e.mutationResults[yt].transformResults.length>0&&(pt=pt.add(_e.batch.mutations[yt].key));return pt}(e))).next(()=>o.localDocuments.getDocuments(a,d))})}function __PRIVATE_localStoreGetLastRemoteSnapshotVersion(s){const e=__PRIVATE_debugCast(s);return e.persistence.runTransaction("Get last remote snapshot version","readonly",o=>e.ai.getLastRemoteSnapshotVersion(o))}function __PRIVATE_localStoreApplyRemoteEventToLocalCache(s,e){const o=__PRIVATE_debugCast(s),a=e.snapshotVersion;let d=o.Ss;return o.persistence.runTransaction("Apply remote event","readwrite-primary",c=>{const j=o.Cs.newChangeBuffer({trackRemovals:!0});d=o.Ss;const _e=[];e.targetChanges.forEach((ct,Ct)=>{const qt=d.get(Ct);if(!qt)return;_e.push(o.ai.removeMatchingKeys(c,ct.removedDocuments,Ct).next(()=>o.ai.addMatchingKeys(c,ct.addedDocuments,Ct)));let Ot=qt.withSequenceNumber(c.currentSequenceNumber);e.targetMismatches.get(Ct)!==null?Ot=Ot.withResumeToken(ByteString.EMPTY_BYTE_STRING,SnapshotVersion.min()).withLastLimboFreeSnapshotVersion(SnapshotVersion.min()):ct.resumeToken.approximateByteSize()>0&&(Ot=Ot.withResumeToken(ct.resumeToken,a)),d=d.insert(Ct,Ot),function(Qt,ir,er){return Qt.resumeToken.approximateByteSize()===0||ir.snapshotVersion.toMicroseconds()-Qt.snapshotVersion.toMicroseconds()>=Bt?!0:er.addedDocuments.size+er.modifiedDocuments.size+er.removedDocuments.size>0}(qt,Ot,ct)&&_e.push(o.ai.updateTargetData(c,Ot))});let pt=__PRIVATE_mutableDocumentMap(),yt=__PRIVATE_documentKeySet();if(e.documentUpdates.forEach(ct=>{e.resolvedLimboDocuments.has(ct)&&_e.push(o.persistence.referenceDelegate.updateLimboDocument(c,ct))}),_e.push(__PRIVATE_populateDocumentChangeBuffer(c,j,e.documentUpdates).next(ct=>{pt=ct.xs,yt=ct.Os})),!a.isEqual(SnapshotVersion.min())){const ct=o.ai.getLastRemoteSnapshotVersion(c).next(Ct=>o.ai.setTargetsMetadata(c,c.currentSequenceNumber,a));_e.push(ct)}return PersistencePromise.waitFor(_e).next(()=>j.apply(c)).next(()=>o.localDocuments.getLocalViewOfDocuments(c,pt,yt)).next(()=>pt)}).then(c=>(o.Ss=d,c))}function __PRIVATE_populateDocumentChangeBuffer(s,e,o){let a=__PRIVATE_documentKeySet(),d=__PRIVATE_documentKeySet();return o.forEach(c=>a=a.add(c)),e.getEntries(s,a).next(c=>{let j=__PRIVATE_mutableDocumentMap();return o.forEach((_e,pt)=>{const yt=c.get(_e);pt.isFoundDocument()!==yt.isFoundDocument()&&(d=d.add(_e)),pt.isNoDocument()&&pt.version.isEqual(SnapshotVersion.min())?(e.removeEntry(_e,pt.readTime),j=j.insert(_e,pt)):!yt.isValidDocument()||pt.version.compareTo(yt.version)>0||pt.version.compareTo(yt.version)===0&&yt.hasPendingWrites?(e.addEntry(pt),j=j.insert(_e,pt)):__PRIVATE_logDebug(Nt,"Ignoring outdated watch update for ",_e,". Current version:",yt.version," Watch version:",pt.version)}),{xs:j,Os:d}})}function __PRIVATE_localStoreGetNextMutationBatch(s,e){const o=__PRIVATE_debugCast(s);return o.persistence.runTransaction("Get next mutation batch","readonly",a=>(e===void 0&&(e=$),o.mutationQueue.getNextMutationBatchAfterBatchId(a,e)))}function __PRIVATE_localStoreAllocateTarget(s,e){const o=__PRIVATE_debugCast(s);return o.persistence.runTransaction("Allocate target","readwrite",a=>{let d;return o.ai.getTargetData(a,e).next(c=>c?(d=c,PersistencePromise.resolve(d)):o.ai.allocateTargetId(a).next(j=>(d=new TargetData(e,j,"TargetPurposeListen",a.currentSequenceNumber),o.ai.addTargetData(a,d).next(()=>d))))}).then(a=>{const d=o.Ss.get(a.targetId);return(d===null||a.snapshotVersion.compareTo(d.snapshotVersion)>0)&&(o.Ss=o.Ss.insert(a.targetId,a),o.Ds.set(e,a.targetId)),a})}async function __PRIVATE_localStoreReleaseTarget(s,e,o){const a=__PRIVATE_debugCast(s),d=a.Ss.get(e),c=o?"readwrite":"readwrite-primary";try{o||await a.persistence.runTransaction("Release target",c,j=>a.persistence.referenceDelegate.removeTarget(j,d))}catch(j){if(!__PRIVATE_isIndexedDbTransactionError(j))throw j;__PRIVATE_logDebug(Nt,`Failed to update sequence numbers for target ${e}: ${j}`)}a.Ss=a.Ss.remove(e),a.Ds.delete(d.target)}function __PRIVATE_localStoreExecuteQuery(s,e,o){const a=__PRIVATE_debugCast(s);let d=SnapshotVersion.min(),c=__PRIVATE_documentKeySet();return a.persistence.runTransaction("Execute query","readwrite",j=>function(pt,yt,ct){const Ct=__PRIVATE_debugCast(pt),qt=Ct.Ds.get(ct);return qt!==void 0?PersistencePromise.resolve(Ct.Ss.get(qt)):Ct.ai.getTargetData(yt,ct)}(a,j,__PRIVATE_queryToTarget(e)).next(_e=>{if(_e)return d=_e.lastLimboFreeSnapshotVersion,a.ai.getMatchingKeysForTargetId(j,_e.targetId).next(pt=>{c=pt})}).next(()=>a.bs.getDocumentsMatchingQuery(j,e,o?d:SnapshotVersion.min(),o?c:__PRIVATE_documentKeySet())).next(_e=>(__PRIVATE_setMaxReadTime(a,__PRIVATE_queryCollectionGroup(e),_e),{documents:_e,Ns:c})))}function __PRIVATE_setMaxReadTime(s,e,o){let a=s.vs.get(e)||SnapshotVersion.min();o.forEach((d,c)=>{c.readTime.compareTo(a)>0&&(a=c.readTime)}),s.vs.set(e,a)}class __PRIVATE_LocalClientState{constructor(){this.activeTargetIds=__PRIVATE_targetIdSet()}$s(e){this.activeTargetIds=this.activeTargetIds.add(e)}Us(e){this.activeTargetIds=this.activeTargetIds.delete(e)}Qs(){const e={activeTargetIds:this.activeTargetIds.toArray(),updateTimeMs:Date.now()};return JSON.stringify(e)}}class __PRIVATE_MemorySharedClientState{constructor(){this.So=new __PRIVATE_LocalClientState,this.Do={},this.onlineStateHandler=null,this.sequenceNumberHandler=null}addPendingMutation(e){}updateMutationState(e,o,a){}addLocalQueryTarget(e,o=!0){return o&&this.So.$s(e),this.Do[e]||"not-current"}updateQueryState(e,o,a){this.Do[e]=o}removeLocalQueryTarget(e){this.So.Us(e)}isLocalQueryTarget(e){return this.So.activeTargetIds.has(e)}clearQueryState(e){delete this.Do[e]}getAllActiveQueryTargets(){return this.So.activeTargetIds}isActiveQueryTarget(e){return this.So.activeTargetIds.has(e)}start(){return this.So=new __PRIVATE_LocalClientState,Promise.resolve()}handleUserChange(e,o,a){}setOnlineState(e){}shutdown(){}writeSequenceNumber(e){}notifyBundleLoaded(e){}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class __PRIVATE_NoopConnectivityMonitor{vo(e){}shutdown(){}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const $t="ConnectivityMonitor";class __PRIVATE_BrowserConnectivityMonitor{constructor(){this.Co=()=>this.Fo(),this.Mo=()=>this.xo(),this.Oo=[],this.No()}vo(e){this.Oo.push(e)}shutdown(){window.removeEventListener("online",this.Co),window.removeEventListener("offline",this.Mo)}No(){window.addEventListener("online",this.Co),window.addEventListener("offline",this.Mo)}Fo(){__PRIVATE_logDebug($t,"Network connectivity changed: AVAILABLE");for(const e of this.Oo)e(0)}xo(){__PRIVATE_logDebug($t,"Network connectivity changed: UNAVAILABLE");for(const e of this.Oo)e(1)}static C(){return typeof window<"u"&&window.addEventListener!==void 0&&window.removeEventListener!==void 0}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let Ut=null;function __PRIVATE_generateUniqueDebugId(){return Ut===null?Ut=function(){return 268435456+Math.round(2147483648*Math.random())}():Ut++,"0x"+Ut.toString(16)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Kt="RestConnection",Wt={BatchGetDocuments:"batchGet",Commit:"commit",RunQuery:"runQuery",RunAggregationQuery:"runAggregationQuery"};class __PRIVATE_RestConnection{get Bo(){return!1}constructor(e){this.databaseInfo=e,this.databaseId=e.databaseId;const o=e.ssl?"https":"http",a=encodeURIComponent(this.databaseId.projectId),d=encodeURIComponent(this.databaseId.database);this.Lo=o+"://"+e.host,this.ko=`projects/${a}/databases/${d}`,this.qo=this.databaseId.database===it?`project_id=${a}`:`project_id=${a}&database_id=${d}`}Qo(e,o,a,d,c){const j=__PRIVATE_generateUniqueDebugId(),_e=this.$o(e,o.toUriEncodedString());__PRIVATE_logDebug(Kt,`Sending RPC '${e}' ${j}:`,_e,a);const pt={"google-cloud-resource-prefix":this.ko,"x-goog-request-params":this.qo};return this.Uo(pt,d,c),this.Ko(e,_e,pt,a).then(yt=>(__PRIVATE_logDebug(Kt,`Received RPC '${e}' ${j}: `,yt),yt),yt=>{throw __PRIVATE_logWarn(Kt,`RPC '${e}' ${j} failed with error: `,yt,"url: ",_e,"request:",a),yt})}Wo(e,o,a,d,c,j){return this.Qo(e,o,a,d,c)}Uo(e,o,a){e["X-Goog-Api-Client"]=function(){return"gl-js/ fire/"+v}(),e["Content-Type"]="text/plain",this.databaseInfo.appId&&(e["X-Firebase-GMPID"]=this.databaseInfo.appId),o&&o.headers.forEach((d,c)=>e[c]=d),a&&a.headers.forEach((d,c)=>e[c]=d)}$o(e,o){const a=Wt[e];return`${this.Lo}/v1/${o}:${a}`}terminate(){}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class __PRIVATE_StreamBridge{constructor(e){this.Go=e.Go,this.zo=e.zo}jo(e){this.Ho=e}Jo(e){this.Yo=e}Zo(e){this.Xo=e}onMessage(e){this.e_=e}close(){this.zo()}send(e){this.Go(e)}t_(){this.Ho()}n_(){this.Yo()}r_(e){this.Xo(e)}i_(e){this.e_(e)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Gt="WebChannelConnection";class __PRIVATE_WebChannelConnection extends __PRIVATE_RestConnection{constructor(e){super(e),this.forceLongPolling=e.forceLongPolling,this.autoDetectLongPolling=e.autoDetectLongPolling,this.useFetchStreams=e.useFetchStreams,this.longPollingOptions=e.longPollingOptions}Ko(e,o,a,d){const c=__PRIVATE_generateUniqueDebugId();return new Promise((j,_e)=>{const pt=new XhrIo;pt.setWithCredentials(!0),pt.listenOnce(EventType.COMPLETE,()=>{try{switch(pt.getLastErrorCode()){case ErrorCode$1.NO_ERROR:const ct=pt.getResponseJson();__PRIVATE_logDebug(Gt,`XHR for RPC '${e}' ${c} received:`,JSON.stringify(ct)),j(ct);break;case ErrorCode$1.TIMEOUT:__PRIVATE_logDebug(Gt,`RPC '${e}' ${c} timed out`),_e(new FirestoreError(F.DEADLINE_EXCEEDED,"Request time out"));break;case ErrorCode$1.HTTP_ERROR:const Ct=pt.getStatus();if(__PRIVATE_logDebug(Gt,`RPC '${e}' ${c} failed with status:`,Ct,"response text:",pt.getResponseText()),Ct>0){let qt=pt.getResponseJson();Array.isArray(qt)&&(qt=qt[0]);const Ot=qt==null?void 0:qt.error;if(Ot&&Ot.status&&Ot.message){const Lt=function(ir){const er=ir.toLowerCase().replace(/_/g,"-");return Object.values(F).indexOf(er)>=0?er:F.UNKNOWN}(Ot.status);_e(new FirestoreError(Lt,Ot.message))}else _e(new FirestoreError(F.UNKNOWN,"Server responded with status "+pt.getStatus()))}else _e(new FirestoreError(F.UNAVAILABLE,"Connection failed."));break;default:fail(9055,{s_:e,streamId:c,o_:pt.getLastErrorCode(),__:pt.getLastError()})}}finally{__PRIVATE_logDebug(Gt,`RPC '${e}' ${c} completed.`)}});const yt=JSON.stringify(d);__PRIVATE_logDebug(Gt,`RPC '${e}' ${c} sending request:`,d),pt.send(o,"POST",yt,a,15)})}a_(e,o,a){const d=__PRIVATE_generateUniqueDebugId(),c=[this.Lo,"/","google.firestore.v1.Firestore","/",e,"/channel"],j=createWebChannelTransport(),_e=getStatEventTarget(),pt={httpSessionIdParam:"gsessionid",initMessageHeaders:{},messageUrlParams:{database:`projects/${this.databaseId.projectId}/databases/${this.databaseId.database}`},sendRawJson:!0,supportsCrossDomainXhr:!0,internalChannelParams:{forwardChannelRequestTimeoutMs:6e5},forceLongPolling:this.forceLongPolling,detectBufferingProxy:this.autoDetectLongPolling},yt=this.longPollingOptions.timeoutSeconds;yt!==void 0&&(pt.longPollingTimeout=Math.round(1e3*yt)),this.useFetchStreams&&(pt.useFetchStreams=!0),this.Uo(pt.initMessageHeaders,o,a),pt.encodeInitMessageHeaders=!0;const ct=c.join("");__PRIVATE_logDebug(Gt,`Creating RPC '${e}' stream ${d}: ${ct}`,pt);const Ct=j.createWebChannel(ct,pt);let qt=!1,Ot=!1;const Lt=new __PRIVATE_StreamBridge({Go:ir=>{Ot?__PRIVATE_logDebug(Gt,`Not sending because RPC '${e}' stream ${d} is closed:`,ir):(qt||(__PRIVATE_logDebug(Gt,`Opening RPC '${e}' stream ${d} transport.`),Ct.open(),qt=!0),__PRIVATE_logDebug(Gt,`RPC '${e}' stream ${d} sending:`,ir),Ct.send(ir))},zo:()=>Ct.close()}),Qt=(ir,er,tr)=>{ir.listen(er,sr=>{try{tr(sr)}catch(ar){setTimeout(()=>{throw ar},0)}})};return Qt(Ct,WebChannel.EventType.OPEN,()=>{Ot||(__PRIVATE_logDebug(Gt,`RPC '${e}' stream ${d} transport opened.`),Lt.t_())}),Qt(Ct,WebChannel.EventType.CLOSE,()=>{Ot||(Ot=!0,__PRIVATE_logDebug(Gt,`RPC '${e}' stream ${d} transport closed`),Lt.r_())}),Qt(Ct,WebChannel.EventType.ERROR,ir=>{Ot||(Ot=!0,__PRIVATE_logWarn(Gt,`RPC '${e}' stream ${d} transport errored. Name:`,ir.name,"Message:",ir.message),Lt.r_(new FirestoreError(F.UNAVAILABLE,"The operation could not be completed")))}),Qt(Ct,WebChannel.EventType.MESSAGE,ir=>{var er;if(!Ot){const tr=ir.data[0];__PRIVATE_hardAssert(!!tr,16349);const sr=tr,ar=(sr==null?void 0:sr.error)||((er=sr[0])===null||er===void 0?void 0:er.error);if(ar){__PRIVATE_logDebug(Gt,`RPC '${e}' stream ${d} received error:`,ar);const hr=ar.status;let _r=function(lr){const gr=dt[lr];if(gr!==void 0)return __PRIVATE_mapCodeFromRpcCode(gr)}(hr),dr=ar.message;_r===void 0&&(_r=F.INTERNAL,dr="Unknown error status: "+hr+" with message "+ar.message),Ot=!0,Lt.r_(new FirestoreError(_r,dr)),Ct.close()}else __PRIVATE_logDebug(Gt,`RPC '${e}' stream ${d} received:`,tr),Lt.i_(tr)}}),Qt(_e,Event$1.STAT_EVENT,ir=>{ir.stat===Stat.PROXY?__PRIVATE_logDebug(Gt,`RPC '${e}' stream ${d} detected buffering proxy`):ir.stat===Stat.NOPROXY&&__PRIVATE_logDebug(Gt,`RPC '${e}' stream ${d} detected no buffering proxy`)}),setTimeout(()=>{Lt.n_()},0),Lt}}function getDocument(){return typeof document<"u"?document:null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function __PRIVATE_newSerializer(s){return new JsonProtoSerializer(s,!0)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class __PRIVATE_ExponentialBackoff{constructor(e,o,a=1e3,d=1.5,c=6e4){this.bi=e,this.timerId=o,this.u_=a,this.c_=d,this.l_=c,this.h_=0,this.P_=null,this.T_=Date.now(),this.reset()}reset(){this.h_=0}I_(){this.h_=this.l_}E_(e){this.cancel();const o=Math.floor(this.h_+this.d_()),a=Math.max(0,Date.now()-this.T_),d=Math.max(0,o-a);d>0&&__PRIVATE_logDebug("ExponentialBackoff",`Backing off for ${d} ms (base delay: ${this.h_} ms, delay with jitter: ${o} ms, last attempt: ${a} ms ago)`),this.P_=this.bi.enqueueAfterDelay(this.timerId,d,()=>(this.T_=Date.now(),e())),this.h_*=this.c_,this.h_<this.u_&&(this.h_=this.u_),this.h_>this.l_&&(this.h_=this.l_)}A_(){this.P_!==null&&(this.P_.skipDelay(),this.P_=null)}cancel(){this.P_!==null&&(this.P_.cancel(),this.P_=null)}d_(){return(Math.random()-.5)*this.h_}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const zt="PersistentStream";class __PRIVATE_PersistentStream{constructor(e,o,a,d,c,j,_e,pt){this.bi=e,this.R_=a,this.V_=d,this.connection=c,this.authCredentialsProvider=j,this.appCheckCredentialsProvider=_e,this.listener=pt,this.state=0,this.m_=0,this.f_=null,this.g_=null,this.stream=null,this.p_=0,this.y_=new __PRIVATE_ExponentialBackoff(e,o)}w_(){return this.state===1||this.state===5||this.b_()}b_(){return this.state===2||this.state===3}start(){this.p_=0,this.state!==4?this.auth():this.S_()}async stop(){this.w_()&&await this.close(0)}D_(){this.state=0,this.y_.reset()}v_(){this.b_()&&this.f_===null&&(this.f_=this.bi.enqueueAfterDelay(this.R_,6e4,()=>this.C_()))}F_(e){this.M_(),this.stream.send(e)}async C_(){if(this.b_())return this.close(0)}M_(){this.f_&&(this.f_.cancel(),this.f_=null)}x_(){this.g_&&(this.g_.cancel(),this.g_=null)}async close(e,o){this.M_(),this.x_(),this.y_.cancel(),this.m_++,e!==4?this.y_.reset():o&&o.code===F.RESOURCE_EXHAUSTED?(__PRIVATE_logError(o.toString()),__PRIVATE_logError("Using maximum backoff delay to prevent overloading the backend."),this.y_.I_()):o&&o.code===F.UNAUTHENTICATED&&this.state!==3&&(this.authCredentialsProvider.invalidateToken(),this.appCheckCredentialsProvider.invalidateToken()),this.stream!==null&&(this.O_(),this.stream.close(),this.stream=null),this.state=e,await this.listener.Zo(o)}O_(){}auth(){this.state=1;const e=this.N_(this.m_),o=this.m_;Promise.all([this.authCredentialsProvider.getToken(),this.appCheckCredentialsProvider.getToken()]).then(([a,d])=>{this.m_===o&&this.B_(a,d)},a=>{e(()=>{const d=new FirestoreError(F.UNKNOWN,"Fetching auth token failed: "+a.message);return this.L_(d)})})}B_(e,o){const a=this.N_(this.m_);this.stream=this.k_(e,o),this.stream.jo(()=>{a(()=>this.listener.jo())}),this.stream.Jo(()=>{a(()=>(this.state=2,this.g_=this.bi.enqueueAfterDelay(this.V_,1e4,()=>(this.b_()&&(this.state=3),Promise.resolve())),this.listener.Jo()))}),this.stream.Zo(d=>{a(()=>this.L_(d))}),this.stream.onMessage(d=>{a(()=>++this.p_==1?this.q_(d):this.onNext(d))})}S_(){this.state=5,this.y_.E_(async()=>{this.state=0,this.start()})}L_(e){return __PRIVATE_logDebug(zt,`close with error: ${e}`),this.stream=null,this.close(4,e)}N_(e){return o=>{this.bi.enqueueAndForget(()=>this.m_===e?o():(__PRIVATE_logDebug(zt,"stream callback skipped by getCloseGuardedDispatcher."),Promise.resolve()))}}}class __PRIVATE_PersistentListenStream extends __PRIVATE_PersistentStream{constructor(e,o,a,d,c,j){super(e,"listen_stream_connection_backoff","listen_stream_idle","health_check_timeout",o,a,d,j),this.serializer=c}k_(e,o){return this.connection.a_("Listen",e,o)}q_(e){return this.onNext(e)}onNext(e){this.y_.reset();const o=__PRIVATE_fromWatchChange(this.serializer,e),a=function(c){if(!("targetChange"in c))return SnapshotVersion.min();const j=c.targetChange;return j.targetIds&&j.targetIds.length?SnapshotVersion.min():j.readTime?__PRIVATE_fromVersion(j.readTime):SnapshotVersion.min()}(e);return this.listener.Q_(o,a)}U_(e){const o={};o.database=__PRIVATE_getEncodedDatabaseId(this.serializer),o.addTarget=function(c,j){let _e;const pt=j.target;if(_e=__PRIVATE_targetIsDocumentTarget(pt)?{documents:__PRIVATE_toDocumentsTarget(c,pt)}:{query:__PRIVATE_toQueryTarget(c,pt).gt},_e.targetId=j.targetId,j.resumeToken.approximateByteSize()>0){_e.resumeToken=__PRIVATE_toBytes(c,j.resumeToken);const yt=__PRIVATE_toInt32Proto(c,j.expectedCount);yt!==null&&(_e.expectedCount=yt)}else if(j.snapshotVersion.compareTo(SnapshotVersion.min())>0){_e.readTime=toTimestamp(c,j.snapshotVersion.toTimestamp());const yt=__PRIVATE_toInt32Proto(c,j.expectedCount);yt!==null&&(_e.expectedCount=yt)}return _e}(this.serializer,e);const a=__PRIVATE_toListenRequestLabels(this.serializer,e);a&&(o.labels=a),this.F_(o)}K_(e){const o={};o.database=__PRIVATE_getEncodedDatabaseId(this.serializer),o.removeTarget=e,this.F_(o)}}class __PRIVATE_PersistentWriteStream extends __PRIVATE_PersistentStream{constructor(e,o,a,d,c,j){super(e,"write_stream_connection_backoff","write_stream_idle","health_check_timeout",o,a,d,j),this.serializer=c}get W_(){return this.p_>0}start(){this.lastStreamToken=void 0,super.start()}O_(){this.W_&&this.G_([])}k_(e,o){return this.connection.a_("Write",e,o)}q_(e){return __PRIVATE_hardAssert(!!e.streamToken,31322),this.lastStreamToken=e.streamToken,__PRIVATE_hardAssert(!e.writeResults||e.writeResults.length===0,55816),this.listener.z_()}onNext(e){__PRIVATE_hardAssert(!!e.streamToken,12678),this.lastStreamToken=e.streamToken,this.y_.reset();const o=__PRIVATE_fromWriteResults(e.writeResults,e.commitTime),a=__PRIVATE_fromVersion(e.commitTime);return this.listener.j_(a,o)}H_(){const e={};e.database=__PRIVATE_getEncodedDatabaseId(this.serializer),this.F_(e)}G_(e){const o={streamToken:this.lastStreamToken,writes:e.map(a=>toMutation(this.serializer,a))};this.F_(o)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Datastore{}class __PRIVATE_DatastoreImpl extends Datastore{constructor(e,o,a,d){super(),this.authCredentials=e,this.appCheckCredentials=o,this.connection=a,this.serializer=d,this.J_=!1}Y_(){if(this.J_)throw new FirestoreError(F.FAILED_PRECONDITION,"The client has already been terminated.")}Qo(e,o,a,d){return this.Y_(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then(([c,j])=>this.connection.Qo(e,__PRIVATE_toResourcePath(o,a),d,c,j)).catch(c=>{throw c.name==="FirebaseError"?(c.code===F.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),c):new FirestoreError(F.UNKNOWN,c.toString())})}Wo(e,o,a,d,c){return this.Y_(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then(([j,_e])=>this.connection.Wo(e,__PRIVATE_toResourcePath(o,a),d,j,_e,c)).catch(j=>{throw j.name==="FirebaseError"?(j.code===F.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),j):new FirestoreError(F.UNKNOWN,j.toString())})}terminate(){this.J_=!0,this.connection.terminate()}}class __PRIVATE_OnlineStateTracker{constructor(e,o){this.asyncQueue=e,this.onlineStateHandler=o,this.state="Unknown",this.Z_=0,this.X_=null,this.ea=!0}ta(){this.Z_===0&&(this.na("Unknown"),this.X_=this.asyncQueue.enqueueAfterDelay("online_state_timeout",1e4,()=>(this.X_=null,this.ra("Backend didn't respond within 10 seconds."),this.na("Offline"),Promise.resolve())))}ia(e){this.state==="Online"?this.na("Unknown"):(this.Z_++,this.Z_>=1&&(this.sa(),this.ra(`Connection failed 1 times. Most recent error: ${e.toString()}`),this.na("Offline")))}set(e){this.sa(),this.Z_=0,e==="Online"&&(this.ea=!1),this.na(e)}na(e){e!==this.state&&(this.state=e,this.onlineStateHandler(e))}ra(e){const o=`Could not reach Cloud Firestore backend. ${e}
This typically indicates that your device does not have a healthy Internet connection at the moment. The client will operate in offline mode until it is able to successfully connect to the backend.`;this.ea?(__PRIVATE_logError(o),this.ea=!1):__PRIVATE_logDebug("OnlineStateTracker",o)}sa(){this.X_!==null&&(this.X_.cancel(),this.X_=null)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const jt="RemoteStore";class __PRIVATE_RemoteStoreImpl{constructor(e,o,a,d,c){this.localStore=e,this.datastore=o,this.asyncQueue=a,this.remoteSyncer={},this.oa=[],this._a=new Map,this.aa=new Set,this.ua=[],this.ca=c,this.ca.vo(j=>{a.enqueueAndForget(async()=>{__PRIVATE_canUseNetwork(this)&&(__PRIVATE_logDebug(jt,"Restarting streams for network reachability change."),await async function(pt){const yt=__PRIVATE_debugCast(pt);yt.aa.add(4),await __PRIVATE_disableNetworkInternal(yt),yt.la.set("Unknown"),yt.aa.delete(4),await __PRIVATE_enableNetworkInternal(yt)}(this))})}),this.la=new __PRIVATE_OnlineStateTracker(a,d)}}async function __PRIVATE_enableNetworkInternal(s){if(__PRIVATE_canUseNetwork(s))for(const e of s.ua)await e(!0)}async function __PRIVATE_disableNetworkInternal(s){for(const e of s.ua)await e(!1)}function __PRIVATE_remoteStoreListen(s,e){const o=__PRIVATE_debugCast(s);o._a.has(e.targetId)||(o._a.set(e.targetId,e),__PRIVATE_shouldStartWatchStream(o)?__PRIVATE_startWatchStream(o):__PRIVATE_ensureWatchStream(o).b_()&&__PRIVATE_sendWatchRequest(o,e))}function __PRIVATE_remoteStoreUnlisten(s,e){const o=__PRIVATE_debugCast(s),a=__PRIVATE_ensureWatchStream(o);o._a.delete(e),a.b_()&&__PRIVATE_sendUnwatchRequest(o,e),o._a.size===0&&(a.b_()?a.v_():__PRIVATE_canUseNetwork(o)&&o.la.set("Unknown"))}function __PRIVATE_sendWatchRequest(s,e){if(s.ha.Ke(e.targetId),e.resumeToken.approximateByteSize()>0||e.snapshotVersion.compareTo(SnapshotVersion.min())>0){const o=s.remoteSyncer.getRemoteKeysForTarget(e.targetId).size;e=e.withExpectedCount(o)}__PRIVATE_ensureWatchStream(s).U_(e)}function __PRIVATE_sendUnwatchRequest(s,e){s.ha.Ke(e),__PRIVATE_ensureWatchStream(s).K_(e)}function __PRIVATE_startWatchStream(s){s.ha=new __PRIVATE_WatchChangeAggregator({getRemoteKeysForTarget:e=>s.remoteSyncer.getRemoteKeysForTarget(e),Rt:e=>s._a.get(e)||null,Pt:()=>s.datastore.serializer.databaseId}),__PRIVATE_ensureWatchStream(s).start(),s.la.ta()}function __PRIVATE_shouldStartWatchStream(s){return __PRIVATE_canUseNetwork(s)&&!__PRIVATE_ensureWatchStream(s).w_()&&s._a.size>0}function __PRIVATE_canUseNetwork(s){return __PRIVATE_debugCast(s).aa.size===0}function __PRIVATE_cleanUpWatchStreamState(s){s.ha=void 0}async function __PRIVATE_onWatchStreamConnected(s){s.la.set("Online")}async function __PRIVATE_onWatchStreamOpen(s){s._a.forEach((e,o)=>{__PRIVATE_sendWatchRequest(s,e)})}async function __PRIVATE_onWatchStreamClose(s,e){__PRIVATE_cleanUpWatchStreamState(s),__PRIVATE_shouldStartWatchStream(s)?(s.la.ia(e),__PRIVATE_startWatchStream(s)):s.la.set("Unknown")}async function __PRIVATE_onWatchStreamChange(s,e,o){if(s.la.set("Online"),e instanceof __PRIVATE_WatchTargetChange&&e.state===2&&e.cause)try{await async function(d,c){const j=c.cause;for(const _e of c.targetIds)d._a.has(_e)&&(await d.remoteSyncer.rejectListen(_e,j),d._a.delete(_e),d.ha.removeTarget(_e))}(s,e)}catch(a){__PRIVATE_logDebug(jt,"Failed to remove targets %s: %s ",e.targetIds.join(","),a),await __PRIVATE_disableNetworkUntilRecovery(s,a)}else if(e instanceof __PRIVATE_DocumentWatchChange?s.ha.Xe(e):e instanceof __PRIVATE_ExistenceFilterChange?s.ha.ot(e):s.ha.nt(e),!o.isEqual(SnapshotVersion.min()))try{const a=await __PRIVATE_localStoreGetLastRemoteSnapshotVersion(s.localStore);o.compareTo(a)>=0&&await function(c,j){const _e=c.ha.It(j);return _e.targetChanges.forEach((pt,yt)=>{if(pt.resumeToken.approximateByteSize()>0){const ct=c._a.get(yt);ct&&c._a.set(yt,ct.withResumeToken(pt.resumeToken,j))}}),_e.targetMismatches.forEach((pt,yt)=>{const ct=c._a.get(pt);if(!ct)return;c._a.set(pt,ct.withResumeToken(ByteString.EMPTY_BYTE_STRING,ct.snapshotVersion)),__PRIVATE_sendUnwatchRequest(c,pt);const Ct=new TargetData(ct.target,pt,yt,ct.sequenceNumber);__PRIVATE_sendWatchRequest(c,Ct)}),c.remoteSyncer.applyRemoteEvent(_e)}(s,o)}catch(a){__PRIVATE_logDebug(jt,"Failed to raise snapshot:",a),await __PRIVATE_disableNetworkUntilRecovery(s,a)}}async function __PRIVATE_disableNetworkUntilRecovery(s,e,o){if(!__PRIVATE_isIndexedDbTransactionError(e))throw e;s.aa.add(1),await __PRIVATE_disableNetworkInternal(s),s.la.set("Offline"),o||(o=()=>__PRIVATE_localStoreGetLastRemoteSnapshotVersion(s.localStore)),s.asyncQueue.enqueueRetryable(async()=>{__PRIVATE_logDebug(jt,"Retrying IndexedDB access"),await o(),s.aa.delete(1),await __PRIVATE_enableNetworkInternal(s)})}function __PRIVATE_executeWithRecovery(s,e){return e().catch(o=>__PRIVATE_disableNetworkUntilRecovery(s,o,e))}async function __PRIVATE_fillWritePipeline(s){const e=__PRIVATE_debugCast(s),o=__PRIVATE_ensureWriteStream(e);let a=e.oa.length>0?e.oa[e.oa.length-1].batchId:$;for(;__PRIVATE_canAddToWritePipeline(e);)try{const d=await __PRIVATE_localStoreGetNextMutationBatch(e.localStore,a);if(d===null){e.oa.length===0&&o.v_();break}a=d.batchId,__PRIVATE_addToWritePipeline(e,d)}catch(d){await __PRIVATE_disableNetworkUntilRecovery(e,d)}__PRIVATE_shouldStartWriteStream(e)&&__PRIVATE_startWriteStream(e)}function __PRIVATE_canAddToWritePipeline(s){return __PRIVATE_canUseNetwork(s)&&s.oa.length<10}function __PRIVATE_addToWritePipeline(s,e){s.oa.push(e);const o=__PRIVATE_ensureWriteStream(s);o.b_()&&o.W_&&o.G_(e.mutations)}function __PRIVATE_shouldStartWriteStream(s){return __PRIVATE_canUseNetwork(s)&&!__PRIVATE_ensureWriteStream(s).w_()&&s.oa.length>0}function __PRIVATE_startWriteStream(s){__PRIVATE_ensureWriteStream(s).start()}async function __PRIVATE_onWriteStreamOpen(s){__PRIVATE_ensureWriteStream(s).H_()}async function __PRIVATE_onWriteHandshakeComplete(s){const e=__PRIVATE_ensureWriteStream(s);for(const o of s.oa)e.G_(o.mutations)}async function __PRIVATE_onMutationResult(s,e,o){const a=s.oa.shift(),d=MutationBatchResult.from(a,e,o);await __PRIVATE_executeWithRecovery(s,()=>s.remoteSyncer.applySuccessfulWrite(d)),await __PRIVATE_fillWritePipeline(s)}async function __PRIVATE_onWriteStreamClose(s,e){e&&__PRIVATE_ensureWriteStream(s).W_&&await async function(a,d){if(function(j){return __PRIVATE_isPermanentError(j)&&j!==F.ABORTED}(d.code)){const c=a.oa.shift();__PRIVATE_ensureWriteStream(a).D_(),await __PRIVATE_executeWithRecovery(a,()=>a.remoteSyncer.rejectFailedWrite(c.batchId,d)),await __PRIVATE_fillWritePipeline(a)}}(s,e),__PRIVATE_shouldStartWriteStream(s)&&__PRIVATE_startWriteStream(s)}async function __PRIVATE_remoteStoreHandleCredentialChange(s,e){const o=__PRIVATE_debugCast(s);o.asyncQueue.verifyOperationInProgress(),__PRIVATE_logDebug(jt,"RemoteStore received new credentials");const a=__PRIVATE_canUseNetwork(o);o.aa.add(3),await __PRIVATE_disableNetworkInternal(o),a&&o.la.set("Unknown"),await o.remoteSyncer.handleCredentialChange(e),o.aa.delete(3),await __PRIVATE_enableNetworkInternal(o)}async function __PRIVATE_remoteStoreApplyPrimaryState(s,e){const o=__PRIVATE_debugCast(s);e?(o.aa.delete(2),await __PRIVATE_enableNetworkInternal(o)):e||(o.aa.add(2),await __PRIVATE_disableNetworkInternal(o),o.la.set("Unknown"))}function __PRIVATE_ensureWatchStream(s){return s.Pa||(s.Pa=function(o,a,d){const c=__PRIVATE_debugCast(o);return c.Y_(),new __PRIVATE_PersistentListenStream(a,c.connection,c.authCredentials,c.appCheckCredentials,c.serializer,d)}(s.datastore,s.asyncQueue,{jo:__PRIVATE_onWatchStreamConnected.bind(null,s),Jo:__PRIVATE_onWatchStreamOpen.bind(null,s),Zo:__PRIVATE_onWatchStreamClose.bind(null,s),Q_:__PRIVATE_onWatchStreamChange.bind(null,s)}),s.ua.push(async e=>{e?(s.Pa.D_(),__PRIVATE_shouldStartWatchStream(s)?__PRIVATE_startWatchStream(s):s.la.set("Unknown")):(await s.Pa.stop(),__PRIVATE_cleanUpWatchStreamState(s))})),s.Pa}function __PRIVATE_ensureWriteStream(s){return s.Ta||(s.Ta=function(o,a,d){const c=__PRIVATE_debugCast(o);return c.Y_(),new __PRIVATE_PersistentWriteStream(a,c.connection,c.authCredentials,c.appCheckCredentials,c.serializer,d)}(s.datastore,s.asyncQueue,{jo:()=>Promise.resolve(),Jo:__PRIVATE_onWriteStreamOpen.bind(null,s),Zo:__PRIVATE_onWriteStreamClose.bind(null,s),z_:__PRIVATE_onWriteHandshakeComplete.bind(null,s),j_:__PRIVATE_onMutationResult.bind(null,s)}),s.ua.push(async e=>{e?(s.Ta.D_(),await __PRIVATE_fillWritePipeline(s)):(await s.Ta.stop(),s.oa.length>0&&(__PRIVATE_logDebug(jt,`Stopping write stream with ${s.oa.length} pending writes`),s.oa=[]))})),s.Ta}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class DelayedOperation{constructor(e,o,a,d,c){this.asyncQueue=e,this.timerId=o,this.targetTimeMs=a,this.op=d,this.removalCallback=c,this.deferred=new __PRIVATE_Deferred,this.then=this.deferred.promise.then.bind(this.deferred.promise),this.deferred.promise.catch(j=>{})}get promise(){return this.deferred.promise}static createAndSchedule(e,o,a,d,c){const j=Date.now()+a,_e=new DelayedOperation(e,o,j,d,c);return _e.start(a),_e}start(e){this.timerHandle=setTimeout(()=>this.handleDelayElapsed(),e)}skipDelay(){return this.handleDelayElapsed()}cancel(e){this.timerHandle!==null&&(this.clearTimeout(),this.deferred.reject(new FirestoreError(F.CANCELLED,"Operation cancelled"+(e?": "+e:""))))}handleDelayElapsed(){this.asyncQueue.enqueueAndForget(()=>this.timerHandle!==null?(this.clearTimeout(),this.op().then(e=>this.deferred.resolve(e))):Promise.resolve())}clearTimeout(){this.timerHandle!==null&&(this.removalCallback(this),clearTimeout(this.timerHandle),this.timerHandle=null)}}function __PRIVATE_wrapInUserErrorIfRecoverable(s,e){if(__PRIVATE_logError("AsyncQueue",`${e}: ${s}`),__PRIVATE_isIndexedDbTransactionError(s))return new FirestoreError(F.UNAVAILABLE,`${e}: ${s}`);throw s}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class DocumentSet{static emptySet(e){return new DocumentSet(e.comparator)}constructor(e){this.comparator=e?(o,a)=>e(o,a)||DocumentKey.comparator(o.key,a.key):(o,a)=>DocumentKey.comparator(o.key,a.key),this.keyedMap=documentMap(),this.sortedSet=new SortedMap(this.comparator)}has(e){return this.keyedMap.get(e)!=null}get(e){return this.keyedMap.get(e)}first(){return this.sortedSet.minKey()}last(){return this.sortedSet.maxKey()}isEmpty(){return this.sortedSet.isEmpty()}indexOf(e){const o=this.keyedMap.get(e);return o?this.sortedSet.indexOf(o):-1}get size(){return this.sortedSet.size}forEach(e){this.sortedSet.inorderTraversal((o,a)=>(e(o),!1))}add(e){const o=this.delete(e.key);return o.copy(o.keyedMap.insert(e.key,e),o.sortedSet.insert(e,null))}delete(e){const o=this.get(e);return o?this.copy(this.keyedMap.remove(e),this.sortedSet.remove(o)):this}isEqual(e){if(!(e instanceof DocumentSet)||this.size!==e.size)return!1;const o=this.sortedSet.getIterator(),a=e.sortedSet.getIterator();for(;o.hasNext();){const d=o.getNext().key,c=a.getNext().key;if(!d.isEqual(c))return!1}return!0}toString(){const e=[];return this.forEach(o=>{e.push(o.toString())}),e.length===0?"DocumentSet ()":`DocumentSet (
  `+e.join(`  
`)+`
)`}copy(e,o){const a=new DocumentSet;return a.comparator=this.comparator,a.keyedMap=e,a.sortedSet=o,a}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class __PRIVATE_DocumentChangeSet{constructor(){this.Ia=new SortedMap(DocumentKey.comparator)}track(e){const o=e.doc.key,a=this.Ia.get(o);a?e.type!==0&&a.type===3?this.Ia=this.Ia.insert(o,e):e.type===3&&a.type!==1?this.Ia=this.Ia.insert(o,{type:a.type,doc:e.doc}):e.type===2&&a.type===2?this.Ia=this.Ia.insert(o,{type:2,doc:e.doc}):e.type===2&&a.type===0?this.Ia=this.Ia.insert(o,{type:0,doc:e.doc}):e.type===1&&a.type===0?this.Ia=this.Ia.remove(o):e.type===1&&a.type===2?this.Ia=this.Ia.insert(o,{type:1,doc:a.doc}):e.type===0&&a.type===1?this.Ia=this.Ia.insert(o,{type:2,doc:e.doc}):fail(63341,{Vt:e,Ea:a}):this.Ia=this.Ia.insert(o,e)}da(){const e=[];return this.Ia.inorderTraversal((o,a)=>{e.push(a)}),e}}class ViewSnapshot{constructor(e,o,a,d,c,j,_e,pt,yt){this.query=e,this.docs=o,this.oldDocs=a,this.docChanges=d,this.mutatedKeys=c,this.fromCache=j,this.syncStateChanged=_e,this.excludesMetadataChanges=pt,this.hasCachedResults=yt}static fromInitialDocuments(e,o,a,d,c){const j=[];return o.forEach(_e=>{j.push({type:0,doc:_e})}),new ViewSnapshot(e,o,DocumentSet.emptySet(o),j,a,d,!0,!1,c)}get hasPendingWrites(){return!this.mutatedKeys.isEmpty()}isEqual(e){if(!(this.fromCache===e.fromCache&&this.hasCachedResults===e.hasCachedResults&&this.syncStateChanged===e.syncStateChanged&&this.mutatedKeys.isEqual(e.mutatedKeys)&&__PRIVATE_queryEquals(this.query,e.query)&&this.docs.isEqual(e.docs)&&this.oldDocs.isEqual(e.oldDocs)))return!1;const o=this.docChanges,a=e.docChanges;if(o.length!==a.length)return!1;for(let d=0;d<o.length;d++)if(o[d].type!==a[d].type||!o[d].doc.isEqual(a[d].doc))return!1;return!0}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class __PRIVATE_QueryListenersInfo{constructor(){this.Aa=void 0,this.Ra=[]}Va(){return this.Ra.some(e=>e.ma())}}class __PRIVATE_EventManagerImpl{constructor(){this.queries=__PRIVATE_newQueriesObjectMap(),this.onlineState="Unknown",this.fa=new Set}terminate(){(function(o,a){const d=__PRIVATE_debugCast(o),c=d.queries;d.queries=__PRIVATE_newQueriesObjectMap(),c.forEach((j,_e)=>{for(const pt of _e.Ra)pt.onError(a)})})(this,new FirestoreError(F.ABORTED,"Firestore shutting down"))}}function __PRIVATE_newQueriesObjectMap(){return new ObjectMap(s=>__PRIVATE_canonifyQuery(s),__PRIVATE_queryEquals)}async function __PRIVATE_eventManagerListen(s,e){const o=__PRIVATE_debugCast(s);let a=3;const d=e.query;let c=o.queries.get(d);c?!c.Va()&&e.ma()&&(a=2):(c=new __PRIVATE_QueryListenersInfo,a=e.ma()?0:1);try{switch(a){case 0:c.Aa=await o.onListen(d,!0);break;case 1:c.Aa=await o.onListen(d,!1);break;case 2:await o.onFirstRemoteStoreListen(d)}}catch(j){const _e=__PRIVATE_wrapInUserErrorIfRecoverable(j,`Initialization of query '${__PRIVATE_stringifyQuery(e.query)}' failed`);return void e.onError(_e)}o.queries.set(d,c),c.Ra.push(e),e.ga(o.onlineState),c.Aa&&e.pa(c.Aa)&&__PRIVATE_raiseSnapshotsInSyncEvent(o)}async function __PRIVATE_eventManagerUnlisten(s,e){const o=__PRIVATE_debugCast(s),a=e.query;let d=3;const c=o.queries.get(a);if(c){const j=c.Ra.indexOf(e);j>=0&&(c.Ra.splice(j,1),c.Ra.length===0?d=e.ma()?0:1:!c.Va()&&e.ma()&&(d=2))}switch(d){case 0:return o.queries.delete(a),o.onUnlisten(a,!0);case 1:return o.queries.delete(a),o.onUnlisten(a,!1);case 2:return o.onLastRemoteStoreUnlisten(a);default:return}}function __PRIVATE_eventManagerOnWatchChange(s,e){const o=__PRIVATE_debugCast(s);let a=!1;for(const d of e){const c=d.query,j=o.queries.get(c);if(j){for(const _e of j.Ra)_e.pa(d)&&(a=!0);j.Aa=d}}a&&__PRIVATE_raiseSnapshotsInSyncEvent(o)}function __PRIVATE_eventManagerOnWatchError(s,e,o){const a=__PRIVATE_debugCast(s),d=a.queries.get(e);if(d)for(const c of d.Ra)c.onError(o);a.queries.delete(e)}function __PRIVATE_raiseSnapshotsInSyncEvent(s){s.fa.forEach(e=>{e.next()})}var Ht,Jt;(Jt=Ht||(Ht={})).ya="default",Jt.Cache="cache";class __PRIVATE_QueryListener{constructor(e,o,a){this.query=e,this.wa=o,this.ba=!1,this.Sa=null,this.onlineState="Unknown",this.options=a||{}}pa(e){if(!this.options.includeMetadataChanges){const a=[];for(const d of e.docChanges)d.type!==3&&a.push(d);e=new ViewSnapshot(e.query,e.docs,e.oldDocs,a,e.mutatedKeys,e.fromCache,e.syncStateChanged,!0,e.hasCachedResults)}let o=!1;return this.ba?this.Da(e)&&(this.wa.next(e),o=!0):this.va(e,this.onlineState)&&(this.Ca(e),o=!0),this.Sa=e,o}onError(e){this.wa.error(e)}ga(e){this.onlineState=e;let o=!1;return this.Sa&&!this.ba&&this.va(this.Sa,e)&&(this.Ca(this.Sa),o=!0),o}va(e,o){if(!e.fromCache||!this.ma())return!0;const a=o!=="Offline";return(!this.options.Fa||!a)&&(!e.docs.isEmpty()||e.hasCachedResults||o==="Offline")}Da(e){if(e.docChanges.length>0)return!0;const o=this.Sa&&this.Sa.hasPendingWrites!==e.hasPendingWrites;return!(!e.syncStateChanged&&!o)&&this.options.includeMetadataChanges===!0}Ca(e){e=ViewSnapshot.fromInitialDocuments(e.query,e.docs,e.mutatedKeys,e.fromCache,e.hasCachedResults),this.ba=!0,this.wa.next(e)}ma(){return this.options.source!==Ht.Cache}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class __PRIVATE_AddedLimboDocument{constructor(e){this.key=e}}class __PRIVATE_RemovedLimboDocument{constructor(e){this.key=e}}class __PRIVATE_View{constructor(e,o){this.query=e,this.qa=o,this.Qa=null,this.hasCachedResults=!1,this.current=!1,this.$a=__PRIVATE_documentKeySet(),this.mutatedKeys=__PRIVATE_documentKeySet(),this.Ua=__PRIVATE_newQueryComparator(e),this.Ka=new DocumentSet(this.Ua)}get Wa(){return this.qa}Ga(e,o){const a=o?o.za:new __PRIVATE_DocumentChangeSet,d=o?o.Ka:this.Ka;let c=o?o.mutatedKeys:this.mutatedKeys,j=d,_e=!1;const pt=this.query.limitType==="F"&&d.size===this.query.limit?d.last():null,yt=this.query.limitType==="L"&&d.size===this.query.limit?d.first():null;if(e.inorderTraversal((ct,Ct)=>{const qt=d.get(ct),Ot=__PRIVATE_queryMatches(this.query,Ct)?Ct:null,Lt=!!qt&&this.mutatedKeys.has(qt.key),Qt=!!Ot&&(Ot.hasLocalMutations||this.mutatedKeys.has(Ot.key)&&Ot.hasCommittedMutations);let ir=!1;qt&&Ot?qt.data.isEqual(Ot.data)?Lt!==Qt&&(a.track({type:3,doc:Ot}),ir=!0):this.ja(qt,Ot)||(a.track({type:2,doc:Ot}),ir=!0,(pt&&this.Ua(Ot,pt)>0||yt&&this.Ua(Ot,yt)<0)&&(_e=!0)):!qt&&Ot?(a.track({type:0,doc:Ot}),ir=!0):qt&&!Ot&&(a.track({type:1,doc:qt}),ir=!0,(pt||yt)&&(_e=!0)),ir&&(Ot?(j=j.add(Ot),c=Qt?c.add(ct):c.delete(ct)):(j=j.delete(ct),c=c.delete(ct)))}),this.query.limit!==null)for(;j.size>this.query.limit;){const ct=this.query.limitType==="F"?j.last():j.first();j=j.delete(ct.key),c=c.delete(ct.key),a.track({type:1,doc:ct})}return{Ka:j,za:a,ys:_e,mutatedKeys:c}}ja(e,o){return e.hasLocalMutations&&o.hasCommittedMutations&&!o.hasLocalMutations}applyChanges(e,o,a,d){const c=this.Ka;this.Ka=e.Ka,this.mutatedKeys=e.mutatedKeys;const j=e.za.da();j.sort((ct,Ct)=>function(Ot,Lt){const Qt=ir=>{switch(ir){case 0:return 1;case 2:case 3:return 2;case 1:return 0;default:return fail(20277,{Vt:ir})}};return Qt(Ot)-Qt(Lt)}(ct.type,Ct.type)||this.Ua(ct.doc,Ct.doc)),this.Ha(a),d=d!=null&&d;const _e=o&&!d?this.Ja():[],pt=this.$a.size===0&&this.current&&!d?1:0,yt=pt!==this.Qa;return this.Qa=pt,j.length!==0||yt?{snapshot:new ViewSnapshot(this.query,e.Ka,c,j,e.mutatedKeys,pt===0,yt,!1,!!a&&a.resumeToken.approximateByteSize()>0),Ya:_e}:{Ya:_e}}ga(e){return this.current&&e==="Offline"?(this.current=!1,this.applyChanges({Ka:this.Ka,za:new __PRIVATE_DocumentChangeSet,mutatedKeys:this.mutatedKeys,ys:!1},!1)):{Ya:[]}}Za(e){return!this.qa.has(e)&&!!this.Ka.has(e)&&!this.Ka.get(e).hasLocalMutations}Ha(e){e&&(e.addedDocuments.forEach(o=>this.qa=this.qa.add(o)),e.modifiedDocuments.forEach(o=>{}),e.removedDocuments.forEach(o=>this.qa=this.qa.delete(o)),this.current=e.current)}Ja(){if(!this.current)return[];const e=this.$a;this.$a=__PRIVATE_documentKeySet(),this.Ka.forEach(a=>{this.Za(a.key)&&(this.$a=this.$a.add(a.key))});const o=[];return e.forEach(a=>{this.$a.has(a)||o.push(new __PRIVATE_RemovedLimboDocument(a))}),this.$a.forEach(a=>{e.has(a)||o.push(new __PRIVATE_AddedLimboDocument(a))}),o}Xa(e){this.qa=e.Ns,this.$a=__PRIVATE_documentKeySet();const o=this.Ga(e.documents);return this.applyChanges(o,!0)}eu(){return ViewSnapshot.fromInitialDocuments(this.query,this.Ka,this.mutatedKeys,this.Qa===0,this.hasCachedResults)}}const Yt="SyncEngine";class __PRIVATE_QueryView{constructor(e,o,a){this.query=e,this.targetId=o,this.view=a}}class LimboResolution{constructor(e){this.key=e,this.tu=!1}}class __PRIVATE_SyncEngineImpl{constructor(e,o,a,d,c,j){this.localStore=e,this.remoteStore=o,this.eventManager=a,this.sharedClientState=d,this.currentUser=c,this.maxConcurrentLimboResolutions=j,this.nu={},this.ru=new ObjectMap(_e=>__PRIVATE_canonifyQuery(_e),__PRIVATE_queryEquals),this.iu=new Map,this.su=new Set,this.ou=new SortedMap(DocumentKey.comparator),this._u=new Map,this.au=new __PRIVATE_ReferenceSet,this.uu={},this.cu=new Map,this.lu=__PRIVATE_TargetIdGenerator.ir(),this.onlineState="Unknown",this.hu=void 0}get isPrimaryClient(){return this.hu===!0}}async function __PRIVATE_syncEngineListen(s,e,o=!0){const a=__PRIVATE_ensureWatchCallbacks(s);let d;const c=a.ru.get(e);return c?(a.sharedClientState.addLocalQueryTarget(c.targetId),d=c.view.eu()):d=await __PRIVATE_allocateTargetAndMaybeListen(a,e,o,!0),d}async function __PRIVATE_triggerRemoteStoreListen(s,e){const o=__PRIVATE_ensureWatchCallbacks(s);await __PRIVATE_allocateTargetAndMaybeListen(o,e,!0,!1)}async function __PRIVATE_allocateTargetAndMaybeListen(s,e,o,a){const d=await __PRIVATE_localStoreAllocateTarget(s.localStore,__PRIVATE_queryToTarget(e)),c=d.targetId,j=s.sharedClientState.addLocalQueryTarget(c,o);let _e;return a&&(_e=await __PRIVATE_initializeViewAndComputeSnapshot(s,e,c,j==="current",d.resumeToken)),s.isPrimaryClient&&o&&__PRIVATE_remoteStoreListen(s.remoteStore,d),_e}async function __PRIVATE_initializeViewAndComputeSnapshot(s,e,o,a,d){s.Pu=(Ct,qt,Ot)=>async function(Qt,ir,er,tr){let sr=ir.view.Ga(er);sr.ys&&(sr=await __PRIVATE_localStoreExecuteQuery(Qt.localStore,ir.query,!1).then(({documents:dr})=>ir.view.Ga(dr,sr)));const ar=tr&&tr.targetChanges.get(ir.targetId),hr=tr&&tr.targetMismatches.get(ir.targetId)!=null,_r=ir.view.applyChanges(sr,Qt.isPrimaryClient,ar,hr);return __PRIVATE_updateTrackedLimbos(Qt,ir.targetId,_r.Ya),_r.snapshot}(s,Ct,qt,Ot);const c=await __PRIVATE_localStoreExecuteQuery(s.localStore,e,!0),j=new __PRIVATE_View(e,c.Ns),_e=j.Ga(c.documents),pt=TargetChange.createSynthesizedTargetChangeForCurrentChange(o,a&&s.onlineState!=="Offline",d),yt=j.applyChanges(_e,s.isPrimaryClient,pt);__PRIVATE_updateTrackedLimbos(s,o,yt.Ya);const ct=new __PRIVATE_QueryView(e,o,j);return s.ru.set(e,ct),s.iu.has(o)?s.iu.get(o).push(e):s.iu.set(o,[e]),yt.snapshot}async function __PRIVATE_syncEngineUnlisten(s,e,o){const a=__PRIVATE_debugCast(s),d=a.ru.get(e),c=a.iu.get(d.targetId);if(c.length>1)return a.iu.set(d.targetId,c.filter(j=>!__PRIVATE_queryEquals(j,e))),void a.ru.delete(e);a.isPrimaryClient?(a.sharedClientState.removeLocalQueryTarget(d.targetId),a.sharedClientState.isActiveQueryTarget(d.targetId)||await __PRIVATE_localStoreReleaseTarget(a.localStore,d.targetId,!1).then(()=>{a.sharedClientState.clearQueryState(d.targetId),o&&__PRIVATE_remoteStoreUnlisten(a.remoteStore,d.targetId),__PRIVATE_removeAndCleanupTarget(a,d.targetId)}).catch(__PRIVATE_ignoreIfPrimaryLeaseLoss)):(__PRIVATE_removeAndCleanupTarget(a,d.targetId),await __PRIVATE_localStoreReleaseTarget(a.localStore,d.targetId,!0))}async function __PRIVATE_triggerRemoteStoreUnlisten(s,e){const o=__PRIVATE_debugCast(s),a=o.ru.get(e),d=o.iu.get(a.targetId);o.isPrimaryClient&&d.length===1&&(o.sharedClientState.removeLocalQueryTarget(a.targetId),__PRIVATE_remoteStoreUnlisten(o.remoteStore,a.targetId))}async function __PRIVATE_syncEngineWrite(s,e,o){const a=__PRIVATE_syncEngineEnsureWriteCallbacks(s);try{const d=await function(j,_e){const pt=__PRIVATE_debugCast(j),yt=Timestamp.now(),ct=_e.reduce((Ot,Lt)=>Ot.add(Lt.key),__PRIVATE_documentKeySet());let Ct,qt;return pt.persistence.runTransaction("Locally write mutations","readwrite",Ot=>{let Lt=__PRIVATE_mutableDocumentMap(),Qt=__PRIVATE_documentKeySet();return pt.Cs.getEntries(Ot,ct).next(ir=>{Lt=ir,Lt.forEach((er,tr)=>{tr.isValidDocument()||(Qt=Qt.add(er))})}).next(()=>pt.localDocuments.getOverlayedDocuments(Ot,Lt)).next(ir=>{Ct=ir;const er=[];for(const tr of _e){const sr=__PRIVATE_mutationExtractBaseValue(tr,Ct.get(tr.key).overlayedDocument);sr!=null&&er.push(new __PRIVATE_PatchMutation(tr.key,sr,__PRIVATE_extractFieldMask(sr.value.mapValue),Precondition.exists(!0)))}return pt.mutationQueue.addMutationBatch(Ot,yt,er,_e)}).next(ir=>{qt=ir;const er=ir.applyToLocalDocumentSet(Ct,Qt);return pt.documentOverlayCache.saveOverlays(Ot,ir.batchId,er)})}).then(()=>({batchId:qt.batchId,changes:__PRIVATE_convertOverlayedDocumentMapToDocumentMap(Ct)}))}(a.localStore,e);a.sharedClientState.addPendingMutation(d.batchId),function(j,_e,pt){let yt=j.uu[j.currentUser.toKey()];yt||(yt=new SortedMap(__PRIVATE_primitiveComparator)),yt=yt.insert(_e,pt),j.uu[j.currentUser.toKey()]=yt}(a,d.batchId,o),await __PRIVATE_syncEngineEmitNewSnapsAndNotifyLocalStore(a,d.changes),await __PRIVATE_fillWritePipeline(a.remoteStore)}catch(d){const c=__PRIVATE_wrapInUserErrorIfRecoverable(d,"Failed to persist write");o.reject(c)}}async function __PRIVATE_syncEngineApplyRemoteEvent(s,e){const o=__PRIVATE_debugCast(s);try{const a=await __PRIVATE_localStoreApplyRemoteEventToLocalCache(o.localStore,e);e.targetChanges.forEach((d,c)=>{const j=o._u.get(c);j&&(__PRIVATE_hardAssert(d.addedDocuments.size+d.modifiedDocuments.size+d.removedDocuments.size<=1,22616),d.addedDocuments.size>0?j.tu=!0:d.modifiedDocuments.size>0?__PRIVATE_hardAssert(j.tu,14607):d.removedDocuments.size>0&&(__PRIVATE_hardAssert(j.tu,42227),j.tu=!1))}),await __PRIVATE_syncEngineEmitNewSnapsAndNotifyLocalStore(o,a,e)}catch(a){await __PRIVATE_ignoreIfPrimaryLeaseLoss(a)}}function __PRIVATE_syncEngineApplyOnlineStateChange(s,e,o){const a=__PRIVATE_debugCast(s);if(a.isPrimaryClient&&o===0||!a.isPrimaryClient&&o===1){const d=[];a.ru.forEach((c,j)=>{const _e=j.view.ga(e);_e.snapshot&&d.push(_e.snapshot)}),function(j,_e){const pt=__PRIVATE_debugCast(j);pt.onlineState=_e;let yt=!1;pt.queries.forEach((ct,Ct)=>{for(const qt of Ct.Ra)qt.ga(_e)&&(yt=!0)}),yt&&__PRIVATE_raiseSnapshotsInSyncEvent(pt)}(a.eventManager,e),d.length&&a.nu.Q_(d),a.onlineState=e,a.isPrimaryClient&&a.sharedClientState.setOnlineState(e)}}async function __PRIVATE_syncEngineRejectListen(s,e,o){const a=__PRIVATE_debugCast(s);a.sharedClientState.updateQueryState(e,"rejected",o);const d=a._u.get(e),c=d&&d.key;if(c){let j=new SortedMap(DocumentKey.comparator);j=j.insert(c,MutableDocument.newNoDocument(c,SnapshotVersion.min()));const _e=__PRIVATE_documentKeySet().add(c),pt=new RemoteEvent(SnapshotVersion.min(),new Map,new SortedMap(__PRIVATE_primitiveComparator),j,_e);await __PRIVATE_syncEngineApplyRemoteEvent(a,pt),a.ou=a.ou.remove(c),a._u.delete(e),__PRIVATE_pumpEnqueuedLimboResolutions(a)}else await __PRIVATE_localStoreReleaseTarget(a.localStore,e,!1).then(()=>__PRIVATE_removeAndCleanupTarget(a,e,o)).catch(__PRIVATE_ignoreIfPrimaryLeaseLoss)}async function __PRIVATE_syncEngineApplySuccessfulWrite(s,e){const o=__PRIVATE_debugCast(s),a=e.batch.batchId;try{const d=await __PRIVATE_localStoreAcknowledgeBatch(o.localStore,e);__PRIVATE_processUserCallback(o,a,null),__PRIVATE_triggerPendingWritesCallbacks(o,a),o.sharedClientState.updateMutationState(a,"acknowledged"),await __PRIVATE_syncEngineEmitNewSnapsAndNotifyLocalStore(o,d)}catch(d){await __PRIVATE_ignoreIfPrimaryLeaseLoss(d)}}async function __PRIVATE_syncEngineRejectFailedWrite(s,e,o){const a=__PRIVATE_debugCast(s);try{const d=await function(j,_e){const pt=__PRIVATE_debugCast(j);return pt.persistence.runTransaction("Reject batch","readwrite-primary",yt=>{let ct;return pt.mutationQueue.lookupMutationBatch(yt,_e).next(Ct=>(__PRIVATE_hardAssert(Ct!==null,37113),ct=Ct.keys(),pt.mutationQueue.removeMutationBatch(yt,Ct))).next(()=>pt.mutationQueue.performConsistencyCheck(yt)).next(()=>pt.documentOverlayCache.removeOverlaysForBatchId(yt,ct,_e)).next(()=>pt.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(yt,ct)).next(()=>pt.localDocuments.getDocuments(yt,ct))})}(a.localStore,e);__PRIVATE_processUserCallback(a,e,o),__PRIVATE_triggerPendingWritesCallbacks(a,e),a.sharedClientState.updateMutationState(e,"rejected",o),await __PRIVATE_syncEngineEmitNewSnapsAndNotifyLocalStore(a,d)}catch(d){await __PRIVATE_ignoreIfPrimaryLeaseLoss(d)}}function __PRIVATE_triggerPendingWritesCallbacks(s,e){(s.cu.get(e)||[]).forEach(o=>{o.resolve()}),s.cu.delete(e)}function __PRIVATE_processUserCallback(s,e,o){const a=__PRIVATE_debugCast(s);let d=a.uu[a.currentUser.toKey()];if(d){const c=d.get(e);c&&(o?c.reject(o):c.resolve(),d=d.remove(e)),a.uu[a.currentUser.toKey()]=d}}function __PRIVATE_removeAndCleanupTarget(s,e,o=null){s.sharedClientState.removeLocalQueryTarget(e);for(const a of s.iu.get(e))s.ru.delete(a),o&&s.nu.Tu(a,o);s.iu.delete(e),s.isPrimaryClient&&s.au.Ur(e).forEach(a=>{s.au.containsKey(a)||__PRIVATE_removeLimboTarget(s,a)})}function __PRIVATE_removeLimboTarget(s,e){s.su.delete(e.path.canonicalString());const o=s.ou.get(e);o!==null&&(__PRIVATE_remoteStoreUnlisten(s.remoteStore,o),s.ou=s.ou.remove(e),s._u.delete(o),__PRIVATE_pumpEnqueuedLimboResolutions(s))}function __PRIVATE_updateTrackedLimbos(s,e,o){for(const a of o)a instanceof __PRIVATE_AddedLimboDocument?(s.au.addReference(a.key,e),__PRIVATE_trackLimboChange(s,a)):a instanceof __PRIVATE_RemovedLimboDocument?(__PRIVATE_logDebug(Yt,"Document no longer in limbo: "+a.key),s.au.removeReference(a.key,e),s.au.containsKey(a.key)||__PRIVATE_removeLimboTarget(s,a.key)):fail(19791,{Iu:a})}function __PRIVATE_trackLimboChange(s,e){const o=e.key,a=o.path.canonicalString();s.ou.get(o)||s.su.has(a)||(__PRIVATE_logDebug(Yt,"New document in limbo: "+o),s.su.add(a),__PRIVATE_pumpEnqueuedLimboResolutions(s))}function __PRIVATE_pumpEnqueuedLimboResolutions(s){for(;s.su.size>0&&s.ou.size<s.maxConcurrentLimboResolutions;){const e=s.su.values().next().value;s.su.delete(e);const o=new DocumentKey(ResourcePath.fromString(e)),a=s.lu.next();s._u.set(a,new LimboResolution(o)),s.ou=s.ou.insert(o,a),__PRIVATE_remoteStoreListen(s.remoteStore,new TargetData(__PRIVATE_queryToTarget(__PRIVATE_newQueryForPath(o.path)),a,"TargetPurposeLimboResolution",__PRIVATE_ListenSequence.le))}}async function __PRIVATE_syncEngineEmitNewSnapsAndNotifyLocalStore(s,e,o){const a=__PRIVATE_debugCast(s),d=[],c=[],j=[];a.ru.isEmpty()||(a.ru.forEach((_e,pt)=>{j.push(a.Pu(pt,e,o).then(yt=>{var ct;if((yt||o)&&a.isPrimaryClient){const Ct=yt?!yt.fromCache:(ct=o==null?void 0:o.targetChanges.get(pt.targetId))===null||ct===void 0?void 0:ct.current;a.sharedClientState.updateQueryState(pt.targetId,Ct?"current":"not-current")}if(yt){d.push(yt);const Ct=__PRIVATE_LocalViewChanges.Ps(pt.targetId,yt);c.push(Ct)}}))}),await Promise.all(j),a.nu.Q_(d),await async function(pt,yt){const ct=__PRIVATE_debugCast(pt);try{await ct.persistence.runTransaction("notifyLocalViewChanges","readwrite",Ct=>PersistencePromise.forEach(yt,qt=>PersistencePromise.forEach(qt.ls,Ot=>ct.persistence.referenceDelegate.addReference(Ct,qt.targetId,Ot)).next(()=>PersistencePromise.forEach(qt.hs,Ot=>ct.persistence.referenceDelegate.removeReference(Ct,qt.targetId,Ot)))))}catch(Ct){if(!__PRIVATE_isIndexedDbTransactionError(Ct))throw Ct;__PRIVATE_logDebug(Nt,"Failed to update sequence numbers: "+Ct)}for(const Ct of yt){const qt=Ct.targetId;if(!Ct.fromCache){const Ot=ct.Ss.get(qt),Lt=Ot.snapshotVersion,Qt=Ot.withLastLimboFreeSnapshotVersion(Lt);ct.Ss=ct.Ss.insert(qt,Qt)}}}(a.localStore,c))}async function __PRIVATE_syncEngineHandleCredentialChange(s,e){const o=__PRIVATE_debugCast(s);if(!o.currentUser.isEqual(e)){__PRIVATE_logDebug(Yt,"User change. New user:",e.toKey());const a=await __PRIVATE_localStoreHandleUserChange(o.localStore,e);o.currentUser=e,function(c,j){c.cu.forEach(_e=>{_e.forEach(pt=>{pt.reject(new FirestoreError(F.CANCELLED,j))})}),c.cu.clear()}(o,"'waitForPendingWrites' promise is rejected due to a user change."),o.sharedClientState.handleUserChange(e,a.removedBatchIds,a.addedBatchIds),await __PRIVATE_syncEngineEmitNewSnapsAndNotifyLocalStore(o,a.Ms)}}function __PRIVATE_syncEngineGetRemoteKeysForTarget(s,e){const o=__PRIVATE_debugCast(s),a=o._u.get(e);if(a&&a.tu)return __PRIVATE_documentKeySet().add(a.key);{let d=__PRIVATE_documentKeySet();const c=o.iu.get(e);if(!c)return d;for(const j of c){const _e=o.ru.get(j);d=d.unionWith(_e.view.Wa)}return d}}function __PRIVATE_ensureWatchCallbacks(s){const e=__PRIVATE_debugCast(s);return e.remoteStore.remoteSyncer.applyRemoteEvent=__PRIVATE_syncEngineApplyRemoteEvent.bind(null,e),e.remoteStore.remoteSyncer.getRemoteKeysForTarget=__PRIVATE_syncEngineGetRemoteKeysForTarget.bind(null,e),e.remoteStore.remoteSyncer.rejectListen=__PRIVATE_syncEngineRejectListen.bind(null,e),e.nu.Q_=__PRIVATE_eventManagerOnWatchChange.bind(null,e.eventManager),e.nu.Tu=__PRIVATE_eventManagerOnWatchError.bind(null,e.eventManager),e}function __PRIVATE_syncEngineEnsureWriteCallbacks(s){const e=__PRIVATE_debugCast(s);return e.remoteStore.remoteSyncer.applySuccessfulWrite=__PRIVATE_syncEngineApplySuccessfulWrite.bind(null,e),e.remoteStore.remoteSyncer.rejectFailedWrite=__PRIVATE_syncEngineRejectFailedWrite.bind(null,e),e}class __PRIVATE_MemoryOfflineComponentProvider{constructor(){this.kind="memory",this.synchronizeTabs=!1}async initialize(e){this.serializer=__PRIVATE_newSerializer(e.databaseInfo.databaseId),this.sharedClientState=this.Au(e),this.persistence=this.Ru(e),await this.persistence.start(),this.localStore=this.Vu(e),this.gcScheduler=this.mu(e,this.localStore),this.indexBackfillerScheduler=this.fu(e,this.localStore)}mu(e,o){return null}fu(e,o){return null}Vu(e){return __PRIVATE_newLocalStore(this.persistence,new __PRIVATE_QueryEngine,e.initialUser,this.serializer)}Ru(e){return new __PRIVATE_MemoryPersistence(__PRIVATE_MemoryEagerDelegate.Ei,this.serializer)}Au(e){return new __PRIVATE_MemorySharedClientState}async terminate(){var e,o;(e=this.gcScheduler)===null||e===void 0||e.stop(),(o=this.indexBackfillerScheduler)===null||o===void 0||o.stop(),this.sharedClientState.shutdown(),await this.persistence.shutdown()}}__PRIVATE_MemoryOfflineComponentProvider.provider={build:()=>new __PRIVATE_MemoryOfflineComponentProvider};class __PRIVATE_LruGcMemoryOfflineComponentProvider extends __PRIVATE_MemoryOfflineComponentProvider{constructor(e){super(),this.cacheSizeBytes=e}mu(e,o){__PRIVATE_hardAssert(this.persistence.referenceDelegate instanceof __PRIVATE_MemoryLruDelegate,46915);const a=this.persistence.referenceDelegate.garbageCollector;return new __PRIVATE_LruScheduler(a,e.asyncQueue,o)}Ru(e){const o=this.cacheSizeBytes!==void 0?LruParams.withCacheSize(this.cacheSizeBytes):LruParams.DEFAULT;return new __PRIVATE_MemoryPersistence(a=>__PRIVATE_MemoryLruDelegate.Ei(a,o),this.serializer)}}class OnlineComponentProvider{async initialize(e,o){this.localStore||(this.localStore=e.localStore,this.sharedClientState=e.sharedClientState,this.datastore=this.createDatastore(o),this.remoteStore=this.createRemoteStore(o),this.eventManager=this.createEventManager(o),this.syncEngine=this.createSyncEngine(o,!e.synchronizeTabs),this.sharedClientState.onlineStateHandler=a=>__PRIVATE_syncEngineApplyOnlineStateChange(this.syncEngine,a,1),this.remoteStore.remoteSyncer.handleCredentialChange=__PRIVATE_syncEngineHandleCredentialChange.bind(null,this.syncEngine),await __PRIVATE_remoteStoreApplyPrimaryState(this.remoteStore,this.syncEngine.isPrimaryClient))}createEventManager(e){return function(){return new __PRIVATE_EventManagerImpl}()}createDatastore(e){const o=__PRIVATE_newSerializer(e.databaseInfo.databaseId),a=function(c){return new __PRIVATE_WebChannelConnection(c)}(e.databaseInfo);return function(c,j,_e,pt){return new __PRIVATE_DatastoreImpl(c,j,_e,pt)}(e.authCredentials,e.appCheckCredentials,a,o)}createRemoteStore(e){return function(a,d,c,j,_e){return new __PRIVATE_RemoteStoreImpl(a,d,c,j,_e)}(this.localStore,this.datastore,e.asyncQueue,o=>__PRIVATE_syncEngineApplyOnlineStateChange(this.syncEngine,o,0),function(){return __PRIVATE_BrowserConnectivityMonitor.C()?new __PRIVATE_BrowserConnectivityMonitor:new __PRIVATE_NoopConnectivityMonitor}())}createSyncEngine(e,o){return function(d,c,j,_e,pt,yt,ct){const Ct=new __PRIVATE_SyncEngineImpl(d,c,j,_e,pt,yt);return ct&&(Ct.hu=!0),Ct}(this.localStore,this.remoteStore,this.eventManager,this.sharedClientState,e.initialUser,e.maxConcurrentLimboResolutions,o)}async terminate(){var e,o;await async function(d){const c=__PRIVATE_debugCast(d);__PRIVATE_logDebug(jt,"RemoteStore shutting down."),c.aa.add(5),await __PRIVATE_disableNetworkInternal(c),c.ca.shutdown(),c.la.set("Unknown")}(this.remoteStore),(e=this.datastore)===null||e===void 0||e.terminate(),(o=this.eventManager)===null||o===void 0||o.terminate()}}OnlineComponentProvider.provider={build:()=>new OnlineComponentProvider};/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 *//**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class __PRIVATE_AsyncObserver{constructor(e){this.observer=e,this.muted=!1}next(e){this.muted||this.observer.next&&this.pu(this.observer.next,e)}error(e){this.muted||(this.observer.error?this.pu(this.observer.error,e):__PRIVATE_logError("Uncaught Error in snapshot listener:",e.toString()))}yu(){this.muted=!0}pu(e,o){setTimeout(()=>{this.muted||e(o)},0)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Zt="FirestoreClient";class FirestoreClient{constructor(e,o,a,d,c){this.authCredentials=e,this.appCheckCredentials=o,this.asyncQueue=a,this.databaseInfo=d,this.user=User.UNAUTHENTICATED,this.clientId=__PRIVATE_AutoId.newId(),this.authCredentialListener=()=>Promise.resolve(),this.appCheckCredentialListener=()=>Promise.resolve(),this._uninitializedComponentsProvider=c,this.authCredentials.start(a,async j=>{__PRIVATE_logDebug(Zt,"Received user=",j.uid),await this.authCredentialListener(j),this.user=j}),this.appCheckCredentials.start(a,j=>(__PRIVATE_logDebug(Zt,"Received new app check token=",j),this.appCheckCredentialListener(j,this.user)))}get configuration(){return{asyncQueue:this.asyncQueue,databaseInfo:this.databaseInfo,clientId:this.clientId,authCredentials:this.authCredentials,appCheckCredentials:this.appCheckCredentials,initialUser:this.user,maxConcurrentLimboResolutions:100}}setCredentialChangeListener(e){this.authCredentialListener=e}setAppCheckTokenChangeListener(e){this.appCheckCredentialListener=e}terminate(){this.asyncQueue.enterRestrictedMode();const e=new __PRIVATE_Deferred;return this.asyncQueue.enqueueAndForgetEvenWhileRestricted(async()=>{try{this._onlineComponents&&await this._onlineComponents.terminate(),this._offlineComponents&&await this._offlineComponents.terminate(),this.authCredentials.shutdown(),this.appCheckCredentials.shutdown(),e.resolve()}catch(o){const a=__PRIVATE_wrapInUserErrorIfRecoverable(o,"Failed to shutdown persistence");e.reject(a)}}),e.promise}}async function __PRIVATE_setOfflineComponentProvider(s,e){s.asyncQueue.verifyOperationInProgress(),__PRIVATE_logDebug(Zt,"Initializing OfflineComponentProvider");const o=s.configuration;await e.initialize(o);let a=o.initialUser;s.setCredentialChangeListener(async d=>{a.isEqual(d)||(await __PRIVATE_localStoreHandleUserChange(e.localStore,d),a=d)}),e.persistence.setDatabaseDeletedListener(()=>s.terminate()),s._offlineComponents=e}async function __PRIVATE_setOnlineComponentProvider(s,e){s.asyncQueue.verifyOperationInProgress();const o=await __PRIVATE_ensureOfflineComponents(s);__PRIVATE_logDebug(Zt,"Initializing OnlineComponentProvider"),await e.initialize(o,s.configuration),s.setCredentialChangeListener(a=>__PRIVATE_remoteStoreHandleCredentialChange(e.remoteStore,a)),s.setAppCheckTokenChangeListener((a,d)=>__PRIVATE_remoteStoreHandleCredentialChange(e.remoteStore,d)),s._onlineComponents=e}async function __PRIVATE_ensureOfflineComponents(s){if(!s._offlineComponents)if(s._uninitializedComponentsProvider){__PRIVATE_logDebug(Zt,"Using user provided OfflineComponentProvider");try{await __PRIVATE_setOfflineComponentProvider(s,s._uninitializedComponentsProvider._offline)}catch(e){const o=e;if(!function(d){return d.name==="FirebaseError"?d.code===F.FAILED_PRECONDITION||d.code===F.UNIMPLEMENTED:!(typeof DOMException<"u"&&d instanceof DOMException)||d.code===22||d.code===20||d.code===11}(o))throw o;__PRIVATE_logWarn("Error using user provided cache. Falling back to memory cache: "+o),await __PRIVATE_setOfflineComponentProvider(s,new __PRIVATE_MemoryOfflineComponentProvider)}}else __PRIVATE_logDebug(Zt,"Using default OfflineComponentProvider"),await __PRIVATE_setOfflineComponentProvider(s,new __PRIVATE_LruGcMemoryOfflineComponentProvider(void 0));return s._offlineComponents}async function __PRIVATE_ensureOnlineComponents(s){return s._onlineComponents||(s._uninitializedComponentsProvider?(__PRIVATE_logDebug(Zt,"Using user provided OnlineComponentProvider"),await __PRIVATE_setOnlineComponentProvider(s,s._uninitializedComponentsProvider._online)):(__PRIVATE_logDebug(Zt,"Using default OnlineComponentProvider"),await __PRIVATE_setOnlineComponentProvider(s,new OnlineComponentProvider))),s._onlineComponents}function __PRIVATE_getSyncEngine(s){return __PRIVATE_ensureOnlineComponents(s).then(e=>e.syncEngine)}async function __PRIVATE_getEventManager(s){const e=await __PRIVATE_ensureOnlineComponents(s),o=e.eventManager;return o.onListen=__PRIVATE_syncEngineListen.bind(null,e.syncEngine),o.onUnlisten=__PRIVATE_syncEngineUnlisten.bind(null,e.syncEngine),o.onFirstRemoteStoreListen=__PRIVATE_triggerRemoteStoreListen.bind(null,e.syncEngine),o.onLastRemoteStoreUnlisten=__PRIVATE_triggerRemoteStoreUnlisten.bind(null,e.syncEngine),o}function __PRIVATE_firestoreClientGetDocumentViaSnapshotListener(s,e,o={}){const a=new __PRIVATE_Deferred;return s.asyncQueue.enqueueAndForget(async()=>function(c,j,_e,pt,yt){const ct=new __PRIVATE_AsyncObserver({next:qt=>{ct.yu(),j.enqueueAndForget(()=>__PRIVATE_eventManagerUnlisten(c,Ct));const Ot=qt.docs.has(_e);!Ot&&qt.fromCache?yt.reject(new FirestoreError(F.UNAVAILABLE,"Failed to get document because the client is offline.")):Ot&&qt.fromCache&&pt&&pt.source==="server"?yt.reject(new FirestoreError(F.UNAVAILABLE,'Failed to get document from server. (However, this document does exist in the local cache. Run again without setting source to "server" to retrieve the cached document.)')):yt.resolve(qt)},error:qt=>yt.reject(qt)}),Ct=new __PRIVATE_QueryListener(__PRIVATE_newQueryForPath(_e.path),ct,{includeMetadataChanges:!0,Fa:!0});return __PRIVATE_eventManagerListen(c,Ct)}(await __PRIVATE_getEventManager(s),s.asyncQueue,e,o,a)),a.promise}function __PRIVATE_firestoreClientGetDocumentsViaSnapshotListener(s,e,o={}){const a=new __PRIVATE_Deferred;return s.asyncQueue.enqueueAndForget(async()=>function(c,j,_e,pt,yt){const ct=new __PRIVATE_AsyncObserver({next:qt=>{ct.yu(),j.enqueueAndForget(()=>__PRIVATE_eventManagerUnlisten(c,Ct)),qt.fromCache&&pt.source==="server"?yt.reject(new FirestoreError(F.UNAVAILABLE,'Failed to get documents from server. (However, these documents may exist in the local cache. Run again without setting source to "server" to retrieve the cached documents.)')):yt.resolve(qt)},error:qt=>yt.reject(qt)}),Ct=new __PRIVATE_QueryListener(_e,ct,{includeMetadataChanges:!0,Fa:!0});return __PRIVATE_eventManagerListen(c,Ct)}(await __PRIVATE_getEventManager(s),s.asyncQueue,e,o,a)),a.promise}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function __PRIVATE_cloneLongPollingOptions(s){const e={};return s.timeoutSeconds!==void 0&&(e.timeoutSeconds=s.timeoutSeconds),e}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Xt=new Map;/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function __PRIVATE_validateNonEmptyArgument(s,e,o){if(!o)throw new FirestoreError(F.INVALID_ARGUMENT,`Function ${s}() cannot be called with an empty ${e}.`)}function __PRIVATE_validateIsNotUsedTogether(s,e,o,a){if(e===!0&&a===!0)throw new FirestoreError(F.INVALID_ARGUMENT,`${s} and ${o} cannot be used together.`)}function __PRIVATE_validateDocumentPath(s){if(!DocumentKey.isDocumentKey(s))throw new FirestoreError(F.INVALID_ARGUMENT,`Invalid document reference. Document references must have an even number of segments, but ${s} has ${s.length}.`)}function __PRIVATE_validateCollectionPath(s){if(DocumentKey.isDocumentKey(s))throw new FirestoreError(F.INVALID_ARGUMENT,`Invalid collection reference. Collection references must have an odd number of segments, but ${s} has ${s.length}.`)}function __PRIVATE_valueDescription(s){if(s===void 0)return"undefined";if(s===null)return"null";if(typeof s=="string")return s.length>20&&(s=`${s.substring(0,20)}...`),JSON.stringify(s);if(typeof s=="number"||typeof s=="boolean")return""+s;if(typeof s=="object"){if(s instanceof Array)return"an array";{const e=function(a){return a.constructor?a.constructor.name:null}(s);return e?`a custom ${e} object`:"an object"}}return typeof s=="function"?"a function":fail(12329,{type:typeof s})}function __PRIVATE_cast(s,e){if("_delegate"in s&&(s=s._delegate),!(s instanceof e)){if(e.name===s.constructor.name)throw new FirestoreError(F.INVALID_ARGUMENT,"Type does not match the expected instance. Did you pass a reference from a different Firestore SDK?");{const o=__PRIVATE_valueDescription(s);throw new FirestoreError(F.INVALID_ARGUMENT,`Expected type '${e.name}', but it was: ${o}`)}}return s}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const en="firestore.googleapis.com",tn=!0;class FirestoreSettingsImpl{constructor(e){var o,a;if(e.host===void 0){if(e.ssl!==void 0)throw new FirestoreError(F.INVALID_ARGUMENT,"Can't provide ssl option if host option is not set");this.host=en,this.ssl=tn}else this.host=e.host,this.ssl=(o=e.ssl)!==null&&o!==void 0?o:tn;if(this.credentials=e.credentials,this.ignoreUndefinedProperties=!!e.ignoreUndefinedProperties,this.localCache=e.localCache,e.cacheSizeBytes===void 0)this.cacheSizeBytes=St;else{if(e.cacheSizeBytes!==-1&&e.cacheSizeBytes<vt)throw new FirestoreError(F.INVALID_ARGUMENT,"cacheSizeBytes must be at least 1048576");this.cacheSizeBytes=e.cacheSizeBytes}__PRIVATE_validateIsNotUsedTogether("experimentalForceLongPolling",e.experimentalForceLongPolling,"experimentalAutoDetectLongPolling",e.experimentalAutoDetectLongPolling),this.experimentalForceLongPolling=!!e.experimentalForceLongPolling,this.experimentalForceLongPolling?this.experimentalAutoDetectLongPolling=!1:e.experimentalAutoDetectLongPolling===void 0?this.experimentalAutoDetectLongPolling=!0:this.experimentalAutoDetectLongPolling=!!e.experimentalAutoDetectLongPolling,this.experimentalLongPollingOptions=__PRIVATE_cloneLongPollingOptions((a=e.experimentalLongPollingOptions)!==null&&a!==void 0?a:{}),function(c){if(c.timeoutSeconds!==void 0){if(isNaN(c.timeoutSeconds))throw new FirestoreError(F.INVALID_ARGUMENT,`invalid long polling timeout: ${c.timeoutSeconds} (must not be NaN)`);if(c.timeoutSeconds<5)throw new FirestoreError(F.INVALID_ARGUMENT,`invalid long polling timeout: ${c.timeoutSeconds} (minimum allowed value is 5)`);if(c.timeoutSeconds>30)throw new FirestoreError(F.INVALID_ARGUMENT,`invalid long polling timeout: ${c.timeoutSeconds} (maximum allowed value is 30)`)}}(this.experimentalLongPollingOptions),this.useFetchStreams=!!e.useFetchStreams}isEqual(e){return this.host===e.host&&this.ssl===e.ssl&&this.credentials===e.credentials&&this.cacheSizeBytes===e.cacheSizeBytes&&this.experimentalForceLongPolling===e.experimentalForceLongPolling&&this.experimentalAutoDetectLongPolling===e.experimentalAutoDetectLongPolling&&function(a,d){return a.timeoutSeconds===d.timeoutSeconds}(this.experimentalLongPollingOptions,e.experimentalLongPollingOptions)&&this.ignoreUndefinedProperties===e.ignoreUndefinedProperties&&this.useFetchStreams===e.useFetchStreams}}class Firestore$1{constructor(e,o,a,d){this._authCredentials=e,this._appCheckCredentials=o,this._databaseId=a,this._app=d,this.type="firestore-lite",this._persistenceKey="(lite)",this._settings=new FirestoreSettingsImpl({}),this._settingsFrozen=!1,this._emulatorOptions={},this._terminateTask="notTerminated"}get app(){if(!this._app)throw new FirestoreError(F.FAILED_PRECONDITION,"Firestore was not initialized using the Firebase SDK. 'app' is not available");return this._app}get _initialized(){return this._settingsFrozen}get _terminated(){return this._terminateTask!=="notTerminated"}_setSettings(e){if(this._settingsFrozen)throw new FirestoreError(F.FAILED_PRECONDITION,"Firestore has already been started and its settings can no longer be changed. You can only modify settings before calling any other methods on a Firestore object.");this._settings=new FirestoreSettingsImpl(e),this._emulatorOptions=e.emulatorOptions||{},e.credentials!==void 0&&(this._authCredentials=function(a){if(!a)return new __PRIVATE_EmptyAuthCredentialsProvider;switch(a.type){case"firstParty":return new __PRIVATE_FirstPartyAuthCredentialsProvider(a.sessionIndex||"0",a.iamToken||null,a.authTokenFactory||null);case"provider":return a.client;default:throw new FirestoreError(F.INVALID_ARGUMENT,"makeAuthCredentialsProvider failed due to invalid credential type")}}(e.credentials))}_getSettings(){return this._settings}_getEmulatorOptions(){return this._emulatorOptions}_freezeSettings(){return this._settingsFrozen=!0,this._settings}_delete(){return this._terminateTask==="notTerminated"&&(this._terminateTask=this._terminate()),this._terminateTask}async _restart(){this._terminateTask==="notTerminated"?await this._terminate():this._terminateTask="notTerminated"}toJSON(){return{app:this._app,databaseId:this._databaseId,settings:this._settings}}_terminate(){return function(o){const a=Xt.get(o);a&&(__PRIVATE_logDebug("ComponentProvider","Removing Datastore"),Xt.delete(o),a.terminate())}(this),Promise.resolve()}}function connectFirestoreEmulator(s,e,o,a={}){var d;const c=(s=__PRIVATE_cast(s,Firestore$1))._getSettings(),j=Object.assign(Object.assign({},c),{emulatorOptions:s._getEmulatorOptions()}),_e=`${e}:${o}`;c.host!==en&&c.host!==_e&&__PRIVATE_logWarn("Host has been set in both settings() and connectFirestoreEmulator(), emulator host will be used.");const pt=Object.assign(Object.assign({},c),{host:_e,ssl:!1,emulatorOptions:a});if(!deepEqual(pt,j)&&(s._setSettings(pt),a.mockUserToken)){let yt,ct;if(typeof a.mockUserToken=="string")yt=a.mockUserToken,ct=User.MOCK_USER;else{yt=createMockUserToken(a.mockUserToken,(d=s._app)===null||d===void 0?void 0:d.options.projectId);const Ct=a.mockUserToken.sub||a.mockUserToken.user_id;if(!Ct)throw new FirestoreError(F.INVALID_ARGUMENT,"mockUserToken must contain 'sub' or 'user_id' field!");ct=new User(Ct)}s._authCredentials=new __PRIVATE_EmulatorAuthCredentialsProvider(new __PRIVATE_OAuthToken(yt,ct))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Query{constructor(e,o,a){this.converter=o,this._query=a,this.type="query",this.firestore=e}withConverter(e){return new Query(this.firestore,e,this._query)}}class DocumentReference{constructor(e,o,a){this.converter=o,this._key=a,this.type="document",this.firestore=e}get _path(){return this._key.path}get id(){return this._key.path.lastSegment()}get path(){return this._key.path.canonicalString()}get parent(){return new CollectionReference(this.firestore,this.converter,this._key.path.popLast())}withConverter(e){return new DocumentReference(this.firestore,e,this._key)}}class CollectionReference extends Query{constructor(e,o,a){super(e,o,__PRIVATE_newQueryForPath(a)),this._path=a,this.type="collection"}get id(){return this._query.path.lastSegment()}get path(){return this._query.path.canonicalString()}get parent(){const e=this._path.popLast();return e.isEmpty()?null:new DocumentReference(this.firestore,null,new DocumentKey(e))}withConverter(e){return new CollectionReference(this.firestore,e,this._path)}}function collection(s,e,...o){if(s=getModularInstance(s),__PRIVATE_validateNonEmptyArgument("collection","path",e),s instanceof Firestore$1){const a=ResourcePath.fromString(e,...o);return __PRIVATE_validateCollectionPath(a),new CollectionReference(s,null,a)}{if(!(s instanceof DocumentReference||s instanceof CollectionReference))throw new FirestoreError(F.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");const a=s._path.child(ResourcePath.fromString(e,...o));return __PRIVATE_validateCollectionPath(a),new CollectionReference(s.firestore,null,a)}}function doc(s,e,...o){if(s=getModularInstance(s),arguments.length===1&&(e=__PRIVATE_AutoId.newId()),__PRIVATE_validateNonEmptyArgument("doc","path",e),s instanceof Firestore$1){const a=ResourcePath.fromString(e,...o);return __PRIVATE_validateDocumentPath(a),new DocumentReference(s,null,new DocumentKey(a))}{if(!(s instanceof DocumentReference||s instanceof CollectionReference))throw new FirestoreError(F.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");const a=s._path.child(ResourcePath.fromString(e,...o));return __PRIVATE_validateDocumentPath(a),new DocumentReference(s.firestore,s instanceof CollectionReference?s.converter:null,new DocumentKey(a))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const nn="AsyncQueue";class __PRIVATE_AsyncQueueImpl{constructor(e=Promise.resolve()){this.Qu=[],this.$u=!1,this.Uu=[],this.Ku=null,this.Wu=!1,this.Gu=!1,this.zu=[],this.y_=new __PRIVATE_ExponentialBackoff(this,"async_queue_retry"),this.ju=()=>{const a=getDocument();a&&__PRIVATE_logDebug(nn,"Visibility state changed to "+a.visibilityState),this.y_.A_()},this.Hu=e;const o=getDocument();o&&typeof o.addEventListener=="function"&&o.addEventListener("visibilitychange",this.ju)}get isShuttingDown(){return this.$u}enqueueAndForget(e){this.enqueue(e)}enqueueAndForgetEvenWhileRestricted(e){this.Ju(),this.Yu(e)}enterRestrictedMode(e){if(!this.$u){this.$u=!0,this.Gu=e||!1;const o=getDocument();o&&typeof o.removeEventListener=="function"&&o.removeEventListener("visibilitychange",this.ju)}}enqueue(e){if(this.Ju(),this.$u)return new Promise(()=>{});const o=new __PRIVATE_Deferred;return this.Yu(()=>this.$u&&this.Gu?Promise.resolve():(e().then(o.resolve,o.reject),o.promise)).then(()=>o.promise)}enqueueRetryable(e){this.enqueueAndForget(()=>(this.Qu.push(e),this.Zu()))}async Zu(){if(this.Qu.length!==0){try{await this.Qu[0](),this.Qu.shift(),this.y_.reset()}catch(e){if(!__PRIVATE_isIndexedDbTransactionError(e))throw e;__PRIVATE_logDebug(nn,"Operation failed with retryable error: "+e)}this.Qu.length>0&&this.y_.E_(()=>this.Zu())}}Yu(e){const o=this.Hu.then(()=>(this.Wu=!0,e().catch(a=>{throw this.Ku=a,this.Wu=!1,__PRIVATE_logError("INTERNAL UNHANDLED ERROR: ",__PRIVATE_getMessageOrStack(a)),a}).then(a=>(this.Wu=!1,a))));return this.Hu=o,o}enqueueAfterDelay(e,o,a){this.Ju(),this.zu.indexOf(e)>-1&&(o=0);const d=DelayedOperation.createAndSchedule(this,e,o,a,c=>this.Xu(c));return this.Uu.push(d),d}Ju(){this.Ku&&fail(47125,{ec:__PRIVATE_getMessageOrStack(this.Ku)})}verifyOperationInProgress(){}async tc(){let e;do e=this.Hu,await e;while(e!==this.Hu)}nc(e){for(const o of this.Uu)if(o.timerId===e)return!0;return!1}rc(e){return this.tc().then(()=>{this.Uu.sort((o,a)=>o.targetTimeMs-a.targetTimeMs);for(const o of this.Uu)if(o.skipDelay(),e!=="all"&&o.timerId===e)break;return this.tc()})}sc(e){this.zu.push(e)}Xu(e){const o=this.Uu.indexOf(e);this.Uu.splice(o,1)}}function __PRIVATE_getMessageOrStack(s){let e=s.message||"";return s.stack&&(e=s.stack.includes(s.message)?s.stack:s.message+`
`+s.stack),e}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function __PRIVATE_isPartialObserver(s){return function(o,a){if(typeof o!="object"||o===null)return!1;const d=o;for(const c of a)if(c in d&&typeof d[c]=="function")return!0;return!1}(s,["next","error","complete"])}class Firestore extends Firestore$1{constructor(e,o,a,d){super(e,o,a,d),this.type="firestore",this._queue=new __PRIVATE_AsyncQueueImpl,this._persistenceKey=(d==null?void 0:d.name)||"[DEFAULT]"}async _terminate(){if(this._firestoreClient){const e=this._firestoreClient.terminate();this._queue=new __PRIVATE_AsyncQueueImpl(e),this._firestoreClient=void 0,await e}}}function getFirestore(s,e){const o=typeof s=="object"?s:getApp(),a=typeof s=="string"?s:it,d=_getProvider(o,"firestore").getImmediate({identifier:a});if(!d._initialized){const c=getDefaultEmulatorHostnameAndPort("firestore");c&&connectFirestoreEmulator(d,...c)}return d}function ensureFirestoreConfigured(s){if(s._terminated)throw new FirestoreError(F.FAILED_PRECONDITION,"The client has already been terminated.");return s._firestoreClient||__PRIVATE_configureFirestore(s),s._firestoreClient}function __PRIVATE_configureFirestore(s){var e,o,a;const d=s._freezeSettings(),c=function(_e,pt,yt,ct){return new DatabaseInfo(_e,pt,yt,ct.host,ct.ssl,ct.experimentalForceLongPolling,ct.experimentalAutoDetectLongPolling,__PRIVATE_cloneLongPollingOptions(ct.experimentalLongPollingOptions),ct.useFetchStreams)}(s._databaseId,((e=s._app)===null||e===void 0?void 0:e.options.appId)||"",s._persistenceKey,d);s._componentsProvider||!((o=d.localCache)===null||o===void 0)&&o._offlineComponentProvider&&(!((a=d.localCache)===null||a===void 0)&&a._onlineComponentProvider)&&(s._componentsProvider={_offline:d.localCache._offlineComponentProvider,_online:d.localCache._onlineComponentProvider}),s._firestoreClient=new FirestoreClient(s._authCredentials,s._appCheckCredentials,s._queue,c,s._componentsProvider&&function(_e){const pt=_e==null?void 0:_e._online.build();return{_offline:_e==null?void 0:_e._offline.build(pt),_online:pt}}(s._componentsProvider))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Bytes{constructor(e){this._byteString=e}static fromBase64String(e){try{return new Bytes(ByteString.fromBase64String(e))}catch(o){throw new FirestoreError(F.INVALID_ARGUMENT,"Failed to construct data from Base64 string: "+o)}}static fromUint8Array(e){return new Bytes(ByteString.fromUint8Array(e))}toBase64(){return this._byteString.toBase64()}toUint8Array(){return this._byteString.toUint8Array()}toString(){return"Bytes(base64: "+this.toBase64()+")"}isEqual(e){return this._byteString.isEqual(e._byteString)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class FieldPath{constructor(...e){for(let o=0;o<e.length;++o)if(e[o].length===0)throw new FirestoreError(F.INVALID_ARGUMENT,"Invalid field name at argument $(i + 1). Field names must not be empty.");this._internalPath=new FieldPath$1(e)}isEqual(e){return this._internalPath.isEqual(e._internalPath)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class FieldValue{constructor(e){this._methodName=e}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class GeoPoint{constructor(e,o){if(!isFinite(e)||e<-90||e>90)throw new FirestoreError(F.INVALID_ARGUMENT,"Latitude must be a number between -90 and 90, but was: "+e);if(!isFinite(o)||o<-180||o>180)throw new FirestoreError(F.INVALID_ARGUMENT,"Longitude must be a number between -180 and 180, but was: "+o);this._lat=e,this._long=o}get latitude(){return this._lat}get longitude(){return this._long}isEqual(e){return this._lat===e._lat&&this._long===e._long}toJSON(){return{latitude:this._lat,longitude:this._long}}_compareTo(e){return __PRIVATE_primitiveComparator(this._lat,e._lat)||__PRIVATE_primitiveComparator(this._long,e._long)}}/**
 * @license
 * Copyright 2024 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class VectorValue{constructor(e){this._values=(e||[]).map(o=>o)}toArray(){return this._values.map(e=>e)}isEqual(e){return function(a,d){if(a.length!==d.length)return!1;for(let c=0;c<a.length;++c)if(a[c]!==d[c])return!1;return!0}(this._values,e._values)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const sn=/^__.*__$/;class ParsedSetData{constructor(e,o,a){this.data=e,this.fieldMask=o,this.fieldTransforms=a}toMutation(e,o){return this.fieldMask!==null?new __PRIVATE_PatchMutation(e,this.data,this.fieldMask,o,this.fieldTransforms):new __PRIVATE_SetMutation(e,this.data,o,this.fieldTransforms)}}class ParsedUpdateData{constructor(e,o,a){this.data=e,this.fieldMask=o,this.fieldTransforms=a}toMutation(e,o){return new __PRIVATE_PatchMutation(e,this.data,this.fieldMask,o,this.fieldTransforms)}}function __PRIVATE_isWrite(s){switch(s){case 0:case 2:case 1:return!0;case 3:case 4:return!1;default:throw fail(40011,{oc:s})}}class __PRIVATE_ParseContextImpl{constructor(e,o,a,d,c,j){this.settings=e,this.databaseId=o,this.serializer=a,this.ignoreUndefinedProperties=d,c===void 0&&this._c(),this.fieldTransforms=c||[],this.fieldMask=j||[]}get path(){return this.settings.path}get oc(){return this.settings.oc}ac(e){return new __PRIVATE_ParseContextImpl(Object.assign(Object.assign({},this.settings),e),this.databaseId,this.serializer,this.ignoreUndefinedProperties,this.fieldTransforms,this.fieldMask)}uc(e){var o;const a=(o=this.path)===null||o===void 0?void 0:o.child(e),d=this.ac({path:a,cc:!1});return d.lc(e),d}hc(e){var o;const a=(o=this.path)===null||o===void 0?void 0:o.child(e),d=this.ac({path:a,cc:!1});return d._c(),d}Pc(e){return this.ac({path:void 0,cc:!0})}Tc(e){return __PRIVATE_createError(e,this.settings.methodName,this.settings.Ic||!1,this.path,this.settings.Ec)}contains(e){return this.fieldMask.find(o=>e.isPrefixOf(o))!==void 0||this.fieldTransforms.find(o=>e.isPrefixOf(o.field))!==void 0}_c(){if(this.path)for(let e=0;e<this.path.length;e++)this.lc(this.path.get(e))}lc(e){if(e.length===0)throw this.Tc("Document fields must not be empty");if(__PRIVATE_isWrite(this.oc)&&sn.test(e))throw this.Tc('Document fields cannot begin and end with "__"')}}class __PRIVATE_UserDataReader{constructor(e,o,a){this.databaseId=e,this.ignoreUndefinedProperties=o,this.serializer=a||__PRIVATE_newSerializer(e)}dc(e,o,a,d=!1){return new __PRIVATE_ParseContextImpl({oc:e,methodName:o,Ec:a,path:FieldPath$1.emptyPath(),cc:!1,Ic:d},this.databaseId,this.serializer,this.ignoreUndefinedProperties)}}function __PRIVATE_newUserDataReader(s){const e=s._freezeSettings(),o=__PRIVATE_newSerializer(s._databaseId);return new __PRIVATE_UserDataReader(s._databaseId,!!e.ignoreUndefinedProperties,o)}function __PRIVATE_parseSetData(s,e,o,a,d,c={}){const j=s.dc(c.merge||c.mergeFields?2:0,e,o,d);__PRIVATE_validatePlainObject("Data must be an object, but it was:",j,a);const _e=__PRIVATE_parseObject(a,j);let pt,yt;if(c.merge)pt=new FieldMask(j.fieldMask),yt=j.fieldTransforms;else if(c.mergeFields){const ct=[];for(const Ct of c.mergeFields){const qt=__PRIVATE_fieldPathFromArgument$1(e,Ct,o);if(!j.contains(qt))throw new FirestoreError(F.INVALID_ARGUMENT,`Field '${qt}' is specified in your field mask but missing from your input data.`);__PRIVATE_fieldMaskContains(ct,qt)||ct.push(qt)}pt=new FieldMask(ct),yt=j.fieldTransforms.filter(Ct=>pt.covers(Ct.field))}else pt=null,yt=j.fieldTransforms;return new ParsedSetData(new ObjectValue(_e),pt,yt)}class __PRIVATE_DeleteFieldValueImpl extends FieldValue{_toFieldTransform(e){if(e.oc!==2)throw e.oc===1?e.Tc(`${this._methodName}() can only appear at the top level of your update data`):e.Tc(`${this._methodName}() cannot be used with set() unless you pass {merge:true}`);return e.fieldMask.push(e.path),null}isEqual(e){return e instanceof __PRIVATE_DeleteFieldValueImpl}}class __PRIVATE_NumericIncrementFieldValueImpl extends FieldValue{constructor(e,o){super(e),this.Rc=o}_toFieldTransform(e){const o=new __PRIVATE_NumericIncrementTransformOperation(e.serializer,toNumber(e.serializer,this.Rc));return new FieldTransform(e.path,o)}isEqual(e){return e instanceof __PRIVATE_NumericIncrementFieldValueImpl&&this.Rc===e.Rc}}function __PRIVATE_parseUpdateData(s,e,o,a){const d=s.dc(1,e,o);__PRIVATE_validatePlainObject("Data must be an object, but it was:",d,a);const c=[],j=ObjectValue.empty();forEach$1(a,(pt,yt)=>{const ct=__PRIVATE_fieldPathFromDotSeparatedString(e,pt,o);yt=getModularInstance(yt);const Ct=d.hc(ct);if(yt instanceof __PRIVATE_DeleteFieldValueImpl)c.push(ct);else{const qt=__PRIVATE_parseData(yt,Ct);qt!=null&&(c.push(ct),j.set(ct,qt))}});const _e=new FieldMask(c);return new ParsedUpdateData(j,_e,d.fieldTransforms)}function __PRIVATE_parseUpdateVarargs(s,e,o,a,d,c){const j=s.dc(1,e,o),_e=[__PRIVATE_fieldPathFromArgument$1(e,a,o)],pt=[d];if(c.length%2!=0)throw new FirestoreError(F.INVALID_ARGUMENT,`Function ${e}() needs to be called with an even number of arguments that alternate between field names and values.`);for(let qt=0;qt<c.length;qt+=2)_e.push(__PRIVATE_fieldPathFromArgument$1(e,c[qt])),pt.push(c[qt+1]);const yt=[],ct=ObjectValue.empty();for(let qt=_e.length-1;qt>=0;--qt)if(!__PRIVATE_fieldMaskContains(yt,_e[qt])){const Ot=_e[qt];let Lt=pt[qt];Lt=getModularInstance(Lt);const Qt=j.hc(Ot);if(Lt instanceof __PRIVATE_DeleteFieldValueImpl)yt.push(Ot);else{const ir=__PRIVATE_parseData(Lt,Qt);ir!=null&&(yt.push(Ot),ct.set(Ot,ir))}}const Ct=new FieldMask(yt);return new ParsedUpdateData(ct,Ct,j.fieldTransforms)}function __PRIVATE_parseQueryValue(s,e,o,a=!1){return __PRIVATE_parseData(o,s.dc(a?4:3,e))}function __PRIVATE_parseData(s,e){if(__PRIVATE_looksLikeJsonObject(s=getModularInstance(s)))return __PRIVATE_validatePlainObject("Unsupported field value:",e,s),__PRIVATE_parseObject(s,e);if(s instanceof FieldValue)return function(a,d){if(!__PRIVATE_isWrite(d.oc))throw d.Tc(`${a._methodName}() can only be used with update() and set()`);if(!d.path)throw d.Tc(`${a._methodName}() is not currently supported inside arrays`);const c=a._toFieldTransform(d);c&&d.fieldTransforms.push(c)}(s,e),null;if(s===void 0&&e.ignoreUndefinedProperties)return null;if(e.path&&e.fieldMask.push(e.path),s instanceof Array){if(e.settings.cc&&e.oc!==4)throw e.Tc("Nested arrays are not supported");return function(a,d){const c=[];let j=0;for(const _e of a){let pt=__PRIVATE_parseData(_e,d.Pc(j));pt==null&&(pt={nullValue:"NULL_VALUE"}),c.push(pt),j++}return{arrayValue:{values:c}}}(s,e)}return function(a,d){if((a=getModularInstance(a))===null)return{nullValue:"NULL_VALUE"};if(typeof a=="number")return toNumber(d.serializer,a);if(typeof a=="boolean")return{booleanValue:a};if(typeof a=="string")return{stringValue:a};if(a instanceof Date){const c=Timestamp.fromDate(a);return{timestampValue:toTimestamp(d.serializer,c)}}if(a instanceof Timestamp){const c=new Timestamp(a.seconds,1e3*Math.floor(a.nanoseconds/1e3));return{timestampValue:toTimestamp(d.serializer,c)}}if(a instanceof GeoPoint)return{geoPointValue:{latitude:a.latitude,longitude:a.longitude}};if(a instanceof Bytes)return{bytesValue:__PRIVATE_toBytes(d.serializer,a._byteString)};if(a instanceof DocumentReference){const c=d.databaseId,j=a.firestore._databaseId;if(!j.isEqual(c))throw d.Tc(`Document reference is for database ${j.projectId}/${j.database} but should be for database ${c.projectId}/${c.database}`);return{referenceValue:__PRIVATE_toResourceName(a.firestore._databaseId||d.databaseId,a._key.path)}}if(a instanceof VectorValue)return function(j,_e){return{mapValue:{fields:{[st]:{stringValue:at},[ut]:{arrayValue:{values:j.toArray().map(yt=>{if(typeof yt!="number")throw _e.Tc("VectorValues must only contain numeric values.");return __PRIVATE_toDouble(_e.serializer,yt)})}}}}}}(a,d);throw d.Tc(`Unsupported field value: ${__PRIVATE_valueDescription(a)}`)}(s,e)}function __PRIVATE_parseObject(s,e){const o={};return isEmpty(s)?e.path&&e.path.length>0&&e.fieldMask.push(e.path):forEach$1(s,(a,d)=>{const c=__PRIVATE_parseData(d,e.uc(a));c!=null&&(o[a]=c)}),{mapValue:{fields:o}}}function __PRIVATE_looksLikeJsonObject(s){return!(typeof s!="object"||s===null||s instanceof Array||s instanceof Date||s instanceof Timestamp||s instanceof GeoPoint||s instanceof Bytes||s instanceof DocumentReference||s instanceof FieldValue||s instanceof VectorValue)}function __PRIVATE_validatePlainObject(s,e,o){if(!__PRIVATE_looksLikeJsonObject(o)||!function(d){return typeof d=="object"&&d!==null&&(Object.getPrototypeOf(d)===Object.prototype||Object.getPrototypeOf(d)===null)}(o)){const a=__PRIVATE_valueDescription(o);throw a==="an object"?e.Tc(s+" a custom object"):e.Tc(s+" "+a)}}function __PRIVATE_fieldPathFromArgument$1(s,e,o){if((e=getModularInstance(e))instanceof FieldPath)return e._internalPath;if(typeof e=="string")return __PRIVATE_fieldPathFromDotSeparatedString(s,e);throw __PRIVATE_createError("Field path arguments must be of type string or ",s,!1,void 0,o)}const on=new RegExp("[~\\*/\\[\\]]");function __PRIVATE_fieldPathFromDotSeparatedString(s,e,o){if(e.search(on)>=0)throw __PRIVATE_createError(`Invalid field path (${e}). Paths must not contain '~', '*', '/', '[', or ']'`,s,!1,void 0,o);try{return new FieldPath(...e.split("."))._internalPath}catch{throw __PRIVATE_createError(`Invalid field path (${e}). Paths must not be empty, begin with '.', end with '.', or contain '..'`,s,!1,void 0,o)}}function __PRIVATE_createError(s,e,o,a,d){const c=a&&!a.isEmpty(),j=d!==void 0;let _e=`Function ${e}() called with invalid data`;o&&(_e+=" (via `toFirestore()`)"),_e+=". ";let pt="";return(c||j)&&(pt+=" (found",c&&(pt+=` in field ${a}`),j&&(pt+=` in document ${d}`),pt+=")"),new FirestoreError(F.INVALID_ARGUMENT,_e+s+pt)}function __PRIVATE_fieldMaskContains(s,e){return s.some(o=>o.isEqual(e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class DocumentSnapshot$1{constructor(e,o,a,d,c){this._firestore=e,this._userDataWriter=o,this._key=a,this._document=d,this._converter=c}get id(){return this._key.path.lastSegment()}get ref(){return new DocumentReference(this._firestore,this._converter,this._key)}exists(){return this._document!==null}data(){if(this._document){if(this._converter){const e=new QueryDocumentSnapshot$1(this._firestore,this._userDataWriter,this._key,this._document,null);return this._converter.fromFirestore(e)}return this._userDataWriter.convertValue(this._document.data.value)}}get(e){if(this._document){const o=this._document.data.field(__PRIVATE_fieldPathFromArgument("DocumentSnapshot.get",e));if(o!==null)return this._userDataWriter.convertValue(o)}}}class QueryDocumentSnapshot$1 extends DocumentSnapshot$1{data(){return super.data()}}function __PRIVATE_fieldPathFromArgument(s,e){return typeof e=="string"?__PRIVATE_fieldPathFromDotSeparatedString(s,e):e instanceof FieldPath?e._internalPath:e._delegate._internalPath}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function __PRIVATE_validateHasExplicitOrderByForLimitToLast(s){if(s.limitType==="L"&&s.explicitOrderBy.length===0)throw new FirestoreError(F.UNIMPLEMENTED,"limitToLast() queries require specifying at least one orderBy() clause")}class AppliableConstraint{}class QueryConstraint extends AppliableConstraint{}function query(s,e,...o){let a=[];e instanceof AppliableConstraint&&a.push(e),a=a.concat(o),function(c){const j=c.filter(pt=>pt instanceof QueryCompositeFilterConstraint).length,_e=c.filter(pt=>pt instanceof QueryFieldFilterConstraint).length;if(j>1||j>0&&_e>0)throw new FirestoreError(F.INVALID_ARGUMENT,"InvalidQuery. When using composite filters, you cannot use more than one filter at the top level. Consider nesting the multiple filters within an `and(...)` statement. For example: change `query(query, where(...), or(...))` to `query(query, and(where(...), or(...)))`.")}(a);for(const d of a)s=d._apply(s);return s}class QueryFieldFilterConstraint extends QueryConstraint{constructor(e,o,a){super(),this._field=e,this._op=o,this._value=a,this.type="where"}static _create(e,o,a){return new QueryFieldFilterConstraint(e,o,a)}_apply(e){const o=this._parse(e);return __PRIVATE_validateNewFieldFilter(e._query,o),new Query(e.firestore,e.converter,__PRIVATE_queryWithAddedFilter(e._query,o))}_parse(e){const o=__PRIVATE_newUserDataReader(e.firestore);return function(c,j,_e,pt,yt,ct,Ct){let qt;if(yt.isKeyField()){if(ct==="array-contains"||ct==="array-contains-any")throw new FirestoreError(F.INVALID_ARGUMENT,`Invalid Query. You can't perform '${ct}' queries on documentId().`);if(ct==="in"||ct==="not-in"){__PRIVATE_validateDisjunctiveFilterElements(Ct,ct);const Lt=[];for(const Qt of Ct)Lt.push(__PRIVATE_parseDocumentIdValue(pt,c,Qt));qt={arrayValue:{values:Lt}}}else qt=__PRIVATE_parseDocumentIdValue(pt,c,Ct)}else ct!=="in"&&ct!=="not-in"&&ct!=="array-contains-any"||__PRIVATE_validateDisjunctiveFilterElements(Ct,ct),qt=__PRIVATE_parseQueryValue(_e,j,Ct,ct==="in"||ct==="not-in");return FieldFilter.create(yt,ct,qt)}(e._query,"where",o,e.firestore._databaseId,this._field,this._op,this._value)}}function where(s,e,o){const a=e,d=__PRIVATE_fieldPathFromArgument("where",s);return QueryFieldFilterConstraint._create(d,a,o)}class QueryCompositeFilterConstraint extends AppliableConstraint{constructor(e,o){super(),this.type=e,this._queryConstraints=o}static _create(e,o){return new QueryCompositeFilterConstraint(e,o)}_parse(e){const o=this._queryConstraints.map(a=>a._parse(e)).filter(a=>a.getFilters().length>0);return o.length===1?o[0]:CompositeFilter.create(o,this._getOperator())}_apply(e){const o=this._parse(e);return o.getFilters().length===0?e:(function(d,c){let j=d;const _e=c.getFlattenedFilters();for(const pt of _e)__PRIVATE_validateNewFieldFilter(j,pt),j=__PRIVATE_queryWithAddedFilter(j,pt)}(e._query,o),new Query(e.firestore,e.converter,__PRIVATE_queryWithAddedFilter(e._query,o)))}_getQueryConstraints(){return this._queryConstraints}_getOperator(){return this.type==="and"?"and":"or"}}function __PRIVATE_parseDocumentIdValue(s,e,o){if(typeof(o=getModularInstance(o))=="string"){if(o==="")throw new FirestoreError(F.INVALID_ARGUMENT,"Invalid query. When querying with documentId(), you must provide a valid document ID, but it was an empty string.");if(!__PRIVATE_isCollectionGroupQuery(e)&&o.indexOf("/")!==-1)throw new FirestoreError(F.INVALID_ARGUMENT,`Invalid query. When querying a collection by documentId(), you must provide a plain document ID, but '${o}' contains a '/' character.`);const a=e.path.child(ResourcePath.fromString(o));if(!DocumentKey.isDocumentKey(a))throw new FirestoreError(F.INVALID_ARGUMENT,`Invalid query. When querying a collection group by documentId(), the value provided must result in a valid document path, but '${a}' is not because it has an odd number of segments (${a.length}).`);return __PRIVATE_refValue(s,new DocumentKey(a))}if(o instanceof DocumentReference)return __PRIVATE_refValue(s,o._key);throw new FirestoreError(F.INVALID_ARGUMENT,`Invalid query. When querying with documentId(), you must provide a valid string or a DocumentReference, but it was: ${__PRIVATE_valueDescription(o)}.`)}function __PRIVATE_validateDisjunctiveFilterElements(s,e){if(!Array.isArray(s)||s.length===0)throw new FirestoreError(F.INVALID_ARGUMENT,`Invalid Query. A non-empty array is required for '${e.toString()}' filters.`)}function __PRIVATE_validateNewFieldFilter(s,e){const o=function(d,c){for(const j of d)for(const _e of j.getFlattenedFilters())if(c.indexOf(_e.op)>=0)return _e.op;return null}(s.filters,function(d){switch(d){case"!=":return["!=","not-in"];case"array-contains-any":case"in":return["not-in"];case"not-in":return["array-contains-any","in","not-in","!="];default:return[]}}(e.op));if(o!==null)throw o===e.op?new FirestoreError(F.INVALID_ARGUMENT,`Invalid query. You cannot use more than one '${e.op.toString()}' filter.`):new FirestoreError(F.INVALID_ARGUMENT,`Invalid query. You cannot use '${e.op.toString()}' filters with '${o.toString()}' filters.`)}class AbstractUserDataWriter{convertValue(e,o="none"){switch(__PRIVATE_typeOrder(e)){case 0:return null;case 1:return e.booleanValue;case 2:return __PRIVATE_normalizeNumber(e.integerValue||e.doubleValue);case 3:return this.convertTimestamp(e.timestampValue);case 4:return this.convertServerTimestamp(e,o);case 5:return e.stringValue;case 6:return this.convertBytes(__PRIVATE_normalizeByteString(e.bytesValue));case 7:return this.convertReference(e.referenceValue);case 8:return this.convertGeoPoint(e.geoPointValue);case 9:return this.convertArray(e.arrayValue,o);case 11:return this.convertObject(e.mapValue,o);case 10:return this.convertVectorValue(e.mapValue);default:throw fail(62114,{value:e})}}convertObject(e,o){return this.convertObjectMap(e.fields,o)}convertObjectMap(e,o="none"){const a={};return forEach$1(e,(d,c)=>{a[d]=this.convertValue(c,o)}),a}convertVectorValue(e){var o,a,d;const c=(d=(a=(o=e.fields)===null||o===void 0?void 0:o[ut].arrayValue)===null||a===void 0?void 0:a.values)===null||d===void 0?void 0:d.map(j=>__PRIVATE_normalizeNumber(j.doubleValue));return new VectorValue(c)}convertGeoPoint(e){return new GeoPoint(__PRIVATE_normalizeNumber(e.latitude),__PRIVATE_normalizeNumber(e.longitude))}convertArray(e,o){return(e.values||[]).map(a=>this.convertValue(a,o))}convertServerTimestamp(e,o){switch(o){case"previous":const a=__PRIVATE_getPreviousValue(e);return a==null?null:this.convertValue(a,o);case"estimate":return this.convertTimestamp(__PRIVATE_getLocalWriteTime(e));default:return null}}convertTimestamp(e){const o=__PRIVATE_normalizeTimestamp(e);return new Timestamp(o.seconds,o.nanos)}convertDocumentKey(e,o){const a=ResourcePath.fromString(e);__PRIVATE_hardAssert(__PRIVATE_isValidResourceName(a),9688,{name:e});const d=new DatabaseId(a.get(1),a.get(3)),c=new DocumentKey(a.popFirst(5));return d.isEqual(o)||__PRIVATE_logError(`Document ${c} contains a document reference within a different database (${d.projectId}/${d.database}) which is not supported. It will be treated as a reference in the current database (${o.projectId}/${o.database}) instead.`),c}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function __PRIVATE_applyFirestoreDataConverter(s,e,o){let a;return a=s?o&&(o.merge||o.mergeFields)?s.toFirestore(e,o):s.toFirestore(e):e,a}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class SnapshotMetadata{constructor(e,o){this.hasPendingWrites=e,this.fromCache=o}isEqual(e){return this.hasPendingWrites===e.hasPendingWrites&&this.fromCache===e.fromCache}}class DocumentSnapshot extends DocumentSnapshot$1{constructor(e,o,a,d,c,j){super(e,o,a,d,j),this._firestore=e,this._firestoreImpl=e,this.metadata=c}exists(){return super.exists()}data(e={}){if(this._document){if(this._converter){const o=new QueryDocumentSnapshot(this._firestore,this._userDataWriter,this._key,this._document,this.metadata,null);return this._converter.fromFirestore(o,e)}return this._userDataWriter.convertValue(this._document.data.value,e.serverTimestamps)}}get(e,o={}){if(this._document){const a=this._document.data.field(__PRIVATE_fieldPathFromArgument("DocumentSnapshot.get",e));if(a!==null)return this._userDataWriter.convertValue(a,o.serverTimestamps)}}}class QueryDocumentSnapshot extends DocumentSnapshot{data(e={}){return super.data(e)}}class QuerySnapshot{constructor(e,o,a,d){this._firestore=e,this._userDataWriter=o,this._snapshot=d,this.metadata=new SnapshotMetadata(d.hasPendingWrites,d.fromCache),this.query=a}get docs(){const e=[];return this.forEach(o=>e.push(o)),e}get size(){return this._snapshot.docs.size}get empty(){return this.size===0}forEach(e,o){this._snapshot.docs.forEach(a=>{e.call(o,new QueryDocumentSnapshot(this._firestore,this._userDataWriter,a.key,a,new SnapshotMetadata(this._snapshot.mutatedKeys.has(a.key),this._snapshot.fromCache),this.query.converter))})}docChanges(e={}){const o=!!e.includeMetadataChanges;if(o&&this._snapshot.excludesMetadataChanges)throw new FirestoreError(F.INVALID_ARGUMENT,"To include metadata changes with your document changes, you must also pass { includeMetadataChanges:true } to onSnapshot().");return this._cachedChanges&&this._cachedChangesIncludeMetadataChanges===o||(this._cachedChanges=function(d,c){if(d._snapshot.oldDocs.isEmpty()){let j=0;return d._snapshot.docChanges.map(_e=>{const pt=new QueryDocumentSnapshot(d._firestore,d._userDataWriter,_e.doc.key,_e.doc,new SnapshotMetadata(d._snapshot.mutatedKeys.has(_e.doc.key),d._snapshot.fromCache),d.query.converter);return _e.doc,{type:"added",doc:pt,oldIndex:-1,newIndex:j++}})}{let j=d._snapshot.oldDocs;return d._snapshot.docChanges.filter(_e=>c||_e.type!==3).map(_e=>{const pt=new QueryDocumentSnapshot(d._firestore,d._userDataWriter,_e.doc.key,_e.doc,new SnapshotMetadata(d._snapshot.mutatedKeys.has(_e.doc.key),d._snapshot.fromCache),d.query.converter);let yt=-1,ct=-1;return _e.type!==0&&(yt=j.indexOf(_e.doc.key),j=j.delete(_e.doc.key)),_e.type!==1&&(j=j.add(_e.doc),ct=j.indexOf(_e.doc.key)),{type:__PRIVATE_resultChangeType(_e.type),doc:pt,oldIndex:yt,newIndex:ct}})}}(this,o),this._cachedChangesIncludeMetadataChanges=o),this._cachedChanges}}function __PRIVATE_resultChangeType(s){switch(s){case 0:return"added";case 2:case 3:return"modified";case 1:return"removed";default:return fail(61501,{type:s})}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function getDoc$1(s){s=__PRIVATE_cast(s,DocumentReference);const e=__PRIVATE_cast(s.firestore,Firestore);return __PRIVATE_firestoreClientGetDocumentViaSnapshotListener(ensureFirestoreConfigured(e),s._key).then(o=>__PRIVATE_convertToDocSnapshot(e,s,o))}class __PRIVATE_ExpUserDataWriter extends AbstractUserDataWriter{constructor(e){super(),this.firestore=e}convertBytes(e){return new Bytes(e)}convertReference(e){const o=this.convertDocumentKey(e,this.firestore._databaseId);return new DocumentReference(this.firestore,null,o)}}function getDocs(s){s=__PRIVATE_cast(s,Query);const e=__PRIVATE_cast(s.firestore,Firestore),o=ensureFirestoreConfigured(e),a=new __PRIVATE_ExpUserDataWriter(e);return __PRIVATE_validateHasExplicitOrderByForLimitToLast(s._query),__PRIVATE_firestoreClientGetDocumentsViaSnapshotListener(o,s._query).then(d=>new QuerySnapshot(e,a,s,d))}function setDoc(s,e,o){s=__PRIVATE_cast(s,DocumentReference);const a=__PRIVATE_cast(s.firestore,Firestore),d=__PRIVATE_applyFirestoreDataConverter(s.converter,e,o);return executeWrite(a,[__PRIVATE_parseSetData(__PRIVATE_newUserDataReader(a),"setDoc",s._key,d,s.converter!==null,o).toMutation(s._key,Precondition.none())])}function updateDoc(s,e,o,...a){s=__PRIVATE_cast(s,DocumentReference);const d=__PRIVATE_cast(s.firestore,Firestore),c=__PRIVATE_newUserDataReader(d);let j;return j=typeof(e=getModularInstance(e))=="string"||e instanceof FieldPath?__PRIVATE_parseUpdateVarargs(c,"updateDoc",s._key,e,o,a):__PRIVATE_parseUpdateData(c,"updateDoc",s._key,e),executeWrite(d,[j.toMutation(s._key,Precondition.exists(!0))])}function onSnapshot(s,...e){var o,a,d;s=getModularInstance(s);let c={includeMetadataChanges:!1,source:"default"},j=0;typeof e[j]!="object"||__PRIVATE_isPartialObserver(e[j])||(c=e[j],j++);const _e={includeMetadataChanges:c.includeMetadataChanges,source:c.source};if(__PRIVATE_isPartialObserver(e[j])){const Ct=e[j];e[j]=(o=Ct.next)===null||o===void 0?void 0:o.bind(Ct),e[j+1]=(a=Ct.error)===null||a===void 0?void 0:a.bind(Ct),e[j+2]=(d=Ct.complete)===null||d===void 0?void 0:d.bind(Ct)}let pt,yt,ct;if(s instanceof DocumentReference)yt=__PRIVATE_cast(s.firestore,Firestore),ct=__PRIVATE_newQueryForPath(s._key.path),pt={next:Ct=>{e[j]&&e[j](__PRIVATE_convertToDocSnapshot(yt,s,Ct))},error:e[j+1],complete:e[j+2]};else{const Ct=__PRIVATE_cast(s,Query);yt=__PRIVATE_cast(Ct.firestore,Firestore),ct=Ct._query;const qt=new __PRIVATE_ExpUserDataWriter(yt);pt={next:Ot=>{e[j]&&e[j](new QuerySnapshot(yt,qt,Ct,Ot))},error:e[j+1],complete:e[j+2]},__PRIVATE_validateHasExplicitOrderByForLimitToLast(s._query)}return function(qt,Ot,Lt,Qt){const ir=new __PRIVATE_AsyncObserver(Qt),er=new __PRIVATE_QueryListener(Ot,ir,Lt);return qt.asyncQueue.enqueueAndForget(async()=>__PRIVATE_eventManagerListen(await __PRIVATE_getEventManager(qt),er)),()=>{ir.yu(),qt.asyncQueue.enqueueAndForget(async()=>__PRIVATE_eventManagerUnlisten(await __PRIVATE_getEventManager(qt),er))}}(ensureFirestoreConfigured(yt),ct,_e,pt)}function executeWrite(s,e){return function(a,d){const c=new __PRIVATE_Deferred;return a.asyncQueue.enqueueAndForget(async()=>__PRIVATE_syncEngineWrite(await __PRIVATE_getSyncEngine(a),d,c)),c.promise}(ensureFirestoreConfigured(s),e)}function __PRIVATE_convertToDocSnapshot(s,e,o){const a=o.docs.get(e._key),d=new __PRIVATE_ExpUserDataWriter(s);return new DocumentSnapshot(s,d,e._key,a,new SnapshotMetadata(o.hasPendingWrites,o.fromCache),e.converter)}function increment(s){return new __PRIVATE_NumericIncrementFieldValueImpl("increment",s)}(function(e,o=!0){(function(d){v=d})(SDK_VERSION),_registerComponent(new Component("firestore",(a,{instanceIdentifier:d,options:c})=>{const j=a.getProvider("app").getImmediate(),_e=new Firestore(new __PRIVATE_FirebaseAuthCredentialsProvider(a.getProvider("auth-internal")),new __PRIVATE_FirebaseAppCheckTokenProvider(j,a.getProvider("app-check-internal")),function(yt,ct){if(!Object.prototype.hasOwnProperty.apply(yt.options,["projectId"]))throw new FirestoreError(F.INVALID_ARGUMENT,'"projectId" not provided in firebase.initializeApp.');return new DatabaseId(yt.options.projectId,ct)}(j,d),j);return c=Object.assign({useFetchStreams:o},c),_e._setSettings(c),_e},"PUBLIC").setMultipleInstances(!0)),registerVersion(S,D,e),registerVersion(S,D,"esm2017")})();var name$2="firebase",version$3="11.6.1";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */registerVersion(name$2,version$3,"app");function __rest(s,e){var o={};for(var a in s)Object.prototype.hasOwnProperty.call(s,a)&&e.indexOf(a)<0&&(o[a]=s[a]);if(s!=null&&typeof Object.getOwnPropertySymbols=="function")for(var d=0,a=Object.getOwnPropertySymbols(s);d<a.length;d++)e.indexOf(a[d])<0&&Object.prototype.propertyIsEnumerable.call(s,a[d])&&(o[a[d]]=s[a[d]]);return o}typeof SuppressedError=="function"&&SuppressedError;function _prodErrorMap(){return{"dependent-sdk-initialized-before-auth":"Another Firebase SDK was initialized and is trying to use Auth before Auth is initialized. Please be sure to call `initializeAuth` or `getAuth` before starting any other Firebase SDK."}}const prodErrorMap=_prodErrorMap,_DEFAULT_AUTH_ERROR_FACTORY=new ErrorFactory("auth","Firebase",_prodErrorMap());/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const logClient=new Logger("@firebase/auth");function _logWarn(s,...e){logClient.logLevel<=LogLevel.WARN&&logClient.warn(`Auth (${SDK_VERSION}): ${s}`,...e)}function _logError(s,...e){logClient.logLevel<=LogLevel.ERROR&&logClient.error(`Auth (${SDK_VERSION}): ${s}`,...e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function _fail(s,...e){throw createErrorInternal(s,...e)}function _createError(s,...e){return createErrorInternal(s,...e)}function _errorWithCustomMessage(s,e,o){const a=Object.assign(Object.assign({},prodErrorMap()),{[e]:o});return new ErrorFactory("auth","Firebase",a).create(e,{appName:s.name})}function _serverAppCurrentUserOperationNotSupportedError(s){return _errorWithCustomMessage(s,"operation-not-supported-in-this-environment","Operations that alter the current user are not supported in conjunction with FirebaseServerApp")}function _assertInstanceOf(s,e,o){const a=o;if(!(e instanceof a))throw a.name!==e.constructor.name&&_fail(s,"argument-error"),_errorWithCustomMessage(s,"argument-error",`Type of ${e.constructor.name} does not match expected instance.Did you pass a reference from a different Auth SDK?`)}function createErrorInternal(s,...e){if(typeof s!="string"){const o=e[0],a=[...e.slice(1)];return a[0]&&(a[0].appName=s.name),s._errorFactory.create(o,...a)}return _DEFAULT_AUTH_ERROR_FACTORY.create(s,...e)}function _assert(s,e,...o){if(!s)throw createErrorInternal(e,...o)}function debugFail(s){const e="INTERNAL ASSERTION FAILED: "+s;throw _logError(e),new Error(e)}function debugAssert(s,e){s||debugFail(e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function _getCurrentUrl(){var s;return typeof self<"u"&&((s=self.location)===null||s===void 0?void 0:s.href)||""}function _isHttpOrHttps(){return _getCurrentScheme()==="http:"||_getCurrentScheme()==="https:"}function _getCurrentScheme(){var s;return typeof self<"u"&&((s=self.location)===null||s===void 0?void 0:s.protocol)||null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function _isOnline(){return typeof navigator<"u"&&navigator&&"onLine"in navigator&&typeof navigator.onLine=="boolean"&&(_isHttpOrHttps()||isBrowserExtension()||"connection"in navigator)?navigator.onLine:!0}function _getUserLanguage(){if(typeof navigator>"u")return null;const s=navigator;return s.languages&&s.languages[0]||s.language||null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Delay{constructor(e,o){this.shortDelay=e,this.longDelay=o,debugAssert(o>e,"Short delay should be less than long delay!"),this.isMobile=isMobileCordova()||isReactNative()}get(){return _isOnline()?this.isMobile?this.longDelay:this.shortDelay:Math.min(5e3,this.shortDelay)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function _emulatorUrl(s,e){debugAssert(s.emulator,"Emulator should always be set here");const{url:o}=s.emulator;return e?`${o}${e.startsWith("/")?e.slice(1):e}`:o}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class FetchProvider{static initialize(e,o,a){this.fetchImpl=e,o&&(this.headersImpl=o),a&&(this.responseImpl=a)}static fetch(){if(this.fetchImpl)return this.fetchImpl;if(typeof self<"u"&&"fetch"in self)return self.fetch;if(typeof globalThis<"u"&&globalThis.fetch)return globalThis.fetch;if(typeof fetch<"u")return fetch;debugFail("Could not find fetch implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static headers(){if(this.headersImpl)return this.headersImpl;if(typeof self<"u"&&"Headers"in self)return self.Headers;if(typeof globalThis<"u"&&globalThis.Headers)return globalThis.Headers;if(typeof Headers<"u")return Headers;debugFail("Could not find Headers implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static response(){if(this.responseImpl)return this.responseImpl;if(typeof self<"u"&&"Response"in self)return self.Response;if(typeof globalThis<"u"&&globalThis.Response)return globalThis.Response;if(typeof Response<"u")return Response;debugFail("Could not find Response implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const SERVER_ERROR_MAP={CREDENTIAL_MISMATCH:"custom-token-mismatch",MISSING_CUSTOM_TOKEN:"internal-error",INVALID_IDENTIFIER:"invalid-email",MISSING_CONTINUE_URI:"internal-error",INVALID_PASSWORD:"wrong-password",MISSING_PASSWORD:"missing-password",INVALID_LOGIN_CREDENTIALS:"invalid-credential",EMAIL_EXISTS:"email-already-in-use",PASSWORD_LOGIN_DISABLED:"operation-not-allowed",INVALID_IDP_RESPONSE:"invalid-credential",INVALID_PENDING_TOKEN:"invalid-credential",FEDERATED_USER_ID_ALREADY_LINKED:"credential-already-in-use",MISSING_REQ_TYPE:"internal-error",EMAIL_NOT_FOUND:"user-not-found",RESET_PASSWORD_EXCEED_LIMIT:"too-many-requests",EXPIRED_OOB_CODE:"expired-action-code",INVALID_OOB_CODE:"invalid-action-code",MISSING_OOB_CODE:"internal-error",CREDENTIAL_TOO_OLD_LOGIN_AGAIN:"requires-recent-login",INVALID_ID_TOKEN:"invalid-user-token",TOKEN_EXPIRED:"user-token-expired",USER_NOT_FOUND:"user-token-expired",TOO_MANY_ATTEMPTS_TRY_LATER:"too-many-requests",PASSWORD_DOES_NOT_MEET_REQUIREMENTS:"password-does-not-meet-requirements",INVALID_CODE:"invalid-verification-code",INVALID_SESSION_INFO:"invalid-verification-id",INVALID_TEMPORARY_PROOF:"invalid-credential",MISSING_SESSION_INFO:"missing-verification-id",SESSION_EXPIRED:"code-expired",MISSING_ANDROID_PACKAGE_NAME:"missing-android-pkg-name",UNAUTHORIZED_DOMAIN:"unauthorized-continue-uri",INVALID_OAUTH_CLIENT_ID:"invalid-oauth-client-id",ADMIN_ONLY_OPERATION:"admin-restricted-operation",INVALID_MFA_PENDING_CREDENTIAL:"invalid-multi-factor-session",MFA_ENROLLMENT_NOT_FOUND:"multi-factor-info-not-found",MISSING_MFA_ENROLLMENT_ID:"missing-multi-factor-info",MISSING_MFA_PENDING_CREDENTIAL:"missing-multi-factor-session",SECOND_FACTOR_EXISTS:"second-factor-already-in-use",SECOND_FACTOR_LIMIT_EXCEEDED:"maximum-second-factor-count-exceeded",BLOCKING_FUNCTION_ERROR_RESPONSE:"internal-error",RECAPTCHA_NOT_ENABLED:"recaptcha-not-enabled",MISSING_RECAPTCHA_TOKEN:"missing-recaptcha-token",INVALID_RECAPTCHA_TOKEN:"invalid-recaptcha-token",INVALID_RECAPTCHA_ACTION:"invalid-recaptcha-action",MISSING_CLIENT_TYPE:"missing-client-type",MISSING_RECAPTCHA_VERSION:"missing-recaptcha-version",INVALID_RECAPTCHA_VERSION:"invalid-recaptcha-version",INVALID_REQ_TYPE:"invalid-req-type"};/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const CookieAuthProxiedEndpoints=["/v1/accounts:signInWithCustomToken","/v1/accounts:signInWithEmailLink","/v1/accounts:signInWithIdp","/v1/accounts:signInWithPassword","/v1/accounts:signInWithPhoneNumber","/v1/token"],DEFAULT_API_TIMEOUT_MS=new Delay(3e4,6e4);function _addTidIfNecessary(s,e){return s.tenantId&&!e.tenantId?Object.assign(Object.assign({},e),{tenantId:s.tenantId}):e}async function _performApiRequest(s,e,o,a,d={}){return _performFetchWithErrorHandling(s,d,async()=>{let c={},j={};a&&(e==="GET"?j=a:c={body:JSON.stringify(a)});const _e=querystring(Object.assign({key:s.config.apiKey},j)).slice(1),pt=await s._getAdditionalHeaders();pt["Content-Type"]="application/json",s.languageCode&&(pt["X-Firebase-Locale"]=s.languageCode);const yt=Object.assign({method:e,headers:pt},c);return isCloudflareWorker()||(yt.referrerPolicy="no-referrer"),FetchProvider.fetch()(await _getFinalTarget(s,s.config.apiHost,o,_e),yt)})}async function _performFetchWithErrorHandling(s,e,o){s._canInitEmulator=!1;const a=Object.assign(Object.assign({},SERVER_ERROR_MAP),e);try{const d=new NetworkTimeout(s),c=await Promise.race([o(),d.promise]);d.clearNetworkTimeout();const j=await c.json();if("needConfirmation"in j)throw _makeTaggedError(s,"account-exists-with-different-credential",j);if(c.ok&&!("errorMessage"in j))return j;{const _e=c.ok?j.errorMessage:j.error.message,[pt,yt]=_e.split(" : ");if(pt==="FEDERATED_USER_ID_ALREADY_LINKED")throw _makeTaggedError(s,"credential-already-in-use",j);if(pt==="EMAIL_EXISTS")throw _makeTaggedError(s,"email-already-in-use",j);if(pt==="USER_DISABLED")throw _makeTaggedError(s,"user-disabled",j);const ct=a[pt]||pt.toLowerCase().replace(/[_\s]+/g,"-");if(yt)throw _errorWithCustomMessage(s,ct,yt);_fail(s,ct)}}catch(d){if(d instanceof FirebaseError)throw d;_fail(s,"network-request-failed",{message:String(d)})}}async function _performSignInRequest(s,e,o,a,d={}){const c=await _performApiRequest(s,e,o,a,d);return"mfaPendingCredential"in c&&_fail(s,"multi-factor-auth-required",{_serverResponse:c}),c}async function _getFinalTarget(s,e,o,a){const d=`${e}${o}?${a}`,c=s,j=c.config.emulator?_emulatorUrl(s.config,d):`${s.config.apiScheme}://${d}`;return CookieAuthProxiedEndpoints.includes(o)&&(await c._persistenceManagerAvailable,c._getPersistenceType()==="COOKIE")?c._getPersistence()._getFinalTarget(j).toString():j}class NetworkTimeout{clearNetworkTimeout(){clearTimeout(this.timer)}constructor(e){this.auth=e,this.timer=null,this.promise=new Promise((o,a)=>{this.timer=setTimeout(()=>a(_createError(this.auth,"network-request-failed")),DEFAULT_API_TIMEOUT_MS.get())})}}function _makeTaggedError(s,e,o){const a={appName:s.name};o.email&&(a.email=o.email),o.phoneNumber&&(a.phoneNumber=o.phoneNumber);const d=_createError(s,e,a);return d.customData._tokenResponse=o,d}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function deleteAccount(s,e){return _performApiRequest(s,"POST","/v1/accounts:delete",e)}async function getAccountInfo(s,e){return _performApiRequest(s,"POST","/v1/accounts:lookup",e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function utcTimestampToDateString(s){if(s)try{const e=new Date(Number(s));if(!isNaN(e.getTime()))return e.toUTCString()}catch{}}async function getIdTokenResult(s,e=!1){const o=getModularInstance(s),a=await o.getIdToken(e),d=_parseToken(a);_assert(d&&d.exp&&d.auth_time&&d.iat,o.auth,"internal-error");const c=typeof d.firebase=="object"?d.firebase:void 0,j=c==null?void 0:c.sign_in_provider;return{claims:d,token:a,authTime:utcTimestampToDateString(secondsStringToMilliseconds(d.auth_time)),issuedAtTime:utcTimestampToDateString(secondsStringToMilliseconds(d.iat)),expirationTime:utcTimestampToDateString(secondsStringToMilliseconds(d.exp)),signInProvider:j||null,signInSecondFactor:(c==null?void 0:c.sign_in_second_factor)||null}}function secondsStringToMilliseconds(s){return Number(s)*1e3}function _parseToken(s){const[e,o,a]=s.split(".");if(e===void 0||o===void 0||a===void 0)return _logError("JWT malformed, contained fewer than 3 sections"),null;try{const d=base64Decode(o);return d?JSON.parse(d):(_logError("Failed to decode base64 JWT payload"),null)}catch(d){return _logError("Caught error parsing JWT payload as JSON",d==null?void 0:d.toString()),null}}function _tokenExpiresIn(s){const e=_parseToken(s);return _assert(e,"internal-error"),_assert(typeof e.exp<"u","internal-error"),_assert(typeof e.iat<"u","internal-error"),Number(e.exp)-Number(e.iat)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function _logoutIfInvalidated(s,e,o=!1){if(o)return e;try{return await e}catch(a){throw a instanceof FirebaseError&&isUserInvalidated(a)&&s.auth.currentUser===s&&await s.auth.signOut(),a}}function isUserInvalidated({code:s}){return s==="auth/user-disabled"||s==="auth/user-token-expired"}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ProactiveRefresh{constructor(e){this.user=e,this.isRunning=!1,this.timerId=null,this.errorBackoff=3e4}_start(){this.isRunning||(this.isRunning=!0,this.schedule())}_stop(){this.isRunning&&(this.isRunning=!1,this.timerId!==null&&clearTimeout(this.timerId))}getInterval(e){var o;if(e){const a=this.errorBackoff;return this.errorBackoff=Math.min(this.errorBackoff*2,96e4),a}else{this.errorBackoff=3e4;const d=((o=this.user.stsTokenManager.expirationTime)!==null&&o!==void 0?o:0)-Date.now()-3e5;return Math.max(0,d)}}schedule(e=!1){if(!this.isRunning)return;const o=this.getInterval(e);this.timerId=setTimeout(async()=>{await this.iteration()},o)}async iteration(){try{await this.user.getIdToken(!0)}catch(e){(e==null?void 0:e.code)==="auth/network-request-failed"&&this.schedule(!0);return}this.schedule()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class UserMetadata{constructor(e,o){this.createdAt=e,this.lastLoginAt=o,this._initializeTime()}_initializeTime(){this.lastSignInTime=utcTimestampToDateString(this.lastLoginAt),this.creationTime=utcTimestampToDateString(this.createdAt)}_copy(e){this.createdAt=e.createdAt,this.lastLoginAt=e.lastLoginAt,this._initializeTime()}toJSON(){return{createdAt:this.createdAt,lastLoginAt:this.lastLoginAt}}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function _reloadWithoutSaving(s){var e;const o=s.auth,a=await s.getIdToken(),d=await _logoutIfInvalidated(s,getAccountInfo(o,{idToken:a}));_assert(d==null?void 0:d.users.length,o,"internal-error");const c=d.users[0];s._notifyReloadListener(c);const j=!((e=c.providerUserInfo)===null||e===void 0)&&e.length?extractProviderData(c.providerUserInfo):[],_e=mergeProviderData(s.providerData,j),pt=s.isAnonymous,yt=!(s.email&&c.passwordHash)&&!(_e!=null&&_e.length),ct=pt?yt:!1,Ct={uid:c.localId,displayName:c.displayName||null,photoURL:c.photoUrl||null,email:c.email||null,emailVerified:c.emailVerified||!1,phoneNumber:c.phoneNumber||null,tenantId:c.tenantId||null,providerData:_e,metadata:new UserMetadata(c.createdAt,c.lastLoginAt),isAnonymous:ct};Object.assign(s,Ct)}async function reload(s){const e=getModularInstance(s);await _reloadWithoutSaving(e),await e.auth._persistUserIfCurrent(e),e.auth._notifyListenersIfCurrent(e)}function mergeProviderData(s,e){return[...s.filter(a=>!e.some(d=>d.providerId===a.providerId)),...e]}function extractProviderData(s){return s.map(e=>{var{providerId:o}=e,a=__rest(e,["providerId"]);return{providerId:o,uid:a.rawId||"",displayName:a.displayName||null,email:a.email||null,phoneNumber:a.phoneNumber||null,photoURL:a.photoUrl||null}})}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function requestStsToken(s,e){const o=await _performFetchWithErrorHandling(s,{},async()=>{const a=querystring({grant_type:"refresh_token",refresh_token:e}).slice(1),{tokenApiHost:d,apiKey:c}=s.config,j=await _getFinalTarget(s,d,"/v1/token",`key=${c}`),_e=await s._getAdditionalHeaders();return _e["Content-Type"]="application/x-www-form-urlencoded",FetchProvider.fetch()(j,{method:"POST",headers:_e,body:a})});return{accessToken:o.access_token,expiresIn:o.expires_in,refreshToken:o.refresh_token}}async function revokeToken(s,e){return _performApiRequest(s,"POST","/v2/accounts:revokeToken",_addTidIfNecessary(s,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class StsTokenManager{constructor(){this.refreshToken=null,this.accessToken=null,this.expirationTime=null}get isExpired(){return!this.expirationTime||Date.now()>this.expirationTime-3e4}updateFromServerResponse(e){_assert(e.idToken,"internal-error"),_assert(typeof e.idToken<"u","internal-error"),_assert(typeof e.refreshToken<"u","internal-error");const o="expiresIn"in e&&typeof e.expiresIn<"u"?Number(e.expiresIn):_tokenExpiresIn(e.idToken);this.updateTokensAndExpiration(e.idToken,e.refreshToken,o)}updateFromIdToken(e){_assert(e.length!==0,"internal-error");const o=_tokenExpiresIn(e);this.updateTokensAndExpiration(e,null,o)}async getToken(e,o=!1){return!o&&this.accessToken&&!this.isExpired?this.accessToken:(_assert(this.refreshToken,e,"user-token-expired"),this.refreshToken?(await this.refresh(e,this.refreshToken),this.accessToken):null)}clearRefreshToken(){this.refreshToken=null}async refresh(e,o){const{accessToken:a,refreshToken:d,expiresIn:c}=await requestStsToken(e,o);this.updateTokensAndExpiration(a,d,Number(c))}updateTokensAndExpiration(e,o,a){this.refreshToken=o||null,this.accessToken=e||null,this.expirationTime=Date.now()+a*1e3}static fromJSON(e,o){const{refreshToken:a,accessToken:d,expirationTime:c}=o,j=new StsTokenManager;return a&&(_assert(typeof a=="string","internal-error",{appName:e}),j.refreshToken=a),d&&(_assert(typeof d=="string","internal-error",{appName:e}),j.accessToken=d),c&&(_assert(typeof c=="number","internal-error",{appName:e}),j.expirationTime=c),j}toJSON(){return{refreshToken:this.refreshToken,accessToken:this.accessToken,expirationTime:this.expirationTime}}_assign(e){this.accessToken=e.accessToken,this.refreshToken=e.refreshToken,this.expirationTime=e.expirationTime}_clone(){return Object.assign(new StsTokenManager,this.toJSON())}_performRefresh(){return debugFail("not implemented")}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function assertStringOrUndefined(s,e){_assert(typeof s=="string"||typeof s>"u","internal-error",{appName:e})}class UserImpl{constructor(e){var{uid:o,auth:a,stsTokenManager:d}=e,c=__rest(e,["uid","auth","stsTokenManager"]);this.providerId="firebase",this.proactiveRefresh=new ProactiveRefresh(this),this.reloadUserInfo=null,this.reloadListener=null,this.uid=o,this.auth=a,this.stsTokenManager=d,this.accessToken=d.accessToken,this.displayName=c.displayName||null,this.email=c.email||null,this.emailVerified=c.emailVerified||!1,this.phoneNumber=c.phoneNumber||null,this.photoURL=c.photoURL||null,this.isAnonymous=c.isAnonymous||!1,this.tenantId=c.tenantId||null,this.providerData=c.providerData?[...c.providerData]:[],this.metadata=new UserMetadata(c.createdAt||void 0,c.lastLoginAt||void 0)}async getIdToken(e){const o=await _logoutIfInvalidated(this,this.stsTokenManager.getToken(this.auth,e));return _assert(o,this.auth,"internal-error"),this.accessToken!==o&&(this.accessToken=o,await this.auth._persistUserIfCurrent(this),this.auth._notifyListenersIfCurrent(this)),o}getIdTokenResult(e){return getIdTokenResult(this,e)}reload(){return reload(this)}_assign(e){this!==e&&(_assert(this.uid===e.uid,this.auth,"internal-error"),this.displayName=e.displayName,this.photoURL=e.photoURL,this.email=e.email,this.emailVerified=e.emailVerified,this.phoneNumber=e.phoneNumber,this.isAnonymous=e.isAnonymous,this.tenantId=e.tenantId,this.providerData=e.providerData.map(o=>Object.assign({},o)),this.metadata._copy(e.metadata),this.stsTokenManager._assign(e.stsTokenManager))}_clone(e){const o=new UserImpl(Object.assign(Object.assign({},this),{auth:e,stsTokenManager:this.stsTokenManager._clone()}));return o.metadata._copy(this.metadata),o}_onReload(e){_assert(!this.reloadListener,this.auth,"internal-error"),this.reloadListener=e,this.reloadUserInfo&&(this._notifyReloadListener(this.reloadUserInfo),this.reloadUserInfo=null)}_notifyReloadListener(e){this.reloadListener?this.reloadListener(e):this.reloadUserInfo=e}_startProactiveRefresh(){this.proactiveRefresh._start()}_stopProactiveRefresh(){this.proactiveRefresh._stop()}async _updateTokensIfNecessary(e,o=!1){let a=!1;e.idToken&&e.idToken!==this.stsTokenManager.accessToken&&(this.stsTokenManager.updateFromServerResponse(e),a=!0),o&&await _reloadWithoutSaving(this),await this.auth._persistUserIfCurrent(this),a&&this.auth._notifyListenersIfCurrent(this)}async delete(){if(_isFirebaseServerApp(this.auth.app))return Promise.reject(_serverAppCurrentUserOperationNotSupportedError(this.auth));const e=await this.getIdToken();return await _logoutIfInvalidated(this,deleteAccount(this.auth,{idToken:e})),this.stsTokenManager.clearRefreshToken(),this.auth.signOut()}toJSON(){return Object.assign(Object.assign({uid:this.uid,email:this.email||void 0,emailVerified:this.emailVerified,displayName:this.displayName||void 0,isAnonymous:this.isAnonymous,photoURL:this.photoURL||void 0,phoneNumber:this.phoneNumber||void 0,tenantId:this.tenantId||void 0,providerData:this.providerData.map(e=>Object.assign({},e)),stsTokenManager:this.stsTokenManager.toJSON(),_redirectEventId:this._redirectEventId},this.metadata.toJSON()),{apiKey:this.auth.config.apiKey,appName:this.auth.name})}get refreshToken(){return this.stsTokenManager.refreshToken||""}static _fromJSON(e,o){var a,d,c,j,_e,pt,yt,ct;const Ct=(a=o.displayName)!==null&&a!==void 0?a:void 0,qt=(d=o.email)!==null&&d!==void 0?d:void 0,Ot=(c=o.phoneNumber)!==null&&c!==void 0?c:void 0,Lt=(j=o.photoURL)!==null&&j!==void 0?j:void 0,Qt=(_e=o.tenantId)!==null&&_e!==void 0?_e:void 0,ir=(pt=o._redirectEventId)!==null&&pt!==void 0?pt:void 0,er=(yt=o.createdAt)!==null&&yt!==void 0?yt:void 0,tr=(ct=o.lastLoginAt)!==null&&ct!==void 0?ct:void 0,{uid:sr,emailVerified:ar,isAnonymous:hr,providerData:_r,stsTokenManager:dr}=o;_assert(sr&&dr,e,"internal-error");const ur=StsTokenManager.fromJSON(this.name,dr);_assert(typeof sr=="string",e,"internal-error"),assertStringOrUndefined(Ct,e.name),assertStringOrUndefined(qt,e.name),_assert(typeof ar=="boolean",e,"internal-error"),_assert(typeof hr=="boolean",e,"internal-error"),assertStringOrUndefined(Ot,e.name),assertStringOrUndefined(Lt,e.name),assertStringOrUndefined(Qt,e.name),assertStringOrUndefined(ir,e.name),assertStringOrUndefined(er,e.name),assertStringOrUndefined(tr,e.name);const lr=new UserImpl({uid:sr,auth:e,email:qt,emailVerified:ar,displayName:Ct,isAnonymous:hr,photoURL:Lt,phoneNumber:Ot,tenantId:Qt,stsTokenManager:ur,createdAt:er,lastLoginAt:tr});return _r&&Array.isArray(_r)&&(lr.providerData=_r.map(gr=>Object.assign({},gr))),ir&&(lr._redirectEventId=ir),lr}static async _fromIdTokenResponse(e,o,a=!1){const d=new StsTokenManager;d.updateFromServerResponse(o);const c=new UserImpl({uid:o.localId,auth:e,stsTokenManager:d,isAnonymous:a});return await _reloadWithoutSaving(c),c}static async _fromGetAccountInfoResponse(e,o,a){const d=o.users[0];_assert(d.localId!==void 0,"internal-error");const c=d.providerUserInfo!==void 0?extractProviderData(d.providerUserInfo):[],j=!(d.email&&d.passwordHash)&&!(c!=null&&c.length),_e=new StsTokenManager;_e.updateFromIdToken(a);const pt=new UserImpl({uid:d.localId,auth:e,stsTokenManager:_e,isAnonymous:j}),yt={uid:d.localId,displayName:d.displayName||null,photoURL:d.photoUrl||null,email:d.email||null,emailVerified:d.emailVerified||!1,phoneNumber:d.phoneNumber||null,tenantId:d.tenantId||null,providerData:c,metadata:new UserMetadata(d.createdAt,d.lastLoginAt),isAnonymous:!(d.email&&d.passwordHash)&&!(c!=null&&c.length)};return Object.assign(pt,yt),pt}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const instanceCache=new Map;function _getInstance(s){debugAssert(s instanceof Function,"Expected a class definition");let e=instanceCache.get(s);return e?(debugAssert(e instanceof s,"Instance stored in cache mismatched with class"),e):(e=new s,instanceCache.set(s,e),e)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class InMemoryPersistence{constructor(){this.type="NONE",this.storage={}}async _isAvailable(){return!0}async _set(e,o){this.storage[e]=o}async _get(e){const o=this.storage[e];return o===void 0?null:o}async _remove(e){delete this.storage[e]}_addListener(e,o){}_removeListener(e,o){}}InMemoryPersistence.type="NONE";const inMemoryPersistence=InMemoryPersistence;/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function _persistenceKeyName(s,e,o){return`firebase:${s}:${e}:${o}`}class PersistenceUserManager{constructor(e,o,a){this.persistence=e,this.auth=o,this.userKey=a;const{config:d,name:c}=this.auth;this.fullUserKey=_persistenceKeyName(this.userKey,d.apiKey,c),this.fullPersistenceKey=_persistenceKeyName("persistence",d.apiKey,c),this.boundEventHandler=o._onStorageEvent.bind(o),this.persistence._addListener(this.fullUserKey,this.boundEventHandler)}setCurrentUser(e){return this.persistence._set(this.fullUserKey,e.toJSON())}async getCurrentUser(){const e=await this.persistence._get(this.fullUserKey);if(!e)return null;if(typeof e=="string"){const o=await getAccountInfo(this.auth,{idToken:e}).catch(()=>{});return o?UserImpl._fromGetAccountInfoResponse(this.auth,o,e):null}return UserImpl._fromJSON(this.auth,e)}removeCurrentUser(){return this.persistence._remove(this.fullUserKey)}savePersistenceForRedirect(){return this.persistence._set(this.fullPersistenceKey,this.persistence.type)}async setPersistence(e){if(this.persistence===e)return;const o=await this.getCurrentUser();if(await this.removeCurrentUser(),this.persistence=e,o)return this.setCurrentUser(o)}delete(){this.persistence._removeListener(this.fullUserKey,this.boundEventHandler)}static async create(e,o,a="authUser"){if(!o.length)return new PersistenceUserManager(_getInstance(inMemoryPersistence),e,a);const d=(await Promise.all(o.map(async yt=>{if(await yt._isAvailable())return yt}))).filter(yt=>yt);let c=d[0]||_getInstance(inMemoryPersistence);const j=_persistenceKeyName(a,e.config.apiKey,e.name);let _e=null;for(const yt of o)try{const ct=await yt._get(j);if(ct){let Ct;if(typeof ct=="string"){const qt=await getAccountInfo(e,{idToken:ct}).catch(()=>{});if(!qt)break;Ct=await UserImpl._fromGetAccountInfoResponse(e,qt,ct)}else Ct=UserImpl._fromJSON(e,ct);yt!==c&&(_e=Ct),c=yt;break}}catch{}const pt=d.filter(yt=>yt._shouldAllowMigration);return!c._shouldAllowMigration||!pt.length?new PersistenceUserManager(c,e,a):(c=pt[0],_e&&await c._set(j,_e.toJSON()),await Promise.all(o.map(async yt=>{if(yt!==c)try{await yt._remove(j)}catch{}})),new PersistenceUserManager(c,e,a))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function _getBrowserName(s){const e=s.toLowerCase();if(e.includes("opera/")||e.includes("opr/")||e.includes("opios/"))return"Opera";if(_isIEMobile(e))return"IEMobile";if(e.includes("msie")||e.includes("trident/"))return"IE";if(e.includes("edge/"))return"Edge";if(_isFirefox(e))return"Firefox";if(e.includes("silk/"))return"Silk";if(_isBlackBerry(e))return"Blackberry";if(_isWebOS(e))return"Webos";if(_isSafari(e))return"Safari";if((e.includes("chrome/")||_isChromeIOS(e))&&!e.includes("edge/"))return"Chrome";if(_isAndroid(e))return"Android";{const o=/([a-zA-Z\d\.]+)\/[a-zA-Z\d\.]*$/,a=s.match(o);if((a==null?void 0:a.length)===2)return a[1]}return"Other"}function _isFirefox(s=getUA()){return/firefox\//i.test(s)}function _isSafari(s=getUA()){const e=s.toLowerCase();return e.includes("safari/")&&!e.includes("chrome/")&&!e.includes("crios/")&&!e.includes("android")}function _isChromeIOS(s=getUA()){return/crios\//i.test(s)}function _isIEMobile(s=getUA()){return/iemobile/i.test(s)}function _isAndroid(s=getUA()){return/android/i.test(s)}function _isBlackBerry(s=getUA()){return/blackberry/i.test(s)}function _isWebOS(s=getUA()){return/webos/i.test(s)}function _isIOS(s=getUA()){return/iphone|ipad|ipod/i.test(s)||/macintosh/i.test(s)&&/mobile/i.test(s)}function _isIOSStandalone(s=getUA()){var e;return _isIOS(s)&&!!(!((e=window.navigator)===null||e===void 0)&&e.standalone)}function _isIE10(){return isIE()&&document.documentMode===10}function _isMobileBrowser(s=getUA()){return _isIOS(s)||_isAndroid(s)||_isWebOS(s)||_isBlackBerry(s)||/windows phone/i.test(s)||_isIEMobile(s)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function _getClientVersion(s,e=[]){let o;switch(s){case"Browser":o=_getBrowserName(getUA());break;case"Worker":o=`${_getBrowserName(getUA())}-${s}`;break;default:o=s}const a=e.length?e.join(","):"FirebaseCore-web";return`${o}/JsCore/${SDK_VERSION}/${a}`}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class AuthMiddlewareQueue{constructor(e){this.auth=e,this.queue=[]}pushCallback(e,o){const a=c=>new Promise((j,_e)=>{try{const pt=e(c);j(pt)}catch(pt){_e(pt)}});a.onAbort=o,this.queue.push(a);const d=this.queue.length-1;return()=>{this.queue[d]=()=>Promise.resolve()}}async runMiddleware(e){if(this.auth.currentUser===e)return;const o=[];try{for(const a of this.queue)await a(e),a.onAbort&&o.push(a.onAbort)}catch(a){o.reverse();for(const d of o)try{d()}catch{}throw this.auth._errorFactory.create("login-blocked",{originalMessage:a==null?void 0:a.message})}}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function _getPasswordPolicy(s,e={}){return _performApiRequest(s,"GET","/v2/passwordPolicy",_addTidIfNecessary(s,e))}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const MINIMUM_MIN_PASSWORD_LENGTH=6;class PasswordPolicyImpl{constructor(e){var o,a,d,c;const j=e.customStrengthOptions;this.customStrengthOptions={},this.customStrengthOptions.minPasswordLength=(o=j.minPasswordLength)!==null&&o!==void 0?o:MINIMUM_MIN_PASSWORD_LENGTH,j.maxPasswordLength&&(this.customStrengthOptions.maxPasswordLength=j.maxPasswordLength),j.containsLowercaseCharacter!==void 0&&(this.customStrengthOptions.containsLowercaseLetter=j.containsLowercaseCharacter),j.containsUppercaseCharacter!==void 0&&(this.customStrengthOptions.containsUppercaseLetter=j.containsUppercaseCharacter),j.containsNumericCharacter!==void 0&&(this.customStrengthOptions.containsNumericCharacter=j.containsNumericCharacter),j.containsNonAlphanumericCharacter!==void 0&&(this.customStrengthOptions.containsNonAlphanumericCharacter=j.containsNonAlphanumericCharacter),this.enforcementState=e.enforcementState,this.enforcementState==="ENFORCEMENT_STATE_UNSPECIFIED"&&(this.enforcementState="OFF"),this.allowedNonAlphanumericCharacters=(d=(a=e.allowedNonAlphanumericCharacters)===null||a===void 0?void 0:a.join(""))!==null&&d!==void 0?d:"",this.forceUpgradeOnSignin=(c=e.forceUpgradeOnSignin)!==null&&c!==void 0?c:!1,this.schemaVersion=e.schemaVersion}validatePassword(e){var o,a,d,c,j,_e;const pt={isValid:!0,passwordPolicy:this};return this.validatePasswordLengthOptions(e,pt),this.validatePasswordCharacterOptions(e,pt),pt.isValid&&(pt.isValid=(o=pt.meetsMinPasswordLength)!==null&&o!==void 0?o:!0),pt.isValid&&(pt.isValid=(a=pt.meetsMaxPasswordLength)!==null&&a!==void 0?a:!0),pt.isValid&&(pt.isValid=(d=pt.containsLowercaseLetter)!==null&&d!==void 0?d:!0),pt.isValid&&(pt.isValid=(c=pt.containsUppercaseLetter)!==null&&c!==void 0?c:!0),pt.isValid&&(pt.isValid=(j=pt.containsNumericCharacter)!==null&&j!==void 0?j:!0),pt.isValid&&(pt.isValid=(_e=pt.containsNonAlphanumericCharacter)!==null&&_e!==void 0?_e:!0),pt}validatePasswordLengthOptions(e,o){const a=this.customStrengthOptions.minPasswordLength,d=this.customStrengthOptions.maxPasswordLength;a&&(o.meetsMinPasswordLength=e.length>=a),d&&(o.meetsMaxPasswordLength=e.length<=d)}validatePasswordCharacterOptions(e,o){this.updatePasswordCharacterOptionsStatuses(o,!1,!1,!1,!1);let a;for(let d=0;d<e.length;d++)a=e.charAt(d),this.updatePasswordCharacterOptionsStatuses(o,a>="a"&&a<="z",a>="A"&&a<="Z",a>="0"&&a<="9",this.allowedNonAlphanumericCharacters.includes(a))}updatePasswordCharacterOptionsStatuses(e,o,a,d,c){this.customStrengthOptions.containsLowercaseLetter&&(e.containsLowercaseLetter||(e.containsLowercaseLetter=o)),this.customStrengthOptions.containsUppercaseLetter&&(e.containsUppercaseLetter||(e.containsUppercaseLetter=a)),this.customStrengthOptions.containsNumericCharacter&&(e.containsNumericCharacter||(e.containsNumericCharacter=d)),this.customStrengthOptions.containsNonAlphanumericCharacter&&(e.containsNonAlphanumericCharacter||(e.containsNonAlphanumericCharacter=c))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class AuthImpl{constructor(e,o,a,d){this.app=e,this.heartbeatServiceProvider=o,this.appCheckServiceProvider=a,this.config=d,this.currentUser=null,this.emulatorConfig=null,this.operations=Promise.resolve(),this.authStateSubscription=new Subscription(this),this.idTokenSubscription=new Subscription(this),this.beforeStateQueue=new AuthMiddlewareQueue(this),this.redirectUser=null,this.isProactiveRefreshEnabled=!1,this.EXPECTED_PASSWORD_POLICY_SCHEMA_VERSION=1,this._canInitEmulator=!0,this._isInitialized=!1,this._deleted=!1,this._initializationPromise=null,this._popupRedirectResolver=null,this._errorFactory=_DEFAULT_AUTH_ERROR_FACTORY,this._agentRecaptchaConfig=null,this._tenantRecaptchaConfigs={},this._projectPasswordPolicy=null,this._tenantPasswordPolicies={},this._resolvePersistenceManagerAvailable=void 0,this.lastNotifiedUid=void 0,this.languageCode=null,this.tenantId=null,this.settings={appVerificationDisabledForTesting:!1},this.frameworks=[],this.name=e.name,this.clientVersion=d.sdkClientVersion,this._persistenceManagerAvailable=new Promise(c=>this._resolvePersistenceManagerAvailable=c)}_initializeWithPersistence(e,o){return o&&(this._popupRedirectResolver=_getInstance(o)),this._initializationPromise=this.queue(async()=>{var a,d,c;if(!this._deleted&&(this.persistenceManager=await PersistenceUserManager.create(this,e),(a=this._resolvePersistenceManagerAvailable)===null||a===void 0||a.call(this),!this._deleted)){if(!((d=this._popupRedirectResolver)===null||d===void 0)&&d._shouldInitProactively)try{await this._popupRedirectResolver._initialize(this)}catch{}await this.initializeCurrentUser(o),this.lastNotifiedUid=((c=this.currentUser)===null||c===void 0?void 0:c.uid)||null,!this._deleted&&(this._isInitialized=!0)}}),this._initializationPromise}async _onStorageEvent(){if(this._deleted)return;const e=await this.assertedPersistence.getCurrentUser();if(!(!this.currentUser&&!e)){if(this.currentUser&&e&&this.currentUser.uid===e.uid){this._currentUser._assign(e),await this.currentUser.getIdToken();return}await this._updateCurrentUser(e,!0)}}async initializeCurrentUserFromIdToken(e){try{const o=await getAccountInfo(this,{idToken:e}),a=await UserImpl._fromGetAccountInfoResponse(this,o,e);await this.directlySetCurrentUser(a)}catch(o){console.warn("FirebaseServerApp could not login user with provided authIdToken: ",o),await this.directlySetCurrentUser(null)}}async initializeCurrentUser(e){var o;if(_isFirebaseServerApp(this.app)){const j=this.app.settings.authIdToken;return j?new Promise(_e=>{setTimeout(()=>this.initializeCurrentUserFromIdToken(j).then(_e,_e))}):this.directlySetCurrentUser(null)}const a=await this.assertedPersistence.getCurrentUser();let d=a,c=!1;if(e&&this.config.authDomain){await this.getOrInitRedirectPersistenceManager();const j=(o=this.redirectUser)===null||o===void 0?void 0:o._redirectEventId,_e=d==null?void 0:d._redirectEventId,pt=await this.tryRedirectSignIn(e);(!j||j===_e)&&(pt!=null&&pt.user)&&(d=pt.user,c=!0)}if(!d)return this.directlySetCurrentUser(null);if(!d._redirectEventId){if(c)try{await this.beforeStateQueue.runMiddleware(d)}catch(j){d=a,this._popupRedirectResolver._overrideRedirectResult(this,()=>Promise.reject(j))}return d?this.reloadAndSetCurrentUserOrClear(d):this.directlySetCurrentUser(null)}return _assert(this._popupRedirectResolver,this,"argument-error"),await this.getOrInitRedirectPersistenceManager(),this.redirectUser&&this.redirectUser._redirectEventId===d._redirectEventId?this.directlySetCurrentUser(d):this.reloadAndSetCurrentUserOrClear(d)}async tryRedirectSignIn(e){let o=null;try{o=await this._popupRedirectResolver._completeRedirectFn(this,e,!0)}catch{await this._setRedirectUser(null)}return o}async reloadAndSetCurrentUserOrClear(e){try{await _reloadWithoutSaving(e)}catch(o){if((o==null?void 0:o.code)!=="auth/network-request-failed")return this.directlySetCurrentUser(null)}return this.directlySetCurrentUser(e)}useDeviceLanguage(){this.languageCode=_getUserLanguage()}async _delete(){this._deleted=!0}async updateCurrentUser(e){if(_isFirebaseServerApp(this.app))return Promise.reject(_serverAppCurrentUserOperationNotSupportedError(this));const o=e?getModularInstance(e):null;return o&&_assert(o.auth.config.apiKey===this.config.apiKey,this,"invalid-user-token"),this._updateCurrentUser(o&&o._clone(this))}async _updateCurrentUser(e,o=!1){if(!this._deleted)return e&&_assert(this.tenantId===e.tenantId,this,"tenant-id-mismatch"),o||await this.beforeStateQueue.runMiddleware(e),this.queue(async()=>{await this.directlySetCurrentUser(e),this.notifyAuthListeners()})}async signOut(){return _isFirebaseServerApp(this.app)?Promise.reject(_serverAppCurrentUserOperationNotSupportedError(this)):(await this.beforeStateQueue.runMiddleware(null),(this.redirectPersistenceManager||this._popupRedirectResolver)&&await this._setRedirectUser(null),this._updateCurrentUser(null,!0))}setPersistence(e){return _isFirebaseServerApp(this.app)?Promise.reject(_serverAppCurrentUserOperationNotSupportedError(this)):this.queue(async()=>{await this.assertedPersistence.setPersistence(_getInstance(e))})}_getRecaptchaConfig(){return this.tenantId==null?this._agentRecaptchaConfig:this._tenantRecaptchaConfigs[this.tenantId]}async validatePassword(e){this._getPasswordPolicyInternal()||await this._updatePasswordPolicy();const o=this._getPasswordPolicyInternal();return o.schemaVersion!==this.EXPECTED_PASSWORD_POLICY_SCHEMA_VERSION?Promise.reject(this._errorFactory.create("unsupported-password-policy-schema-version",{})):o.validatePassword(e)}_getPasswordPolicyInternal(){return this.tenantId===null?this._projectPasswordPolicy:this._tenantPasswordPolicies[this.tenantId]}async _updatePasswordPolicy(){const e=await _getPasswordPolicy(this),o=new PasswordPolicyImpl(e);this.tenantId===null?this._projectPasswordPolicy=o:this._tenantPasswordPolicies[this.tenantId]=o}_getPersistenceType(){return this.assertedPersistence.persistence.type}_getPersistence(){return this.assertedPersistence.persistence}_updateErrorMap(e){this._errorFactory=new ErrorFactory("auth","Firebase",e())}onAuthStateChanged(e,o,a){return this.registerStateListener(this.authStateSubscription,e,o,a)}beforeAuthStateChanged(e,o){return this.beforeStateQueue.pushCallback(e,o)}onIdTokenChanged(e,o,a){return this.registerStateListener(this.idTokenSubscription,e,o,a)}authStateReady(){return new Promise((e,o)=>{if(this.currentUser)e();else{const a=this.onAuthStateChanged(()=>{a(),e()},o)}})}async revokeAccessToken(e){if(this.currentUser){const o=await this.currentUser.getIdToken(),a={providerId:"apple.com",tokenType:"ACCESS_TOKEN",token:e,idToken:o};this.tenantId!=null&&(a.tenantId=this.tenantId),await revokeToken(this,a)}}toJSON(){var e;return{apiKey:this.config.apiKey,authDomain:this.config.authDomain,appName:this.name,currentUser:(e=this._currentUser)===null||e===void 0?void 0:e.toJSON()}}async _setRedirectUser(e,o){const a=await this.getOrInitRedirectPersistenceManager(o);return e===null?a.removeCurrentUser():a.setCurrentUser(e)}async getOrInitRedirectPersistenceManager(e){if(!this.redirectPersistenceManager){const o=e&&_getInstance(e)||this._popupRedirectResolver;_assert(o,this,"argument-error"),this.redirectPersistenceManager=await PersistenceUserManager.create(this,[_getInstance(o._redirectPersistence)],"redirectUser"),this.redirectUser=await this.redirectPersistenceManager.getCurrentUser()}return this.redirectPersistenceManager}async _redirectUserForId(e){var o,a;return this._isInitialized&&await this.queue(async()=>{}),((o=this._currentUser)===null||o===void 0?void 0:o._redirectEventId)===e?this._currentUser:((a=this.redirectUser)===null||a===void 0?void 0:a._redirectEventId)===e?this.redirectUser:null}async _persistUserIfCurrent(e){if(e===this.currentUser)return this.queue(async()=>this.directlySetCurrentUser(e))}_notifyListenersIfCurrent(e){e===this.currentUser&&this.notifyAuthListeners()}_key(){return`${this.config.authDomain}:${this.config.apiKey}:${this.name}`}_startProactiveRefresh(){this.isProactiveRefreshEnabled=!0,this.currentUser&&this._currentUser._startProactiveRefresh()}_stopProactiveRefresh(){this.isProactiveRefreshEnabled=!1,this.currentUser&&this._currentUser._stopProactiveRefresh()}get _currentUser(){return this.currentUser}notifyAuthListeners(){var e,o;if(!this._isInitialized)return;this.idTokenSubscription.next(this.currentUser);const a=(o=(e=this.currentUser)===null||e===void 0?void 0:e.uid)!==null&&o!==void 0?o:null;this.lastNotifiedUid!==a&&(this.lastNotifiedUid=a,this.authStateSubscription.next(this.currentUser))}registerStateListener(e,o,a,d){if(this._deleted)return()=>{};const c=typeof o=="function"?o:o.next.bind(o);let j=!1;const _e=this._isInitialized?Promise.resolve():this._initializationPromise;if(_assert(_e,this,"internal-error"),_e.then(()=>{j||c(this.currentUser)}),typeof o=="function"){const pt=e.addObserver(o,a,d);return()=>{j=!0,pt()}}else{const pt=e.addObserver(o);return()=>{j=!0,pt()}}}async directlySetCurrentUser(e){this.currentUser&&this.currentUser!==e&&this._currentUser._stopProactiveRefresh(),e&&this.isProactiveRefreshEnabled&&e._startProactiveRefresh(),this.currentUser=e,e?await this.assertedPersistence.setCurrentUser(e):await this.assertedPersistence.removeCurrentUser()}queue(e){return this.operations=this.operations.then(e,e),this.operations}get assertedPersistence(){return _assert(this.persistenceManager,this,"internal-error"),this.persistenceManager}_logFramework(e){!e||this.frameworks.includes(e)||(this.frameworks.push(e),this.frameworks.sort(),this.clientVersion=_getClientVersion(this.config.clientPlatform,this._getFrameworks()))}_getFrameworks(){return this.frameworks}async _getAdditionalHeaders(){var e;const o={"X-Client-Version":this.clientVersion};this.app.options.appId&&(o["X-Firebase-gmpid"]=this.app.options.appId);const a=await((e=this.heartbeatServiceProvider.getImmediate({optional:!0}))===null||e===void 0?void 0:e.getHeartbeatsHeader());a&&(o["X-Firebase-Client"]=a);const d=await this._getAppCheckToken();return d&&(o["X-Firebase-AppCheck"]=d),o}async _getAppCheckToken(){var e;if(_isFirebaseServerApp(this.app)&&this.app.settings.appCheckToken)return this.app.settings.appCheckToken;const o=await((e=this.appCheckServiceProvider.getImmediate({optional:!0}))===null||e===void 0?void 0:e.getToken());return o!=null&&o.error&&_logWarn(`Error while retrieving App Check token: ${o.error}`),o==null?void 0:o.token}}function _castAuth(s){return getModularInstance(s)}class Subscription{constructor(e){this.auth=e,this.observer=null,this.addObserver=createSubscribe(o=>this.observer=o)}get next(){return _assert(this.observer,this.auth,"internal-error"),this.observer.next.bind(this.observer)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let externalJSProvider={async loadJS(){throw new Error("Unable to load external scripts")},recaptchaV2Script:"",recaptchaEnterpriseScript:"",gapiScript:""};function _setExternalJSProvider(s){externalJSProvider=s}function _loadJS(s){return externalJSProvider.loadJS(s)}function _gapiScriptUrl(){return externalJSProvider.gapiScript}function _generateCallbackName(s){return`__${s}${Math.floor(Math.random()*1e6)}`}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function initializeAuth(s,e){const o=_getProvider(s,"auth");if(o.isInitialized()){const d=o.getImmediate(),c=o.getOptions();if(deepEqual(c,e??{}))return d;_fail(d,"already-initialized")}return o.initialize({options:e})}function _initializeAuthInstance(s,e){const o=(e==null?void 0:e.persistence)||[],a=(Array.isArray(o)?o:[o]).map(_getInstance);e!=null&&e.errorMap&&s._updateErrorMap(e.errorMap),s._initializeWithPersistence(a,e==null?void 0:e.popupRedirectResolver)}function connectAuthEmulator(s,e,o){const a=_castAuth(s);_assert(/^https?:\/\//.test(e),a,"invalid-emulator-scheme");const d=!1,c=extractProtocol(e),{host:j,port:_e}=extractHostAndPort(e),pt=_e===null?"":`:${_e}`,yt={url:`${c}//${j}${pt}/`},ct=Object.freeze({host:j,port:_e,protocol:c.replace(":",""),options:Object.freeze({disableWarnings:d})});if(!a._canInitEmulator){_assert(a.config.emulator&&a.emulatorConfig,a,"emulator-config-failed"),_assert(deepEqual(yt,a.config.emulator)&&deepEqual(ct,a.emulatorConfig),a,"emulator-config-failed");return}a.config.emulator=yt,a.emulatorConfig=ct,a.settings.appVerificationDisabledForTesting=!0,emitEmulatorWarning()}function extractProtocol(s){const e=s.indexOf(":");return e<0?"":s.substr(0,e+1)}function extractHostAndPort(s){const e=extractProtocol(s),o=/(\/\/)?([^?#/]+)/.exec(s.substr(e.length));if(!o)return{host:"",port:null};const a=o[2].split("@").pop()||"",d=/^(\[[^\]]+\])(:|$)/.exec(a);if(d){const c=d[1];return{host:c,port:parsePort(a.substr(c.length+1))}}else{const[c,j]=a.split(":");return{host:c,port:parsePort(j)}}}function parsePort(s){if(!s)return null;const e=Number(s);return isNaN(e)?null:e}function emitEmulatorWarning(){function s(){const e=document.createElement("p"),o=e.style;e.innerText="Running in emulator mode. Do not use with production credentials.",o.position="fixed",o.width="100%",o.backgroundColor="#ffffff",o.border=".1em solid #000000",o.color="#b50000",o.bottom="0px",o.left="0px",o.margin="0px",o.zIndex="10000",o.textAlign="center",e.classList.add("firebase-emulator-warning"),document.body.appendChild(e)}typeof console<"u"&&typeof console.info=="function"&&console.info("WARNING: You are using the Auth Emulator, which is intended for local testing only.  Do not use with production credentials."),typeof window<"u"&&typeof document<"u"&&(document.readyState==="loading"?window.addEventListener("DOMContentLoaded",s):s())}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class AuthCredential{constructor(e,o){this.providerId=e,this.signInMethod=o}toJSON(){return debugFail("not implemented")}_getIdTokenResponse(e){return debugFail("not implemented")}_linkToIdToken(e,o){return debugFail("not implemented")}_getReauthenticationResolver(e){return debugFail("not implemented")}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function signInWithIdp(s,e){return _performSignInRequest(s,"POST","/v1/accounts:signInWithIdp",_addTidIfNecessary(s,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const IDP_REQUEST_URI$1="http://localhost";class OAuthCredential extends AuthCredential{constructor(){super(...arguments),this.pendingToken=null}static _fromParams(e){const o=new OAuthCredential(e.providerId,e.signInMethod);return e.idToken||e.accessToken?(e.idToken&&(o.idToken=e.idToken),e.accessToken&&(o.accessToken=e.accessToken),e.nonce&&!e.pendingToken&&(o.nonce=e.nonce),e.pendingToken&&(o.pendingToken=e.pendingToken)):e.oauthToken&&e.oauthTokenSecret?(o.accessToken=e.oauthToken,o.secret=e.oauthTokenSecret):_fail("argument-error"),o}toJSON(){return{idToken:this.idToken,accessToken:this.accessToken,secret:this.secret,nonce:this.nonce,pendingToken:this.pendingToken,providerId:this.providerId,signInMethod:this.signInMethod}}static fromJSON(e){const o=typeof e=="string"?JSON.parse(e):e,{providerId:a,signInMethod:d}=o,c=__rest(o,["providerId","signInMethod"]);if(!a||!d)return null;const j=new OAuthCredential(a,d);return j.idToken=c.idToken||void 0,j.accessToken=c.accessToken||void 0,j.secret=c.secret,j.nonce=c.nonce,j.pendingToken=c.pendingToken||null,j}_getIdTokenResponse(e){const o=this.buildRequest();return signInWithIdp(e,o)}_linkToIdToken(e,o){const a=this.buildRequest();return a.idToken=o,signInWithIdp(e,a)}_getReauthenticationResolver(e){const o=this.buildRequest();return o.autoCreate=!1,signInWithIdp(e,o)}buildRequest(){const e={requestUri:IDP_REQUEST_URI$1,returnSecureToken:!0};if(this.pendingToken)e.pendingToken=this.pendingToken;else{const o={};this.idToken&&(o.id_token=this.idToken),this.accessToken&&(o.access_token=this.accessToken),this.secret&&(o.oauth_token_secret=this.secret),o.providerId=this.providerId,this.nonce&&!this.pendingToken&&(o.nonce=this.nonce),e.postBody=querystring(o)}return e}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class FederatedAuthProvider{constructor(e){this.providerId=e,this.defaultLanguageCode=null,this.customParameters={}}setDefaultLanguage(e){this.defaultLanguageCode=e}setCustomParameters(e){return this.customParameters=e,this}getCustomParameters(){return this.customParameters}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class BaseOAuthProvider extends FederatedAuthProvider{constructor(){super(...arguments),this.scopes=[]}addScope(e){return this.scopes.includes(e)||this.scopes.push(e),this}getScopes(){return[...this.scopes]}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class FacebookAuthProvider extends BaseOAuthProvider{constructor(){super("facebook.com")}static credential(e){return OAuthCredential._fromParams({providerId:FacebookAuthProvider.PROVIDER_ID,signInMethod:FacebookAuthProvider.FACEBOOK_SIGN_IN_METHOD,accessToken:e})}static credentialFromResult(e){return FacebookAuthProvider.credentialFromTaggedObject(e)}static credentialFromError(e){return FacebookAuthProvider.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e||!("oauthAccessToken"in e)||!e.oauthAccessToken)return null;try{return FacebookAuthProvider.credential(e.oauthAccessToken)}catch{return null}}}FacebookAuthProvider.FACEBOOK_SIGN_IN_METHOD="facebook.com";FacebookAuthProvider.PROVIDER_ID="facebook.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class GoogleAuthProvider extends BaseOAuthProvider{constructor(){super("google.com"),this.addScope("profile")}static credential(e,o){return OAuthCredential._fromParams({providerId:GoogleAuthProvider.PROVIDER_ID,signInMethod:GoogleAuthProvider.GOOGLE_SIGN_IN_METHOD,idToken:e,accessToken:o})}static credentialFromResult(e){return GoogleAuthProvider.credentialFromTaggedObject(e)}static credentialFromError(e){return GoogleAuthProvider.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e)return null;const{oauthIdToken:o,oauthAccessToken:a}=e;if(!o&&!a)return null;try{return GoogleAuthProvider.credential(o,a)}catch{return null}}}GoogleAuthProvider.GOOGLE_SIGN_IN_METHOD="google.com";GoogleAuthProvider.PROVIDER_ID="google.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class GithubAuthProvider extends BaseOAuthProvider{constructor(){super("github.com")}static credential(e){return OAuthCredential._fromParams({providerId:GithubAuthProvider.PROVIDER_ID,signInMethod:GithubAuthProvider.GITHUB_SIGN_IN_METHOD,accessToken:e})}static credentialFromResult(e){return GithubAuthProvider.credentialFromTaggedObject(e)}static credentialFromError(e){return GithubAuthProvider.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e||!("oauthAccessToken"in e)||!e.oauthAccessToken)return null;try{return GithubAuthProvider.credential(e.oauthAccessToken)}catch{return null}}}GithubAuthProvider.GITHUB_SIGN_IN_METHOD="github.com";GithubAuthProvider.PROVIDER_ID="github.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class TwitterAuthProvider extends BaseOAuthProvider{constructor(){super("twitter.com")}static credential(e,o){return OAuthCredential._fromParams({providerId:TwitterAuthProvider.PROVIDER_ID,signInMethod:TwitterAuthProvider.TWITTER_SIGN_IN_METHOD,oauthToken:e,oauthTokenSecret:o})}static credentialFromResult(e){return TwitterAuthProvider.credentialFromTaggedObject(e)}static credentialFromError(e){return TwitterAuthProvider.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e)return null;const{oauthAccessToken:o,oauthTokenSecret:a}=e;if(!o||!a)return null;try{return TwitterAuthProvider.credential(o,a)}catch{return null}}}TwitterAuthProvider.TWITTER_SIGN_IN_METHOD="twitter.com";TwitterAuthProvider.PROVIDER_ID="twitter.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class UserCredentialImpl{constructor(e){this.user=e.user,this.providerId=e.providerId,this._tokenResponse=e._tokenResponse,this.operationType=e.operationType}static async _fromIdTokenResponse(e,o,a,d=!1){const c=await UserImpl._fromIdTokenResponse(e,a,d),j=providerIdForResponse(a);return new UserCredentialImpl({user:c,providerId:j,_tokenResponse:a,operationType:o})}static async _forOperation(e,o,a){await e._updateTokensIfNecessary(a,!0);const d=providerIdForResponse(a);return new UserCredentialImpl({user:e,providerId:d,_tokenResponse:a,operationType:o})}}function providerIdForResponse(s){return s.providerId?s.providerId:"phoneNumber"in s?"phone":null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class MultiFactorError extends FirebaseError{constructor(e,o,a,d){var c;super(o.code,o.message),this.operationType=a,this.user=d,Object.setPrototypeOf(this,MultiFactorError.prototype),this.customData={appName:e.name,tenantId:(c=e.tenantId)!==null&&c!==void 0?c:void 0,_serverResponse:o.customData._serverResponse,operationType:a}}static _fromErrorAndOperation(e,o,a,d){return new MultiFactorError(e,o,a,d)}}function _processCredentialSavingMfaContextIfNecessary(s,e,o,a){return(e==="reauthenticate"?o._getReauthenticationResolver(s):o._getIdTokenResponse(s)).catch(c=>{throw c.code==="auth/multi-factor-auth-required"?MultiFactorError._fromErrorAndOperation(s,c,e,a):c})}async function _link$1(s,e,o=!1){const a=await _logoutIfInvalidated(s,e._linkToIdToken(s.auth,await s.getIdToken()),o);return UserCredentialImpl._forOperation(s,"link",a)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function _reauthenticate(s,e,o=!1){const{auth:a}=s;if(_isFirebaseServerApp(a.app))return Promise.reject(_serverAppCurrentUserOperationNotSupportedError(a));const d="reauthenticate";try{const c=await _logoutIfInvalidated(s,_processCredentialSavingMfaContextIfNecessary(a,d,e,s),o);_assert(c.idToken,a,"internal-error");const j=_parseToken(c.idToken);_assert(j,a,"internal-error");const{sub:_e}=j;return _assert(s.uid===_e,a,"user-mismatch"),UserCredentialImpl._forOperation(s,d,c)}catch(c){throw(c==null?void 0:c.code)==="auth/user-not-found"&&_fail(a,"user-mismatch"),c}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function _signInWithCredential(s,e,o=!1){if(_isFirebaseServerApp(s.app))return Promise.reject(_serverAppCurrentUserOperationNotSupportedError(s));const a="signIn",d=await _processCredentialSavingMfaContextIfNecessary(s,a,e),c=await UserCredentialImpl._fromIdTokenResponse(s,a,d);return o||await s._updateCurrentUser(c.user),c}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function setPersistence(s,e){return getModularInstance(s).setPersistence(e)}function onIdTokenChanged(s,e,o,a){return getModularInstance(s).onIdTokenChanged(e,o,a)}function beforeAuthStateChanged(s,e,o){return getModularInstance(s).beforeAuthStateChanged(e,o)}function onAuthStateChanged(s,e,o,a){return getModularInstance(s).onAuthStateChanged(e,o,a)}function signOut(s){return getModularInstance(s).signOut()}const STORAGE_AVAILABLE_KEY="__sak";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class BrowserPersistenceClass{constructor(e,o){this.storageRetriever=e,this.type=o}_isAvailable(){try{return this.storage?(this.storage.setItem(STORAGE_AVAILABLE_KEY,"1"),this.storage.removeItem(STORAGE_AVAILABLE_KEY),Promise.resolve(!0)):Promise.resolve(!1)}catch{return Promise.resolve(!1)}}_set(e,o){return this.storage.setItem(e,JSON.stringify(o)),Promise.resolve()}_get(e){const o=this.storage.getItem(e);return Promise.resolve(o?JSON.parse(o):null)}_remove(e){return this.storage.removeItem(e),Promise.resolve()}get storage(){return this.storageRetriever()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const _POLLING_INTERVAL_MS$1=1e3,IE10_LOCAL_STORAGE_SYNC_DELAY=10;class BrowserLocalPersistence extends BrowserPersistenceClass{constructor(){super(()=>window.localStorage,"LOCAL"),this.boundEventHandler=(e,o)=>this.onStorageEvent(e,o),this.listeners={},this.localCache={},this.pollTimer=null,this.fallbackToPolling=_isMobileBrowser(),this._shouldAllowMigration=!0}forAllChangedKeys(e){for(const o of Object.keys(this.listeners)){const a=this.storage.getItem(o),d=this.localCache[o];a!==d&&e(o,d,a)}}onStorageEvent(e,o=!1){if(!e.key){this.forAllChangedKeys((j,_e,pt)=>{this.notifyListeners(j,pt)});return}const a=e.key;o?this.detachListener():this.stopPolling();const d=()=>{const j=this.storage.getItem(a);!o&&this.localCache[a]===j||this.notifyListeners(a,j)},c=this.storage.getItem(a);_isIE10()&&c!==e.newValue&&e.newValue!==e.oldValue?setTimeout(d,IE10_LOCAL_STORAGE_SYNC_DELAY):d()}notifyListeners(e,o){this.localCache[e]=o;const a=this.listeners[e];if(a)for(const d of Array.from(a))d(o&&JSON.parse(o))}startPolling(){this.stopPolling(),this.pollTimer=setInterval(()=>{this.forAllChangedKeys((e,o,a)=>{this.onStorageEvent(new StorageEvent("storage",{key:e,oldValue:o,newValue:a}),!0)})},_POLLING_INTERVAL_MS$1)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}attachListener(){window.addEventListener("storage",this.boundEventHandler)}detachListener(){window.removeEventListener("storage",this.boundEventHandler)}_addListener(e,o){Object.keys(this.listeners).length===0&&(this.fallbackToPolling?this.startPolling():this.attachListener()),this.listeners[e]||(this.listeners[e]=new Set,this.localCache[e]=this.storage.getItem(e)),this.listeners[e].add(o)}_removeListener(e,o){this.listeners[e]&&(this.listeners[e].delete(o),this.listeners[e].size===0&&delete this.listeners[e]),Object.keys(this.listeners).length===0&&(this.detachListener(),this.stopPolling())}async _set(e,o){await super._set(e,o),this.localCache[e]=JSON.stringify(o)}async _get(e){const o=await super._get(e);return this.localCache[e]=JSON.stringify(o),o}async _remove(e){await super._remove(e),delete this.localCache[e]}}BrowserLocalPersistence.type="LOCAL";const browserLocalPersistence=BrowserLocalPersistence;/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class BrowserSessionPersistence extends BrowserPersistenceClass{constructor(){super(()=>window.sessionStorage,"SESSION")}_addListener(e,o){}_removeListener(e,o){}}BrowserSessionPersistence.type="SESSION";const browserSessionPersistence=BrowserSessionPersistence;/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function _allSettled(s){return Promise.all(s.map(async e=>{try{return{fulfilled:!0,value:await e}}catch(o){return{fulfilled:!1,reason:o}}}))}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Receiver{constructor(e){this.eventTarget=e,this.handlersMap={},this.boundEventHandler=this.handleEvent.bind(this)}static _getInstance(e){const o=this.receivers.find(d=>d.isListeningto(e));if(o)return o;const a=new Receiver(e);return this.receivers.push(a),a}isListeningto(e){return this.eventTarget===e}async handleEvent(e){const o=e,{eventId:a,eventType:d,data:c}=o.data,j=this.handlersMap[d];if(!(j!=null&&j.size))return;o.ports[0].postMessage({status:"ack",eventId:a,eventType:d});const _e=Array.from(j).map(async yt=>yt(o.origin,c)),pt=await _allSettled(_e);o.ports[0].postMessage({status:"done",eventId:a,eventType:d,response:pt})}_subscribe(e,o){Object.keys(this.handlersMap).length===0&&this.eventTarget.addEventListener("message",this.boundEventHandler),this.handlersMap[e]||(this.handlersMap[e]=new Set),this.handlersMap[e].add(o)}_unsubscribe(e,o){this.handlersMap[e]&&o&&this.handlersMap[e].delete(o),(!o||this.handlersMap[e].size===0)&&delete this.handlersMap[e],Object.keys(this.handlersMap).length===0&&this.eventTarget.removeEventListener("message",this.boundEventHandler)}}Receiver.receivers=[];/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function _generateEventId(s="",e=10){let o="";for(let a=0;a<e;a++)o+=Math.floor(Math.random()*10);return s+o}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Sender{constructor(e){this.target=e,this.handlers=new Set}removeMessageHandler(e){e.messageChannel&&(e.messageChannel.port1.removeEventListener("message",e.onMessage),e.messageChannel.port1.close()),this.handlers.delete(e)}async _send(e,o,a=50){const d=typeof MessageChannel<"u"?new MessageChannel:null;if(!d)throw new Error("connection_unavailable");let c,j;return new Promise((_e,pt)=>{const yt=_generateEventId("",20);d.port1.start();const ct=setTimeout(()=>{pt(new Error("unsupported_event"))},a);j={messageChannel:d,onMessage(Ct){const qt=Ct;if(qt.data.eventId===yt)switch(qt.data.status){case"ack":clearTimeout(ct),c=setTimeout(()=>{pt(new Error("timeout"))},3e3);break;case"done":clearTimeout(c),_e(qt.data.response);break;default:clearTimeout(ct),clearTimeout(c),pt(new Error("invalid_response"));break}}},this.handlers.add(j),d.port1.addEventListener("message",j.onMessage),this.target.postMessage({eventType:e,eventId:yt,data:o},[d.port2])}).finally(()=>{j&&this.removeMessageHandler(j)})}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function _window(){return window}function _setWindowLocation(s){_window().location.href=s}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function _isWorker(){return typeof _window().WorkerGlobalScope<"u"&&typeof _window().importScripts=="function"}async function _getActiveServiceWorker(){if(!(navigator!=null&&navigator.serviceWorker))return null;try{return(await navigator.serviceWorker.ready).active}catch{return null}}function _getServiceWorkerController(){var s;return((s=navigator==null?void 0:navigator.serviceWorker)===null||s===void 0?void 0:s.controller)||null}function _getWorkerGlobalScope(){return _isWorker()?self:null}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const DB_NAME="firebaseLocalStorageDb",DB_VERSION=1,DB_OBJECTSTORE_NAME="firebaseLocalStorage",DB_DATA_KEYPATH="fbase_key";class DBPromise{constructor(e){this.request=e}toPromise(){return new Promise((e,o)=>{this.request.addEventListener("success",()=>{e(this.request.result)}),this.request.addEventListener("error",()=>{o(this.request.error)})})}}function getObjectStore(s,e){return s.transaction([DB_OBJECTSTORE_NAME],e?"readwrite":"readonly").objectStore(DB_OBJECTSTORE_NAME)}function _deleteDatabase(){const s=indexedDB.deleteDatabase(DB_NAME);return new DBPromise(s).toPromise()}function _openDatabase(){const s=indexedDB.open(DB_NAME,DB_VERSION);return new Promise((e,o)=>{s.addEventListener("error",()=>{o(s.error)}),s.addEventListener("upgradeneeded",()=>{const a=s.result;try{a.createObjectStore(DB_OBJECTSTORE_NAME,{keyPath:DB_DATA_KEYPATH})}catch(d){o(d)}}),s.addEventListener("success",async()=>{const a=s.result;a.objectStoreNames.contains(DB_OBJECTSTORE_NAME)?e(a):(a.close(),await _deleteDatabase(),e(await _openDatabase()))})})}async function _putObject(s,e,o){const a=getObjectStore(s,!0).put({[DB_DATA_KEYPATH]:e,value:o});return new DBPromise(a).toPromise()}async function getObject(s,e){const o=getObjectStore(s,!1).get(e),a=await new DBPromise(o).toPromise();return a===void 0?null:a.value}function _deleteObject(s,e){const o=getObjectStore(s,!0).delete(e);return new DBPromise(o).toPromise()}const _POLLING_INTERVAL_MS=800,_TRANSACTION_RETRY_COUNT=3;class IndexedDBLocalPersistence{constructor(){this.type="LOCAL",this._shouldAllowMigration=!0,this.listeners={},this.localCache={},this.pollTimer=null,this.pendingWrites=0,this.receiver=null,this.sender=null,this.serviceWorkerReceiverAvailable=!1,this.activeServiceWorker=null,this._workerInitializationPromise=this.initializeServiceWorkerMessaging().then(()=>{},()=>{})}async _openDb(){return this.db?this.db:(this.db=await _openDatabase(),this.db)}async _withRetries(e){let o=0;for(;;)try{const a=await this._openDb();return await e(a)}catch(a){if(o++>_TRANSACTION_RETRY_COUNT)throw a;this.db&&(this.db.close(),this.db=void 0)}}async initializeServiceWorkerMessaging(){return _isWorker()?this.initializeReceiver():this.initializeSender()}async initializeReceiver(){this.receiver=Receiver._getInstance(_getWorkerGlobalScope()),this.receiver._subscribe("keyChanged",async(e,o)=>({keyProcessed:(await this._poll()).includes(o.key)})),this.receiver._subscribe("ping",async(e,o)=>["keyChanged"])}async initializeSender(){var e,o;if(this.activeServiceWorker=await _getActiveServiceWorker(),!this.activeServiceWorker)return;this.sender=new Sender(this.activeServiceWorker);const a=await this.sender._send("ping",{},800);a&&!((e=a[0])===null||e===void 0)&&e.fulfilled&&!((o=a[0])===null||o===void 0)&&o.value.includes("keyChanged")&&(this.serviceWorkerReceiverAvailable=!0)}async notifyServiceWorker(e){if(!(!this.sender||!this.activeServiceWorker||_getServiceWorkerController()!==this.activeServiceWorker))try{await this.sender._send("keyChanged",{key:e},this.serviceWorkerReceiverAvailable?800:50)}catch{}}async _isAvailable(){try{if(!indexedDB)return!1;const e=await _openDatabase();return await _putObject(e,STORAGE_AVAILABLE_KEY,"1"),await _deleteObject(e,STORAGE_AVAILABLE_KEY),!0}catch{}return!1}async _withPendingWrite(e){this.pendingWrites++;try{await e()}finally{this.pendingWrites--}}async _set(e,o){return this._withPendingWrite(async()=>(await this._withRetries(a=>_putObject(a,e,o)),this.localCache[e]=o,this.notifyServiceWorker(e)))}async _get(e){const o=await this._withRetries(a=>getObject(a,e));return this.localCache[e]=o,o}async _remove(e){return this._withPendingWrite(async()=>(await this._withRetries(o=>_deleteObject(o,e)),delete this.localCache[e],this.notifyServiceWorker(e)))}async _poll(){const e=await this._withRetries(d=>{const c=getObjectStore(d,!1).getAll();return new DBPromise(c).toPromise()});if(!e)return[];if(this.pendingWrites!==0)return[];const o=[],a=new Set;if(e.length!==0)for(const{fbase_key:d,value:c}of e)a.add(d),JSON.stringify(this.localCache[d])!==JSON.stringify(c)&&(this.notifyListeners(d,c),o.push(d));for(const d of Object.keys(this.localCache))this.localCache[d]&&!a.has(d)&&(this.notifyListeners(d,null),o.push(d));return o}notifyListeners(e,o){this.localCache[e]=o;const a=this.listeners[e];if(a)for(const d of Array.from(a))d(o)}startPolling(){this.stopPolling(),this.pollTimer=setInterval(async()=>this._poll(),_POLLING_INTERVAL_MS)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}_addListener(e,o){Object.keys(this.listeners).length===0&&this.startPolling(),this.listeners[e]||(this.listeners[e]=new Set,this._get(e)),this.listeners[e].add(o)}_removeListener(e,o){this.listeners[e]&&(this.listeners[e].delete(o),this.listeners[e].size===0&&delete this.listeners[e]),Object.keys(this.listeners).length===0&&this.stopPolling()}}IndexedDBLocalPersistence.type="LOCAL";const indexedDBLocalPersistence=IndexedDBLocalPersistence;new Delay(3e4,6e4);/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function _withDefaultResolver(s,e){return e?_getInstance(e):(_assert(s._popupRedirectResolver,s,"argument-error"),s._popupRedirectResolver)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class IdpCredential extends AuthCredential{constructor(e){super("custom","custom"),this.params=e}_getIdTokenResponse(e){return signInWithIdp(e,this._buildIdpRequest())}_linkToIdToken(e,o){return signInWithIdp(e,this._buildIdpRequest(o))}_getReauthenticationResolver(e){return signInWithIdp(e,this._buildIdpRequest())}_buildIdpRequest(e){const o={requestUri:this.params.requestUri,sessionId:this.params.sessionId,postBody:this.params.postBody,tenantId:this.params.tenantId,pendingToken:this.params.pendingToken,returnSecureToken:!0,returnIdpCredential:!0};return e&&(o.idToken=e),o}}function _signIn(s){return _signInWithCredential(s.auth,new IdpCredential(s),s.bypassAuthState)}function _reauth(s){const{auth:e,user:o}=s;return _assert(o,e,"internal-error"),_reauthenticate(o,new IdpCredential(s),s.bypassAuthState)}async function _link(s){const{auth:e,user:o}=s;return _assert(o,e,"internal-error"),_link$1(o,new IdpCredential(s),s.bypassAuthState)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class AbstractPopupRedirectOperation{constructor(e,o,a,d,c=!1){this.auth=e,this.resolver=a,this.user=d,this.bypassAuthState=c,this.pendingPromise=null,this.eventManager=null,this.filter=Array.isArray(o)?o:[o]}execute(){return new Promise(async(e,o)=>{this.pendingPromise={resolve:e,reject:o};try{this.eventManager=await this.resolver._initialize(this.auth),await this.onExecution(),this.eventManager.registerConsumer(this)}catch(a){this.reject(a)}})}async onAuthEvent(e){const{urlResponse:o,sessionId:a,postBody:d,tenantId:c,error:j,type:_e}=e;if(j){this.reject(j);return}const pt={auth:this.auth,requestUri:o,sessionId:a,tenantId:c||void 0,postBody:d||void 0,user:this.user,bypassAuthState:this.bypassAuthState};try{this.resolve(await this.getIdpTask(_e)(pt))}catch(yt){this.reject(yt)}}onError(e){this.reject(e)}getIdpTask(e){switch(e){case"signInViaPopup":case"signInViaRedirect":return _signIn;case"linkViaPopup":case"linkViaRedirect":return _link;case"reauthViaPopup":case"reauthViaRedirect":return _reauth;default:_fail(this.auth,"internal-error")}}resolve(e){debugAssert(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.resolve(e),this.unregisterAndCleanUp()}reject(e){debugAssert(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.reject(e),this.unregisterAndCleanUp()}unregisterAndCleanUp(){this.eventManager&&this.eventManager.unregisterConsumer(this),this.pendingPromise=null,this.cleanUp()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const _POLL_WINDOW_CLOSE_TIMEOUT=new Delay(2e3,1e4);async function signInWithPopup(s,e,o){if(_isFirebaseServerApp(s.app))return Promise.reject(_createError(s,"operation-not-supported-in-this-environment"));const a=_castAuth(s);_assertInstanceOf(s,e,FederatedAuthProvider);const d=_withDefaultResolver(a,o);return new PopupOperation(a,"signInViaPopup",e,d).executeNotNull()}class PopupOperation extends AbstractPopupRedirectOperation{constructor(e,o,a,d,c){super(e,o,d,c),this.provider=a,this.authWindow=null,this.pollId=null,PopupOperation.currentPopupAction&&PopupOperation.currentPopupAction.cancel(),PopupOperation.currentPopupAction=this}async executeNotNull(){const e=await this.execute();return _assert(e,this.auth,"internal-error"),e}async onExecution(){debugAssert(this.filter.length===1,"Popup operations only handle one event");const e=_generateEventId();this.authWindow=await this.resolver._openPopup(this.auth,this.provider,this.filter[0],e),this.authWindow.associatedEvent=e,this.resolver._originValidation(this.auth).catch(o=>{this.reject(o)}),this.resolver._isIframeWebStorageSupported(this.auth,o=>{o||this.reject(_createError(this.auth,"web-storage-unsupported"))}),this.pollUserCancellation()}get eventId(){var e;return((e=this.authWindow)===null||e===void 0?void 0:e.associatedEvent)||null}cancel(){this.reject(_createError(this.auth,"cancelled-popup-request"))}cleanUp(){this.authWindow&&this.authWindow.close(),this.pollId&&window.clearTimeout(this.pollId),this.authWindow=null,this.pollId=null,PopupOperation.currentPopupAction=null}pollUserCancellation(){const e=()=>{var o,a;if(!((a=(o=this.authWindow)===null||o===void 0?void 0:o.window)===null||a===void 0)&&a.closed){this.pollId=window.setTimeout(()=>{this.pollId=null,this.reject(_createError(this.auth,"popup-closed-by-user"))},8e3);return}this.pollId=window.setTimeout(e,_POLL_WINDOW_CLOSE_TIMEOUT.get())};e()}}PopupOperation.currentPopupAction=null;/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const PENDING_REDIRECT_KEY="pendingRedirect",redirectOutcomeMap=new Map;class RedirectAction extends AbstractPopupRedirectOperation{constructor(e,o,a=!1){super(e,["signInViaRedirect","linkViaRedirect","reauthViaRedirect","unknown"],o,void 0,a),this.eventId=null}async execute(){let e=redirectOutcomeMap.get(this.auth._key());if(!e){try{const a=await _getAndClearPendingRedirectStatus(this.resolver,this.auth)?await super.execute():null;e=()=>Promise.resolve(a)}catch(o){e=()=>Promise.reject(o)}redirectOutcomeMap.set(this.auth._key(),e)}return this.bypassAuthState||redirectOutcomeMap.set(this.auth._key(),()=>Promise.resolve(null)),e()}async onAuthEvent(e){if(e.type==="signInViaRedirect")return super.onAuthEvent(e);if(e.type==="unknown"){this.resolve(null);return}if(e.eventId){const o=await this.auth._redirectUserForId(e.eventId);if(o)return this.user=o,super.onAuthEvent(e);this.resolve(null)}}async onExecution(){}cleanUp(){}}async function _getAndClearPendingRedirectStatus(s,e){const o=pendingRedirectKey(e),a=resolverPersistence(s);if(!await a._isAvailable())return!1;const d=await a._get(o)==="true";return await a._remove(o),d}function _overrideRedirectResult(s,e){redirectOutcomeMap.set(s._key(),e)}function resolverPersistence(s){return _getInstance(s._redirectPersistence)}function pendingRedirectKey(s){return _persistenceKeyName(PENDING_REDIRECT_KEY,s.config.apiKey,s.name)}async function _getRedirectResult(s,e,o=!1){if(_isFirebaseServerApp(s.app))return Promise.reject(_serverAppCurrentUserOperationNotSupportedError(s));const a=_castAuth(s),d=_withDefaultResolver(a,e),j=await new RedirectAction(a,d,o).execute();return j&&!o&&(delete j.user._redirectEventId,await a._persistUserIfCurrent(j.user),await a._setRedirectUser(null,e)),j}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const EVENT_DUPLICATION_CACHE_DURATION_MS=10*60*1e3;class AuthEventManager{constructor(e){this.auth=e,this.cachedEventUids=new Set,this.consumers=new Set,this.queuedRedirectEvent=null,this.hasHandledPotentialRedirect=!1,this.lastProcessedEventTime=Date.now()}registerConsumer(e){this.consumers.add(e),this.queuedRedirectEvent&&this.isEventForConsumer(this.queuedRedirectEvent,e)&&(this.sendToConsumer(this.queuedRedirectEvent,e),this.saveEventToCache(this.queuedRedirectEvent),this.queuedRedirectEvent=null)}unregisterConsumer(e){this.consumers.delete(e)}onEvent(e){if(this.hasEventBeenHandled(e))return!1;let o=!1;return this.consumers.forEach(a=>{this.isEventForConsumer(e,a)&&(o=!0,this.sendToConsumer(e,a),this.saveEventToCache(e))}),this.hasHandledPotentialRedirect||!isRedirectEvent(e)||(this.hasHandledPotentialRedirect=!0,o||(this.queuedRedirectEvent=e,o=!0)),o}sendToConsumer(e,o){var a;if(e.error&&!isNullRedirectEvent(e)){const d=((a=e.error.code)===null||a===void 0?void 0:a.split("auth/")[1])||"internal-error";o.onError(_createError(this.auth,d))}else o.onAuthEvent(e)}isEventForConsumer(e,o){const a=o.eventId===null||!!e.eventId&&e.eventId===o.eventId;return o.filter.includes(e.type)&&a}hasEventBeenHandled(e){return Date.now()-this.lastProcessedEventTime>=EVENT_DUPLICATION_CACHE_DURATION_MS&&this.cachedEventUids.clear(),this.cachedEventUids.has(eventUid(e))}saveEventToCache(e){this.cachedEventUids.add(eventUid(e)),this.lastProcessedEventTime=Date.now()}}function eventUid(s){return[s.type,s.eventId,s.sessionId,s.tenantId].filter(e=>e).join("-")}function isNullRedirectEvent({type:s,error:e}){return s==="unknown"&&(e==null?void 0:e.code)==="auth/no-auth-event"}function isRedirectEvent(s){switch(s.type){case"signInViaRedirect":case"linkViaRedirect":case"reauthViaRedirect":return!0;case"unknown":return isNullRedirectEvent(s);default:return!1}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function _getProjectConfig(s,e={}){return _performApiRequest(s,"GET","/v1/projects",e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const IP_ADDRESS_REGEX=/^\d{1,3}\.\d{1,3}\.\d{1,3}\.\d{1,3}$/,HTTP_REGEX=/^https?/;async function _validateOrigin(s){if(s.config.emulator)return;const{authorizedDomains:e}=await _getProjectConfig(s);for(const o of e)try{if(matchDomain(o))return}catch{}_fail(s,"unauthorized-domain")}function matchDomain(s){const e=_getCurrentUrl(),{protocol:o,hostname:a}=new URL(e);if(s.startsWith("chrome-extension://")){const j=new URL(s);return j.hostname===""&&a===""?o==="chrome-extension:"&&s.replace("chrome-extension://","")===e.replace("chrome-extension://",""):o==="chrome-extension:"&&j.hostname===a}if(!HTTP_REGEX.test(o))return!1;if(IP_ADDRESS_REGEX.test(s))return a===s;const d=s.replace(/\./g,"\\.");return new RegExp("^(.+\\."+d+"|"+d+")$","i").test(a)}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const NETWORK_TIMEOUT=new Delay(3e4,6e4);function resetUnloadedGapiModules(){const s=_window().___jsl;if(s!=null&&s.H){for(const e of Object.keys(s.H))if(s.H[e].r=s.H[e].r||[],s.H[e].L=s.H[e].L||[],s.H[e].r=[...s.H[e].L],s.CP)for(let o=0;o<s.CP.length;o++)s.CP[o]=null}}function loadGapi(s){return new Promise((e,o)=>{var a,d,c;function j(){resetUnloadedGapiModules(),gapi.load("gapi.iframes",{callback:()=>{e(gapi.iframes.getContext())},ontimeout:()=>{resetUnloadedGapiModules(),o(_createError(s,"network-request-failed"))},timeout:NETWORK_TIMEOUT.get()})}if(!((d=(a=_window().gapi)===null||a===void 0?void 0:a.iframes)===null||d===void 0)&&d.Iframe)e(gapi.iframes.getContext());else if(!((c=_window().gapi)===null||c===void 0)&&c.load)j();else{const _e=_generateCallbackName("iframefcb");return _window()[_e]=()=>{gapi.load?j():o(_createError(s,"network-request-failed"))},_loadJS(`${_gapiScriptUrl()}?onload=${_e}`).catch(pt=>o(pt))}}).catch(e=>{throw cachedGApiLoader=null,e})}let cachedGApiLoader=null;function _loadGapi(s){return cachedGApiLoader=cachedGApiLoader||loadGapi(s),cachedGApiLoader}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const PING_TIMEOUT=new Delay(5e3,15e3),IFRAME_PATH="__/auth/iframe",EMULATED_IFRAME_PATH="emulator/auth/iframe",IFRAME_ATTRIBUTES={style:{position:"absolute",top:"-100px",width:"1px",height:"1px"},"aria-hidden":"true",tabindex:"-1"},EID_FROM_APIHOST=new Map([["identitytoolkit.googleapis.com","p"],["staging-identitytoolkit.sandbox.googleapis.com","s"],["test-identitytoolkit.sandbox.googleapis.com","t"]]);function getIframeUrl(s){const e=s.config;_assert(e.authDomain,s,"auth-domain-config-required");const o=e.emulator?_emulatorUrl(e,EMULATED_IFRAME_PATH):`https://${s.config.authDomain}/${IFRAME_PATH}`,a={apiKey:e.apiKey,appName:s.name,v:SDK_VERSION},d=EID_FROM_APIHOST.get(s.config.apiHost);d&&(a.eid=d);const c=s._getFrameworks();return c.length&&(a.fw=c.join(",")),`${o}?${querystring(a).slice(1)}`}async function _openIframe(s){const e=await _loadGapi(s),o=_window().gapi;return _assert(o,s,"internal-error"),e.open({where:document.body,url:getIframeUrl(s),messageHandlersFilter:o.iframes.CROSS_ORIGIN_IFRAMES_FILTER,attributes:IFRAME_ATTRIBUTES,dontclear:!0},a=>new Promise(async(d,c)=>{await a.restyle({setHideOnLeave:!1});const j=_createError(s,"network-request-failed"),_e=_window().setTimeout(()=>{c(j)},PING_TIMEOUT.get());function pt(){_window().clearTimeout(_e),d(a)}a.ping(pt).then(pt,()=>{c(j)})}))}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const BASE_POPUP_OPTIONS={location:"yes",resizable:"yes",statusbar:"yes",toolbar:"no"},DEFAULT_WIDTH=500,DEFAULT_HEIGHT=600,TARGET_BLANK="_blank",FIREFOX_EMPTY_URL="http://localhost";class AuthPopup{constructor(e){this.window=e,this.associatedEvent=null}close(){if(this.window)try{this.window.close()}catch{}}}function _open(s,e,o,a=DEFAULT_WIDTH,d=DEFAULT_HEIGHT){const c=Math.max((window.screen.availHeight-d)/2,0).toString(),j=Math.max((window.screen.availWidth-a)/2,0).toString();let _e="";const pt=Object.assign(Object.assign({},BASE_POPUP_OPTIONS),{width:a.toString(),height:d.toString(),top:c,left:j}),yt=getUA().toLowerCase();o&&(_e=_isChromeIOS(yt)?TARGET_BLANK:o),_isFirefox(yt)&&(e=e||FIREFOX_EMPTY_URL,pt.scrollbars="yes");const ct=Object.entries(pt).reduce((qt,[Ot,Lt])=>`${qt}${Ot}=${Lt},`,"");if(_isIOSStandalone(yt)&&_e!=="_self")return openAsNewWindowIOS(e||"",_e),new AuthPopup(null);const Ct=window.open(e||"",_e,ct);_assert(Ct,s,"popup-blocked");try{Ct.focus()}catch{}return new AuthPopup(Ct)}function openAsNewWindowIOS(s,e){const o=document.createElement("a");o.href=s,o.target=e;const a=document.createEvent("MouseEvent");a.initMouseEvent("click",!0,!0,window,1,0,0,0,0,!1,!1,!1,!1,1,null),o.dispatchEvent(a)}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const WIDGET_PATH="__/auth/handler",EMULATOR_WIDGET_PATH="emulator/auth/handler",FIREBASE_APP_CHECK_FRAGMENT_ID=encodeURIComponent("fac");async function _getRedirectUrl(s,e,o,a,d,c){_assert(s.config.authDomain,s,"auth-domain-config-required"),_assert(s.config.apiKey,s,"invalid-api-key");const j={apiKey:s.config.apiKey,appName:s.name,authType:o,redirectUrl:a,v:SDK_VERSION,eventId:d};if(e instanceof FederatedAuthProvider){e.setDefaultLanguage(s.languageCode),j.providerId=e.providerId||"",isEmpty$1(e.getCustomParameters())||(j.customParameters=JSON.stringify(e.getCustomParameters()));for(const[ct,Ct]of Object.entries({}))j[ct]=Ct}if(e instanceof BaseOAuthProvider){const ct=e.getScopes().filter(Ct=>Ct!=="");ct.length>0&&(j.scopes=ct.join(","))}s.tenantId&&(j.tid=s.tenantId);const _e=j;for(const ct of Object.keys(_e))_e[ct]===void 0&&delete _e[ct];const pt=await s._getAppCheckToken(),yt=pt?`#${FIREBASE_APP_CHECK_FRAGMENT_ID}=${encodeURIComponent(pt)}`:"";return`${getHandlerBase(s)}?${querystring(_e).slice(1)}${yt}`}function getHandlerBase({config:s}){return s.emulator?_emulatorUrl(s,EMULATOR_WIDGET_PATH):`https://${s.authDomain}/${WIDGET_PATH}`}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const WEB_STORAGE_SUPPORT_KEY="webStorageSupport";class BrowserPopupRedirectResolver{constructor(){this.eventManagers={},this.iframes={},this.originValidationPromises={},this._redirectPersistence=browserSessionPersistence,this._completeRedirectFn=_getRedirectResult,this._overrideRedirectResult=_overrideRedirectResult}async _openPopup(e,o,a,d){var c;debugAssert((c=this.eventManagers[e._key()])===null||c===void 0?void 0:c.manager,"_initialize() not called before _openPopup()");const j=await _getRedirectUrl(e,o,a,_getCurrentUrl(),d);return _open(e,j,_generateEventId())}async _openRedirect(e,o,a,d){await this._originValidation(e);const c=await _getRedirectUrl(e,o,a,_getCurrentUrl(),d);return _setWindowLocation(c),new Promise(()=>{})}_initialize(e){const o=e._key();if(this.eventManagers[o]){const{manager:d,promise:c}=this.eventManagers[o];return d?Promise.resolve(d):(debugAssert(c,"If manager is not set, promise should be"),c)}const a=this.initAndGetManager(e);return this.eventManagers[o]={promise:a},a.catch(()=>{delete this.eventManagers[o]}),a}async initAndGetManager(e){const o=await _openIframe(e),a=new AuthEventManager(e);return o.register("authEvent",d=>(_assert(d==null?void 0:d.authEvent,e,"invalid-auth-event"),{status:a.onEvent(d.authEvent)?"ACK":"ERROR"}),gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER),this.eventManagers[e._key()]={manager:a},this.iframes[e._key()]=o,a}_isIframeWebStorageSupported(e,o){this.iframes[e._key()].send(WEB_STORAGE_SUPPORT_KEY,{type:WEB_STORAGE_SUPPORT_KEY},d=>{var c;const j=(c=d==null?void 0:d[0])===null||c===void 0?void 0:c[WEB_STORAGE_SUPPORT_KEY];j!==void 0&&o(!!j),_fail(e,"internal-error")},gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER)}_originValidation(e){const o=e._key();return this.originValidationPromises[o]||(this.originValidationPromises[o]=_validateOrigin(e)),this.originValidationPromises[o]}get _shouldInitProactively(){return _isMobileBrowser()||_isSafari()||_isIOS()}}const browserPopupRedirectResolver=BrowserPopupRedirectResolver;var name$1="@firebase/auth",version$2="1.10.1";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class AuthInterop{constructor(e){this.auth=e,this.internalListeners=new Map}getUid(){var e;return this.assertAuthConfigured(),((e=this.auth.currentUser)===null||e===void 0?void 0:e.uid)||null}async getToken(e){return this.assertAuthConfigured(),await this.auth._initializationPromise,this.auth.currentUser?{accessToken:await this.auth.currentUser.getIdToken(e)}:null}addAuthTokenListener(e){if(this.assertAuthConfigured(),this.internalListeners.has(e))return;const o=this.auth.onIdTokenChanged(a=>{e((a==null?void 0:a.stsTokenManager.accessToken)||null)});this.internalListeners.set(e,o),this.updateProactiveRefresh()}removeAuthTokenListener(e){this.assertAuthConfigured();const o=this.internalListeners.get(e);o&&(this.internalListeners.delete(e),o(),this.updateProactiveRefresh())}assertAuthConfigured(){_assert(this.auth._initializationPromise,"dependent-sdk-initialized-before-auth")}updateProactiveRefresh(){this.internalListeners.size>0?this.auth._startProactiveRefresh():this.auth._stopProactiveRefresh()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function getVersionForPlatform(s){switch(s){case"Node":return"node";case"ReactNative":return"rn";case"Worker":return"webworker";case"Cordova":return"cordova";case"WebExtension":return"web-extension";default:return}}function registerAuth(s){_registerComponent(new Component("auth",(e,{options:o})=>{const a=e.getProvider("app").getImmediate(),d=e.getProvider("heartbeat"),c=e.getProvider("app-check-internal"),{apiKey:j,authDomain:_e}=a.options;_assert(j&&!j.includes(":"),"invalid-api-key",{appName:a.name});const pt={apiKey:j,authDomain:_e,clientPlatform:s,apiHost:"identitytoolkit.googleapis.com",tokenApiHost:"securetoken.googleapis.com",apiScheme:"https",sdkClientVersion:_getClientVersion(s)},yt=new AuthImpl(a,d,c,pt);return _initializeAuthInstance(yt,o),yt},"PUBLIC").setInstantiationMode("EXPLICIT").setInstanceCreatedCallback((e,o,a)=>{e.getProvider("auth-internal").initialize()})),_registerComponent(new Component("auth-internal",e=>{const o=_castAuth(e.getProvider("auth").getImmediate());return(a=>new AuthInterop(a))(o)},"PRIVATE").setInstantiationMode("EXPLICIT")),registerVersion(name$1,version$2,getVersionForPlatform(s)),registerVersion(name$1,version$2,"esm2017")}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const DEFAULT_ID_TOKEN_MAX_AGE=5*60,authIdTokenMaxAge=getExperimentalSetting("authIdTokenMaxAge")||DEFAULT_ID_TOKEN_MAX_AGE;let lastPostedIdToken=null;const mintCookieFactory=s=>async e=>{const o=e&&await e.getIdTokenResult(),a=o&&(new Date().getTime()-Date.parse(o.issuedAtTime))/1e3;if(a&&a>authIdTokenMaxAge)return;const d=o==null?void 0:o.token;lastPostedIdToken!==d&&(lastPostedIdToken=d,await fetch(s,{method:d?"POST":"DELETE",headers:d?{Authorization:`Bearer ${d}`}:{}}))};function getAuth(s=getApp()){const e=_getProvider(s,"auth");if(e.isInitialized())return e.getImmediate();const o=initializeAuth(s,{popupRedirectResolver:browserPopupRedirectResolver,persistence:[indexedDBLocalPersistence,browserLocalPersistence,browserSessionPersistence]}),a=getExperimentalSetting("authTokenSyncURL");if(a&&typeof isSecureContext=="boolean"&&isSecureContext){const c=new URL(a,location.origin);if(location.origin===c.origin){const j=mintCookieFactory(c.toString());beforeAuthStateChanged(o,j,()=>j(o.currentUser)),onIdTokenChanged(o,_e=>j(_e))}}const d=getDefaultEmulatorHost("auth");return d&&connectAuthEmulator(o,`http://${d}`),o}function getScriptParentElement(){var s,e;return(e=(s=document.getElementsByTagName("head"))===null||s===void 0?void 0:s[0])!==null&&e!==void 0?e:document}_setExternalJSProvider({loadJS(s){return new Promise((e,o)=>{const a=document.createElement("script");a.setAttribute("src",s),a.onload=e,a.onerror=d=>{const c=_createError("internal-error");c.customData=d,o(c)},a.type="text/javascript",a.charset="UTF-8",getScriptParentElement().appendChild(a)})},gapiScript:"https://apis.google.com/js/api.js",recaptchaV2Script:"https://www.google.com/recaptcha/api.js",recaptchaEnterpriseScript:"https://www.google.com/recaptcha/enterprise.js?render="});registerAuth("Browser");/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const DEFAULT_HOST="firebasestorage.googleapis.com",CONFIG_STORAGE_BUCKET_KEY="storageBucket",DEFAULT_MAX_OPERATION_RETRY_TIME=2*60*1e3,DEFAULT_MAX_UPLOAD_RETRY_TIME=10*60*1e3;/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class StorageError extends FirebaseError{constructor(e,o,a=0){super(prependCode(e),`Firebase Storage: ${o} (${prependCode(e)})`),this.status_=a,this.customData={serverResponse:null},this._baseMessage=this.message,Object.setPrototypeOf(this,StorageError.prototype)}get status(){return this.status_}set status(e){this.status_=e}_codeEquals(e){return prependCode(e)===this.code}get serverResponse(){return this.customData.serverResponse}set serverResponse(e){this.customData.serverResponse=e,this.customData.serverResponse?this.message=`${this._baseMessage}
${this.customData.serverResponse}`:this.message=this._baseMessage}}var StorageErrorCode;(function(s){s.UNKNOWN="unknown",s.OBJECT_NOT_FOUND="object-not-found",s.BUCKET_NOT_FOUND="bucket-not-found",s.PROJECT_NOT_FOUND="project-not-found",s.QUOTA_EXCEEDED="quota-exceeded",s.UNAUTHENTICATED="unauthenticated",s.UNAUTHORIZED="unauthorized",s.UNAUTHORIZED_APP="unauthorized-app",s.RETRY_LIMIT_EXCEEDED="retry-limit-exceeded",s.INVALID_CHECKSUM="invalid-checksum",s.CANCELED="canceled",s.INVALID_EVENT_NAME="invalid-event-name",s.INVALID_URL="invalid-url",s.INVALID_DEFAULT_BUCKET="invalid-default-bucket",s.NO_DEFAULT_BUCKET="no-default-bucket",s.CANNOT_SLICE_BLOB="cannot-slice-blob",s.SERVER_FILE_WRONG_SIZE="server-file-wrong-size",s.NO_DOWNLOAD_URL="no-download-url",s.INVALID_ARGUMENT="invalid-argument",s.INVALID_ARGUMENT_COUNT="invalid-argument-count",s.APP_DELETED="app-deleted",s.INVALID_ROOT_OPERATION="invalid-root-operation",s.INVALID_FORMAT="invalid-format",s.INTERNAL_ERROR="internal-error",s.UNSUPPORTED_ENVIRONMENT="unsupported-environment"})(StorageErrorCode||(StorageErrorCode={}));function prependCode(s){return"storage/"+s}function unknown(){const s="An unknown error occurred, please check the error payload for server response.";return new StorageError(StorageErrorCode.UNKNOWN,s)}function objectNotFound(s){return new StorageError(StorageErrorCode.OBJECT_NOT_FOUND,"Object '"+s+"' does not exist.")}function quotaExceeded(s){return new StorageError(StorageErrorCode.QUOTA_EXCEEDED,"Quota for bucket '"+s+"' exceeded, please view quota on https://firebase.google.com/pricing/.")}function unauthenticated(){const s="User is not authenticated, please authenticate using Firebase Authentication and try again.";return new StorageError(StorageErrorCode.UNAUTHENTICATED,s)}function unauthorizedApp(){return new StorageError(StorageErrorCode.UNAUTHORIZED_APP,"This app does not have permission to access Firebase Storage on this project.")}function unauthorized(s){return new StorageError(StorageErrorCode.UNAUTHORIZED,"User does not have permission to access '"+s+"'.")}function retryLimitExceeded(){return new StorageError(StorageErrorCode.RETRY_LIMIT_EXCEEDED,"Max retry time for operation exceeded, please try again.")}function canceled(){return new StorageError(StorageErrorCode.CANCELED,"User canceled the upload/download.")}function invalidUrl(s){return new StorageError(StorageErrorCode.INVALID_URL,"Invalid URL '"+s+"'.")}function invalidDefaultBucket(s){return new StorageError(StorageErrorCode.INVALID_DEFAULT_BUCKET,"Invalid default bucket '"+s+"'.")}function noDefaultBucket(){return new StorageError(StorageErrorCode.NO_DEFAULT_BUCKET,"No default bucket found. Did you set the '"+CONFIG_STORAGE_BUCKET_KEY+"' property when initializing the app?")}function cannotSliceBlob(){return new StorageError(StorageErrorCode.CANNOT_SLICE_BLOB,"Cannot slice blob for upload. Please retry the upload.")}function noDownloadURL(){return new StorageError(StorageErrorCode.NO_DOWNLOAD_URL,"The given file does not have any download URLs.")}function missingPolyFill(s){return new StorageError(StorageErrorCode.UNSUPPORTED_ENVIRONMENT,`${s} is missing. Make sure to install the required polyfills. See https://firebase.google.com/docs/web/environments-js-sdk#polyfills for more information.`)}function invalidArgument(s){return new StorageError(StorageErrorCode.INVALID_ARGUMENT,s)}function appDeleted(){return new StorageError(StorageErrorCode.APP_DELETED,"The Firebase app was deleted.")}function invalidRootOperation(s){return new StorageError(StorageErrorCode.INVALID_ROOT_OPERATION,"The operation '"+s+"' cannot be performed on a root reference, create a non-root reference using child, such as .child('file.png').")}function invalidFormat(s,e){return new StorageError(StorageErrorCode.INVALID_FORMAT,"String does not match format '"+s+"': "+e)}function internalError(s){throw new StorageError(StorageErrorCode.INTERNAL_ERROR,"Internal error: "+s)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Location{constructor(e,o){this.bucket=e,this.path_=o}get path(){return this.path_}get isRoot(){return this.path.length===0}fullServerUrl(){const e=encodeURIComponent;return"/b/"+e(this.bucket)+"/o/"+e(this.path)}bucketOnlyServerUrl(){return"/b/"+encodeURIComponent(this.bucket)+"/o"}static makeFromBucketSpec(e,o){let a;try{a=Location.makeFromUrl(e,o)}catch{return new Location(e,"")}if(a.path==="")return a;throw invalidDefaultBucket(e)}static makeFromUrl(e,o){let a=null;const d="([A-Za-z0-9.\\-_]+)";function c(ar){ar.path.charAt(ar.path.length-1)==="/"&&(ar.path_=ar.path_.slice(0,-1))}const j="(/(.*))?$",_e=new RegExp("^gs://"+d+j,"i"),pt={bucket:1,path:3};function yt(ar){ar.path_=decodeURIComponent(ar.path)}const ct="v[A-Za-z0-9_]+",Ct=o.replace(/[.]/g,"\\."),qt="(/([^?#]*).*)?$",Ot=new RegExp(`^https?://${Ct}/${ct}/b/${d}/o${qt}`,"i"),Lt={bucket:1,path:3},Qt=o===DEFAULT_HOST?"(?:storage.googleapis.com|storage.cloud.google.com)":o,ir="([^?#]*)",er=new RegExp(`^https?://${Qt}/${d}/${ir}`,"i"),sr=[{regex:_e,indices:pt,postModify:c},{regex:Ot,indices:Lt,postModify:yt},{regex:er,indices:{bucket:1,path:2},postModify:yt}];for(let ar=0;ar<sr.length;ar++){const hr=sr[ar],_r=hr.regex.exec(e);if(_r){const dr=_r[hr.indices.bucket];let ur=_r[hr.indices.path];ur||(ur=""),a=new Location(dr,ur),hr.postModify(a);break}}if(a==null)throw invalidUrl(e);return a}}class FailRequest{constructor(e){this.promise_=Promise.reject(e)}getPromise(){return this.promise_}cancel(e=!1){}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function start(s,e,o){let a=1,d=null,c=null,j=!1,_e=0;function pt(){return _e===2}let yt=!1;function ct(...ir){yt||(yt=!0,e.apply(null,ir))}function Ct(ir){d=setTimeout(()=>{d=null,s(Ot,pt())},ir)}function qt(){c&&clearTimeout(c)}function Ot(ir,...er){if(yt){qt();return}if(ir){qt(),ct.call(null,ir,...er);return}if(pt()||j){qt(),ct.call(null,ir,...er);return}a<64&&(a*=2);let sr;_e===1?(_e=2,sr=0):sr=(a+Math.random())*1e3,Ct(sr)}let Lt=!1;function Qt(ir){Lt||(Lt=!0,qt(),!yt&&(d!==null?(ir||(_e=2),clearTimeout(d),Ct(0)):ir||(_e=1)))}return Ct(0),c=setTimeout(()=>{j=!0,Qt(!0)},o),Qt}function stop(s){s(!1)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function isJustDef(s){return s!==void 0}function isNonArrayObject(s){return typeof s=="object"&&!Array.isArray(s)}function isString(s){return typeof s=="string"||s instanceof String}function isNativeBlob(s){return isNativeBlobDefined()&&s instanceof Blob}function isNativeBlobDefined(){return typeof Blob<"u"}function validateNumber(s,e,o,a){if(a<e)throw invalidArgument(`Invalid value for '${s}'. Expected ${e} or greater.`);if(a>o)throw invalidArgument(`Invalid value for '${s}'. Expected ${o} or less.`)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function makeUrl(s,e,o){let a=e;return o==null&&(a=`https://${e}`),`${o}://${a}/v0${s}`}function makeQueryString(s){const e=encodeURIComponent;let o="?";for(const a in s)if(s.hasOwnProperty(a)){const d=e(a)+"="+e(s[a]);o=o+d+"&"}return o=o.slice(0,-1),o}var ErrorCode;(function(s){s[s.NO_ERROR=0]="NO_ERROR",s[s.NETWORK_ERROR=1]="NETWORK_ERROR",s[s.ABORT=2]="ABORT"})(ErrorCode||(ErrorCode={}));/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function isRetryStatusCode(s,e){const o=s>=500&&s<600,d=[408,429].indexOf(s)!==-1,c=e.indexOf(s)!==-1;return o||d||c}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class NetworkRequest{constructor(e,o,a,d,c,j,_e,pt,yt,ct,Ct,qt=!0){this.url_=e,this.method_=o,this.headers_=a,this.body_=d,this.successCodes_=c,this.additionalRetryCodes_=j,this.callback_=_e,this.errorCallback_=pt,this.timeout_=yt,this.progressCallback_=ct,this.connectionFactory_=Ct,this.retry=qt,this.pendingConnection_=null,this.backoffId_=null,this.canceled_=!1,this.appDelete_=!1,this.promise_=new Promise((Ot,Lt)=>{this.resolve_=Ot,this.reject_=Lt,this.start_()})}start_(){const e=(a,d)=>{if(d){a(!1,new RequestEndStatus(!1,null,!0));return}const c=this.connectionFactory_();this.pendingConnection_=c;const j=_e=>{const pt=_e.loaded,yt=_e.lengthComputable?_e.total:-1;this.progressCallback_!==null&&this.progressCallback_(pt,yt)};this.progressCallback_!==null&&c.addUploadProgressListener(j),c.send(this.url_,this.method_,this.body_,this.headers_).then(()=>{this.progressCallback_!==null&&c.removeUploadProgressListener(j),this.pendingConnection_=null;const _e=c.getErrorCode()===ErrorCode.NO_ERROR,pt=c.getStatus();if(!_e||isRetryStatusCode(pt,this.additionalRetryCodes_)&&this.retry){const ct=c.getErrorCode()===ErrorCode.ABORT;a(!1,new RequestEndStatus(!1,null,ct));return}const yt=this.successCodes_.indexOf(pt)!==-1;a(!0,new RequestEndStatus(yt,c))})},o=(a,d)=>{const c=this.resolve_,j=this.reject_,_e=d.connection;if(d.wasSuccessCode)try{const pt=this.callback_(_e,_e.getResponse());isJustDef(pt)?c(pt):c()}catch(pt){j(pt)}else if(_e!==null){const pt=unknown();pt.serverResponse=_e.getErrorText(),this.errorCallback_?j(this.errorCallback_(_e,pt)):j(pt)}else if(d.canceled){const pt=this.appDelete_?appDeleted():canceled();j(pt)}else{const pt=retryLimitExceeded();j(pt)}};this.canceled_?o(!1,new RequestEndStatus(!1,null,!0)):this.backoffId_=start(e,o,this.timeout_)}getPromise(){return this.promise_}cancel(e){this.canceled_=!0,this.appDelete_=e||!1,this.backoffId_!==null&&stop(this.backoffId_),this.pendingConnection_!==null&&this.pendingConnection_.abort()}}class RequestEndStatus{constructor(e,o,a){this.wasSuccessCode=e,this.connection=o,this.canceled=!!a}}function addAuthHeader_(s,e){e!==null&&e.length>0&&(s.Authorization="Firebase "+e)}function addVersionHeader_(s,e){s["X-Firebase-Storage-Version"]="webjs/"+(e??"AppManager")}function addGmpidHeader_(s,e){e&&(s["X-Firebase-GMPID"]=e)}function addAppCheckHeader_(s,e){e!==null&&(s["X-Firebase-AppCheck"]=e)}function makeRequest(s,e,o,a,d,c,j=!0){const _e=makeQueryString(s.urlParams),pt=s.url+_e,yt=Object.assign({},s.headers);return addGmpidHeader_(yt,e),addAuthHeader_(yt,o),addVersionHeader_(yt,c),addAppCheckHeader_(yt,a),new NetworkRequest(pt,s.method,yt,s.body,s.successCodes,s.additionalRetryCodes,s.handler,s.errorHandler,s.timeout,s.progressCallback,d,j)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function getBlobBuilder(){return typeof BlobBuilder<"u"?BlobBuilder:typeof WebKitBlobBuilder<"u"?WebKitBlobBuilder:void 0}function getBlob$1(...s){const e=getBlobBuilder();if(e!==void 0){const o=new e;for(let a=0;a<s.length;a++)o.append(s[a]);return o.getBlob()}else{if(isNativeBlobDefined())return new Blob(s);throw new StorageError(StorageErrorCode.UNSUPPORTED_ENVIRONMENT,"This browser doesn't seem to support creating Blobs")}}function sliceBlob(s,e,o){return s.webkitSlice?s.webkitSlice(e,o):s.mozSlice?s.mozSlice(e,o):s.slice?s.slice(e,o):null}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function decodeBase64(s){if(typeof atob>"u")throw missingPolyFill("base-64");return atob(s)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const StringFormat={RAW:"raw",BASE64:"base64",BASE64URL:"base64url",DATA_URL:"data_url"};class StringData{constructor(e,o){this.data=e,this.contentType=o||null}}function dataFromString(s,e){switch(s){case StringFormat.RAW:return new StringData(utf8Bytes_(e));case StringFormat.BASE64:case StringFormat.BASE64URL:return new StringData(base64Bytes_(s,e));case StringFormat.DATA_URL:return new StringData(dataURLBytes_(e),dataURLContentType_(e))}throw unknown()}function utf8Bytes_(s){const e=[];for(let o=0;o<s.length;o++){let a=s.charCodeAt(o);if(a<=127)e.push(a);else if(a<=2047)e.push(192|a>>6,128|a&63);else if((a&64512)===55296)if(!(o<s.length-1&&(s.charCodeAt(o+1)&64512)===56320))e.push(239,191,189);else{const c=a,j=s.charCodeAt(++o);a=65536|(c&1023)<<10|j&1023,e.push(240|a>>18,128|a>>12&63,128|a>>6&63,128|a&63)}else(a&64512)===56320?e.push(239,191,189):e.push(224|a>>12,128|a>>6&63,128|a&63)}return new Uint8Array(e)}function percentEncodedBytes_(s){let e;try{e=decodeURIComponent(s)}catch{throw invalidFormat(StringFormat.DATA_URL,"Malformed data URL.")}return utf8Bytes_(e)}function base64Bytes_(s,e){switch(s){case StringFormat.BASE64:{const d=e.indexOf("-")!==-1,c=e.indexOf("_")!==-1;if(d||c)throw invalidFormat(s,"Invalid character '"+(d?"-":"_")+"' found: is it base64url encoded?");break}case StringFormat.BASE64URL:{const d=e.indexOf("+")!==-1,c=e.indexOf("/")!==-1;if(d||c)throw invalidFormat(s,"Invalid character '"+(d?"+":"/")+"' found: is it base64 encoded?");e=e.replace(/-/g,"+").replace(/_/g,"/");break}}let o;try{o=decodeBase64(e)}catch(d){throw d.message.includes("polyfill")?d:invalidFormat(s,"Invalid character found")}const a=new Uint8Array(o.length);for(let d=0;d<o.length;d++)a[d]=o.charCodeAt(d);return a}class DataURLParts{constructor(e){this.base64=!1,this.contentType=null;const o=e.match(/^data:([^,]+)?,/);if(o===null)throw invalidFormat(StringFormat.DATA_URL,"Must be formatted 'data:[<mediatype>][;base64],<data>");const a=o[1]||null;a!=null&&(this.base64=endsWith(a,";base64"),this.contentType=this.base64?a.substring(0,a.length-7):a),this.rest=e.substring(e.indexOf(",")+1)}}function dataURLBytes_(s){const e=new DataURLParts(s);return e.base64?base64Bytes_(StringFormat.BASE64,e.rest):percentEncodedBytes_(e.rest)}function dataURLContentType_(s){return new DataURLParts(s).contentType}function endsWith(s,e){return s.length>=e.length?s.substring(s.length-e.length)===e:!1}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class FbsBlob{constructor(e,o){let a=0,d="";isNativeBlob(e)?(this.data_=e,a=e.size,d=e.type):e instanceof ArrayBuffer?(o?this.data_=new Uint8Array(e):(this.data_=new Uint8Array(e.byteLength),this.data_.set(new Uint8Array(e))),a=this.data_.length):e instanceof Uint8Array&&(o?this.data_=e:(this.data_=new Uint8Array(e.length),this.data_.set(e)),a=e.length),this.size_=a,this.type_=d}size(){return this.size_}type(){return this.type_}slice(e,o){if(isNativeBlob(this.data_)){const a=this.data_,d=sliceBlob(a,e,o);return d===null?null:new FbsBlob(d)}else{const a=new Uint8Array(this.data_.buffer,e,o-e);return new FbsBlob(a,!0)}}static getBlob(...e){if(isNativeBlobDefined()){const o=e.map(a=>a instanceof FbsBlob?a.data_:a);return new FbsBlob(getBlob$1.apply(null,o))}else{const o=e.map(j=>isString(j)?dataFromString(StringFormat.RAW,j).data:j.data_);let a=0;o.forEach(j=>{a+=j.byteLength});const d=new Uint8Array(a);let c=0;return o.forEach(j=>{for(let _e=0;_e<j.length;_e++)d[c++]=j[_e]}),new FbsBlob(d,!0)}}uploadData(){return this.data_}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function jsonObjectOrNull(s){let e;try{e=JSON.parse(s)}catch{return null}return isNonArrayObject(e)?e:null}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function parent(s){if(s.length===0)return null;const e=s.lastIndexOf("/");return e===-1?"":s.slice(0,e)}function child(s,e){const o=e.split("/").filter(a=>a.length>0).join("/");return s.length===0?o:s+"/"+o}function lastComponent(s){const e=s.lastIndexOf("/",s.length-2);return e===-1?s:s.slice(e+1)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function noXform_(s,e){return e}class Mapping{constructor(e,o,a,d){this.server=e,this.local=o||e,this.writable=!!a,this.xform=d||noXform_}}let mappings_=null;function xformPath(s){return!isString(s)||s.length<2?s:lastComponent(s)}function getMappings(){if(mappings_)return mappings_;const s=[];s.push(new Mapping("bucket")),s.push(new Mapping("generation")),s.push(new Mapping("metageneration")),s.push(new Mapping("name","fullPath",!0));function e(c,j){return xformPath(j)}const o=new Mapping("name");o.xform=e,s.push(o);function a(c,j){return j!==void 0?Number(j):j}const d=new Mapping("size");return d.xform=a,s.push(d),s.push(new Mapping("timeCreated")),s.push(new Mapping("updated")),s.push(new Mapping("md5Hash",null,!0)),s.push(new Mapping("cacheControl",null,!0)),s.push(new Mapping("contentDisposition",null,!0)),s.push(new Mapping("contentEncoding",null,!0)),s.push(new Mapping("contentLanguage",null,!0)),s.push(new Mapping("contentType",null,!0)),s.push(new Mapping("metadata","customMetadata",!0)),mappings_=s,mappings_}function addRef(s,e){function o(){const a=s.bucket,d=s.fullPath,c=new Location(a,d);return e._makeStorageReference(c)}Object.defineProperty(s,"ref",{get:o})}function fromResource(s,e,o){const a={};a.type="file";const d=o.length;for(let c=0;c<d;c++){const j=o[c];a[j.local]=j.xform(a,e[j.server])}return addRef(a,s),a}function fromResourceString(s,e,o){const a=jsonObjectOrNull(e);return a===null?null:fromResource(s,a,o)}function downloadUrlFromResourceString(s,e,o,a){const d=jsonObjectOrNull(e);if(d===null||!isString(d.downloadTokens))return null;const c=d.downloadTokens;if(c.length===0)return null;const j=encodeURIComponent;return c.split(",").map(yt=>{const ct=s.bucket,Ct=s.fullPath,qt="/b/"+j(ct)+"/o/"+j(Ct),Ot=makeUrl(qt,o,a),Lt=makeQueryString({alt:"media",token:yt});return Ot+Lt})[0]}function toResourceString(s,e){const o={},a=e.length;for(let d=0;d<a;d++){const c=e[d];c.writable&&(o[c.server]=s[c.local])}return JSON.stringify(o)}class RequestInfo{constructor(e,o,a,d){this.url=e,this.method=o,this.handler=a,this.timeout=d,this.urlParams={},this.headers={},this.body=null,this.errorHandler=null,this.progressCallback=null,this.successCodes=[200],this.additionalRetryCodes=[]}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function handlerCheck(s){if(!s)throw unknown()}function metadataHandler(s,e){function o(a,d){const c=fromResourceString(s,d,e);return handlerCheck(c!==null),c}return o}function downloadUrlHandler(s,e){function o(a,d){const c=fromResourceString(s,d,e);return handlerCheck(c!==null),downloadUrlFromResourceString(c,d,s.host,s._protocol)}return o}function sharedErrorHandler(s){function e(o,a){let d;return o.getStatus()===401?o.getErrorText().includes("Firebase App Check token is invalid")?d=unauthorizedApp():d=unauthenticated():o.getStatus()===402?d=quotaExceeded(s.bucket):o.getStatus()===403?d=unauthorized(s.path):d=a,d.status=o.getStatus(),d.serverResponse=a.serverResponse,d}return e}function objectErrorHandler(s){const e=sharedErrorHandler(s);function o(a,d){let c=e(a,d);return a.getStatus()===404&&(c=objectNotFound(s.path)),c.serverResponse=d.serverResponse,c}return o}function getDownloadUrl(s,e,o){const a=e.fullServerUrl(),d=makeUrl(a,s.host,s._protocol),c="GET",j=s.maxOperationRetryTime,_e=new RequestInfo(d,c,downloadUrlHandler(s,o),j);return _e.errorHandler=objectErrorHandler(e),_e}function determineContentType_(s,e){return s&&s.contentType||e&&e.type()||"application/octet-stream"}function metadataForUpload_(s,e,o){const a=Object.assign({},o);return a.fullPath=s.path,a.size=e.size(),a.contentType||(a.contentType=determineContentType_(null,e)),a}function multipartUpload(s,e,o,a,d){const c=e.bucketOnlyServerUrl(),j={"X-Goog-Upload-Protocol":"multipart"};function _e(){let sr="";for(let ar=0;ar<2;ar++)sr=sr+Math.random().toString().slice(2);return sr}const pt=_e();j["Content-Type"]="multipart/related; boundary="+pt;const yt=metadataForUpload_(e,a,d),ct=toResourceString(yt,o),Ct="--"+pt+`\r
Content-Type: application/json; charset=utf-8\r
\r
`+ct+`\r
--`+pt+`\r
Content-Type: `+yt.contentType+`\r
\r
`,qt=`\r
--`+pt+"--",Ot=FbsBlob.getBlob(Ct,a,qt);if(Ot===null)throw cannotSliceBlob();const Lt={name:yt.fullPath},Qt=makeUrl(c,s.host,s._protocol),ir="POST",er=s.maxUploadRetryTime,tr=new RequestInfo(Qt,ir,metadataHandler(s,o),er);return tr.urlParams=Lt,tr.headers=j,tr.body=Ot.uploadData(),tr.errorHandler=sharedErrorHandler(e),tr}class XhrConnection{constructor(){this.sent_=!1,this.xhr_=new XMLHttpRequest,this.initXhr(),this.errorCode_=ErrorCode.NO_ERROR,this.sendPromise_=new Promise(e=>{this.xhr_.addEventListener("abort",()=>{this.errorCode_=ErrorCode.ABORT,e()}),this.xhr_.addEventListener("error",()=>{this.errorCode_=ErrorCode.NETWORK_ERROR,e()}),this.xhr_.addEventListener("load",()=>{e()})})}send(e,o,a,d){if(this.sent_)throw internalError("cannot .send() more than once");if(this.sent_=!0,this.xhr_.open(o,e,!0),d!==void 0)for(const c in d)d.hasOwnProperty(c)&&this.xhr_.setRequestHeader(c,d[c].toString());return a!==void 0?this.xhr_.send(a):this.xhr_.send(),this.sendPromise_}getErrorCode(){if(!this.sent_)throw internalError("cannot .getErrorCode() before sending");return this.errorCode_}getStatus(){if(!this.sent_)throw internalError("cannot .getStatus() before sending");try{return this.xhr_.status}catch{return-1}}getResponse(){if(!this.sent_)throw internalError("cannot .getResponse() before sending");return this.xhr_.response}getErrorText(){if(!this.sent_)throw internalError("cannot .getErrorText() before sending");return this.xhr_.statusText}abort(){this.xhr_.abort()}getResponseHeader(e){return this.xhr_.getResponseHeader(e)}addUploadProgressListener(e){this.xhr_.upload!=null&&this.xhr_.upload.addEventListener("progress",e)}removeUploadProgressListener(e){this.xhr_.upload!=null&&this.xhr_.upload.removeEventListener("progress",e)}}class XhrTextConnection extends XhrConnection{initXhr(){this.xhr_.responseType="text"}}function newTextConnection(){return new XhrTextConnection}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Reference{constructor(e,o){this._service=e,o instanceof Location?this._location=o:this._location=Location.makeFromUrl(o,e.host)}toString(){return"gs://"+this._location.bucket+"/"+this._location.path}_newRef(e,o){return new Reference(e,o)}get root(){const e=new Location(this._location.bucket,"");return this._newRef(this._service,e)}get bucket(){return this._location.bucket}get fullPath(){return this._location.path}get name(){return lastComponent(this._location.path)}get storage(){return this._service}get parent(){const e=parent(this._location.path);if(e===null)return null;const o=new Location(this._location.bucket,e);return new Reference(this._service,o)}_throwIfRoot(e){if(this._location.path==="")throw invalidRootOperation(e)}}function uploadBytes$1(s,e,o){s._throwIfRoot("uploadBytes");const a=multipartUpload(s.storage,s._location,getMappings(),new FbsBlob(e,!0),o);return s.storage.makeRequestWithTokens(a,newTextConnection).then(d=>({metadata:d,ref:s}))}function getDownloadURL$1(s){s._throwIfRoot("getDownloadURL");const e=getDownloadUrl(s.storage,s._location,getMappings());return s.storage.makeRequestWithTokens(e,newTextConnection).then(o=>{if(o===null)throw noDownloadURL();return o})}function _getChild$1(s,e){const o=child(s._location.path,e),a=new Location(s._location.bucket,o);return new Reference(s.storage,a)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function isUrl(s){return/^[A-Za-z]+:\/\//.test(s)}function refFromURL(s,e){return new Reference(s,e)}function refFromPath(s,e){if(s instanceof FirebaseStorageImpl){const o=s;if(o._bucket==null)throw noDefaultBucket();const a=new Reference(o,o._bucket);return e!=null?refFromPath(a,e):a}else return e!==void 0?_getChild$1(s,e):s}function ref$1(s,e){if(e&&isUrl(e)){if(s instanceof FirebaseStorageImpl)return refFromURL(s,e);throw invalidArgument("To use ref(service, url), the first argument must be a Storage instance.")}else return refFromPath(s,e)}function extractBucket(s,e){const o=e==null?void 0:e[CONFIG_STORAGE_BUCKET_KEY];return o==null?null:Location.makeFromBucketSpec(o,s)}function connectStorageEmulator$1(s,e,o,a={}){s.host=`${e}:${o}`,s._protocol="http";const{mockUserToken:d}=a;d&&(s._overrideAuthToken=typeof d=="string"?d:createMockUserToken(d,s.app.options.projectId))}class FirebaseStorageImpl{constructor(e,o,a,d,c){this.app=e,this._authProvider=o,this._appCheckProvider=a,this._url=d,this._firebaseVersion=c,this._bucket=null,this._host=DEFAULT_HOST,this._protocol="https",this._appId=null,this._deleted=!1,this._maxOperationRetryTime=DEFAULT_MAX_OPERATION_RETRY_TIME,this._maxUploadRetryTime=DEFAULT_MAX_UPLOAD_RETRY_TIME,this._requests=new Set,d!=null?this._bucket=Location.makeFromBucketSpec(d,this._host):this._bucket=extractBucket(this._host,this.app.options)}get host(){return this._host}set host(e){this._host=e,this._url!=null?this._bucket=Location.makeFromBucketSpec(this._url,e):this._bucket=extractBucket(e,this.app.options)}get maxUploadRetryTime(){return this._maxUploadRetryTime}set maxUploadRetryTime(e){validateNumber("time",0,Number.POSITIVE_INFINITY,e),this._maxUploadRetryTime=e}get maxOperationRetryTime(){return this._maxOperationRetryTime}set maxOperationRetryTime(e){validateNumber("time",0,Number.POSITIVE_INFINITY,e),this._maxOperationRetryTime=e}async _getAuthToken(){if(this._overrideAuthToken)return this._overrideAuthToken;const e=this._authProvider.getImmediate({optional:!0});if(e){const o=await e.getToken();if(o!==null)return o.accessToken}return null}async _getAppCheckToken(){if(_isFirebaseServerApp(this.app)&&this.app.settings.appCheckToken)return this.app.settings.appCheckToken;const e=this._appCheckProvider.getImmediate({optional:!0});return e?(await e.getToken()).token:null}_delete(){return this._deleted||(this._deleted=!0,this._requests.forEach(e=>e.cancel()),this._requests.clear()),Promise.resolve()}_makeStorageReference(e){return new Reference(this,e)}_makeRequest(e,o,a,d,c=!0){if(this._deleted)return new FailRequest(appDeleted());{const j=makeRequest(e,this._appId,a,d,o,this._firebaseVersion,c);return this._requests.add(j),j.getPromise().then(()=>this._requests.delete(j),()=>this._requests.delete(j)),j}}async makeRequestWithTokens(e,o){const[a,d]=await Promise.all([this._getAuthToken(),this._getAppCheckToken()]);return this._makeRequest(e,o,a,d).getPromise()}}const name="@firebase/storage",version$1="0.13.7";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const STORAGE_TYPE="storage";function uploadBytes(s,e,o){return s=getModularInstance(s),uploadBytes$1(s,e,o)}function getDownloadURL(s){return s=getModularInstance(s),getDownloadURL$1(s)}function ref$2(s,e){return s=getModularInstance(s),ref$1(s,e)}function getStorage(s=getApp(),e){s=getModularInstance(s);const a=_getProvider(s,STORAGE_TYPE).getImmediate({identifier:e}),d=getDefaultEmulatorHostnameAndPort("storage");return d&&connectStorageEmulator(a,...d),a}function connectStorageEmulator(s,e,o,a={}){connectStorageEmulator$1(s,e,o,a)}function factory(s,{instanceIdentifier:e}){const o=s.getProvider("app").getImmediate(),a=s.getProvider("auth-internal"),d=s.getProvider("app-check-internal");return new FirebaseStorageImpl(o,a,d,e,SDK_VERSION)}function registerStorage(){_registerComponent(new Component(STORAGE_TYPE,factory,"PUBLIC").setMultipleInstances(!0)),registerVersion(name,version$1,""),registerVersion(name,version$1,"esm2017")}registerStorage();const firebaseConfig={apiKey:"AIzaSyBrdrwvY-lPObZgortEgw7YWycUOGsBlyM",authDomain:"dcrypt-edb9c.firebaseapp.com",projectId:"dcrypt-edb9c",storageBucket:"dcrypt-edb9c.firebasestorage.app",messagingSenderId:"952133736604",appId:"1:952133736604:web:32d799360f200bce84f559",measurementId:"G-7KCDLQ6JNH"},app=initializeApp(firebaseConfig),auth=getAuth(app),db=getFirestore(app),storage=getStorage(app),useDHT=s=>{const[e,o]=reactExports.useState(null);reactExports.useEffect(()=>{if(console.log("useDHT effect triggered with user:",s==null?void 0:s.uid),!s){console.log("No user provided, skipping DHT initialization");return}if(window.dht)console.log("window.dht found, setting DHT"),o(window.dht);else{console.log("window.dht not found, starting polling");const er=setInterval(()=>{window.dht&&(console.log("window.dht became available, setting DHT"),o(window.dht),clearInterval(er))},100);return()=>{console.log("Cleaning up useDHT effect"),clearInterval(er)}}},[s]);const a=reactExports.useCallback(async()=>{const er=document.getElementById("userBalance");if(!er){console.log("userBalance element not found");return}if(!e){er.textContent="Balance: 0 DCT",console.log("DHT not initialized, setting balance to 0");return}try{const tr=await e.getBalance(e.keypair)||0;er.textContent=`Balance: ${tr} DCT`,console.log("Updated balance:",tr)}catch(tr){console.error("Failed to update balance:",tr),er.textContent="Balance: 0 DCT"}},[e]),d=reactExports.useCallback(async()=>{const er=document.getElementById("transactionList");if(!er){console.log("transactionList element not found");return}if(!e){er.innerHTML="Not initialized.",console.log("DHT not initialized, setting transaction list to Not initialized");return}try{const tr=await e.dbGetAll("transactions");if(tr.length===0){er.innerHTML="No transactions yet.",console.log("No transactions found");return}er.innerHTML=tr.map(sr=>`<p class="py-1">${sr.type} - ${sr.amount} DCT - ${new Date(sr.timestamp).toLocaleString()}</p>`).join(""),console.log("Updated transaction history with",tr.length,"transactions")}catch(tr){console.error("Failed to update transaction history:",tr),er.innerHTML="Failed to load transactions."}},[e]),c=reactExports.useCallback(async()=>{var tr;const er=(tr=document.getElementById("publishedItems"))==null?void 0:tr.querySelector("tbody");if(!er){console.log("publishedItems table body not found");return}er.innerHTML="";try{const sr=query(collection(db,"snippets"),where("reviewStatus","==","active"));onSnapshot(sr,async ar=>{const hr={};if(ar.forEach(_r=>{hr[_r.id]=_r.data()}),e){e.knownObjects.clear();for(const[_r,dr]of Object.entries(hr)){const ur={content_type:dr.ipHash,description:dr.description||"No description",tags:dr.tags||[],isPremium:dr.isPremium||!1,priceUsd:dr.priceUsd||0};e.knownObjects.set(_r,{metadata:ur,chunks:dr.chunks||[]}),await e.broadcastIP(_r,ur,dr.chunks||[])}e.knownObjects.forEach((_r,dr)=>{const ur=hr[dr]||{likes:0,dislikes:0,reviewStatus:"active"};if(ur.reviewStatus!=="active")return;const gr=(_r.metadata.isPremium||!1)&&_r.metadata.priceUsd||0,Mt=gr>0?`${gr} DCT`:"Free",h=document.createElement("tr");h.innerHTML=`
              <td class="py-2 px-4">${_r.metadata.content_type}</td>
              <td class="py-2 px-4">${_r.metadata.description||"No description"}</td>
              <td class="py-2 px-4">${_r.metadata.tags.join(", ")||"No tags"}</td>
              <td class="py-2 px-4">${ur.likes}</td>
              <td class="py-2 px-4">${ur.dislikes}</td>
              <td class="py-2 px-4">
                <button onclick="window.buySnippet('${dr}')" class="bg-purple-500 text-white rounded hover:bg-purple-600 px-3 py-1 mr-2">Get (${Mt})</button>
                <button onclick="window.flagSnippet('${dr}')" class="bg-red-500 text-white rounded hover:bg-red-600 px-3 py-1">Flag</button>
              </td>
            `,er.appendChild(h)}),console.log("Updated live feed with",e.knownObjects.size,"snippets")}})}catch(sr){console.error("Failed to update live feed:",sr),er.innerHTML='<tr><td colspan="6">Failed to load snippets.</td></tr>'}},[e]),j=reactExports.useCallback(async()=>{var tr;const er=(tr=document.getElementById("mySnippets"))==null?void 0:tr.querySelector("tbody");if(!er){console.log("mySnippets table body not found");return}if(er.innerHTML="",!(s!=null&&s.uid)){console.log("No user ID, skipping mySnippets update");return}try{const sr=query(collection(db,"snippets"),where("creatorId","==",s.uid)),ar=await getDocs(sr);ar.forEach(hr=>{const _r=hr.data(),dr=document.createElement("tr");dr.innerHTML=`
          <td class="py-2 px-4">${_r.ipHash}</td>
          <td class="py-2 px-4">${_r.ipHash||"No title"}</td>
          <td class="py-2 px-4">
            <button onclick="window.copyHash('${_r.ipHash}')" class="bg-blue-500 text-white rounded hover:bg-blue-600 px-3 py-1">Copy Hash</button>
          </td>
        `,er.appendChild(dr)}),console.log("Updated my snippets with",ar.size,"items")}catch(sr){console.error("Failed to update my snippets:",sr),er.innerHTML='<tr><td colspan="3">Failed to load snippets.</td></tr>'}},[s]),_e=reactExports.useCallback(async er=>{var sr;const tr=(sr=document.getElementById("publishedItems"))==null?void 0:sr.querySelector("tbody");if(!tr){console.log("publishedItems table body not found for search");return}tr.innerHTML="";try{const ar=er.split(",").map(dr=>dr.trim().toLowerCase()).filter(dr=>dr);let hr;ar.length===0?hr=await getDocs(query(collection(db,"snippets"),where("reviewStatus","==","active"))):hr=await getDocs(query(collection(db,"snippets"),where("reviewStatus","==","active")));const _r={};if(hr.forEach(dr=>{_r[dr.id]=dr.data()}),e){e.knownObjects.clear();for(const[dr,ur]of Object.entries(_r)){const lr={content_type:ur.ipHash,description:ur.description||"No description",tags:ur.tags||[],isPremium:ur.isPremium||!1,priceUsd:ur.priceUsd||0};e.knownObjects.set(dr,{metadata:lr,chunks:ur.chunks||[]})}e.knownObjects.forEach((dr,ur)=>{const lr=_r[ur]||{likes:0,dislikes:0,reviewStatus:"active"};if(lr.reviewStatus!=="active")return;const gr=(dr.metadata.tags||[]).map(lt=>lt.toLowerCase());if(ar.length>0&&!ar.some(lt=>gr.includes(lt)))return;const h=(dr.metadata.isPremium||!1)&&dr.metadata.priceUsd||0,_=h>0?`${h} DCT`:"Free",b=document.createElement("tr");b.innerHTML=`
            <td class="py-2 px-4">${dr.metadata.content_type}</td>
            <td class="py-2 px-4">${dr.metadata.description||"No description"}</td>
            <td class="py-2 px-4">${dr.metadata.tags.join(", ")||"No tags"}</td>
            <td class="py-2 px-4">${lr.likes}</td>
            <td class="py-2 px-4">${lr.dislikes}</td>
            <td class="py-2 px-4">
              <button onclick="window.buySnippet('${ur}')" class="bg-purple-500 text-white rounded hover:bg-purple-600 px-3 py-1 mr-2">Get (${_})</button>
              <button onclick="window.flagSnippet('${ur}')" class="bg-red-500 text-white rounded hover:bg-red-600 px-3 py-1">Flag</button>
            </td>
          `,tr.appendChild(b)}),console.log("Searched snippets with term:",er)}}catch(ar){console.error("Failed to search snippets:",ar),tr.innerHTML='<tr><td colspan="6">Failed to load snippets.</td></tr>'}},[e]),pt=reactExports.useCallback(async(er,tr,sr,ar,hr)=>{var kt,Ft;if(!(s!=null&&s.uid))throw console.log("No authenticated user, cannot publish snippet"),new Error("Please sign in to publish.");if(!e)throw console.log("DHT not initialized, cannot publish snippet"),new Error("DHT not initialized");if(!er)throw console.log("Title is required for publishing"),new Error("Title is required");let _r=ar||"",dr="text/plain";if((kt=hr==null?void 0:hr.files)!=null&&kt.length){const xt=hr.files[0];dr=xt.type||"application/octet-stream",_r=await new Promise((g,wt)=>{const nr=new FileReader;nr.onload=or=>g(new Uint8Array(or.target.result)),nr.onerror=()=>wt(new Error("Failed to read file")),nr.readAsArrayBuffer(xt)})}else _r=new TextEncoder().encode(_r);const ur=(Ft=document.getElementById("modalPremium"))==null?void 0:Ft.checked,lr=document.getElementById("modalPriceInput"),gr=ur&&lr&&parseFloat(lr.value)||0,Mt={content_type:dr,title:er,description:tr||"",tags:sr?sr.split(",").map(xt=>xt.trim()).filter(xt=>xt.length>0):[],isPremium:ur,priceUsd:gr},h=await e.publishIP(Mt,_r,dr),_=s.uid,b=doc(db,"snippets",h),lt={ipHash:h,title:er,description:tr||"",tags:Mt.tags,isPremium:ur,priceUsd:gr,flagCount:0,likes:0,dislikes:0,createdAt:Date.now(),creatorId:_};await setDoc(b,lt,{merge:!0});const Rt=doc(db,"users",_);await updateDoc(Rt,{snippetsPosted:increment(1)}),await Promise.all([c(),j(),d(),a()]),console.log("Published snippet with hash:",h)},[e,s,c,j,d,a]),yt=reactExports.useCallback(async er=>{if(!(s!=null&&s.uid))throw console.log("No authenticated user, cannot buy snippet"),new Error("Please sign in to buy.");if(!e)throw console.log("DHT not initialized, cannot buy snippet"),new Error("DHT not initialized");if(!er)throw console.log("Hash is required for buying snippet"),new Error("Hash is required");let tr=e.knownObjects.get(er);if(!tr){const lr=doc(db,"snippets",er),gr=await getDoc(lr);if(!gr.exists())throw console.log("Snippet not found for hash:",er),new Error("Snippet not found");const Mt=gr.data();tr={metadata:{content_type:Mt.ipHash,description:Mt.description||"No description",tags:Mt.tags||[],isPremium:Mt.isPremium||!1,priceUsd:Mt.priceUsd||0},chunks:Mt.chunks||[]},e.knownObjects.set(er,tr),await e.broadcastIP(er,tr.metadata,tr.chunks)}const hr=(tr.metadata.isPremium||!1)&&tr.metadata.priceUsd||0;if(hr>0){const lr=await e.getBalance(e.keypair);if(lr<hr)throw console.log("Insufficient balance:",lr,"for cost:",hr),new Error("Insufficient balance");const gr=hr*.05;await e.distributeCommission(gr),await e.putBalance(e.keypair,lr-hr),await e.dbAdd("transactions",{type:"buy",amount:hr,timestamp:Date.now()})}else await e.dbAdd("transactions",{type:"buy",amount:0,timestamp:Date.now()});const{data:_r,fileType:dr}=await e.requestData(er);await Promise.all([d(),a(),j()]);const ur=prompt('Do you like this snippet? Type "like" or "dislike":');if(ur!==null){const lr=ur.trim().toLowerCase();(lr==="like"||lr==="dislike")&&(await ir(er,lr),await c())}return Qt(_r,dr,tr.metadata.content_type),console.log("Bought snippet with hash:",er),{data:_r,fileType:dr}},[e,s,d,a,j,c]),ct=reactExports.useCallback(async er=>{if(!er)throw console.log("Invalid hash for buySnippetByHash"),new Error("Please enter a valid hash.");await yt(er)&&console.log("Snippet purchased and displayed below!")},[yt]),Ct=reactExports.useCallback(async er=>{if(!(s!=null&&s.uid))throw console.log("No authenticated user, cannot flag snippet"),new Error("Please sign in to flag content.");try{const tr=doc(db,"snippets",er);await updateDoc(tr,{flagCount:increment(1)}),((await getDoc(tr)).data().flagCount||0)>=3&&(await updateDoc(tr,{reviewStatus:"under_review"}),await c()),console.log("Flagged snippet with hash:",er)}catch(tr){throw console.error("Failed to flag snippet:",tr),tr}},[s,c]),qt=reactExports.useCallback(async er=>{if(!(s!=null&&s.uid))throw console.log("No authenticated user, cannot deposit"),new Error("Please sign in to deposit.");if(!e)throw console.log("DHT not initialized, cannot deposit"),new Error("DHT not initialized");if(!er||er<=0)throw console.log("Invalid deposit amount:",er),new Error("Invalid deposit amount");const sr=await e.getBalance(e.keypair)+er;await e.putBalance(e.keypair,sr),await e.dbAdd("transactions",{type:"deposit",amount:er,timestamp:Date.now()}),await Promise.all([d(),a()]),console.log("Deposited amount:",er)},[e,s,d,a]),Ot=reactExports.useCallback(async er=>{if(!(s!=null&&s.uid))throw console.log("No authenticated user, cannot withdraw"),new Error("Please sign in to withdraw.");if(!e)throw console.log("DHT not initialized, cannot withdraw"),new Error("DHT not initialized");if(!er||er<=0)throw console.log("Invalid withdrawal amount:",er),new Error("Invalid withdrawal amount");const tr=await e.getBalance(e.keypair);if(tr<er)throw console.log("Insufficient balance:",tr,"for withdrawal:",er),new Error("Insufficient balance");await e.putBalance(e.keypair,tr-er),await e.dbAdd("transactions",{type:"withdraw",amount:er,timestamp:Date.now()}),await Promise.all([d(),a()]),console.log("Withdrew amount:",er)},[e,s,d,a]),Lt=reactExports.useCallback(async er=>{try{await navigator.clipboard.writeText(er),console.log("Copied hash:",er)}catch(tr){throw console.error("Failed to copy hash:",tr),tr}},[]),Qt=(er,tr,sr)=>{const ar=document.getElementById("snippetDisplay");if(!ar){console.log("snippetDisplay element not found");return}ar.innerHTML="";const hr=document.createElement("div");hr.className="p-4 bg-gray-800 rounded-lg mt-4";const _r=document.createElement("h3");if(_r.className="text-lg font-semibold mb-2",_r.textContent=sr||"Snippet Content",hr.appendChild(_r),tr.startsWith("text")){const dr=new TextDecoder().decode(er),ur=document.createElement("pre");ur.className="text-sm text-gray-300 whitespace-pre-wrap",ur.textContent=dr,hr.appendChild(ur)}else if(tr.startsWith("image")){const dr=new Blob([er],{type:tr}),ur=URL.createObjectURL(dr),lr=document.createElement("img");lr.src=ur,lr.className="max-w-full h-auto rounded",lr.onload=()=>URL.revokeObjectURL(ur),hr.appendChild(lr)}else{const dr=new Blob([er],{type:tr}),ur=URL.createObjectURL(dr),lr=document.createElement("a");lr.href=ur,lr.download=sr||"downloaded_file",lr.className="text-blue-400 hover:underline",lr.textContent="Download File",lr.onclick=()=>setTimeout(()=>URL.revokeObjectURL(ur),1e3),hr.appendChild(lr)}ar.appendChild(hr)},ir=async(er,tr)=>{if(!(s!=null&&s.uid)){console.log("No authenticated user, cannot submit feedback");return}try{const sr=doc(db,"snippets",er,"feedback",s.uid);await setDoc(sr,{action:tr,timestamp:Date.now()});const ar=doc(db,"snippets",er);tr==="like"?await updateDoc(ar,{likes:increment(1)}):tr==="dislike"&&await updateDoc(ar,{dislikes:increment(1)}),console.log("Submitted feedback:",tr,"for hash:",er)}catch(sr){throw console.error("Failed to submit feedback:",sr),sr}};return window.buySnippet=yt,window.flagSnippet=Ct,window.copyHash=Lt,{dht:e,updateBalanceDisplay:a,updateTransactionHistory:d,updateLiveFeed:c,updateMySnippets:j,searchSnippets:_e,publishSnippet:pt,buySnippet:yt,buySnippetByHash:ct,flagSnippet:Ct,deposit:qt,withdraw:Ot,copyHash:Lt}},ToastContext=reactExports.createContext(),ToastProvider=({children:s})=>{const[e,o]=reactExports.useState([]),a=(d,c="info")=>{const j=Math.random().toString(36).substr(2,9);o([...e,{id:j,message:d,type:c}]),setTimeout(()=>{o(_e=>_e.filter(pt=>pt.id!==j))},3e3)};return jsxRuntimeExports.jsx(ToastContext.Provider,{value:{addToast:a,toasts:e},children:s})},useToast=()=>reactExports.useContext(ToastContext),Dashboard=({user:s,signIn:e,signOutUser:o,updateUserProfile:a,updateUIForSignOut:d})=>{const{dht:c,updateBalanceDisplay:j,updateTransactionHistory:_e,updateLiveFeed:pt,updateMySnippets:yt,searchSnippets:ct,buySnippetByHash:Ct,deposit:qt,withdraw:Ot}=useDHT(s),{showToast:Lt}=useToast(),Qt=useNavigate(),[ir,er]=reactExports.useState(!1),[tr,sr]=reactExports.useState(""),[ar,hr]=reactExports.useState(""),[_r,dr]=reactExports.useState(""),[ur,lr]=reactExports.useState(""),[gr,Mt]=reactExports.useState(!1),[h,_]=reactExports.useState(!1);reactExports.useEffect(()=>(console.log("Dashboard component mounted"),s?(a(s.uid),j(),_e(),pt(),yt()):d(),()=>console.log("Dashboard component unmounted")),[s,a,j,_e,pt,yt,d]);const b=()=>{ct(tr)},lt=()=>{Mt(!gr)},Rt=()=>{_(!h)},kt=()=>{if(!s&&!c){Lt("Please sign in and ensure the app is initialized before publishing.",!0);return}er(!0)};return jsxRuntimeExports.jsxs("div",{className:h?"light-mode":"",children:[jsxRuntimeExports.jsxs("div",{className:"header",children:[jsxRuntimeExports.jsx("h1",{className:"text-2xl font-semibold",children:"Dcrypt - Decentralized Data Sharing"}),jsxRuntimeExports.jsx("div",{className:"space-x-2",children:s?jsxRuntimeExports.jsx("button",{className:"btn btn-danger",onClick:o,children:"Logout"}):jsxRuntimeExports.jsxs(jsxRuntimeExports.Fragment,{children:[jsxRuntimeExports.jsx("button",{className:"btn btn-primary",onClick:()=>Qt("/signup"),children:"Sign Up"}),jsxRuntimeExports.jsx("button",{className:"btn btn-primary",onClick:e,children:"Login"})]})})]}),jsxRuntimeExports.jsxs("div",{className:"layout",children:[jsxRuntimeExports.jsxs("div",{className:"sidebar",children:[jsxRuntimeExports.jsxs("div",{className:"sidebar-section",children:[jsxRuntimeExports.jsx("h3",{children:"User Profile"}),jsxRuntimeExports.jsxs("div",{className:"flex items-center space-x-3",children:[jsxRuntimeExports.jsx("div",{className:"w-12 h-12 bg-gray-600 rounded-full flex items-center justify-center user-avatar",children:jsxRuntimeExports.jsx("i",{className:"fas fa-user text-lg"})}),jsxRuntimeExports.jsxs("div",{children:[jsxRuntimeExports.jsx("p",{id:"userName",className:"font-medium",children:"Guest User"}),jsxRuntimeExports.jsxs("p",{className:"text-sm text-gray-400",children:["Snippets Posted: ",jsxRuntimeExports.jsx("span",{id:"snippetsPosted",children:"0"})]})]})]})]}),jsxRuntimeExports.jsxs("div",{className:"sidebar-section",children:[jsxRuntimeExports.jsx("h3",{children:"Balance"}),jsxRuntimeExports.jsx("p",{id:"userBalance",className:"text-lg font-medium",children:"Balance: 0 DCT"})]}),jsxRuntimeExports.jsxs("div",{className:"sidebar-section",children:[jsxRuntimeExports.jsx("h3",{children:"Manage Balance"}),jsxRuntimeExports.jsxs("div",{className:"space-y-4",children:[jsxRuntimeExports.jsxs("div",{className:"flex space-x-2",children:[jsxRuntimeExports.jsx("input",{id:"depositInput",type:"number",placeholder:"Deposit Amount (DCT)",className:"input-field flex-1",value:ar,onChange:Ft=>hr(Ft.target.value)}),jsxRuntimeExports.jsx("button",{className:"btn btn-success",onClick:()=>qt(parseFloat(ar)),disabled:!s,children:"Deposit"})]}),jsxRuntimeExports.jsxs("div",{className:"flex space-x-2",children:[jsxRuntimeExports.jsx("input",{id:"withdrawInput",type:"number",placeholder:"Withdraw Amount (DCT)",className:"input-field flex-1",value:_r,onChange:Ft=>dr(Ft.target.value)}),jsxRuntimeExports.jsx("button",{className:"btn btn-danger",onClick:()=>Ot(parseFloat(_r)),disabled:!s,children:"Withdraw"})]})]})]}),jsxRuntimeExports.jsxs("div",{className:"sidebar-section",children:[jsxRuntimeExports.jsx("h3",{children:"Transaction History"}),jsxRuntimeExports.jsx("button",{className:"btn btn-secondary mb-2",onClick:lt,disabled:!s,children:"Toggle History"}),jsxRuntimeExports.jsx("div",{id:"transactionHistory",className:"mt-2",style:{display:gr?"block":"none"},children:jsxRuntimeExports.jsx("div",{id:"transactionList",children:"No transactions yet."})})]}),jsxRuntimeExports.jsxs("div",{className:"sidebar-section",children:[jsxRuntimeExports.jsx("h3",{children:"Theme"}),jsxRuntimeExports.jsx("button",{className:"btn btn-primary",onClick:Rt,children:h?"Switch to Dark Mode":"Switch to Light Mode"})]})]}),jsxRuntimeExports.jsxs("div",{className:"main-content",children:[jsxRuntimeExports.jsxs("div",{className:"card",children:[jsxRuntimeExports.jsxs("div",{className:"flex justify-between items-center mb-4",children:[jsxRuntimeExports.jsx("h2",{className:"text-xl font-semibold",children:"Quick Actions"}),jsxRuntimeExports.jsx("button",{className:"btn btn-secondary",onClick:kt,children:"Post Something!"})]}),jsxRuntimeExports.jsxs("div",{className:"flex space-x-2",children:[jsxRuntimeExports.jsx("input",{id:"searchInput",type:"text",placeholder:"Search snippets...",className:"input-field flex-1",value:tr,onChange:Ft=>sr(Ft.target.value)}),jsxRuntimeExports.jsx("button",{className:"btn btn-primary",onClick:b,disabled:!s,children:"Search"})]})]}),jsxRuntimeExports.jsxs("div",{className:"card",children:[jsxRuntimeExports.jsx("h2",{className:"text-xl font-semibold mb-4",children:"Live Feed"}),jsxRuntimeExports.jsxs("div",{className:"filter-group",children:[jsxRuntimeExports.jsxs("select",{id:"sortBy",className:"filter-select",children:[jsxRuntimeExports.jsx("option",{value:"likes-desc",children:"Sort by Likes (High to Low)"}),jsxRuntimeExports.jsx("option",{value:"likes-asc",children:"Sort by Likes (Low to High)"}),jsxRuntimeExports.jsx("option",{value:"dislikes-desc",children:"Sort by Dislikes (High to Low)"}),jsxRuntimeExports.jsx("option",{value:"dislikes-asc",children:"Sort by Dislikes (Low to High)"}),jsxRuntimeExports.jsx("option",{value:"date-desc",children:"Sort by Date (Newest)"}),jsxRuntimeExports.jsx("option",{value:"date-asc",children:"Sort by Date (Oldest)"})]}),jsxRuntimeExports.jsx("input",{id:"filterTags",type:"text",placeholder:"Filter by tags...",className:"input-field flex-1"})]}),jsxRuntimeExports.jsxs("table",{id:"publishedItems",children:[jsxRuntimeExports.jsx("thead",{children:jsxRuntimeExports.jsxs("tr",{children:[jsxRuntimeExports.jsx("th",{children:"Title"}),jsxRuntimeExports.jsx("th",{children:"Description"}),jsxRuntimeExports.jsx("th",{children:"Tags"}),jsxRuntimeExports.jsx("th",{children:"Likes"}),jsxRuntimeExports.jsx("th",{children:"Dislikes"}),jsxRuntimeExports.jsx("th",{children:"Actions"})]})}),jsxRuntimeExports.jsx("tbody",{})]})]}),jsxRuntimeExports.jsxs("div",{className:"card",children:[jsxRuntimeExports.jsx("h2",{className:"text-xl font-semibold mb-4",children:"My Snippets"}),jsxRuntimeExports.jsxs("table",{id:"mySnippets",children:[jsxRuntimeExports.jsx("thead",{children:jsxRuntimeExports.jsxs("tr",{children:[jsxRuntimeExports.jsx("th",{children:"Hash"}),jsxRuntimeExports.jsx("th",{children:"Title"}),jsxRuntimeExports.jsx("th",{children:"Actions"})]})}),jsxRuntimeExports.jsx("tbody",{})]})]}),jsxRuntimeExports.jsxs("div",{className:"card",children:[jsxRuntimeExports.jsx("h2",{className:"text-xl font-semibold mb-4",children:"Buy Snippet by Hash"}),jsxRuntimeExports.jsxs("div",{className:"flex space-x-2",children:[jsxRuntimeExports.jsx("input",{id:"buyHashInput",type:"text",placeholder:"Enter snippet hash...",className:"input-field flex-1",value:ur,onChange:Ft=>lr(Ft.target.value)}),jsxRuntimeExports.jsx("button",{className:"btn btn-primary",onClick:()=>Ct(ur),disabled:!s,children:"Buy"})]})]}),jsxRuntimeExports.jsx("div",{className:"card",id:"snippetDisplay"})]})]}),ir&&jsxRuntimeExports.jsx(PublishModal,{onClose:()=>er(!1)})]})},Signup=({handleSignup:s,becomeNode:e,showToast:o})=>{const a=useNavigate(),[d,c]=reactExports.useState(!1),[j,_e]=reactExports.useState(""),[pt,yt]=reactExports.useState(null),ct=()=>{console.log("Opening user signup modal"),c(!0)},Ct=()=>{console.log("Closing user signup modal"),c(!1),_e(""),yt(null)},qt=async Ot=>{Ot.preventDefault(),console.log("Submitting signup form with username:",j);try{await s(j,pt,o)}catch{}};return jsxRuntimeExports.jsxs(jsxRuntimeExports.Fragment,{children:[jsxRuntimeExports.jsx("div",{id:"signupOptionsModal",className:`modal-overlay ${d?"":"active"}`,children:jsxRuntimeExports.jsxs("div",{className:"modal-card space-y-6",children:[jsxRuntimeExports.jsx("span",{className:"close-btn",onClick:()=>a("/"),children:""}),jsxRuntimeExports.jsxs("div",{children:[jsxRuntimeExports.jsx("h2",{className:"text-2xl font-bold text-center",children:"Join Dcrypt"}),jsxRuntimeExports.jsx("p",{className:"mt-2 text-center text-sm text-gray-400",children:"Choose your role to get started with decentralized data sharing."})]}),jsxRuntimeExports.jsxs("div",{className:"flex justify-center space-x-4",children:[jsxRuntimeExports.jsx("button",{className:"btn btn-primary",onClick:ct,children:"Become a User"}),jsxRuntimeExports.jsx("button",{className:"btn btn-secondary",onClick:()=>{console.log("Become a Node clicked"),e(o)},children:"Become a Node"})]}),jsxRuntimeExports.jsx("div",{className:"text-center",children:jsxRuntimeExports.jsx("button",{onClick:()=>a("/"),className:"text-blue-400 hover:underline text-sm",children:"Back to Dashboard"})})]})}),jsxRuntimeExports.jsx("div",{id:"userSignupModal",className:`modal-overlay ${d?"active":""}`,children:jsxRuntimeExports.jsxs("div",{className:"modal-card space-y-6",children:[jsxRuntimeExports.jsx("span",{className:"close-btn",onClick:Ct,children:""}),jsxRuntimeExports.jsxs("div",{children:[jsxRuntimeExports.jsx("h2",{className:"text-2xl font-bold text-center",children:"Sign Up as a User"}),jsxRuntimeExports.jsx("p",{className:"mt-2 text-center text-sm text-gray-400",children:"Complete your profile to join the Dcrypt community."})]}),jsxRuntimeExports.jsxs("form",{id:"userSignupForm",className:"space-y-6",onSubmit:qt,children:[jsxRuntimeExports.jsxs("div",{children:[jsxRuntimeExports.jsx("label",{htmlFor:"usernameInput",className:"block text-sm font-medium text-gray-300",children:"Username"}),jsxRuntimeExports.jsx("input",{id:"usernameInput",name:"username",type:"text",required:!0,className:"input-field mt-1 block w-full px-4 py-3 placeholder-gray-500",placeholder:"Enter your username",value:j,onChange:Ot=>_e(Ot.target.value)})]}),jsxRuntimeExports.jsxs("div",{children:[jsxRuntimeExports.jsx("label",{htmlFor:"profileImageInput",className:"block text-sm font-medium text-gray-300",children:"Profile Image (Optional)"}),jsxRuntimeExports.jsx("div",{className:"mt-1 flex items-center",children:jsxRuntimeExports.jsxs("label",{className:"input-field px-4 py-3 cursor-pointer flex items-center",children:[jsxRuntimeExports.jsx("span",{id:"profileImageLabel",className:"text-gray-500",children:pt?pt.name:"No file chosen"}),jsxRuntimeExports.jsx("input",{id:"profileImageInput",name:"profile-image",type:"file",accept:"image/*",className:"hidden",onChange:Ot=>yt(Ot.target.files[0])}),jsxRuntimeExports.jsx("span",{className:"ml-3 text-gray-400",children:jsxRuntimeExports.jsx("i",{className:"fas fa-upload"})})]})})]}),jsxRuntimeExports.jsx("div",{children:jsxRuntimeExports.jsx("button",{type:"submit",className:"btn btn-primary w-full flex justify-center py-3 px-4 border border-transparent rounded-lg shadow-sm text-sm font-medium focus:outline-none",children:"Sign Up with Google"})})]})]})})]})},NodeInstructions=({initNode:s,dht:e,showToast:o})=>{const[a,d]=reactExports.useState(!0),c=reactExports.useCallback(async()=>{if(!e){console.log("DHT not initialized"),o("DHT not initialized. Please try again.",!0),d(!1);return}try{await s();const _e=(await e.dbGetAll("transactions")).filter(pt=>pt.type==="commission").reduce((pt,yt)=>pt+(yt.amount||0),0);document.getElementById("nodeEarnings").textContent=`Total Earnings: ${_e.toFixed(2)} DCT`,o("Node initialized successfully",!1),console.log("Node setup complete, earnings:",_e)}catch(j){console.error("Node initialization failed:",j),o(`Initialization failed: ${j.message}`,!0)}finally{d(!1)}},[e,s,o]);return reactExports.useEffect(()=>(console.log("NodeInstructions component mounted"),c(),()=>console.log("NodeInstructions component unmounted")),[c]),jsxRuntimeExports.jsx("div",{className:"min-h-screen flex items-center justify-center",children:jsxRuntimeExports.jsxs("div",{className:"card max-w-md w-full",children:[jsxRuntimeExports.jsx("h2",{className:"text-2xl font-bold text-center",children:"Node Instructions"}),jsxRuntimeExports.jsx("p",{className:"mt-2 text-center text-sm text-gray-400",children:"You are now a node in the Dcrypt network."}),jsxRuntimeExports.jsx("div",{className:"mt-4",children:a?jsxRuntimeExports.jsx("p",{className:"text-lg font-medium",children:"Loading..."}):jsxRuntimeExports.jsx("p",{id:"nodeEarnings",className:"text-lg font-medium",children:"Total Earnings: 0 DCT"})})]})})};var cryptoJs={exports:{}};function commonjsRequire(s){throw new Error('Could not dynamically require "'+s+'". Please configure the dynamicRequireTargets or/and ignoreDynamicRequires option of @rollup/plugin-commonjs appropriately for this require call to work.')}var core={exports:{}},cryptoBrowserify={},browser$c={exports:{}},safeBuffer$1={exports:{}};const require$$0$1=getAugmentedNamespace(dist);/*! safe-buffer. MIT License. Feross Aboukhadijeh <https://feross.org/opensource> */var hasRequiredSafeBuffer$1;function requireSafeBuffer$1(){return hasRequiredSafeBuffer$1||(hasRequiredSafeBuffer$1=1,function(s,e){var o=require$$0$1,a=o.Buffer;function d(j,_e){for(var pt in j)_e[pt]=j[pt]}a.from&&a.alloc&&a.allocUnsafe&&a.allocUnsafeSlow?s.exports=o:(d(o,e),e.Buffer=c);function c(j,_e,pt){return a(j,_e,pt)}c.prototype=Object.create(a.prototype),d(a,c),c.from=function(j,_e,pt){if(typeof j=="number")throw new TypeError("Argument must not be a number");return a(j,_e,pt)},c.alloc=function(j,_e,pt){if(typeof j!="number")throw new TypeError("Argument must be a number");var yt=a(j);return _e!==void 0?typeof pt=="string"?yt.fill(_e,pt):yt.fill(_e):yt.fill(0),yt},c.allocUnsafe=function(j){if(typeof j!="number")throw new TypeError("Argument must be a number");return a(j)},c.allocUnsafeSlow=function(j){if(typeof j!="number")throw new TypeError("Argument must be a number");return o.SlowBuffer(j)}}(safeBuffer$1,safeBuffer$1.exports)),safeBuffer$1.exports}var hasRequiredBrowser$b;function requireBrowser$b(){if(hasRequiredBrowser$b)return browser$c.exports;hasRequiredBrowser$b=1;var s=65536,e=4294967295;function o(){throw new Error(`Secure random number generation is not supported by this browser.
Use Chrome, Firefox or Internet Explorer 11`)}var a=requireSafeBuffer$1().Buffer,d=commonjsGlobal$2.crypto||commonjsGlobal$2.msCrypto;d&&d.getRandomValues?browser$c.exports=c:browser$c.exports=o;function c(j,_e){if(j>e)throw new RangeError("requested too many random bytes");var pt=a.allocUnsafe(j);if(j>0)if(j>s)for(var yt=0;yt<j;yt+=s)d.getRandomValues(pt.slice(yt,yt+s));else d.getRandomValues(pt);return typeof _e=="function"?process$1.nextTick(function(){_e(null,pt)}):pt}return browser$c.exports}var inherits_browser={exports:{}},hasRequiredInherits_browser;function requireInherits_browser(){return hasRequiredInherits_browser||(hasRequiredInherits_browser=1,typeof Object.create=="function"?inherits_browser.exports=function(e,o){o&&(e.super_=o,e.prototype=Object.create(o.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}))}:inherits_browser.exports=function(e,o){if(o){e.super_=o;var a=function(){};a.prototype=o.prototype,e.prototype=new a,e.prototype.constructor=e}}),inherits_browser.exports}var events={exports:{}},hasRequiredEvents;function requireEvents(){if(hasRequiredEvents)return events.exports;hasRequiredEvents=1;var s=typeof Reflect=="object"?Reflect:null,e=s&&typeof s.apply=="function"?s.apply:function(hr,_r,dr){return Function.prototype.apply.call(hr,_r,dr)},o;s&&typeof s.ownKeys=="function"?o=s.ownKeys:Object.getOwnPropertySymbols?o=function(hr){return Object.getOwnPropertyNames(hr).concat(Object.getOwnPropertySymbols(hr))}:o=function(hr){return Object.getOwnPropertyNames(hr)};function a(ar){console&&console.warn&&console.warn(ar)}var d=Number.isNaN||function(hr){return hr!==hr};function c(){c.init.call(this)}events.exports=c,events.exports.once=er,c.EventEmitter=c,c.prototype._events=void 0,c.prototype._eventsCount=0,c.prototype._maxListeners=void 0;var j=10;function _e(ar){if(typeof ar!="function")throw new TypeError('The "listener" argument must be of type Function. Received type '+typeof ar)}Object.defineProperty(c,"defaultMaxListeners",{enumerable:!0,get:function(){return j},set:function(ar){if(typeof ar!="number"||ar<0||d(ar))throw new RangeError('The value of "defaultMaxListeners" is out of range. It must be a non-negative number. Received '+ar+".");j=ar}}),c.init=function(){(this._events===void 0||this._events===Object.getPrototypeOf(this)._events)&&(this._events=Object.create(null),this._eventsCount=0),this._maxListeners=this._maxListeners||void 0},c.prototype.setMaxListeners=function(hr){if(typeof hr!="number"||hr<0||d(hr))throw new RangeError('The value of "n" is out of range. It must be a non-negative number. Received '+hr+".");return this._maxListeners=hr,this};function pt(ar){return ar._maxListeners===void 0?c.defaultMaxListeners:ar._maxListeners}c.prototype.getMaxListeners=function(){return pt(this)},c.prototype.emit=function(hr){for(var _r=[],dr=1;dr<arguments.length;dr++)_r.push(arguments[dr]);var ur=hr==="error",lr=this._events;if(lr!==void 0)ur=ur&&lr.error===void 0;else if(!ur)return!1;if(ur){var gr;if(_r.length>0&&(gr=_r[0]),gr instanceof Error)throw gr;var Mt=new Error("Unhandled error."+(gr?" ("+gr.message+")":""));throw Mt.context=gr,Mt}var h=lr[hr];if(h===void 0)return!1;if(typeof h=="function")e(h,this,_r);else for(var _=h.length,b=Lt(h,_),dr=0;dr<_;++dr)e(b[dr],this,_r);return!0};function yt(ar,hr,_r,dr){var ur,lr,gr;if(_e(_r),lr=ar._events,lr===void 0?(lr=ar._events=Object.create(null),ar._eventsCount=0):(lr.newListener!==void 0&&(ar.emit("newListener",hr,_r.listener?_r.listener:_r),lr=ar._events),gr=lr[hr]),gr===void 0)gr=lr[hr]=_r,++ar._eventsCount;else if(typeof gr=="function"?gr=lr[hr]=dr?[_r,gr]:[gr,_r]:dr?gr.unshift(_r):gr.push(_r),ur=pt(ar),ur>0&&gr.length>ur&&!gr.warned){gr.warned=!0;var Mt=new Error("Possible EventEmitter memory leak detected. "+gr.length+" "+String(hr)+" listeners added. Use emitter.setMaxListeners() to increase limit");Mt.name="MaxListenersExceededWarning",Mt.emitter=ar,Mt.type=hr,Mt.count=gr.length,a(Mt)}return ar}c.prototype.addListener=function(hr,_r){return yt(this,hr,_r,!1)},c.prototype.on=c.prototype.addListener,c.prototype.prependListener=function(hr,_r){return yt(this,hr,_r,!0)};function ct(){if(!this.fired)return this.target.removeListener(this.type,this.wrapFn),this.fired=!0,arguments.length===0?this.listener.call(this.target):this.listener.apply(this.target,arguments)}function Ct(ar,hr,_r){var dr={fired:!1,wrapFn:void 0,target:ar,type:hr,listener:_r},ur=ct.bind(dr);return ur.listener=_r,dr.wrapFn=ur,ur}c.prototype.once=function(hr,_r){return _e(_r),this.on(hr,Ct(this,hr,_r)),this},c.prototype.prependOnceListener=function(hr,_r){return _e(_r),this.prependListener(hr,Ct(this,hr,_r)),this},c.prototype.removeListener=function(hr,_r){var dr,ur,lr,gr,Mt;if(_e(_r),ur=this._events,ur===void 0)return this;if(dr=ur[hr],dr===void 0)return this;if(dr===_r||dr.listener===_r)--this._eventsCount===0?this._events=Object.create(null):(delete ur[hr],ur.removeListener&&this.emit("removeListener",hr,dr.listener||_r));else if(typeof dr!="function"){for(lr=-1,gr=dr.length-1;gr>=0;gr--)if(dr[gr]===_r||dr[gr].listener===_r){Mt=dr[gr].listener,lr=gr;break}if(lr<0)return this;lr===0?dr.shift():Qt(dr,lr),dr.length===1&&(ur[hr]=dr[0]),ur.removeListener!==void 0&&this.emit("removeListener",hr,Mt||_r)}return this},c.prototype.off=c.prototype.removeListener,c.prototype.removeAllListeners=function(hr){var _r,dr,ur;if(dr=this._events,dr===void 0)return this;if(dr.removeListener===void 0)return arguments.length===0?(this._events=Object.create(null),this._eventsCount=0):dr[hr]!==void 0&&(--this._eventsCount===0?this._events=Object.create(null):delete dr[hr]),this;if(arguments.length===0){var lr=Object.keys(dr),gr;for(ur=0;ur<lr.length;++ur)gr=lr[ur],gr!=="removeListener"&&this.removeAllListeners(gr);return this.removeAllListeners("removeListener"),this._events=Object.create(null),this._eventsCount=0,this}if(_r=dr[hr],typeof _r=="function")this.removeListener(hr,_r);else if(_r!==void 0)for(ur=_r.length-1;ur>=0;ur--)this.removeListener(hr,_r[ur]);return this};function qt(ar,hr,_r){var dr=ar._events;if(dr===void 0)return[];var ur=dr[hr];return ur===void 0?[]:typeof ur=="function"?_r?[ur.listener||ur]:[ur]:_r?ir(ur):Lt(ur,ur.length)}c.prototype.listeners=function(hr){return qt(this,hr,!0)},c.prototype.rawListeners=function(hr){return qt(this,hr,!1)},c.listenerCount=function(ar,hr){return typeof ar.listenerCount=="function"?ar.listenerCount(hr):Ot.call(ar,hr)},c.prototype.listenerCount=Ot;function Ot(ar){var hr=this._events;if(hr!==void 0){var _r=hr[ar];if(typeof _r=="function")return 1;if(_r!==void 0)return _r.length}return 0}c.prototype.eventNames=function(){return this._eventsCount>0?o(this._events):[]};function Lt(ar,hr){for(var _r=new Array(hr),dr=0;dr<hr;++dr)_r[dr]=ar[dr];return _r}function Qt(ar,hr){for(;hr+1<ar.length;hr++)ar[hr]=ar[hr+1];ar.pop()}function ir(ar){for(var hr=new Array(ar.length),_r=0;_r<hr.length;++_r)hr[_r]=ar[_r].listener||ar[_r];return hr}function er(ar,hr){return new Promise(function(_r,dr){function ur(gr){ar.removeListener(hr,lr),dr(gr)}function lr(){typeof ar.removeListener=="function"&&ar.removeListener("error",ur),_r([].slice.call(arguments))}sr(ar,hr,lr,{once:!0}),hr!=="error"&&tr(ar,ur,{once:!0})})}function tr(ar,hr,_r){typeof ar.on=="function"&&sr(ar,"error",hr,_r)}function sr(ar,hr,_r,dr){if(typeof ar.on=="function")dr.once?ar.once(hr,_r):ar.on(hr,_r);else if(typeof ar.addEventListener=="function")ar.addEventListener(hr,function ur(lr){dr.once&&ar.removeEventListener(hr,ur),_r(lr)});else throw new TypeError('The "emitter" argument must be of type EventEmitter. Received type '+typeof ar)}return events.exports}var streamBrowser$1,hasRequiredStreamBrowser$1;function requireStreamBrowser$1(){return hasRequiredStreamBrowser$1||(hasRequiredStreamBrowser$1=1,streamBrowser$1=requireEvents().EventEmitter),streamBrowser$1}var util$1={},types={},shams$1,hasRequiredShams$1;function requireShams$1(){return hasRequiredShams$1||(hasRequiredShams$1=1,shams$1=function(){if(typeof Symbol!="function"||typeof Object.getOwnPropertySymbols!="function")return!1;if(typeof Symbol.iterator=="symbol")return!0;var e={},o=Symbol("test"),a=Object(o);if(typeof o=="string"||Object.prototype.toString.call(o)!=="[object Symbol]"||Object.prototype.toString.call(a)!=="[object Symbol]")return!1;var d=42;e[o]=d;for(var c in e)return!1;if(typeof Object.keys=="function"&&Object.keys(e).length!==0||typeof Object.getOwnPropertyNames=="function"&&Object.getOwnPropertyNames(e).length!==0)return!1;var j=Object.getOwnPropertySymbols(e);if(j.length!==1||j[0]!==o||!Object.prototype.propertyIsEnumerable.call(e,o))return!1;if(typeof Object.getOwnPropertyDescriptor=="function"){var _e=Object.getOwnPropertyDescriptor(e,o);if(_e.value!==d||_e.enumerable!==!0)return!1}return!0}),shams$1}var shams,hasRequiredShams;function requireShams(){if(hasRequiredShams)return shams;hasRequiredShams=1;var s=requireShams$1();return shams=function(){return s()&&!!Symbol.toStringTag},shams}var esObjectAtoms,hasRequiredEsObjectAtoms;function requireEsObjectAtoms(){return hasRequiredEsObjectAtoms||(hasRequiredEsObjectAtoms=1,esObjectAtoms=Object),esObjectAtoms}var esErrors,hasRequiredEsErrors;function requireEsErrors(){return hasRequiredEsErrors||(hasRequiredEsErrors=1,esErrors=Error),esErrors}var _eval,hasRequired_eval;function require_eval(){return hasRequired_eval||(hasRequired_eval=1,_eval=EvalError),_eval}var range,hasRequiredRange;function requireRange(){return hasRequiredRange||(hasRequiredRange=1,range=RangeError),range}var ref,hasRequiredRef;function requireRef(){return hasRequiredRef||(hasRequiredRef=1,ref=ReferenceError),ref}var syntax,hasRequiredSyntax;function requireSyntax(){return hasRequiredSyntax||(hasRequiredSyntax=1,syntax=SyntaxError),syntax}var type,hasRequiredType;function requireType(){return hasRequiredType||(hasRequiredType=1,type=TypeError),type}var uri,hasRequiredUri;function requireUri(){return hasRequiredUri||(hasRequiredUri=1,uri=URIError),uri}var abs,hasRequiredAbs;function requireAbs(){return hasRequiredAbs||(hasRequiredAbs=1,abs=Math.abs),abs}var floor,hasRequiredFloor;function requireFloor(){return hasRequiredFloor||(hasRequiredFloor=1,floor=Math.floor),floor}var max,hasRequiredMax;function requireMax(){return hasRequiredMax||(hasRequiredMax=1,max=Math.max),max}var min,hasRequiredMin;function requireMin(){return hasRequiredMin||(hasRequiredMin=1,min=Math.min),min}var pow,hasRequiredPow;function requirePow(){return hasRequiredPow||(hasRequiredPow=1,pow=Math.pow),pow}var round,hasRequiredRound;function requireRound(){return hasRequiredRound||(hasRequiredRound=1,round=Math.round),round}var _isNaN,hasRequired_isNaN;function require_isNaN(){return hasRequired_isNaN||(hasRequired_isNaN=1,_isNaN=Number.isNaN||function(e){return e!==e}),_isNaN}var sign$1,hasRequiredSign$1;function requireSign$1(){if(hasRequiredSign$1)return sign$1;hasRequiredSign$1=1;var s=require_isNaN();return sign$1=function(o){return s(o)||o===0?o:o<0?-1:1},sign$1}var gOPD,hasRequiredGOPD;function requireGOPD(){return hasRequiredGOPD||(hasRequiredGOPD=1,gOPD=Object.getOwnPropertyDescriptor),gOPD}var gopd,hasRequiredGopd;function requireGopd(){if(hasRequiredGopd)return gopd;hasRequiredGopd=1;var s=requireGOPD();if(s)try{s([],"length")}catch{s=null}return gopd=s,gopd}var esDefineProperty,hasRequiredEsDefineProperty;function requireEsDefineProperty(){if(hasRequiredEsDefineProperty)return esDefineProperty;hasRequiredEsDefineProperty=1;var s=Object.defineProperty||!1;if(s)try{s({},"a",{value:1})}catch{s=!1}return esDefineProperty=s,esDefineProperty}var hasSymbols,hasRequiredHasSymbols;function requireHasSymbols(){if(hasRequiredHasSymbols)return hasSymbols;hasRequiredHasSymbols=1;var s=typeof Symbol<"u"&&Symbol,e=requireShams$1();return hasSymbols=function(){return typeof s!="function"||typeof Symbol!="function"||typeof s("foo")!="symbol"||typeof Symbol("bar")!="symbol"?!1:e()},hasSymbols}var Reflect_getPrototypeOf,hasRequiredReflect_getPrototypeOf;function requireReflect_getPrototypeOf(){return hasRequiredReflect_getPrototypeOf||(hasRequiredReflect_getPrototypeOf=1,Reflect_getPrototypeOf=typeof Reflect<"u"&&Reflect.getPrototypeOf||null),Reflect_getPrototypeOf}var Object_getPrototypeOf,hasRequiredObject_getPrototypeOf;function requireObject_getPrototypeOf(){if(hasRequiredObject_getPrototypeOf)return Object_getPrototypeOf;hasRequiredObject_getPrototypeOf=1;var s=requireEsObjectAtoms();return Object_getPrototypeOf=s.getPrototypeOf||null,Object_getPrototypeOf}var implementation,hasRequiredImplementation;function requireImplementation(){if(hasRequiredImplementation)return implementation;hasRequiredImplementation=1;var s="Function.prototype.bind called on incompatible ",e=Object.prototype.toString,o=Math.max,a="[object Function]",d=function(pt,yt){for(var ct=[],Ct=0;Ct<pt.length;Ct+=1)ct[Ct]=pt[Ct];for(var qt=0;qt<yt.length;qt+=1)ct[qt+pt.length]=yt[qt];return ct},c=function(pt,yt){for(var ct=[],Ct=yt,qt=0;Ct<pt.length;Ct+=1,qt+=1)ct[qt]=pt[Ct];return ct},j=function(_e,pt){for(var yt="",ct=0;ct<_e.length;ct+=1)yt+=_e[ct],ct+1<_e.length&&(yt+=pt);return yt};return implementation=function(pt){var yt=this;if(typeof yt!="function"||e.apply(yt)!==a)throw new TypeError(s+yt);for(var ct=c(arguments,1),Ct,qt=function(){if(this instanceof Ct){var er=yt.apply(this,d(ct,arguments));return Object(er)===er?er:this}return yt.apply(pt,d(ct,arguments))},Ot=o(0,yt.length-ct.length),Lt=[],Qt=0;Qt<Ot;Qt++)Lt[Qt]="$"+Qt;if(Ct=Function("binder","return function ("+j(Lt,",")+"){ return binder.apply(this,arguments); }")(qt),yt.prototype){var ir=function(){};ir.prototype=yt.prototype,Ct.prototype=new ir,ir.prototype=null}return Ct},implementation}var functionBind,hasRequiredFunctionBind;function requireFunctionBind(){if(hasRequiredFunctionBind)return functionBind;hasRequiredFunctionBind=1;var s=requireImplementation();return functionBind=Function.prototype.bind||s,functionBind}var functionCall,hasRequiredFunctionCall;function requireFunctionCall(){return hasRequiredFunctionCall||(hasRequiredFunctionCall=1,functionCall=Function.prototype.call),functionCall}var functionApply,hasRequiredFunctionApply;function requireFunctionApply(){return hasRequiredFunctionApply||(hasRequiredFunctionApply=1,functionApply=Function.prototype.apply),functionApply}var reflectApply,hasRequiredReflectApply;function requireReflectApply(){return hasRequiredReflectApply||(hasRequiredReflectApply=1,reflectApply=typeof Reflect<"u"&&Reflect&&Reflect.apply),reflectApply}var actualApply,hasRequiredActualApply;function requireActualApply(){if(hasRequiredActualApply)return actualApply;hasRequiredActualApply=1;var s=requireFunctionBind(),e=requireFunctionApply(),o=requireFunctionCall(),a=requireReflectApply();return actualApply=a||s.call(o,e),actualApply}var callBindApplyHelpers,hasRequiredCallBindApplyHelpers;function requireCallBindApplyHelpers(){if(hasRequiredCallBindApplyHelpers)return callBindApplyHelpers;hasRequiredCallBindApplyHelpers=1;var s=requireFunctionBind(),e=requireType(),o=requireFunctionCall(),a=requireActualApply();return callBindApplyHelpers=function(c){if(c.length<1||typeof c[0]!="function")throw new e("a function is required");return a(s,o,c)},callBindApplyHelpers}var get,hasRequiredGet;function requireGet(){if(hasRequiredGet)return get;hasRequiredGet=1;var s=requireCallBindApplyHelpers(),e=requireGopd(),o;try{o=[].__proto__===Array.prototype}catch(j){if(!j||typeof j!="object"||!("code"in j)||j.code!=="ERR_PROTO_ACCESS")throw j}var a=!!o&&e&&e(Object.prototype,"__proto__"),d=Object,c=d.getPrototypeOf;return get=a&&typeof a.get=="function"?s([a.get]):typeof c=="function"?function(_e){return c(_e==null?_e:d(_e))}:!1,get}var getProto,hasRequiredGetProto;function requireGetProto(){if(hasRequiredGetProto)return getProto;hasRequiredGetProto=1;var s=requireReflect_getPrototypeOf(),e=requireObject_getPrototypeOf(),o=requireGet();return getProto=s?function(d){return s(d)}:e?function(d){if(!d||typeof d!="object"&&typeof d!="function")throw new TypeError("getProto: not an object");return e(d)}:o?function(d){return o(d)}:null,getProto}var hasown,hasRequiredHasown;function requireHasown(){if(hasRequiredHasown)return hasown;hasRequiredHasown=1;var s=Function.prototype.call,e=Object.prototype.hasOwnProperty,o=requireFunctionBind();return hasown=o.call(s,e),hasown}var getIntrinsic,hasRequiredGetIntrinsic;function requireGetIntrinsic(){if(hasRequiredGetIntrinsic)return getIntrinsic;hasRequiredGetIntrinsic=1;var s,e=requireEsObjectAtoms(),o=requireEsErrors(),a=require_eval(),d=requireRange(),c=requireRef(),j=requireSyntax(),_e=requireType(),pt=requireUri(),yt=requireAbs(),ct=requireFloor(),Ct=requireMax(),qt=requireMin(),Ot=requirePow(),Lt=requireRound(),Qt=requireSign$1(),ir=Function,er=function(Tr){try{return ir('"use strict"; return ('+Tr+").constructor;")()}catch{}},tr=requireGopd(),sr=requireEsDefineProperty(),ar=function(){throw new _e},hr=tr?function(){try{return arguments.callee,ar}catch{try{return tr(arguments,"callee").get}catch{return ar}}}():ar,_r=requireHasSymbols()(),dr=requireGetProto(),ur=requireObject_getPrototypeOf(),lr=requireReflect_getPrototypeOf(),gr=requireFunctionApply(),Mt=requireFunctionCall(),h={},_=typeof Uint8Array>"u"||!dr?s:dr(Uint8Array),b={__proto__:null,"%AggregateError%":typeof AggregateError>"u"?s:AggregateError,"%Array%":Array,"%ArrayBuffer%":typeof ArrayBuffer>"u"?s:ArrayBuffer,"%ArrayIteratorPrototype%":_r&&dr?dr([][Symbol.iterator]()):s,"%AsyncFromSyncIteratorPrototype%":s,"%AsyncFunction%":h,"%AsyncGenerator%":h,"%AsyncGeneratorFunction%":h,"%AsyncIteratorPrototype%":h,"%Atomics%":typeof Atomics>"u"?s:Atomics,"%BigInt%":typeof BigInt>"u"?s:BigInt,"%BigInt64Array%":typeof BigInt64Array>"u"?s:BigInt64Array,"%BigUint64Array%":typeof BigUint64Array>"u"?s:BigUint64Array,"%Boolean%":Boolean,"%DataView%":typeof DataView>"u"?s:DataView,"%Date%":Date,"%decodeURI%":decodeURI,"%decodeURIComponent%":decodeURIComponent,"%encodeURI%":encodeURI,"%encodeURIComponent%":encodeURIComponent,"%Error%":o,"%eval%":eval,"%EvalError%":a,"%Float16Array%":typeof Float16Array>"u"?s:Float16Array,"%Float32Array%":typeof Float32Array>"u"?s:Float32Array,"%Float64Array%":typeof Float64Array>"u"?s:Float64Array,"%FinalizationRegistry%":typeof FinalizationRegistry>"u"?s:FinalizationRegistry,"%Function%":ir,"%GeneratorFunction%":h,"%Int8Array%":typeof Int8Array>"u"?s:Int8Array,"%Int16Array%":typeof Int16Array>"u"?s:Int16Array,"%Int32Array%":typeof Int32Array>"u"?s:Int32Array,"%isFinite%":isFinite,"%isNaN%":isNaN,"%IteratorPrototype%":_r&&dr?dr(dr([][Symbol.iterator]())):s,"%JSON%":typeof JSON=="object"?JSON:s,"%Map%":typeof Map>"u"?s:Map,"%MapIteratorPrototype%":typeof Map>"u"||!_r||!dr?s:dr(new Map()[Symbol.iterator]()),"%Math%":Math,"%Number%":Number,"%Object%":e,"%Object.getOwnPropertyDescriptor%":tr,"%parseFloat%":parseFloat,"%parseInt%":parseInt,"%Promise%":typeof Promise>"u"?s:Promise,"%Proxy%":typeof Proxy>"u"?s:Proxy,"%RangeError%":d,"%ReferenceError%":c,"%Reflect%":typeof Reflect>"u"?s:Reflect,"%RegExp%":RegExp,"%Set%":typeof Set>"u"?s:Set,"%SetIteratorPrototype%":typeof Set>"u"||!_r||!dr?s:dr(new Set()[Symbol.iterator]()),"%SharedArrayBuffer%":typeof SharedArrayBuffer>"u"?s:SharedArrayBuffer,"%String%":String,"%StringIteratorPrototype%":_r&&dr?dr(""[Symbol.iterator]()):s,"%Symbol%":_r?Symbol:s,"%SyntaxError%":j,"%ThrowTypeError%":hr,"%TypedArray%":_,"%TypeError%":_e,"%Uint8Array%":typeof Uint8Array>"u"?s:Uint8Array,"%Uint8ClampedArray%":typeof Uint8ClampedArray>"u"?s:Uint8ClampedArray,"%Uint16Array%":typeof Uint16Array>"u"?s:Uint16Array,"%Uint32Array%":typeof Uint32Array>"u"?s:Uint32Array,"%URIError%":pt,"%WeakMap%":typeof WeakMap>"u"?s:WeakMap,"%WeakRef%":typeof WeakRef>"u"?s:WeakRef,"%WeakSet%":typeof WeakSet>"u"?s:WeakSet,"%Function.prototype.call%":Mt,"%Function.prototype.apply%":gr,"%Object.defineProperty%":sr,"%Object.getPrototypeOf%":ur,"%Math.abs%":yt,"%Math.floor%":ct,"%Math.max%":Ct,"%Math.min%":qt,"%Math.pow%":Ot,"%Math.round%":Lt,"%Math.sign%":Qt,"%Reflect.getPrototypeOf%":lr};if(dr)try{null.error}catch(Tr){var lt=dr(dr(Tr));b["%Error.prototype%"]=lt}var Rt=function Tr(Ir){var Sr;if(Ir==="%AsyncFunction%")Sr=er("async function () {}");else if(Ir==="%GeneratorFunction%")Sr=er("function* () {}");else if(Ir==="%AsyncGeneratorFunction%")Sr=er("async function* () {}");else if(Ir==="%AsyncGenerator%"){var br=Tr("%AsyncGeneratorFunction%");br&&(Sr=br.prototype)}else if(Ir==="%AsyncIteratorPrototype%"){var kr=Tr("%AsyncGenerator%");kr&&dr&&(Sr=dr(kr.prototype))}return b[Ir]=Sr,Sr},kt={__proto__:null,"%ArrayBufferPrototype%":["ArrayBuffer","prototype"],"%ArrayPrototype%":["Array","prototype"],"%ArrayProto_entries%":["Array","prototype","entries"],"%ArrayProto_forEach%":["Array","prototype","forEach"],"%ArrayProto_keys%":["Array","prototype","keys"],"%ArrayProto_values%":["Array","prototype","values"],"%AsyncFunctionPrototype%":["AsyncFunction","prototype"],"%AsyncGenerator%":["AsyncGeneratorFunction","prototype"],"%AsyncGeneratorPrototype%":["AsyncGeneratorFunction","prototype","prototype"],"%BooleanPrototype%":["Boolean","prototype"],"%DataViewPrototype%":["DataView","prototype"],"%DatePrototype%":["Date","prototype"],"%ErrorPrototype%":["Error","prototype"],"%EvalErrorPrototype%":["EvalError","prototype"],"%Float32ArrayPrototype%":["Float32Array","prototype"],"%Float64ArrayPrototype%":["Float64Array","prototype"],"%FunctionPrototype%":["Function","prototype"],"%Generator%":["GeneratorFunction","prototype"],"%GeneratorPrototype%":["GeneratorFunction","prototype","prototype"],"%Int8ArrayPrototype%":["Int8Array","prototype"],"%Int16ArrayPrototype%":["Int16Array","prototype"],"%Int32ArrayPrototype%":["Int32Array","prototype"],"%JSONParse%":["JSON","parse"],"%JSONStringify%":["JSON","stringify"],"%MapPrototype%":["Map","prototype"],"%NumberPrototype%":["Number","prototype"],"%ObjectPrototype%":["Object","prototype"],"%ObjProto_toString%":["Object","prototype","toString"],"%ObjProto_valueOf%":["Object","prototype","valueOf"],"%PromisePrototype%":["Promise","prototype"],"%PromiseProto_then%":["Promise","prototype","then"],"%Promise_all%":["Promise","all"],"%Promise_reject%":["Promise","reject"],"%Promise_resolve%":["Promise","resolve"],"%RangeErrorPrototype%":["RangeError","prototype"],"%ReferenceErrorPrototype%":["ReferenceError","prototype"],"%RegExpPrototype%":["RegExp","prototype"],"%SetPrototype%":["Set","prototype"],"%SharedArrayBufferPrototype%":["SharedArrayBuffer","prototype"],"%StringPrototype%":["String","prototype"],"%SymbolPrototype%":["Symbol","prototype"],"%SyntaxErrorPrototype%":["SyntaxError","prototype"],"%TypedArrayPrototype%":["TypedArray","prototype"],"%TypeErrorPrototype%":["TypeError","prototype"],"%Uint8ArrayPrototype%":["Uint8Array","prototype"],"%Uint8ClampedArrayPrototype%":["Uint8ClampedArray","prototype"],"%Uint16ArrayPrototype%":["Uint16Array","prototype"],"%Uint32ArrayPrototype%":["Uint32Array","prototype"],"%URIErrorPrototype%":["URIError","prototype"],"%WeakMapPrototype%":["WeakMap","prototype"],"%WeakSetPrototype%":["WeakSet","prototype"]},Ft=requireFunctionBind(),xt=requireHasown(),g=Ft.call(Mt,Array.prototype.concat),wt=Ft.call(gr,Array.prototype.splice),nr=Ft.call(Mt,String.prototype.replace),or=Ft.call(Mt,String.prototype.slice),cr=Ft.call(Mt,RegExp.prototype.exec),Rr=/[^%.[\]]+|\[(?:(-?\d+(?:\.\d+)?)|(["'])((?:(?!\2)[^\\]|\\.)*?)\2)\]|(?=(?:\.|\[\])(?:\.|\[\]|%$))/g,Ar=/\\(\\)?/g,pr=function(Ir){var Sr=or(Ir,0,1),br=or(Ir,-1);if(Sr==="%"&&br!=="%")throw new j("invalid intrinsic syntax, expected closing `%`");if(br==="%"&&Sr!=="%")throw new j("invalid intrinsic syntax, expected opening `%`");var kr=[];return nr(Ir,Rr,function(Qr,qr,$r,gn){kr[kr.length]=$r?nr(gn,Ar,"$1"):qr||Qr}),kr},wr=function(Ir,Sr){var br=Ir,kr;if(xt(kt,br)&&(kr=kt[br],br="%"+kr[0]+"%"),xt(b,br)){var Qr=b[br];if(Qr===h&&(Qr=Rt(br)),typeof Qr>"u"&&!Sr)throw new _e("intrinsic "+Ir+" exists, but is not available. Please file an issue!");return{alias:kr,name:br,value:Qr}}throw new j("intrinsic "+Ir+" does not exist!")};return getIntrinsic=function(Ir,Sr){if(typeof Ir!="string"||Ir.length===0)throw new _e("intrinsic name must be a non-empty string");if(arguments.length>1&&typeof Sr!="boolean")throw new _e('"allowMissing" argument must be a boolean');if(cr(/^%?[^%]*%?$/,Ir)===null)throw new j("`%` may not be present anywhere but at the beginning and end of the intrinsic name");var br=pr(Ir),kr=br.length>0?br[0]:"",Qr=wr("%"+kr+"%",Sr),qr=Qr.name,$r=Qr.value,gn=!1,Lr=Qr.alias;Lr&&(kr=Lr[0],wt(br,g([0,1],Lr)));for(var Dr=1,En=!0;Dr<br.length;Dr+=1){var Fr=br[Dr],zr=or(Fr,0,1),yn=or(Fr,-1);if((zr==='"'||zr==="'"||zr==="`"||yn==='"'||yn==="'"||yn==="`")&&zr!==yn)throw new j("property names with quotes must have matching quotes");if((Fr==="constructor"||!En)&&(gn=!0),kr+="."+Fr,qr="%"+kr+"%",xt(b,qr))$r=b[qr];else if($r!=null){if(!(Fr in $r)){if(!Sr)throw new _e("base intrinsic for "+Ir+" exists, but the property is not available.");return}if(tr&&Dr+1>=br.length){var Nr=tr($r,Fr);En=!!Nr,En&&"get"in Nr&&!("originalValue"in Nr.get)?$r=Nr.get:$r=$r[Fr]}else En=xt($r,Fr),$r=$r[Fr];En&&!gn&&(b[qr]=$r)}}return $r},getIntrinsic}var callBound,hasRequiredCallBound;function requireCallBound(){if(hasRequiredCallBound)return callBound;hasRequiredCallBound=1;var s=requireGetIntrinsic(),e=requireCallBindApplyHelpers(),o=e([s("%String.prototype.indexOf%")]);return callBound=function(d,c){var j=s(d,!!c);return typeof j=="function"&&o(d,".prototype.")>-1?e([j]):j},callBound}var isArguments,hasRequiredIsArguments;function requireIsArguments(){if(hasRequiredIsArguments)return isArguments;hasRequiredIsArguments=1;var s=requireShams()(),e=requireCallBound(),o=e("Object.prototype.toString"),a=function(_e){return s&&_e&&typeof _e=="object"&&Symbol.toStringTag in _e?!1:o(_e)==="[object Arguments]"},d=function(_e){return a(_e)?!0:_e!==null&&typeof _e=="object"&&"length"in _e&&typeof _e.length=="number"&&_e.length>=0&&o(_e)!=="[object Array]"&&"callee"in _e&&o(_e.callee)==="[object Function]"},c=function(){return a(arguments)}();return a.isLegacyArguments=d,isArguments=c?a:d,isArguments}var isRegex,hasRequiredIsRegex;function requireIsRegex(){if(hasRequiredIsRegex)return isRegex;hasRequiredIsRegex=1;var s=requireCallBound(),e=requireShams()(),o=requireHasown(),a=requireGopd(),d;if(e){var c=s("RegExp.prototype.exec"),j={},_e=function(){throw j},pt={toString:_e,valueOf:_e};typeof Symbol.toPrimitive=="symbol"&&(pt[Symbol.toPrimitive]=_e),d=function(qt){if(!qt||typeof qt!="object")return!1;var Ot=a(qt,"lastIndex"),Lt=Ot&&o(Ot,"value");if(!Lt)return!1;try{c(qt,pt)}catch(Qt){return Qt===j}}}else{var yt=s("Object.prototype.toString"),ct="[object RegExp]";d=function(qt){return!qt||typeof qt!="object"&&typeof qt!="function"?!1:yt(qt)===ct}}return isRegex=d,isRegex}var safeRegexTest,hasRequiredSafeRegexTest;function requireSafeRegexTest(){if(hasRequiredSafeRegexTest)return safeRegexTest;hasRequiredSafeRegexTest=1;var s=requireCallBound(),e=requireIsRegex(),o=s("RegExp.prototype.exec"),a=requireType();return safeRegexTest=function(c){if(!e(c))throw new a("`regex` must be a RegExp");return function(_e){return o(c,_e)!==null}},safeRegexTest}var isGeneratorFunction,hasRequiredIsGeneratorFunction;function requireIsGeneratorFunction(){if(hasRequiredIsGeneratorFunction)return isGeneratorFunction;hasRequiredIsGeneratorFunction=1;var s=requireCallBound(),e=requireSafeRegexTest(),o=e(/^\s*(?:function)?\*/),a=requireShams()(),d=requireGetProto(),c=s("Object.prototype.toString"),j=s("Function.prototype.toString"),_e=function(){if(!a)return!1;try{return Function("return function*() {}")()}catch{}},pt;return isGeneratorFunction=function(ct){if(typeof ct!="function")return!1;if(o(j(ct)))return!0;if(!a){var Ct=c(ct);return Ct==="[object GeneratorFunction]"}if(!d)return!1;if(typeof pt>"u"){var qt=_e();pt=qt?d(qt):!1}return d(ct)===pt},isGeneratorFunction}var isCallable,hasRequiredIsCallable;function requireIsCallable(){if(hasRequiredIsCallable)return isCallable;hasRequiredIsCallable=1;var s=Function.prototype.toString,e=typeof Reflect=="object"&&Reflect!==null&&Reflect.apply,o,a;if(typeof e=="function"&&typeof Object.defineProperty=="function")try{o=Object.defineProperty({},"length",{get:function(){throw a}}),a={},e(function(){throw 42},null,o)}catch(tr){tr!==a&&(e=null)}else e=null;var d=/^\s*class\b/,c=function(sr){try{var ar=s.call(sr);return d.test(ar)}catch{return!1}},j=function(sr){try{return c(sr)?!1:(s.call(sr),!0)}catch{return!1}},_e=Object.prototype.toString,pt="[object Object]",yt="[object Function]",ct="[object GeneratorFunction]",Ct="[object HTMLAllCollection]",qt="[object HTML document.all class]",Ot="[object HTMLCollection]",Lt=typeof Symbol=="function"&&!!Symbol.toStringTag,Qt=!(0 in[,]),ir=function(){return!1};if(typeof document=="object"){var er=document.all;_e.call(er)===_e.call(document.all)&&(ir=function(sr){if((Qt||!sr)&&(typeof sr>"u"||typeof sr=="object"))try{var ar=_e.call(sr);return(ar===Ct||ar===qt||ar===Ot||ar===pt)&&sr("")==null}catch{}return!1})}return isCallable=e?function(sr){if(ir(sr))return!0;if(!sr||typeof sr!="function"&&typeof sr!="object")return!1;try{e(sr,null,o)}catch(ar){if(ar!==a)return!1}return!c(sr)&&j(sr)}:function(sr){if(ir(sr))return!0;if(!sr||typeof sr!="function"&&typeof sr!="object")return!1;if(Lt)return j(sr);if(c(sr))return!1;var ar=_e.call(sr);return ar!==yt&&ar!==ct&&!/^\[object HTML/.test(ar)?!1:j(sr)},isCallable}var forEach,hasRequiredForEach;function requireForEach(){if(hasRequiredForEach)return forEach;hasRequiredForEach=1;var s=requireIsCallable(),e=Object.prototype.toString,o=Object.prototype.hasOwnProperty,a=function(pt,yt,ct){for(var Ct=0,qt=pt.length;Ct<qt;Ct++)o.call(pt,Ct)&&(ct==null?yt(pt[Ct],Ct,pt):yt.call(ct,pt[Ct],Ct,pt))},d=function(pt,yt,ct){for(var Ct=0,qt=pt.length;Ct<qt;Ct++)ct==null?yt(pt.charAt(Ct),Ct,pt):yt.call(ct,pt.charAt(Ct),Ct,pt)},c=function(pt,yt,ct){for(var Ct in pt)o.call(pt,Ct)&&(ct==null?yt(pt[Ct],Ct,pt):yt.call(ct,pt[Ct],Ct,pt))};function j(_e){return e.call(_e)==="[object Array]"}return forEach=function(pt,yt,ct){if(!s(yt))throw new TypeError("iterator must be a function");var Ct;arguments.length>=3&&(Ct=ct),j(pt)?a(pt,yt,Ct):typeof pt=="string"?d(pt,yt,Ct):c(pt,yt,Ct)},forEach}var possibleTypedArrayNames,hasRequiredPossibleTypedArrayNames;function requirePossibleTypedArrayNames(){return hasRequiredPossibleTypedArrayNames||(hasRequiredPossibleTypedArrayNames=1,possibleTypedArrayNames=["Float16Array","Float32Array","Float64Array","Int8Array","Int16Array","Int32Array","Uint8Array","Uint8ClampedArray","Uint16Array","Uint32Array","BigInt64Array","BigUint64Array"]),possibleTypedArrayNames}var availableTypedArrays,hasRequiredAvailableTypedArrays;function requireAvailableTypedArrays(){if(hasRequiredAvailableTypedArrays)return availableTypedArrays;hasRequiredAvailableTypedArrays=1;var s=requirePossibleTypedArrayNames(),e=typeof globalThis>"u"?commonjsGlobal$2:globalThis;return availableTypedArrays=function(){for(var a=[],d=0;d<s.length;d++)typeof e[s[d]]=="function"&&(a[a.length]=s[d]);return a},availableTypedArrays}var callBind={exports:{}},defineDataProperty,hasRequiredDefineDataProperty;function requireDefineDataProperty(){if(hasRequiredDefineDataProperty)return defineDataProperty;hasRequiredDefineDataProperty=1;var s=requireEsDefineProperty(),e=requireSyntax(),o=requireType(),a=requireGopd();return defineDataProperty=function(c,j,_e){if(!c||typeof c!="object"&&typeof c!="function")throw new o("`obj` must be an object or a function`");if(typeof j!="string"&&typeof j!="symbol")throw new o("`property` must be a string or a symbol`");if(arguments.length>3&&typeof arguments[3]!="boolean"&&arguments[3]!==null)throw new o("`nonEnumerable`, if provided, must be a boolean or null");if(arguments.length>4&&typeof arguments[4]!="boolean"&&arguments[4]!==null)throw new o("`nonWritable`, if provided, must be a boolean or null");if(arguments.length>5&&typeof arguments[5]!="boolean"&&arguments[5]!==null)throw new o("`nonConfigurable`, if provided, must be a boolean or null");if(arguments.length>6&&typeof arguments[6]!="boolean")throw new o("`loose`, if provided, must be a boolean");var pt=arguments.length>3?arguments[3]:null,yt=arguments.length>4?arguments[4]:null,ct=arguments.length>5?arguments[5]:null,Ct=arguments.length>6?arguments[6]:!1,qt=!!a&&a(c,j);if(s)s(c,j,{configurable:ct===null&&qt?qt.configurable:!ct,enumerable:pt===null&&qt?qt.enumerable:!pt,value:_e,writable:yt===null&&qt?qt.writable:!yt});else if(Ct||!pt&&!yt&&!ct)c[j]=_e;else throw new e("This environment does not support defining a property as non-configurable, non-writable, or non-enumerable.")},defineDataProperty}var hasPropertyDescriptors_1,hasRequiredHasPropertyDescriptors;function requireHasPropertyDescriptors(){if(hasRequiredHasPropertyDescriptors)return hasPropertyDescriptors_1;hasRequiredHasPropertyDescriptors=1;var s=requireEsDefineProperty(),e=function(){return!!s};return e.hasArrayLengthDefineBug=function(){if(!s)return null;try{return s([],"length",{value:1}).length!==1}catch{return!0}},hasPropertyDescriptors_1=e,hasPropertyDescriptors_1}var setFunctionLength,hasRequiredSetFunctionLength;function requireSetFunctionLength(){if(hasRequiredSetFunctionLength)return setFunctionLength;hasRequiredSetFunctionLength=1;var s=requireGetIntrinsic(),e=requireDefineDataProperty(),o=requireHasPropertyDescriptors()(),a=requireGopd(),d=requireType(),c=s("%Math.floor%");return setFunctionLength=function(_e,pt){if(typeof _e!="function")throw new d("`fn` is not a function");if(typeof pt!="number"||pt<0||pt>4294967295||c(pt)!==pt)throw new d("`length` must be a positive 32-bit integer");var yt=arguments.length>2&&!!arguments[2],ct=!0,Ct=!0;if("length"in _e&&a){var qt=a(_e,"length");qt&&!qt.configurable&&(ct=!1),qt&&!qt.writable&&(Ct=!1)}return(ct||Ct||!yt)&&(o?e(_e,"length",pt,!0,!0):e(_e,"length",pt)),_e},setFunctionLength}var applyBind,hasRequiredApplyBind;function requireApplyBind(){if(hasRequiredApplyBind)return applyBind;hasRequiredApplyBind=1;var s=requireFunctionBind(),e=requireFunctionApply(),o=requireActualApply();return applyBind=function(){return o(s,e,arguments)},applyBind}var hasRequiredCallBind;function requireCallBind(){return hasRequiredCallBind||(hasRequiredCallBind=1,function(s){var e=requireSetFunctionLength(),o=requireEsDefineProperty(),a=requireCallBindApplyHelpers(),d=requireApplyBind();s.exports=function(j){var _e=a(arguments),pt=j.length-(arguments.length-1);return e(_e,1+(pt>0?pt:0),!0)},o?o(s.exports,"apply",{value:d}):s.exports.apply=d}(callBind)),callBind.exports}var whichTypedArray,hasRequiredWhichTypedArray;function requireWhichTypedArray(){if(hasRequiredWhichTypedArray)return whichTypedArray;hasRequiredWhichTypedArray=1;var s=requireForEach(),e=requireAvailableTypedArrays(),o=requireCallBind(),a=requireCallBound(),d=requireGopd(),c=requireGetProto(),j=a("Object.prototype.toString"),_e=requireShams()(),pt=typeof globalThis>"u"?commonjsGlobal$2:globalThis,yt=e(),ct=a("String.prototype.slice"),Ct=a("Array.prototype.indexOf",!0)||function(ir,er){for(var tr=0;tr<ir.length;tr+=1)if(ir[tr]===er)return tr;return-1},qt={__proto__:null};_e&&d&&c?s(yt,function(Qt){var ir=new pt[Qt];if(Symbol.toStringTag in ir&&c){var er=c(ir),tr=d(er,Symbol.toStringTag);if(!tr&&er){var sr=c(er);tr=d(sr,Symbol.toStringTag)}qt["$"+Qt]=o(tr.get)}}):s(yt,function(Qt){var ir=new pt[Qt],er=ir.slice||ir.set;er&&(qt["$"+Qt]=o(er))});var Ot=function(ir){var er=!1;return s(qt,function(tr,sr){if(!er)try{"$"+tr(ir)===sr&&(er=ct(sr,1))}catch{}}),er},Lt=function(ir){var er=!1;return s(qt,function(tr,sr){if(!er)try{tr(ir),er=ct(sr,1)}catch{}}),er};return whichTypedArray=function(ir){if(!ir||typeof ir!="object")return!1;if(!_e){var er=ct(j(ir),8,-1);return Ct(yt,er)>-1?er:er!=="Object"?!1:Lt(ir)}return d?Ot(ir):null},whichTypedArray}var isTypedArray,hasRequiredIsTypedArray;function requireIsTypedArray(){if(hasRequiredIsTypedArray)return isTypedArray;hasRequiredIsTypedArray=1;var s=requireWhichTypedArray();return isTypedArray=function(o){return!!s(o)},isTypedArray}var hasRequiredTypes;function requireTypes(){return hasRequiredTypes||(hasRequiredTypes=1,function(s){var e=requireIsArguments(),o=requireIsGeneratorFunction(),a=requireWhichTypedArray(),d=requireIsTypedArray();function c(Dr){return Dr.call.bind(Dr)}var j=typeof BigInt<"u",_e=typeof Symbol<"u",pt=c(Object.prototype.toString),yt=c(Number.prototype.valueOf),ct=c(String.prototype.valueOf),Ct=c(Boolean.prototype.valueOf);if(j)var qt=c(BigInt.prototype.valueOf);if(_e)var Ot=c(Symbol.prototype.valueOf);function Lt(Dr,En){if(typeof Dr!="object")return!1;try{return En(Dr),!0}catch{return!1}}s.isArgumentsObject=e,s.isGeneratorFunction=o,s.isTypedArray=d;function Qt(Dr){return typeof Promise<"u"&&Dr instanceof Promise||Dr!==null&&typeof Dr=="object"&&typeof Dr.then=="function"&&typeof Dr.catch=="function"}s.isPromise=Qt;function ir(Dr){return typeof ArrayBuffer<"u"&&ArrayBuffer.isView?ArrayBuffer.isView(Dr):d(Dr)||or(Dr)}s.isArrayBufferView=ir;function er(Dr){return a(Dr)==="Uint8Array"}s.isUint8Array=er;function tr(Dr){return a(Dr)==="Uint8ClampedArray"}s.isUint8ClampedArray=tr;function sr(Dr){return a(Dr)==="Uint16Array"}s.isUint16Array=sr;function ar(Dr){return a(Dr)==="Uint32Array"}s.isUint32Array=ar;function hr(Dr){return a(Dr)==="Int8Array"}s.isInt8Array=hr;function _r(Dr){return a(Dr)==="Int16Array"}s.isInt16Array=_r;function dr(Dr){return a(Dr)==="Int32Array"}s.isInt32Array=dr;function ur(Dr){return a(Dr)==="Float32Array"}s.isFloat32Array=ur;function lr(Dr){return a(Dr)==="Float64Array"}s.isFloat64Array=lr;function gr(Dr){return a(Dr)==="BigInt64Array"}s.isBigInt64Array=gr;function Mt(Dr){return a(Dr)==="BigUint64Array"}s.isBigUint64Array=Mt;function h(Dr){return pt(Dr)==="[object Map]"}h.working=typeof Map<"u"&&h(new Map);function _(Dr){return typeof Map>"u"?!1:h.working?h(Dr):Dr instanceof Map}s.isMap=_;function b(Dr){return pt(Dr)==="[object Set]"}b.working=typeof Set<"u"&&b(new Set);function lt(Dr){return typeof Set>"u"?!1:b.working?b(Dr):Dr instanceof Set}s.isSet=lt;function Rt(Dr){return pt(Dr)==="[object WeakMap]"}Rt.working=typeof WeakMap<"u"&&Rt(new WeakMap);function kt(Dr){return typeof WeakMap>"u"?!1:Rt.working?Rt(Dr):Dr instanceof WeakMap}s.isWeakMap=kt;function Ft(Dr){return pt(Dr)==="[object WeakSet]"}Ft.working=typeof WeakSet<"u"&&Ft(new WeakSet);function xt(Dr){return Ft(Dr)}s.isWeakSet=xt;function g(Dr){return pt(Dr)==="[object ArrayBuffer]"}g.working=typeof ArrayBuffer<"u"&&g(new ArrayBuffer);function wt(Dr){return typeof ArrayBuffer>"u"?!1:g.working?g(Dr):Dr instanceof ArrayBuffer}s.isArrayBuffer=wt;function nr(Dr){return pt(Dr)==="[object DataView]"}nr.working=typeof ArrayBuffer<"u"&&typeof DataView<"u"&&nr(new DataView(new ArrayBuffer(1),0,1));function or(Dr){return typeof DataView>"u"?!1:nr.working?nr(Dr):Dr instanceof DataView}s.isDataView=or;var cr=typeof SharedArrayBuffer<"u"?SharedArrayBuffer:void 0;function Rr(Dr){return pt(Dr)==="[object SharedArrayBuffer]"}function Ar(Dr){return typeof cr>"u"?!1:(typeof Rr.working>"u"&&(Rr.working=Rr(new cr)),Rr.working?Rr(Dr):Dr instanceof cr)}s.isSharedArrayBuffer=Ar;function pr(Dr){return pt(Dr)==="[object AsyncFunction]"}s.isAsyncFunction=pr;function wr(Dr){return pt(Dr)==="[object Map Iterator]"}s.isMapIterator=wr;function Tr(Dr){return pt(Dr)==="[object Set Iterator]"}s.isSetIterator=Tr;function Ir(Dr){return pt(Dr)==="[object Generator]"}s.isGeneratorObject=Ir;function Sr(Dr){return pt(Dr)==="[object WebAssembly.Module]"}s.isWebAssemblyCompiledModule=Sr;function br(Dr){return Lt(Dr,yt)}s.isNumberObject=br;function kr(Dr){return Lt(Dr,ct)}s.isStringObject=kr;function Qr(Dr){return Lt(Dr,Ct)}s.isBooleanObject=Qr;function qr(Dr){return j&&Lt(Dr,qt)}s.isBigIntObject=qr;function $r(Dr){return _e&&Lt(Dr,Ot)}s.isSymbolObject=$r;function gn(Dr){return br(Dr)||kr(Dr)||Qr(Dr)||qr(Dr)||$r(Dr)}s.isBoxedPrimitive=gn;function Lr(Dr){return typeof Uint8Array<"u"&&(wt(Dr)||Ar(Dr))}s.isAnyArrayBuffer=Lr,["isProxy","isExternal","isModuleNamespaceObject"].forEach(function(Dr){Object.defineProperty(s,Dr,{enumerable:!1,value:function(){throw new Error(Dr+" is not supported in userland")}})})}(types)),types}var isBufferBrowser,hasRequiredIsBufferBrowser;function requireIsBufferBrowser(){return hasRequiredIsBufferBrowser||(hasRequiredIsBufferBrowser=1,isBufferBrowser=function(e){return e&&typeof e=="object"&&typeof e.copy=="function"&&typeof e.fill=="function"&&typeof e.readUInt8=="function"}),isBufferBrowser}var hasRequiredUtil$1;function requireUtil$1(){return hasRequiredUtil$1||(hasRequiredUtil$1=1,function(s){var e={},o=Object.getOwnPropertyDescriptors||function(cr){for(var Rr=Object.keys(cr),Ar={},pr=0;pr<Rr.length;pr++)Ar[Rr[pr]]=Object.getOwnPropertyDescriptor(cr,Rr[pr]);return Ar},a=/%[sdj%]/g;s.format=function(or){if(!_r(or)){for(var cr=[],Rr=0;Rr<arguments.length;Rr++)cr.push(_e(arguments[Rr]));return cr.join(" ")}for(var Rr=1,Ar=arguments,pr=Ar.length,wr=String(or).replace(a,function(Ir){if(Ir==="%%")return"%";if(Rr>=pr)return Ir;switch(Ir){case"%s":return String(Ar[Rr++]);case"%d":return Number(Ar[Rr++]);case"%j":try{return JSON.stringify(Ar[Rr++])}catch{return"[Circular]"}default:return Ir}}),Tr=Ar[Rr];Rr<pr;Tr=Ar[++Rr])sr(Tr)||!gr(Tr)?wr+=" "+Tr:wr+=" "+_e(Tr);return wr},s.deprecate=function(or,cr){if(typeof process$1<"u"&&process$1.noDeprecation===!0)return or;if(typeof process$1>"u")return function(){return s.deprecate(or,cr).apply(this,arguments)};var Rr=!1;function Ar(){if(!Rr){if(process$1.throwDeprecation)throw new Error(cr);process$1.traceDeprecation?console.trace(cr):console.error(cr),Rr=!0}return or.apply(this,arguments)}return Ar};var d={},c=/^$/;if(e.NODE_DEBUG){var j=e.NODE_DEBUG;j=j.replace(/[|\\{}()[\]^$+?.]/g,"\\$&").replace(/\*/g,".*").replace(/,/g,"$|^").toUpperCase(),c=new RegExp("^"+j+"$","i")}s.debuglog=function(or){if(or=or.toUpperCase(),!d[or])if(c.test(or)){var cr=process$1.pid;d[or]=function(){var Rr=s.format.apply(s,arguments);console.error("%s %d: %s",or,cr,Rr)}}else d[or]=function(){};return d[or]};function _e(or,cr){var Rr={seen:[],stylize:yt};return arguments.length>=3&&(Rr.depth=arguments[2]),arguments.length>=4&&(Rr.colors=arguments[3]),tr(cr)?Rr.showHidden=cr:cr&&s._extend(Rr,cr),ur(Rr.showHidden)&&(Rr.showHidden=!1),ur(Rr.depth)&&(Rr.depth=2),ur(Rr.colors)&&(Rr.colors=!1),ur(Rr.customInspect)&&(Rr.customInspect=!0),Rr.colors&&(Rr.stylize=pt),Ct(Rr,or,Rr.depth)}s.inspect=_e,_e.colors={bold:[1,22],italic:[3,23],underline:[4,24],inverse:[7,27],white:[37,39],grey:[90,39],black:[30,39],blue:[34,39],cyan:[36,39],green:[32,39],magenta:[35,39],red:[31,39],yellow:[33,39]},_e.styles={special:"cyan",number:"yellow",boolean:"yellow",undefined:"grey",null:"bold",string:"green",date:"magenta",regexp:"red"};function pt(or,cr){var Rr=_e.styles[cr];return Rr?"\x1B["+_e.colors[Rr][0]+"m"+or+"\x1B["+_e.colors[Rr][1]+"m":or}function yt(or,cr){return or}function ct(or){var cr={};return or.forEach(function(Rr,Ar){cr[Rr]=!0}),cr}function Ct(or,cr,Rr){if(or.customInspect&&cr&&_(cr.inspect)&&cr.inspect!==s.inspect&&!(cr.constructor&&cr.constructor.prototype===cr)){var Ar=cr.inspect(Rr,or);return _r(Ar)||(Ar=Ct(or,Ar,Rr)),Ar}var pr=qt(or,cr);if(pr)return pr;var wr=Object.keys(cr),Tr=ct(wr);if(or.showHidden&&(wr=Object.getOwnPropertyNames(cr)),h(cr)&&(wr.indexOf("message")>=0||wr.indexOf("description")>=0))return Ot(cr);if(wr.length===0){if(_(cr)){var Ir=cr.name?": "+cr.name:"";return or.stylize("[Function"+Ir+"]","special")}if(lr(cr))return or.stylize(RegExp.prototype.toString.call(cr),"regexp");if(Mt(cr))return or.stylize(Date.prototype.toString.call(cr),"date");if(h(cr))return Ot(cr)}var Sr="",br=!1,kr=["{","}"];if(er(cr)&&(br=!0,kr=["[","]"]),_(cr)){var Qr=cr.name?": "+cr.name:"";Sr=" [Function"+Qr+"]"}if(lr(cr)&&(Sr=" "+RegExp.prototype.toString.call(cr)),Mt(cr)&&(Sr=" "+Date.prototype.toUTCString.call(cr)),h(cr)&&(Sr=" "+Ot(cr)),wr.length===0&&(!br||cr.length==0))return kr[0]+Sr+kr[1];if(Rr<0)return lr(cr)?or.stylize(RegExp.prototype.toString.call(cr),"regexp"):or.stylize("[Object]","special");or.seen.push(cr);var qr;return br?qr=Lt(or,cr,Rr,Tr,wr):qr=wr.map(function($r){return Qt(or,cr,Rr,Tr,$r,br)}),or.seen.pop(),ir(qr,Sr,kr)}function qt(or,cr){if(ur(cr))return or.stylize("undefined","undefined");if(_r(cr)){var Rr="'"+JSON.stringify(cr).replace(/^"|"$/g,"").replace(/'/g,"\\'").replace(/\\"/g,'"')+"'";return or.stylize(Rr,"string")}if(hr(cr))return or.stylize(""+cr,"number");if(tr(cr))return or.stylize(""+cr,"boolean");if(sr(cr))return or.stylize("null","null")}function Ot(or){return"["+Error.prototype.toString.call(or)+"]"}function Lt(or,cr,Rr,Ar,pr){for(var wr=[],Tr=0,Ir=cr.length;Tr<Ir;++Tr)xt(cr,String(Tr))?wr.push(Qt(or,cr,Rr,Ar,String(Tr),!0)):wr.push("");return pr.forEach(function(Sr){Sr.match(/^\d+$/)||wr.push(Qt(or,cr,Rr,Ar,Sr,!0))}),wr}function Qt(or,cr,Rr,Ar,pr,wr){var Tr,Ir,Sr;if(Sr=Object.getOwnPropertyDescriptor(cr,pr)||{value:cr[pr]},Sr.get?Sr.set?Ir=or.stylize("[Getter/Setter]","special"):Ir=or.stylize("[Getter]","special"):Sr.set&&(Ir=or.stylize("[Setter]","special")),xt(Ar,pr)||(Tr="["+pr+"]"),Ir||(or.seen.indexOf(Sr.value)<0?(sr(Rr)?Ir=Ct(or,Sr.value,null):Ir=Ct(or,Sr.value,Rr-1),Ir.indexOf(`
`)>-1&&(wr?Ir=Ir.split(`
`).map(function(br){return"  "+br}).join(`
`).slice(2):Ir=`
`+Ir.split(`
`).map(function(br){return"   "+br}).join(`
`))):Ir=or.stylize("[Circular]","special")),ur(Tr)){if(wr&&pr.match(/^\d+$/))return Ir;Tr=JSON.stringify(""+pr),Tr.match(/^"([a-zA-Z_][a-zA-Z_0-9]*)"$/)?(Tr=Tr.slice(1,-1),Tr=or.stylize(Tr,"name")):(Tr=Tr.replace(/'/g,"\\'").replace(/\\"/g,'"').replace(/(^"|"$)/g,"'"),Tr=or.stylize(Tr,"string"))}return Tr+": "+Ir}function ir(or,cr,Rr){var Ar=or.reduce(function(pr,wr){return wr.indexOf(`
`)>=0,pr+wr.replace(/\u001b\[\d\d?m/g,"").length+1},0);return Ar>60?Rr[0]+(cr===""?"":cr+`
 `)+" "+or.join(`,
  `)+" "+Rr[1]:Rr[0]+cr+" "+or.join(", ")+" "+Rr[1]}s.types=requireTypes();function er(or){return Array.isArray(or)}s.isArray=er;function tr(or){return typeof or=="boolean"}s.isBoolean=tr;function sr(or){return or===null}s.isNull=sr;function ar(or){return or==null}s.isNullOrUndefined=ar;function hr(or){return typeof or=="number"}s.isNumber=hr;function _r(or){return typeof or=="string"}s.isString=_r;function dr(or){return typeof or=="symbol"}s.isSymbol=dr;function ur(or){return or===void 0}s.isUndefined=ur;function lr(or){return gr(or)&&lt(or)==="[object RegExp]"}s.isRegExp=lr,s.types.isRegExp=lr;function gr(or){return typeof or=="object"&&or!==null}s.isObject=gr;function Mt(or){return gr(or)&&lt(or)==="[object Date]"}s.isDate=Mt,s.types.isDate=Mt;function h(or){return gr(or)&&(lt(or)==="[object Error]"||or instanceof Error)}s.isError=h,s.types.isNativeError=h;function _(or){return typeof or=="function"}s.isFunction=_;function b(or){return or===null||typeof or=="boolean"||typeof or=="number"||typeof or=="string"||typeof or=="symbol"||typeof or>"u"}s.isPrimitive=b,s.isBuffer=requireIsBufferBrowser();function lt(or){return Object.prototype.toString.call(or)}function Rt(or){return or<10?"0"+or.toString(10):or.toString(10)}var kt=["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"];function Ft(){var or=new Date,cr=[Rt(or.getHours()),Rt(or.getMinutes()),Rt(or.getSeconds())].join(":");return[or.getDate(),kt[or.getMonth()],cr].join(" ")}s.log=function(){console.log("%s - %s",Ft(),s.format.apply(s,arguments))},s.inherits=requireInherits_browser(),s._extend=function(or,cr){if(!cr||!gr(cr))return or;for(var Rr=Object.keys(cr),Ar=Rr.length;Ar--;)or[Rr[Ar]]=cr[Rr[Ar]];return or};function xt(or,cr){return Object.prototype.hasOwnProperty.call(or,cr)}var g=typeof Symbol<"u"?Symbol("util.promisify.custom"):void 0;s.promisify=function(cr){if(typeof cr!="function")throw new TypeError('The "original" argument must be of type Function');if(g&&cr[g]){var Rr=cr[g];if(typeof Rr!="function")throw new TypeError('The "util.promisify.custom" argument must be of type Function');return Object.defineProperty(Rr,g,{value:Rr,enumerable:!1,writable:!1,configurable:!0}),Rr}function Rr(){for(var Ar,pr,wr=new Promise(function(Sr,br){Ar=Sr,pr=br}),Tr=[],Ir=0;Ir<arguments.length;Ir++)Tr.push(arguments[Ir]);Tr.push(function(Sr,br){Sr?pr(Sr):Ar(br)});try{cr.apply(this,Tr)}catch(Sr){pr(Sr)}return wr}return Object.setPrototypeOf(Rr,Object.getPrototypeOf(cr)),g&&Object.defineProperty(Rr,g,{value:Rr,enumerable:!1,writable:!1,configurable:!0}),Object.defineProperties(Rr,o(cr))},s.promisify.custom=g;function wt(or,cr){if(!or){var Rr=new Error("Promise was rejected with a falsy value");Rr.reason=or,or=Rr}return cr(or)}function nr(or){if(typeof or!="function")throw new TypeError('The "original" argument must be of type Function');function cr(){for(var Rr=[],Ar=0;Ar<arguments.length;Ar++)Rr.push(arguments[Ar]);var pr=Rr.pop();if(typeof pr!="function")throw new TypeError("The last argument must be of type Function");var wr=this,Tr=function(){return pr.apply(wr,arguments)};or.apply(this,Rr).then(function(Ir){process$1.nextTick(Tr.bind(null,null,Ir))},function(Ir){process$1.nextTick(wt.bind(null,Ir,Tr))})}return Object.setPrototypeOf(cr,Object.getPrototypeOf(or)),Object.defineProperties(cr,o(or)),cr}s.callbackify=nr}(util$1)),util$1}var buffer_list,hasRequiredBuffer_list;function requireBuffer_list(){if(hasRequiredBuffer_list)return buffer_list;hasRequiredBuffer_list=1;function s(Lt,Qt){var ir=Object.keys(Lt);if(Object.getOwnPropertySymbols){var er=Object.getOwnPropertySymbols(Lt);Qt&&(er=er.filter(function(tr){return Object.getOwnPropertyDescriptor(Lt,tr).enumerable})),ir.push.apply(ir,er)}return ir}function e(Lt){for(var Qt=1;Qt<arguments.length;Qt++){var ir=arguments[Qt]!=null?arguments[Qt]:{};Qt%2?s(Object(ir),!0).forEach(function(er){o(Lt,er,ir[er])}):Object.getOwnPropertyDescriptors?Object.defineProperties(Lt,Object.getOwnPropertyDescriptors(ir)):s(Object(ir)).forEach(function(er){Object.defineProperty(Lt,er,Object.getOwnPropertyDescriptor(ir,er))})}return Lt}function o(Lt,Qt,ir){return Qt=j(Qt),Qt in Lt?Object.defineProperty(Lt,Qt,{value:ir,enumerable:!0,configurable:!0,writable:!0}):Lt[Qt]=ir,Lt}function a(Lt,Qt){if(!(Lt instanceof Qt))throw new TypeError("Cannot call a class as a function")}function d(Lt,Qt){for(var ir=0;ir<Qt.length;ir++){var er=Qt[ir];er.enumerable=er.enumerable||!1,er.configurable=!0,"value"in er&&(er.writable=!0),Object.defineProperty(Lt,j(er.key),er)}}function c(Lt,Qt,ir){return Qt&&d(Lt.prototype,Qt),Object.defineProperty(Lt,"prototype",{writable:!1}),Lt}function j(Lt){var Qt=_e(Lt,"string");return typeof Qt=="symbol"?Qt:String(Qt)}function _e(Lt,Qt){if(typeof Lt!="object"||Lt===null)return Lt;var ir=Lt[Symbol.toPrimitive];if(ir!==void 0){var er=ir.call(Lt,Qt);if(typeof er!="object")return er;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(Lt)}var pt=require$$0$1,yt=pt.Buffer,ct=requireUtil$1(),Ct=ct.inspect,qt=Ct&&Ct.custom||"inspect";function Ot(Lt,Qt,ir){yt.prototype.copy.call(Lt,Qt,ir)}return buffer_list=function(){function Lt(){a(this,Lt),this.head=null,this.tail=null,this.length=0}return c(Lt,[{key:"push",value:function(ir){var er={data:ir,next:null};this.length>0?this.tail.next=er:this.head=er,this.tail=er,++this.length}},{key:"unshift",value:function(ir){var er={data:ir,next:this.head};this.length===0&&(this.tail=er),this.head=er,++this.length}},{key:"shift",value:function(){if(this.length!==0){var ir=this.head.data;return this.length===1?this.head=this.tail=null:this.head=this.head.next,--this.length,ir}}},{key:"clear",value:function(){this.head=this.tail=null,this.length=0}},{key:"join",value:function(ir){if(this.length===0)return"";for(var er=this.head,tr=""+er.data;er=er.next;)tr+=ir+er.data;return tr}},{key:"concat",value:function(ir){if(this.length===0)return yt.alloc(0);for(var er=yt.allocUnsafe(ir>>>0),tr=this.head,sr=0;tr;)Ot(tr.data,er,sr),sr+=tr.data.length,tr=tr.next;return er}},{key:"consume",value:function(ir,er){var tr;return ir<this.head.data.length?(tr=this.head.data.slice(0,ir),this.head.data=this.head.data.slice(ir)):ir===this.head.data.length?tr=this.shift():tr=er?this._getString(ir):this._getBuffer(ir),tr}},{key:"first",value:function(){return this.head.data}},{key:"_getString",value:function(ir){var er=this.head,tr=1,sr=er.data;for(ir-=sr.length;er=er.next;){var ar=er.data,hr=ir>ar.length?ar.length:ir;if(hr===ar.length?sr+=ar:sr+=ar.slice(0,ir),ir-=hr,ir===0){hr===ar.length?(++tr,er.next?this.head=er.next:this.head=this.tail=null):(this.head=er,er.data=ar.slice(hr));break}++tr}return this.length-=tr,sr}},{key:"_getBuffer",value:function(ir){var er=yt.allocUnsafe(ir),tr=this.head,sr=1;for(tr.data.copy(er),ir-=tr.data.length;tr=tr.next;){var ar=tr.data,hr=ir>ar.length?ar.length:ir;if(ar.copy(er,er.length-ir,0,hr),ir-=hr,ir===0){hr===ar.length?(++sr,tr.next?this.head=tr.next:this.head=this.tail=null):(this.head=tr,tr.data=ar.slice(hr));break}++sr}return this.length-=sr,er}},{key:qt,value:function(ir,er){return Ct(this,e(e({},er),{},{depth:0,customInspect:!1}))}}]),Lt}(),buffer_list}var destroy_1$1,hasRequiredDestroy$1;function requireDestroy$1(){if(hasRequiredDestroy$1)return destroy_1$1;hasRequiredDestroy$1=1;function s(j,_e){var pt=this,yt=this._readableState&&this._readableState.destroyed,ct=this._writableState&&this._writableState.destroyed;return yt||ct?(_e?_e(j):j&&(this._writableState?this._writableState.errorEmitted||(this._writableState.errorEmitted=!0,process$1.nextTick(d,this,j)):process$1.nextTick(d,this,j)),this):(this._readableState&&(this._readableState.destroyed=!0),this._writableState&&(this._writableState.destroyed=!0),this._destroy(j||null,function(Ct){!_e&&Ct?pt._writableState?pt._writableState.errorEmitted?process$1.nextTick(o,pt):(pt._writableState.errorEmitted=!0,process$1.nextTick(e,pt,Ct)):process$1.nextTick(e,pt,Ct):_e?(process$1.nextTick(o,pt),_e(Ct)):process$1.nextTick(o,pt)}),this)}function e(j,_e){d(j,_e),o(j)}function o(j){j._writableState&&!j._writableState.emitClose||j._readableState&&!j._readableState.emitClose||j.emit("close")}function a(){this._readableState&&(this._readableState.destroyed=!1,this._readableState.reading=!1,this._readableState.ended=!1,this._readableState.endEmitted=!1),this._writableState&&(this._writableState.destroyed=!1,this._writableState.ended=!1,this._writableState.ending=!1,this._writableState.finalCalled=!1,this._writableState.prefinished=!1,this._writableState.finished=!1,this._writableState.errorEmitted=!1)}function d(j,_e){j.emit("error",_e)}function c(j,_e){var pt=j._readableState,yt=j._writableState;pt&&pt.autoDestroy||yt&&yt.autoDestroy?j.destroy(_e):j.emit("error",_e)}return destroy_1$1={destroy:s,undestroy:a,errorOrDestroy:c},destroy_1$1}var errorsBrowser={},hasRequiredErrorsBrowser;function requireErrorsBrowser(){if(hasRequiredErrorsBrowser)return errorsBrowser;hasRequiredErrorsBrowser=1;function s(_e,pt){_e.prototype=Object.create(pt.prototype),_e.prototype.constructor=_e,_e.__proto__=pt}var e={};function o(_e,pt,yt){yt||(yt=Error);function ct(qt,Ot,Lt){return typeof pt=="string"?pt:pt(qt,Ot,Lt)}var Ct=function(qt){s(Ot,qt);function Ot(Lt,Qt,ir){return qt.call(this,ct(Lt,Qt,ir))||this}return Ot}(yt);Ct.prototype.name=yt.name,Ct.prototype.code=_e,e[_e]=Ct}function a(_e,pt){if(Array.isArray(_e)){var yt=_e.length;return _e=_e.map(function(ct){return String(ct)}),yt>2?"one of ".concat(pt," ").concat(_e.slice(0,yt-1).join(", "),", or ")+_e[yt-1]:yt===2?"one of ".concat(pt," ").concat(_e[0]," or ").concat(_e[1]):"of ".concat(pt," ").concat(_e[0])}else return"of ".concat(pt," ").concat(String(_e))}function d(_e,pt,yt){return _e.substr(0,pt.length)===pt}function c(_e,pt,yt){return(yt===void 0||yt>_e.length)&&(yt=_e.length),_e.substring(yt-pt.length,yt)===pt}function j(_e,pt,yt){return typeof yt!="number"&&(yt=0),yt+pt.length>_e.length?!1:_e.indexOf(pt,yt)!==-1}return o("ERR_INVALID_OPT_VALUE",function(_e,pt){return'The value "'+pt+'" is invalid for option "'+_e+'"'},TypeError),o("ERR_INVALID_ARG_TYPE",function(_e,pt,yt){var ct;typeof pt=="string"&&d(pt,"not ")?(ct="must not be",pt=pt.replace(/^not /,"")):ct="must be";var Ct;if(c(_e," argument"))Ct="The ".concat(_e," ").concat(ct," ").concat(a(pt,"type"));else{var qt=j(_e,".")?"property":"argument";Ct='The "'.concat(_e,'" ').concat(qt," ").concat(ct," ").concat(a(pt,"type"))}return Ct+=". Received type ".concat(typeof yt),Ct},TypeError),o("ERR_STREAM_PUSH_AFTER_EOF","stream.push() after EOF"),o("ERR_METHOD_NOT_IMPLEMENTED",function(_e){return"The "+_e+" method is not implemented"}),o("ERR_STREAM_PREMATURE_CLOSE","Premature close"),o("ERR_STREAM_DESTROYED",function(_e){return"Cannot call "+_e+" after a stream was destroyed"}),o("ERR_MULTIPLE_CALLBACK","Callback called multiple times"),o("ERR_STREAM_CANNOT_PIPE","Cannot pipe, not readable"),o("ERR_STREAM_WRITE_AFTER_END","write after end"),o("ERR_STREAM_NULL_VALUES","May not write null values to stream",TypeError),o("ERR_UNKNOWN_ENCODING",function(_e){return"Unknown encoding: "+_e},TypeError),o("ERR_STREAM_UNSHIFT_AFTER_END_EVENT","stream.unshift() after end event"),errorsBrowser.codes=e,errorsBrowser}var state,hasRequiredState;function requireState(){if(hasRequiredState)return state;hasRequiredState=1;var s=requireErrorsBrowser().codes.ERR_INVALID_OPT_VALUE;function e(a,d,c){return a.highWaterMark!=null?a.highWaterMark:d?a[c]:null}function o(a,d,c,j){var _e=e(d,j,c);if(_e!=null){if(!(isFinite(_e)&&Math.floor(_e)===_e)||_e<0){var pt=j?c:"highWaterMark";throw new s(pt,_e)}return Math.floor(_e)}return a.objectMode?16:16*1024}return state={getHighWaterMark:o},state}var browser$b,hasRequiredBrowser$a;function requireBrowser$a(){if(hasRequiredBrowser$a)return browser$b;hasRequiredBrowser$a=1,browser$b=s;function s(o,a){if(e("noDeprecation"))return o;var d=!1;function c(){if(!d){if(e("throwDeprecation"))throw new Error(a);e("traceDeprecation")?console.trace(a):console.warn(a),d=!0}return o.apply(this,arguments)}return c}function e(o){try{if(!commonjsGlobal$2.localStorage)return!1}catch{return!1}var a=commonjsGlobal$2.localStorage[o];return a==null?!1:String(a).toLowerCase()==="true"}return browser$b}var _stream_writable$1,hasRequired_stream_writable$1;function require_stream_writable$1(){if(hasRequired_stream_writable$1)return _stream_writable$1;hasRequired_stream_writable$1=1,_stream_writable$1=ur;function s(Ar){var pr=this;this.next=null,this.entry=null,this.finish=function(){Rr(pr,Ar)}}var e;ur.WritableState=_r;var o={deprecate:requireBrowser$a()},a=requireStreamBrowser$1(),d=require$$0$1.Buffer,c=(typeof commonjsGlobal$2<"u"?commonjsGlobal$2:typeof window<"u"?window:typeof self<"u"?self:{}).Uint8Array||function(){};function j(Ar){return d.from(Ar)}function _e(Ar){return d.isBuffer(Ar)||Ar instanceof c}var pt=requireDestroy$1(),yt=requireState(),ct=yt.getHighWaterMark,Ct=requireErrorsBrowser().codes,qt=Ct.ERR_INVALID_ARG_TYPE,Ot=Ct.ERR_METHOD_NOT_IMPLEMENTED,Lt=Ct.ERR_MULTIPLE_CALLBACK,Qt=Ct.ERR_STREAM_CANNOT_PIPE,ir=Ct.ERR_STREAM_DESTROYED,er=Ct.ERR_STREAM_NULL_VALUES,tr=Ct.ERR_STREAM_WRITE_AFTER_END,sr=Ct.ERR_UNKNOWN_ENCODING,ar=pt.errorOrDestroy;requireInherits_browser()(ur,a);function hr(){}function _r(Ar,pr,wr){e=e||require_stream_duplex$1(),Ar=Ar||{},typeof wr!="boolean"&&(wr=pr instanceof e),this.objectMode=!!Ar.objectMode,wr&&(this.objectMode=this.objectMode||!!Ar.writableObjectMode),this.highWaterMark=ct(this,Ar,"writableHighWaterMark",wr),this.finalCalled=!1,this.needDrain=!1,this.ending=!1,this.ended=!1,this.finished=!1,this.destroyed=!1;var Tr=Ar.decodeStrings===!1;this.decodeStrings=!Tr,this.defaultEncoding=Ar.defaultEncoding||"utf8",this.length=0,this.writing=!1,this.corked=0,this.sync=!0,this.bufferProcessing=!1,this.onwrite=function(Ir){Rt(pr,Ir)},this.writecb=null,this.writelen=0,this.bufferedRequest=null,this.lastBufferedRequest=null,this.pendingcb=0,this.prefinished=!1,this.errorEmitted=!1,this.emitClose=Ar.emitClose!==!1,this.autoDestroy=!!Ar.autoDestroy,this.bufferedRequestCount=0,this.corkedRequestsFree=new s(this)}_r.prototype.getBuffer=function(){for(var pr=this.bufferedRequest,wr=[];pr;)wr.push(pr),pr=pr.next;return wr},function(){try{Object.defineProperty(_r.prototype,"buffer",{get:o.deprecate(function(){return this.getBuffer()},"_writableState.buffer is deprecated. Use _writableState.getBuffer instead.","DEP0003")})}catch{}}();var dr;typeof Symbol=="function"&&Symbol.hasInstance&&typeof Function.prototype[Symbol.hasInstance]=="function"?(dr=Function.prototype[Symbol.hasInstance],Object.defineProperty(ur,Symbol.hasInstance,{value:function(pr){return dr.call(this,pr)?!0:this!==ur?!1:pr&&pr._writableState instanceof _r}})):dr=function(pr){return pr instanceof this};function ur(Ar){e=e||require_stream_duplex$1();var pr=this instanceof e;if(!pr&&!dr.call(ur,this))return new ur(Ar);this._writableState=new _r(Ar,this,pr),this.writable=!0,Ar&&(typeof Ar.write=="function"&&(this._write=Ar.write),typeof Ar.writev=="function"&&(this._writev=Ar.writev),typeof Ar.destroy=="function"&&(this._destroy=Ar.destroy),typeof Ar.final=="function"&&(this._final=Ar.final)),a.call(this)}ur.prototype.pipe=function(){ar(this,new Qt)};function lr(Ar,pr){var wr=new tr;ar(Ar,wr),process$1.nextTick(pr,wr)}function gr(Ar,pr,wr,Tr){var Ir;return wr===null?Ir=new er:typeof wr!="string"&&!pr.objectMode&&(Ir=new qt("chunk",["string","Buffer"],wr)),Ir?(ar(Ar,Ir),process$1.nextTick(Tr,Ir),!1):!0}ur.prototype.write=function(Ar,pr,wr){var Tr=this._writableState,Ir=!1,Sr=!Tr.objectMode&&_e(Ar);return Sr&&!d.isBuffer(Ar)&&(Ar=j(Ar)),typeof pr=="function"&&(wr=pr,pr=null),Sr?pr="buffer":pr||(pr=Tr.defaultEncoding),typeof wr!="function"&&(wr=hr),Tr.ending?lr(this,wr):(Sr||gr(this,Tr,Ar,wr))&&(Tr.pendingcb++,Ir=h(this,Tr,Sr,Ar,pr,wr)),Ir},ur.prototype.cork=function(){this._writableState.corked++},ur.prototype.uncork=function(){var Ar=this._writableState;Ar.corked&&(Ar.corked--,!Ar.writing&&!Ar.corked&&!Ar.bufferProcessing&&Ar.bufferedRequest&&xt(this,Ar))},ur.prototype.setDefaultEncoding=function(pr){if(typeof pr=="string"&&(pr=pr.toLowerCase()),!(["hex","utf8","utf-8","ascii","binary","base64","ucs2","ucs-2","utf16le","utf-16le","raw"].indexOf((pr+"").toLowerCase())>-1))throw new sr(pr);return this._writableState.defaultEncoding=pr,this},Object.defineProperty(ur.prototype,"writableBuffer",{enumerable:!1,get:function(){return this._writableState&&this._writableState.getBuffer()}});function Mt(Ar,pr,wr){return!Ar.objectMode&&Ar.decodeStrings!==!1&&typeof pr=="string"&&(pr=d.from(pr,wr)),pr}Object.defineProperty(ur.prototype,"writableHighWaterMark",{enumerable:!1,get:function(){return this._writableState.highWaterMark}});function h(Ar,pr,wr,Tr,Ir,Sr){if(!wr){var br=Mt(pr,Tr,Ir);Tr!==br&&(wr=!0,Ir="buffer",Tr=br)}var kr=pr.objectMode?1:Tr.length;pr.length+=kr;var Qr=pr.length<pr.highWaterMark;if(Qr||(pr.needDrain=!0),pr.writing||pr.corked){var qr=pr.lastBufferedRequest;pr.lastBufferedRequest={chunk:Tr,encoding:Ir,isBuf:wr,callback:Sr,next:null},qr?qr.next=pr.lastBufferedRequest:pr.bufferedRequest=pr.lastBufferedRequest,pr.bufferedRequestCount+=1}else _(Ar,pr,!1,kr,Tr,Ir,Sr);return Qr}function _(Ar,pr,wr,Tr,Ir,Sr,br){pr.writelen=Tr,pr.writecb=br,pr.writing=!0,pr.sync=!0,pr.destroyed?pr.onwrite(new ir("write")):wr?Ar._writev(Ir,pr.onwrite):Ar._write(Ir,Sr,pr.onwrite),pr.sync=!1}function b(Ar,pr,wr,Tr,Ir){--pr.pendingcb,wr?(process$1.nextTick(Ir,Tr),process$1.nextTick(or,Ar,pr),Ar._writableState.errorEmitted=!0,ar(Ar,Tr)):(Ir(Tr),Ar._writableState.errorEmitted=!0,ar(Ar,Tr),or(Ar,pr))}function lt(Ar){Ar.writing=!1,Ar.writecb=null,Ar.length-=Ar.writelen,Ar.writelen=0}function Rt(Ar,pr){var wr=Ar._writableState,Tr=wr.sync,Ir=wr.writecb;if(typeof Ir!="function")throw new Lt;if(lt(wr),pr)b(Ar,wr,Tr,pr,Ir);else{var Sr=g(wr)||Ar.destroyed;!Sr&&!wr.corked&&!wr.bufferProcessing&&wr.bufferedRequest&&xt(Ar,wr),Tr?process$1.nextTick(kt,Ar,wr,Sr,Ir):kt(Ar,wr,Sr,Ir)}}function kt(Ar,pr,wr,Tr){wr||Ft(Ar,pr),pr.pendingcb--,Tr(),or(Ar,pr)}function Ft(Ar,pr){pr.length===0&&pr.needDrain&&(pr.needDrain=!1,Ar.emit("drain"))}function xt(Ar,pr){pr.bufferProcessing=!0;var wr=pr.bufferedRequest;if(Ar._writev&&wr&&wr.next){var Tr=pr.bufferedRequestCount,Ir=new Array(Tr),Sr=pr.corkedRequestsFree;Sr.entry=wr;for(var br=0,kr=!0;wr;)Ir[br]=wr,wr.isBuf||(kr=!1),wr=wr.next,br+=1;Ir.allBuffers=kr,_(Ar,pr,!0,pr.length,Ir,"",Sr.finish),pr.pendingcb++,pr.lastBufferedRequest=null,Sr.next?(pr.corkedRequestsFree=Sr.next,Sr.next=null):pr.corkedRequestsFree=new s(pr),pr.bufferedRequestCount=0}else{for(;wr;){var Qr=wr.chunk,qr=wr.encoding,$r=wr.callback,gn=pr.objectMode?1:Qr.length;if(_(Ar,pr,!1,gn,Qr,qr,$r),wr=wr.next,pr.bufferedRequestCount--,pr.writing)break}wr===null&&(pr.lastBufferedRequest=null)}pr.bufferedRequest=wr,pr.bufferProcessing=!1}ur.prototype._write=function(Ar,pr,wr){wr(new Ot("_write()"))},ur.prototype._writev=null,ur.prototype.end=function(Ar,pr,wr){var Tr=this._writableState;return typeof Ar=="function"?(wr=Ar,Ar=null,pr=null):typeof pr=="function"&&(wr=pr,pr=null),Ar!=null&&this.write(Ar,pr),Tr.corked&&(Tr.corked=1,this.uncork()),Tr.ending||cr(this,Tr,wr),this},Object.defineProperty(ur.prototype,"writableLength",{enumerable:!1,get:function(){return this._writableState.length}});function g(Ar){return Ar.ending&&Ar.length===0&&Ar.bufferedRequest===null&&!Ar.finished&&!Ar.writing}function wt(Ar,pr){Ar._final(function(wr){pr.pendingcb--,wr&&ar(Ar,wr),pr.prefinished=!0,Ar.emit("prefinish"),or(Ar,pr)})}function nr(Ar,pr){!pr.prefinished&&!pr.finalCalled&&(typeof Ar._final=="function"&&!pr.destroyed?(pr.pendingcb++,pr.finalCalled=!0,process$1.nextTick(wt,Ar,pr)):(pr.prefinished=!0,Ar.emit("prefinish")))}function or(Ar,pr){var wr=g(pr);if(wr&&(nr(Ar,pr),pr.pendingcb===0&&(pr.finished=!0,Ar.emit("finish"),pr.autoDestroy))){var Tr=Ar._readableState;(!Tr||Tr.autoDestroy&&Tr.endEmitted)&&Ar.destroy()}return wr}function cr(Ar,pr,wr){pr.ending=!0,or(Ar,pr),wr&&(pr.finished?process$1.nextTick(wr):Ar.once("finish",wr)),pr.ended=!0,Ar.writable=!1}function Rr(Ar,pr,wr){var Tr=Ar.entry;for(Ar.entry=null;Tr;){var Ir=Tr.callback;pr.pendingcb--,Ir(wr),Tr=Tr.next}pr.corkedRequestsFree.next=Ar}return Object.defineProperty(ur.prototype,"destroyed",{enumerable:!1,get:function(){return this._writableState===void 0?!1:this._writableState.destroyed},set:function(pr){this._writableState&&(this._writableState.destroyed=pr)}}),ur.prototype.destroy=pt.destroy,ur.prototype._undestroy=pt.undestroy,ur.prototype._destroy=function(Ar,pr){pr(Ar)},_stream_writable$1}var _stream_duplex$1,hasRequired_stream_duplex$1;function require_stream_duplex$1(){if(hasRequired_stream_duplex$1)return _stream_duplex$1;hasRequired_stream_duplex$1=1;var s=Object.keys||function(yt){var ct=[];for(var Ct in yt)ct.push(Ct);return ct};_stream_duplex$1=j;var e=require_stream_readable$1(),o=require_stream_writable$1();requireInherits_browser()(j,e);for(var a=s(o.prototype),d=0;d<a.length;d++){var c=a[d];j.prototype[c]||(j.prototype[c]=o.prototype[c])}function j(yt){if(!(this instanceof j))return new j(yt);e.call(this,yt),o.call(this,yt),this.allowHalfOpen=!0,yt&&(yt.readable===!1&&(this.readable=!1),yt.writable===!1&&(this.writable=!1),yt.allowHalfOpen===!1&&(this.allowHalfOpen=!1,this.once("end",_e)))}Object.defineProperty(j.prototype,"writableHighWaterMark",{enumerable:!1,get:function(){return this._writableState.highWaterMark}}),Object.defineProperty(j.prototype,"writableBuffer",{enumerable:!1,get:function(){return this._writableState&&this._writableState.getBuffer()}}),Object.defineProperty(j.prototype,"writableLength",{enumerable:!1,get:function(){return this._writableState.length}});function _e(){this._writableState.ended||process$1.nextTick(pt,this)}function pt(yt){yt.end()}return Object.defineProperty(j.prototype,"destroyed",{enumerable:!1,get:function(){return this._readableState===void 0||this._writableState===void 0?!1:this._readableState.destroyed&&this._writableState.destroyed},set:function(ct){this._readableState===void 0||this._writableState===void 0||(this._readableState.destroyed=ct,this._writableState.destroyed=ct)}}),_stream_duplex$1}var string_decoder={},hasRequiredString_decoder;function requireString_decoder(){if(hasRequiredString_decoder)return string_decoder;hasRequiredString_decoder=1;var s=requireSafeBuffer$1().Buffer,e=s.isEncoding||function(er){switch(er=""+er,er&&er.toLowerCase()){case"hex":case"utf8":case"utf-8":case"ascii":case"binary":case"base64":case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":case"raw":return!0;default:return!1}};function o(er){if(!er)return"utf8";for(var tr;;)switch(er){case"utf8":case"utf-8":return"utf8";case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return"utf16le";case"latin1":case"binary":return"latin1";case"base64":case"ascii":case"hex":return er;default:if(tr)return;er=(""+er).toLowerCase(),tr=!0}}function a(er){var tr=o(er);if(typeof tr!="string"&&(s.isEncoding===e||!e(er)))throw new Error("Unknown encoding: "+er);return tr||er}string_decoder.StringDecoder=d;function d(er){this.encoding=a(er);var tr;switch(this.encoding){case"utf16le":this.text=Ct,this.end=qt,tr=4;break;case"utf8":this.fillLast=pt,tr=4;break;case"base64":this.text=Ot,this.end=Lt,tr=3;break;default:this.write=Qt,this.end=ir;return}this.lastNeed=0,this.lastTotal=0,this.lastChar=s.allocUnsafe(tr)}d.prototype.write=function(er){if(er.length===0)return"";var tr,sr;if(this.lastNeed){if(tr=this.fillLast(er),tr===void 0)return"";sr=this.lastNeed,this.lastNeed=0}else sr=0;return sr<er.length?tr?tr+this.text(er,sr):this.text(er,sr):tr||""},d.prototype.end=ct,d.prototype.text=yt,d.prototype.fillLast=function(er){if(this.lastNeed<=er.length)return er.copy(this.lastChar,this.lastTotal-this.lastNeed,0,this.lastNeed),this.lastChar.toString(this.encoding,0,this.lastTotal);er.copy(this.lastChar,this.lastTotal-this.lastNeed,0,er.length),this.lastNeed-=er.length};function c(er){return er<=127?0:er>>5===6?2:er>>4===14?3:er>>3===30?4:er>>6===2?-1:-2}function j(er,tr,sr){var ar=tr.length-1;if(ar<sr)return 0;var hr=c(tr[ar]);return hr>=0?(hr>0&&(er.lastNeed=hr-1),hr):--ar<sr||hr===-2?0:(hr=c(tr[ar]),hr>=0?(hr>0&&(er.lastNeed=hr-2),hr):--ar<sr||hr===-2?0:(hr=c(tr[ar]),hr>=0?(hr>0&&(hr===2?hr=0:er.lastNeed=hr-3),hr):0))}function _e(er,tr,sr){if((tr[0]&192)!==128)return er.lastNeed=0,"";if(er.lastNeed>1&&tr.length>1){if((tr[1]&192)!==128)return er.lastNeed=1,"";if(er.lastNeed>2&&tr.length>2&&(tr[2]&192)!==128)return er.lastNeed=2,""}}function pt(er){var tr=this.lastTotal-this.lastNeed,sr=_e(this,er);if(sr!==void 0)return sr;if(this.lastNeed<=er.length)return er.copy(this.lastChar,tr,0,this.lastNeed),this.lastChar.toString(this.encoding,0,this.lastTotal);er.copy(this.lastChar,tr,0,er.length),this.lastNeed-=er.length}function yt(er,tr){var sr=j(this,er,tr);if(!this.lastNeed)return er.toString("utf8",tr);this.lastTotal=sr;var ar=er.length-(sr-this.lastNeed);return er.copy(this.lastChar,0,ar),er.toString("utf8",tr,ar)}function ct(er){var tr=er&&er.length?this.write(er):"";return this.lastNeed?tr+"":tr}function Ct(er,tr){if((er.length-tr)%2===0){var sr=er.toString("utf16le",tr);if(sr){var ar=sr.charCodeAt(sr.length-1);if(ar>=55296&&ar<=56319)return this.lastNeed=2,this.lastTotal=4,this.lastChar[0]=er[er.length-2],this.lastChar[1]=er[er.length-1],sr.slice(0,-1)}return sr}return this.lastNeed=1,this.lastTotal=2,this.lastChar[0]=er[er.length-1],er.toString("utf16le",tr,er.length-1)}function qt(er){var tr=er&&er.length?this.write(er):"";if(this.lastNeed){var sr=this.lastTotal-this.lastNeed;return tr+this.lastChar.toString("utf16le",0,sr)}return tr}function Ot(er,tr){var sr=(er.length-tr)%3;return sr===0?er.toString("base64",tr):(this.lastNeed=3-sr,this.lastTotal=3,sr===1?this.lastChar[0]=er[er.length-1]:(this.lastChar[0]=er[er.length-2],this.lastChar[1]=er[er.length-1]),er.toString("base64",tr,er.length-sr))}function Lt(er){var tr=er&&er.length?this.write(er):"";return this.lastNeed?tr+this.lastChar.toString("base64",0,3-this.lastNeed):tr}function Qt(er){return er.toString(this.encoding)}function ir(er){return er&&er.length?this.write(er):""}return string_decoder}var endOfStream,hasRequiredEndOfStream;function requireEndOfStream(){if(hasRequiredEndOfStream)return endOfStream;hasRequiredEndOfStream=1;var s=requireErrorsBrowser().codes.ERR_STREAM_PREMATURE_CLOSE;function e(c){var j=!1;return function(){if(!j){j=!0;for(var _e=arguments.length,pt=new Array(_e),yt=0;yt<_e;yt++)pt[yt]=arguments[yt];c.apply(this,pt)}}}function o(){}function a(c){return c.setHeader&&typeof c.abort=="function"}function d(c,j,_e){if(typeof j=="function")return d(c,null,j);j||(j={}),_e=e(_e||o);var pt=j.readable||j.readable!==!1&&c.readable,yt=j.writable||j.writable!==!1&&c.writable,ct=function(){c.writable||qt()},Ct=c._writableState&&c._writableState.finished,qt=function(){yt=!1,Ct=!0,pt||_e.call(c)},Ot=c._readableState&&c._readableState.endEmitted,Lt=function(){pt=!1,Ot=!0,yt||_e.call(c)},Qt=function(sr){_e.call(c,sr)},ir=function(){var sr;if(pt&&!Ot)return(!c._readableState||!c._readableState.ended)&&(sr=new s),_e.call(c,sr);if(yt&&!Ct)return(!c._writableState||!c._writableState.ended)&&(sr=new s),_e.call(c,sr)},er=function(){c.req.on("finish",qt)};return a(c)?(c.on("complete",qt),c.on("abort",ir),c.req?er():c.on("request",er)):yt&&!c._writableState&&(c.on("end",ct),c.on("close",ct)),c.on("end",Lt),c.on("finish",qt),j.error!==!1&&c.on("error",Qt),c.on("close",ir),function(){c.removeListener("complete",qt),c.removeListener("abort",ir),c.removeListener("request",er),c.req&&c.req.removeListener("finish",qt),c.removeListener("end",ct),c.removeListener("close",ct),c.removeListener("finish",qt),c.removeListener("end",Lt),c.removeListener("error",Qt),c.removeListener("close",ir)}}return endOfStream=d,endOfStream}var async_iterator,hasRequiredAsync_iterator;function requireAsync_iterator(){if(hasRequiredAsync_iterator)return async_iterator;hasRequiredAsync_iterator=1;var s;function e(sr,ar,hr){return ar=o(ar),ar in sr?Object.defineProperty(sr,ar,{value:hr,enumerable:!0,configurable:!0,writable:!0}):sr[ar]=hr,sr}function o(sr){var ar=a(sr,"string");return typeof ar=="symbol"?ar:String(ar)}function a(sr,ar){if(typeof sr!="object"||sr===null)return sr;var hr=sr[Symbol.toPrimitive];if(hr!==void 0){var _r=hr.call(sr,ar);if(typeof _r!="object")return _r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(ar==="string"?String:Number)(sr)}var d=requireEndOfStream(),c=Symbol("lastResolve"),j=Symbol("lastReject"),_e=Symbol("error"),pt=Symbol("ended"),yt=Symbol("lastPromise"),ct=Symbol("handlePromise"),Ct=Symbol("stream");function qt(sr,ar){return{value:sr,done:ar}}function Ot(sr){var ar=sr[c];if(ar!==null){var hr=sr[Ct].read();hr!==null&&(sr[yt]=null,sr[c]=null,sr[j]=null,ar(qt(hr,!1)))}}function Lt(sr){process$1.nextTick(Ot,sr)}function Qt(sr,ar){return function(hr,_r){sr.then(function(){if(ar[pt]){hr(qt(void 0,!0));return}ar[ct](hr,_r)},_r)}}var ir=Object.getPrototypeOf(function(){}),er=Object.setPrototypeOf((s={get stream(){return this[Ct]},next:function(){var ar=this,hr=this[_e];if(hr!==null)return Promise.reject(hr);if(this[pt])return Promise.resolve(qt(void 0,!0));if(this[Ct].destroyed)return new Promise(function(lr,gr){process$1.nextTick(function(){ar[_e]?gr(ar[_e]):lr(qt(void 0,!0))})});var _r=this[yt],dr;if(_r)dr=new Promise(Qt(_r,this));else{var ur=this[Ct].read();if(ur!==null)return Promise.resolve(qt(ur,!1));dr=new Promise(this[ct])}return this[yt]=dr,dr}},e(s,Symbol.asyncIterator,function(){return this}),e(s,"return",function(){var ar=this;return new Promise(function(hr,_r){ar[Ct].destroy(null,function(dr){if(dr){_r(dr);return}hr(qt(void 0,!0))})})}),s),ir),tr=function(ar){var hr,_r=Object.create(er,(hr={},e(hr,Ct,{value:ar,writable:!0}),e(hr,c,{value:null,writable:!0}),e(hr,j,{value:null,writable:!0}),e(hr,_e,{value:null,writable:!0}),e(hr,pt,{value:ar._readableState.endEmitted,writable:!0}),e(hr,ct,{value:function(ur,lr){var gr=_r[Ct].read();gr?(_r[yt]=null,_r[c]=null,_r[j]=null,ur(qt(gr,!1))):(_r[c]=ur,_r[j]=lr)},writable:!0}),hr));return _r[yt]=null,d(ar,function(dr){if(dr&&dr.code!=="ERR_STREAM_PREMATURE_CLOSE"){var ur=_r[j];ur!==null&&(_r[yt]=null,_r[c]=null,_r[j]=null,ur(dr)),_r[_e]=dr;return}var lr=_r[c];lr!==null&&(_r[yt]=null,_r[c]=null,_r[j]=null,lr(qt(void 0,!0))),_r[pt]=!0}),ar.on("readable",Lt.bind(null,_r)),_r};return async_iterator=tr,async_iterator}var fromBrowser,hasRequiredFromBrowser;function requireFromBrowser(){return hasRequiredFromBrowser||(hasRequiredFromBrowser=1,fromBrowser=function(){throw new Error("Readable.from is not available in the browser")}),fromBrowser}var _stream_readable$1,hasRequired_stream_readable$1;function require_stream_readable$1(){if(hasRequired_stream_readable$1)return _stream_readable$1;hasRequired_stream_readable$1=1,_stream_readable$1=lr;var s;lr.ReadableState=ur,requireEvents().EventEmitter;var e=function(br,kr){return br.listeners(kr).length},o=requireStreamBrowser$1(),a=require$$0$1.Buffer,d=(typeof commonjsGlobal$2<"u"?commonjsGlobal$2:typeof window<"u"?window:typeof self<"u"?self:{}).Uint8Array||function(){};function c(Sr){return a.from(Sr)}function j(Sr){return a.isBuffer(Sr)||Sr instanceof d}var _e=requireUtil$1(),pt;_e&&_e.debuglog?pt=_e.debuglog("stream"):pt=function(){};var yt=requireBuffer_list(),ct=requireDestroy$1(),Ct=requireState(),qt=Ct.getHighWaterMark,Ot=requireErrorsBrowser().codes,Lt=Ot.ERR_INVALID_ARG_TYPE,Qt=Ot.ERR_STREAM_PUSH_AFTER_EOF,ir=Ot.ERR_METHOD_NOT_IMPLEMENTED,er=Ot.ERR_STREAM_UNSHIFT_AFTER_END_EVENT,tr,sr,ar;requireInherits_browser()(lr,o);var hr=ct.errorOrDestroy,_r=["error","close","destroy","pause","resume"];function dr(Sr,br,kr){if(typeof Sr.prependListener=="function")return Sr.prependListener(br,kr);!Sr._events||!Sr._events[br]?Sr.on(br,kr):Array.isArray(Sr._events[br])?Sr._events[br].unshift(kr):Sr._events[br]=[kr,Sr._events[br]]}function ur(Sr,br,kr){s=s||require_stream_duplex$1(),Sr=Sr||{},typeof kr!="boolean"&&(kr=br instanceof s),this.objectMode=!!Sr.objectMode,kr&&(this.objectMode=this.objectMode||!!Sr.readableObjectMode),this.highWaterMark=qt(this,Sr,"readableHighWaterMark",kr),this.buffer=new yt,this.length=0,this.pipes=null,this.pipesCount=0,this.flowing=null,this.ended=!1,this.endEmitted=!1,this.reading=!1,this.sync=!0,this.needReadable=!1,this.emittedReadable=!1,this.readableListening=!1,this.resumeScheduled=!1,this.paused=!0,this.emitClose=Sr.emitClose!==!1,this.autoDestroy=!!Sr.autoDestroy,this.destroyed=!1,this.defaultEncoding=Sr.defaultEncoding||"utf8",this.awaitDrain=0,this.readingMore=!1,this.decoder=null,this.encoding=null,Sr.encoding&&(tr||(tr=requireString_decoder().StringDecoder),this.decoder=new tr(Sr.encoding),this.encoding=Sr.encoding)}function lr(Sr){if(s=s||require_stream_duplex$1(),!(this instanceof lr))return new lr(Sr);var br=this instanceof s;this._readableState=new ur(Sr,this,br),this.readable=!0,Sr&&(typeof Sr.read=="function"&&(this._read=Sr.read),typeof Sr.destroy=="function"&&(this._destroy=Sr.destroy)),o.call(this)}Object.defineProperty(lr.prototype,"destroyed",{enumerable:!1,get:function(){return this._readableState===void 0?!1:this._readableState.destroyed},set:function(br){this._readableState&&(this._readableState.destroyed=br)}}),lr.prototype.destroy=ct.destroy,lr.prototype._undestroy=ct.undestroy,lr.prototype._destroy=function(Sr,br){br(Sr)},lr.prototype.push=function(Sr,br){var kr=this._readableState,Qr;return kr.objectMode?Qr=!0:typeof Sr=="string"&&(br=br||kr.defaultEncoding,br!==kr.encoding&&(Sr=a.from(Sr,br),br=""),Qr=!0),gr(this,Sr,br,!1,Qr)},lr.prototype.unshift=function(Sr){return gr(this,Sr,null,!0,!1)};function gr(Sr,br,kr,Qr,qr){pt("readableAddChunk",br);var $r=Sr._readableState;if(br===null)$r.reading=!1,Rt(Sr,$r);else{var gn;if(qr||(gn=h($r,br)),gn)hr(Sr,gn);else if($r.objectMode||br&&br.length>0)if(typeof br!="string"&&!$r.objectMode&&Object.getPrototypeOf(br)!==a.prototype&&(br=c(br)),Qr)$r.endEmitted?hr(Sr,new er):Mt(Sr,$r,br,!0);else if($r.ended)hr(Sr,new Qt);else{if($r.destroyed)return!1;$r.reading=!1,$r.decoder&&!kr?(br=$r.decoder.write(br),$r.objectMode||br.length!==0?Mt(Sr,$r,br,!1):xt(Sr,$r)):Mt(Sr,$r,br,!1)}else Qr||($r.reading=!1,xt(Sr,$r))}return!$r.ended&&($r.length<$r.highWaterMark||$r.length===0)}function Mt(Sr,br,kr,Qr){br.flowing&&br.length===0&&!br.sync?(br.awaitDrain=0,Sr.emit("data",kr)):(br.length+=br.objectMode?1:kr.length,Qr?br.buffer.unshift(kr):br.buffer.push(kr),br.needReadable&&kt(Sr)),xt(Sr,br)}function h(Sr,br){var kr;return!j(br)&&typeof br!="string"&&br!==void 0&&!Sr.objectMode&&(kr=new Lt("chunk",["string","Buffer","Uint8Array"],br)),kr}lr.prototype.isPaused=function(){return this._readableState.flowing===!1},lr.prototype.setEncoding=function(Sr){tr||(tr=requireString_decoder().StringDecoder);var br=new tr(Sr);this._readableState.decoder=br,this._readableState.encoding=this._readableState.decoder.encoding;for(var kr=this._readableState.buffer.head,Qr="";kr!==null;)Qr+=br.write(kr.data),kr=kr.next;return this._readableState.buffer.clear(),Qr!==""&&this._readableState.buffer.push(Qr),this._readableState.length=Qr.length,this};var _=1073741824;function b(Sr){return Sr>=_?Sr=_:(Sr--,Sr|=Sr>>>1,Sr|=Sr>>>2,Sr|=Sr>>>4,Sr|=Sr>>>8,Sr|=Sr>>>16,Sr++),Sr}function lt(Sr,br){return Sr<=0||br.length===0&&br.ended?0:br.objectMode?1:Sr!==Sr?br.flowing&&br.length?br.buffer.head.data.length:br.length:(Sr>br.highWaterMark&&(br.highWaterMark=b(Sr)),Sr<=br.length?Sr:br.ended?br.length:(br.needReadable=!0,0))}lr.prototype.read=function(Sr){pt("read",Sr),Sr=parseInt(Sr,10);var br=this._readableState,kr=Sr;if(Sr!==0&&(br.emittedReadable=!1),Sr===0&&br.needReadable&&((br.highWaterMark!==0?br.length>=br.highWaterMark:br.length>0)||br.ended))return pt("read: emitReadable",br.length,br.ended),br.length===0&&br.ended?wr(this):kt(this),null;if(Sr=lt(Sr,br),Sr===0&&br.ended)return br.length===0&&wr(this),null;var Qr=br.needReadable;pt("need readable",Qr),(br.length===0||br.length-Sr<br.highWaterMark)&&(Qr=!0,pt("length less than watermark",Qr)),br.ended||br.reading?(Qr=!1,pt("reading or ended",Qr)):Qr&&(pt("do read"),br.reading=!0,br.sync=!0,br.length===0&&(br.needReadable=!0),this._read(br.highWaterMark),br.sync=!1,br.reading||(Sr=lt(kr,br)));var qr;return Sr>0?qr=pr(Sr,br):qr=null,qr===null?(br.needReadable=br.length<=br.highWaterMark,Sr=0):(br.length-=Sr,br.awaitDrain=0),br.length===0&&(br.ended||(br.needReadable=!0),kr!==Sr&&br.ended&&wr(this)),qr!==null&&this.emit("data",qr),qr};function Rt(Sr,br){if(pt("onEofChunk"),!br.ended){if(br.decoder){var kr=br.decoder.end();kr&&kr.length&&(br.buffer.push(kr),br.length+=br.objectMode?1:kr.length)}br.ended=!0,br.sync?kt(Sr):(br.needReadable=!1,br.emittedReadable||(br.emittedReadable=!0,Ft(Sr)))}}function kt(Sr){var br=Sr._readableState;pt("emitReadable",br.needReadable,br.emittedReadable),br.needReadable=!1,br.emittedReadable||(pt("emitReadable",br.flowing),br.emittedReadable=!0,process$1.nextTick(Ft,Sr))}function Ft(Sr){var br=Sr._readableState;pt("emitReadable_",br.destroyed,br.length,br.ended),!br.destroyed&&(br.length||br.ended)&&(Sr.emit("readable"),br.emittedReadable=!1),br.needReadable=!br.flowing&&!br.ended&&br.length<=br.highWaterMark,Ar(Sr)}function xt(Sr,br){br.readingMore||(br.readingMore=!0,process$1.nextTick(g,Sr,br))}function g(Sr,br){for(;!br.reading&&!br.ended&&(br.length<br.highWaterMark||br.flowing&&br.length===0);){var kr=br.length;if(pt("maybeReadMore read 0"),Sr.read(0),kr===br.length)break}br.readingMore=!1}lr.prototype._read=function(Sr){hr(this,new ir("_read()"))},lr.prototype.pipe=function(Sr,br){var kr=this,Qr=this._readableState;switch(Qr.pipesCount){case 0:Qr.pipes=Sr;break;case 1:Qr.pipes=[Qr.pipes,Sr];break;default:Qr.pipes.push(Sr);break}Qr.pipesCount+=1,pt("pipe count=%d opts=%j",Qr.pipesCount,br);var qr=(!br||br.end!==!1)&&Sr!==process$1.stdout&&Sr!==process$1.stderr,$r=qr?Lr:xn;Qr.endEmitted?process$1.nextTick($r):kr.once("end",$r),Sr.on("unpipe",gn);function gn(Or,Yr){pt("onunpipe"),Or===kr&&Yr&&Yr.hasUnpiped===!1&&(Yr.hasUnpiped=!0,Fr())}function Lr(){pt("onend"),Sr.end()}var Dr=wt(kr);Sr.on("drain",Dr);var En=!1;function Fr(){pt("cleanup"),Sr.removeListener("close",Nr),Sr.removeListener("finish",Wr),Sr.removeListener("drain",Dr),Sr.removeListener("error",yn),Sr.removeListener("unpipe",gn),kr.removeListener("end",Lr),kr.removeListener("end",xn),kr.removeListener("data",zr),En=!0,Qr.awaitDrain&&(!Sr._writableState||Sr._writableState.needDrain)&&Dr()}kr.on("data",zr);function zr(Or){pt("ondata");var Yr=Sr.write(Or);pt("dest.write",Yr),Yr===!1&&((Qr.pipesCount===1&&Qr.pipes===Sr||Qr.pipesCount>1&&Ir(Qr.pipes,Sr)!==-1)&&!En&&(pt("false write response, pause",Qr.awaitDrain),Qr.awaitDrain++),kr.pause())}function yn(Or){pt("onerror",Or),xn(),Sr.removeListener("error",yn),e(Sr,"error")===0&&hr(Sr,Or)}dr(Sr,"error",yn);function Nr(){Sr.removeListener("finish",Wr),xn()}Sr.once("close",Nr);function Wr(){pt("onfinish"),Sr.removeListener("close",Nr),xn()}Sr.once("finish",Wr);function xn(){pt("unpipe"),kr.unpipe(Sr)}return Sr.emit("pipe",kr),Qr.flowing||(pt("pipe resume"),kr.resume()),Sr};function wt(Sr){return function(){var kr=Sr._readableState;pt("pipeOnDrain",kr.awaitDrain),kr.awaitDrain&&kr.awaitDrain--,kr.awaitDrain===0&&e(Sr,"data")&&(kr.flowing=!0,Ar(Sr))}}lr.prototype.unpipe=function(Sr){var br=this._readableState,kr={hasUnpiped:!1};if(br.pipesCount===0)return this;if(br.pipesCount===1)return Sr&&Sr!==br.pipes?this:(Sr||(Sr=br.pipes),br.pipes=null,br.pipesCount=0,br.flowing=!1,Sr&&Sr.emit("unpipe",this,kr),this);if(!Sr){var Qr=br.pipes,qr=br.pipesCount;br.pipes=null,br.pipesCount=0,br.flowing=!1;for(var $r=0;$r<qr;$r++)Qr[$r].emit("unpipe",this,{hasUnpiped:!1});return this}var gn=Ir(br.pipes,Sr);return gn===-1?this:(br.pipes.splice(gn,1),br.pipesCount-=1,br.pipesCount===1&&(br.pipes=br.pipes[0]),Sr.emit("unpipe",this,kr),this)},lr.prototype.on=function(Sr,br){var kr=o.prototype.on.call(this,Sr,br),Qr=this._readableState;return Sr==="data"?(Qr.readableListening=this.listenerCount("readable")>0,Qr.flowing!==!1&&this.resume()):Sr==="readable"&&!Qr.endEmitted&&!Qr.readableListening&&(Qr.readableListening=Qr.needReadable=!0,Qr.flowing=!1,Qr.emittedReadable=!1,pt("on readable",Qr.length,Qr.reading),Qr.length?kt(this):Qr.reading||process$1.nextTick(or,this)),kr},lr.prototype.addListener=lr.prototype.on,lr.prototype.removeListener=function(Sr,br){var kr=o.prototype.removeListener.call(this,Sr,br);return Sr==="readable"&&process$1.nextTick(nr,this),kr},lr.prototype.removeAllListeners=function(Sr){var br=o.prototype.removeAllListeners.apply(this,arguments);return(Sr==="readable"||Sr===void 0)&&process$1.nextTick(nr,this),br};function nr(Sr){var br=Sr._readableState;br.readableListening=Sr.listenerCount("readable")>0,br.resumeScheduled&&!br.paused?br.flowing=!0:Sr.listenerCount("data")>0&&Sr.resume()}function or(Sr){pt("readable nexttick read 0"),Sr.read(0)}lr.prototype.resume=function(){var Sr=this._readableState;return Sr.flowing||(pt("resume"),Sr.flowing=!Sr.readableListening,cr(this,Sr)),Sr.paused=!1,this};function cr(Sr,br){br.resumeScheduled||(br.resumeScheduled=!0,process$1.nextTick(Rr,Sr,br))}function Rr(Sr,br){pt("resume",br.reading),br.reading||Sr.read(0),br.resumeScheduled=!1,Sr.emit("resume"),Ar(Sr),br.flowing&&!br.reading&&Sr.read(0)}lr.prototype.pause=function(){return pt("call pause flowing=%j",this._readableState.flowing),this._readableState.flowing!==!1&&(pt("pause"),this._readableState.flowing=!1,this.emit("pause")),this._readableState.paused=!0,this};function Ar(Sr){var br=Sr._readableState;for(pt("flow",br.flowing);br.flowing&&Sr.read()!==null;);}lr.prototype.wrap=function(Sr){var br=this,kr=this._readableState,Qr=!1;Sr.on("end",function(){if(pt("wrapped end"),kr.decoder&&!kr.ended){var gn=kr.decoder.end();gn&&gn.length&&br.push(gn)}br.push(null)}),Sr.on("data",function(gn){if(pt("wrapped data"),kr.decoder&&(gn=kr.decoder.write(gn)),!(kr.objectMode&&gn==null)&&!(!kr.objectMode&&(!gn||!gn.length))){var Lr=br.push(gn);Lr||(Qr=!0,Sr.pause())}});for(var qr in Sr)this[qr]===void 0&&typeof Sr[qr]=="function"&&(this[qr]=function(Lr){return function(){return Sr[Lr].apply(Sr,arguments)}}(qr));for(var $r=0;$r<_r.length;$r++)Sr.on(_r[$r],this.emit.bind(this,_r[$r]));return this._read=function(gn){pt("wrapped _read",gn),Qr&&(Qr=!1,Sr.resume())},this},typeof Symbol=="function"&&(lr.prototype[Symbol.asyncIterator]=function(){return sr===void 0&&(sr=requireAsync_iterator()),sr(this)}),Object.defineProperty(lr.prototype,"readableHighWaterMark",{enumerable:!1,get:function(){return this._readableState.highWaterMark}}),Object.defineProperty(lr.prototype,"readableBuffer",{enumerable:!1,get:function(){return this._readableState&&this._readableState.buffer}}),Object.defineProperty(lr.prototype,"readableFlowing",{enumerable:!1,get:function(){return this._readableState.flowing},set:function(br){this._readableState&&(this._readableState.flowing=br)}}),lr._fromList=pr,Object.defineProperty(lr.prototype,"readableLength",{enumerable:!1,get:function(){return this._readableState.length}});function pr(Sr,br){if(br.length===0)return null;var kr;return br.objectMode?kr=br.buffer.shift():!Sr||Sr>=br.length?(br.decoder?kr=br.buffer.join(""):br.buffer.length===1?kr=br.buffer.first():kr=br.buffer.concat(br.length),br.buffer.clear()):kr=br.buffer.consume(Sr,br.decoder),kr}function wr(Sr){var br=Sr._readableState;pt("endReadable",br.endEmitted),br.endEmitted||(br.ended=!0,process$1.nextTick(Tr,br,Sr))}function Tr(Sr,br){if(pt("endReadableNT",Sr.endEmitted,Sr.length),!Sr.endEmitted&&Sr.length===0&&(Sr.endEmitted=!0,br.readable=!1,br.emit("end"),Sr.autoDestroy)){var kr=br._writableState;(!kr||kr.autoDestroy&&kr.finished)&&br.destroy()}}typeof Symbol=="function"&&(lr.from=function(Sr,br){return ar===void 0&&(ar=requireFromBrowser()),ar(lr,Sr,br)});function Ir(Sr,br){for(var kr=0,Qr=Sr.length;kr<Qr;kr++)if(Sr[kr]===br)return kr;return-1}return _stream_readable$1}var _stream_transform$1,hasRequired_stream_transform$1;function require_stream_transform$1(){if(hasRequired_stream_transform$1)return _stream_transform$1;hasRequired_stream_transform$1=1,_stream_transform$1=_e;var s=requireErrorsBrowser().codes,e=s.ERR_METHOD_NOT_IMPLEMENTED,o=s.ERR_MULTIPLE_CALLBACK,a=s.ERR_TRANSFORM_ALREADY_TRANSFORMING,d=s.ERR_TRANSFORM_WITH_LENGTH_0,c=require_stream_duplex$1();requireInherits_browser()(_e,c);function j(ct,Ct){var qt=this._transformState;qt.transforming=!1;var Ot=qt.writecb;if(Ot===null)return this.emit("error",new o);qt.writechunk=null,qt.writecb=null,Ct!=null&&this.push(Ct),Ot(ct);var Lt=this._readableState;Lt.reading=!1,(Lt.needReadable||Lt.length<Lt.highWaterMark)&&this._read(Lt.highWaterMark)}function _e(ct){if(!(this instanceof _e))return new _e(ct);c.call(this,ct),this._transformState={afterTransform:j.bind(this),needTransform:!1,transforming:!1,writecb:null,writechunk:null,writeencoding:null},this._readableState.needReadable=!0,this._readableState.sync=!1,ct&&(typeof ct.transform=="function"&&(this._transform=ct.transform),typeof ct.flush=="function"&&(this._flush=ct.flush)),this.on("prefinish",pt)}function pt(){var ct=this;typeof this._flush=="function"&&!this._readableState.destroyed?this._flush(function(Ct,qt){yt(ct,Ct,qt)}):yt(this,null,null)}_e.prototype.push=function(ct,Ct){return this._transformState.needTransform=!1,c.prototype.push.call(this,ct,Ct)},_e.prototype._transform=function(ct,Ct,qt){qt(new e("_transform()"))},_e.prototype._write=function(ct,Ct,qt){var Ot=this._transformState;if(Ot.writecb=qt,Ot.writechunk=ct,Ot.writeencoding=Ct,!Ot.transforming){var Lt=this._readableState;(Ot.needTransform||Lt.needReadable||Lt.length<Lt.highWaterMark)&&this._read(Lt.highWaterMark)}},_e.prototype._read=function(ct){var Ct=this._transformState;Ct.writechunk!==null&&!Ct.transforming?(Ct.transforming=!0,this._transform(Ct.writechunk,Ct.writeencoding,Ct.afterTransform)):Ct.needTransform=!0},_e.prototype._destroy=function(ct,Ct){c.prototype._destroy.call(this,ct,function(qt){Ct(qt)})};function yt(ct,Ct,qt){if(Ct)return ct.emit("error",Ct);if(qt!=null&&ct.push(qt),ct._writableState.length)throw new d;if(ct._transformState.transforming)throw new a;return ct.push(null)}return _stream_transform$1}var _stream_passthrough$1,hasRequired_stream_passthrough$1;function require_stream_passthrough$1(){if(hasRequired_stream_passthrough$1)return _stream_passthrough$1;hasRequired_stream_passthrough$1=1,_stream_passthrough$1=e;var s=require_stream_transform$1();requireInherits_browser()(e,s);function e(o){if(!(this instanceof e))return new e(o);s.call(this,o)}return e.prototype._transform=function(o,a,d){d(null,o)},_stream_passthrough$1}var pipeline_1,hasRequiredPipeline;function requirePipeline(){if(hasRequiredPipeline)return pipeline_1;hasRequiredPipeline=1;var s;function e(qt){var Ot=!1;return function(){Ot||(Ot=!0,qt.apply(void 0,arguments))}}var o=requireErrorsBrowser().codes,a=o.ERR_MISSING_ARGS,d=o.ERR_STREAM_DESTROYED;function c(qt){if(qt)throw qt}function j(qt){return qt.setHeader&&typeof qt.abort=="function"}function _e(qt,Ot,Lt,Qt){Qt=e(Qt);var ir=!1;qt.on("close",function(){ir=!0}),s===void 0&&(s=requireEndOfStream()),s(qt,{readable:Ot,writable:Lt},function(tr){if(tr)return Qt(tr);ir=!0,Qt()});var er=!1;return function(tr){if(!ir&&!er){if(er=!0,j(qt))return qt.abort();if(typeof qt.destroy=="function")return qt.destroy();Qt(tr||new d("pipe"))}}}function pt(qt){qt()}function yt(qt,Ot){return qt.pipe(Ot)}function ct(qt){return!qt.length||typeof qt[qt.length-1]!="function"?c:qt.pop()}function Ct(){for(var qt=arguments.length,Ot=new Array(qt),Lt=0;Lt<qt;Lt++)Ot[Lt]=arguments[Lt];var Qt=ct(Ot);if(Array.isArray(Ot[0])&&(Ot=Ot[0]),Ot.length<2)throw new a("streams");var ir,er=Ot.map(function(tr,sr){var ar=sr<Ot.length-1,hr=sr>0;return _e(tr,ar,hr,function(_r){ir||(ir=_r),_r&&er.forEach(pt),!ar&&(er.forEach(pt),Qt(ir))})});return Ot.reduce(yt)}return pipeline_1=Ct,pipeline_1}var streamBrowserify,hasRequiredStreamBrowserify;function requireStreamBrowserify(){if(hasRequiredStreamBrowserify)return streamBrowserify;hasRequiredStreamBrowserify=1,streamBrowserify=o;var s=requireEvents().EventEmitter,e=requireInherits_browser();e(o,s),o.Readable=require_stream_readable$1(),o.Writable=require_stream_writable$1(),o.Duplex=require_stream_duplex$1(),o.Transform=require_stream_transform$1(),o.PassThrough=require_stream_passthrough$1(),o.finished=requireEndOfStream(),o.pipeline=requirePipeline(),o.Stream=o;function o(){s.call(this)}return o.prototype.pipe=function(a,d){var c=this;function j(Ot){a.writable&&a.write(Ot)===!1&&c.pause&&c.pause()}c.on("data",j);function _e(){c.readable&&c.resume&&c.resume()}a.on("drain",_e),!a._isStdio&&(!d||d.end!==!1)&&(c.on("end",yt),c.on("close",ct));var pt=!1;function yt(){pt||(pt=!0,a.end())}function ct(){pt||(pt=!0,typeof a.destroy=="function"&&a.destroy())}function Ct(Ot){if(qt(),s.listenerCount(this,"error")===0)throw Ot}c.on("error",Ct),a.on("error",Ct);function qt(){c.removeListener("data",j),a.removeListener("drain",_e),c.removeListener("end",yt),c.removeListener("close",ct),c.removeListener("error",Ct),a.removeListener("error",Ct),c.removeListener("end",qt),c.removeListener("close",qt),a.removeListener("close",qt)}return c.on("end",qt),c.on("close",qt),a.on("close",qt),a.emit("pipe",c),a},streamBrowserify}var hashBase,hasRequiredHashBase;function requireHashBase(){if(hasRequiredHashBase)return hashBase;hasRequiredHashBase=1;var s=requireSafeBuffer$1().Buffer,e=requireStreamBrowserify().Transform,o=requireInherits_browser();function a(_e){e.call(this),this._block=s.allocUnsafe(_e),this._blockSize=_e,this._blockOffset=0,this._length=[0,0,0,0],this._finalized=!1}o(a,e),a.prototype._transform=function(_e,pt,yt){var ct=null;try{this.update(_e,pt)}catch(Ct){ct=Ct}yt(ct)},a.prototype._flush=function(_e){var pt=null;try{this.push(this.digest())}catch(yt){pt=yt}_e(pt)};var d=typeof Uint8Array<"u",c=typeof ArrayBuffer<"u"&&typeof Uint8Array<"u"&&ArrayBuffer.isView&&(s.prototype instanceof Uint8Array||s.TYPED_ARRAY_SUPPORT);function j(_e,pt){if(_e instanceof s)return _e;if(typeof _e=="string")return s.from(_e,pt);if(c&&ArrayBuffer.isView(_e)){if(_e.byteLength===0)return s.alloc(0);var yt=s.from(_e.buffer,_e.byteOffset,_e.byteLength);if(yt.byteLength===_e.byteLength)return yt}if(d&&_e instanceof Uint8Array||s.isBuffer(_e)&&_e.constructor&&typeof _e.constructor.isBuffer=="function"&&_e.constructor.isBuffer(_e))return s.from(_e);throw new TypeError('The "data" argument must be of type string or an instance of Buffer, TypedArray, or DataView.')}return a.prototype.update=function(_e,pt){if(this._finalized)throw new Error("Digest already called");_e=j(_e,pt);for(var yt=this._block,ct=0;this._blockOffset+_e.length-ct>=this._blockSize;){for(var Ct=this._blockOffset;Ct<this._blockSize;)yt[Ct++]=_e[ct++];this._update(),this._blockOffset=0}for(;ct<_e.length;)yt[this._blockOffset++]=_e[ct++];for(var qt=0,Ot=_e.length*8;Ot>0;++qt)this._length[qt]+=Ot,Ot=this._length[qt]/4294967296|0,Ot>0&&(this._length[qt]-=4294967296*Ot);return this},a.prototype._update=function(){throw new Error("_update is not implemented")},a.prototype.digest=function(_e){if(this._finalized)throw new Error("Digest already called");this._finalized=!0;var pt=this._digest();_e!==void 0&&(pt=pt.toString(_e)),this._block.fill(0),this._blockOffset=0;for(var yt=0;yt<4;++yt)this._length[yt]=0;return pt},a.prototype._digest=function(){throw new Error("_digest is not implemented")},hashBase=a,hashBase}var md5_js,hasRequiredMd5_js;function requireMd5_js(){if(hasRequiredMd5_js)return md5_js;hasRequiredMd5_js=1;var s=requireInherits_browser(),e=requireHashBase(),o=requireSafeBuffer$1().Buffer,a=new Array(16);function d(){e.call(this,64),this._a=1732584193,this._b=4023233417,this._c=2562383102,this._d=271733878}s(d,e),d.prototype._update=function(){for(var ct=a,Ct=0;Ct<16;++Ct)ct[Ct]=this._block.readInt32LE(Ct*4);var qt=this._a,Ot=this._b,Lt=this._c,Qt=this._d;qt=j(qt,Ot,Lt,Qt,ct[0],3614090360,7),Qt=j(Qt,qt,Ot,Lt,ct[1],3905402710,12),Lt=j(Lt,Qt,qt,Ot,ct[2],606105819,17),Ot=j(Ot,Lt,Qt,qt,ct[3],3250441966,22),qt=j(qt,Ot,Lt,Qt,ct[4],4118548399,7),Qt=j(Qt,qt,Ot,Lt,ct[5],1200080426,12),Lt=j(Lt,Qt,qt,Ot,ct[6],2821735955,17),Ot=j(Ot,Lt,Qt,qt,ct[7],4249261313,22),qt=j(qt,Ot,Lt,Qt,ct[8],1770035416,7),Qt=j(Qt,qt,Ot,Lt,ct[9],2336552879,12),Lt=j(Lt,Qt,qt,Ot,ct[10],4294925233,17),Ot=j(Ot,Lt,Qt,qt,ct[11],2304563134,22),qt=j(qt,Ot,Lt,Qt,ct[12],1804603682,7),Qt=j(Qt,qt,Ot,Lt,ct[13],4254626195,12),Lt=j(Lt,Qt,qt,Ot,ct[14],2792965006,17),Ot=j(Ot,Lt,Qt,qt,ct[15],1236535329,22),qt=_e(qt,Ot,Lt,Qt,ct[1],4129170786,5),Qt=_e(Qt,qt,Ot,Lt,ct[6],3225465664,9),Lt=_e(Lt,Qt,qt,Ot,ct[11],643717713,14),Ot=_e(Ot,Lt,Qt,qt,ct[0],3921069994,20),qt=_e(qt,Ot,Lt,Qt,ct[5],3593408605,5),Qt=_e(Qt,qt,Ot,Lt,ct[10],38016083,9),Lt=_e(Lt,Qt,qt,Ot,ct[15],3634488961,14),Ot=_e(Ot,Lt,Qt,qt,ct[4],3889429448,20),qt=_e(qt,Ot,Lt,Qt,ct[9],568446438,5),Qt=_e(Qt,qt,Ot,Lt,ct[14],3275163606,9),Lt=_e(Lt,Qt,qt,Ot,ct[3],4107603335,14),Ot=_e(Ot,Lt,Qt,qt,ct[8],1163531501,20),qt=_e(qt,Ot,Lt,Qt,ct[13],2850285829,5),Qt=_e(Qt,qt,Ot,Lt,ct[2],4243563512,9),Lt=_e(Lt,Qt,qt,Ot,ct[7],1735328473,14),Ot=_e(Ot,Lt,Qt,qt,ct[12],2368359562,20),qt=pt(qt,Ot,Lt,Qt,ct[5],4294588738,4),Qt=pt(Qt,qt,Ot,Lt,ct[8],2272392833,11),Lt=pt(Lt,Qt,qt,Ot,ct[11],1839030562,16),Ot=pt(Ot,Lt,Qt,qt,ct[14],4259657740,23),qt=pt(qt,Ot,Lt,Qt,ct[1],2763975236,4),Qt=pt(Qt,qt,Ot,Lt,ct[4],1272893353,11),Lt=pt(Lt,Qt,qt,Ot,ct[7],4139469664,16),Ot=pt(Ot,Lt,Qt,qt,ct[10],3200236656,23),qt=pt(qt,Ot,Lt,Qt,ct[13],681279174,4),Qt=pt(Qt,qt,Ot,Lt,ct[0],3936430074,11),Lt=pt(Lt,Qt,qt,Ot,ct[3],3572445317,16),Ot=pt(Ot,Lt,Qt,qt,ct[6],76029189,23),qt=pt(qt,Ot,Lt,Qt,ct[9],3654602809,4),Qt=pt(Qt,qt,Ot,Lt,ct[12],3873151461,11),Lt=pt(Lt,Qt,qt,Ot,ct[15],530742520,16),Ot=pt(Ot,Lt,Qt,qt,ct[2],3299628645,23),qt=yt(qt,Ot,Lt,Qt,ct[0],4096336452,6),Qt=yt(Qt,qt,Ot,Lt,ct[7],1126891415,10),Lt=yt(Lt,Qt,qt,Ot,ct[14],2878612391,15),Ot=yt(Ot,Lt,Qt,qt,ct[5],4237533241,21),qt=yt(qt,Ot,Lt,Qt,ct[12],1700485571,6),Qt=yt(Qt,qt,Ot,Lt,ct[3],2399980690,10),Lt=yt(Lt,Qt,qt,Ot,ct[10],4293915773,15),Ot=yt(Ot,Lt,Qt,qt,ct[1],2240044497,21),qt=yt(qt,Ot,Lt,Qt,ct[8],1873313359,6),Qt=yt(Qt,qt,Ot,Lt,ct[15],4264355552,10),Lt=yt(Lt,Qt,qt,Ot,ct[6],2734768916,15),Ot=yt(Ot,Lt,Qt,qt,ct[13],1309151649,21),qt=yt(qt,Ot,Lt,Qt,ct[4],4149444226,6),Qt=yt(Qt,qt,Ot,Lt,ct[11],3174756917,10),Lt=yt(Lt,Qt,qt,Ot,ct[2],718787259,15),Ot=yt(Ot,Lt,Qt,qt,ct[9],3951481745,21),this._a=this._a+qt|0,this._b=this._b+Ot|0,this._c=this._c+Lt|0,this._d=this._d+Qt|0},d.prototype._digest=function(){this._block[this._blockOffset++]=128,this._blockOffset>56&&(this._block.fill(0,this._blockOffset,64),this._update(),this._blockOffset=0),this._block.fill(0,this._blockOffset,56),this._block.writeUInt32LE(this._length[0],56),this._block.writeUInt32LE(this._length[1],60),this._update();var ct=o.allocUnsafe(16);return ct.writeInt32LE(this._a,0),ct.writeInt32LE(this._b,4),ct.writeInt32LE(this._c,8),ct.writeInt32LE(this._d,12),ct};function c(ct,Ct){return ct<<Ct|ct>>>32-Ct}function j(ct,Ct,qt,Ot,Lt,Qt,ir){return c(ct+(Ct&qt|~Ct&Ot)+Lt+Qt|0,ir)+Ct|0}function _e(ct,Ct,qt,Ot,Lt,Qt,ir){return c(ct+(Ct&Ot|qt&~Ot)+Lt+Qt|0,ir)+Ct|0}function pt(ct,Ct,qt,Ot,Lt,Qt,ir){return c(ct+(Ct^qt^Ot)+Lt+Qt|0,ir)+Ct|0}function yt(ct,Ct,qt,Ot,Lt,Qt,ir){return c(ct+(qt^(Ct|~Ot))+Lt+Qt|0,ir)+Ct|0}return md5_js=d,md5_js}var ripemd160$1,hasRequiredRipemd160$1;function requireRipemd160$1(){if(hasRequiredRipemd160$1)return ripemd160$1;hasRequiredRipemd160$1=1;var s=require$$0$1.Buffer,e=requireInherits_browser(),o=requireHashBase(),a=new Array(16),d=[0,1,2,3,4,5,6,7,8,9,10,11,12,13,14,15,7,4,13,1,10,6,15,3,12,0,9,5,2,14,11,8,3,10,14,4,9,15,8,1,2,7,0,6,13,11,5,12,1,9,11,10,0,8,12,4,13,3,7,15,14,5,6,2,4,0,5,9,7,12,2,10,14,1,3,8,11,6,15,13],c=[5,14,7,0,9,2,11,4,13,6,15,8,1,10,3,12,6,11,3,7,0,13,5,10,14,15,8,12,4,9,1,2,15,5,1,3,7,14,6,9,11,8,12,2,10,0,4,13,8,6,4,1,3,11,15,0,5,12,2,13,9,7,10,14,12,15,10,4,1,5,8,7,6,2,13,14,0,3,9,11],j=[11,14,15,12,5,8,7,9,11,13,14,15,6,7,9,8,7,6,8,13,11,9,7,15,7,12,15,9,11,7,13,12,11,13,6,7,14,9,13,15,14,8,13,6,5,12,7,5,11,12,14,15,14,15,9,8,9,14,5,6,8,6,5,12,9,15,5,11,6,8,13,12,5,12,13,14,11,8,5,6],_e=[8,9,9,11,13,15,15,5,7,7,8,11,14,14,12,6,9,13,15,7,12,8,9,11,7,7,12,7,6,15,13,11,9,7,15,11,8,6,6,14,12,13,5,14,13,13,7,5,15,5,8,11,14,14,6,14,6,9,12,9,12,5,15,8,8,5,12,9,12,5,14,6,8,13,6,5,15,13,11,11],pt=[0,1518500249,1859775393,2400959708,2840853838],yt=[1352829926,1548603684,1836072691,2053994217,0];function ct(){o.call(this,64),this._a=1732584193,this._b=4023233417,this._c=2562383102,this._d=271733878,this._e=3285377520}e(ct,o),ct.prototype._update=function(){for(var er=a,tr=0;tr<16;++tr)er[tr]=this._block.readInt32LE(tr*4);for(var sr=this._a|0,ar=this._b|0,hr=this._c|0,_r=this._d|0,dr=this._e|0,ur=this._a|0,lr=this._b|0,gr=this._c|0,Mt=this._d|0,h=this._e|0,_=0;_<80;_+=1){var b,lt;_<16?(b=qt(sr,ar,hr,_r,dr,er[d[_]],pt[0],j[_]),lt=ir(ur,lr,gr,Mt,h,er[c[_]],yt[0],_e[_])):_<32?(b=Ot(sr,ar,hr,_r,dr,er[d[_]],pt[1],j[_]),lt=Qt(ur,lr,gr,Mt,h,er[c[_]],yt[1],_e[_])):_<48?(b=Lt(sr,ar,hr,_r,dr,er[d[_]],pt[2],j[_]),lt=Lt(ur,lr,gr,Mt,h,er[c[_]],yt[2],_e[_])):_<64?(b=Qt(sr,ar,hr,_r,dr,er[d[_]],pt[3],j[_]),lt=Ot(ur,lr,gr,Mt,h,er[c[_]],yt[3],_e[_])):(b=ir(sr,ar,hr,_r,dr,er[d[_]],pt[4],j[_]),lt=qt(ur,lr,gr,Mt,h,er[c[_]],yt[4],_e[_])),sr=dr,dr=_r,_r=Ct(hr,10),hr=ar,ar=b,ur=h,h=Mt,Mt=Ct(gr,10),gr=lr,lr=lt}var Rt=this._b+hr+Mt|0;this._b=this._c+_r+h|0,this._c=this._d+dr+ur|0,this._d=this._e+sr+lr|0,this._e=this._a+ar+gr|0,this._a=Rt},ct.prototype._digest=function(){this._block[this._blockOffset++]=128,this._blockOffset>56&&(this._block.fill(0,this._blockOffset,64),this._update(),this._blockOffset=0),this._block.fill(0,this._blockOffset,56),this._block.writeUInt32LE(this._length[0],56),this._block.writeUInt32LE(this._length[1],60),this._update();var er=s.alloc?s.alloc(20):new s(20);return er.writeInt32LE(this._a,0),er.writeInt32LE(this._b,4),er.writeInt32LE(this._c,8),er.writeInt32LE(this._d,12),er.writeInt32LE(this._e,16),er};function Ct(er,tr){return er<<tr|er>>>32-tr}function qt(er,tr,sr,ar,hr,_r,dr,ur){return Ct(er+(tr^sr^ar)+_r+dr|0,ur)+hr|0}function Ot(er,tr,sr,ar,hr,_r,dr,ur){return Ct(er+(tr&sr|~tr&ar)+_r+dr|0,ur)+hr|0}function Lt(er,tr,sr,ar,hr,_r,dr,ur){return Ct(er+((tr|~sr)^ar)+_r+dr|0,ur)+hr|0}function Qt(er,tr,sr,ar,hr,_r,dr,ur){return Ct(er+(tr&ar|sr&~ar)+_r+dr|0,ur)+hr|0}function ir(er,tr,sr,ar,hr,_r,dr,ur){return Ct(er+(tr^(sr|~ar))+_r+dr|0,ur)+hr|0}return ripemd160$1=ct,ripemd160$1}var sha_js={exports:{}},hash$1,hasRequiredHash$1;function requireHash$1(){if(hasRequiredHash$1)return hash$1;hasRequiredHash$1=1;var s=requireSafeBuffer$1().Buffer;function e(o,a){this._block=s.alloc(o),this._finalSize=a,this._blockSize=o,this._len=0}return e.prototype.update=function(o,a){typeof o=="string"&&(a=a||"utf8",o=s.from(o,a));for(var d=this._block,c=this._blockSize,j=o.length,_e=this._len,pt=0;pt<j;){for(var yt=_e%c,ct=Math.min(j-pt,c-yt),Ct=0;Ct<ct;Ct++)d[yt+Ct]=o[pt+Ct];_e+=ct,pt+=ct,_e%c===0&&this._update(d)}return this._len+=j,this},e.prototype.digest=function(o){var a=this._len%this._blockSize;this._block[a]=128,this._block.fill(0,a+1),a>=this._finalSize&&(this._update(this._block),this._block.fill(0));var d=this._len*8;if(d<=4294967295)this._block.writeUInt32BE(d,this._blockSize-4);else{var c=(d&4294967295)>>>0,j=(d-c)/4294967296;this._block.writeUInt32BE(j,this._blockSize-8),this._block.writeUInt32BE(c,this._blockSize-4)}this._update(this._block);var _e=this._hash();return o?_e.toString(o):_e},e.prototype._update=function(){throw new Error("_update must be implemented by subclass")},hash$1=e,hash$1}var sha$1,hasRequiredSha$1;function requireSha$1(){if(hasRequiredSha$1)return sha$1;hasRequiredSha$1=1;var s=requireInherits_browser(),e=requireHash$1(),o=requireSafeBuffer$1().Buffer,a=[1518500249,1859775393,-1894007588,-899497514],d=new Array(80);function c(){this.init(),this._w=d,e.call(this,64,56)}s(c,e),c.prototype.init=function(){return this._a=1732584193,this._b=4023233417,this._c=2562383102,this._d=271733878,this._e=3285377520,this};function j(yt){return yt<<5|yt>>>27}function _e(yt){return yt<<30|yt>>>2}function pt(yt,ct,Ct,qt){return yt===0?ct&Ct|~ct&qt:yt===2?ct&Ct|ct&qt|Ct&qt:ct^Ct^qt}return c.prototype._update=function(yt){for(var ct=this._w,Ct=this._a|0,qt=this._b|0,Ot=this._c|0,Lt=this._d|0,Qt=this._e|0,ir=0;ir<16;++ir)ct[ir]=yt.readInt32BE(ir*4);for(;ir<80;++ir)ct[ir]=ct[ir-3]^ct[ir-8]^ct[ir-14]^ct[ir-16];for(var er=0;er<80;++er){var tr=~~(er/20),sr=j(Ct)+pt(tr,qt,Ot,Lt)+Qt+ct[er]+a[tr]|0;Qt=Lt,Lt=Ot,Ot=_e(qt),qt=Ct,Ct=sr}this._a=Ct+this._a|0,this._b=qt+this._b|0,this._c=Ot+this._c|0,this._d=Lt+this._d|0,this._e=Qt+this._e|0},c.prototype._hash=function(){var yt=o.allocUnsafe(20);return yt.writeInt32BE(this._a|0,0),yt.writeInt32BE(this._b|0,4),yt.writeInt32BE(this._c|0,8),yt.writeInt32BE(this._d|0,12),yt.writeInt32BE(this._e|0,16),yt},sha$1=c,sha$1}var sha1$1,hasRequiredSha1$1;function requireSha1$1(){if(hasRequiredSha1$1)return sha1$1;hasRequiredSha1$1=1;var s=requireInherits_browser(),e=requireHash$1(),o=requireSafeBuffer$1().Buffer,a=[1518500249,1859775393,-1894007588,-899497514],d=new Array(80);function c(){this.init(),this._w=d,e.call(this,64,56)}s(c,e),c.prototype.init=function(){return this._a=1732584193,this._b=4023233417,this._c=2562383102,this._d=271733878,this._e=3285377520,this};function j(ct){return ct<<1|ct>>>31}function _e(ct){return ct<<5|ct>>>27}function pt(ct){return ct<<30|ct>>>2}function yt(ct,Ct,qt,Ot){return ct===0?Ct&qt|~Ct&Ot:ct===2?Ct&qt|Ct&Ot|qt&Ot:Ct^qt^Ot}return c.prototype._update=function(ct){for(var Ct=this._w,qt=this._a|0,Ot=this._b|0,Lt=this._c|0,Qt=this._d|0,ir=this._e|0,er=0;er<16;++er)Ct[er]=ct.readInt32BE(er*4);for(;er<80;++er)Ct[er]=j(Ct[er-3]^Ct[er-8]^Ct[er-14]^Ct[er-16]);for(var tr=0;tr<80;++tr){var sr=~~(tr/20),ar=_e(qt)+yt(sr,Ot,Lt,Qt)+ir+Ct[tr]+a[sr]|0;ir=Qt,Qt=Lt,Lt=pt(Ot),Ot=qt,qt=ar}this._a=qt+this._a|0,this._b=Ot+this._b|0,this._c=Lt+this._c|0,this._d=Qt+this._d|0,this._e=ir+this._e|0},c.prototype._hash=function(){var ct=o.allocUnsafe(20);return ct.writeInt32BE(this._a|0,0),ct.writeInt32BE(this._b|0,4),ct.writeInt32BE(this._c|0,8),ct.writeInt32BE(this._d|0,12),ct.writeInt32BE(this._e|0,16),ct},sha1$1=c,sha1$1}var sha256$2,hasRequiredSha256$1;function requireSha256$1(){if(hasRequiredSha256$1)return sha256$2;hasRequiredSha256$1=1;var s=requireInherits_browser(),e=requireHash$1(),o=requireSafeBuffer$1().Buffer,a=[1116352408,1899447441,3049323471,3921009573,961987163,1508970993,2453635748,2870763221,3624381080,310598401,607225278,1426881987,1925078388,2162078206,2614888103,3248222580,3835390401,4022224774,264347078,604807628,770255983,1249150122,1555081692,1996064986,2554220882,2821834349,2952996808,3210313671,3336571891,3584528711,113926993,338241895,666307205,773529912,1294757372,1396182291,1695183700,1986661051,2177026350,2456956037,2730485921,2820302411,3259730800,3345764771,3516065817,3600352804,4094571909,275423344,430227734,506948616,659060556,883997877,958139571,1322822218,1537002063,1747873779,1955562222,2024104815,2227730452,2361852424,2428436474,2756734187,3204031479,3329325298],d=new Array(64);function c(){this.init(),this._w=d,e.call(this,64,56)}s(c,e),c.prototype.init=function(){return this._a=1779033703,this._b=3144134277,this._c=1013904242,this._d=2773480762,this._e=1359893119,this._f=2600822924,this._g=528734635,this._h=1541459225,this};function j(qt,Ot,Lt){return Lt^qt&(Ot^Lt)}function _e(qt,Ot,Lt){return qt&Ot|Lt&(qt|Ot)}function pt(qt){return(qt>>>2|qt<<30)^(qt>>>13|qt<<19)^(qt>>>22|qt<<10)}function yt(qt){return(qt>>>6|qt<<26)^(qt>>>11|qt<<21)^(qt>>>25|qt<<7)}function ct(qt){return(qt>>>7|qt<<25)^(qt>>>18|qt<<14)^qt>>>3}function Ct(qt){return(qt>>>17|qt<<15)^(qt>>>19|qt<<13)^qt>>>10}return c.prototype._update=function(qt){for(var Ot=this._w,Lt=this._a|0,Qt=this._b|0,ir=this._c|0,er=this._d|0,tr=this._e|0,sr=this._f|0,ar=this._g|0,hr=this._h|0,_r=0;_r<16;++_r)Ot[_r]=qt.readInt32BE(_r*4);for(;_r<64;++_r)Ot[_r]=Ct(Ot[_r-2])+Ot[_r-7]+ct(Ot[_r-15])+Ot[_r-16]|0;for(var dr=0;dr<64;++dr){var ur=hr+yt(tr)+j(tr,sr,ar)+a[dr]+Ot[dr]|0,lr=pt(Lt)+_e(Lt,Qt,ir)|0;hr=ar,ar=sr,sr=tr,tr=er+ur|0,er=ir,ir=Qt,Qt=Lt,Lt=ur+lr|0}this._a=Lt+this._a|0,this._b=Qt+this._b|0,this._c=ir+this._c|0,this._d=er+this._d|0,this._e=tr+this._e|0,this._f=sr+this._f|0,this._g=ar+this._g|0,this._h=hr+this._h|0},c.prototype._hash=function(){var qt=o.allocUnsafe(32);return qt.writeInt32BE(this._a,0),qt.writeInt32BE(this._b,4),qt.writeInt32BE(this._c,8),qt.writeInt32BE(this._d,12),qt.writeInt32BE(this._e,16),qt.writeInt32BE(this._f,20),qt.writeInt32BE(this._g,24),qt.writeInt32BE(this._h,28),qt},sha256$2=c,sha256$2}var sha224$2,hasRequiredSha224$1;function requireSha224$1(){if(hasRequiredSha224$1)return sha224$2;hasRequiredSha224$1=1;var s=requireInherits_browser(),e=requireSha256$1(),o=requireHash$1(),a=requireSafeBuffer$1().Buffer,d=new Array(64);function c(){this.init(),this._w=d,o.call(this,64,56)}return s(c,e),c.prototype.init=function(){return this._a=3238371032,this._b=914150663,this._c=812702999,this._d=4144912697,this._e=4290775857,this._f=1750603025,this._g=1694076839,this._h=3204075428,this},c.prototype._hash=function(){var j=a.allocUnsafe(28);return j.writeInt32BE(this._a,0),j.writeInt32BE(this._b,4),j.writeInt32BE(this._c,8),j.writeInt32BE(this._d,12),j.writeInt32BE(this._e,16),j.writeInt32BE(this._f,20),j.writeInt32BE(this._g,24),j},sha224$2=c,sha224$2}var sha512$2,hasRequiredSha512$1;function requireSha512$1(){if(hasRequiredSha512$1)return sha512$2;hasRequiredSha512$1=1;var s=requireInherits_browser(),e=requireHash$1(),o=requireSafeBuffer$1().Buffer,a=[1116352408,3609767458,1899447441,602891725,3049323471,3964484399,3921009573,2173295548,961987163,4081628472,1508970993,3053834265,2453635748,2937671579,2870763221,3664609560,3624381080,2734883394,310598401,1164996542,607225278,1323610764,1426881987,3590304994,1925078388,4068182383,2162078206,991336113,2614888103,633803317,3248222580,3479774868,3835390401,2666613458,4022224774,944711139,264347078,2341262773,604807628,2007800933,770255983,1495990901,1249150122,1856431235,1555081692,3175218132,1996064986,2198950837,2554220882,3999719339,2821834349,766784016,2952996808,2566594879,3210313671,3203337956,3336571891,1034457026,3584528711,2466948901,113926993,3758326383,338241895,168717936,666307205,1188179964,773529912,1546045734,1294757372,1522805485,1396182291,2643833823,1695183700,2343527390,1986661051,1014477480,2177026350,1206759142,2456956037,344077627,2730485921,1290863460,2820302411,3158454273,3259730800,3505952657,3345764771,106217008,3516065817,3606008344,3600352804,1432725776,4094571909,1467031594,275423344,851169720,430227734,3100823752,506948616,1363258195,659060556,3750685593,883997877,3785050280,958139571,3318307427,1322822218,3812723403,1537002063,2003034995,1747873779,3602036899,1955562222,1575990012,2024104815,1125592928,2227730452,2716904306,2361852424,442776044,2428436474,593698344,2756734187,3733110249,3204031479,2999351573,3329325298,3815920427,3391569614,3928383900,3515267271,566280711,3940187606,3454069534,4118630271,4000239992,116418474,1914138554,174292421,2731055270,289380356,3203993006,460393269,320620315,685471733,587496836,852142971,1086792851,1017036298,365543100,1126000580,2618297676,1288033470,3409855158,1501505948,4234509866,1607167915,987167468,1816402316,1246189591],d=new Array(160);function c(){this.init(),this._w=d,e.call(this,128,112)}s(c,e),c.prototype.init=function(){return this._ah=1779033703,this._bh=3144134277,this._ch=1013904242,this._dh=2773480762,this._eh=1359893119,this._fh=2600822924,this._gh=528734635,this._hh=1541459225,this._al=4089235720,this._bl=2227873595,this._cl=4271175723,this._dl=1595750129,this._el=2917565137,this._fl=725511199,this._gl=4215389547,this._hl=327033209,this};function j(Qt,ir,er){return er^Qt&(ir^er)}function _e(Qt,ir,er){return Qt&ir|er&(Qt|ir)}function pt(Qt,ir){return(Qt>>>28|ir<<4)^(ir>>>2|Qt<<30)^(ir>>>7|Qt<<25)}function yt(Qt,ir){return(Qt>>>14|ir<<18)^(Qt>>>18|ir<<14)^(ir>>>9|Qt<<23)}function ct(Qt,ir){return(Qt>>>1|ir<<31)^(Qt>>>8|ir<<24)^Qt>>>7}function Ct(Qt,ir){return(Qt>>>1|ir<<31)^(Qt>>>8|ir<<24)^(Qt>>>7|ir<<25)}function qt(Qt,ir){return(Qt>>>19|ir<<13)^(ir>>>29|Qt<<3)^Qt>>>6}function Ot(Qt,ir){return(Qt>>>19|ir<<13)^(ir>>>29|Qt<<3)^(Qt>>>6|ir<<26)}function Lt(Qt,ir){return Qt>>>0<ir>>>0?1:0}return c.prototype._update=function(Qt){for(var ir=this._w,er=this._ah|0,tr=this._bh|0,sr=this._ch|0,ar=this._dh|0,hr=this._eh|0,_r=this._fh|0,dr=this._gh|0,ur=this._hh|0,lr=this._al|0,gr=this._bl|0,Mt=this._cl|0,h=this._dl|0,_=this._el|0,b=this._fl|0,lt=this._gl|0,Rt=this._hl|0,kt=0;kt<32;kt+=2)ir[kt]=Qt.readInt32BE(kt*4),ir[kt+1]=Qt.readInt32BE(kt*4+4);for(;kt<160;kt+=2){var Ft=ir[kt-30],xt=ir[kt-15*2+1],g=ct(Ft,xt),wt=Ct(xt,Ft);Ft=ir[kt-2*2],xt=ir[kt-2*2+1];var nr=qt(Ft,xt),or=Ot(xt,Ft),cr=ir[kt-7*2],Rr=ir[kt-7*2+1],Ar=ir[kt-16*2],pr=ir[kt-16*2+1],wr=wt+Rr|0,Tr=g+cr+Lt(wr,wt)|0;wr=wr+or|0,Tr=Tr+nr+Lt(wr,or)|0,wr=wr+pr|0,Tr=Tr+Ar+Lt(wr,pr)|0,ir[kt]=Tr,ir[kt+1]=wr}for(var Ir=0;Ir<160;Ir+=2){Tr=ir[Ir],wr=ir[Ir+1];var Sr=_e(er,tr,sr),br=_e(lr,gr,Mt),kr=pt(er,lr),Qr=pt(lr,er),qr=yt(hr,_),$r=yt(_,hr),gn=a[Ir],Lr=a[Ir+1],Dr=j(hr,_r,dr),En=j(_,b,lt),Fr=Rt+$r|0,zr=ur+qr+Lt(Fr,Rt)|0;Fr=Fr+En|0,zr=zr+Dr+Lt(Fr,En)|0,Fr=Fr+Lr|0,zr=zr+gn+Lt(Fr,Lr)|0,Fr=Fr+wr|0,zr=zr+Tr+Lt(Fr,wr)|0;var yn=Qr+br|0,Nr=kr+Sr+Lt(yn,Qr)|0;ur=dr,Rt=lt,dr=_r,lt=b,_r=hr,b=_,_=h+Fr|0,hr=ar+zr+Lt(_,h)|0,ar=sr,h=Mt,sr=tr,Mt=gr,tr=er,gr=lr,lr=Fr+yn|0,er=zr+Nr+Lt(lr,Fr)|0}this._al=this._al+lr|0,this._bl=this._bl+gr|0,this._cl=this._cl+Mt|0,this._dl=this._dl+h|0,this._el=this._el+_|0,this._fl=this._fl+b|0,this._gl=this._gl+lt|0,this._hl=this._hl+Rt|0,this._ah=this._ah+er+Lt(this._al,lr)|0,this._bh=this._bh+tr+Lt(this._bl,gr)|0,this._ch=this._ch+sr+Lt(this._cl,Mt)|0,this._dh=this._dh+ar+Lt(this._dl,h)|0,this._eh=this._eh+hr+Lt(this._el,_)|0,this._fh=this._fh+_r+Lt(this._fl,b)|0,this._gh=this._gh+dr+Lt(this._gl,lt)|0,this._hh=this._hh+ur+Lt(this._hl,Rt)|0},c.prototype._hash=function(){var Qt=o.allocUnsafe(64);function ir(er,tr,sr){Qt.writeInt32BE(er,sr),Qt.writeInt32BE(tr,sr+4)}return ir(this._ah,this._al,0),ir(this._bh,this._bl,8),ir(this._ch,this._cl,16),ir(this._dh,this._dl,24),ir(this._eh,this._el,32),ir(this._fh,this._fl,40),ir(this._gh,this._gl,48),ir(this._hh,this._hl,56),Qt},sha512$2=c,sha512$2}var sha384$2,hasRequiredSha384$1;function requireSha384$1(){if(hasRequiredSha384$1)return sha384$2;hasRequiredSha384$1=1;var s=requireInherits_browser(),e=requireSha512$1(),o=requireHash$1(),a=requireSafeBuffer$1().Buffer,d=new Array(160);function c(){this.init(),this._w=d,o.call(this,128,112)}return s(c,e),c.prototype.init=function(){return this._ah=3418070365,this._bh=1654270250,this._ch=2438529370,this._dh=355462360,this._eh=1731405415,this._fh=2394180231,this._gh=3675008525,this._hh=1203062813,this._al=3238371032,this._bl=914150663,this._cl=812702999,this._dl=4144912697,this._el=4290775857,this._fl=1750603025,this._gl=1694076839,this._hl=3204075428,this},c.prototype._hash=function(){var j=a.allocUnsafe(48);function _e(pt,yt,ct){j.writeInt32BE(pt,ct),j.writeInt32BE(yt,ct+4)}return _e(this._ah,this._al,0),_e(this._bh,this._bl,8),_e(this._ch,this._cl,16),_e(this._dh,this._dl,24),_e(this._eh,this._el,32),_e(this._fh,this._fl,40),j},sha384$2=c,sha384$2}var hasRequiredSha_js;function requireSha_js(){if(hasRequiredSha_js)return sha_js.exports;hasRequiredSha_js=1;var s=sha_js.exports=function(o){o=o.toLowerCase();var a=s[o];if(!a)throw new Error(o+" is not supported (we accept pull requests)");return new a};return s.sha=requireSha$1(),s.sha1=requireSha1$1(),s.sha224=requireSha224$1(),s.sha256=requireSha256$1(),s.sha384=requireSha384$1(),s.sha512=requireSha512$1(),sha_js.exports}var cipherBase,hasRequiredCipherBase;function requireCipherBase(){if(hasRequiredCipherBase)return cipherBase;hasRequiredCipherBase=1;var s=requireSafeBuffer$1().Buffer,e=requireStreamBrowserify().Transform,o=requireString_decoder().StringDecoder,a=requireInherits_browser();function d(pt){e.call(this),this.hashMode=typeof pt=="string",this.hashMode?this[pt]=this._finalOrDigest:this.final=this._finalOrDigest,this._final&&(this.__final=this._final,this._final=null),this._decoder=null,this._encoding=null}a(d,e);var c=typeof Uint8Array<"u",j=typeof ArrayBuffer<"u"&&typeof Uint8Array<"u"&&ArrayBuffer.isView&&(s.prototype instanceof Uint8Array||s.TYPED_ARRAY_SUPPORT);function _e(pt,yt){if(pt instanceof s)return pt;if(typeof pt=="string")return s.from(pt,yt);if(j&&ArrayBuffer.isView(pt)){if(pt.byteLength===0)return s.alloc(0);var ct=s.from(pt.buffer,pt.byteOffset,pt.byteLength);if(ct.byteLength===pt.byteLength)return ct}if(c&&pt instanceof Uint8Array||s.isBuffer(pt)&&pt.constructor&&typeof pt.constructor.isBuffer=="function"&&pt.constructor.isBuffer(pt))return s.from(pt);throw new TypeError('The "data" argument must be of type string or an instance of Buffer, TypedArray, or DataView.')}return d.prototype.update=function(pt,yt,ct){var Ct=_e(pt,yt),qt=this._update(Ct);return this.hashMode?this:(ct&&(qt=this._toString(qt,ct)),qt)},d.prototype.setAutoPadding=function(){},d.prototype.getAuthTag=function(){throw new Error("trying to get auth tag in unsupported state")},d.prototype.setAuthTag=function(){throw new Error("trying to set auth tag in unsupported state")},d.prototype.setAAD=function(){throw new Error("trying to set aad in unsupported state")},d.prototype._transform=function(pt,yt,ct){var Ct;try{this.hashMode?this._update(pt):this.push(this._update(pt))}catch(qt){Ct=qt}finally{ct(Ct)}},d.prototype._flush=function(pt){var yt;try{this.push(this.__final())}catch(ct){yt=ct}pt(yt)},d.prototype._finalOrDigest=function(pt){var yt=this.__final()||s.alloc(0);return pt&&(yt=this._toString(yt,pt,!0)),yt},d.prototype._toString=function(pt,yt,ct){if(this._decoder||(this._decoder=new o(yt),this._encoding=yt),this._encoding!==yt)throw new Error("cant switch encodings");var Ct=this._decoder.write(pt);return ct&&(Ct+=this._decoder.end()),Ct},cipherBase=d,cipherBase}var browser$a,hasRequiredBrowser$9;function requireBrowser$9(){if(hasRequiredBrowser$9)return browser$a;hasRequiredBrowser$9=1;var s=requireInherits_browser(),e=requireMd5_js(),o=requireRipemd160$1(),a=requireSha_js(),d=requireCipherBase();function c(j){d.call(this,"digest"),this._hash=j}return s(c,d),c.prototype._update=function(j){this._hash.update(j)},c.prototype._final=function(){return this._hash.digest()},browser$a=function(_e){return _e=_e.toLowerCase(),_e==="md5"?new e:_e==="rmd160"||_e==="ripemd160"?new o:new c(a(_e))},browser$a}var legacy,hasRequiredLegacy;function requireLegacy(){if(hasRequiredLegacy)return legacy;hasRequiredLegacy=1;var s=requireInherits_browser(),e=requireSafeBuffer$1().Buffer,o=requireCipherBase(),a=e.alloc(128),d=64;function c(j,_e){o.call(this,"digest"),typeof _e=="string"&&(_e=e.from(_e)),this._alg=j,this._key=_e,_e.length>d?_e=j(_e):_e.length<d&&(_e=e.concat([_e,a],d));for(var pt=this._ipad=e.allocUnsafe(d),yt=this._opad=e.allocUnsafe(d),ct=0;ct<d;ct++)pt[ct]=_e[ct]^54,yt[ct]=_e[ct]^92;this._hash=[pt]}return s(c,o),c.prototype._update=function(j){this._hash.push(j)},c.prototype._final=function(){var j=this._alg(e.concat(this._hash));return this._alg(e.concat([this._opad,j]))},legacy=c,legacy}var md5$1,hasRequiredMd5$1;function requireMd5$1(){if(hasRequiredMd5$1)return md5$1;hasRequiredMd5$1=1;var s=requireMd5_js();return md5$1=function(e){return new s().update(e).digest()},md5$1}var browser$9,hasRequiredBrowser$8;function requireBrowser$8(){if(hasRequiredBrowser$8)return browser$9;hasRequiredBrowser$8=1;var s=requireInherits_browser(),e=requireLegacy(),o=requireCipherBase(),a=requireSafeBuffer$1().Buffer,d=requireMd5$1(),c=requireRipemd160$1(),j=requireSha_js(),_e=a.alloc(128);function pt(yt,ct){o.call(this,"digest"),typeof ct=="string"&&(ct=a.from(ct));var Ct=yt==="sha512"||yt==="sha384"?128:64;if(this._alg=yt,this._key=ct,ct.length>Ct){var qt=yt==="rmd160"?new c:j(yt);ct=qt.update(ct).digest()}else ct.length<Ct&&(ct=a.concat([ct,_e],Ct));for(var Ot=this._ipad=a.allocUnsafe(Ct),Lt=this._opad=a.allocUnsafe(Ct),Qt=0;Qt<Ct;Qt++)Ot[Qt]=ct[Qt]^54,Lt[Qt]=ct[Qt]^92;this._hash=yt==="rmd160"?new c:j(yt),this._hash.update(Ot)}return s(pt,o),pt.prototype._update=function(yt){this._hash.update(yt)},pt.prototype._final=function(){var yt=this._hash.digest(),ct=this._alg==="rmd160"?new c:j(this._alg);return ct.update(this._opad).update(yt).digest()},browser$9=function(ct,Ct){return ct=ct.toLowerCase(),ct==="rmd160"||ct==="ripemd160"?new pt("rmd160",Ct):ct==="md5"?new e(d,Ct):new pt(ct,Ct)},browser$9}const sha224WithRSAEncryption={sign:"rsa",hash:"sha224",id:"302d300d06096086480165030402040500041c"},sha256WithRSAEncryption={sign:"rsa",hash:"sha256",id:"3031300d060960864801650304020105000420"},sha384WithRSAEncryption={sign:"rsa",hash:"sha384",id:"3041300d060960864801650304020205000430"},sha512WithRSAEncryption={sign:"rsa",hash:"sha512",id:"3051300d060960864801650304020305000440"},sha256$1={sign:"ecdsa",hash:"sha256",id:""},sha224$1={sign:"ecdsa",hash:"sha224",id:""},sha384$1={sign:"ecdsa",hash:"sha384",id:""},sha512$1={sign:"ecdsa",hash:"sha512",id:""},DSA={sign:"dsa",hash:"sha1",id:""},ripemd160WithRSA={sign:"rsa",hash:"rmd160",id:"3021300906052b2403020105000414"},md5WithRSAEncryption={sign:"rsa",hash:"md5",id:"3020300c06082a864886f70d020505000410"},require$$6={sha224WithRSAEncryption,"RSA-SHA224":{sign:"ecdsa/rsa",hash:"sha224",id:"302d300d06096086480165030402040500041c"},sha256WithRSAEncryption,"RSA-SHA256":{sign:"ecdsa/rsa",hash:"sha256",id:"3031300d060960864801650304020105000420"},sha384WithRSAEncryption,"RSA-SHA384":{sign:"ecdsa/rsa",hash:"sha384",id:"3041300d060960864801650304020205000430"},sha512WithRSAEncryption,"RSA-SHA512":{sign:"ecdsa/rsa",hash:"sha512",id:"3051300d060960864801650304020305000440"},"RSA-SHA1":{sign:"rsa",hash:"sha1",id:"3021300906052b0e03021a05000414"},"ecdsa-with-SHA1":{sign:"ecdsa",hash:"sha1",id:""},sha256:sha256$1,sha224:sha224$1,sha384:sha384$1,sha512:sha512$1,"DSA-SHA":{sign:"dsa",hash:"sha1",id:""},"DSA-SHA1":{sign:"dsa",hash:"sha1",id:""},DSA,"DSA-WITH-SHA224":{sign:"dsa",hash:"sha224",id:""},"DSA-SHA224":{sign:"dsa",hash:"sha224",id:""},"DSA-WITH-SHA256":{sign:"dsa",hash:"sha256",id:""},"DSA-SHA256":{sign:"dsa",hash:"sha256",id:""},"DSA-WITH-SHA384":{sign:"dsa",hash:"sha384",id:""},"DSA-SHA384":{sign:"dsa",hash:"sha384",id:""},"DSA-WITH-SHA512":{sign:"dsa",hash:"sha512",id:""},"DSA-SHA512":{sign:"dsa",hash:"sha512",id:""},"DSA-RIPEMD160":{sign:"dsa",hash:"rmd160",id:""},ripemd160WithRSA,"RSA-RIPEMD160":{sign:"rsa",hash:"rmd160",id:"3021300906052b2403020105000414"},md5WithRSAEncryption,"RSA-MD5":{sign:"rsa",hash:"md5",id:"3020300c06082a864886f70d020505000410"}};var algos,hasRequiredAlgos;function requireAlgos(){return hasRequiredAlgos||(hasRequiredAlgos=1,algos=require$$6),algos}var browser$8={},precondition,hasRequiredPrecondition;function requirePrecondition(){if(hasRequiredPrecondition)return precondition;hasRequiredPrecondition=1;var s=Math.pow(2,30)-1;return precondition=function(e,o){if(typeof e!="number")throw new TypeError("Iterations not a number");if(e<0)throw new TypeError("Bad iterations");if(typeof o!="number")throw new TypeError("Key length not a number");if(o<0||o>s||o!==o)throw new TypeError("Bad key length")},precondition}var defaultEncoding_1,hasRequiredDefaultEncoding;function requireDefaultEncoding(){if(hasRequiredDefaultEncoding)return defaultEncoding_1;hasRequiredDefaultEncoding=1;var s;if(commonjsGlobal$2.process&&commonjsGlobal$2.process.browser)s="utf-8";else if(commonjsGlobal$2.process&&commonjsGlobal$2.process.version){var e=parseInt(process$1.version.split(".")[0].slice(1),10);s=e>=6?"utf-8":"binary"}else s="utf-8";return defaultEncoding_1=s,defaultEncoding_1}var toBuffer,hasRequiredToBuffer;function requireToBuffer(){if(hasRequiredToBuffer)return toBuffer;hasRequiredToBuffer=1;var s=requireSafeBuffer$1().Buffer;return toBuffer=function(e,o,a){if(s.isBuffer(e))return e;if(typeof e=="string")return s.from(e,o);if(ArrayBuffer.isView(e))return s.from(e.buffer);throw new TypeError(a+" must be a string, a Buffer, a typed array or a DataView")},toBuffer}var syncBrowser,hasRequiredSyncBrowser;function requireSyncBrowser(){if(hasRequiredSyncBrowser)return syncBrowser;hasRequiredSyncBrowser=1;var s=requireMd5$1(),e=requireRipemd160$1(),o=requireSha_js(),a=requireSafeBuffer$1().Buffer,d=requirePrecondition(),c=requireDefaultEncoding(),j=requireToBuffer(),_e=a.alloc(128),pt={md5:16,sha1:20,sha224:28,sha256:32,sha384:48,sha512:64,rmd160:20,ripemd160:20};function yt(qt,Ot,Lt){var Qt=ct(qt),ir=qt==="sha512"||qt==="sha384"?128:64;Ot.length>ir?Ot=Qt(Ot):Ot.length<ir&&(Ot=a.concat([Ot,_e],ir));for(var er=a.allocUnsafe(ir+pt[qt]),tr=a.allocUnsafe(ir+pt[qt]),sr=0;sr<ir;sr++)er[sr]=Ot[sr]^54,tr[sr]=Ot[sr]^92;var ar=a.allocUnsafe(ir+Lt+4);er.copy(ar,0,0,ir),this.ipad1=ar,this.ipad2=er,this.opad=tr,this.alg=qt,this.blocksize=ir,this.hash=Qt,this.size=pt[qt]}yt.prototype.run=function(qt,Ot){qt.copy(Ot,this.blocksize);var Lt=this.hash(Ot);return Lt.copy(this.opad,this.blocksize),this.hash(this.opad)};function ct(qt){function Ot(Qt){return o(qt).update(Qt).digest()}function Lt(Qt){return new e().update(Qt).digest()}return qt==="rmd160"||qt==="ripemd160"?Lt:qt==="md5"?s:Ot}function Ct(qt,Ot,Lt,Qt,ir){d(Lt,Qt),qt=j(qt,c,"Password"),Ot=j(Ot,c,"Salt"),ir=ir||"sha1";var er=new yt(ir,qt,Ot.length),tr=a.allocUnsafe(Qt),sr=a.allocUnsafe(Ot.length+4);Ot.copy(sr,0,0,Ot.length);for(var ar=0,hr=pt[ir],_r=Math.ceil(Qt/hr),dr=1;dr<=_r;dr++){sr.writeUInt32BE(dr,Ot.length);for(var ur=er.run(sr,er.ipad1),lr=ur,gr=1;gr<Lt;gr++){lr=er.run(lr,er.ipad2);for(var Mt=0;Mt<hr;Mt++)ur[Mt]^=lr[Mt]}ur.copy(tr,ar),ar+=hr}return tr}return syncBrowser=Ct,syncBrowser}var async,hasRequiredAsync;function requireAsync(){if(hasRequiredAsync)return async;hasRequiredAsync=1;var s=requireSafeBuffer$1().Buffer,e=requirePrecondition(),o=requireDefaultEncoding(),a=requireSyncBrowser(),d=requireToBuffer(),c,j=commonjsGlobal$2.crypto&&commonjsGlobal$2.crypto.subtle,_e={sha:"SHA-1","sha-1":"SHA-1",sha1:"SHA-1",sha256:"SHA-256","sha-256":"SHA-256",sha384:"SHA-384","sha-384":"SHA-384","sha-512":"SHA-512",sha512:"SHA-512"},pt=[];function yt(Lt){if(commonjsGlobal$2.process&&!commonjsGlobal$2.process.browser||!j||!j.importKey||!j.deriveBits)return Promise.resolve(!1);if(pt[Lt]!==void 0)return pt[Lt];c=c||s.alloc(8);var Qt=qt(c,c,10,128,Lt).then(function(){return!0}).catch(function(){return!1});return pt[Lt]=Qt,Qt}var ct;function Ct(){return ct||(commonjsGlobal$2.process&&commonjsGlobal$2.process.nextTick?ct=commonjsGlobal$2.process.nextTick:commonjsGlobal$2.queueMicrotask?ct=commonjsGlobal$2.queueMicrotask:commonjsGlobal$2.setImmediate?ct=commonjsGlobal$2.setImmediate:ct=commonjsGlobal$2.setTimeout,ct)}function qt(Lt,Qt,ir,er,tr){return j.importKey("raw",Lt,{name:"PBKDF2"},!1,["deriveBits"]).then(function(sr){return j.deriveBits({name:"PBKDF2",salt:Qt,iterations:ir,hash:{name:tr}},sr,er<<3)}).then(function(sr){return s.from(sr)})}function Ot(Lt,Qt){Lt.then(function(ir){Ct()(function(){Qt(null,ir)})},function(ir){Ct()(function(){Qt(ir)})})}return async=function(Lt,Qt,ir,er,tr,sr){typeof tr=="function"&&(sr=tr,tr=void 0),tr=tr||"sha1";var ar=_e[tr.toLowerCase()];if(!ar||typeof commonjsGlobal$2.Promise!="function"){Ct()(function(){var hr;try{hr=a(Lt,Qt,ir,er,tr)}catch(_r){return sr(_r)}sr(null,hr)});return}if(e(ir,er),Lt=d(Lt,o,"Password"),Qt=d(Qt,o,"Salt"),typeof sr!="function")throw new Error("No callback provided to pbkdf2");Ot(yt(ar).then(function(hr){return hr?qt(Lt,Qt,ir,er,ar):a(Lt,Qt,ir,er,tr)}),sr)},async}var hasRequiredBrowser$7;function requireBrowser$7(){return hasRequiredBrowser$7||(hasRequiredBrowser$7=1,browser$8.pbkdf2=requireAsync(),browser$8.pbkdf2Sync=requireSyncBrowser()),browser$8}var browser$7={},des$1={},utils$3={},hasRequiredUtils$3;function requireUtils$3(){if(hasRequiredUtils$3)return utils$3;hasRequiredUtils$3=1,utils$3.readUInt32BE=function(d,c){var j=d[0+c]<<24|d[1+c]<<16|d[2+c]<<8|d[3+c];return j>>>0},utils$3.writeUInt32BE=function(d,c,j){d[0+j]=c>>>24,d[1+j]=c>>>16&255,d[2+j]=c>>>8&255,d[3+j]=c&255},utils$3.ip=function(d,c,j,_e){for(var pt=0,yt=0,ct=6;ct>=0;ct-=2){for(var Ct=0;Ct<=24;Ct+=8)pt<<=1,pt|=c>>>Ct+ct&1;for(var Ct=0;Ct<=24;Ct+=8)pt<<=1,pt|=d>>>Ct+ct&1}for(var ct=6;ct>=0;ct-=2){for(var Ct=1;Ct<=25;Ct+=8)yt<<=1,yt|=c>>>Ct+ct&1;for(var Ct=1;Ct<=25;Ct+=8)yt<<=1,yt|=d>>>Ct+ct&1}j[_e+0]=pt>>>0,j[_e+1]=yt>>>0},utils$3.rip=function(d,c,j,_e){for(var pt=0,yt=0,ct=0;ct<4;ct++)for(var Ct=24;Ct>=0;Ct-=8)pt<<=1,pt|=c>>>Ct+ct&1,pt<<=1,pt|=d>>>Ct+ct&1;for(var ct=4;ct<8;ct++)for(var Ct=24;Ct>=0;Ct-=8)yt<<=1,yt|=c>>>Ct+ct&1,yt<<=1,yt|=d>>>Ct+ct&1;j[_e+0]=pt>>>0,j[_e+1]=yt>>>0},utils$3.pc1=function(d,c,j,_e){for(var pt=0,yt=0,ct=7;ct>=5;ct--){for(var Ct=0;Ct<=24;Ct+=8)pt<<=1,pt|=c>>Ct+ct&1;for(var Ct=0;Ct<=24;Ct+=8)pt<<=1,pt|=d>>Ct+ct&1}for(var Ct=0;Ct<=24;Ct+=8)pt<<=1,pt|=c>>Ct+ct&1;for(var ct=1;ct<=3;ct++){for(var Ct=0;Ct<=24;Ct+=8)yt<<=1,yt|=c>>Ct+ct&1;for(var Ct=0;Ct<=24;Ct+=8)yt<<=1,yt|=d>>Ct+ct&1}for(var Ct=0;Ct<=24;Ct+=8)yt<<=1,yt|=d>>Ct+ct&1;j[_e+0]=pt>>>0,j[_e+1]=yt>>>0},utils$3.r28shl=function(d,c){return d<<c&268435455|d>>>28-c};var s=[14,11,17,4,27,23,25,0,13,22,7,18,5,9,16,24,2,20,12,21,1,8,15,26,15,4,25,19,9,1,26,16,5,11,23,8,12,7,17,0,22,3,10,14,6,20,27,24];utils$3.pc2=function(d,c,j,_e){for(var pt=0,yt=0,ct=s.length>>>1,Ct=0;Ct<ct;Ct++)pt<<=1,pt|=d>>>s[Ct]&1;for(var Ct=ct;Ct<s.length;Ct++)yt<<=1,yt|=c>>>s[Ct]&1;j[_e+0]=pt>>>0,j[_e+1]=yt>>>0},utils$3.expand=function(d,c,j){var _e=0,pt=0;_e=(d&1)<<5|d>>>27;for(var yt=23;yt>=15;yt-=4)_e<<=6,_e|=d>>>yt&63;for(var yt=11;yt>=3;yt-=4)pt|=d>>>yt&63,pt<<=6;pt|=(d&31)<<1|d>>>31,c[j+0]=_e>>>0,c[j+1]=pt>>>0};var e=[14,0,4,15,13,7,1,4,2,14,15,2,11,13,8,1,3,10,10,6,6,12,12,11,5,9,9,5,0,3,7,8,4,15,1,12,14,8,8,2,13,4,6,9,2,1,11,7,15,5,12,11,9,3,7,14,3,10,10,0,5,6,0,13,15,3,1,13,8,4,14,7,6,15,11,2,3,8,4,14,9,12,7,0,2,1,13,10,12,6,0,9,5,11,10,5,0,13,14,8,7,10,11,1,10,3,4,15,13,4,1,2,5,11,8,6,12,7,6,12,9,0,3,5,2,14,15,9,10,13,0,7,9,0,14,9,6,3,3,4,15,6,5,10,1,2,13,8,12,5,7,14,11,12,4,11,2,15,8,1,13,1,6,10,4,13,9,0,8,6,15,9,3,8,0,7,11,4,1,15,2,14,12,3,5,11,10,5,14,2,7,12,7,13,13,8,14,11,3,5,0,6,6,15,9,0,10,3,1,4,2,7,8,2,5,12,11,1,12,10,4,14,15,9,10,3,6,15,9,0,0,6,12,10,11,1,7,13,13,8,15,9,1,4,3,5,14,11,5,12,2,7,8,2,4,14,2,14,12,11,4,2,1,12,7,4,10,7,11,13,6,1,8,5,5,0,3,15,15,10,13,3,0,9,14,8,9,6,4,11,2,8,1,12,11,7,10,1,13,14,7,2,8,13,15,6,9,15,12,0,5,9,6,10,3,4,0,5,14,3,12,10,1,15,10,4,15,2,9,7,2,12,6,9,8,5,0,6,13,1,3,13,4,14,14,0,7,11,5,3,11,8,9,4,14,3,15,2,5,12,2,9,8,5,12,15,3,10,7,11,0,14,4,1,10,7,1,6,13,0,11,8,6,13,4,13,11,0,2,11,14,7,15,4,0,9,8,1,13,10,3,14,12,3,9,5,7,12,5,2,10,15,6,8,1,6,1,6,4,11,11,13,13,8,12,1,3,4,7,10,14,7,10,9,15,5,6,0,8,15,0,14,5,2,9,3,2,12,13,1,2,15,8,13,4,8,6,10,15,3,11,7,1,4,10,12,9,5,3,6,14,11,5,0,0,14,12,9,7,2,7,2,11,1,4,14,1,7,9,4,12,10,14,8,2,13,0,15,6,12,10,9,13,0,15,3,3,5,5,6,8,11];utils$3.substitute=function(d,c){for(var j=0,_e=0;_e<4;_e++){var pt=d>>>18-_e*6&63,yt=e[_e*64+pt];j<<=4,j|=yt}for(var _e=0;_e<4;_e++){var pt=c>>>18-_e*6&63,yt=e[4*64+_e*64+pt];j<<=4,j|=yt}return j>>>0};var o=[16,25,12,11,3,20,4,15,31,17,9,6,27,14,1,22,30,24,8,18,0,5,29,23,13,19,2,26,10,21,28,7];return utils$3.permute=function(d){for(var c=0,j=0;j<o.length;j++)c<<=1,c|=d>>>o[j]&1;return c>>>0},utils$3.padSplit=function(d,c,j){for(var _e=d.toString(2);_e.length<c;)_e="0"+_e;for(var pt=[],yt=0;yt<c;yt+=j)pt.push(_e.slice(yt,yt+j));return pt.join(" ")},utils$3}var minimalisticAssert,hasRequiredMinimalisticAssert;function requireMinimalisticAssert(){if(hasRequiredMinimalisticAssert)return minimalisticAssert;hasRequiredMinimalisticAssert=1,minimalisticAssert=s;function s(e,o){if(!e)throw new Error(o||"Assertion failed")}return s.equal=function(o,a,d){if(o!=a)throw new Error(d||"Assertion failed: "+o+" != "+a)},minimalisticAssert}var cipher,hasRequiredCipher;function requireCipher(){if(hasRequiredCipher)return cipher;hasRequiredCipher=1;var s=requireMinimalisticAssert();function e(o){this.options=o,this.type=this.options.type,this.blockSize=8,this._init(),this.buffer=new Array(this.blockSize),this.bufferOff=0,this.padding=o.padding!==!1}return cipher=e,e.prototype._init=function(){},e.prototype.update=function(a){return a.length===0?[]:this.type==="decrypt"?this._updateDecrypt(a):this._updateEncrypt(a)},e.prototype._buffer=function(a,d){for(var c=Math.min(this.buffer.length-this.bufferOff,a.length-d),j=0;j<c;j++)this.buffer[this.bufferOff+j]=a[d+j];return this.bufferOff+=c,c},e.prototype._flushBuffer=function(a,d){return this._update(this.buffer,0,a,d),this.bufferOff=0,this.blockSize},e.prototype._updateEncrypt=function(a){var d=0,c=0,j=(this.bufferOff+a.length)/this.blockSize|0,_e=new Array(j*this.blockSize);this.bufferOff!==0&&(d+=this._buffer(a,d),this.bufferOff===this.buffer.length&&(c+=this._flushBuffer(_e,c)));for(var pt=a.length-(a.length-d)%this.blockSize;d<pt;d+=this.blockSize)this._update(a,d,_e,c),c+=this.blockSize;for(;d<a.length;d++,this.bufferOff++)this.buffer[this.bufferOff]=a[d];return _e},e.prototype._updateDecrypt=function(a){for(var d=0,c=0,j=Math.ceil((this.bufferOff+a.length)/this.blockSize)-1,_e=new Array(j*this.blockSize);j>0;j--)d+=this._buffer(a,d),c+=this._flushBuffer(_e,c);return d+=this._buffer(a,d),_e},e.prototype.final=function(a){var d;a&&(d=this.update(a));var c;return this.type==="encrypt"?c=this._finalEncrypt():c=this._finalDecrypt(),d?d.concat(c):c},e.prototype._pad=function(a,d){if(d===0)return!1;for(;d<a.length;)a[d++]=0;return!0},e.prototype._finalEncrypt=function(){if(!this._pad(this.buffer,this.bufferOff))return[];var a=new Array(this.blockSize);return this._update(this.buffer,0,a,0),a},e.prototype._unpad=function(a){return a},e.prototype._finalDecrypt=function(){s.equal(this.bufferOff,this.blockSize,"Not enough data to decrypt");var a=new Array(this.blockSize);return this._flushBuffer(a,0),this._unpad(a)},cipher}var des,hasRequiredDes$1;function requireDes$1(){if(hasRequiredDes$1)return des;hasRequiredDes$1=1;var s=requireMinimalisticAssert(),e=requireInherits_browser(),o=requireUtils$3(),a=requireCipher();function d(){this.tmp=new Array(2),this.keys=null}function c(_e){a.call(this,_e);var pt=new d;this._desState=pt,this.deriveKeys(pt,_e.key)}e(c,a),des=c,c.create=function(pt){return new c(pt)};var j=[1,1,2,2,2,2,2,2,1,2,2,2,2,2,2,1];return c.prototype.deriveKeys=function(pt,yt){pt.keys=new Array(16*2),s.equal(yt.length,this.blockSize,"Invalid key length");var ct=o.readUInt32BE(yt,0),Ct=o.readUInt32BE(yt,4);o.pc1(ct,Ct,pt.tmp,0),ct=pt.tmp[0],Ct=pt.tmp[1];for(var qt=0;qt<pt.keys.length;qt+=2){var Ot=j[qt>>>1];ct=o.r28shl(ct,Ot),Ct=o.r28shl(Ct,Ot),o.pc2(ct,Ct,pt.keys,qt)}},c.prototype._update=function(pt,yt,ct,Ct){var qt=this._desState,Ot=o.readUInt32BE(pt,yt),Lt=o.readUInt32BE(pt,yt+4);o.ip(Ot,Lt,qt.tmp,0),Ot=qt.tmp[0],Lt=qt.tmp[1],this.type==="encrypt"?this._encrypt(qt,Ot,Lt,qt.tmp,0):this._decrypt(qt,Ot,Lt,qt.tmp,0),Ot=qt.tmp[0],Lt=qt.tmp[1],o.writeUInt32BE(ct,Ot,Ct),o.writeUInt32BE(ct,Lt,Ct+4)},c.prototype._pad=function(pt,yt){if(this.padding===!1)return!1;for(var ct=pt.length-yt,Ct=yt;Ct<pt.length;Ct++)pt[Ct]=ct;return!0},c.prototype._unpad=function(pt){if(this.padding===!1)return pt;for(var yt=pt[pt.length-1],ct=pt.length-yt;ct<pt.length;ct++)s.equal(pt[ct],yt);return pt.slice(0,pt.length-yt)},c.prototype._encrypt=function(pt,yt,ct,Ct,qt){for(var Ot=yt,Lt=ct,Qt=0;Qt<pt.keys.length;Qt+=2){var ir=pt.keys[Qt],er=pt.keys[Qt+1];o.expand(Lt,pt.tmp,0),ir^=pt.tmp[0],er^=pt.tmp[1];var tr=o.substitute(ir,er),sr=o.permute(tr),ar=Lt;Lt=(Ot^sr)>>>0,Ot=ar}o.rip(Lt,Ot,Ct,qt)},c.prototype._decrypt=function(pt,yt,ct,Ct,qt){for(var Ot=ct,Lt=yt,Qt=pt.keys.length-2;Qt>=0;Qt-=2){var ir=pt.keys[Qt],er=pt.keys[Qt+1];o.expand(Ot,pt.tmp,0),ir^=pt.tmp[0],er^=pt.tmp[1];var tr=o.substitute(ir,er),sr=o.permute(tr),ar=Ot;Ot=(Lt^sr)>>>0,Lt=ar}o.rip(Ot,Lt,Ct,qt)},des}var cbc$1={},hasRequiredCbc$1;function requireCbc$1(){if(hasRequiredCbc$1)return cbc$1;hasRequiredCbc$1=1;var s=requireMinimalisticAssert(),e=requireInherits_browser(),o={};function a(c){s.equal(c.length,8,"Invalid IV length"),this.iv=new Array(8);for(var j=0;j<this.iv.length;j++)this.iv[j]=c[j]}function d(c){function j(ct){c.call(this,ct),this._cbcInit()}e(j,c);for(var _e=Object.keys(o),pt=0;pt<_e.length;pt++){var yt=_e[pt];j.prototype[yt]=o[yt]}return j.create=function(Ct){return new j(Ct)},j}return cbc$1.instantiate=d,o._cbcInit=function(){var j=new a(this.options.iv);this._cbcState=j},o._update=function(j,_e,pt,yt){var ct=this._cbcState,Ct=this.constructor.super_.prototype,qt=ct.iv;if(this.type==="encrypt"){for(var Ot=0;Ot<this.blockSize;Ot++)qt[Ot]^=j[_e+Ot];Ct._update.call(this,qt,0,pt,yt);for(var Ot=0;Ot<this.blockSize;Ot++)qt[Ot]=pt[yt+Ot]}else{Ct._update.call(this,j,_e,pt,yt);for(var Ot=0;Ot<this.blockSize;Ot++)pt[yt+Ot]^=qt[Ot];for(var Ot=0;Ot<this.blockSize;Ot++)qt[Ot]=j[_e+Ot]}},cbc$1}var ede,hasRequiredEde;function requireEde(){if(hasRequiredEde)return ede;hasRequiredEde=1;var s=requireMinimalisticAssert(),e=requireInherits_browser(),o=requireCipher(),a=requireDes$1();function d(j,_e){s.equal(_e.length,24,"Invalid key length");var pt=_e.slice(0,8),yt=_e.slice(8,16),ct=_e.slice(16,24);j==="encrypt"?this.ciphers=[a.create({type:"encrypt",key:pt}),a.create({type:"decrypt",key:yt}),a.create({type:"encrypt",key:ct})]:this.ciphers=[a.create({type:"decrypt",key:ct}),a.create({type:"encrypt",key:yt}),a.create({type:"decrypt",key:pt})]}function c(j){o.call(this,j);var _e=new d(this.type,this.options.key);this._edeState=_e}return e(c,o),ede=c,c.create=function(_e){return new c(_e)},c.prototype._update=function(_e,pt,yt,ct){var Ct=this._edeState;Ct.ciphers[0]._update(_e,pt,yt,ct),Ct.ciphers[1]._update(yt,ct,yt,ct),Ct.ciphers[2]._update(yt,ct,yt,ct)},c.prototype._pad=a.prototype._pad,c.prototype._unpad=a.prototype._unpad,ede}var hasRequiredDes;function requireDes(){return hasRequiredDes||(hasRequiredDes=1,des$1.utils=requireUtils$3(),des$1.Cipher=requireCipher(),des$1.DES=requireDes$1(),des$1.CBC=requireCbc$1(),des$1.EDE=requireEde()),des$1}var browserifyDes,hasRequiredBrowserifyDes;function requireBrowserifyDes(){if(hasRequiredBrowserifyDes)return browserifyDes;hasRequiredBrowserifyDes=1;var s=requireCipherBase(),e=requireDes(),o=requireInherits_browser(),a=requireSafeBuffer$1().Buffer,d={"des-ede3-cbc":e.CBC.instantiate(e.EDE),"des-ede3":e.EDE,"des-ede-cbc":e.CBC.instantiate(e.EDE),"des-ede":e.EDE,"des-cbc":e.CBC.instantiate(e.DES),"des-ecb":e.DES};d.des=d["des-cbc"],d.des3=d["des-ede3-cbc"],browserifyDes=c,o(c,s);function c(j){s.call(this);var _e=j.mode.toLowerCase(),pt=d[_e],yt;j.decrypt?yt="decrypt":yt="encrypt";var ct=j.key;a.isBuffer(ct)||(ct=a.from(ct)),(_e==="des-ede"||_e==="des-ede-cbc")&&(ct=a.concat([ct,ct.slice(0,8)]));var Ct=j.iv;a.isBuffer(Ct)||(Ct=a.from(Ct)),this._des=pt.create({key:ct,iv:Ct,type:yt})}return c.prototype._update=function(j){return a.from(this._des.update(j))},c.prototype._final=function(){return a.from(this._des.final())},browserifyDes}var browser$6={},encrypter={},ecb={},hasRequiredEcb;function requireEcb(){return hasRequiredEcb||(hasRequiredEcb=1,ecb.encrypt=function(s,e){return s._cipher.encryptBlock(e)},ecb.decrypt=function(s,e){return s._cipher.decryptBlock(e)}),ecb}var cbc={},bufferXor,hasRequiredBufferXor;function requireBufferXor(){return hasRequiredBufferXor||(hasRequiredBufferXor=1,bufferXor=function(e,o){for(var a=Math.min(e.length,o.length),d=new Buffer(a),c=0;c<a;++c)d[c]=e[c]^o[c];return d}),bufferXor}var hasRequiredCbc;function requireCbc(){if(hasRequiredCbc)return cbc;hasRequiredCbc=1;var s=requireBufferXor();return cbc.encrypt=function(e,o){var a=s(o,e._prev);return e._prev=e._cipher.encryptBlock(a),e._prev},cbc.decrypt=function(e,o){var a=e._prev;e._prev=o;var d=e._cipher.decryptBlock(o);return s(d,a)},cbc}var cfb={},hasRequiredCfb;function requireCfb(){if(hasRequiredCfb)return cfb;hasRequiredCfb=1;var s=requireSafeBuffer$1().Buffer,e=requireBufferXor();function o(a,d,c){var j=d.length,_e=e(d,a._cache);return a._cache=a._cache.slice(j),a._prev=s.concat([a._prev,c?d:_e]),_e}return cfb.encrypt=function(a,d,c){for(var j=s.allocUnsafe(0),_e;d.length;)if(a._cache.length===0&&(a._cache=a._cipher.encryptBlock(a._prev),a._prev=s.allocUnsafe(0)),a._cache.length<=d.length)_e=a._cache.length,j=s.concat([j,o(a,d.slice(0,_e),c)]),d=d.slice(_e);else{j=s.concat([j,o(a,d,c)]);break}return j},cfb}var cfb8={},hasRequiredCfb8;function requireCfb8(){if(hasRequiredCfb8)return cfb8;hasRequiredCfb8=1;var s=requireSafeBuffer$1().Buffer;function e(o,a,d){var c=o._cipher.encryptBlock(o._prev),j=c[0]^a;return o._prev=s.concat([o._prev.slice(1),s.from([d?a:j])]),j}return cfb8.encrypt=function(o,a,d){for(var c=a.length,j=s.allocUnsafe(c),_e=-1;++_e<c;)j[_e]=e(o,a[_e],d);return j},cfb8}var cfb1={},hasRequiredCfb1;function requireCfb1(){if(hasRequiredCfb1)return cfb1;hasRequiredCfb1=1;var s=requireSafeBuffer$1().Buffer;function e(a,d,c){for(var j,_e=-1,pt=8,yt=0,ct,Ct;++_e<pt;)j=a._cipher.encryptBlock(a._prev),ct=d&1<<7-_e?128:0,Ct=j[0]^ct,yt+=(Ct&128)>>_e%8,a._prev=o(a._prev,c?ct:Ct);return yt}function o(a,d){var c=a.length,j=-1,_e=s.allocUnsafe(a.length);for(a=s.concat([a,s.from([d])]);++j<c;)_e[j]=a[j]<<1|a[j+1]>>7;return _e}return cfb1.encrypt=function(a,d,c){for(var j=d.length,_e=s.allocUnsafe(j),pt=-1;++pt<j;)_e[pt]=e(a,d[pt],c);return _e},cfb1}var ofb={},hasRequiredOfb;function requireOfb(){if(hasRequiredOfb)return ofb;hasRequiredOfb=1;var s=requireBufferXor();function e(o){return o._prev=o._cipher.encryptBlock(o._prev),o._prev}return ofb.encrypt=function(o,a){for(;o._cache.length<a.length;)o._cache=Buffer.concat([o._cache,e(o)]);var d=o._cache.slice(0,a.length);return o._cache=o._cache.slice(a.length),s(a,d)},ofb}var ctr={},incr32_1,hasRequiredIncr32;function requireIncr32(){if(hasRequiredIncr32)return incr32_1;hasRequiredIncr32=1;function s(e){for(var o=e.length,a;o--;)if(a=e.readUInt8(o),a===255)e.writeUInt8(0,o);else{a++,e.writeUInt8(a,o);break}}return incr32_1=s,incr32_1}var hasRequiredCtr;function requireCtr(){if(hasRequiredCtr)return ctr;hasRequiredCtr=1;var s=requireBufferXor(),e=requireSafeBuffer$1().Buffer,o=requireIncr32();function a(c){var j=c._cipher.encryptBlockRaw(c._prev);return o(c._prev),j}var d=16;return ctr.encrypt=function(c,j){var _e=Math.ceil(j.length/d),pt=c._cache.length;c._cache=e.concat([c._cache,e.allocUnsafe(_e*d)]);for(var yt=0;yt<_e;yt++){var ct=a(c),Ct=pt+yt*d;c._cache.writeUInt32BE(ct[0],Ct+0),c._cache.writeUInt32BE(ct[1],Ct+4),c._cache.writeUInt32BE(ct[2],Ct+8),c._cache.writeUInt32BE(ct[3],Ct+12)}var qt=c._cache.slice(0,j.length);return c._cache=c._cache.slice(j.length),s(j,qt)},ctr}const aes128={cipher:"AES",key:128,iv:16,mode:"CBC",type:"block"},aes192={cipher:"AES",key:192,iv:16,mode:"CBC",type:"block"},aes256={cipher:"AES",key:256,iv:16,mode:"CBC",type:"block"},require$$2={"aes-128-ecb":{cipher:"AES",key:128,iv:0,mode:"ECB",type:"block"},"aes-192-ecb":{cipher:"AES",key:192,iv:0,mode:"ECB",type:"block"},"aes-256-ecb":{cipher:"AES",key:256,iv:0,mode:"ECB",type:"block"},"aes-128-cbc":{cipher:"AES",key:128,iv:16,mode:"CBC",type:"block"},"aes-192-cbc":{cipher:"AES",key:192,iv:16,mode:"CBC",type:"block"},"aes-256-cbc":{cipher:"AES",key:256,iv:16,mode:"CBC",type:"block"},aes128,aes192,aes256,"aes-128-cfb":{cipher:"AES",key:128,iv:16,mode:"CFB",type:"stream"},"aes-192-cfb":{cipher:"AES",key:192,iv:16,mode:"CFB",type:"stream"},"aes-256-cfb":{cipher:"AES",key:256,iv:16,mode:"CFB",type:"stream"},"aes-128-cfb8":{cipher:"AES",key:128,iv:16,mode:"CFB8",type:"stream"},"aes-192-cfb8":{cipher:"AES",key:192,iv:16,mode:"CFB8",type:"stream"},"aes-256-cfb8":{cipher:"AES",key:256,iv:16,mode:"CFB8",type:"stream"},"aes-128-cfb1":{cipher:"AES",key:128,iv:16,mode:"CFB1",type:"stream"},"aes-192-cfb1":{cipher:"AES",key:192,iv:16,mode:"CFB1",type:"stream"},"aes-256-cfb1":{cipher:"AES",key:256,iv:16,mode:"CFB1",type:"stream"},"aes-128-ofb":{cipher:"AES",key:128,iv:16,mode:"OFB",type:"stream"},"aes-192-ofb":{cipher:"AES",key:192,iv:16,mode:"OFB",type:"stream"},"aes-256-ofb":{cipher:"AES",key:256,iv:16,mode:"OFB",type:"stream"},"aes-128-ctr":{cipher:"AES",key:128,iv:16,mode:"CTR",type:"stream"},"aes-192-ctr":{cipher:"AES",key:192,iv:16,mode:"CTR",type:"stream"},"aes-256-ctr":{cipher:"AES",key:256,iv:16,mode:"CTR",type:"stream"},"aes-128-gcm":{cipher:"AES",key:128,iv:12,mode:"GCM",type:"auth"},"aes-192-gcm":{cipher:"AES",key:192,iv:12,mode:"GCM",type:"auth"},"aes-256-gcm":{cipher:"AES",key:256,iv:12,mode:"GCM",type:"auth"}};var modes_1,hasRequiredModes$1;function requireModes$1(){if(hasRequiredModes$1)return modes_1;hasRequiredModes$1=1;var s={ECB:requireEcb(),CBC:requireCbc(),CFB:requireCfb(),CFB8:requireCfb8(),CFB1:requireCfb1(),OFB:requireOfb(),CTR:requireCtr(),GCM:requireCtr()},e=require$$2;for(var o in e)e[o].module=s[e[o].mode];return modes_1=e,modes_1}var aes$1={},hasRequiredAes$1;function requireAes$1(){if(hasRequiredAes$1)return aes$1;hasRequiredAes$1=1;var s=requireSafeBuffer$1().Buffer;function e(_e){s.isBuffer(_e)||(_e=s.from(_e));for(var pt=_e.length/4|0,yt=new Array(pt),ct=0;ct<pt;ct++)yt[ct]=_e.readUInt32BE(ct*4);return yt}function o(_e){for(var pt=0;pt<_e.length;_e++)_e[pt]=0}function a(_e,pt,yt,ct,Ct){for(var qt=yt[0],Ot=yt[1],Lt=yt[2],Qt=yt[3],ir=_e[0]^pt[0],er=_e[1]^pt[1],tr=_e[2]^pt[2],sr=_e[3]^pt[3],ar,hr,_r,dr,ur=4,lr=1;lr<Ct;lr++)ar=qt[ir>>>24]^Ot[er>>>16&255]^Lt[tr>>>8&255]^Qt[sr&255]^pt[ur++],hr=qt[er>>>24]^Ot[tr>>>16&255]^Lt[sr>>>8&255]^Qt[ir&255]^pt[ur++],_r=qt[tr>>>24]^Ot[sr>>>16&255]^Lt[ir>>>8&255]^Qt[er&255]^pt[ur++],dr=qt[sr>>>24]^Ot[ir>>>16&255]^Lt[er>>>8&255]^Qt[tr&255]^pt[ur++],ir=ar,er=hr,tr=_r,sr=dr;return ar=(ct[ir>>>24]<<24|ct[er>>>16&255]<<16|ct[tr>>>8&255]<<8|ct[sr&255])^pt[ur++],hr=(ct[er>>>24]<<24|ct[tr>>>16&255]<<16|ct[sr>>>8&255]<<8|ct[ir&255])^pt[ur++],_r=(ct[tr>>>24]<<24|ct[sr>>>16&255]<<16|ct[ir>>>8&255]<<8|ct[er&255])^pt[ur++],dr=(ct[sr>>>24]<<24|ct[ir>>>16&255]<<16|ct[er>>>8&255]<<8|ct[tr&255])^pt[ur++],ar=ar>>>0,hr=hr>>>0,_r=_r>>>0,dr=dr>>>0,[ar,hr,_r,dr]}var d=[0,1,2,4,8,16,32,64,128,27,54],c=function(){for(var _e=new Array(256),pt=0;pt<256;pt++)pt<128?_e[pt]=pt<<1:_e[pt]=pt<<1^283;for(var yt=[],ct=[],Ct=[[],[],[],[]],qt=[[],[],[],[]],Ot=0,Lt=0,Qt=0;Qt<256;++Qt){var ir=Lt^Lt<<1^Lt<<2^Lt<<3^Lt<<4;ir=ir>>>8^ir&255^99,yt[Ot]=ir,ct[ir]=Ot;var er=_e[Ot],tr=_e[er],sr=_e[tr],ar=_e[ir]*257^ir*16843008;Ct[0][Ot]=ar<<24|ar>>>8,Ct[1][Ot]=ar<<16|ar>>>16,Ct[2][Ot]=ar<<8|ar>>>24,Ct[3][Ot]=ar,ar=sr*16843009^tr*65537^er*257^Ot*16843008,qt[0][ir]=ar<<24|ar>>>8,qt[1][ir]=ar<<16|ar>>>16,qt[2][ir]=ar<<8|ar>>>24,qt[3][ir]=ar,Ot===0?Ot=Lt=1:(Ot=er^_e[_e[_e[sr^er]]],Lt^=_e[_e[Lt]])}return{SBOX:yt,INV_SBOX:ct,SUB_MIX:Ct,INV_SUB_MIX:qt}}();function j(_e){this._key=e(_e),this._reset()}return j.blockSize=4*4,j.keySize=256/8,j.prototype.blockSize=j.blockSize,j.prototype.keySize=j.keySize,j.prototype._reset=function(){for(var _e=this._key,pt=_e.length,yt=pt+6,ct=(yt+1)*4,Ct=[],qt=0;qt<pt;qt++)Ct[qt]=_e[qt];for(qt=pt;qt<ct;qt++){var Ot=Ct[qt-1];qt%pt===0?(Ot=Ot<<8|Ot>>>24,Ot=c.SBOX[Ot>>>24]<<24|c.SBOX[Ot>>>16&255]<<16|c.SBOX[Ot>>>8&255]<<8|c.SBOX[Ot&255],Ot^=d[qt/pt|0]<<24):pt>6&&qt%pt===4&&(Ot=c.SBOX[Ot>>>24]<<24|c.SBOX[Ot>>>16&255]<<16|c.SBOX[Ot>>>8&255]<<8|c.SBOX[Ot&255]),Ct[qt]=Ct[qt-pt]^Ot}for(var Lt=[],Qt=0;Qt<ct;Qt++){var ir=ct-Qt,er=Ct[ir-(Qt%4?0:4)];Qt<4||ir<=4?Lt[Qt]=er:Lt[Qt]=c.INV_SUB_MIX[0][c.SBOX[er>>>24]]^c.INV_SUB_MIX[1][c.SBOX[er>>>16&255]]^c.INV_SUB_MIX[2][c.SBOX[er>>>8&255]]^c.INV_SUB_MIX[3][c.SBOX[er&255]]}this._nRounds=yt,this._keySchedule=Ct,this._invKeySchedule=Lt},j.prototype.encryptBlockRaw=function(_e){return _e=e(_e),a(_e,this._keySchedule,c.SUB_MIX,c.SBOX,this._nRounds)},j.prototype.encryptBlock=function(_e){var pt=this.encryptBlockRaw(_e),yt=s.allocUnsafe(16);return yt.writeUInt32BE(pt[0],0),yt.writeUInt32BE(pt[1],4),yt.writeUInt32BE(pt[2],8),yt.writeUInt32BE(pt[3],12),yt},j.prototype.decryptBlock=function(_e){_e=e(_e);var pt=_e[1];_e[1]=_e[3],_e[3]=pt;var yt=a(_e,this._invKeySchedule,c.INV_SUB_MIX,c.INV_SBOX,this._nRounds),ct=s.allocUnsafe(16);return ct.writeUInt32BE(yt[0],0),ct.writeUInt32BE(yt[3],4),ct.writeUInt32BE(yt[2],8),ct.writeUInt32BE(yt[1],12),ct},j.prototype.scrub=function(){o(this._keySchedule),o(this._invKeySchedule),o(this._key)},aes$1.AES=j,aes$1}var ghash,hasRequiredGhash;function requireGhash(){if(hasRequiredGhash)return ghash;hasRequiredGhash=1;var s=requireSafeBuffer$1().Buffer,e=s.alloc(16,0);function o(c){return[c.readUInt32BE(0),c.readUInt32BE(4),c.readUInt32BE(8),c.readUInt32BE(12)]}function a(c){var j=s.allocUnsafe(16);return j.writeUInt32BE(c[0]>>>0,0),j.writeUInt32BE(c[1]>>>0,4),j.writeUInt32BE(c[2]>>>0,8),j.writeUInt32BE(c[3]>>>0,12),j}function d(c){this.h=c,this.state=s.alloc(16,0),this.cache=s.allocUnsafe(0)}return d.prototype.ghash=function(c){for(var j=-1;++j<c.length;)this.state[j]^=c[j];this._multiply()},d.prototype._multiply=function(){for(var c=o(this.h),j=[0,0,0,0],_e,pt,yt,ct=-1;++ct<128;){for(pt=(this.state[~~(ct/8)]&1<<7-ct%8)!==0,pt&&(j[0]^=c[0],j[1]^=c[1],j[2]^=c[2],j[3]^=c[3]),yt=(c[3]&1)!==0,_e=3;_e>0;_e--)c[_e]=c[_e]>>>1|(c[_e-1]&1)<<31;c[0]=c[0]>>>1,yt&&(c[0]=c[0]^225<<24)}this.state=a(j)},d.prototype.update=function(c){this.cache=s.concat([this.cache,c]);for(var j;this.cache.length>=16;)j=this.cache.slice(0,16),this.cache=this.cache.slice(16),this.ghash(j)},d.prototype.final=function(c,j){return this.cache.length&&this.ghash(s.concat([this.cache,e],16)),this.ghash(a([0,c,0,j])),this.state},ghash=d,ghash}var authCipher,hasRequiredAuthCipher;function requireAuthCipher(){if(hasRequiredAuthCipher)return authCipher;hasRequiredAuthCipher=1;var s=requireAes$1(),e=requireSafeBuffer$1().Buffer,o=requireCipherBase(),a=requireInherits_browser(),d=requireGhash(),c=requireBufferXor(),j=requireIncr32();function _e(ct,Ct){var qt=0;ct.length!==Ct.length&&qt++;for(var Ot=Math.min(ct.length,Ct.length),Lt=0;Lt<Ot;++Lt)qt+=ct[Lt]^Ct[Lt];return qt}function pt(ct,Ct,qt){if(Ct.length===12)return ct._finID=e.concat([Ct,e.from([0,0,0,1])]),e.concat([Ct,e.from([0,0,0,2])]);var Ot=new d(qt),Lt=Ct.length,Qt=Lt%16;Ot.update(Ct),Qt&&(Qt=16-Qt,Ot.update(e.alloc(Qt,0))),Ot.update(e.alloc(8,0));var ir=Lt*8,er=e.alloc(8);er.writeUIntBE(ir,0,8),Ot.update(er),ct._finID=Ot.state;var tr=e.from(ct._finID);return j(tr),tr}function yt(ct,Ct,qt,Ot){o.call(this);var Lt=e.alloc(4,0);this._cipher=new s.AES(Ct);var Qt=this._cipher.encryptBlock(Lt);this._ghash=new d(Qt),qt=pt(this,qt,Qt),this._prev=e.from(qt),this._cache=e.allocUnsafe(0),this._secCache=e.allocUnsafe(0),this._decrypt=Ot,this._alen=0,this._len=0,this._mode=ct,this._authTag=null,this._called=!1}return a(yt,o),yt.prototype._update=function(ct){if(!this._called&&this._alen){var Ct=16-this._alen%16;Ct<16&&(Ct=e.alloc(Ct,0),this._ghash.update(Ct))}this._called=!0;var qt=this._mode.encrypt(this,ct);return this._decrypt?this._ghash.update(ct):this._ghash.update(qt),this._len+=ct.length,qt},yt.prototype._final=function(){if(this._decrypt&&!this._authTag)throw new Error("Unsupported state or unable to authenticate data");var ct=c(this._ghash.final(this._alen*8,this._len*8),this._cipher.encryptBlock(this._finID));if(this._decrypt&&_e(ct,this._authTag))throw new Error("Unsupported state or unable to authenticate data");this._authTag=ct,this._cipher.scrub()},yt.prototype.getAuthTag=function(){if(this._decrypt||!e.isBuffer(this._authTag))throw new Error("Attempting to get auth tag in unsupported state");return this._authTag},yt.prototype.setAuthTag=function(Ct){if(!this._decrypt)throw new Error("Attempting to set auth tag in unsupported state");this._authTag=Ct},yt.prototype.setAAD=function(Ct){if(this._called)throw new Error("Attempting to set AAD in unsupported state");this._ghash.update(Ct),this._alen+=Ct.length},authCipher=yt,authCipher}var streamCipher,hasRequiredStreamCipher;function requireStreamCipher(){if(hasRequiredStreamCipher)return streamCipher;hasRequiredStreamCipher=1;var s=requireAes$1(),e=requireSafeBuffer$1().Buffer,o=requireCipherBase(),a=requireInherits_browser();function d(c,j,_e,pt){o.call(this),this._cipher=new s.AES(j),this._prev=e.from(_e),this._cache=e.allocUnsafe(0),this._secCache=e.allocUnsafe(0),this._decrypt=pt,this._mode=c}return a(d,o),d.prototype._update=function(c){return this._mode.encrypt(this,c,this._decrypt)},d.prototype._final=function(){this._cipher.scrub()},streamCipher=d,streamCipher}var evp_bytestokey,hasRequiredEvp_bytestokey;function requireEvp_bytestokey(){if(hasRequiredEvp_bytestokey)return evp_bytestokey;hasRequiredEvp_bytestokey=1;var s=requireSafeBuffer$1().Buffer,e=requireMd5_js();function o(a,d,c,j){if(s.isBuffer(a)||(a=s.from(a,"binary")),d&&(s.isBuffer(d)||(d=s.from(d,"binary")),d.length!==8))throw new RangeError("salt should be Buffer with 8 byte length");for(var _e=c/8,pt=s.alloc(_e),yt=s.alloc(j||0),ct=s.alloc(0);_e>0||j>0;){var Ct=new e;Ct.update(ct),Ct.update(a),d&&Ct.update(d),ct=Ct.digest();var qt=0;if(_e>0){var Ot=pt.length-_e;qt=Math.min(_e,ct.length),ct.copy(pt,Ot,0,qt),_e-=qt}if(qt<ct.length&&j>0){var Lt=yt.length-j,Qt=Math.min(j,ct.length-qt);ct.copy(yt,Lt,qt,qt+Qt),j-=Qt}}return ct.fill(0),{key:pt,iv:yt}}return evp_bytestokey=o,evp_bytestokey}var hasRequiredEncrypter;function requireEncrypter(){if(hasRequiredEncrypter)return encrypter;hasRequiredEncrypter=1;var s=requireModes$1(),e=requireAuthCipher(),o=requireSafeBuffer$1().Buffer,a=requireStreamCipher(),d=requireCipherBase(),c=requireAes$1(),j=requireEvp_bytestokey(),_e=requireInherits_browser();function pt(Ot,Lt,Qt){d.call(this),this._cache=new ct,this._cipher=new c.AES(Lt),this._prev=o.from(Qt),this._mode=Ot,this._autopadding=!0}_e(pt,d),pt.prototype._update=function(Ot){this._cache.add(Ot);for(var Lt,Qt,ir=[];Lt=this._cache.get();)Qt=this._mode.encrypt(this,Lt),ir.push(Qt);return o.concat(ir)};var yt=o.alloc(16,16);pt.prototype._final=function(){var Ot=this._cache.flush();if(this._autopadding)return Ot=this._mode.encrypt(this,Ot),this._cipher.scrub(),Ot;if(!Ot.equals(yt))throw this._cipher.scrub(),new Error("data not multiple of block length")},pt.prototype.setAutoPadding=function(Ot){return this._autopadding=!!Ot,this};function ct(){this.cache=o.allocUnsafe(0)}ct.prototype.add=function(Ot){this.cache=o.concat([this.cache,Ot])},ct.prototype.get=function(){if(this.cache.length>15){var Ot=this.cache.slice(0,16);return this.cache=this.cache.slice(16),Ot}return null},ct.prototype.flush=function(){for(var Ot=16-this.cache.length,Lt=o.allocUnsafe(Ot),Qt=-1;++Qt<Ot;)Lt.writeUInt8(Ot,Qt);return o.concat([this.cache,Lt])};function Ct(Ot,Lt,Qt){var ir=s[Ot.toLowerCase()];if(!ir)throw new TypeError("invalid suite type");if(typeof Lt=="string"&&(Lt=o.from(Lt)),Lt.length!==ir.key/8)throw new TypeError("invalid key length "+Lt.length);if(typeof Qt=="string"&&(Qt=o.from(Qt)),ir.mode!=="GCM"&&Qt.length!==ir.iv)throw new TypeError("invalid iv length "+Qt.length);return ir.type==="stream"?new a(ir.module,Lt,Qt):ir.type==="auth"?new e(ir.module,Lt,Qt):new pt(ir.module,Lt,Qt)}function qt(Ot,Lt){var Qt=s[Ot.toLowerCase()];if(!Qt)throw new TypeError("invalid suite type");var ir=j(Lt,!1,Qt.key,Qt.iv);return Ct(Ot,ir.key,ir.iv)}return encrypter.createCipheriv=Ct,encrypter.createCipher=qt,encrypter}var decrypter={},hasRequiredDecrypter;function requireDecrypter(){if(hasRequiredDecrypter)return decrypter;hasRequiredDecrypter=1;var s=requireAuthCipher(),e=requireSafeBuffer$1().Buffer,o=requireModes$1(),a=requireStreamCipher(),d=requireCipherBase(),c=requireAes$1(),j=requireEvp_bytestokey(),_e=requireInherits_browser();function pt(Ot,Lt,Qt){d.call(this),this._cache=new yt,this._last=void 0,this._cipher=new c.AES(Lt),this._prev=e.from(Qt),this._mode=Ot,this._autopadding=!0}_e(pt,d),pt.prototype._update=function(Ot){this._cache.add(Ot);for(var Lt,Qt,ir=[];Lt=this._cache.get(this._autopadding);)Qt=this._mode.decrypt(this,Lt),ir.push(Qt);return e.concat(ir)},pt.prototype._final=function(){var Ot=this._cache.flush();if(this._autopadding)return ct(this._mode.decrypt(this,Ot));if(Ot)throw new Error("data not multiple of block length")},pt.prototype.setAutoPadding=function(Ot){return this._autopadding=!!Ot,this};function yt(){this.cache=e.allocUnsafe(0)}yt.prototype.add=function(Ot){this.cache=e.concat([this.cache,Ot])},yt.prototype.get=function(Ot){var Lt;if(Ot){if(this.cache.length>16)return Lt=this.cache.slice(0,16),this.cache=this.cache.slice(16),Lt}else if(this.cache.length>=16)return Lt=this.cache.slice(0,16),this.cache=this.cache.slice(16),Lt;return null},yt.prototype.flush=function(){if(this.cache.length)return this.cache};function ct(Ot){var Lt=Ot[15];if(Lt<1||Lt>16)throw new Error("unable to decrypt data");for(var Qt=-1;++Qt<Lt;)if(Ot[Qt+(16-Lt)]!==Lt)throw new Error("unable to decrypt data");if(Lt!==16)return Ot.slice(0,16-Lt)}function Ct(Ot,Lt,Qt){var ir=o[Ot.toLowerCase()];if(!ir)throw new TypeError("invalid suite type");if(typeof Qt=="string"&&(Qt=e.from(Qt)),ir.mode!=="GCM"&&Qt.length!==ir.iv)throw new TypeError("invalid iv length "+Qt.length);if(typeof Lt=="string"&&(Lt=e.from(Lt)),Lt.length!==ir.key/8)throw new TypeError("invalid key length "+Lt.length);return ir.type==="stream"?new a(ir.module,Lt,Qt,!0):ir.type==="auth"?new s(ir.module,Lt,Qt,!0):new pt(ir.module,Lt,Qt)}function qt(Ot,Lt){var Qt=o[Ot.toLowerCase()];if(!Qt)throw new TypeError("invalid suite type");var ir=j(Lt,!1,Qt.key,Qt.iv);return Ct(Ot,ir.key,ir.iv)}return decrypter.createDecipher=qt,decrypter.createDecipheriv=Ct,decrypter}var hasRequiredBrowser$6;function requireBrowser$6(){if(hasRequiredBrowser$6)return browser$6;hasRequiredBrowser$6=1;var s=requireEncrypter(),e=requireDecrypter(),o=require$$2;function a(){return Object.keys(o)}return browser$6.createCipher=browser$6.Cipher=s.createCipher,browser$6.createCipheriv=browser$6.Cipheriv=s.createCipheriv,browser$6.createDecipher=browser$6.Decipher=e.createDecipher,browser$6.createDecipheriv=browser$6.Decipheriv=e.createDecipheriv,browser$6.listCiphers=browser$6.getCiphers=a,browser$6}var modes={},hasRequiredModes;function requireModes(){return hasRequiredModes||(hasRequiredModes=1,function(s){s["des-ecb"]={key:8,iv:0},s["des-cbc"]=s.des={key:8,iv:8},s["des-ede3-cbc"]=s.des3={key:24,iv:8},s["des-ede3"]={key:24,iv:0},s["des-ede-cbc"]={key:16,iv:8},s["des-ede"]={key:16,iv:0}}(modes)),modes}var hasRequiredBrowser$5;function requireBrowser$5(){if(hasRequiredBrowser$5)return browser$7;hasRequiredBrowser$5=1;var s=requireBrowserifyDes(),e=requireBrowser$6(),o=requireModes$1(),a=requireModes(),d=requireEvp_bytestokey();function c(ct,Ct){ct=ct.toLowerCase();var qt,Ot;if(o[ct])qt=o[ct].key,Ot=o[ct].iv;else if(a[ct])qt=a[ct].key*8,Ot=a[ct].iv;else throw new TypeError("invalid suite type");var Lt=d(Ct,!1,qt,Ot);return _e(ct,Lt.key,Lt.iv)}function j(ct,Ct){ct=ct.toLowerCase();var qt,Ot;if(o[ct])qt=o[ct].key,Ot=o[ct].iv;else if(a[ct])qt=a[ct].key*8,Ot=a[ct].iv;else throw new TypeError("invalid suite type");var Lt=d(Ct,!1,qt,Ot);return pt(ct,Lt.key,Lt.iv)}function _e(ct,Ct,qt){if(ct=ct.toLowerCase(),o[ct])return e.createCipheriv(ct,Ct,qt);if(a[ct])return new s({key:Ct,iv:qt,mode:ct});throw new TypeError("invalid suite type")}function pt(ct,Ct,qt){if(ct=ct.toLowerCase(),o[ct])return e.createDecipheriv(ct,Ct,qt);if(a[ct])return new s({key:Ct,iv:qt,mode:ct,decrypt:!0});throw new TypeError("invalid suite type")}function yt(){return Object.keys(a).concat(e.getCiphers())}return browser$7.createCipher=browser$7.Cipher=c,browser$7.createCipheriv=browser$7.Cipheriv=_e,browser$7.createDecipher=browser$7.Decipher=j,browser$7.createDecipheriv=browser$7.Decipheriv=pt,browser$7.listCiphers=browser$7.getCiphers=yt,browser$7}var browser$5={},bn$6={exports:{}};bn$6.exports;var hasRequiredBn$6;function requireBn$6(){return hasRequiredBn$6||(hasRequiredBn$6=1,function(s){(function(e,o){function a(Mt,h){if(!Mt)throw new Error(h||"Assertion failed")}function d(Mt,h){Mt.super_=h;var _=function(){};_.prototype=h.prototype,Mt.prototype=new _,Mt.prototype.constructor=Mt}function c(Mt,h,_){if(c.isBN(Mt))return Mt;this.negative=0,this.words=null,this.length=0,this.red=null,Mt!==null&&((h==="le"||h==="be")&&(_=h,h=10),this._init(Mt||0,h||10,_||"be"))}typeof e=="object"?e.exports=c:o.BN=c,c.BN=c,c.wordSize=26;var j;try{typeof window<"u"&&typeof window.Buffer<"u"?j=window.Buffer:j=require$$0$1.Buffer}catch{}c.isBN=function(h){return h instanceof c?!0:h!==null&&typeof h=="object"&&h.constructor.wordSize===c.wordSize&&Array.isArray(h.words)},c.max=function(h,_){return h.cmp(_)>0?h:_},c.min=function(h,_){return h.cmp(_)<0?h:_},c.prototype._init=function(h,_,b){if(typeof h=="number")return this._initNumber(h,_,b);if(typeof h=="object")return this._initArray(h,_,b);_==="hex"&&(_=16),a(_===(_|0)&&_>=2&&_<=36),h=h.toString().replace(/\s+/g,"");var lt=0;h[0]==="-"&&(lt++,this.negative=1),lt<h.length&&(_===16?this._parseHex(h,lt,b):(this._parseBase(h,_,lt),b==="le"&&this._initArray(this.toArray(),_,b)))},c.prototype._initNumber=function(h,_,b){h<0&&(this.negative=1,h=-h),h<67108864?(this.words=[h&67108863],this.length=1):h<4503599627370496?(this.words=[h&67108863,h/67108864&67108863],this.length=2):(a(h<9007199254740992),this.words=[h&67108863,h/67108864&67108863,1],this.length=3),b==="le"&&this._initArray(this.toArray(),_,b)},c.prototype._initArray=function(h,_,b){if(a(typeof h.length=="number"),h.length<=0)return this.words=[0],this.length=1,this;this.length=Math.ceil(h.length/3),this.words=new Array(this.length);for(var lt=0;lt<this.length;lt++)this.words[lt]=0;var Rt,kt,Ft=0;if(b==="be")for(lt=h.length-1,Rt=0;lt>=0;lt-=3)kt=h[lt]|h[lt-1]<<8|h[lt-2]<<16,this.words[Rt]|=kt<<Ft&67108863,this.words[Rt+1]=kt>>>26-Ft&67108863,Ft+=24,Ft>=26&&(Ft-=26,Rt++);else if(b==="le")for(lt=0,Rt=0;lt<h.length;lt+=3)kt=h[lt]|h[lt+1]<<8|h[lt+2]<<16,this.words[Rt]|=kt<<Ft&67108863,this.words[Rt+1]=kt>>>26-Ft&67108863,Ft+=24,Ft>=26&&(Ft-=26,Rt++);return this.strip()};function _e(Mt,h){var _=Mt.charCodeAt(h);return _>=65&&_<=70?_-55:_>=97&&_<=102?_-87:_-48&15}function pt(Mt,h,_){var b=_e(Mt,_);return _-1>=h&&(b|=_e(Mt,_-1)<<4),b}c.prototype._parseHex=function(h,_,b){this.length=Math.ceil((h.length-_)/6),this.words=new Array(this.length);for(var lt=0;lt<this.length;lt++)this.words[lt]=0;var Rt=0,kt=0,Ft;if(b==="be")for(lt=h.length-1;lt>=_;lt-=2)Ft=pt(h,_,lt)<<Rt,this.words[kt]|=Ft&67108863,Rt>=18?(Rt-=18,kt+=1,this.words[kt]|=Ft>>>26):Rt+=8;else{var xt=h.length-_;for(lt=xt%2===0?_+1:_;lt<h.length;lt+=2)Ft=pt(h,_,lt)<<Rt,this.words[kt]|=Ft&67108863,Rt>=18?(Rt-=18,kt+=1,this.words[kt]|=Ft>>>26):Rt+=8}this.strip()};function yt(Mt,h,_,b){for(var lt=0,Rt=Math.min(Mt.length,_),kt=h;kt<Rt;kt++){var Ft=Mt.charCodeAt(kt)-48;lt*=b,Ft>=49?lt+=Ft-49+10:Ft>=17?lt+=Ft-17+10:lt+=Ft}return lt}c.prototype._parseBase=function(h,_,b){this.words=[0],this.length=1;for(var lt=0,Rt=1;Rt<=67108863;Rt*=_)lt++;lt--,Rt=Rt/_|0;for(var kt=h.length-b,Ft=kt%lt,xt=Math.min(kt,kt-Ft)+b,g=0,wt=b;wt<xt;wt+=lt)g=yt(h,wt,wt+lt,_),this.imuln(Rt),this.words[0]+g<67108864?this.words[0]+=g:this._iaddn(g);if(Ft!==0){var nr=1;for(g=yt(h,wt,h.length,_),wt=0;wt<Ft;wt++)nr*=_;this.imuln(nr),this.words[0]+g<67108864?this.words[0]+=g:this._iaddn(g)}this.strip()},c.prototype.copy=function(h){h.words=new Array(this.length);for(var _=0;_<this.length;_++)h.words[_]=this.words[_];h.length=this.length,h.negative=this.negative,h.red=this.red},c.prototype.clone=function(){var h=new c(null);return this.copy(h),h},c.prototype._expand=function(h){for(;this.length<h;)this.words[this.length++]=0;return this},c.prototype.strip=function(){for(;this.length>1&&this.words[this.length-1]===0;)this.length--;return this._normSign()},c.prototype._normSign=function(){return this.length===1&&this.words[0]===0&&(this.negative=0),this},c.prototype.inspect=function(){return(this.red?"<BN-R: ":"<BN: ")+this.toString(16)+">"};var ct=["","0","00","000","0000","00000","000000","0000000","00000000","000000000","0000000000","00000000000","000000000000","0000000000000","00000000000000","000000000000000","0000000000000000","00000000000000000","000000000000000000","0000000000000000000","00000000000000000000","000000000000000000000","0000000000000000000000","00000000000000000000000","000000000000000000000000","0000000000000000000000000"],Ct=[0,0,25,16,12,11,10,9,8,8,7,7,7,7,6,6,6,6,6,6,6,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5],qt=[0,0,33554432,43046721,16777216,48828125,60466176,40353607,16777216,43046721,1e7,19487171,35831808,62748517,7529536,11390625,16777216,24137569,34012224,47045881,64e6,4084101,5153632,6436343,7962624,9765625,11881376,14348907,17210368,20511149,243e5,28629151,33554432,39135393,45435424,52521875,60466176];c.prototype.toString=function(h,_){h=h||10,_=_|0||1;var b;if(h===16||h==="hex"){b="";for(var lt=0,Rt=0,kt=0;kt<this.length;kt++){var Ft=this.words[kt],xt=((Ft<<lt|Rt)&16777215).toString(16);Rt=Ft>>>24-lt&16777215,lt+=2,lt>=26&&(lt-=26,kt--),Rt!==0||kt!==this.length-1?b=ct[6-xt.length]+xt+b:b=xt+b}for(Rt!==0&&(b=Rt.toString(16)+b);b.length%_!==0;)b="0"+b;return this.negative!==0&&(b="-"+b),b}if(h===(h|0)&&h>=2&&h<=36){var g=Ct[h],wt=qt[h];b="";var nr=this.clone();for(nr.negative=0;!nr.isZero();){var or=nr.modn(wt).toString(h);nr=nr.idivn(wt),nr.isZero()?b=or+b:b=ct[g-or.length]+or+b}for(this.isZero()&&(b="0"+b);b.length%_!==0;)b="0"+b;return this.negative!==0&&(b="-"+b),b}a(!1,"Base should be between 2 and 36")},c.prototype.toNumber=function(){var h=this.words[0];return this.length===2?h+=this.words[1]*67108864:this.length===3&&this.words[2]===1?h+=4503599627370496+this.words[1]*67108864:this.length>2&&a(!1,"Number can only safely store up to 53 bits"),this.negative!==0?-h:h},c.prototype.toJSON=function(){return this.toString(16)},c.prototype.toBuffer=function(h,_){return a(typeof j<"u"),this.toArrayLike(j,h,_)},c.prototype.toArray=function(h,_){return this.toArrayLike(Array,h,_)},c.prototype.toArrayLike=function(h,_,b){var lt=this.byteLength(),Rt=b||Math.max(1,lt);a(lt<=Rt,"byte array longer than desired length"),a(Rt>0,"Requested array length <= 0"),this.strip();var kt=_==="le",Ft=new h(Rt),xt,g,wt=this.clone();if(kt){for(g=0;!wt.isZero();g++)xt=wt.andln(255),wt.iushrn(8),Ft[g]=xt;for(;g<Rt;g++)Ft[g]=0}else{for(g=0;g<Rt-lt;g++)Ft[g]=0;for(g=0;!wt.isZero();g++)xt=wt.andln(255),wt.iushrn(8),Ft[Rt-g-1]=xt}return Ft},Math.clz32?c.prototype._countBits=function(h){return 32-Math.clz32(h)}:c.prototype._countBits=function(h){var _=h,b=0;return _>=4096&&(b+=13,_>>>=13),_>=64&&(b+=7,_>>>=7),_>=8&&(b+=4,_>>>=4),_>=2&&(b+=2,_>>>=2),b+_},c.prototype._zeroBits=function(h){if(h===0)return 26;var _=h,b=0;return _&8191||(b+=13,_>>>=13),_&127||(b+=7,_>>>=7),_&15||(b+=4,_>>>=4),_&3||(b+=2,_>>>=2),_&1||b++,b},c.prototype.bitLength=function(){var h=this.words[this.length-1],_=this._countBits(h);return(this.length-1)*26+_};function Ot(Mt){for(var h=new Array(Mt.bitLength()),_=0;_<h.length;_++){var b=_/26|0,lt=_%26;h[_]=(Mt.words[b]&1<<lt)>>>lt}return h}c.prototype.zeroBits=function(){if(this.isZero())return 0;for(var h=0,_=0;_<this.length;_++){var b=this._zeroBits(this.words[_]);if(h+=b,b!==26)break}return h},c.prototype.byteLength=function(){return Math.ceil(this.bitLength()/8)},c.prototype.toTwos=function(h){return this.negative!==0?this.abs().inotn(h).iaddn(1):this.clone()},c.prototype.fromTwos=function(h){return this.testn(h-1)?this.notn(h).iaddn(1).ineg():this.clone()},c.prototype.isNeg=function(){return this.negative!==0},c.prototype.neg=function(){return this.clone().ineg()},c.prototype.ineg=function(){return this.isZero()||(this.negative^=1),this},c.prototype.iuor=function(h){for(;this.length<h.length;)this.words[this.length++]=0;for(var _=0;_<h.length;_++)this.words[_]=this.words[_]|h.words[_];return this.strip()},c.prototype.ior=function(h){return a((this.negative|h.negative)===0),this.iuor(h)},c.prototype.or=function(h){return this.length>h.length?this.clone().ior(h):h.clone().ior(this)},c.prototype.uor=function(h){return this.length>h.length?this.clone().iuor(h):h.clone().iuor(this)},c.prototype.iuand=function(h){var _;this.length>h.length?_=h:_=this;for(var b=0;b<_.length;b++)this.words[b]=this.words[b]&h.words[b];return this.length=_.length,this.strip()},c.prototype.iand=function(h){return a((this.negative|h.negative)===0),this.iuand(h)},c.prototype.and=function(h){return this.length>h.length?this.clone().iand(h):h.clone().iand(this)},c.prototype.uand=function(h){return this.length>h.length?this.clone().iuand(h):h.clone().iuand(this)},c.prototype.iuxor=function(h){var _,b;this.length>h.length?(_=this,b=h):(_=h,b=this);for(var lt=0;lt<b.length;lt++)this.words[lt]=_.words[lt]^b.words[lt];if(this!==_)for(;lt<_.length;lt++)this.words[lt]=_.words[lt];return this.length=_.length,this.strip()},c.prototype.ixor=function(h){return a((this.negative|h.negative)===0),this.iuxor(h)},c.prototype.xor=function(h){return this.length>h.length?this.clone().ixor(h):h.clone().ixor(this)},c.prototype.uxor=function(h){return this.length>h.length?this.clone().iuxor(h):h.clone().iuxor(this)},c.prototype.inotn=function(h){a(typeof h=="number"&&h>=0);var _=Math.ceil(h/26)|0,b=h%26;this._expand(_),b>0&&_--;for(var lt=0;lt<_;lt++)this.words[lt]=~this.words[lt]&67108863;return b>0&&(this.words[lt]=~this.words[lt]&67108863>>26-b),this.strip()},c.prototype.notn=function(h){return this.clone().inotn(h)},c.prototype.setn=function(h,_){a(typeof h=="number"&&h>=0);var b=h/26|0,lt=h%26;return this._expand(b+1),_?this.words[b]=this.words[b]|1<<lt:this.words[b]=this.words[b]&~(1<<lt),this.strip()},c.prototype.iadd=function(h){var _;if(this.negative!==0&&h.negative===0)return this.negative=0,_=this.isub(h),this.negative^=1,this._normSign();if(this.negative===0&&h.negative!==0)return h.negative=0,_=this.isub(h),h.negative=1,_._normSign();var b,lt;this.length>h.length?(b=this,lt=h):(b=h,lt=this);for(var Rt=0,kt=0;kt<lt.length;kt++)_=(b.words[kt]|0)+(lt.words[kt]|0)+Rt,this.words[kt]=_&67108863,Rt=_>>>26;for(;Rt!==0&&kt<b.length;kt++)_=(b.words[kt]|0)+Rt,this.words[kt]=_&67108863,Rt=_>>>26;if(this.length=b.length,Rt!==0)this.words[this.length]=Rt,this.length++;else if(b!==this)for(;kt<b.length;kt++)this.words[kt]=b.words[kt];return this},c.prototype.add=function(h){var _;return h.negative!==0&&this.negative===0?(h.negative=0,_=this.sub(h),h.negative^=1,_):h.negative===0&&this.negative!==0?(this.negative=0,_=h.sub(this),this.negative=1,_):this.length>h.length?this.clone().iadd(h):h.clone().iadd(this)},c.prototype.isub=function(h){if(h.negative!==0){h.negative=0;var _=this.iadd(h);return h.negative=1,_._normSign()}else if(this.negative!==0)return this.negative=0,this.iadd(h),this.negative=1,this._normSign();var b=this.cmp(h);if(b===0)return this.negative=0,this.length=1,this.words[0]=0,this;var lt,Rt;b>0?(lt=this,Rt=h):(lt=h,Rt=this);for(var kt=0,Ft=0;Ft<Rt.length;Ft++)_=(lt.words[Ft]|0)-(Rt.words[Ft]|0)+kt,kt=_>>26,this.words[Ft]=_&67108863;for(;kt!==0&&Ft<lt.length;Ft++)_=(lt.words[Ft]|0)+kt,kt=_>>26,this.words[Ft]=_&67108863;if(kt===0&&Ft<lt.length&&lt!==this)for(;Ft<lt.length;Ft++)this.words[Ft]=lt.words[Ft];return this.length=Math.max(this.length,Ft),lt!==this&&(this.negative=1),this.strip()},c.prototype.sub=function(h){return this.clone().isub(h)};function Lt(Mt,h,_){_.negative=h.negative^Mt.negative;var b=Mt.length+h.length|0;_.length=b,b=b-1|0;var lt=Mt.words[0]|0,Rt=h.words[0]|0,kt=lt*Rt,Ft=kt&67108863,xt=kt/67108864|0;_.words[0]=Ft;for(var g=1;g<b;g++){for(var wt=xt>>>26,nr=xt&67108863,or=Math.min(g,h.length-1),cr=Math.max(0,g-Mt.length+1);cr<=or;cr++){var Rr=g-cr|0;lt=Mt.words[Rr]|0,Rt=h.words[cr]|0,kt=lt*Rt+nr,wt+=kt/67108864|0,nr=kt&67108863}_.words[g]=nr|0,xt=wt|0}return xt!==0?_.words[g]=xt|0:_.length--,_.strip()}var Qt=function(h,_,b){var lt=h.words,Rt=_.words,kt=b.words,Ft=0,xt,g,wt,nr=lt[0]|0,or=nr&8191,cr=nr>>>13,Rr=lt[1]|0,Ar=Rr&8191,pr=Rr>>>13,wr=lt[2]|0,Tr=wr&8191,Ir=wr>>>13,Sr=lt[3]|0,br=Sr&8191,kr=Sr>>>13,Qr=lt[4]|0,qr=Qr&8191,$r=Qr>>>13,gn=lt[5]|0,Lr=gn&8191,Dr=gn>>>13,En=lt[6]|0,Fr=En&8191,zr=En>>>13,yn=lt[7]|0,Nr=yn&8191,Wr=yn>>>13,xn=lt[8]|0,Or=xn&8191,Yr=xn>>>13,Pn=lt[9]|0,xr=Pn&8191,fr=Pn>>>13,yr=Rt[0]|0,Mr=yr&8191,Pr=yr>>>13,Vr=Rt[1]|0,Br=Vr&8191,jr=Vr>>>13,An=Rt[2]|0,Ur=An&8191,Gr=An>>>13,wn=Rt[3]|0,Xr=wn&8191,hn=wn>>>13,In=Rt[4]|0,Jr=In&8191,fn=In>>>13,kn=Rt[5]|0,Kr=kn&8191,dn=kn>>>13,Rn=Rt[6]|0,Zr=Rn&8191,un=Rn>>>13,Mn=Rt[7]|0,rn=Mn&8191,pn=Mn>>>13,Cn=Rt[8]|0,ln=Cn&8191,vn=Cn>>>13,Bn=Rt[9]|0,an=Bn&8191,mn=Bn>>>13;b.negative=h.negative^_.negative,b.length=19,xt=Math.imul(or,Mr),g=Math.imul(or,Pr),g=g+Math.imul(cr,Mr)|0,wt=Math.imul(cr,Pr);var Sn=(Ft+xt|0)+((g&8191)<<13)|0;Ft=(wt+(g>>>13)|0)+(Sn>>>26)|0,Sn&=67108863,xt=Math.imul(Ar,Mr),g=Math.imul(Ar,Pr),g=g+Math.imul(pr,Mr)|0,wt=Math.imul(pr,Pr),xt=xt+Math.imul(or,Br)|0,g=g+Math.imul(or,jr)|0,g=g+Math.imul(cr,Br)|0,wt=wt+Math.imul(cr,jr)|0;var Tn=(Ft+xt|0)+((g&8191)<<13)|0;Ft=(wt+(g>>>13)|0)+(Tn>>>26)|0,Tn&=67108863,xt=Math.imul(Tr,Mr),g=Math.imul(Tr,Pr),g=g+Math.imul(Ir,Mr)|0,wt=Math.imul(Ir,Pr),xt=xt+Math.imul(Ar,Br)|0,g=g+Math.imul(Ar,jr)|0,g=g+Math.imul(pr,Br)|0,wt=wt+Math.imul(pr,jr)|0,xt=xt+Math.imul(or,Ur)|0,g=g+Math.imul(or,Gr)|0,g=g+Math.imul(cr,Ur)|0,wt=wt+Math.imul(cr,Gr)|0;var Un=(Ft+xt|0)+((g&8191)<<13)|0;Ft=(wt+(g>>>13)|0)+(Un>>>26)|0,Un&=67108863,xt=Math.imul(br,Mr),g=Math.imul(br,Pr),g=g+Math.imul(kr,Mr)|0,wt=Math.imul(kr,Pr),xt=xt+Math.imul(Tr,Br)|0,g=g+Math.imul(Tr,jr)|0,g=g+Math.imul(Ir,Br)|0,wt=wt+Math.imul(Ir,jr)|0,xt=xt+Math.imul(Ar,Ur)|0,g=g+Math.imul(Ar,Gr)|0,g=g+Math.imul(pr,Ur)|0,wt=wt+Math.imul(pr,Gr)|0,xt=xt+Math.imul(or,Xr)|0,g=g+Math.imul(or,hn)|0,g=g+Math.imul(cr,Xr)|0,wt=wt+Math.imul(cr,hn)|0;var jn=(Ft+xt|0)+((g&8191)<<13)|0;Ft=(wt+(g>>>13)|0)+(jn>>>26)|0,jn&=67108863,xt=Math.imul(qr,Mr),g=Math.imul(qr,Pr),g=g+Math.imul($r,Mr)|0,wt=Math.imul($r,Pr),xt=xt+Math.imul(br,Br)|0,g=g+Math.imul(br,jr)|0,g=g+Math.imul(kr,Br)|0,wt=wt+Math.imul(kr,jr)|0,xt=xt+Math.imul(Tr,Ur)|0,g=g+Math.imul(Tr,Gr)|0,g=g+Math.imul(Ir,Ur)|0,wt=wt+Math.imul(Ir,Gr)|0,xt=xt+Math.imul(Ar,Xr)|0,g=g+Math.imul(Ar,hn)|0,g=g+Math.imul(pr,Xr)|0,wt=wt+Math.imul(pr,hn)|0,xt=xt+Math.imul(or,Jr)|0,g=g+Math.imul(or,fn)|0,g=g+Math.imul(cr,Jr)|0,wt=wt+Math.imul(cr,fn)|0;var Vn=(Ft+xt|0)+((g&8191)<<13)|0;Ft=(wt+(g>>>13)|0)+(Vn>>>26)|0,Vn&=67108863,xt=Math.imul(Lr,Mr),g=Math.imul(Lr,Pr),g=g+Math.imul(Dr,Mr)|0,wt=Math.imul(Dr,Pr),xt=xt+Math.imul(qr,Br)|0,g=g+Math.imul(qr,jr)|0,g=g+Math.imul($r,Br)|0,wt=wt+Math.imul($r,jr)|0,xt=xt+Math.imul(br,Ur)|0,g=g+Math.imul(br,Gr)|0,g=g+Math.imul(kr,Ur)|0,wt=wt+Math.imul(kr,Gr)|0,xt=xt+Math.imul(Tr,Xr)|0,g=g+Math.imul(Tr,hn)|0,g=g+Math.imul(Ir,Xr)|0,wt=wt+Math.imul(Ir,hn)|0,xt=xt+Math.imul(Ar,Jr)|0,g=g+Math.imul(Ar,fn)|0,g=g+Math.imul(pr,Jr)|0,wt=wt+Math.imul(pr,fn)|0,xt=xt+Math.imul(or,Kr)|0,g=g+Math.imul(or,dn)|0,g=g+Math.imul(cr,Kr)|0,wt=wt+Math.imul(cr,dn)|0;var Nn=(Ft+xt|0)+((g&8191)<<13)|0;Ft=(wt+(g>>>13)|0)+(Nn>>>26)|0,Nn&=67108863,xt=Math.imul(Fr,Mr),g=Math.imul(Fr,Pr),g=g+Math.imul(zr,Mr)|0,wt=Math.imul(zr,Pr),xt=xt+Math.imul(Lr,Br)|0,g=g+Math.imul(Lr,jr)|0,g=g+Math.imul(Dr,Br)|0,wt=wt+Math.imul(Dr,jr)|0,xt=xt+Math.imul(qr,Ur)|0,g=g+Math.imul(qr,Gr)|0,g=g+Math.imul($r,Ur)|0,wt=wt+Math.imul($r,Gr)|0,xt=xt+Math.imul(br,Xr)|0,g=g+Math.imul(br,hn)|0,g=g+Math.imul(kr,Xr)|0,wt=wt+Math.imul(kr,hn)|0,xt=xt+Math.imul(Tr,Jr)|0,g=g+Math.imul(Tr,fn)|0,g=g+Math.imul(Ir,Jr)|0,wt=wt+Math.imul(Ir,fn)|0,xt=xt+Math.imul(Ar,Kr)|0,g=g+Math.imul(Ar,dn)|0,g=g+Math.imul(pr,Kr)|0,wt=wt+Math.imul(pr,dn)|0,xt=xt+Math.imul(or,Zr)|0,g=g+Math.imul(or,un)|0,g=g+Math.imul(cr,Zr)|0,wt=wt+Math.imul(cr,un)|0;var zn=(Ft+xt|0)+((g&8191)<<13)|0;Ft=(wt+(g>>>13)|0)+(zn>>>26)|0,zn&=67108863,xt=Math.imul(Nr,Mr),g=Math.imul(Nr,Pr),g=g+Math.imul(Wr,Mr)|0,wt=Math.imul(Wr,Pr),xt=xt+Math.imul(Fr,Br)|0,g=g+Math.imul(Fr,jr)|0,g=g+Math.imul(zr,Br)|0,wt=wt+Math.imul(zr,jr)|0,xt=xt+Math.imul(Lr,Ur)|0,g=g+Math.imul(Lr,Gr)|0,g=g+Math.imul(Dr,Ur)|0,wt=wt+Math.imul(Dr,Gr)|0,xt=xt+Math.imul(qr,Xr)|0,g=g+Math.imul(qr,hn)|0,g=g+Math.imul($r,Xr)|0,wt=wt+Math.imul($r,hn)|0,xt=xt+Math.imul(br,Jr)|0,g=g+Math.imul(br,fn)|0,g=g+Math.imul(kr,Jr)|0,wt=wt+Math.imul(kr,fn)|0,xt=xt+Math.imul(Tr,Kr)|0,g=g+Math.imul(Tr,dn)|0,g=g+Math.imul(Ir,Kr)|0,wt=wt+Math.imul(Ir,dn)|0,xt=xt+Math.imul(Ar,Zr)|0,g=g+Math.imul(Ar,un)|0,g=g+Math.imul(pr,Zr)|0,wt=wt+Math.imul(pr,un)|0,xt=xt+Math.imul(or,rn)|0,g=g+Math.imul(or,pn)|0,g=g+Math.imul(cr,rn)|0,wt=wt+Math.imul(cr,pn)|0;var Hn=(Ft+xt|0)+((g&8191)<<13)|0;Ft=(wt+(g>>>13)|0)+(Hn>>>26)|0,Hn&=67108863,xt=Math.imul(Or,Mr),g=Math.imul(Or,Pr),g=g+Math.imul(Yr,Mr)|0,wt=Math.imul(Yr,Pr),xt=xt+Math.imul(Nr,Br)|0,g=g+Math.imul(Nr,jr)|0,g=g+Math.imul(Wr,Br)|0,wt=wt+Math.imul(Wr,jr)|0,xt=xt+Math.imul(Fr,Ur)|0,g=g+Math.imul(Fr,Gr)|0,g=g+Math.imul(zr,Ur)|0,wt=wt+Math.imul(zr,Gr)|0,xt=xt+Math.imul(Lr,Xr)|0,g=g+Math.imul(Lr,hn)|0,g=g+Math.imul(Dr,Xr)|0,wt=wt+Math.imul(Dr,hn)|0,xt=xt+Math.imul(qr,Jr)|0,g=g+Math.imul(qr,fn)|0,g=g+Math.imul($r,Jr)|0,wt=wt+Math.imul($r,fn)|0,xt=xt+Math.imul(br,Kr)|0,g=g+Math.imul(br,dn)|0,g=g+Math.imul(kr,Kr)|0,wt=wt+Math.imul(kr,dn)|0,xt=xt+Math.imul(Tr,Zr)|0,g=g+Math.imul(Tr,un)|0,g=g+Math.imul(Ir,Zr)|0,wt=wt+Math.imul(Ir,un)|0,xt=xt+Math.imul(Ar,rn)|0,g=g+Math.imul(Ar,pn)|0,g=g+Math.imul(pr,rn)|0,wt=wt+Math.imul(pr,pn)|0,xt=xt+Math.imul(or,ln)|0,g=g+Math.imul(or,vn)|0,g=g+Math.imul(cr,ln)|0,wt=wt+Math.imul(cr,vn)|0;var Xn=(Ft+xt|0)+((g&8191)<<13)|0;Ft=(wt+(g>>>13)|0)+(Xn>>>26)|0,Xn&=67108863,xt=Math.imul(xr,Mr),g=Math.imul(xr,Pr),g=g+Math.imul(fr,Mr)|0,wt=Math.imul(fr,Pr),xt=xt+Math.imul(Or,Br)|0,g=g+Math.imul(Or,jr)|0,g=g+Math.imul(Yr,Br)|0,wt=wt+Math.imul(Yr,jr)|0,xt=xt+Math.imul(Nr,Ur)|0,g=g+Math.imul(Nr,Gr)|0,g=g+Math.imul(Wr,Ur)|0,wt=wt+Math.imul(Wr,Gr)|0,xt=xt+Math.imul(Fr,Xr)|0,g=g+Math.imul(Fr,hn)|0,g=g+Math.imul(zr,Xr)|0,wt=wt+Math.imul(zr,hn)|0,xt=xt+Math.imul(Lr,Jr)|0,g=g+Math.imul(Lr,fn)|0,g=g+Math.imul(Dr,Jr)|0,wt=wt+Math.imul(Dr,fn)|0,xt=xt+Math.imul(qr,Kr)|0,g=g+Math.imul(qr,dn)|0,g=g+Math.imul($r,Kr)|0,wt=wt+Math.imul($r,dn)|0,xt=xt+Math.imul(br,Zr)|0,g=g+Math.imul(br,un)|0,g=g+Math.imul(kr,Zr)|0,wt=wt+Math.imul(kr,un)|0,xt=xt+Math.imul(Tr,rn)|0,g=g+Math.imul(Tr,pn)|0,g=g+Math.imul(Ir,rn)|0,wt=wt+Math.imul(Ir,pn)|0,xt=xt+Math.imul(Ar,ln)|0,g=g+Math.imul(Ar,vn)|0,g=g+Math.imul(pr,ln)|0,wt=wt+Math.imul(pr,vn)|0,xt=xt+Math.imul(or,an)|0,g=g+Math.imul(or,mn)|0,g=g+Math.imul(cr,an)|0,wt=wt+Math.imul(cr,mn)|0;var qn=(Ft+xt|0)+((g&8191)<<13)|0;Ft=(wt+(g>>>13)|0)+(qn>>>26)|0,qn&=67108863,xt=Math.imul(xr,Br),g=Math.imul(xr,jr),g=g+Math.imul(fr,Br)|0,wt=Math.imul(fr,jr),xt=xt+Math.imul(Or,Ur)|0,g=g+Math.imul(Or,Gr)|0,g=g+Math.imul(Yr,Ur)|0,wt=wt+Math.imul(Yr,Gr)|0,xt=xt+Math.imul(Nr,Xr)|0,g=g+Math.imul(Nr,hn)|0,g=g+Math.imul(Wr,Xr)|0,wt=wt+Math.imul(Wr,hn)|0,xt=xt+Math.imul(Fr,Jr)|0,g=g+Math.imul(Fr,fn)|0,g=g+Math.imul(zr,Jr)|0,wt=wt+Math.imul(zr,fn)|0,xt=xt+Math.imul(Lr,Kr)|0,g=g+Math.imul(Lr,dn)|0,g=g+Math.imul(Dr,Kr)|0,wt=wt+Math.imul(Dr,dn)|0,xt=xt+Math.imul(qr,Zr)|0,g=g+Math.imul(qr,un)|0,g=g+Math.imul($r,Zr)|0,wt=wt+Math.imul($r,un)|0,xt=xt+Math.imul(br,rn)|0,g=g+Math.imul(br,pn)|0,g=g+Math.imul(kr,rn)|0,wt=wt+Math.imul(kr,pn)|0,xt=xt+Math.imul(Tr,ln)|0,g=g+Math.imul(Tr,vn)|0,g=g+Math.imul(Ir,ln)|0,wt=wt+Math.imul(Ir,vn)|0,xt=xt+Math.imul(Ar,an)|0,g=g+Math.imul(Ar,mn)|0,g=g+Math.imul(pr,an)|0,wt=wt+Math.imul(pr,mn)|0;var Wn=(Ft+xt|0)+((g&8191)<<13)|0;Ft=(wt+(g>>>13)|0)+(Wn>>>26)|0,Wn&=67108863,xt=Math.imul(xr,Ur),g=Math.imul(xr,Gr),g=g+Math.imul(fr,Ur)|0,wt=Math.imul(fr,Gr),xt=xt+Math.imul(Or,Xr)|0,g=g+Math.imul(Or,hn)|0,g=g+Math.imul(Yr,Xr)|0,wt=wt+Math.imul(Yr,hn)|0,xt=xt+Math.imul(Nr,Jr)|0,g=g+Math.imul(Nr,fn)|0,g=g+Math.imul(Wr,Jr)|0,wt=wt+Math.imul(Wr,fn)|0,xt=xt+Math.imul(Fr,Kr)|0,g=g+Math.imul(Fr,dn)|0,g=g+Math.imul(zr,Kr)|0,wt=wt+Math.imul(zr,dn)|0,xt=xt+Math.imul(Lr,Zr)|0,g=g+Math.imul(Lr,un)|0,g=g+Math.imul(Dr,Zr)|0,wt=wt+Math.imul(Dr,un)|0,xt=xt+Math.imul(qr,rn)|0,g=g+Math.imul(qr,pn)|0,g=g+Math.imul($r,rn)|0,wt=wt+Math.imul($r,pn)|0,xt=xt+Math.imul(br,ln)|0,g=g+Math.imul(br,vn)|0,g=g+Math.imul(kr,ln)|0,wt=wt+Math.imul(kr,vn)|0,xt=xt+Math.imul(Tr,an)|0,g=g+Math.imul(Tr,mn)|0,g=g+Math.imul(Ir,an)|0,wt=wt+Math.imul(Ir,mn)|0;var On=(Ft+xt|0)+((g&8191)<<13)|0;Ft=(wt+(g>>>13)|0)+(On>>>26)|0,On&=67108863,xt=Math.imul(xr,Xr),g=Math.imul(xr,hn),g=g+Math.imul(fr,Xr)|0,wt=Math.imul(fr,hn),xt=xt+Math.imul(Or,Jr)|0,g=g+Math.imul(Or,fn)|0,g=g+Math.imul(Yr,Jr)|0,wt=wt+Math.imul(Yr,fn)|0,xt=xt+Math.imul(Nr,Kr)|0,g=g+Math.imul(Nr,dn)|0,g=g+Math.imul(Wr,Kr)|0,wt=wt+Math.imul(Wr,dn)|0,xt=xt+Math.imul(Fr,Zr)|0,g=g+Math.imul(Fr,un)|0,g=g+Math.imul(zr,Zr)|0,wt=wt+Math.imul(zr,un)|0,xt=xt+Math.imul(Lr,rn)|0,g=g+Math.imul(Lr,pn)|0,g=g+Math.imul(Dr,rn)|0,wt=wt+Math.imul(Dr,pn)|0,xt=xt+Math.imul(qr,ln)|0,g=g+Math.imul(qr,vn)|0,g=g+Math.imul($r,ln)|0,wt=wt+Math.imul($r,vn)|0,xt=xt+Math.imul(br,an)|0,g=g+Math.imul(br,mn)|0,g=g+Math.imul(kr,an)|0,wt=wt+Math.imul(kr,mn)|0;var $n=(Ft+xt|0)+((g&8191)<<13)|0;Ft=(wt+(g>>>13)|0)+($n>>>26)|0,$n&=67108863,xt=Math.imul(xr,Jr),g=Math.imul(xr,fn),g=g+Math.imul(fr,Jr)|0,wt=Math.imul(fr,fn),xt=xt+Math.imul(Or,Kr)|0,g=g+Math.imul(Or,dn)|0,g=g+Math.imul(Yr,Kr)|0,wt=wt+Math.imul(Yr,dn)|0,xt=xt+Math.imul(Nr,Zr)|0,g=g+Math.imul(Nr,un)|0,g=g+Math.imul(Wr,Zr)|0,wt=wt+Math.imul(Wr,un)|0,xt=xt+Math.imul(Fr,rn)|0,g=g+Math.imul(Fr,pn)|0,g=g+Math.imul(zr,rn)|0,wt=wt+Math.imul(zr,pn)|0,xt=xt+Math.imul(Lr,ln)|0,g=g+Math.imul(Lr,vn)|0,g=g+Math.imul(Dr,ln)|0,wt=wt+Math.imul(Dr,vn)|0,xt=xt+Math.imul(qr,an)|0,g=g+Math.imul(qr,mn)|0,g=g+Math.imul($r,an)|0,wt=wt+Math.imul($r,mn)|0;var Dn=(Ft+xt|0)+((g&8191)<<13)|0;Ft=(wt+(g>>>13)|0)+(Dn>>>26)|0,Dn&=67108863,xt=Math.imul(xr,Kr),g=Math.imul(xr,dn),g=g+Math.imul(fr,Kr)|0,wt=Math.imul(fr,dn),xt=xt+Math.imul(Or,Zr)|0,g=g+Math.imul(Or,un)|0,g=g+Math.imul(Yr,Zr)|0,wt=wt+Math.imul(Yr,un)|0,xt=xt+Math.imul(Nr,rn)|0,g=g+Math.imul(Nr,pn)|0,g=g+Math.imul(Wr,rn)|0,wt=wt+Math.imul(Wr,pn)|0,xt=xt+Math.imul(Fr,ln)|0,g=g+Math.imul(Fr,vn)|0,g=g+Math.imul(zr,ln)|0,wt=wt+Math.imul(zr,vn)|0,xt=xt+Math.imul(Lr,an)|0,g=g+Math.imul(Lr,mn)|0,g=g+Math.imul(Dr,an)|0,wt=wt+Math.imul(Dr,mn)|0;var Ln=(Ft+xt|0)+((g&8191)<<13)|0;Ft=(wt+(g>>>13)|0)+(Ln>>>26)|0,Ln&=67108863,xt=Math.imul(xr,Zr),g=Math.imul(xr,un),g=g+Math.imul(fr,Zr)|0,wt=Math.imul(fr,un),xt=xt+Math.imul(Or,rn)|0,g=g+Math.imul(Or,pn)|0,g=g+Math.imul(Yr,rn)|0,wt=wt+Math.imul(Yr,pn)|0,xt=xt+Math.imul(Nr,ln)|0,g=g+Math.imul(Nr,vn)|0,g=g+Math.imul(Wr,ln)|0,wt=wt+Math.imul(Wr,vn)|0,xt=xt+Math.imul(Fr,an)|0,g=g+Math.imul(Fr,mn)|0,g=g+Math.imul(zr,an)|0,wt=wt+Math.imul(zr,mn)|0;var Zn=(Ft+xt|0)+((g&8191)<<13)|0;Ft=(wt+(g>>>13)|0)+(Zn>>>26)|0,Zn&=67108863,xt=Math.imul(xr,rn),g=Math.imul(xr,pn),g=g+Math.imul(fr,rn)|0,wt=Math.imul(fr,pn),xt=xt+Math.imul(Or,ln)|0,g=g+Math.imul(Or,vn)|0,g=g+Math.imul(Yr,ln)|0,wt=wt+Math.imul(Yr,vn)|0,xt=xt+Math.imul(Nr,an)|0,g=g+Math.imul(Nr,mn)|0,g=g+Math.imul(Wr,an)|0,wt=wt+Math.imul(Wr,mn)|0;var Gn=(Ft+xt|0)+((g&8191)<<13)|0;Ft=(wt+(g>>>13)|0)+(Gn>>>26)|0,Gn&=67108863,xt=Math.imul(xr,ln),g=Math.imul(xr,vn),g=g+Math.imul(fr,ln)|0,wt=Math.imul(fr,vn),xt=xt+Math.imul(Or,an)|0,g=g+Math.imul(Or,mn)|0,g=g+Math.imul(Yr,an)|0,wt=wt+Math.imul(Yr,mn)|0;var Kn=(Ft+xt|0)+((g&8191)<<13)|0;Ft=(wt+(g>>>13)|0)+(Kn>>>26)|0,Kn&=67108863,xt=Math.imul(xr,an),g=Math.imul(xr,mn),g=g+Math.imul(fr,an)|0,wt=Math.imul(fr,mn);var Qn=(Ft+xt|0)+((g&8191)<<13)|0;return Ft=(wt+(g>>>13)|0)+(Qn>>>26)|0,Qn&=67108863,kt[0]=Sn,kt[1]=Tn,kt[2]=Un,kt[3]=jn,kt[4]=Vn,kt[5]=Nn,kt[6]=zn,kt[7]=Hn,kt[8]=Xn,kt[9]=qn,kt[10]=Wn,kt[11]=On,kt[12]=$n,kt[13]=Dn,kt[14]=Ln,kt[15]=Zn,kt[16]=Gn,kt[17]=Kn,kt[18]=Qn,Ft!==0&&(kt[19]=Ft,b.length++),b};Math.imul||(Qt=Lt);function ir(Mt,h,_){_.negative=h.negative^Mt.negative,_.length=Mt.length+h.length;for(var b=0,lt=0,Rt=0;Rt<_.length-1;Rt++){var kt=lt;lt=0;for(var Ft=b&67108863,xt=Math.min(Rt,h.length-1),g=Math.max(0,Rt-Mt.length+1);g<=xt;g++){var wt=Rt-g,nr=Mt.words[wt]|0,or=h.words[g]|0,cr=nr*or,Rr=cr&67108863;kt=kt+(cr/67108864|0)|0,Rr=Rr+Ft|0,Ft=Rr&67108863,kt=kt+(Rr>>>26)|0,lt+=kt>>>26,kt&=67108863}_.words[Rt]=Ft,b=kt,kt=lt}return b!==0?_.words[Rt]=b:_.length--,_.strip()}function er(Mt,h,_){var b=new tr;return b.mulp(Mt,h,_)}c.prototype.mulTo=function(h,_){var b,lt=this.length+h.length;return this.length===10&&h.length===10?b=Qt(this,h,_):lt<63?b=Lt(this,h,_):lt<1024?b=ir(this,h,_):b=er(this,h,_),b};function tr(Mt,h){this.x=Mt,this.y=h}tr.prototype.makeRBT=function(h){for(var _=new Array(h),b=c.prototype._countBits(h)-1,lt=0;lt<h;lt++)_[lt]=this.revBin(lt,b,h);return _},tr.prototype.revBin=function(h,_,b){if(h===0||h===b-1)return h;for(var lt=0,Rt=0;Rt<_;Rt++)lt|=(h&1)<<_-Rt-1,h>>=1;return lt},tr.prototype.permute=function(h,_,b,lt,Rt,kt){for(var Ft=0;Ft<kt;Ft++)lt[Ft]=_[h[Ft]],Rt[Ft]=b[h[Ft]]},tr.prototype.transform=function(h,_,b,lt,Rt,kt){this.permute(kt,h,_,b,lt,Rt);for(var Ft=1;Ft<Rt;Ft<<=1)for(var xt=Ft<<1,g=Math.cos(2*Math.PI/xt),wt=Math.sin(2*Math.PI/xt),nr=0;nr<Rt;nr+=xt)for(var or=g,cr=wt,Rr=0;Rr<Ft;Rr++){var Ar=b[nr+Rr],pr=lt[nr+Rr],wr=b[nr+Rr+Ft],Tr=lt[nr+Rr+Ft],Ir=or*wr-cr*Tr;Tr=or*Tr+cr*wr,wr=Ir,b[nr+Rr]=Ar+wr,lt[nr+Rr]=pr+Tr,b[nr+Rr+Ft]=Ar-wr,lt[nr+Rr+Ft]=pr-Tr,Rr!==xt&&(Ir=g*or-wt*cr,cr=g*cr+wt*or,or=Ir)}},tr.prototype.guessLen13b=function(h,_){var b=Math.max(_,h)|1,lt=b&1,Rt=0;for(b=b/2|0;b;b=b>>>1)Rt++;return 1<<Rt+1+lt},tr.prototype.conjugate=function(h,_,b){if(!(b<=1))for(var lt=0;lt<b/2;lt++){var Rt=h[lt];h[lt]=h[b-lt-1],h[b-lt-1]=Rt,Rt=_[lt],_[lt]=-_[b-lt-1],_[b-lt-1]=-Rt}},tr.prototype.normalize13b=function(h,_){for(var b=0,lt=0;lt<_/2;lt++){var Rt=Math.round(h[2*lt+1]/_)*8192+Math.round(h[2*lt]/_)+b;h[lt]=Rt&67108863,Rt<67108864?b=0:b=Rt/67108864|0}return h},tr.prototype.convert13b=function(h,_,b,lt){for(var Rt=0,kt=0;kt<_;kt++)Rt=Rt+(h[kt]|0),b[2*kt]=Rt&8191,Rt=Rt>>>13,b[2*kt+1]=Rt&8191,Rt=Rt>>>13;for(kt=2*_;kt<lt;++kt)b[kt]=0;a(Rt===0),a((Rt&-8192)===0)},tr.prototype.stub=function(h){for(var _=new Array(h),b=0;b<h;b++)_[b]=0;return _},tr.prototype.mulp=function(h,_,b){var lt=2*this.guessLen13b(h.length,_.length),Rt=this.makeRBT(lt),kt=this.stub(lt),Ft=new Array(lt),xt=new Array(lt),g=new Array(lt),wt=new Array(lt),nr=new Array(lt),or=new Array(lt),cr=b.words;cr.length=lt,this.convert13b(h.words,h.length,Ft,lt),this.convert13b(_.words,_.length,wt,lt),this.transform(Ft,kt,xt,g,lt,Rt),this.transform(wt,kt,nr,or,lt,Rt);for(var Rr=0;Rr<lt;Rr++){var Ar=xt[Rr]*nr[Rr]-g[Rr]*or[Rr];g[Rr]=xt[Rr]*or[Rr]+g[Rr]*nr[Rr],xt[Rr]=Ar}return this.conjugate(xt,g,lt),this.transform(xt,g,cr,kt,lt,Rt),this.conjugate(cr,kt,lt),this.normalize13b(cr,lt),b.negative=h.negative^_.negative,b.length=h.length+_.length,b.strip()},c.prototype.mul=function(h){var _=new c(null);return _.words=new Array(this.length+h.length),this.mulTo(h,_)},c.prototype.mulf=function(h){var _=new c(null);return _.words=new Array(this.length+h.length),er(this,h,_)},c.prototype.imul=function(h){return this.clone().mulTo(h,this)},c.prototype.imuln=function(h){a(typeof h=="number"),a(h<67108864);for(var _=0,b=0;b<this.length;b++){var lt=(this.words[b]|0)*h,Rt=(lt&67108863)+(_&67108863);_>>=26,_+=lt/67108864|0,_+=Rt>>>26,this.words[b]=Rt&67108863}return _!==0&&(this.words[b]=_,this.length++),this.length=h===0?1:this.length,this},c.prototype.muln=function(h){return this.clone().imuln(h)},c.prototype.sqr=function(){return this.mul(this)},c.prototype.isqr=function(){return this.imul(this.clone())},c.prototype.pow=function(h){var _=Ot(h);if(_.length===0)return new c(1);for(var b=this,lt=0;lt<_.length&&_[lt]===0;lt++,b=b.sqr());if(++lt<_.length)for(var Rt=b.sqr();lt<_.length;lt++,Rt=Rt.sqr())_[lt]!==0&&(b=b.mul(Rt));return b},c.prototype.iushln=function(h){a(typeof h=="number"&&h>=0);var _=h%26,b=(h-_)/26,lt=67108863>>>26-_<<26-_,Rt;if(_!==0){var kt=0;for(Rt=0;Rt<this.length;Rt++){var Ft=this.words[Rt]&lt,xt=(this.words[Rt]|0)-Ft<<_;this.words[Rt]=xt|kt,kt=Ft>>>26-_}kt&&(this.words[Rt]=kt,this.length++)}if(b!==0){for(Rt=this.length-1;Rt>=0;Rt--)this.words[Rt+b]=this.words[Rt];for(Rt=0;Rt<b;Rt++)this.words[Rt]=0;this.length+=b}return this.strip()},c.prototype.ishln=function(h){return a(this.negative===0),this.iushln(h)},c.prototype.iushrn=function(h,_,b){a(typeof h=="number"&&h>=0);var lt;_?lt=(_-_%26)/26:lt=0;var Rt=h%26,kt=Math.min((h-Rt)/26,this.length),Ft=67108863^67108863>>>Rt<<Rt,xt=b;if(lt-=kt,lt=Math.max(0,lt),xt){for(var g=0;g<kt;g++)xt.words[g]=this.words[g];xt.length=kt}if(kt!==0)if(this.length>kt)for(this.length-=kt,g=0;g<this.length;g++)this.words[g]=this.words[g+kt];else this.words[0]=0,this.length=1;var wt=0;for(g=this.length-1;g>=0&&(wt!==0||g>=lt);g--){var nr=this.words[g]|0;this.words[g]=wt<<26-Rt|nr>>>Rt,wt=nr&Ft}return xt&&wt!==0&&(xt.words[xt.length++]=wt),this.length===0&&(this.words[0]=0,this.length=1),this.strip()},c.prototype.ishrn=function(h,_,b){return a(this.negative===0),this.iushrn(h,_,b)},c.prototype.shln=function(h){return this.clone().ishln(h)},c.prototype.ushln=function(h){return this.clone().iushln(h)},c.prototype.shrn=function(h){return this.clone().ishrn(h)},c.prototype.ushrn=function(h){return this.clone().iushrn(h)},c.prototype.testn=function(h){a(typeof h=="number"&&h>=0);var _=h%26,b=(h-_)/26,lt=1<<_;if(this.length<=b)return!1;var Rt=this.words[b];return!!(Rt&lt)},c.prototype.imaskn=function(h){a(typeof h=="number"&&h>=0);var _=h%26,b=(h-_)/26;if(a(this.negative===0,"imaskn works only with positive numbers"),this.length<=b)return this;if(_!==0&&b++,this.length=Math.min(b,this.length),_!==0){var lt=67108863^67108863>>>_<<_;this.words[this.length-1]&=lt}return this.strip()},c.prototype.maskn=function(h){return this.clone().imaskn(h)},c.prototype.iaddn=function(h){return a(typeof h=="number"),a(h<67108864),h<0?this.isubn(-h):this.negative!==0?this.length===1&&(this.words[0]|0)<h?(this.words[0]=h-(this.words[0]|0),this.negative=0,this):(this.negative=0,this.isubn(h),this.negative=1,this):this._iaddn(h)},c.prototype._iaddn=function(h){this.words[0]+=h;for(var _=0;_<this.length&&this.words[_]>=67108864;_++)this.words[_]-=67108864,_===this.length-1?this.words[_+1]=1:this.words[_+1]++;return this.length=Math.max(this.length,_+1),this},c.prototype.isubn=function(h){if(a(typeof h=="number"),a(h<67108864),h<0)return this.iaddn(-h);if(this.negative!==0)return this.negative=0,this.iaddn(h),this.negative=1,this;if(this.words[0]-=h,this.length===1&&this.words[0]<0)this.words[0]=-this.words[0],this.negative=1;else for(var _=0;_<this.length&&this.words[_]<0;_++)this.words[_]+=67108864,this.words[_+1]-=1;return this.strip()},c.prototype.addn=function(h){return this.clone().iaddn(h)},c.prototype.subn=function(h){return this.clone().isubn(h)},c.prototype.iabs=function(){return this.negative=0,this},c.prototype.abs=function(){return this.clone().iabs()},c.prototype._ishlnsubmul=function(h,_,b){var lt=h.length+b,Rt;this._expand(lt);var kt,Ft=0;for(Rt=0;Rt<h.length;Rt++){kt=(this.words[Rt+b]|0)+Ft;var xt=(h.words[Rt]|0)*_;kt-=xt&67108863,Ft=(kt>>26)-(xt/67108864|0),this.words[Rt+b]=kt&67108863}for(;Rt<this.length-b;Rt++)kt=(this.words[Rt+b]|0)+Ft,Ft=kt>>26,this.words[Rt+b]=kt&67108863;if(Ft===0)return this.strip();for(a(Ft===-1),Ft=0,Rt=0;Rt<this.length;Rt++)kt=-(this.words[Rt]|0)+Ft,Ft=kt>>26,this.words[Rt]=kt&67108863;return this.negative=1,this.strip()},c.prototype._wordDiv=function(h,_){var b=this.length-h.length,lt=this.clone(),Rt=h,kt=Rt.words[Rt.length-1]|0,Ft=this._countBits(kt);b=26-Ft,b!==0&&(Rt=Rt.ushln(b),lt.iushln(b),kt=Rt.words[Rt.length-1]|0);var xt=lt.length-Rt.length,g;if(_!=="mod"){g=new c(null),g.length=xt+1,g.words=new Array(g.length);for(var wt=0;wt<g.length;wt++)g.words[wt]=0}var nr=lt.clone()._ishlnsubmul(Rt,1,xt);nr.negative===0&&(lt=nr,g&&(g.words[xt]=1));for(var or=xt-1;or>=0;or--){var cr=(lt.words[Rt.length+or]|0)*67108864+(lt.words[Rt.length+or-1]|0);for(cr=Math.min(cr/kt|0,67108863),lt._ishlnsubmul(Rt,cr,or);lt.negative!==0;)cr--,lt.negative=0,lt._ishlnsubmul(Rt,1,or),lt.isZero()||(lt.negative^=1);g&&(g.words[or]=cr)}return g&&g.strip(),lt.strip(),_!=="div"&&b!==0&&lt.iushrn(b),{div:g||null,mod:lt}},c.prototype.divmod=function(h,_,b){if(a(!h.isZero()),this.isZero())return{div:new c(0),mod:new c(0)};var lt,Rt,kt;return this.negative!==0&&h.negative===0?(kt=this.neg().divmod(h,_),_!=="mod"&&(lt=kt.div.neg()),_!=="div"&&(Rt=kt.mod.neg(),b&&Rt.negative!==0&&Rt.iadd(h)),{div:lt,mod:Rt}):this.negative===0&&h.negative!==0?(kt=this.divmod(h.neg(),_),_!=="mod"&&(lt=kt.div.neg()),{div:lt,mod:kt.mod}):this.negative&h.negative?(kt=this.neg().divmod(h.neg(),_),_!=="div"&&(Rt=kt.mod.neg(),b&&Rt.negative!==0&&Rt.isub(h)),{div:kt.div,mod:Rt}):h.length>this.length||this.cmp(h)<0?{div:new c(0),mod:this}:h.length===1?_==="div"?{div:this.divn(h.words[0]),mod:null}:_==="mod"?{div:null,mod:new c(this.modn(h.words[0]))}:{div:this.divn(h.words[0]),mod:new c(this.modn(h.words[0]))}:this._wordDiv(h,_)},c.prototype.div=function(h){return this.divmod(h,"div",!1).div},c.prototype.mod=function(h){return this.divmod(h,"mod",!1).mod},c.prototype.umod=function(h){return this.divmod(h,"mod",!0).mod},c.prototype.divRound=function(h){var _=this.divmod(h);if(_.mod.isZero())return _.div;var b=_.div.negative!==0?_.mod.isub(h):_.mod,lt=h.ushrn(1),Rt=h.andln(1),kt=b.cmp(lt);return kt<0||Rt===1&&kt===0?_.div:_.div.negative!==0?_.div.isubn(1):_.div.iaddn(1)},c.prototype.modn=function(h){a(h<=67108863);for(var _=(1<<26)%h,b=0,lt=this.length-1;lt>=0;lt--)b=(_*b+(this.words[lt]|0))%h;return b},c.prototype.idivn=function(h){a(h<=67108863);for(var _=0,b=this.length-1;b>=0;b--){var lt=(this.words[b]|0)+_*67108864;this.words[b]=lt/h|0,_=lt%h}return this.strip()},c.prototype.divn=function(h){return this.clone().idivn(h)},c.prototype.egcd=function(h){a(h.negative===0),a(!h.isZero());var _=this,b=h.clone();_.negative!==0?_=_.umod(h):_=_.clone();for(var lt=new c(1),Rt=new c(0),kt=new c(0),Ft=new c(1),xt=0;_.isEven()&&b.isEven();)_.iushrn(1),b.iushrn(1),++xt;for(var g=b.clone(),wt=_.clone();!_.isZero();){for(var nr=0,or=1;!(_.words[0]&or)&&nr<26;++nr,or<<=1);if(nr>0)for(_.iushrn(nr);nr-- >0;)(lt.isOdd()||Rt.isOdd())&&(lt.iadd(g),Rt.isub(wt)),lt.iushrn(1),Rt.iushrn(1);for(var cr=0,Rr=1;!(b.words[0]&Rr)&&cr<26;++cr,Rr<<=1);if(cr>0)for(b.iushrn(cr);cr-- >0;)(kt.isOdd()||Ft.isOdd())&&(kt.iadd(g),Ft.isub(wt)),kt.iushrn(1),Ft.iushrn(1);_.cmp(b)>=0?(_.isub(b),lt.isub(kt),Rt.isub(Ft)):(b.isub(_),kt.isub(lt),Ft.isub(Rt))}return{a:kt,b:Ft,gcd:b.iushln(xt)}},c.prototype._invmp=function(h){a(h.negative===0),a(!h.isZero());var _=this,b=h.clone();_.negative!==0?_=_.umod(h):_=_.clone();for(var lt=new c(1),Rt=new c(0),kt=b.clone();_.cmpn(1)>0&&b.cmpn(1)>0;){for(var Ft=0,xt=1;!(_.words[0]&xt)&&Ft<26;++Ft,xt<<=1);if(Ft>0)for(_.iushrn(Ft);Ft-- >0;)lt.isOdd()&&lt.iadd(kt),lt.iushrn(1);for(var g=0,wt=1;!(b.words[0]&wt)&&g<26;++g,wt<<=1);if(g>0)for(b.iushrn(g);g-- >0;)Rt.isOdd()&&Rt.iadd(kt),Rt.iushrn(1);_.cmp(b)>=0?(_.isub(b),lt.isub(Rt)):(b.isub(_),Rt.isub(lt))}var nr;return _.cmpn(1)===0?nr=lt:nr=Rt,nr.cmpn(0)<0&&nr.iadd(h),nr},c.prototype.gcd=function(h){if(this.isZero())return h.abs();if(h.isZero())return this.abs();var _=this.clone(),b=h.clone();_.negative=0,b.negative=0;for(var lt=0;_.isEven()&&b.isEven();lt++)_.iushrn(1),b.iushrn(1);do{for(;_.isEven();)_.iushrn(1);for(;b.isEven();)b.iushrn(1);var Rt=_.cmp(b);if(Rt<0){var kt=_;_=b,b=kt}else if(Rt===0||b.cmpn(1)===0)break;_.isub(b)}while(!0);return b.iushln(lt)},c.prototype.invm=function(h){return this.egcd(h).a.umod(h)},c.prototype.isEven=function(){return(this.words[0]&1)===0},c.prototype.isOdd=function(){return(this.words[0]&1)===1},c.prototype.andln=function(h){return this.words[0]&h},c.prototype.bincn=function(h){a(typeof h=="number");var _=h%26,b=(h-_)/26,lt=1<<_;if(this.length<=b)return this._expand(b+1),this.words[b]|=lt,this;for(var Rt=lt,kt=b;Rt!==0&&kt<this.length;kt++){var Ft=this.words[kt]|0;Ft+=Rt,Rt=Ft>>>26,Ft&=67108863,this.words[kt]=Ft}return Rt!==0&&(this.words[kt]=Rt,this.length++),this},c.prototype.isZero=function(){return this.length===1&&this.words[0]===0},c.prototype.cmpn=function(h){var _=h<0;if(this.negative!==0&&!_)return-1;if(this.negative===0&&_)return 1;this.strip();var b;if(this.length>1)b=1;else{_&&(h=-h),a(h<=67108863,"Number is too big");var lt=this.words[0]|0;b=lt===h?0:lt<h?-1:1}return this.negative!==0?-b|0:b},c.prototype.cmp=function(h){if(this.negative!==0&&h.negative===0)return-1;if(this.negative===0&&h.negative!==0)return 1;var _=this.ucmp(h);return this.negative!==0?-_|0:_},c.prototype.ucmp=function(h){if(this.length>h.length)return 1;if(this.length<h.length)return-1;for(var _=0,b=this.length-1;b>=0;b--){var lt=this.words[b]|0,Rt=h.words[b]|0;if(lt!==Rt){lt<Rt?_=-1:lt>Rt&&(_=1);break}}return _},c.prototype.gtn=function(h){return this.cmpn(h)===1},c.prototype.gt=function(h){return this.cmp(h)===1},c.prototype.gten=function(h){return this.cmpn(h)>=0},c.prototype.gte=function(h){return this.cmp(h)>=0},c.prototype.ltn=function(h){return this.cmpn(h)===-1},c.prototype.lt=function(h){return this.cmp(h)===-1},c.prototype.lten=function(h){return this.cmpn(h)<=0},c.prototype.lte=function(h){return this.cmp(h)<=0},c.prototype.eqn=function(h){return this.cmpn(h)===0},c.prototype.eq=function(h){return this.cmp(h)===0},c.red=function(h){return new lr(h)},c.prototype.toRed=function(h){return a(!this.red,"Already a number in reduction context"),a(this.negative===0,"red works only with positives"),h.convertTo(this)._forceRed(h)},c.prototype.fromRed=function(){return a(this.red,"fromRed works only with numbers in reduction context"),this.red.convertFrom(this)},c.prototype._forceRed=function(h){return this.red=h,this},c.prototype.forceRed=function(h){return a(!this.red,"Already a number in reduction context"),this._forceRed(h)},c.prototype.redAdd=function(h){return a(this.red,"redAdd works only with red numbers"),this.red.add(this,h)},c.prototype.redIAdd=function(h){return a(this.red,"redIAdd works only with red numbers"),this.red.iadd(this,h)},c.prototype.redSub=function(h){return a(this.red,"redSub works only with red numbers"),this.red.sub(this,h)},c.prototype.redISub=function(h){return a(this.red,"redISub works only with red numbers"),this.red.isub(this,h)},c.prototype.redShl=function(h){return a(this.red,"redShl works only with red numbers"),this.red.shl(this,h)},c.prototype.redMul=function(h){return a(this.red,"redMul works only with red numbers"),this.red._verify2(this,h),this.red.mul(this,h)},c.prototype.redIMul=function(h){return a(this.red,"redMul works only with red numbers"),this.red._verify2(this,h),this.red.imul(this,h)},c.prototype.redSqr=function(){return a(this.red,"redSqr works only with red numbers"),this.red._verify1(this),this.red.sqr(this)},c.prototype.redISqr=function(){return a(this.red,"redISqr works only with red numbers"),this.red._verify1(this),this.red.isqr(this)},c.prototype.redSqrt=function(){return a(this.red,"redSqrt works only with red numbers"),this.red._verify1(this),this.red.sqrt(this)},c.prototype.redInvm=function(){return a(this.red,"redInvm works only with red numbers"),this.red._verify1(this),this.red.invm(this)},c.prototype.redNeg=function(){return a(this.red,"redNeg works only with red numbers"),this.red._verify1(this),this.red.neg(this)},c.prototype.redPow=function(h){return a(this.red&&!h.red,"redPow(normalNum)"),this.red._verify1(this),this.red.pow(this,h)};var sr={k256:null,p224:null,p192:null,p25519:null};function ar(Mt,h){this.name=Mt,this.p=new c(h,16),this.n=this.p.bitLength(),this.k=new c(1).iushln(this.n).isub(this.p),this.tmp=this._tmp()}ar.prototype._tmp=function(){var h=new c(null);return h.words=new Array(Math.ceil(this.n/13)),h},ar.prototype.ireduce=function(h){var _=h,b;do this.split(_,this.tmp),_=this.imulK(_),_=_.iadd(this.tmp),b=_.bitLength();while(b>this.n);var lt=b<this.n?-1:_.ucmp(this.p);return lt===0?(_.words[0]=0,_.length=1):lt>0?_.isub(this.p):_.strip!==void 0?_.strip():_._strip(),_},ar.prototype.split=function(h,_){h.iushrn(this.n,0,_)},ar.prototype.imulK=function(h){return h.imul(this.k)};function hr(){ar.call(this,"k256","ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff fffffffe fffffc2f")}d(hr,ar),hr.prototype.split=function(h,_){for(var b=4194303,lt=Math.min(h.length,9),Rt=0;Rt<lt;Rt++)_.words[Rt]=h.words[Rt];if(_.length=lt,h.length<=9){h.words[0]=0,h.length=1;return}var kt=h.words[9];for(_.words[_.length++]=kt&b,Rt=10;Rt<h.length;Rt++){var Ft=h.words[Rt]|0;h.words[Rt-10]=(Ft&b)<<4|kt>>>22,kt=Ft}kt>>>=22,h.words[Rt-10]=kt,kt===0&&h.length>10?h.length-=10:h.length-=9},hr.prototype.imulK=function(h){h.words[h.length]=0,h.words[h.length+1]=0,h.length+=2;for(var _=0,b=0;b<h.length;b++){var lt=h.words[b]|0;_+=lt*977,h.words[b]=_&67108863,_=lt*64+(_/67108864|0)}return h.words[h.length-1]===0&&(h.length--,h.words[h.length-1]===0&&h.length--),h};function _r(){ar.call(this,"p224","ffffffff ffffffff ffffffff ffffffff 00000000 00000000 00000001")}d(_r,ar);function dr(){ar.call(this,"p192","ffffffff ffffffff ffffffff fffffffe ffffffff ffffffff")}d(dr,ar);function ur(){ar.call(this,"25519","7fffffffffffffff ffffffffffffffff ffffffffffffffff ffffffffffffffed")}d(ur,ar),ur.prototype.imulK=function(h){for(var _=0,b=0;b<h.length;b++){var lt=(h.words[b]|0)*19+_,Rt=lt&67108863;lt>>>=26,h.words[b]=Rt,_=lt}return _!==0&&(h.words[h.length++]=_),h},c._prime=function(h){if(sr[h])return sr[h];var _;if(h==="k256")_=new hr;else if(h==="p224")_=new _r;else if(h==="p192")_=new dr;else if(h==="p25519")_=new ur;else throw new Error("Unknown prime "+h);return sr[h]=_,_};function lr(Mt){if(typeof Mt=="string"){var h=c._prime(Mt);this.m=h.p,this.prime=h}else a(Mt.gtn(1),"modulus must be greater than 1"),this.m=Mt,this.prime=null}lr.prototype._verify1=function(h){a(h.negative===0,"red works only with positives"),a(h.red,"red works only with red numbers")},lr.prototype._verify2=function(h,_){a((h.negative|_.negative)===0,"red works only with positives"),a(h.red&&h.red===_.red,"red works only with red numbers")},lr.prototype.imod=function(h){return this.prime?this.prime.ireduce(h)._forceRed(this):h.umod(this.m)._forceRed(this)},lr.prototype.neg=function(h){return h.isZero()?h.clone():this.m.sub(h)._forceRed(this)},lr.prototype.add=function(h,_){this._verify2(h,_);var b=h.add(_);return b.cmp(this.m)>=0&&b.isub(this.m),b._forceRed(this)},lr.prototype.iadd=function(h,_){this._verify2(h,_);var b=h.iadd(_);return b.cmp(this.m)>=0&&b.isub(this.m),b},lr.prototype.sub=function(h,_){this._verify2(h,_);var b=h.sub(_);return b.cmpn(0)<0&&b.iadd(this.m),b._forceRed(this)},lr.prototype.isub=function(h,_){this._verify2(h,_);var b=h.isub(_);return b.cmpn(0)<0&&b.iadd(this.m),b},lr.prototype.shl=function(h,_){return this._verify1(h),this.imod(h.ushln(_))},lr.prototype.imul=function(h,_){return this._verify2(h,_),this.imod(h.imul(_))},lr.prototype.mul=function(h,_){return this._verify2(h,_),this.imod(h.mul(_))},lr.prototype.isqr=function(h){return this.imul(h,h.clone())},lr.prototype.sqr=function(h){return this.mul(h,h)},lr.prototype.sqrt=function(h){if(h.isZero())return h.clone();var _=this.m.andln(3);if(a(_%2===1),_===3){var b=this.m.add(new c(1)).iushrn(2);return this.pow(h,b)}for(var lt=this.m.subn(1),Rt=0;!lt.isZero()&&lt.andln(1)===0;)Rt++,lt.iushrn(1);a(!lt.isZero());var kt=new c(1).toRed(this),Ft=kt.redNeg(),xt=this.m.subn(1).iushrn(1),g=this.m.bitLength();for(g=new c(2*g*g).toRed(this);this.pow(g,xt).cmp(Ft)!==0;)g.redIAdd(Ft);for(var wt=this.pow(g,lt),nr=this.pow(h,lt.addn(1).iushrn(1)),or=this.pow(h,lt),cr=Rt;or.cmp(kt)!==0;){for(var Rr=or,Ar=0;Rr.cmp(kt)!==0;Ar++)Rr=Rr.redSqr();a(Ar<cr);var pr=this.pow(wt,new c(1).iushln(cr-Ar-1));nr=nr.redMul(pr),wt=pr.redSqr(),or=or.redMul(wt),cr=Ar}return nr},lr.prototype.invm=function(h){var _=h._invmp(this.m);return _.negative!==0?(_.negative=0,this.imod(_).redNeg()):this.imod(_)},lr.prototype.pow=function(h,_){if(_.isZero())return new c(1).toRed(this);if(_.cmpn(1)===0)return h.clone();var b=4,lt=new Array(1<<b);lt[0]=new c(1).toRed(this),lt[1]=h;for(var Rt=2;Rt<lt.length;Rt++)lt[Rt]=this.mul(lt[Rt-1],h);var kt=lt[0],Ft=0,xt=0,g=_.bitLength()%26;for(g===0&&(g=26),Rt=_.length-1;Rt>=0;Rt--){for(var wt=_.words[Rt],nr=g-1;nr>=0;nr--){var or=wt>>nr&1;if(kt!==lt[0]&&(kt=this.sqr(kt)),or===0&&Ft===0){xt=0;continue}Ft<<=1,Ft|=or,xt++,!(xt!==b&&(Rt!==0||nr!==0))&&(kt=this.mul(kt,lt[Ft]),xt=0,Ft=0)}g=26}return kt},lr.prototype.convertTo=function(h){var _=h.umod(this.m);return _===h?_.clone():_},lr.prototype.convertFrom=function(h){var _=h.clone();return _.red=null,_},c.mont=function(h){return new gr(h)};function gr(Mt){lr.call(this,Mt),this.shift=this.m.bitLength(),this.shift%26!==0&&(this.shift+=26-this.shift%26),this.r=new c(1).iushln(this.shift),this.r2=this.imod(this.r.sqr()),this.rinv=this.r._invmp(this.m),this.minv=this.rinv.mul(this.r).isubn(1).div(this.m),this.minv=this.minv.umod(this.r),this.minv=this.r.sub(this.minv)}d(gr,lr),gr.prototype.convertTo=function(h){return this.imod(h.ushln(this.shift))},gr.prototype.convertFrom=function(h){var _=this.imod(h.mul(this.rinv));return _.red=null,_},gr.prototype.imul=function(h,_){if(h.isZero()||_.isZero())return h.words[0]=0,h.length=1,h;var b=h.imul(_),lt=b.maskn(this.shift).mul(this.minv).imaskn(this.shift).mul(this.m),Rt=b.isub(lt).iushrn(this.shift),kt=Rt;return Rt.cmp(this.m)>=0?kt=Rt.isub(this.m):Rt.cmpn(0)<0&&(kt=Rt.iadd(this.m)),kt._forceRed(this)},gr.prototype.mul=function(h,_){if(h.isZero()||_.isZero())return new c(0)._forceRed(this);var b=h.mul(_),lt=b.maskn(this.shift).mul(this.minv).imaskn(this.shift).mul(this.m),Rt=b.isub(lt).iushrn(this.shift),kt=Rt;return Rt.cmp(this.m)>=0?kt=Rt.isub(this.m):Rt.cmpn(0)<0&&(kt=Rt.iadd(this.m)),kt._forceRed(this)},gr.prototype.invm=function(h){var _=this.imod(h._invmp(this.m).mul(this.r2));return _._forceRed(this)}})(s,commonjsGlobal$2)}(bn$6)),bn$6.exports}var bn$5={exports:{}};bn$5.exports;var hasRequiredBn$5;function requireBn$5(){return hasRequiredBn$5||(hasRequiredBn$5=1,function(s){(function(e,o){function a(Mt,h){if(!Mt)throw new Error(h||"Assertion failed")}function d(Mt,h){Mt.super_=h;var _=function(){};_.prototype=h.prototype,Mt.prototype=new _,Mt.prototype.constructor=Mt}function c(Mt,h,_){if(c.isBN(Mt))return Mt;this.negative=0,this.words=null,this.length=0,this.red=null,Mt!==null&&((h==="le"||h==="be")&&(_=h,h=10),this._init(Mt||0,h||10,_||"be"))}typeof e=="object"?e.exports=c:o.BN=c,c.BN=c,c.wordSize=26;var j;try{typeof window<"u"&&typeof window.Buffer<"u"?j=window.Buffer:j=require$$0$1.Buffer}catch{}c.isBN=function(h){return h instanceof c?!0:h!==null&&typeof h=="object"&&h.constructor.wordSize===c.wordSize&&Array.isArray(h.words)},c.max=function(h,_){return h.cmp(_)>0?h:_},c.min=function(h,_){return h.cmp(_)<0?h:_},c.prototype._init=function(h,_,b){if(typeof h=="number")return this._initNumber(h,_,b);if(typeof h=="object")return this._initArray(h,_,b);_==="hex"&&(_=16),a(_===(_|0)&&_>=2&&_<=36),h=h.toString().replace(/\s+/g,"");var lt=0;h[0]==="-"&&(lt++,this.negative=1),lt<h.length&&(_===16?this._parseHex(h,lt,b):(this._parseBase(h,_,lt),b==="le"&&this._initArray(this.toArray(),_,b)))},c.prototype._initNumber=function(h,_,b){h<0&&(this.negative=1,h=-h),h<67108864?(this.words=[h&67108863],this.length=1):h<4503599627370496?(this.words=[h&67108863,h/67108864&67108863],this.length=2):(a(h<9007199254740992),this.words=[h&67108863,h/67108864&67108863,1],this.length=3),b==="le"&&this._initArray(this.toArray(),_,b)},c.prototype._initArray=function(h,_,b){if(a(typeof h.length=="number"),h.length<=0)return this.words=[0],this.length=1,this;this.length=Math.ceil(h.length/3),this.words=new Array(this.length);for(var lt=0;lt<this.length;lt++)this.words[lt]=0;var Rt,kt,Ft=0;if(b==="be")for(lt=h.length-1,Rt=0;lt>=0;lt-=3)kt=h[lt]|h[lt-1]<<8|h[lt-2]<<16,this.words[Rt]|=kt<<Ft&67108863,this.words[Rt+1]=kt>>>26-Ft&67108863,Ft+=24,Ft>=26&&(Ft-=26,Rt++);else if(b==="le")for(lt=0,Rt=0;lt<h.length;lt+=3)kt=h[lt]|h[lt+1]<<8|h[lt+2]<<16,this.words[Rt]|=kt<<Ft&67108863,this.words[Rt+1]=kt>>>26-Ft&67108863,Ft+=24,Ft>=26&&(Ft-=26,Rt++);return this.strip()};function _e(Mt,h){var _=Mt.charCodeAt(h);return _>=65&&_<=70?_-55:_>=97&&_<=102?_-87:_-48&15}function pt(Mt,h,_){var b=_e(Mt,_);return _-1>=h&&(b|=_e(Mt,_-1)<<4),b}c.prototype._parseHex=function(h,_,b){this.length=Math.ceil((h.length-_)/6),this.words=new Array(this.length);for(var lt=0;lt<this.length;lt++)this.words[lt]=0;var Rt=0,kt=0,Ft;if(b==="be")for(lt=h.length-1;lt>=_;lt-=2)Ft=pt(h,_,lt)<<Rt,this.words[kt]|=Ft&67108863,Rt>=18?(Rt-=18,kt+=1,this.words[kt]|=Ft>>>26):Rt+=8;else{var xt=h.length-_;for(lt=xt%2===0?_+1:_;lt<h.length;lt+=2)Ft=pt(h,_,lt)<<Rt,this.words[kt]|=Ft&67108863,Rt>=18?(Rt-=18,kt+=1,this.words[kt]|=Ft>>>26):Rt+=8}this.strip()};function yt(Mt,h,_,b){for(var lt=0,Rt=Math.min(Mt.length,_),kt=h;kt<Rt;kt++){var Ft=Mt.charCodeAt(kt)-48;lt*=b,Ft>=49?lt+=Ft-49+10:Ft>=17?lt+=Ft-17+10:lt+=Ft}return lt}c.prototype._parseBase=function(h,_,b){this.words=[0],this.length=1;for(var lt=0,Rt=1;Rt<=67108863;Rt*=_)lt++;lt--,Rt=Rt/_|0;for(var kt=h.length-b,Ft=kt%lt,xt=Math.min(kt,kt-Ft)+b,g=0,wt=b;wt<xt;wt+=lt)g=yt(h,wt,wt+lt,_),this.imuln(Rt),this.words[0]+g<67108864?this.words[0]+=g:this._iaddn(g);if(Ft!==0){var nr=1;for(g=yt(h,wt,h.length,_),wt=0;wt<Ft;wt++)nr*=_;this.imuln(nr),this.words[0]+g<67108864?this.words[0]+=g:this._iaddn(g)}this.strip()},c.prototype.copy=function(h){h.words=new Array(this.length);for(var _=0;_<this.length;_++)h.words[_]=this.words[_];h.length=this.length,h.negative=this.negative,h.red=this.red},c.prototype.clone=function(){var h=new c(null);return this.copy(h),h},c.prototype._expand=function(h){for(;this.length<h;)this.words[this.length++]=0;return this},c.prototype.strip=function(){for(;this.length>1&&this.words[this.length-1]===0;)this.length--;return this._normSign()},c.prototype._normSign=function(){return this.length===1&&this.words[0]===0&&(this.negative=0),this},c.prototype.inspect=function(){return(this.red?"<BN-R: ":"<BN: ")+this.toString(16)+">"};var ct=["","0","00","000","0000","00000","000000","0000000","00000000","000000000","0000000000","00000000000","000000000000","0000000000000","00000000000000","000000000000000","0000000000000000","00000000000000000","000000000000000000","0000000000000000000","00000000000000000000","000000000000000000000","0000000000000000000000","00000000000000000000000","000000000000000000000000","0000000000000000000000000"],Ct=[0,0,25,16,12,11,10,9,8,8,7,7,7,7,6,6,6,6,6,6,6,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5],qt=[0,0,33554432,43046721,16777216,48828125,60466176,40353607,16777216,43046721,1e7,19487171,35831808,62748517,7529536,11390625,16777216,24137569,34012224,47045881,64e6,4084101,5153632,6436343,7962624,9765625,11881376,14348907,17210368,20511149,243e5,28629151,33554432,39135393,45435424,52521875,60466176];c.prototype.toString=function(h,_){h=h||10,_=_|0||1;var b;if(h===16||h==="hex"){b="";for(var lt=0,Rt=0,kt=0;kt<this.length;kt++){var Ft=this.words[kt],xt=((Ft<<lt|Rt)&16777215).toString(16);Rt=Ft>>>24-lt&16777215,lt+=2,lt>=26&&(lt-=26,kt--),Rt!==0||kt!==this.length-1?b=ct[6-xt.length]+xt+b:b=xt+b}for(Rt!==0&&(b=Rt.toString(16)+b);b.length%_!==0;)b="0"+b;return this.negative!==0&&(b="-"+b),b}if(h===(h|0)&&h>=2&&h<=36){var g=Ct[h],wt=qt[h];b="";var nr=this.clone();for(nr.negative=0;!nr.isZero();){var or=nr.modn(wt).toString(h);nr=nr.idivn(wt),nr.isZero()?b=or+b:b=ct[g-or.length]+or+b}for(this.isZero()&&(b="0"+b);b.length%_!==0;)b="0"+b;return this.negative!==0&&(b="-"+b),b}a(!1,"Base should be between 2 and 36")},c.prototype.toNumber=function(){var h=this.words[0];return this.length===2?h+=this.words[1]*67108864:this.length===3&&this.words[2]===1?h+=4503599627370496+this.words[1]*67108864:this.length>2&&a(!1,"Number can only safely store up to 53 bits"),this.negative!==0?-h:h},c.prototype.toJSON=function(){return this.toString(16)},c.prototype.toBuffer=function(h,_){return a(typeof j<"u"),this.toArrayLike(j,h,_)},c.prototype.toArray=function(h,_){return this.toArrayLike(Array,h,_)},c.prototype.toArrayLike=function(h,_,b){var lt=this.byteLength(),Rt=b||Math.max(1,lt);a(lt<=Rt,"byte array longer than desired length"),a(Rt>0,"Requested array length <= 0"),this.strip();var kt=_==="le",Ft=new h(Rt),xt,g,wt=this.clone();if(kt){for(g=0;!wt.isZero();g++)xt=wt.andln(255),wt.iushrn(8),Ft[g]=xt;for(;g<Rt;g++)Ft[g]=0}else{for(g=0;g<Rt-lt;g++)Ft[g]=0;for(g=0;!wt.isZero();g++)xt=wt.andln(255),wt.iushrn(8),Ft[Rt-g-1]=xt}return Ft},Math.clz32?c.prototype._countBits=function(h){return 32-Math.clz32(h)}:c.prototype._countBits=function(h){var _=h,b=0;return _>=4096&&(b+=13,_>>>=13),_>=64&&(b+=7,_>>>=7),_>=8&&(b+=4,_>>>=4),_>=2&&(b+=2,_>>>=2),b+_},c.prototype._zeroBits=function(h){if(h===0)return 26;var _=h,b=0;return _&8191||(b+=13,_>>>=13),_&127||(b+=7,_>>>=7),_&15||(b+=4,_>>>=4),_&3||(b+=2,_>>>=2),_&1||b++,b},c.prototype.bitLength=function(){var h=this.words[this.length-1],_=this._countBits(h);return(this.length-1)*26+_};function Ot(Mt){for(var h=new Array(Mt.bitLength()),_=0;_<h.length;_++){var b=_/26|0,lt=_%26;h[_]=(Mt.words[b]&1<<lt)>>>lt}return h}c.prototype.zeroBits=function(){if(this.isZero())return 0;for(var h=0,_=0;_<this.length;_++){var b=this._zeroBits(this.words[_]);if(h+=b,b!==26)break}return h},c.prototype.byteLength=function(){return Math.ceil(this.bitLength()/8)},c.prototype.toTwos=function(h){return this.negative!==0?this.abs().inotn(h).iaddn(1):this.clone()},c.prototype.fromTwos=function(h){return this.testn(h-1)?this.notn(h).iaddn(1).ineg():this.clone()},c.prototype.isNeg=function(){return this.negative!==0},c.prototype.neg=function(){return this.clone().ineg()},c.prototype.ineg=function(){return this.isZero()||(this.negative^=1),this},c.prototype.iuor=function(h){for(;this.length<h.length;)this.words[this.length++]=0;for(var _=0;_<h.length;_++)this.words[_]=this.words[_]|h.words[_];return this.strip()},c.prototype.ior=function(h){return a((this.negative|h.negative)===0),this.iuor(h)},c.prototype.or=function(h){return this.length>h.length?this.clone().ior(h):h.clone().ior(this)},c.prototype.uor=function(h){return this.length>h.length?this.clone().iuor(h):h.clone().iuor(this)},c.prototype.iuand=function(h){var _;this.length>h.length?_=h:_=this;for(var b=0;b<_.length;b++)this.words[b]=this.words[b]&h.words[b];return this.length=_.length,this.strip()},c.prototype.iand=function(h){return a((this.negative|h.negative)===0),this.iuand(h)},c.prototype.and=function(h){return this.length>h.length?this.clone().iand(h):h.clone().iand(this)},c.prototype.uand=function(h){return this.length>h.length?this.clone().iuand(h):h.clone().iuand(this)},c.prototype.iuxor=function(h){var _,b;this.length>h.length?(_=this,b=h):(_=h,b=this);for(var lt=0;lt<b.length;lt++)this.words[lt]=_.words[lt]^b.words[lt];if(this!==_)for(;lt<_.length;lt++)this.words[lt]=_.words[lt];return this.length=_.length,this.strip()},c.prototype.ixor=function(h){return a((this.negative|h.negative)===0),this.iuxor(h)},c.prototype.xor=function(h){return this.length>h.length?this.clone().ixor(h):h.clone().ixor(this)},c.prototype.uxor=function(h){return this.length>h.length?this.clone().iuxor(h):h.clone().iuxor(this)},c.prototype.inotn=function(h){a(typeof h=="number"&&h>=0);var _=Math.ceil(h/26)|0,b=h%26;this._expand(_),b>0&&_--;for(var lt=0;lt<_;lt++)this.words[lt]=~this.words[lt]&67108863;return b>0&&(this.words[lt]=~this.words[lt]&67108863>>26-b),this.strip()},c.prototype.notn=function(h){return this.clone().inotn(h)},c.prototype.setn=function(h,_){a(typeof h=="number"&&h>=0);var b=h/26|0,lt=h%26;return this._expand(b+1),_?this.words[b]=this.words[b]|1<<lt:this.words[b]=this.words[b]&~(1<<lt),this.strip()},c.prototype.iadd=function(h){var _;if(this.negative!==0&&h.negative===0)return this.negative=0,_=this.isub(h),this.negative^=1,this._normSign();if(this.negative===0&&h.negative!==0)return h.negative=0,_=this.isub(h),h.negative=1,_._normSign();var b,lt;this.length>h.length?(b=this,lt=h):(b=h,lt=this);for(var Rt=0,kt=0;kt<lt.length;kt++)_=(b.words[kt]|0)+(lt.words[kt]|0)+Rt,this.words[kt]=_&67108863,Rt=_>>>26;for(;Rt!==0&&kt<b.length;kt++)_=(b.words[kt]|0)+Rt,this.words[kt]=_&67108863,Rt=_>>>26;if(this.length=b.length,Rt!==0)this.words[this.length]=Rt,this.length++;else if(b!==this)for(;kt<b.length;kt++)this.words[kt]=b.words[kt];return this},c.prototype.add=function(h){var _;return h.negative!==0&&this.negative===0?(h.negative=0,_=this.sub(h),h.negative^=1,_):h.negative===0&&this.negative!==0?(this.negative=0,_=h.sub(this),this.negative=1,_):this.length>h.length?this.clone().iadd(h):h.clone().iadd(this)},c.prototype.isub=function(h){if(h.negative!==0){h.negative=0;var _=this.iadd(h);return h.negative=1,_._normSign()}else if(this.negative!==0)return this.negative=0,this.iadd(h),this.negative=1,this._normSign();var b=this.cmp(h);if(b===0)return this.negative=0,this.length=1,this.words[0]=0,this;var lt,Rt;b>0?(lt=this,Rt=h):(lt=h,Rt=this);for(var kt=0,Ft=0;Ft<Rt.length;Ft++)_=(lt.words[Ft]|0)-(Rt.words[Ft]|0)+kt,kt=_>>26,this.words[Ft]=_&67108863;for(;kt!==0&&Ft<lt.length;Ft++)_=(lt.words[Ft]|0)+kt,kt=_>>26,this.words[Ft]=_&67108863;if(kt===0&&Ft<lt.length&&lt!==this)for(;Ft<lt.length;Ft++)this.words[Ft]=lt.words[Ft];return this.length=Math.max(this.length,Ft),lt!==this&&(this.negative=1),this.strip()},c.prototype.sub=function(h){return this.clone().isub(h)};function Lt(Mt,h,_){_.negative=h.negative^Mt.negative;var b=Mt.length+h.length|0;_.length=b,b=b-1|0;var lt=Mt.words[0]|0,Rt=h.words[0]|0,kt=lt*Rt,Ft=kt&67108863,xt=kt/67108864|0;_.words[0]=Ft;for(var g=1;g<b;g++){for(var wt=xt>>>26,nr=xt&67108863,or=Math.min(g,h.length-1),cr=Math.max(0,g-Mt.length+1);cr<=or;cr++){var Rr=g-cr|0;lt=Mt.words[Rr]|0,Rt=h.words[cr]|0,kt=lt*Rt+nr,wt+=kt/67108864|0,nr=kt&67108863}_.words[g]=nr|0,xt=wt|0}return xt!==0?_.words[g]=xt|0:_.length--,_.strip()}var Qt=function(h,_,b){var lt=h.words,Rt=_.words,kt=b.words,Ft=0,xt,g,wt,nr=lt[0]|0,or=nr&8191,cr=nr>>>13,Rr=lt[1]|0,Ar=Rr&8191,pr=Rr>>>13,wr=lt[2]|0,Tr=wr&8191,Ir=wr>>>13,Sr=lt[3]|0,br=Sr&8191,kr=Sr>>>13,Qr=lt[4]|0,qr=Qr&8191,$r=Qr>>>13,gn=lt[5]|0,Lr=gn&8191,Dr=gn>>>13,En=lt[6]|0,Fr=En&8191,zr=En>>>13,yn=lt[7]|0,Nr=yn&8191,Wr=yn>>>13,xn=lt[8]|0,Or=xn&8191,Yr=xn>>>13,Pn=lt[9]|0,xr=Pn&8191,fr=Pn>>>13,yr=Rt[0]|0,Mr=yr&8191,Pr=yr>>>13,Vr=Rt[1]|0,Br=Vr&8191,jr=Vr>>>13,An=Rt[2]|0,Ur=An&8191,Gr=An>>>13,wn=Rt[3]|0,Xr=wn&8191,hn=wn>>>13,In=Rt[4]|0,Jr=In&8191,fn=In>>>13,kn=Rt[5]|0,Kr=kn&8191,dn=kn>>>13,Rn=Rt[6]|0,Zr=Rn&8191,un=Rn>>>13,Mn=Rt[7]|0,rn=Mn&8191,pn=Mn>>>13,Cn=Rt[8]|0,ln=Cn&8191,vn=Cn>>>13,Bn=Rt[9]|0,an=Bn&8191,mn=Bn>>>13;b.negative=h.negative^_.negative,b.length=19,xt=Math.imul(or,Mr),g=Math.imul(or,Pr),g=g+Math.imul(cr,Mr)|0,wt=Math.imul(cr,Pr);var Sn=(Ft+xt|0)+((g&8191)<<13)|0;Ft=(wt+(g>>>13)|0)+(Sn>>>26)|0,Sn&=67108863,xt=Math.imul(Ar,Mr),g=Math.imul(Ar,Pr),g=g+Math.imul(pr,Mr)|0,wt=Math.imul(pr,Pr),xt=xt+Math.imul(or,Br)|0,g=g+Math.imul(or,jr)|0,g=g+Math.imul(cr,Br)|0,wt=wt+Math.imul(cr,jr)|0;var Tn=(Ft+xt|0)+((g&8191)<<13)|0;Ft=(wt+(g>>>13)|0)+(Tn>>>26)|0,Tn&=67108863,xt=Math.imul(Tr,Mr),g=Math.imul(Tr,Pr),g=g+Math.imul(Ir,Mr)|0,wt=Math.imul(Ir,Pr),xt=xt+Math.imul(Ar,Br)|0,g=g+Math.imul(Ar,jr)|0,g=g+Math.imul(pr,Br)|0,wt=wt+Math.imul(pr,jr)|0,xt=xt+Math.imul(or,Ur)|0,g=g+Math.imul(or,Gr)|0,g=g+Math.imul(cr,Ur)|0,wt=wt+Math.imul(cr,Gr)|0;var Un=(Ft+xt|0)+((g&8191)<<13)|0;Ft=(wt+(g>>>13)|0)+(Un>>>26)|0,Un&=67108863,xt=Math.imul(br,Mr),g=Math.imul(br,Pr),g=g+Math.imul(kr,Mr)|0,wt=Math.imul(kr,Pr),xt=xt+Math.imul(Tr,Br)|0,g=g+Math.imul(Tr,jr)|0,g=g+Math.imul(Ir,Br)|0,wt=wt+Math.imul(Ir,jr)|0,xt=xt+Math.imul(Ar,Ur)|0,g=g+Math.imul(Ar,Gr)|0,g=g+Math.imul(pr,Ur)|0,wt=wt+Math.imul(pr,Gr)|0,xt=xt+Math.imul(or,Xr)|0,g=g+Math.imul(or,hn)|0,g=g+Math.imul(cr,Xr)|0,wt=wt+Math.imul(cr,hn)|0;var jn=(Ft+xt|0)+((g&8191)<<13)|0;Ft=(wt+(g>>>13)|0)+(jn>>>26)|0,jn&=67108863,xt=Math.imul(qr,Mr),g=Math.imul(qr,Pr),g=g+Math.imul($r,Mr)|0,wt=Math.imul($r,Pr),xt=xt+Math.imul(br,Br)|0,g=g+Math.imul(br,jr)|0,g=g+Math.imul(kr,Br)|0,wt=wt+Math.imul(kr,jr)|0,xt=xt+Math.imul(Tr,Ur)|0,g=g+Math.imul(Tr,Gr)|0,g=g+Math.imul(Ir,Ur)|0,wt=wt+Math.imul(Ir,Gr)|0,xt=xt+Math.imul(Ar,Xr)|0,g=g+Math.imul(Ar,hn)|0,g=g+Math.imul(pr,Xr)|0,wt=wt+Math.imul(pr,hn)|0,xt=xt+Math.imul(or,Jr)|0,g=g+Math.imul(or,fn)|0,g=g+Math.imul(cr,Jr)|0,wt=wt+Math.imul(cr,fn)|0;var Vn=(Ft+xt|0)+((g&8191)<<13)|0;Ft=(wt+(g>>>13)|0)+(Vn>>>26)|0,Vn&=67108863,xt=Math.imul(Lr,Mr),g=Math.imul(Lr,Pr),g=g+Math.imul(Dr,Mr)|0,wt=Math.imul(Dr,Pr),xt=xt+Math.imul(qr,Br)|0,g=g+Math.imul(qr,jr)|0,g=g+Math.imul($r,Br)|0,wt=wt+Math.imul($r,jr)|0,xt=xt+Math.imul(br,Ur)|0,g=g+Math.imul(br,Gr)|0,g=g+Math.imul(kr,Ur)|0,wt=wt+Math.imul(kr,Gr)|0,xt=xt+Math.imul(Tr,Xr)|0,g=g+Math.imul(Tr,hn)|0,g=g+Math.imul(Ir,Xr)|0,wt=wt+Math.imul(Ir,hn)|0,xt=xt+Math.imul(Ar,Jr)|0,g=g+Math.imul(Ar,fn)|0,g=g+Math.imul(pr,Jr)|0,wt=wt+Math.imul(pr,fn)|0,xt=xt+Math.imul(or,Kr)|0,g=g+Math.imul(or,dn)|0,g=g+Math.imul(cr,Kr)|0,wt=wt+Math.imul(cr,dn)|0;var Nn=(Ft+xt|0)+((g&8191)<<13)|0;Ft=(wt+(g>>>13)|0)+(Nn>>>26)|0,Nn&=67108863,xt=Math.imul(Fr,Mr),g=Math.imul(Fr,Pr),g=g+Math.imul(zr,Mr)|0,wt=Math.imul(zr,Pr),xt=xt+Math.imul(Lr,Br)|0,g=g+Math.imul(Lr,jr)|0,g=g+Math.imul(Dr,Br)|0,wt=wt+Math.imul(Dr,jr)|0,xt=xt+Math.imul(qr,Ur)|0,g=g+Math.imul(qr,Gr)|0,g=g+Math.imul($r,Ur)|0,wt=wt+Math.imul($r,Gr)|0,xt=xt+Math.imul(br,Xr)|0,g=g+Math.imul(br,hn)|0,g=g+Math.imul(kr,Xr)|0,wt=wt+Math.imul(kr,hn)|0,xt=xt+Math.imul(Tr,Jr)|0,g=g+Math.imul(Tr,fn)|0,g=g+Math.imul(Ir,Jr)|0,wt=wt+Math.imul(Ir,fn)|0,xt=xt+Math.imul(Ar,Kr)|0,g=g+Math.imul(Ar,dn)|0,g=g+Math.imul(pr,Kr)|0,wt=wt+Math.imul(pr,dn)|0,xt=xt+Math.imul(or,Zr)|0,g=g+Math.imul(or,un)|0,g=g+Math.imul(cr,Zr)|0,wt=wt+Math.imul(cr,un)|0;var zn=(Ft+xt|0)+((g&8191)<<13)|0;Ft=(wt+(g>>>13)|0)+(zn>>>26)|0,zn&=67108863,xt=Math.imul(Nr,Mr),g=Math.imul(Nr,Pr),g=g+Math.imul(Wr,Mr)|0,wt=Math.imul(Wr,Pr),xt=xt+Math.imul(Fr,Br)|0,g=g+Math.imul(Fr,jr)|0,g=g+Math.imul(zr,Br)|0,wt=wt+Math.imul(zr,jr)|0,xt=xt+Math.imul(Lr,Ur)|0,g=g+Math.imul(Lr,Gr)|0,g=g+Math.imul(Dr,Ur)|0,wt=wt+Math.imul(Dr,Gr)|0,xt=xt+Math.imul(qr,Xr)|0,g=g+Math.imul(qr,hn)|0,g=g+Math.imul($r,Xr)|0,wt=wt+Math.imul($r,hn)|0,xt=xt+Math.imul(br,Jr)|0,g=g+Math.imul(br,fn)|0,g=g+Math.imul(kr,Jr)|0,wt=wt+Math.imul(kr,fn)|0,xt=xt+Math.imul(Tr,Kr)|0,g=g+Math.imul(Tr,dn)|0,g=g+Math.imul(Ir,Kr)|0,wt=wt+Math.imul(Ir,dn)|0,xt=xt+Math.imul(Ar,Zr)|0,g=g+Math.imul(Ar,un)|0,g=g+Math.imul(pr,Zr)|0,wt=wt+Math.imul(pr,un)|0,xt=xt+Math.imul(or,rn)|0,g=g+Math.imul(or,pn)|0,g=g+Math.imul(cr,rn)|0,wt=wt+Math.imul(cr,pn)|0;var Hn=(Ft+xt|0)+((g&8191)<<13)|0;Ft=(wt+(g>>>13)|0)+(Hn>>>26)|0,Hn&=67108863,xt=Math.imul(Or,Mr),g=Math.imul(Or,Pr),g=g+Math.imul(Yr,Mr)|0,wt=Math.imul(Yr,Pr),xt=xt+Math.imul(Nr,Br)|0,g=g+Math.imul(Nr,jr)|0,g=g+Math.imul(Wr,Br)|0,wt=wt+Math.imul(Wr,jr)|0,xt=xt+Math.imul(Fr,Ur)|0,g=g+Math.imul(Fr,Gr)|0,g=g+Math.imul(zr,Ur)|0,wt=wt+Math.imul(zr,Gr)|0,xt=xt+Math.imul(Lr,Xr)|0,g=g+Math.imul(Lr,hn)|0,g=g+Math.imul(Dr,Xr)|0,wt=wt+Math.imul(Dr,hn)|0,xt=xt+Math.imul(qr,Jr)|0,g=g+Math.imul(qr,fn)|0,g=g+Math.imul($r,Jr)|0,wt=wt+Math.imul($r,fn)|0,xt=xt+Math.imul(br,Kr)|0,g=g+Math.imul(br,dn)|0,g=g+Math.imul(kr,Kr)|0,wt=wt+Math.imul(kr,dn)|0,xt=xt+Math.imul(Tr,Zr)|0,g=g+Math.imul(Tr,un)|0,g=g+Math.imul(Ir,Zr)|0,wt=wt+Math.imul(Ir,un)|0,xt=xt+Math.imul(Ar,rn)|0,g=g+Math.imul(Ar,pn)|0,g=g+Math.imul(pr,rn)|0,wt=wt+Math.imul(pr,pn)|0,xt=xt+Math.imul(or,ln)|0,g=g+Math.imul(or,vn)|0,g=g+Math.imul(cr,ln)|0,wt=wt+Math.imul(cr,vn)|0;var Xn=(Ft+xt|0)+((g&8191)<<13)|0;Ft=(wt+(g>>>13)|0)+(Xn>>>26)|0,Xn&=67108863,xt=Math.imul(xr,Mr),g=Math.imul(xr,Pr),g=g+Math.imul(fr,Mr)|0,wt=Math.imul(fr,Pr),xt=xt+Math.imul(Or,Br)|0,g=g+Math.imul(Or,jr)|0,g=g+Math.imul(Yr,Br)|0,wt=wt+Math.imul(Yr,jr)|0,xt=xt+Math.imul(Nr,Ur)|0,g=g+Math.imul(Nr,Gr)|0,g=g+Math.imul(Wr,Ur)|0,wt=wt+Math.imul(Wr,Gr)|0,xt=xt+Math.imul(Fr,Xr)|0,g=g+Math.imul(Fr,hn)|0,g=g+Math.imul(zr,Xr)|0,wt=wt+Math.imul(zr,hn)|0,xt=xt+Math.imul(Lr,Jr)|0,g=g+Math.imul(Lr,fn)|0,g=g+Math.imul(Dr,Jr)|0,wt=wt+Math.imul(Dr,fn)|0,xt=xt+Math.imul(qr,Kr)|0,g=g+Math.imul(qr,dn)|0,g=g+Math.imul($r,Kr)|0,wt=wt+Math.imul($r,dn)|0,xt=xt+Math.imul(br,Zr)|0,g=g+Math.imul(br,un)|0,g=g+Math.imul(kr,Zr)|0,wt=wt+Math.imul(kr,un)|0,xt=xt+Math.imul(Tr,rn)|0,g=g+Math.imul(Tr,pn)|0,g=g+Math.imul(Ir,rn)|0,wt=wt+Math.imul(Ir,pn)|0,xt=xt+Math.imul(Ar,ln)|0,g=g+Math.imul(Ar,vn)|0,g=g+Math.imul(pr,ln)|0,wt=wt+Math.imul(pr,vn)|0,xt=xt+Math.imul(or,an)|0,g=g+Math.imul(or,mn)|0,g=g+Math.imul(cr,an)|0,wt=wt+Math.imul(cr,mn)|0;var qn=(Ft+xt|0)+((g&8191)<<13)|0;Ft=(wt+(g>>>13)|0)+(qn>>>26)|0,qn&=67108863,xt=Math.imul(xr,Br),g=Math.imul(xr,jr),g=g+Math.imul(fr,Br)|0,wt=Math.imul(fr,jr),xt=xt+Math.imul(Or,Ur)|0,g=g+Math.imul(Or,Gr)|0,g=g+Math.imul(Yr,Ur)|0,wt=wt+Math.imul(Yr,Gr)|0,xt=xt+Math.imul(Nr,Xr)|0,g=g+Math.imul(Nr,hn)|0,g=g+Math.imul(Wr,Xr)|0,wt=wt+Math.imul(Wr,hn)|0,xt=xt+Math.imul(Fr,Jr)|0,g=g+Math.imul(Fr,fn)|0,g=g+Math.imul(zr,Jr)|0,wt=wt+Math.imul(zr,fn)|0,xt=xt+Math.imul(Lr,Kr)|0,g=g+Math.imul(Lr,dn)|0,g=g+Math.imul(Dr,Kr)|0,wt=wt+Math.imul(Dr,dn)|0,xt=xt+Math.imul(qr,Zr)|0,g=g+Math.imul(qr,un)|0,g=g+Math.imul($r,Zr)|0,wt=wt+Math.imul($r,un)|0,xt=xt+Math.imul(br,rn)|0,g=g+Math.imul(br,pn)|0,g=g+Math.imul(kr,rn)|0,wt=wt+Math.imul(kr,pn)|0,xt=xt+Math.imul(Tr,ln)|0,g=g+Math.imul(Tr,vn)|0,g=g+Math.imul(Ir,ln)|0,wt=wt+Math.imul(Ir,vn)|0,xt=xt+Math.imul(Ar,an)|0,g=g+Math.imul(Ar,mn)|0,g=g+Math.imul(pr,an)|0,wt=wt+Math.imul(pr,mn)|0;var Wn=(Ft+xt|0)+((g&8191)<<13)|0;Ft=(wt+(g>>>13)|0)+(Wn>>>26)|0,Wn&=67108863,xt=Math.imul(xr,Ur),g=Math.imul(xr,Gr),g=g+Math.imul(fr,Ur)|0,wt=Math.imul(fr,Gr),xt=xt+Math.imul(Or,Xr)|0,g=g+Math.imul(Or,hn)|0,g=g+Math.imul(Yr,Xr)|0,wt=wt+Math.imul(Yr,hn)|0,xt=xt+Math.imul(Nr,Jr)|0,g=g+Math.imul(Nr,fn)|0,g=g+Math.imul(Wr,Jr)|0,wt=wt+Math.imul(Wr,fn)|0,xt=xt+Math.imul(Fr,Kr)|0,g=g+Math.imul(Fr,dn)|0,g=g+Math.imul(zr,Kr)|0,wt=wt+Math.imul(zr,dn)|0,xt=xt+Math.imul(Lr,Zr)|0,g=g+Math.imul(Lr,un)|0,g=g+Math.imul(Dr,Zr)|0,wt=wt+Math.imul(Dr,un)|0,xt=xt+Math.imul(qr,rn)|0,g=g+Math.imul(qr,pn)|0,g=g+Math.imul($r,rn)|0,wt=wt+Math.imul($r,pn)|0,xt=xt+Math.imul(br,ln)|0,g=g+Math.imul(br,vn)|0,g=g+Math.imul(kr,ln)|0,wt=wt+Math.imul(kr,vn)|0,xt=xt+Math.imul(Tr,an)|0,g=g+Math.imul(Tr,mn)|0,g=g+Math.imul(Ir,an)|0,wt=wt+Math.imul(Ir,mn)|0;var On=(Ft+xt|0)+((g&8191)<<13)|0;Ft=(wt+(g>>>13)|0)+(On>>>26)|0,On&=67108863,xt=Math.imul(xr,Xr),g=Math.imul(xr,hn),g=g+Math.imul(fr,Xr)|0,wt=Math.imul(fr,hn),xt=xt+Math.imul(Or,Jr)|0,g=g+Math.imul(Or,fn)|0,g=g+Math.imul(Yr,Jr)|0,wt=wt+Math.imul(Yr,fn)|0,xt=xt+Math.imul(Nr,Kr)|0,g=g+Math.imul(Nr,dn)|0,g=g+Math.imul(Wr,Kr)|0,wt=wt+Math.imul(Wr,dn)|0,xt=xt+Math.imul(Fr,Zr)|0,g=g+Math.imul(Fr,un)|0,g=g+Math.imul(zr,Zr)|0,wt=wt+Math.imul(zr,un)|0,xt=xt+Math.imul(Lr,rn)|0,g=g+Math.imul(Lr,pn)|0,g=g+Math.imul(Dr,rn)|0,wt=wt+Math.imul(Dr,pn)|0,xt=xt+Math.imul(qr,ln)|0,g=g+Math.imul(qr,vn)|0,g=g+Math.imul($r,ln)|0,wt=wt+Math.imul($r,vn)|0,xt=xt+Math.imul(br,an)|0,g=g+Math.imul(br,mn)|0,g=g+Math.imul(kr,an)|0,wt=wt+Math.imul(kr,mn)|0;var $n=(Ft+xt|0)+((g&8191)<<13)|0;Ft=(wt+(g>>>13)|0)+($n>>>26)|0,$n&=67108863,xt=Math.imul(xr,Jr),g=Math.imul(xr,fn),g=g+Math.imul(fr,Jr)|0,wt=Math.imul(fr,fn),xt=xt+Math.imul(Or,Kr)|0,g=g+Math.imul(Or,dn)|0,g=g+Math.imul(Yr,Kr)|0,wt=wt+Math.imul(Yr,dn)|0,xt=xt+Math.imul(Nr,Zr)|0,g=g+Math.imul(Nr,un)|0,g=g+Math.imul(Wr,Zr)|0,wt=wt+Math.imul(Wr,un)|0,xt=xt+Math.imul(Fr,rn)|0,g=g+Math.imul(Fr,pn)|0,g=g+Math.imul(zr,rn)|0,wt=wt+Math.imul(zr,pn)|0,xt=xt+Math.imul(Lr,ln)|0,g=g+Math.imul(Lr,vn)|0,g=g+Math.imul(Dr,ln)|0,wt=wt+Math.imul(Dr,vn)|0,xt=xt+Math.imul(qr,an)|0,g=g+Math.imul(qr,mn)|0,g=g+Math.imul($r,an)|0,wt=wt+Math.imul($r,mn)|0;var Dn=(Ft+xt|0)+((g&8191)<<13)|0;Ft=(wt+(g>>>13)|0)+(Dn>>>26)|0,Dn&=67108863,xt=Math.imul(xr,Kr),g=Math.imul(xr,dn),g=g+Math.imul(fr,Kr)|0,wt=Math.imul(fr,dn),xt=xt+Math.imul(Or,Zr)|0,g=g+Math.imul(Or,un)|0,g=g+Math.imul(Yr,Zr)|0,wt=wt+Math.imul(Yr,un)|0,xt=xt+Math.imul(Nr,rn)|0,g=g+Math.imul(Nr,pn)|0,g=g+Math.imul(Wr,rn)|0,wt=wt+Math.imul(Wr,pn)|0,xt=xt+Math.imul(Fr,ln)|0,g=g+Math.imul(Fr,vn)|0,g=g+Math.imul(zr,ln)|0,wt=wt+Math.imul(zr,vn)|0,xt=xt+Math.imul(Lr,an)|0,g=g+Math.imul(Lr,mn)|0,g=g+Math.imul(Dr,an)|0,wt=wt+Math.imul(Dr,mn)|0;var Ln=(Ft+xt|0)+((g&8191)<<13)|0;Ft=(wt+(g>>>13)|0)+(Ln>>>26)|0,Ln&=67108863,xt=Math.imul(xr,Zr),g=Math.imul(xr,un),g=g+Math.imul(fr,Zr)|0,wt=Math.imul(fr,un),xt=xt+Math.imul(Or,rn)|0,g=g+Math.imul(Or,pn)|0,g=g+Math.imul(Yr,rn)|0,wt=wt+Math.imul(Yr,pn)|0,xt=xt+Math.imul(Nr,ln)|0,g=g+Math.imul(Nr,vn)|0,g=g+Math.imul(Wr,ln)|0,wt=wt+Math.imul(Wr,vn)|0,xt=xt+Math.imul(Fr,an)|0,g=g+Math.imul(Fr,mn)|0,g=g+Math.imul(zr,an)|0,wt=wt+Math.imul(zr,mn)|0;var Zn=(Ft+xt|0)+((g&8191)<<13)|0;Ft=(wt+(g>>>13)|0)+(Zn>>>26)|0,Zn&=67108863,xt=Math.imul(xr,rn),g=Math.imul(xr,pn),g=g+Math.imul(fr,rn)|0,wt=Math.imul(fr,pn),xt=xt+Math.imul(Or,ln)|0,g=g+Math.imul(Or,vn)|0,g=g+Math.imul(Yr,ln)|0,wt=wt+Math.imul(Yr,vn)|0,xt=xt+Math.imul(Nr,an)|0,g=g+Math.imul(Nr,mn)|0,g=g+Math.imul(Wr,an)|0,wt=wt+Math.imul(Wr,mn)|0;var Gn=(Ft+xt|0)+((g&8191)<<13)|0;Ft=(wt+(g>>>13)|0)+(Gn>>>26)|0,Gn&=67108863,xt=Math.imul(xr,ln),g=Math.imul(xr,vn),g=g+Math.imul(fr,ln)|0,wt=Math.imul(fr,vn),xt=xt+Math.imul(Or,an)|0,g=g+Math.imul(Or,mn)|0,g=g+Math.imul(Yr,an)|0,wt=wt+Math.imul(Yr,mn)|0;var Kn=(Ft+xt|0)+((g&8191)<<13)|0;Ft=(wt+(g>>>13)|0)+(Kn>>>26)|0,Kn&=67108863,xt=Math.imul(xr,an),g=Math.imul(xr,mn),g=g+Math.imul(fr,an)|0,wt=Math.imul(fr,mn);var Qn=(Ft+xt|0)+((g&8191)<<13)|0;return Ft=(wt+(g>>>13)|0)+(Qn>>>26)|0,Qn&=67108863,kt[0]=Sn,kt[1]=Tn,kt[2]=Un,kt[3]=jn,kt[4]=Vn,kt[5]=Nn,kt[6]=zn,kt[7]=Hn,kt[8]=Xn,kt[9]=qn,kt[10]=Wn,kt[11]=On,kt[12]=$n,kt[13]=Dn,kt[14]=Ln,kt[15]=Zn,kt[16]=Gn,kt[17]=Kn,kt[18]=Qn,Ft!==0&&(kt[19]=Ft,b.length++),b};Math.imul||(Qt=Lt);function ir(Mt,h,_){_.negative=h.negative^Mt.negative,_.length=Mt.length+h.length;for(var b=0,lt=0,Rt=0;Rt<_.length-1;Rt++){var kt=lt;lt=0;for(var Ft=b&67108863,xt=Math.min(Rt,h.length-1),g=Math.max(0,Rt-Mt.length+1);g<=xt;g++){var wt=Rt-g,nr=Mt.words[wt]|0,or=h.words[g]|0,cr=nr*or,Rr=cr&67108863;kt=kt+(cr/67108864|0)|0,Rr=Rr+Ft|0,Ft=Rr&67108863,kt=kt+(Rr>>>26)|0,lt+=kt>>>26,kt&=67108863}_.words[Rt]=Ft,b=kt,kt=lt}return b!==0?_.words[Rt]=b:_.length--,_.strip()}function er(Mt,h,_){var b=new tr;return b.mulp(Mt,h,_)}c.prototype.mulTo=function(h,_){var b,lt=this.length+h.length;return this.length===10&&h.length===10?b=Qt(this,h,_):lt<63?b=Lt(this,h,_):lt<1024?b=ir(this,h,_):b=er(this,h,_),b};function tr(Mt,h){this.x=Mt,this.y=h}tr.prototype.makeRBT=function(h){for(var _=new Array(h),b=c.prototype._countBits(h)-1,lt=0;lt<h;lt++)_[lt]=this.revBin(lt,b,h);return _},tr.prototype.revBin=function(h,_,b){if(h===0||h===b-1)return h;for(var lt=0,Rt=0;Rt<_;Rt++)lt|=(h&1)<<_-Rt-1,h>>=1;return lt},tr.prototype.permute=function(h,_,b,lt,Rt,kt){for(var Ft=0;Ft<kt;Ft++)lt[Ft]=_[h[Ft]],Rt[Ft]=b[h[Ft]]},tr.prototype.transform=function(h,_,b,lt,Rt,kt){this.permute(kt,h,_,b,lt,Rt);for(var Ft=1;Ft<Rt;Ft<<=1)for(var xt=Ft<<1,g=Math.cos(2*Math.PI/xt),wt=Math.sin(2*Math.PI/xt),nr=0;nr<Rt;nr+=xt)for(var or=g,cr=wt,Rr=0;Rr<Ft;Rr++){var Ar=b[nr+Rr],pr=lt[nr+Rr],wr=b[nr+Rr+Ft],Tr=lt[nr+Rr+Ft],Ir=or*wr-cr*Tr;Tr=or*Tr+cr*wr,wr=Ir,b[nr+Rr]=Ar+wr,lt[nr+Rr]=pr+Tr,b[nr+Rr+Ft]=Ar-wr,lt[nr+Rr+Ft]=pr-Tr,Rr!==xt&&(Ir=g*or-wt*cr,cr=g*cr+wt*or,or=Ir)}},tr.prototype.guessLen13b=function(h,_){var b=Math.max(_,h)|1,lt=b&1,Rt=0;for(b=b/2|0;b;b=b>>>1)Rt++;return 1<<Rt+1+lt},tr.prototype.conjugate=function(h,_,b){if(!(b<=1))for(var lt=0;lt<b/2;lt++){var Rt=h[lt];h[lt]=h[b-lt-1],h[b-lt-1]=Rt,Rt=_[lt],_[lt]=-_[b-lt-1],_[b-lt-1]=-Rt}},tr.prototype.normalize13b=function(h,_){for(var b=0,lt=0;lt<_/2;lt++){var Rt=Math.round(h[2*lt+1]/_)*8192+Math.round(h[2*lt]/_)+b;h[lt]=Rt&67108863,Rt<67108864?b=0:b=Rt/67108864|0}return h},tr.prototype.convert13b=function(h,_,b,lt){for(var Rt=0,kt=0;kt<_;kt++)Rt=Rt+(h[kt]|0),b[2*kt]=Rt&8191,Rt=Rt>>>13,b[2*kt+1]=Rt&8191,Rt=Rt>>>13;for(kt=2*_;kt<lt;++kt)b[kt]=0;a(Rt===0),a((Rt&-8192)===0)},tr.prototype.stub=function(h){for(var _=new Array(h),b=0;b<h;b++)_[b]=0;return _},tr.prototype.mulp=function(h,_,b){var lt=2*this.guessLen13b(h.length,_.length),Rt=this.makeRBT(lt),kt=this.stub(lt),Ft=new Array(lt),xt=new Array(lt),g=new Array(lt),wt=new Array(lt),nr=new Array(lt),or=new Array(lt),cr=b.words;cr.length=lt,this.convert13b(h.words,h.length,Ft,lt),this.convert13b(_.words,_.length,wt,lt),this.transform(Ft,kt,xt,g,lt,Rt),this.transform(wt,kt,nr,or,lt,Rt);for(var Rr=0;Rr<lt;Rr++){var Ar=xt[Rr]*nr[Rr]-g[Rr]*or[Rr];g[Rr]=xt[Rr]*or[Rr]+g[Rr]*nr[Rr],xt[Rr]=Ar}return this.conjugate(xt,g,lt),this.transform(xt,g,cr,kt,lt,Rt),this.conjugate(cr,kt,lt),this.normalize13b(cr,lt),b.negative=h.negative^_.negative,b.length=h.length+_.length,b.strip()},c.prototype.mul=function(h){var _=new c(null);return _.words=new Array(this.length+h.length),this.mulTo(h,_)},c.prototype.mulf=function(h){var _=new c(null);return _.words=new Array(this.length+h.length),er(this,h,_)},c.prototype.imul=function(h){return this.clone().mulTo(h,this)},c.prototype.imuln=function(h){a(typeof h=="number"),a(h<67108864);for(var _=0,b=0;b<this.length;b++){var lt=(this.words[b]|0)*h,Rt=(lt&67108863)+(_&67108863);_>>=26,_+=lt/67108864|0,_+=Rt>>>26,this.words[b]=Rt&67108863}return _!==0&&(this.words[b]=_,this.length++),this.length=h===0?1:this.length,this},c.prototype.muln=function(h){return this.clone().imuln(h)},c.prototype.sqr=function(){return this.mul(this)},c.prototype.isqr=function(){return this.imul(this.clone())},c.prototype.pow=function(h){var _=Ot(h);if(_.length===0)return new c(1);for(var b=this,lt=0;lt<_.length&&_[lt]===0;lt++,b=b.sqr());if(++lt<_.length)for(var Rt=b.sqr();lt<_.length;lt++,Rt=Rt.sqr())_[lt]!==0&&(b=b.mul(Rt));return b},c.prototype.iushln=function(h){a(typeof h=="number"&&h>=0);var _=h%26,b=(h-_)/26,lt=67108863>>>26-_<<26-_,Rt;if(_!==0){var kt=0;for(Rt=0;Rt<this.length;Rt++){var Ft=this.words[Rt]&lt,xt=(this.words[Rt]|0)-Ft<<_;this.words[Rt]=xt|kt,kt=Ft>>>26-_}kt&&(this.words[Rt]=kt,this.length++)}if(b!==0){for(Rt=this.length-1;Rt>=0;Rt--)this.words[Rt+b]=this.words[Rt];for(Rt=0;Rt<b;Rt++)this.words[Rt]=0;this.length+=b}return this.strip()},c.prototype.ishln=function(h){return a(this.negative===0),this.iushln(h)},c.prototype.iushrn=function(h,_,b){a(typeof h=="number"&&h>=0);var lt;_?lt=(_-_%26)/26:lt=0;var Rt=h%26,kt=Math.min((h-Rt)/26,this.length),Ft=67108863^67108863>>>Rt<<Rt,xt=b;if(lt-=kt,lt=Math.max(0,lt),xt){for(var g=0;g<kt;g++)xt.words[g]=this.words[g];xt.length=kt}if(kt!==0)if(this.length>kt)for(this.length-=kt,g=0;g<this.length;g++)this.words[g]=this.words[g+kt];else this.words[0]=0,this.length=1;var wt=0;for(g=this.length-1;g>=0&&(wt!==0||g>=lt);g--){var nr=this.words[g]|0;this.words[g]=wt<<26-Rt|nr>>>Rt,wt=nr&Ft}return xt&&wt!==0&&(xt.words[xt.length++]=wt),this.length===0&&(this.words[0]=0,this.length=1),this.strip()},c.prototype.ishrn=function(h,_,b){return a(this.negative===0),this.iushrn(h,_,b)},c.prototype.shln=function(h){return this.clone().ishln(h)},c.prototype.ushln=function(h){return this.clone().iushln(h)},c.prototype.shrn=function(h){return this.clone().ishrn(h)},c.prototype.ushrn=function(h){return this.clone().iushrn(h)},c.prototype.testn=function(h){a(typeof h=="number"&&h>=0);var _=h%26,b=(h-_)/26,lt=1<<_;if(this.length<=b)return!1;var Rt=this.words[b];return!!(Rt&lt)},c.prototype.imaskn=function(h){a(typeof h=="number"&&h>=0);var _=h%26,b=(h-_)/26;if(a(this.negative===0,"imaskn works only with positive numbers"),this.length<=b)return this;if(_!==0&&b++,this.length=Math.min(b,this.length),_!==0){var lt=67108863^67108863>>>_<<_;this.words[this.length-1]&=lt}return this.strip()},c.prototype.maskn=function(h){return this.clone().imaskn(h)},c.prototype.iaddn=function(h){return a(typeof h=="number"),a(h<67108864),h<0?this.isubn(-h):this.negative!==0?this.length===1&&(this.words[0]|0)<h?(this.words[0]=h-(this.words[0]|0),this.negative=0,this):(this.negative=0,this.isubn(h),this.negative=1,this):this._iaddn(h)},c.prototype._iaddn=function(h){this.words[0]+=h;for(var _=0;_<this.length&&this.words[_]>=67108864;_++)this.words[_]-=67108864,_===this.length-1?this.words[_+1]=1:this.words[_+1]++;return this.length=Math.max(this.length,_+1),this},c.prototype.isubn=function(h){if(a(typeof h=="number"),a(h<67108864),h<0)return this.iaddn(-h);if(this.negative!==0)return this.negative=0,this.iaddn(h),this.negative=1,this;if(this.words[0]-=h,this.length===1&&this.words[0]<0)this.words[0]=-this.words[0],this.negative=1;else for(var _=0;_<this.length&&this.words[_]<0;_++)this.words[_]+=67108864,this.words[_+1]-=1;return this.strip()},c.prototype.addn=function(h){return this.clone().iaddn(h)},c.prototype.subn=function(h){return this.clone().isubn(h)},c.prototype.iabs=function(){return this.negative=0,this},c.prototype.abs=function(){return this.clone().iabs()},c.prototype._ishlnsubmul=function(h,_,b){var lt=h.length+b,Rt;this._expand(lt);var kt,Ft=0;for(Rt=0;Rt<h.length;Rt++){kt=(this.words[Rt+b]|0)+Ft;var xt=(h.words[Rt]|0)*_;kt-=xt&67108863,Ft=(kt>>26)-(xt/67108864|0),this.words[Rt+b]=kt&67108863}for(;Rt<this.length-b;Rt++)kt=(this.words[Rt+b]|0)+Ft,Ft=kt>>26,this.words[Rt+b]=kt&67108863;if(Ft===0)return this.strip();for(a(Ft===-1),Ft=0,Rt=0;Rt<this.length;Rt++)kt=-(this.words[Rt]|0)+Ft,Ft=kt>>26,this.words[Rt]=kt&67108863;return this.negative=1,this.strip()},c.prototype._wordDiv=function(h,_){var b=this.length-h.length,lt=this.clone(),Rt=h,kt=Rt.words[Rt.length-1]|0,Ft=this._countBits(kt);b=26-Ft,b!==0&&(Rt=Rt.ushln(b),lt.iushln(b),kt=Rt.words[Rt.length-1]|0);var xt=lt.length-Rt.length,g;if(_!=="mod"){g=new c(null),g.length=xt+1,g.words=new Array(g.length);for(var wt=0;wt<g.length;wt++)g.words[wt]=0}var nr=lt.clone()._ishlnsubmul(Rt,1,xt);nr.negative===0&&(lt=nr,g&&(g.words[xt]=1));for(var or=xt-1;or>=0;or--){var cr=(lt.words[Rt.length+or]|0)*67108864+(lt.words[Rt.length+or-1]|0);for(cr=Math.min(cr/kt|0,67108863),lt._ishlnsubmul(Rt,cr,or);lt.negative!==0;)cr--,lt.negative=0,lt._ishlnsubmul(Rt,1,or),lt.isZero()||(lt.negative^=1);g&&(g.words[or]=cr)}return g&&g.strip(),lt.strip(),_!=="div"&&b!==0&&lt.iushrn(b),{div:g||null,mod:lt}},c.prototype.divmod=function(h,_,b){if(a(!h.isZero()),this.isZero())return{div:new c(0),mod:new c(0)};var lt,Rt,kt;return this.negative!==0&&h.negative===0?(kt=this.neg().divmod(h,_),_!=="mod"&&(lt=kt.div.neg()),_!=="div"&&(Rt=kt.mod.neg(),b&&Rt.negative!==0&&Rt.iadd(h)),{div:lt,mod:Rt}):this.negative===0&&h.negative!==0?(kt=this.divmod(h.neg(),_),_!=="mod"&&(lt=kt.div.neg()),{div:lt,mod:kt.mod}):this.negative&h.negative?(kt=this.neg().divmod(h.neg(),_),_!=="div"&&(Rt=kt.mod.neg(),b&&Rt.negative!==0&&Rt.isub(h)),{div:kt.div,mod:Rt}):h.length>this.length||this.cmp(h)<0?{div:new c(0),mod:this}:h.length===1?_==="div"?{div:this.divn(h.words[0]),mod:null}:_==="mod"?{div:null,mod:new c(this.modn(h.words[0]))}:{div:this.divn(h.words[0]),mod:new c(this.modn(h.words[0]))}:this._wordDiv(h,_)},c.prototype.div=function(h){return this.divmod(h,"div",!1).div},c.prototype.mod=function(h){return this.divmod(h,"mod",!1).mod},c.prototype.umod=function(h){return this.divmod(h,"mod",!0).mod},c.prototype.divRound=function(h){var _=this.divmod(h);if(_.mod.isZero())return _.div;var b=_.div.negative!==0?_.mod.isub(h):_.mod,lt=h.ushrn(1),Rt=h.andln(1),kt=b.cmp(lt);return kt<0||Rt===1&&kt===0?_.div:_.div.negative!==0?_.div.isubn(1):_.div.iaddn(1)},c.prototype.modn=function(h){a(h<=67108863);for(var _=(1<<26)%h,b=0,lt=this.length-1;lt>=0;lt--)b=(_*b+(this.words[lt]|0))%h;return b},c.prototype.idivn=function(h){a(h<=67108863);for(var _=0,b=this.length-1;b>=0;b--){var lt=(this.words[b]|0)+_*67108864;this.words[b]=lt/h|0,_=lt%h}return this.strip()},c.prototype.divn=function(h){return this.clone().idivn(h)},c.prototype.egcd=function(h){a(h.negative===0),a(!h.isZero());var _=this,b=h.clone();_.negative!==0?_=_.umod(h):_=_.clone();for(var lt=new c(1),Rt=new c(0),kt=new c(0),Ft=new c(1),xt=0;_.isEven()&&b.isEven();)_.iushrn(1),b.iushrn(1),++xt;for(var g=b.clone(),wt=_.clone();!_.isZero();){for(var nr=0,or=1;!(_.words[0]&or)&&nr<26;++nr,or<<=1);if(nr>0)for(_.iushrn(nr);nr-- >0;)(lt.isOdd()||Rt.isOdd())&&(lt.iadd(g),Rt.isub(wt)),lt.iushrn(1),Rt.iushrn(1);for(var cr=0,Rr=1;!(b.words[0]&Rr)&&cr<26;++cr,Rr<<=1);if(cr>0)for(b.iushrn(cr);cr-- >0;)(kt.isOdd()||Ft.isOdd())&&(kt.iadd(g),Ft.isub(wt)),kt.iushrn(1),Ft.iushrn(1);_.cmp(b)>=0?(_.isub(b),lt.isub(kt),Rt.isub(Ft)):(b.isub(_),kt.isub(lt),Ft.isub(Rt))}return{a:kt,b:Ft,gcd:b.iushln(xt)}},c.prototype._invmp=function(h){a(h.negative===0),a(!h.isZero());var _=this,b=h.clone();_.negative!==0?_=_.umod(h):_=_.clone();for(var lt=new c(1),Rt=new c(0),kt=b.clone();_.cmpn(1)>0&&b.cmpn(1)>0;){for(var Ft=0,xt=1;!(_.words[0]&xt)&&Ft<26;++Ft,xt<<=1);if(Ft>0)for(_.iushrn(Ft);Ft-- >0;)lt.isOdd()&&lt.iadd(kt),lt.iushrn(1);for(var g=0,wt=1;!(b.words[0]&wt)&&g<26;++g,wt<<=1);if(g>0)for(b.iushrn(g);g-- >0;)Rt.isOdd()&&Rt.iadd(kt),Rt.iushrn(1);_.cmp(b)>=0?(_.isub(b),lt.isub(Rt)):(b.isub(_),Rt.isub(lt))}var nr;return _.cmpn(1)===0?nr=lt:nr=Rt,nr.cmpn(0)<0&&nr.iadd(h),nr},c.prototype.gcd=function(h){if(this.isZero())return h.abs();if(h.isZero())return this.abs();var _=this.clone(),b=h.clone();_.negative=0,b.negative=0;for(var lt=0;_.isEven()&&b.isEven();lt++)_.iushrn(1),b.iushrn(1);do{for(;_.isEven();)_.iushrn(1);for(;b.isEven();)b.iushrn(1);var Rt=_.cmp(b);if(Rt<0){var kt=_;_=b,b=kt}else if(Rt===0||b.cmpn(1)===0)break;_.isub(b)}while(!0);return b.iushln(lt)},c.prototype.invm=function(h){return this.egcd(h).a.umod(h)},c.prototype.isEven=function(){return(this.words[0]&1)===0},c.prototype.isOdd=function(){return(this.words[0]&1)===1},c.prototype.andln=function(h){return this.words[0]&h},c.prototype.bincn=function(h){a(typeof h=="number");var _=h%26,b=(h-_)/26,lt=1<<_;if(this.length<=b)return this._expand(b+1),this.words[b]|=lt,this;for(var Rt=lt,kt=b;Rt!==0&&kt<this.length;kt++){var Ft=this.words[kt]|0;Ft+=Rt,Rt=Ft>>>26,Ft&=67108863,this.words[kt]=Ft}return Rt!==0&&(this.words[kt]=Rt,this.length++),this},c.prototype.isZero=function(){return this.length===1&&this.words[0]===0},c.prototype.cmpn=function(h){var _=h<0;if(this.negative!==0&&!_)return-1;if(this.negative===0&&_)return 1;this.strip();var b;if(this.length>1)b=1;else{_&&(h=-h),a(h<=67108863,"Number is too big");var lt=this.words[0]|0;b=lt===h?0:lt<h?-1:1}return this.negative!==0?-b|0:b},c.prototype.cmp=function(h){if(this.negative!==0&&h.negative===0)return-1;if(this.negative===0&&h.negative!==0)return 1;var _=this.ucmp(h);return this.negative!==0?-_|0:_},c.prototype.ucmp=function(h){if(this.length>h.length)return 1;if(this.length<h.length)return-1;for(var _=0,b=this.length-1;b>=0;b--){var lt=this.words[b]|0,Rt=h.words[b]|0;if(lt!==Rt){lt<Rt?_=-1:lt>Rt&&(_=1);break}}return _},c.prototype.gtn=function(h){return this.cmpn(h)===1},c.prototype.gt=function(h){return this.cmp(h)===1},c.prototype.gten=function(h){return this.cmpn(h)>=0},c.prototype.gte=function(h){return this.cmp(h)>=0},c.prototype.ltn=function(h){return this.cmpn(h)===-1},c.prototype.lt=function(h){return this.cmp(h)===-1},c.prototype.lten=function(h){return this.cmpn(h)<=0},c.prototype.lte=function(h){return this.cmp(h)<=0},c.prototype.eqn=function(h){return this.cmpn(h)===0},c.prototype.eq=function(h){return this.cmp(h)===0},c.red=function(h){return new lr(h)},c.prototype.toRed=function(h){return a(!this.red,"Already a number in reduction context"),a(this.negative===0,"red works only with positives"),h.convertTo(this)._forceRed(h)},c.prototype.fromRed=function(){return a(this.red,"fromRed works only with numbers in reduction context"),this.red.convertFrom(this)},c.prototype._forceRed=function(h){return this.red=h,this},c.prototype.forceRed=function(h){return a(!this.red,"Already a number in reduction context"),this._forceRed(h)},c.prototype.redAdd=function(h){return a(this.red,"redAdd works only with red numbers"),this.red.add(this,h)},c.prototype.redIAdd=function(h){return a(this.red,"redIAdd works only with red numbers"),this.red.iadd(this,h)},c.prototype.redSub=function(h){return a(this.red,"redSub works only with red numbers"),this.red.sub(this,h)},c.prototype.redISub=function(h){return a(this.red,"redISub works only with red numbers"),this.red.isub(this,h)},c.prototype.redShl=function(h){return a(this.red,"redShl works only with red numbers"),this.red.shl(this,h)},c.prototype.redMul=function(h){return a(this.red,"redMul works only with red numbers"),this.red._verify2(this,h),this.red.mul(this,h)},c.prototype.redIMul=function(h){return a(this.red,"redMul works only with red numbers"),this.red._verify2(this,h),this.red.imul(this,h)},c.prototype.redSqr=function(){return a(this.red,"redSqr works only with red numbers"),this.red._verify1(this),this.red.sqr(this)},c.prototype.redISqr=function(){return a(this.red,"redISqr works only with red numbers"),this.red._verify1(this),this.red.isqr(this)},c.prototype.redSqrt=function(){return a(this.red,"redSqrt works only with red numbers"),this.red._verify1(this),this.red.sqrt(this)},c.prototype.redInvm=function(){return a(this.red,"redInvm works only with red numbers"),this.red._verify1(this),this.red.invm(this)},c.prototype.redNeg=function(){return a(this.red,"redNeg works only with red numbers"),this.red._verify1(this),this.red.neg(this)},c.prototype.redPow=function(h){return a(this.red&&!h.red,"redPow(normalNum)"),this.red._verify1(this),this.red.pow(this,h)};var sr={k256:null,p224:null,p192:null,p25519:null};function ar(Mt,h){this.name=Mt,this.p=new c(h,16),this.n=this.p.bitLength(),this.k=new c(1).iushln(this.n).isub(this.p),this.tmp=this._tmp()}ar.prototype._tmp=function(){var h=new c(null);return h.words=new Array(Math.ceil(this.n/13)),h},ar.prototype.ireduce=function(h){var _=h,b;do this.split(_,this.tmp),_=this.imulK(_),_=_.iadd(this.tmp),b=_.bitLength();while(b>this.n);var lt=b<this.n?-1:_.ucmp(this.p);return lt===0?(_.words[0]=0,_.length=1):lt>0?_.isub(this.p):_.strip!==void 0?_.strip():_._strip(),_},ar.prototype.split=function(h,_){h.iushrn(this.n,0,_)},ar.prototype.imulK=function(h){return h.imul(this.k)};function hr(){ar.call(this,"k256","ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff fffffffe fffffc2f")}d(hr,ar),hr.prototype.split=function(h,_){for(var b=4194303,lt=Math.min(h.length,9),Rt=0;Rt<lt;Rt++)_.words[Rt]=h.words[Rt];if(_.length=lt,h.length<=9){h.words[0]=0,h.length=1;return}var kt=h.words[9];for(_.words[_.length++]=kt&b,Rt=10;Rt<h.length;Rt++){var Ft=h.words[Rt]|0;h.words[Rt-10]=(Ft&b)<<4|kt>>>22,kt=Ft}kt>>>=22,h.words[Rt-10]=kt,kt===0&&h.length>10?h.length-=10:h.length-=9},hr.prototype.imulK=function(h){h.words[h.length]=0,h.words[h.length+1]=0,h.length+=2;for(var _=0,b=0;b<h.length;b++){var lt=h.words[b]|0;_+=lt*977,h.words[b]=_&67108863,_=lt*64+(_/67108864|0)}return h.words[h.length-1]===0&&(h.length--,h.words[h.length-1]===0&&h.length--),h};function _r(){ar.call(this,"p224","ffffffff ffffffff ffffffff ffffffff 00000000 00000000 00000001")}d(_r,ar);function dr(){ar.call(this,"p192","ffffffff ffffffff ffffffff fffffffe ffffffff ffffffff")}d(dr,ar);function ur(){ar.call(this,"25519","7fffffffffffffff ffffffffffffffff ffffffffffffffff ffffffffffffffed")}d(ur,ar),ur.prototype.imulK=function(h){for(var _=0,b=0;b<h.length;b++){var lt=(h.words[b]|0)*19+_,Rt=lt&67108863;lt>>>=26,h.words[b]=Rt,_=lt}return _!==0&&(h.words[h.length++]=_),h},c._prime=function(h){if(sr[h])return sr[h];var _;if(h==="k256")_=new hr;else if(h==="p224")_=new _r;else if(h==="p192")_=new dr;else if(h==="p25519")_=new ur;else throw new Error("Unknown prime "+h);return sr[h]=_,_};function lr(Mt){if(typeof Mt=="string"){var h=c._prime(Mt);this.m=h.p,this.prime=h}else a(Mt.gtn(1),"modulus must be greater than 1"),this.m=Mt,this.prime=null}lr.prototype._verify1=function(h){a(h.negative===0,"red works only with positives"),a(h.red,"red works only with red numbers")},lr.prototype._verify2=function(h,_){a((h.negative|_.negative)===0,"red works only with positives"),a(h.red&&h.red===_.red,"red works only with red numbers")},lr.prototype.imod=function(h){return this.prime?this.prime.ireduce(h)._forceRed(this):h.umod(this.m)._forceRed(this)},lr.prototype.neg=function(h){return h.isZero()?h.clone():this.m.sub(h)._forceRed(this)},lr.prototype.add=function(h,_){this._verify2(h,_);var b=h.add(_);return b.cmp(this.m)>=0&&b.isub(this.m),b._forceRed(this)},lr.prototype.iadd=function(h,_){this._verify2(h,_);var b=h.iadd(_);return b.cmp(this.m)>=0&&b.isub(this.m),b},lr.prototype.sub=function(h,_){this._verify2(h,_);var b=h.sub(_);return b.cmpn(0)<0&&b.iadd(this.m),b._forceRed(this)},lr.prototype.isub=function(h,_){this._verify2(h,_);var b=h.isub(_);return b.cmpn(0)<0&&b.iadd(this.m),b},lr.prototype.shl=function(h,_){return this._verify1(h),this.imod(h.ushln(_))},lr.prototype.imul=function(h,_){return this._verify2(h,_),this.imod(h.imul(_))},lr.prototype.mul=function(h,_){return this._verify2(h,_),this.imod(h.mul(_))},lr.prototype.isqr=function(h){return this.imul(h,h.clone())},lr.prototype.sqr=function(h){return this.mul(h,h)},lr.prototype.sqrt=function(h){if(h.isZero())return h.clone();var _=this.m.andln(3);if(a(_%2===1),_===3){var b=this.m.add(new c(1)).iushrn(2);return this.pow(h,b)}for(var lt=this.m.subn(1),Rt=0;!lt.isZero()&&lt.andln(1)===0;)Rt++,lt.iushrn(1);a(!lt.isZero());var kt=new c(1).toRed(this),Ft=kt.redNeg(),xt=this.m.subn(1).iushrn(1),g=this.m.bitLength();for(g=new c(2*g*g).toRed(this);this.pow(g,xt).cmp(Ft)!==0;)g.redIAdd(Ft);for(var wt=this.pow(g,lt),nr=this.pow(h,lt.addn(1).iushrn(1)),or=this.pow(h,lt),cr=Rt;or.cmp(kt)!==0;){for(var Rr=or,Ar=0;Rr.cmp(kt)!==0;Ar++)Rr=Rr.redSqr();a(Ar<cr);var pr=this.pow(wt,new c(1).iushln(cr-Ar-1));nr=nr.redMul(pr),wt=pr.redSqr(),or=or.redMul(wt),cr=Ar}return nr},lr.prototype.invm=function(h){var _=h._invmp(this.m);return _.negative!==0?(_.negative=0,this.imod(_).redNeg()):this.imod(_)},lr.prototype.pow=function(h,_){if(_.isZero())return new c(1).toRed(this);if(_.cmpn(1)===0)return h.clone();var b=4,lt=new Array(1<<b);lt[0]=new c(1).toRed(this),lt[1]=h;for(var Rt=2;Rt<lt.length;Rt++)lt[Rt]=this.mul(lt[Rt-1],h);var kt=lt[0],Ft=0,xt=0,g=_.bitLength()%26;for(g===0&&(g=26),Rt=_.length-1;Rt>=0;Rt--){for(var wt=_.words[Rt],nr=g-1;nr>=0;nr--){var or=wt>>nr&1;if(kt!==lt[0]&&(kt=this.sqr(kt)),or===0&&Ft===0){xt=0;continue}Ft<<=1,Ft|=or,xt++,!(xt!==b&&(Rt!==0||nr!==0))&&(kt=this.mul(kt,lt[Ft]),xt=0,Ft=0)}g=26}return kt},lr.prototype.convertTo=function(h){var _=h.umod(this.m);return _===h?_.clone():_},lr.prototype.convertFrom=function(h){var _=h.clone();return _.red=null,_},c.mont=function(h){return new gr(h)};function gr(Mt){lr.call(this,Mt),this.shift=this.m.bitLength(),this.shift%26!==0&&(this.shift+=26-this.shift%26),this.r=new c(1).iushln(this.shift),this.r2=this.imod(this.r.sqr()),this.rinv=this.r._invmp(this.m),this.minv=this.rinv.mul(this.r).isubn(1).div(this.m),this.minv=this.minv.umod(this.r),this.minv=this.r.sub(this.minv)}d(gr,lr),gr.prototype.convertTo=function(h){return this.imod(h.ushln(this.shift))},gr.prototype.convertFrom=function(h){var _=this.imod(h.mul(this.rinv));return _.red=null,_},gr.prototype.imul=function(h,_){if(h.isZero()||_.isZero())return h.words[0]=0,h.length=1,h;var b=h.imul(_),lt=b.maskn(this.shift).mul(this.minv).imaskn(this.shift).mul(this.m),Rt=b.isub(lt).iushrn(this.shift),kt=Rt;return Rt.cmp(this.m)>=0?kt=Rt.isub(this.m):Rt.cmpn(0)<0&&(kt=Rt.iadd(this.m)),kt._forceRed(this)},gr.prototype.mul=function(h,_){if(h.isZero()||_.isZero())return new c(0)._forceRed(this);var b=h.mul(_),lt=b.maskn(this.shift).mul(this.minv).imaskn(this.shift).mul(this.m),Rt=b.isub(lt).iushrn(this.shift),kt=Rt;return Rt.cmp(this.m)>=0?kt=Rt.isub(this.m):Rt.cmpn(0)<0&&(kt=Rt.iadd(this.m)),kt._forceRed(this)},gr.prototype.invm=function(h){var _=this.imod(h._invmp(this.m).mul(this.r2));return _._forceRed(this)}})(s,commonjsGlobal$2)}(bn$5)),bn$5.exports}var brorand={exports:{}},hasRequiredBrorand;function requireBrorand(){if(hasRequiredBrorand)return brorand.exports;hasRequiredBrorand=1;var s;brorand.exports=function(d){return s||(s=new e(null)),s.generate(d)};function e(a){this.rand=a}if(brorand.exports.Rand=e,e.prototype.generate=function(d){return this._rand(d)},e.prototype._rand=function(d){if(this.rand.getBytes)return this.rand.getBytes(d);for(var c=new Uint8Array(d),j=0;j<c.length;j++)c[j]=this.rand.getByte();return c},typeof self=="object")self.crypto&&self.crypto.getRandomValues?e.prototype._rand=function(d){var c=new Uint8Array(d);return self.crypto.getRandomValues(c),c}:self.msCrypto&&self.msCrypto.getRandomValues?e.prototype._rand=function(d){var c=new Uint8Array(d);return self.msCrypto.getRandomValues(c),c}:typeof window=="object"&&(e.prototype._rand=function(){throw new Error("Not implemented yet")});else try{var o=requireCryptoBrowserify();if(typeof o.randomBytes!="function")throw new Error("Not supported");e.prototype._rand=function(d){return o.randomBytes(d)}}catch{}return brorand.exports}var mr,hasRequiredMr;function requireMr(){if(hasRequiredMr)return mr;hasRequiredMr=1;var s=requireBn$5(),e=requireBrorand();function o(a){this.rand=a||new e.Rand}return mr=o,o.create=function(d){return new o(d)},o.prototype._randbelow=function(d){var c=d.bitLength(),j=Math.ceil(c/8);do var _e=new s(this.rand.generate(j));while(_e.cmp(d)>=0);return _e},o.prototype._randrange=function(d,c){var j=c.sub(d);return d.add(this._randbelow(j))},o.prototype.test=function(d,c,j){var _e=d.bitLength(),pt=s.mont(d),yt=new s(1).toRed(pt);c||(c=Math.max(1,_e/48|0));for(var ct=d.subn(1),Ct=0;!ct.testn(Ct);Ct++);for(var qt=d.shrn(Ct),Ot=ct.toRed(pt),Lt=!0;c>0;c--){var Qt=this._randrange(new s(2),ct);j&&j(Qt);var ir=Qt.toRed(pt).redPow(qt);if(!(ir.cmp(yt)===0||ir.cmp(Ot)===0)){for(var er=1;er<Ct;er++){if(ir=ir.redSqr(),ir.cmp(yt)===0)return!1;if(ir.cmp(Ot)===0)break}if(er===Ct)return!1}}return Lt},o.prototype.getDivisor=function(d,c){var j=d.bitLength(),_e=s.mont(d),pt=new s(1).toRed(_e);c||(c=Math.max(1,j/48|0));for(var yt=d.subn(1),ct=0;!yt.testn(ct);ct++);for(var Ct=d.shrn(ct),qt=yt.toRed(_e);c>0;c--){var Ot=this._randrange(new s(2),yt),Lt=d.gcd(Ot);if(Lt.cmpn(1)!==0)return Lt;var Qt=Ot.toRed(_e).redPow(Ct);if(!(Qt.cmp(pt)===0||Qt.cmp(qt)===0)){for(var ir=1;ir<ct;ir++){if(Qt=Qt.redSqr(),Qt.cmp(pt)===0)return Qt.fromRed().subn(1).gcd(d);if(Qt.cmp(qt)===0)break}if(ir===ct)return Qt=Qt.redSqr(),Qt.fromRed().subn(1).gcd(d)}}return!1},mr}var generatePrime,hasRequiredGeneratePrime;function requireGeneratePrime(){if(hasRequiredGeneratePrime)return generatePrime;hasRequiredGeneratePrime=1;var s=requireBrowser$b();generatePrime=ir,ir.simpleSieve=Lt,ir.fermatTest=Qt;var e=requireBn$6(),o=new e(24),a=requireMr(),d=new a,c=new e(1),j=new e(2),_e=new e(5);new e(16),new e(8);var pt=new e(10),yt=new e(3);new e(7);var ct=new e(11),Ct=new e(4);new e(12);var qt=null;function Ot(){if(qt!==null)return qt;var er=1048576,tr=[];tr[0]=2;for(var sr=1,ar=3;ar<er;ar+=2){for(var hr=Math.ceil(Math.sqrt(ar)),_r=0;_r<sr&&tr[_r]<=hr&&ar%tr[_r]!==0;_r++);sr!==_r&&tr[_r]<=hr||(tr[sr++]=ar)}return qt=tr,tr}function Lt(er){for(var tr=Ot(),sr=0;sr<tr.length;sr++)if(er.modn(tr[sr])===0)return er.cmpn(tr[sr])===0;return!0}function Qt(er){var tr=e.mont(er);return j.toRed(tr).redPow(er.subn(1)).fromRed().cmpn(1)===0}function ir(er,tr){if(er<16)return tr===2||tr===5?new e([140,123]):new e([140,39]);tr=new e(tr);for(var sr,ar;;){for(sr=new e(s(Math.ceil(er/8)));sr.bitLength()>er;)sr.ishrn(1);if(sr.isEven()&&sr.iadd(c),sr.testn(1)||sr.iadd(j),tr.cmp(j)){if(!tr.cmp(_e))for(;sr.mod(pt).cmp(yt);)sr.iadd(Ct)}else for(;sr.mod(o).cmp(ct);)sr.iadd(Ct);if(ar=sr.shrn(1),Lt(ar)&&Lt(sr)&&Qt(ar)&&Qt(sr)&&d.test(ar)&&d.test(sr))return sr}}return generatePrime}const modp1={gen:"02",prime:"ffffffffffffffffc90fdaa22168c234c4c6628b80dc1cd129024e088a67cc74020bbea63b139b22514a08798e3404ddef9519b3cd3a431b302b0a6df25f14374fe1356d6d51c245e485b576625e7ec6f44c42e9a63a3620ffffffffffffffff"},modp2={gen:"02",prime:"ffffffffffffffffc90fdaa22168c234c4c6628b80dc1cd129024e088a67cc74020bbea63b139b22514a08798e3404ddef9519b3cd3a431b302b0a6df25f14374fe1356d6d51c245e485b576625e7ec6f44c42e9a637ed6b0bff5cb6f406b7edee386bfb5a899fa5ae9f24117c4b1fe649286651ece65381ffffffffffffffff"},modp5={gen:"02",prime:"ffffffffffffffffc90fdaa22168c234c4c6628b80dc1cd129024e088a67cc74020bbea63b139b22514a08798e3404ddef9519b3cd3a431b302b0a6df25f14374fe1356d6d51c245e485b576625e7ec6f44c42e9a637ed6b0bff5cb6f406b7edee386bfb5a899fa5ae9f24117c4b1fe649286651ece45b3dc2007cb8a163bf0598da48361c55d39a69163fa8fd24cf5f83655d23dca3ad961c62f356208552bb9ed529077096966d670c354e4abc9804f1746c08ca237327ffffffffffffffff"},modp14={gen:"02",prime:"ffffffffffffffffc90fdaa22168c234c4c6628b80dc1cd129024e088a67cc74020bbea63b139b22514a08798e3404ddef9519b3cd3a431b302b0a6df25f14374fe1356d6d51c245e485b576625e7ec6f44c42e9a637ed6b0bff5cb6f406b7edee386bfb5a899fa5ae9f24117c4b1fe649286651ece45b3dc2007cb8a163bf0598da48361c55d39a69163fa8fd24cf5f83655d23dca3ad961c62f356208552bb9ed529077096966d670c354e4abc9804f1746c08ca18217c32905e462e36ce3be39e772c180e86039b2783a2ec07a28fb5c55df06f4c52c9de2bcbf6955817183995497cea956ae515d2261898fa051015728e5a8aacaa68ffffffffffffffff"},modp15={gen:"02",prime:"ffffffffffffffffc90fdaa22168c234c4c6628b80dc1cd129024e088a67cc74020bbea63b139b22514a08798e3404ddef9519b3cd3a431b302b0a6df25f14374fe1356d6d51c245e485b576625e7ec6f44c42e9a637ed6b0bff5cb6f406b7edee386bfb5a899fa5ae9f24117c4b1fe649286651ece45b3dc2007cb8a163bf0598da48361c55d39a69163fa8fd24cf5f83655d23dca3ad961c62f356208552bb9ed529077096966d670c354e4abc9804f1746c08ca18217c32905e462e36ce3be39e772c180e86039b2783a2ec07a28fb5c55df06f4c52c9de2bcbf6955817183995497cea956ae515d2261898fa051015728e5a8aaac42dad33170d04507a33a85521abdf1cba64ecfb850458dbef0a8aea71575d060c7db3970f85a6e1e4c7abf5ae8cdb0933d71e8c94e04a25619dcee3d2261ad2ee6bf12ffa06d98a0864d87602733ec86a64521f2b18177b200cbbe117577a615d6c770988c0bad946e208e24fa074e5ab3143db5bfce0fd108e4b82d120a93ad2caffffffffffffffff"},modp16={gen:"02",prime:"ffffffffffffffffc90fdaa22168c234c4c6628b80dc1cd129024e088a67cc74020bbea63b139b22514a08798e3404ddef9519b3cd3a431b302b0a6df25f14374fe1356d6d51c245e485b576625e7ec6f44c42e9a637ed6b0bff5cb6f406b7edee386bfb5a899fa5ae9f24117c4b1fe649286651ece45b3dc2007cb8a163bf0598da48361c55d39a69163fa8fd24cf5f83655d23dca3ad961c62f356208552bb9ed529077096966d670c354e4abc9804f1746c08ca18217c32905e462e36ce3be39e772c180e86039b2783a2ec07a28fb5c55df06f4c52c9de2bcbf6955817183995497cea956ae515d2261898fa051015728e5a8aaac42dad33170d04507a33a85521abdf1cba64ecfb850458dbef0a8aea71575d060c7db3970f85a6e1e4c7abf5ae8cdb0933d71e8c94e04a25619dcee3d2261ad2ee6bf12ffa06d98a0864d87602733ec86a64521f2b18177b200cbbe117577a615d6c770988c0bad946e208e24fa074e5ab3143db5bfce0fd108e4b82d120a92108011a723c12a787e6d788719a10bdba5b2699c327186af4e23c1a946834b6150bda2583e9ca2ad44ce8dbbbc2db04de8ef92e8efc141fbecaa6287c59474e6bc05d99b2964fa090c3a2233ba186515be7ed1f612970cee2d7afb81bdd762170481cd0069127d5b05aa993b4ea988d8fddc186ffb7dc90a6c08f4df435c934063199ffffffffffffffff"},modp17={gen:"02",prime:"ffffffffffffffffc90fdaa22168c234c4c6628b80dc1cd129024e088a67cc74020bbea63b139b22514a08798e3404ddef9519b3cd3a431b302b0a6df25f14374fe1356d6d51c245e485b576625e7ec6f44c42e9a637ed6b0bff5cb6f406b7edee386bfb5a899fa5ae9f24117c4b1fe649286651ece45b3dc2007cb8a163bf0598da48361c55d39a69163fa8fd24cf5f83655d23dca3ad961c62f356208552bb9ed529077096966d670c354e4abc9804f1746c08ca18217c32905e462e36ce3be39e772c180e86039b2783a2ec07a28fb5c55df06f4c52c9de2bcbf6955817183995497cea956ae515d2261898fa051015728e5a8aaac42dad33170d04507a33a85521abdf1cba64ecfb850458dbef0a8aea71575d060c7db3970f85a6e1e4c7abf5ae8cdb0933d71e8c94e04a25619dcee3d2261ad2ee6bf12ffa06d98a0864d87602733ec86a64521f2b18177b200cbbe117577a615d6c770988c0bad946e208e24fa074e5ab3143db5bfce0fd108e4b82d120a92108011a723c12a787e6d788719a10bdba5b2699c327186af4e23c1a946834b6150bda2583e9ca2ad44ce8dbbbc2db04de8ef92e8efc141fbecaa6287c59474e6bc05d99b2964fa090c3a2233ba186515be7ed1f612970cee2d7afb81bdd762170481cd0069127d5b05aa993b4ea988d8fddc186ffb7dc90a6c08f4df435c93402849236c3fab4d27c7026c1d4dcb2602646dec9751e763dba37bdf8ff9406ad9e530ee5db382f413001aeb06a53ed9027d831179727b0865a8918da3edbebcf9b14ed44ce6cbaced4bb1bdb7f1447e6cc254b332051512bd7af426fb8f401378cd2bf5983ca01c64b92ecf032ea15d1721d03f482d7ce6e74fef6d55e702f46980c82b5a84031900b1c9e59e7c97fbec7e8f323a97a7e36cc88be0f1d45b7ff585ac54bd407b22b4154aacc8f6d7ebf48e1d814cc5ed20f8037e0a79715eef29be32806a1d58bb7c5da76f550aa3d8a1fbff0eb19ccb1a313d55cda56c9ec2ef29632387fe8d76e3c0468043e8f663f4860ee12bf2d5b0b7474d6e694f91e6dcc4024ffffffffffffffff"},modp18={gen:"02",prime:"ffffffffffffffffc90fdaa22168c234c4c6628b80dc1cd129024e088a67cc74020bbea63b139b22514a08798e3404ddef9519b3cd3a431b302b0a6df25f14374fe1356d6d51c245e485b576625e7ec6f44c42e9a637ed6b0bff5cb6f406b7edee386bfb5a899fa5ae9f24117c4b1fe649286651ece45b3dc2007cb8a163bf0598da48361c55d39a69163fa8fd24cf5f83655d23dca3ad961c62f356208552bb9ed529077096966d670c354e4abc9804f1746c08ca18217c32905e462e36ce3be39e772c180e86039b2783a2ec07a28fb5c55df06f4c52c9de2bcbf6955817183995497cea956ae515d2261898fa051015728e5a8aaac42dad33170d04507a33a85521abdf1cba64ecfb850458dbef0a8aea71575d060c7db3970f85a6e1e4c7abf5ae8cdb0933d71e8c94e04a25619dcee3d2261ad2ee6bf12ffa06d98a0864d87602733ec86a64521f2b18177b200cbbe117577a615d6c770988c0bad946e208e24fa074e5ab3143db5bfce0fd108e4b82d120a92108011a723c12a787e6d788719a10bdba5b2699c327186af4e23c1a946834b6150bda2583e9ca2ad44ce8dbbbc2db04de8ef92e8efc141fbecaa6287c59474e6bc05d99b2964fa090c3a2233ba186515be7ed1f612970cee2d7afb81bdd762170481cd0069127d5b05aa993b4ea988d8fddc186ffb7dc90a6c08f4df435c93402849236c3fab4d27c7026c1d4dcb2602646dec9751e763dba37bdf8ff9406ad9e530ee5db382f413001aeb06a53ed9027d831179727b0865a8918da3edbebcf9b14ed44ce6cbaced4bb1bdb7f1447e6cc254b332051512bd7af426fb8f401378cd2bf5983ca01c64b92ecf032ea15d1721d03f482d7ce6e74fef6d55e702f46980c82b5a84031900b1c9e59e7c97fbec7e8f323a97a7e36cc88be0f1d45b7ff585ac54bd407b22b4154aacc8f6d7ebf48e1d814cc5ed20f8037e0a79715eef29be32806a1d58bb7c5da76f550aa3d8a1fbff0eb19ccb1a313d55cda56c9ec2ef29632387fe8d76e3c0468043e8f663f4860ee12bf2d5b0b7474d6e694f91e6dbe115974a3926f12fee5e438777cb6a932df8cd8bec4d073b931ba3bc832b68d9dd300741fa7bf8afc47ed2576f6936ba424663aab639c5ae4f5683423b4742bf1c978238f16cbe39d652de3fdb8befc848ad922222e04a4037c0713eb57a81a23f0c73473fc646cea306b4bcbc8862f8385ddfa9d4b7fa2c087e879683303ed5bdd3a062b3cf5b3a278a66d2a13f83f44f82ddf310ee074ab6a364597e899a0255dc164f31cc50846851df9ab48195ded7ea1b1d510bd7ee74d73faf36bc31ecfa268359046f4eb879f924009438b481c6cd7889a002ed5ee382bc9190da6fc026e479558e4475677e9aa9e3050e2765694dfc81f56e880b96e7160c980dd98edd3dfffffffffffffffff"},require$$1$1={modp1,modp2,modp5,modp14,modp15,modp16,modp17,modp18};var dh,hasRequiredDh;function requireDh(){if(hasRequiredDh)return dh;hasRequiredDh=1;var s=requireBn$6(),e=requireMr(),o=new e,a=new s(24),d=new s(11),c=new s(10),j=new s(3),_e=new s(7),pt=requireGeneratePrime(),yt=requireBrowser$b();dh=Lt;function ct(ir,er){return er=er||"utf8",Buffer.isBuffer(ir)||(ir=new Buffer(ir,er)),this._pub=new s(ir),this}function Ct(ir,er){return er=er||"utf8",Buffer.isBuffer(ir)||(ir=new Buffer(ir,er)),this._priv=new s(ir),this}var qt={};function Ot(ir,er){var tr=er.toString("hex"),sr=[tr,ir.toString(16)].join("_");if(sr in qt)return qt[sr];var ar=0;if(ir.isEven()||!pt.simpleSieve||!pt.fermatTest(ir)||!o.test(ir))return ar+=1,tr==="02"||tr==="05"?ar+=8:ar+=4,qt[sr]=ar,ar;o.test(ir.shrn(1))||(ar+=2);var hr;switch(tr){case"02":ir.mod(a).cmp(d)&&(ar+=8);break;case"05":hr=ir.mod(c),hr.cmp(j)&&hr.cmp(_e)&&(ar+=8);break;default:ar+=4}return qt[sr]=ar,ar}function Lt(ir,er,tr){this.setGenerator(er),this.__prime=new s(ir),this._prime=s.mont(this.__prime),this._primeLen=ir.length,this._pub=void 0,this._priv=void 0,this._primeCode=void 0,tr?(this.setPublicKey=ct,this.setPrivateKey=Ct):this._primeCode=8}Object.defineProperty(Lt.prototype,"verifyError",{enumerable:!0,get:function(){return typeof this._primeCode!="number"&&(this._primeCode=Ot(this.__prime,this.__gen)),this._primeCode}}),Lt.prototype.generateKeys=function(){return this._priv||(this._priv=new s(yt(this._primeLen))),this._pub=this._gen.toRed(this._prime).redPow(this._priv).fromRed(),this.getPublicKey()},Lt.prototype.computeSecret=function(ir){ir=new s(ir),ir=ir.toRed(this._prime);var er=ir.redPow(this._priv).fromRed(),tr=new Buffer(er.toArray()),sr=this.getPrime();if(tr.length<sr.length){var ar=new Buffer(sr.length-tr.length);ar.fill(0),tr=Buffer.concat([ar,tr])}return tr},Lt.prototype.getPublicKey=function(er){return Qt(this._pub,er)},Lt.prototype.getPrivateKey=function(er){return Qt(this._priv,er)},Lt.prototype.getPrime=function(ir){return Qt(this.__prime,ir)},Lt.prototype.getGenerator=function(ir){return Qt(this._gen,ir)},Lt.prototype.setGenerator=function(ir,er){return er=er||"utf8",Buffer.isBuffer(ir)||(ir=new Buffer(ir,er)),this.__gen=ir,this._gen=new s(ir),this};function Qt(ir,er){var tr=new Buffer(ir.toArray());return er?tr.toString(er):tr}return dh}var hasRequiredBrowser$4;function requireBrowser$4(){if(hasRequiredBrowser$4)return browser$5;hasRequiredBrowser$4=1;var s=requireGeneratePrime(),e=require$$1$1,o=requireDh();function a(j){var _e=new Buffer(e[j].prime,"hex"),pt=new Buffer(e[j].gen,"hex");return new o(_e,pt)}var d={binary:!0,hex:!0,base64:!0};function c(j,_e,pt,yt){return Buffer.isBuffer(_e)||d[_e]===void 0?c(j,"binary",_e,pt):(_e=_e||"binary",yt=yt||"binary",pt=pt||new Buffer([2]),Buffer.isBuffer(pt)||(pt=new Buffer(pt,yt)),typeof j=="number"?new o(s(j,pt),pt,!0):(Buffer.isBuffer(j)||(j=new Buffer(j,_e)),new o(j,pt,!0)))}return browser$5.DiffieHellmanGroup=browser$5.createDiffieHellmanGroup=browser$5.getDiffieHellman=a,browser$5.createDiffieHellman=browser$5.DiffieHellman=c,browser$5}var readableBrowser={exports:{}},processNextickArgs={exports:{}},hasRequiredProcessNextickArgs;function requireProcessNextickArgs(){if(hasRequiredProcessNextickArgs)return processNextickArgs.exports;hasRequiredProcessNextickArgs=1,typeof process$1>"u"||!process$1.version||process$1.version.indexOf("v0.")===0||process$1.version.indexOf("v1.")===0&&process$1.version.indexOf("v1.8.")!==0?processNextickArgs.exports={nextTick:s}:processNextickArgs.exports=process$1;function s(e,o,a,d){if(typeof e!="function")throw new TypeError('"callback" argument must be a function');var c=arguments.length,j,_e;switch(c){case 0:case 1:return process$1.nextTick(e);case 2:return process$1.nextTick(function(){e.call(null,o)});case 3:return process$1.nextTick(function(){e.call(null,o,a)});case 4:return process$1.nextTick(function(){e.call(null,o,a,d)});default:for(j=new Array(c-1),_e=0;_e<j.length;)j[_e++]=arguments[_e];return process$1.nextTick(function(){e.apply(null,j)})}}return processNextickArgs.exports}var isarray,hasRequiredIsarray;function requireIsarray(){if(hasRequiredIsarray)return isarray;hasRequiredIsarray=1;var s={}.toString;return isarray=Array.isArray||function(e){return s.call(e)=="[object Array]"},isarray}var streamBrowser,hasRequiredStreamBrowser;function requireStreamBrowser(){return hasRequiredStreamBrowser||(hasRequiredStreamBrowser=1,streamBrowser=requireEvents().EventEmitter),streamBrowser}var safeBuffer={exports:{}},hasRequiredSafeBuffer;function requireSafeBuffer(){return hasRequiredSafeBuffer||(hasRequiredSafeBuffer=1,function(s,e){var o=require$$0$1,a=o.Buffer;function d(j,_e){for(var pt in j)_e[pt]=j[pt]}a.from&&a.alloc&&a.allocUnsafe&&a.allocUnsafeSlow?s.exports=o:(d(o,e),e.Buffer=c);function c(j,_e,pt){return a(j,_e,pt)}d(a,c),c.from=function(j,_e,pt){if(typeof j=="number")throw new TypeError("Argument must not be a number");return a(j,_e,pt)},c.alloc=function(j,_e,pt){if(typeof j!="number")throw new TypeError("Argument must be a number");var yt=a(j);return _e!==void 0?typeof pt=="string"?yt.fill(_e,pt):yt.fill(_e):yt.fill(0),yt},c.allocUnsafe=function(j){if(typeof j!="number")throw new TypeError("Argument must be a number");return a(j)},c.allocUnsafeSlow=function(j){if(typeof j!="number")throw new TypeError("Argument must be a number");return o.SlowBuffer(j)}}(safeBuffer,safeBuffer.exports)),safeBuffer.exports}var util={},hasRequiredUtil;function requireUtil(){if(hasRequiredUtil)return util;hasRequiredUtil=1;function s(Qt){return Array.isArray?Array.isArray(Qt):Lt(Qt)==="[object Array]"}util.isArray=s;function e(Qt){return typeof Qt=="boolean"}util.isBoolean=e;function o(Qt){return Qt===null}util.isNull=o;function a(Qt){return Qt==null}util.isNullOrUndefined=a;function d(Qt){return typeof Qt=="number"}util.isNumber=d;function c(Qt){return typeof Qt=="string"}util.isString=c;function j(Qt){return typeof Qt=="symbol"}util.isSymbol=j;function _e(Qt){return Qt===void 0}util.isUndefined=_e;function pt(Qt){return Lt(Qt)==="[object RegExp]"}util.isRegExp=pt;function yt(Qt){return typeof Qt=="object"&&Qt!==null}util.isObject=yt;function ct(Qt){return Lt(Qt)==="[object Date]"}util.isDate=ct;function Ct(Qt){return Lt(Qt)==="[object Error]"||Qt instanceof Error}util.isError=Ct;function qt(Qt){return typeof Qt=="function"}util.isFunction=qt;function Ot(Qt){return Qt===null||typeof Qt=="boolean"||typeof Qt=="number"||typeof Qt=="string"||typeof Qt=="symbol"||typeof Qt>"u"}util.isPrimitive=Ot,util.isBuffer=require$$0$1.Buffer.isBuffer;function Lt(Qt){return Object.prototype.toString.call(Qt)}return util}var BufferList={exports:{}},hasRequiredBufferList;function requireBufferList(){return hasRequiredBufferList||(hasRequiredBufferList=1,function(s){function e(c,j){if(!(c instanceof j))throw new TypeError("Cannot call a class as a function")}var o=requireSafeBuffer().Buffer,a=requireUtil$1();function d(c,j,_e){c.copy(j,_e)}s.exports=function(){function c(){e(this,c),this.head=null,this.tail=null,this.length=0}return c.prototype.push=function(_e){var pt={data:_e,next:null};this.length>0?this.tail.next=pt:this.head=pt,this.tail=pt,++this.length},c.prototype.unshift=function(_e){var pt={data:_e,next:this.head};this.length===0&&(this.tail=pt),this.head=pt,++this.length},c.prototype.shift=function(){if(this.length!==0){var _e=this.head.data;return this.length===1?this.head=this.tail=null:this.head=this.head.next,--this.length,_e}},c.prototype.clear=function(){this.head=this.tail=null,this.length=0},c.prototype.join=function(_e){if(this.length===0)return"";for(var pt=this.head,yt=""+pt.data;pt=pt.next;)yt+=_e+pt.data;return yt},c.prototype.concat=function(_e){if(this.length===0)return o.alloc(0);for(var pt=o.allocUnsafe(_e>>>0),yt=this.head,ct=0;yt;)d(yt.data,pt,ct),ct+=yt.data.length,yt=yt.next;return pt},c}(),a&&a.inspect&&a.inspect.custom&&(s.exports.prototype[a.inspect.custom]=function(){var c=a.inspect({length:this.length});return this.constructor.name+" "+c})}(BufferList)),BufferList.exports}var destroy_1,hasRequiredDestroy;function requireDestroy(){if(hasRequiredDestroy)return destroy_1;hasRequiredDestroy=1;var s=requireProcessNextickArgs();function e(d,c){var j=this,_e=this._readableState&&this._readableState.destroyed,pt=this._writableState&&this._writableState.destroyed;return _e||pt?(c?c(d):d&&(this._writableState?this._writableState.errorEmitted||(this._writableState.errorEmitted=!0,s.nextTick(a,this,d)):s.nextTick(a,this,d)),this):(this._readableState&&(this._readableState.destroyed=!0),this._writableState&&(this._writableState.destroyed=!0),this._destroy(d||null,function(yt){!c&&yt?j._writableState?j._writableState.errorEmitted||(j._writableState.errorEmitted=!0,s.nextTick(a,j,yt)):s.nextTick(a,j,yt):c&&c(yt)}),this)}function o(){this._readableState&&(this._readableState.destroyed=!1,this._readableState.reading=!1,this._readableState.ended=!1,this._readableState.endEmitted=!1),this._writableState&&(this._writableState.destroyed=!1,this._writableState.ended=!1,this._writableState.ending=!1,this._writableState.finalCalled=!1,this._writableState.prefinished=!1,this._writableState.finished=!1,this._writableState.errorEmitted=!1)}function a(d,c){d.emit("error",c)}return destroy_1={destroy:e,undestroy:o},destroy_1}var _stream_writable,hasRequired_stream_writable;function require_stream_writable(){if(hasRequired_stream_writable)return _stream_writable;hasRequired_stream_writable=1;var s=requireProcessNextickArgs();_stream_writable=Qt;function e(kt){var Ft=this;this.next=null,this.entry=null,this.finish=function(){Rt(Ft,kt)}}var o=!process$1.browser&&["v0.10","v0.9."].indexOf(process$1.version.slice(0,5))>-1?setImmediate:s.nextTick,a;Qt.WritableState=Ot;var d=Object.create(requireUtil());d.inherits=requireInherits_browser();var c={deprecate:requireBrowser$a()},j=requireStreamBrowser(),_e=requireSafeBuffer().Buffer,pt=(typeof commonjsGlobal$2<"u"?commonjsGlobal$2:typeof window<"u"?window:typeof self<"u"?self:{}).Uint8Array||function(){};function yt(kt){return _e.from(kt)}function ct(kt){return _e.isBuffer(kt)||kt instanceof pt}var Ct=requireDestroy();d.inherits(Qt,j);function qt(){}function Ot(kt,Ft){a=a||require_stream_duplex(),kt=kt||{};var xt=Ft instanceof a;this.objectMode=!!kt.objectMode,xt&&(this.objectMode=this.objectMode||!!kt.writableObjectMode);var g=kt.highWaterMark,wt=kt.writableHighWaterMark,nr=this.objectMode?16:16*1024;g||g===0?this.highWaterMark=g:xt&&(wt||wt===0)?this.highWaterMark=wt:this.highWaterMark=nr,this.highWaterMark=Math.floor(this.highWaterMark),this.finalCalled=!1,this.needDrain=!1,this.ending=!1,this.ended=!1,this.finished=!1,this.destroyed=!1;var or=kt.decodeStrings===!1;this.decodeStrings=!or,this.defaultEncoding=kt.defaultEncoding||"utf8",this.length=0,this.writing=!1,this.corked=0,this.sync=!0,this.bufferProcessing=!1,this.onwrite=function(cr){dr(Ft,cr)},this.writecb=null,this.writelen=0,this.bufferedRequest=null,this.lastBufferedRequest=null,this.pendingcb=0,this.prefinished=!1,this.errorEmitted=!1,this.bufferedRequestCount=0,this.corkedRequestsFree=new e(this)}Ot.prototype.getBuffer=function(){for(var Ft=this.bufferedRequest,xt=[];Ft;)xt.push(Ft),Ft=Ft.next;return xt},function(){try{Object.defineProperty(Ot.prototype,"buffer",{get:c.deprecate(function(){return this.getBuffer()},"_writableState.buffer is deprecated. Use _writableState.getBuffer instead.","DEP0003")})}catch{}}();var Lt;typeof Symbol=="function"&&Symbol.hasInstance&&typeof Function.prototype[Symbol.hasInstance]=="function"?(Lt=Function.prototype[Symbol.hasInstance],Object.defineProperty(Qt,Symbol.hasInstance,{value:function(kt){return Lt.call(this,kt)?!0:this!==Qt?!1:kt&&kt._writableState instanceof Ot}})):Lt=function(kt){return kt instanceof this};function Qt(kt){if(a=a||require_stream_duplex(),!Lt.call(Qt,this)&&!(this instanceof a))return new Qt(kt);this._writableState=new Ot(kt,this),this.writable=!0,kt&&(typeof kt.write=="function"&&(this._write=kt.write),typeof kt.writev=="function"&&(this._writev=kt.writev),typeof kt.destroy=="function"&&(this._destroy=kt.destroy),typeof kt.final=="function"&&(this._final=kt.final)),j.call(this)}Qt.prototype.pipe=function(){this.emit("error",new Error("Cannot pipe, not readable"))};function ir(kt,Ft){var xt=new Error("write after end");kt.emit("error",xt),s.nextTick(Ft,xt)}function er(kt,Ft,xt,g){var wt=!0,nr=!1;return xt===null?nr=new TypeError("May not write null values to stream"):typeof xt!="string"&&xt!==void 0&&!Ft.objectMode&&(nr=new TypeError("Invalid non-string/buffer chunk")),nr&&(kt.emit("error",nr),s.nextTick(g,nr),wt=!1),wt}Qt.prototype.write=function(kt,Ft,xt){var g=this._writableState,wt=!1,nr=!g.objectMode&&ct(kt);return nr&&!_e.isBuffer(kt)&&(kt=yt(kt)),typeof Ft=="function"&&(xt=Ft,Ft=null),nr?Ft="buffer":Ft||(Ft=g.defaultEncoding),typeof xt!="function"&&(xt=qt),g.ended?ir(this,xt):(nr||er(this,g,kt,xt))&&(g.pendingcb++,wt=sr(this,g,nr,kt,Ft,xt)),wt},Qt.prototype.cork=function(){var kt=this._writableState;kt.corked++},Qt.prototype.uncork=function(){var kt=this._writableState;kt.corked&&(kt.corked--,!kt.writing&&!kt.corked&&!kt.bufferProcessing&&kt.bufferedRequest&&gr(this,kt))},Qt.prototype.setDefaultEncoding=function(Ft){if(typeof Ft=="string"&&(Ft=Ft.toLowerCase()),!(["hex","utf8","utf-8","ascii","binary","base64","ucs2","ucs-2","utf16le","utf-16le","raw"].indexOf((Ft+"").toLowerCase())>-1))throw new TypeError("Unknown encoding: "+Ft);return this._writableState.defaultEncoding=Ft,this};function tr(kt,Ft,xt){return!kt.objectMode&&kt.decodeStrings!==!1&&typeof Ft=="string"&&(Ft=_e.from(Ft,xt)),Ft}Object.defineProperty(Qt.prototype,"writableHighWaterMark",{enumerable:!1,get:function(){return this._writableState.highWaterMark}});function sr(kt,Ft,xt,g,wt,nr){if(!xt){var or=tr(Ft,g,wt);g!==or&&(xt=!0,wt="buffer",g=or)}var cr=Ft.objectMode?1:g.length;Ft.length+=cr;var Rr=Ft.length<Ft.highWaterMark;if(Rr||(Ft.needDrain=!0),Ft.writing||Ft.corked){var Ar=Ft.lastBufferedRequest;Ft.lastBufferedRequest={chunk:g,encoding:wt,isBuf:xt,callback:nr,next:null},Ar?Ar.next=Ft.lastBufferedRequest:Ft.bufferedRequest=Ft.lastBufferedRequest,Ft.bufferedRequestCount+=1}else ar(kt,Ft,!1,cr,g,wt,nr);return Rr}function ar(kt,Ft,xt,g,wt,nr,or){Ft.writelen=g,Ft.writecb=or,Ft.writing=!0,Ft.sync=!0,xt?kt._writev(wt,Ft.onwrite):kt._write(wt,nr,Ft.onwrite),Ft.sync=!1}function hr(kt,Ft,xt,g,wt){--Ft.pendingcb,xt?(s.nextTick(wt,g),s.nextTick(b,kt,Ft),kt._writableState.errorEmitted=!0,kt.emit("error",g)):(wt(g),kt._writableState.errorEmitted=!0,kt.emit("error",g),b(kt,Ft))}function _r(kt){kt.writing=!1,kt.writecb=null,kt.length-=kt.writelen,kt.writelen=0}function dr(kt,Ft){var xt=kt._writableState,g=xt.sync,wt=xt.writecb;if(_r(xt),Ft)hr(kt,xt,g,Ft,wt);else{var nr=Mt(xt);!nr&&!xt.corked&&!xt.bufferProcessing&&xt.bufferedRequest&&gr(kt,xt),g?o(ur,kt,xt,nr,wt):ur(kt,xt,nr,wt)}}function ur(kt,Ft,xt,g){xt||lr(kt,Ft),Ft.pendingcb--,g(),b(kt,Ft)}function lr(kt,Ft){Ft.length===0&&Ft.needDrain&&(Ft.needDrain=!1,kt.emit("drain"))}function gr(kt,Ft){Ft.bufferProcessing=!0;var xt=Ft.bufferedRequest;if(kt._writev&&xt&&xt.next){var g=Ft.bufferedRequestCount,wt=new Array(g),nr=Ft.corkedRequestsFree;nr.entry=xt;for(var or=0,cr=!0;xt;)wt[or]=xt,xt.isBuf||(cr=!1),xt=xt.next,or+=1;wt.allBuffers=cr,ar(kt,Ft,!0,Ft.length,wt,"",nr.finish),Ft.pendingcb++,Ft.lastBufferedRequest=null,nr.next?(Ft.corkedRequestsFree=nr.next,nr.next=null):Ft.corkedRequestsFree=new e(Ft),Ft.bufferedRequestCount=0}else{for(;xt;){var Rr=xt.chunk,Ar=xt.encoding,pr=xt.callback,wr=Ft.objectMode?1:Rr.length;if(ar(kt,Ft,!1,wr,Rr,Ar,pr),xt=xt.next,Ft.bufferedRequestCount--,Ft.writing)break}xt===null&&(Ft.lastBufferedRequest=null)}Ft.bufferedRequest=xt,Ft.bufferProcessing=!1}Qt.prototype._write=function(kt,Ft,xt){xt(new Error("_write() is not implemented"))},Qt.prototype._writev=null,Qt.prototype.end=function(kt,Ft,xt){var g=this._writableState;typeof kt=="function"?(xt=kt,kt=null,Ft=null):typeof Ft=="function"&&(xt=Ft,Ft=null),kt!=null&&this.write(kt,Ft),g.corked&&(g.corked=1,this.uncork()),g.ending||lt(this,g,xt)};function Mt(kt){return kt.ending&&kt.length===0&&kt.bufferedRequest===null&&!kt.finished&&!kt.writing}function h(kt,Ft){kt._final(function(xt){Ft.pendingcb--,xt&&kt.emit("error",xt),Ft.prefinished=!0,kt.emit("prefinish"),b(kt,Ft)})}function _(kt,Ft){!Ft.prefinished&&!Ft.finalCalled&&(typeof kt._final=="function"?(Ft.pendingcb++,Ft.finalCalled=!0,s.nextTick(h,kt,Ft)):(Ft.prefinished=!0,kt.emit("prefinish")))}function b(kt,Ft){var xt=Mt(Ft);return xt&&(_(kt,Ft),Ft.pendingcb===0&&(Ft.finished=!0,kt.emit("finish"))),xt}function lt(kt,Ft,xt){Ft.ending=!0,b(kt,Ft),xt&&(Ft.finished?s.nextTick(xt):kt.once("finish",xt)),Ft.ended=!0,kt.writable=!1}function Rt(kt,Ft,xt){var g=kt.entry;for(kt.entry=null;g;){var wt=g.callback;Ft.pendingcb--,wt(xt),g=g.next}Ft.corkedRequestsFree.next=kt}return Object.defineProperty(Qt.prototype,"destroyed",{get:function(){return this._writableState===void 0?!1:this._writableState.destroyed},set:function(kt){this._writableState&&(this._writableState.destroyed=kt)}}),Qt.prototype.destroy=Ct.destroy,Qt.prototype._undestroy=Ct.undestroy,Qt.prototype._destroy=function(kt,Ft){this.end(),Ft(kt)},_stream_writable}var _stream_duplex,hasRequired_stream_duplex;function require_stream_duplex(){if(hasRequired_stream_duplex)return _stream_duplex;hasRequired_stream_duplex=1;var s=requireProcessNextickArgs(),e=Object.keys||function(Ct){var qt=[];for(var Ot in Ct)qt.push(Ot);return qt};_stream_duplex=pt;var o=Object.create(requireUtil());o.inherits=requireInherits_browser();var a=require_stream_readable(),d=require_stream_writable();o.inherits(pt,a);for(var c=e(d.prototype),j=0;j<c.length;j++){var _e=c[j];pt.prototype[_e]||(pt.prototype[_e]=d.prototype[_e])}function pt(Ct){if(!(this instanceof pt))return new pt(Ct);a.call(this,Ct),d.call(this,Ct),Ct&&Ct.readable===!1&&(this.readable=!1),Ct&&Ct.writable===!1&&(this.writable=!1),this.allowHalfOpen=!0,Ct&&Ct.allowHalfOpen===!1&&(this.allowHalfOpen=!1),this.once("end",yt)}Object.defineProperty(pt.prototype,"writableHighWaterMark",{enumerable:!1,get:function(){return this._writableState.highWaterMark}});function yt(){this.allowHalfOpen||this._writableState.ended||s.nextTick(ct,this)}function ct(Ct){Ct.end()}return Object.defineProperty(pt.prototype,"destroyed",{get:function(){return this._readableState===void 0||this._writableState===void 0?!1:this._readableState.destroyed&&this._writableState.destroyed},set:function(Ct){this._readableState===void 0||this._writableState===void 0||(this._readableState.destroyed=Ct,this._writableState.destroyed=Ct)}}),pt.prototype._destroy=function(Ct,qt){this.push(null),this.end(),s.nextTick(qt,Ct)},_stream_duplex}var _stream_readable,hasRequired_stream_readable;function require_stream_readable(){if(hasRequired_stream_readable)return _stream_readable;hasRequired_stream_readable=1;var s=requireProcessNextickArgs();_stream_readable=tr;var e=requireIsarray(),o;tr.ReadableState=er,requireEvents().EventEmitter;var a=function(pr,wr){return pr.listeners(wr).length},d=requireStreamBrowser(),c=requireSafeBuffer().Buffer,j=(typeof commonjsGlobal$2<"u"?commonjsGlobal$2:typeof window<"u"?window:typeof self<"u"?self:{}).Uint8Array||function(){};function _e(pr){return c.from(pr)}function pt(pr){return c.isBuffer(pr)||pr instanceof j}var yt=Object.create(requireUtil());yt.inherits=requireInherits_browser();var ct=requireUtil$1(),Ct=void 0;ct&&ct.debuglog?Ct=ct.debuglog("stream"):Ct=function(){};var qt=requireBufferList(),Ot=requireDestroy(),Lt;yt.inherits(tr,d);var Qt=["error","close","destroy","pause","resume"];function ir(pr,wr,Tr){if(typeof pr.prependListener=="function")return pr.prependListener(wr,Tr);!pr._events||!pr._events[wr]?pr.on(wr,Tr):e(pr._events[wr])?pr._events[wr].unshift(Tr):pr._events[wr]=[Tr,pr._events[wr]]}function er(pr,wr){o=o||require_stream_duplex(),pr=pr||{};var Tr=wr instanceof o;this.objectMode=!!pr.objectMode,Tr&&(this.objectMode=this.objectMode||!!pr.readableObjectMode);var Ir=pr.highWaterMark,Sr=pr.readableHighWaterMark,br=this.objectMode?16:16*1024;Ir||Ir===0?this.highWaterMark=Ir:Tr&&(Sr||Sr===0)?this.highWaterMark=Sr:this.highWaterMark=br,this.highWaterMark=Math.floor(this.highWaterMark),this.buffer=new qt,this.length=0,this.pipes=null,this.pipesCount=0,this.flowing=null,this.ended=!1,this.endEmitted=!1,this.reading=!1,this.sync=!0,this.needReadable=!1,this.emittedReadable=!1,this.readableListening=!1,this.resumeScheduled=!1,this.destroyed=!1,this.defaultEncoding=pr.defaultEncoding||"utf8",this.awaitDrain=0,this.readingMore=!1,this.decoder=null,this.encoding=null,pr.encoding&&(Lt||(Lt=requireString_decoder().StringDecoder),this.decoder=new Lt(pr.encoding),this.encoding=pr.encoding)}function tr(pr){if(o=o||require_stream_duplex(),!(this instanceof tr))return new tr(pr);this._readableState=new er(pr,this),this.readable=!0,pr&&(typeof pr.read=="function"&&(this._read=pr.read),typeof pr.destroy=="function"&&(this._destroy=pr.destroy)),d.call(this)}Object.defineProperty(tr.prototype,"destroyed",{get:function(){return this._readableState===void 0?!1:this._readableState.destroyed},set:function(pr){this._readableState&&(this._readableState.destroyed=pr)}}),tr.prototype.destroy=Ot.destroy,tr.prototype._undestroy=Ot.undestroy,tr.prototype._destroy=function(pr,wr){this.push(null),wr(pr)},tr.prototype.push=function(pr,wr){var Tr=this._readableState,Ir;return Tr.objectMode?Ir=!0:typeof pr=="string"&&(wr=wr||Tr.defaultEncoding,wr!==Tr.encoding&&(pr=c.from(pr,wr),wr=""),Ir=!0),sr(this,pr,wr,!1,Ir)},tr.prototype.unshift=function(pr){return sr(this,pr,null,!0,!1)};function sr(pr,wr,Tr,Ir,Sr){var br=pr._readableState;if(wr===null)br.reading=!1,gr(pr,br);else{var kr;Sr||(kr=hr(br,wr)),kr?pr.emit("error",kr):br.objectMode||wr&&wr.length>0?(typeof wr!="string"&&!br.objectMode&&Object.getPrototypeOf(wr)!==c.prototype&&(wr=_e(wr)),Ir?br.endEmitted?pr.emit("error",new Error("stream.unshift() after end event")):ar(pr,br,wr,!0):br.ended?pr.emit("error",new Error("stream.push() after EOF")):(br.reading=!1,br.decoder&&!Tr?(wr=br.decoder.write(wr),br.objectMode||wr.length!==0?ar(pr,br,wr,!1):_(pr,br)):ar(pr,br,wr,!1))):Ir||(br.reading=!1)}return _r(br)}function ar(pr,wr,Tr,Ir){wr.flowing&&wr.length===0&&!wr.sync?(pr.emit("data",Tr),pr.read(0)):(wr.length+=wr.objectMode?1:Tr.length,Ir?wr.buffer.unshift(Tr):wr.buffer.push(Tr),wr.needReadable&&Mt(pr)),_(pr,wr)}function hr(pr,wr){var Tr;return!pt(wr)&&typeof wr!="string"&&wr!==void 0&&!pr.objectMode&&(Tr=new TypeError("Invalid non-string/buffer chunk")),Tr}function _r(pr){return!pr.ended&&(pr.needReadable||pr.length<pr.highWaterMark||pr.length===0)}tr.prototype.isPaused=function(){return this._readableState.flowing===!1},tr.prototype.setEncoding=function(pr){return Lt||(Lt=requireString_decoder().StringDecoder),this._readableState.decoder=new Lt(pr),this._readableState.encoding=pr,this};var dr=8388608;function ur(pr){return pr>=dr?pr=dr:(pr--,pr|=pr>>>1,pr|=pr>>>2,pr|=pr>>>4,pr|=pr>>>8,pr|=pr>>>16,pr++),pr}function lr(pr,wr){return pr<=0||wr.length===0&&wr.ended?0:wr.objectMode?1:pr!==pr?wr.flowing&&wr.length?wr.buffer.head.data.length:wr.length:(pr>wr.highWaterMark&&(wr.highWaterMark=ur(pr)),pr<=wr.length?pr:wr.ended?wr.length:(wr.needReadable=!0,0))}tr.prototype.read=function(pr){Ct("read",pr),pr=parseInt(pr,10);var wr=this._readableState,Tr=pr;if(pr!==0&&(wr.emittedReadable=!1),pr===0&&wr.needReadable&&(wr.length>=wr.highWaterMark||wr.ended))return Ct("read: emitReadable",wr.length,wr.ended),wr.length===0&&wr.ended?cr(this):Mt(this),null;if(pr=lr(pr,wr),pr===0&&wr.ended)return wr.length===0&&cr(this),null;var Ir=wr.needReadable;Ct("need readable",Ir),(wr.length===0||wr.length-pr<wr.highWaterMark)&&(Ir=!0,Ct("length less than watermark",Ir)),wr.ended||wr.reading?(Ir=!1,Ct("reading or ended",Ir)):Ir&&(Ct("do read"),wr.reading=!0,wr.sync=!0,wr.length===0&&(wr.needReadable=!0),this._read(wr.highWaterMark),wr.sync=!1,wr.reading||(pr=lr(Tr,wr)));var Sr;return pr>0?Sr=g(pr,wr):Sr=null,Sr===null?(wr.needReadable=!0,pr=0):wr.length-=pr,wr.length===0&&(wr.ended||(wr.needReadable=!0),Tr!==pr&&wr.ended&&cr(this)),Sr!==null&&this.emit("data",Sr),Sr};function gr(pr,wr){if(!wr.ended){if(wr.decoder){var Tr=wr.decoder.end();Tr&&Tr.length&&(wr.buffer.push(Tr),wr.length+=wr.objectMode?1:Tr.length)}wr.ended=!0,Mt(pr)}}function Mt(pr){var wr=pr._readableState;wr.needReadable=!1,wr.emittedReadable||(Ct("emitReadable",wr.flowing),wr.emittedReadable=!0,wr.sync?s.nextTick(h,pr):h(pr))}function h(pr){Ct("emit readable"),pr.emit("readable"),xt(pr)}function _(pr,wr){wr.readingMore||(wr.readingMore=!0,s.nextTick(b,pr,wr))}function b(pr,wr){for(var Tr=wr.length;!wr.reading&&!wr.flowing&&!wr.ended&&wr.length<wr.highWaterMark&&(Ct("maybeReadMore read 0"),pr.read(0),Tr!==wr.length);)Tr=wr.length;wr.readingMore=!1}tr.prototype._read=function(pr){this.emit("error",new Error("_read() is not implemented"))},tr.prototype.pipe=function(pr,wr){var Tr=this,Ir=this._readableState;switch(Ir.pipesCount){case 0:Ir.pipes=pr;break;case 1:Ir.pipes=[Ir.pipes,pr];break;default:Ir.pipes.push(pr);break}Ir.pipesCount+=1,Ct("pipe count=%d opts=%j",Ir.pipesCount,wr);var Sr=(!wr||wr.end!==!1)&&pr!==process$1.stdout&&pr!==process$1.stderr,br=Sr?Qr:yn;Ir.endEmitted?s.nextTick(br):Tr.once("end",br),pr.on("unpipe",kr);function kr(Nr,Wr){Ct("onunpipe"),Nr===Tr&&Wr&&Wr.hasUnpiped===!1&&(Wr.hasUnpiped=!0,gn())}function Qr(){Ct("onend"),pr.end()}var qr=lt(Tr);pr.on("drain",qr);var $r=!1;function gn(){Ct("cleanup"),pr.removeListener("close",Fr),pr.removeListener("finish",zr),pr.removeListener("drain",qr),pr.removeListener("error",En),pr.removeListener("unpipe",kr),Tr.removeListener("end",Qr),Tr.removeListener("end",yn),Tr.removeListener("data",Dr),$r=!0,Ir.awaitDrain&&(!pr._writableState||pr._writableState.needDrain)&&qr()}var Lr=!1;Tr.on("data",Dr);function Dr(Nr){Ct("ondata"),Lr=!1;var Wr=pr.write(Nr);Wr===!1&&!Lr&&((Ir.pipesCount===1&&Ir.pipes===pr||Ir.pipesCount>1&&Ar(Ir.pipes,pr)!==-1)&&!$r&&(Ct("false write response, pause",Ir.awaitDrain),Ir.awaitDrain++,Lr=!0),Tr.pause())}function En(Nr){Ct("onerror",Nr),yn(),pr.removeListener("error",En),a(pr,"error")===0&&pr.emit("error",Nr)}ir(pr,"error",En);function Fr(){pr.removeListener("finish",zr),yn()}pr.once("close",Fr);function zr(){Ct("onfinish"),pr.removeListener("close",Fr),yn()}pr.once("finish",zr);function yn(){Ct("unpipe"),Tr.unpipe(pr)}return pr.emit("pipe",Tr),Ir.flowing||(Ct("pipe resume"),Tr.resume()),pr};function lt(pr){return function(){var wr=pr._readableState;Ct("pipeOnDrain",wr.awaitDrain),wr.awaitDrain&&wr.awaitDrain--,wr.awaitDrain===0&&a(pr,"data")&&(wr.flowing=!0,xt(pr))}}tr.prototype.unpipe=function(pr){var wr=this._readableState,Tr={hasUnpiped:!1};if(wr.pipesCount===0)return this;if(wr.pipesCount===1)return pr&&pr!==wr.pipes?this:(pr||(pr=wr.pipes),wr.pipes=null,wr.pipesCount=0,wr.flowing=!1,pr&&pr.emit("unpipe",this,Tr),this);if(!pr){var Ir=wr.pipes,Sr=wr.pipesCount;wr.pipes=null,wr.pipesCount=0,wr.flowing=!1;for(var br=0;br<Sr;br++)Ir[br].emit("unpipe",this,{hasUnpiped:!1});return this}var kr=Ar(wr.pipes,pr);return kr===-1?this:(wr.pipes.splice(kr,1),wr.pipesCount-=1,wr.pipesCount===1&&(wr.pipes=wr.pipes[0]),pr.emit("unpipe",this,Tr),this)},tr.prototype.on=function(pr,wr){var Tr=d.prototype.on.call(this,pr,wr);if(pr==="data")this._readableState.flowing!==!1&&this.resume();else if(pr==="readable"){var Ir=this._readableState;!Ir.endEmitted&&!Ir.readableListening&&(Ir.readableListening=Ir.needReadable=!0,Ir.emittedReadable=!1,Ir.reading?Ir.length&&Mt(this):s.nextTick(Rt,this))}return Tr},tr.prototype.addListener=tr.prototype.on;function Rt(pr){Ct("readable nexttick read 0"),pr.read(0)}tr.prototype.resume=function(){var pr=this._readableState;return pr.flowing||(Ct("resume"),pr.flowing=!0,kt(this,pr)),this};function kt(pr,wr){wr.resumeScheduled||(wr.resumeScheduled=!0,s.nextTick(Ft,pr,wr))}function Ft(pr,wr){wr.reading||(Ct("resume read 0"),pr.read(0)),wr.resumeScheduled=!1,wr.awaitDrain=0,pr.emit("resume"),xt(pr),wr.flowing&&!wr.reading&&pr.read(0)}tr.prototype.pause=function(){return Ct("call pause flowing=%j",this._readableState.flowing),this._readableState.flowing!==!1&&(Ct("pause"),this._readableState.flowing=!1,this.emit("pause")),this};function xt(pr){var wr=pr._readableState;for(Ct("flow",wr.flowing);wr.flowing&&pr.read()!==null;);}tr.prototype.wrap=function(pr){var wr=this,Tr=this._readableState,Ir=!1;pr.on("end",function(){if(Ct("wrapped end"),Tr.decoder&&!Tr.ended){var kr=Tr.decoder.end();kr&&kr.length&&wr.push(kr)}wr.push(null)}),pr.on("data",function(kr){if(Ct("wrapped data"),Tr.decoder&&(kr=Tr.decoder.write(kr)),!(Tr.objectMode&&kr==null)&&!(!Tr.objectMode&&(!kr||!kr.length))){var Qr=wr.push(kr);Qr||(Ir=!0,pr.pause())}});for(var Sr in pr)this[Sr]===void 0&&typeof pr[Sr]=="function"&&(this[Sr]=function(kr){return function(){return pr[kr].apply(pr,arguments)}}(Sr));for(var br=0;br<Qt.length;br++)pr.on(Qt[br],this.emit.bind(this,Qt[br]));return this._read=function(kr){Ct("wrapped _read",kr),Ir&&(Ir=!1,pr.resume())},this},Object.defineProperty(tr.prototype,"readableHighWaterMark",{enumerable:!1,get:function(){return this._readableState.highWaterMark}}),tr._fromList=g;function g(pr,wr){if(wr.length===0)return null;var Tr;return wr.objectMode?Tr=wr.buffer.shift():!pr||pr>=wr.length?(wr.decoder?Tr=wr.buffer.join(""):wr.buffer.length===1?Tr=wr.buffer.head.data:Tr=wr.buffer.concat(wr.length),wr.buffer.clear()):Tr=wt(pr,wr.buffer,wr.decoder),Tr}function wt(pr,wr,Tr){var Ir;return pr<wr.head.data.length?(Ir=wr.head.data.slice(0,pr),wr.head.data=wr.head.data.slice(pr)):pr===wr.head.data.length?Ir=wr.shift():Ir=Tr?nr(pr,wr):or(pr,wr),Ir}function nr(pr,wr){var Tr=wr.head,Ir=1,Sr=Tr.data;for(pr-=Sr.length;Tr=Tr.next;){var br=Tr.data,kr=pr>br.length?br.length:pr;if(kr===br.length?Sr+=br:Sr+=br.slice(0,pr),pr-=kr,pr===0){kr===br.length?(++Ir,Tr.next?wr.head=Tr.next:wr.head=wr.tail=null):(wr.head=Tr,Tr.data=br.slice(kr));break}++Ir}return wr.length-=Ir,Sr}function or(pr,wr){var Tr=c.allocUnsafe(pr),Ir=wr.head,Sr=1;for(Ir.data.copy(Tr),pr-=Ir.data.length;Ir=Ir.next;){var br=Ir.data,kr=pr>br.length?br.length:pr;if(br.copy(Tr,Tr.length-pr,0,kr),pr-=kr,pr===0){kr===br.length?(++Sr,Ir.next?wr.head=Ir.next:wr.head=wr.tail=null):(wr.head=Ir,Ir.data=br.slice(kr));break}++Sr}return wr.length-=Sr,Tr}function cr(pr){var wr=pr._readableState;if(wr.length>0)throw new Error('"endReadable()" called on non-empty stream');wr.endEmitted||(wr.ended=!0,s.nextTick(Rr,wr,pr))}function Rr(pr,wr){!pr.endEmitted&&pr.length===0&&(pr.endEmitted=!0,wr.readable=!1,wr.emit("end"))}function Ar(pr,wr){for(var Tr=0,Ir=pr.length;Tr<Ir;Tr++)if(pr[Tr]===wr)return Tr;return-1}return _stream_readable}var _stream_transform,hasRequired_stream_transform;function require_stream_transform(){if(hasRequired_stream_transform)return _stream_transform;hasRequired_stream_transform=1,_stream_transform=a;var s=require_stream_duplex(),e=Object.create(requireUtil());e.inherits=requireInherits_browser(),e.inherits(a,s);function o(j,_e){var pt=this._transformState;pt.transforming=!1;var yt=pt.writecb;if(!yt)return this.emit("error",new Error("write callback called multiple times"));pt.writechunk=null,pt.writecb=null,_e!=null&&this.push(_e),yt(j);var ct=this._readableState;ct.reading=!1,(ct.needReadable||ct.length<ct.highWaterMark)&&this._read(ct.highWaterMark)}function a(j){if(!(this instanceof a))return new a(j);s.call(this,j),this._transformState={afterTransform:o.bind(this),needTransform:!1,transforming:!1,writecb:null,writechunk:null,writeencoding:null},this._readableState.needReadable=!0,this._readableState.sync=!1,j&&(typeof j.transform=="function"&&(this._transform=j.transform),typeof j.flush=="function"&&(this._flush=j.flush)),this.on("prefinish",d)}function d(){var j=this;typeof this._flush=="function"?this._flush(function(_e,pt){c(j,_e,pt)}):c(this,null,null)}a.prototype.push=function(j,_e){return this._transformState.needTransform=!1,s.prototype.push.call(this,j,_e)},a.prototype._transform=function(j,_e,pt){throw new Error("_transform() is not implemented")},a.prototype._write=function(j,_e,pt){var yt=this._transformState;if(yt.writecb=pt,yt.writechunk=j,yt.writeencoding=_e,!yt.transforming){var ct=this._readableState;(yt.needTransform||ct.needReadable||ct.length<ct.highWaterMark)&&this._read(ct.highWaterMark)}},a.prototype._read=function(j){var _e=this._transformState;_e.writechunk!==null&&_e.writecb&&!_e.transforming?(_e.transforming=!0,this._transform(_e.writechunk,_e.writeencoding,_e.afterTransform)):_e.needTransform=!0},a.prototype._destroy=function(j,_e){var pt=this;s.prototype._destroy.call(this,j,function(yt){_e(yt),pt.emit("close")})};function c(j,_e,pt){if(_e)return j.emit("error",_e);if(pt!=null&&j.push(pt),j._writableState.length)throw new Error("Calling transform done when ws.length != 0");if(j._transformState.transforming)throw new Error("Calling transform done when still transforming");return j.push(null)}return _stream_transform}var _stream_passthrough,hasRequired_stream_passthrough;function require_stream_passthrough(){if(hasRequired_stream_passthrough)return _stream_passthrough;hasRequired_stream_passthrough=1,_stream_passthrough=o;var s=require_stream_transform(),e=Object.create(requireUtil());e.inherits=requireInherits_browser(),e.inherits(o,s);function o(a){if(!(this instanceof o))return new o(a);s.call(this,a)}return o.prototype._transform=function(a,d,c){c(null,a)},_stream_passthrough}var hasRequiredReadableBrowser;function requireReadableBrowser(){return hasRequiredReadableBrowser||(hasRequiredReadableBrowser=1,function(s,e){e=s.exports=require_stream_readable(),e.Stream=e,e.Readable=e,e.Writable=require_stream_writable(),e.Duplex=require_stream_duplex(),e.Transform=require_stream_transform(),e.PassThrough=require_stream_passthrough()}(readableBrowser,readableBrowser.exports)),readableBrowser.exports}var sign={exports:{}},bn$4={exports:{}};bn$4.exports;var hasRequiredBn$4;function requireBn$4(){return hasRequiredBn$4||(hasRequiredBn$4=1,function(s){(function(e,o){function a(_,b){if(!_)throw new Error(b||"Assertion failed")}function d(_,b){_.super_=b;var lt=function(){};lt.prototype=b.prototype,_.prototype=new lt,_.prototype.constructor=_}function c(_,b,lt){if(c.isBN(_))return _;this.negative=0,this.words=null,this.length=0,this.red=null,_!==null&&((b==="le"||b==="be")&&(lt=b,b=10),this._init(_||0,b||10,lt||"be"))}typeof e=="object"?e.exports=c:o.BN=c,c.BN=c,c.wordSize=26;var j;try{typeof window<"u"&&typeof window.Buffer<"u"?j=window.Buffer:j=require$$0$1.Buffer}catch{}c.isBN=function(b){return b instanceof c?!0:b!==null&&typeof b=="object"&&b.constructor.wordSize===c.wordSize&&Array.isArray(b.words)},c.max=function(b,lt){return b.cmp(lt)>0?b:lt},c.min=function(b,lt){return b.cmp(lt)<0?b:lt},c.prototype._init=function(b,lt,Rt){if(typeof b=="number")return this._initNumber(b,lt,Rt);if(typeof b=="object")return this._initArray(b,lt,Rt);lt==="hex"&&(lt=16),a(lt===(lt|0)&&lt>=2&&lt<=36),b=b.toString().replace(/\s+/g,"");var kt=0;b[0]==="-"&&(kt++,this.negative=1),kt<b.length&&(lt===16?this._parseHex(b,kt,Rt):(this._parseBase(b,lt,kt),Rt==="le"&&this._initArray(this.toArray(),lt,Rt)))},c.prototype._initNumber=function(b,lt,Rt){b<0&&(this.negative=1,b=-b),b<67108864?(this.words=[b&67108863],this.length=1):b<4503599627370496?(this.words=[b&67108863,b/67108864&67108863],this.length=2):(a(b<9007199254740992),this.words=[b&67108863,b/67108864&67108863,1],this.length=3),Rt==="le"&&this._initArray(this.toArray(),lt,Rt)},c.prototype._initArray=function(b,lt,Rt){if(a(typeof b.length=="number"),b.length<=0)return this.words=[0],this.length=1,this;this.length=Math.ceil(b.length/3),this.words=new Array(this.length);for(var kt=0;kt<this.length;kt++)this.words[kt]=0;var Ft,xt,g=0;if(Rt==="be")for(kt=b.length-1,Ft=0;kt>=0;kt-=3)xt=b[kt]|b[kt-1]<<8|b[kt-2]<<16,this.words[Ft]|=xt<<g&67108863,this.words[Ft+1]=xt>>>26-g&67108863,g+=24,g>=26&&(g-=26,Ft++);else if(Rt==="le")for(kt=0,Ft=0;kt<b.length;kt+=3)xt=b[kt]|b[kt+1]<<8|b[kt+2]<<16,this.words[Ft]|=xt<<g&67108863,this.words[Ft+1]=xt>>>26-g&67108863,g+=24,g>=26&&(g-=26,Ft++);return this._strip()};function _e(_,b){var lt=_.charCodeAt(b);if(lt>=48&&lt<=57)return lt-48;if(lt>=65&&lt<=70)return lt-55;if(lt>=97&&lt<=102)return lt-87;a(!1,"Invalid character in "+_)}function pt(_,b,lt){var Rt=_e(_,lt);return lt-1>=b&&(Rt|=_e(_,lt-1)<<4),Rt}c.prototype._parseHex=function(b,lt,Rt){this.length=Math.ceil((b.length-lt)/6),this.words=new Array(this.length);for(var kt=0;kt<this.length;kt++)this.words[kt]=0;var Ft=0,xt=0,g;if(Rt==="be")for(kt=b.length-1;kt>=lt;kt-=2)g=pt(b,lt,kt)<<Ft,this.words[xt]|=g&67108863,Ft>=18?(Ft-=18,xt+=1,this.words[xt]|=g>>>26):Ft+=8;else{var wt=b.length-lt;for(kt=wt%2===0?lt+1:lt;kt<b.length;kt+=2)g=pt(b,lt,kt)<<Ft,this.words[xt]|=g&67108863,Ft>=18?(Ft-=18,xt+=1,this.words[xt]|=g>>>26):Ft+=8}this._strip()};function yt(_,b,lt,Rt){for(var kt=0,Ft=0,xt=Math.min(_.length,lt),g=b;g<xt;g++){var wt=_.charCodeAt(g)-48;kt*=Rt,wt>=49?Ft=wt-49+10:wt>=17?Ft=wt-17+10:Ft=wt,a(wt>=0&&Ft<Rt,"Invalid character"),kt+=Ft}return kt}c.prototype._parseBase=function(b,lt,Rt){this.words=[0],this.length=1;for(var kt=0,Ft=1;Ft<=67108863;Ft*=lt)kt++;kt--,Ft=Ft/lt|0;for(var xt=b.length-Rt,g=xt%kt,wt=Math.min(xt,xt-g)+Rt,nr=0,or=Rt;or<wt;or+=kt)nr=yt(b,or,or+kt,lt),this.imuln(Ft),this.words[0]+nr<67108864?this.words[0]+=nr:this._iaddn(nr);if(g!==0){var cr=1;for(nr=yt(b,or,b.length,lt),or=0;or<g;or++)cr*=lt;this.imuln(cr),this.words[0]+nr<67108864?this.words[0]+=nr:this._iaddn(nr)}this._strip()},c.prototype.copy=function(b){b.words=new Array(this.length);for(var lt=0;lt<this.length;lt++)b.words[lt]=this.words[lt];b.length=this.length,b.negative=this.negative,b.red=this.red};function ct(_,b){_.words=b.words,_.length=b.length,_.negative=b.negative,_.red=b.red}if(c.prototype._move=function(b){ct(b,this)},c.prototype.clone=function(){var b=new c(null);return this.copy(b),b},c.prototype._expand=function(b){for(;this.length<b;)this.words[this.length++]=0;return this},c.prototype._strip=function(){for(;this.length>1&&this.words[this.length-1]===0;)this.length--;return this._normSign()},c.prototype._normSign=function(){return this.length===1&&this.words[0]===0&&(this.negative=0),this},typeof Symbol<"u"&&typeof Symbol.for=="function")try{c.prototype[Symbol.for("nodejs.util.inspect.custom")]=Ct}catch{c.prototype.inspect=Ct}else c.prototype.inspect=Ct;function Ct(){return(this.red?"<BN-R: ":"<BN: ")+this.toString(16)+">"}var qt=["","0","00","000","0000","00000","000000","0000000","00000000","000000000","0000000000","00000000000","000000000000","0000000000000","00000000000000","000000000000000","0000000000000000","00000000000000000","000000000000000000","0000000000000000000","00000000000000000000","000000000000000000000","0000000000000000000000","00000000000000000000000","000000000000000000000000","0000000000000000000000000"],Ot=[0,0,25,16,12,11,10,9,8,8,7,7,7,7,6,6,6,6,6,6,6,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5],Lt=[0,0,33554432,43046721,16777216,48828125,60466176,40353607,16777216,43046721,1e7,19487171,35831808,62748517,7529536,11390625,16777216,24137569,34012224,47045881,64e6,4084101,5153632,6436343,7962624,9765625,11881376,14348907,17210368,20511149,243e5,28629151,33554432,39135393,45435424,52521875,60466176];c.prototype.toString=function(b,lt){b=b||10,lt=lt|0||1;var Rt;if(b===16||b==="hex"){Rt="";for(var kt=0,Ft=0,xt=0;xt<this.length;xt++){var g=this.words[xt],wt=((g<<kt|Ft)&16777215).toString(16);Ft=g>>>24-kt&16777215,kt+=2,kt>=26&&(kt-=26,xt--),Ft!==0||xt!==this.length-1?Rt=qt[6-wt.length]+wt+Rt:Rt=wt+Rt}for(Ft!==0&&(Rt=Ft.toString(16)+Rt);Rt.length%lt!==0;)Rt="0"+Rt;return this.negative!==0&&(Rt="-"+Rt),Rt}if(b===(b|0)&&b>=2&&b<=36){var nr=Ot[b],or=Lt[b];Rt="";var cr=this.clone();for(cr.negative=0;!cr.isZero();){var Rr=cr.modrn(or).toString(b);cr=cr.idivn(or),cr.isZero()?Rt=Rr+Rt:Rt=qt[nr-Rr.length]+Rr+Rt}for(this.isZero()&&(Rt="0"+Rt);Rt.length%lt!==0;)Rt="0"+Rt;return this.negative!==0&&(Rt="-"+Rt),Rt}a(!1,"Base should be between 2 and 36")},c.prototype.toNumber=function(){var b=this.words[0];return this.length===2?b+=this.words[1]*67108864:this.length===3&&this.words[2]===1?b+=4503599627370496+this.words[1]*67108864:this.length>2&&a(!1,"Number can only safely store up to 53 bits"),this.negative!==0?-b:b},c.prototype.toJSON=function(){return this.toString(16,2)},j&&(c.prototype.toBuffer=function(b,lt){return this.toArrayLike(j,b,lt)}),c.prototype.toArray=function(b,lt){return this.toArrayLike(Array,b,lt)};var Qt=function(b,lt){return b.allocUnsafe?b.allocUnsafe(lt):new b(lt)};c.prototype.toArrayLike=function(b,lt,Rt){this._strip();var kt=this.byteLength(),Ft=Rt||Math.max(1,kt);a(kt<=Ft,"byte array longer than desired length"),a(Ft>0,"Requested array length <= 0");var xt=Qt(b,Ft),g=lt==="le"?"LE":"BE";return this["_toArrayLike"+g](xt,kt),xt},c.prototype._toArrayLikeLE=function(b,lt){for(var Rt=0,kt=0,Ft=0,xt=0;Ft<this.length;Ft++){var g=this.words[Ft]<<xt|kt;b[Rt++]=g&255,Rt<b.length&&(b[Rt++]=g>>8&255),Rt<b.length&&(b[Rt++]=g>>16&255),xt===6?(Rt<b.length&&(b[Rt++]=g>>24&255),kt=0,xt=0):(kt=g>>>24,xt+=2)}if(Rt<b.length)for(b[Rt++]=kt;Rt<b.length;)b[Rt++]=0},c.prototype._toArrayLikeBE=function(b,lt){for(var Rt=b.length-1,kt=0,Ft=0,xt=0;Ft<this.length;Ft++){var g=this.words[Ft]<<xt|kt;b[Rt--]=g&255,Rt>=0&&(b[Rt--]=g>>8&255),Rt>=0&&(b[Rt--]=g>>16&255),xt===6?(Rt>=0&&(b[Rt--]=g>>24&255),kt=0,xt=0):(kt=g>>>24,xt+=2)}if(Rt>=0)for(b[Rt--]=kt;Rt>=0;)b[Rt--]=0},Math.clz32?c.prototype._countBits=function(b){return 32-Math.clz32(b)}:c.prototype._countBits=function(b){var lt=b,Rt=0;return lt>=4096&&(Rt+=13,lt>>>=13),lt>=64&&(Rt+=7,lt>>>=7),lt>=8&&(Rt+=4,lt>>>=4),lt>=2&&(Rt+=2,lt>>>=2),Rt+lt},c.prototype._zeroBits=function(b){if(b===0)return 26;var lt=b,Rt=0;return lt&8191||(Rt+=13,lt>>>=13),lt&127||(Rt+=7,lt>>>=7),lt&15||(Rt+=4,lt>>>=4),lt&3||(Rt+=2,lt>>>=2),lt&1||Rt++,Rt},c.prototype.bitLength=function(){var b=this.words[this.length-1],lt=this._countBits(b);return(this.length-1)*26+lt};function ir(_){for(var b=new Array(_.bitLength()),lt=0;lt<b.length;lt++){var Rt=lt/26|0,kt=lt%26;b[lt]=_.words[Rt]>>>kt&1}return b}c.prototype.zeroBits=function(){if(this.isZero())return 0;for(var b=0,lt=0;lt<this.length;lt++){var Rt=this._zeroBits(this.words[lt]);if(b+=Rt,Rt!==26)break}return b},c.prototype.byteLength=function(){return Math.ceil(this.bitLength()/8)},c.prototype.toTwos=function(b){return this.negative!==0?this.abs().inotn(b).iaddn(1):this.clone()},c.prototype.fromTwos=function(b){return this.testn(b-1)?this.notn(b).iaddn(1).ineg():this.clone()},c.prototype.isNeg=function(){return this.negative!==0},c.prototype.neg=function(){return this.clone().ineg()},c.prototype.ineg=function(){return this.isZero()||(this.negative^=1),this},c.prototype.iuor=function(b){for(;this.length<b.length;)this.words[this.length++]=0;for(var lt=0;lt<b.length;lt++)this.words[lt]=this.words[lt]|b.words[lt];return this._strip()},c.prototype.ior=function(b){return a((this.negative|b.negative)===0),this.iuor(b)},c.prototype.or=function(b){return this.length>b.length?this.clone().ior(b):b.clone().ior(this)},c.prototype.uor=function(b){return this.length>b.length?this.clone().iuor(b):b.clone().iuor(this)},c.prototype.iuand=function(b){var lt;this.length>b.length?lt=b:lt=this;for(var Rt=0;Rt<lt.length;Rt++)this.words[Rt]=this.words[Rt]&b.words[Rt];return this.length=lt.length,this._strip()},c.prototype.iand=function(b){return a((this.negative|b.negative)===0),this.iuand(b)},c.prototype.and=function(b){return this.length>b.length?this.clone().iand(b):b.clone().iand(this)},c.prototype.uand=function(b){return this.length>b.length?this.clone().iuand(b):b.clone().iuand(this)},c.prototype.iuxor=function(b){var lt,Rt;this.length>b.length?(lt=this,Rt=b):(lt=b,Rt=this);for(var kt=0;kt<Rt.length;kt++)this.words[kt]=lt.words[kt]^Rt.words[kt];if(this!==lt)for(;kt<lt.length;kt++)this.words[kt]=lt.words[kt];return this.length=lt.length,this._strip()},c.prototype.ixor=function(b){return a((this.negative|b.negative)===0),this.iuxor(b)},c.prototype.xor=function(b){return this.length>b.length?this.clone().ixor(b):b.clone().ixor(this)},c.prototype.uxor=function(b){return this.length>b.length?this.clone().iuxor(b):b.clone().iuxor(this)},c.prototype.inotn=function(b){a(typeof b=="number"&&b>=0);var lt=Math.ceil(b/26)|0,Rt=b%26;this._expand(lt),Rt>0&&lt--;for(var kt=0;kt<lt;kt++)this.words[kt]=~this.words[kt]&67108863;return Rt>0&&(this.words[kt]=~this.words[kt]&67108863>>26-Rt),this._strip()},c.prototype.notn=function(b){return this.clone().inotn(b)},c.prototype.setn=function(b,lt){a(typeof b=="number"&&b>=0);var Rt=b/26|0,kt=b%26;return this._expand(Rt+1),lt?this.words[Rt]=this.words[Rt]|1<<kt:this.words[Rt]=this.words[Rt]&~(1<<kt),this._strip()},c.prototype.iadd=function(b){var lt;if(this.negative!==0&&b.negative===0)return this.negative=0,lt=this.isub(b),this.negative^=1,this._normSign();if(this.negative===0&&b.negative!==0)return b.negative=0,lt=this.isub(b),b.negative=1,lt._normSign();var Rt,kt;this.length>b.length?(Rt=this,kt=b):(Rt=b,kt=this);for(var Ft=0,xt=0;xt<kt.length;xt++)lt=(Rt.words[xt]|0)+(kt.words[xt]|0)+Ft,this.words[xt]=lt&67108863,Ft=lt>>>26;for(;Ft!==0&&xt<Rt.length;xt++)lt=(Rt.words[xt]|0)+Ft,this.words[xt]=lt&67108863,Ft=lt>>>26;if(this.length=Rt.length,Ft!==0)this.words[this.length]=Ft,this.length++;else if(Rt!==this)for(;xt<Rt.length;xt++)this.words[xt]=Rt.words[xt];return this},c.prototype.add=function(b){var lt;return b.negative!==0&&this.negative===0?(b.negative=0,lt=this.sub(b),b.negative^=1,lt):b.negative===0&&this.negative!==0?(this.negative=0,lt=b.sub(this),this.negative=1,lt):this.length>b.length?this.clone().iadd(b):b.clone().iadd(this)},c.prototype.isub=function(b){if(b.negative!==0){b.negative=0;var lt=this.iadd(b);return b.negative=1,lt._normSign()}else if(this.negative!==0)return this.negative=0,this.iadd(b),this.negative=1,this._normSign();var Rt=this.cmp(b);if(Rt===0)return this.negative=0,this.length=1,this.words[0]=0,this;var kt,Ft;Rt>0?(kt=this,Ft=b):(kt=b,Ft=this);for(var xt=0,g=0;g<Ft.length;g++)lt=(kt.words[g]|0)-(Ft.words[g]|0)+xt,xt=lt>>26,this.words[g]=lt&67108863;for(;xt!==0&&g<kt.length;g++)lt=(kt.words[g]|0)+xt,xt=lt>>26,this.words[g]=lt&67108863;if(xt===0&&g<kt.length&&kt!==this)for(;g<kt.length;g++)this.words[g]=kt.words[g];return this.length=Math.max(this.length,g),kt!==this&&(this.negative=1),this._strip()},c.prototype.sub=function(b){return this.clone().isub(b)};function er(_,b,lt){lt.negative=b.negative^_.negative;var Rt=_.length+b.length|0;lt.length=Rt,Rt=Rt-1|0;var kt=_.words[0]|0,Ft=b.words[0]|0,xt=kt*Ft,g=xt&67108863,wt=xt/67108864|0;lt.words[0]=g;for(var nr=1;nr<Rt;nr++){for(var or=wt>>>26,cr=wt&67108863,Rr=Math.min(nr,b.length-1),Ar=Math.max(0,nr-_.length+1);Ar<=Rr;Ar++){var pr=nr-Ar|0;kt=_.words[pr]|0,Ft=b.words[Ar]|0,xt=kt*Ft+cr,or+=xt/67108864|0,cr=xt&67108863}lt.words[nr]=cr|0,wt=or|0}return wt!==0?lt.words[nr]=wt|0:lt.length--,lt._strip()}var tr=function(b,lt,Rt){var kt=b.words,Ft=lt.words,xt=Rt.words,g=0,wt,nr,or,cr=kt[0]|0,Rr=cr&8191,Ar=cr>>>13,pr=kt[1]|0,wr=pr&8191,Tr=pr>>>13,Ir=kt[2]|0,Sr=Ir&8191,br=Ir>>>13,kr=kt[3]|0,Qr=kr&8191,qr=kr>>>13,$r=kt[4]|0,gn=$r&8191,Lr=$r>>>13,Dr=kt[5]|0,En=Dr&8191,Fr=Dr>>>13,zr=kt[6]|0,yn=zr&8191,Nr=zr>>>13,Wr=kt[7]|0,xn=Wr&8191,Or=Wr>>>13,Yr=kt[8]|0,Pn=Yr&8191,xr=Yr>>>13,fr=kt[9]|0,yr=fr&8191,Mr=fr>>>13,Pr=Ft[0]|0,Vr=Pr&8191,Br=Pr>>>13,jr=Ft[1]|0,An=jr&8191,Ur=jr>>>13,Gr=Ft[2]|0,wn=Gr&8191,Xr=Gr>>>13,hn=Ft[3]|0,In=hn&8191,Jr=hn>>>13,fn=Ft[4]|0,kn=fn&8191,Kr=fn>>>13,dn=Ft[5]|0,Rn=dn&8191,Zr=dn>>>13,un=Ft[6]|0,Mn=un&8191,rn=un>>>13,pn=Ft[7]|0,Cn=pn&8191,ln=pn>>>13,vn=Ft[8]|0,Bn=vn&8191,an=vn>>>13,mn=Ft[9]|0,Sn=mn&8191,Tn=mn>>>13;Rt.negative=b.negative^lt.negative,Rt.length=19,wt=Math.imul(Rr,Vr),nr=Math.imul(Rr,Br),nr=nr+Math.imul(Ar,Vr)|0,or=Math.imul(Ar,Br);var Un=(g+wt|0)+((nr&8191)<<13)|0;g=(or+(nr>>>13)|0)+(Un>>>26)|0,Un&=67108863,wt=Math.imul(wr,Vr),nr=Math.imul(wr,Br),nr=nr+Math.imul(Tr,Vr)|0,or=Math.imul(Tr,Br),wt=wt+Math.imul(Rr,An)|0,nr=nr+Math.imul(Rr,Ur)|0,nr=nr+Math.imul(Ar,An)|0,or=or+Math.imul(Ar,Ur)|0;var jn=(g+wt|0)+((nr&8191)<<13)|0;g=(or+(nr>>>13)|0)+(jn>>>26)|0,jn&=67108863,wt=Math.imul(Sr,Vr),nr=Math.imul(Sr,Br),nr=nr+Math.imul(br,Vr)|0,or=Math.imul(br,Br),wt=wt+Math.imul(wr,An)|0,nr=nr+Math.imul(wr,Ur)|0,nr=nr+Math.imul(Tr,An)|0,or=or+Math.imul(Tr,Ur)|0,wt=wt+Math.imul(Rr,wn)|0,nr=nr+Math.imul(Rr,Xr)|0,nr=nr+Math.imul(Ar,wn)|0,or=or+Math.imul(Ar,Xr)|0;var Vn=(g+wt|0)+((nr&8191)<<13)|0;g=(or+(nr>>>13)|0)+(Vn>>>26)|0,Vn&=67108863,wt=Math.imul(Qr,Vr),nr=Math.imul(Qr,Br),nr=nr+Math.imul(qr,Vr)|0,or=Math.imul(qr,Br),wt=wt+Math.imul(Sr,An)|0,nr=nr+Math.imul(Sr,Ur)|0,nr=nr+Math.imul(br,An)|0,or=or+Math.imul(br,Ur)|0,wt=wt+Math.imul(wr,wn)|0,nr=nr+Math.imul(wr,Xr)|0,nr=nr+Math.imul(Tr,wn)|0,or=or+Math.imul(Tr,Xr)|0,wt=wt+Math.imul(Rr,In)|0,nr=nr+Math.imul(Rr,Jr)|0,nr=nr+Math.imul(Ar,In)|0,or=or+Math.imul(Ar,Jr)|0;var Nn=(g+wt|0)+((nr&8191)<<13)|0;g=(or+(nr>>>13)|0)+(Nn>>>26)|0,Nn&=67108863,wt=Math.imul(gn,Vr),nr=Math.imul(gn,Br),nr=nr+Math.imul(Lr,Vr)|0,or=Math.imul(Lr,Br),wt=wt+Math.imul(Qr,An)|0,nr=nr+Math.imul(Qr,Ur)|0,nr=nr+Math.imul(qr,An)|0,or=or+Math.imul(qr,Ur)|0,wt=wt+Math.imul(Sr,wn)|0,nr=nr+Math.imul(Sr,Xr)|0,nr=nr+Math.imul(br,wn)|0,or=or+Math.imul(br,Xr)|0,wt=wt+Math.imul(wr,In)|0,nr=nr+Math.imul(wr,Jr)|0,nr=nr+Math.imul(Tr,In)|0,or=or+Math.imul(Tr,Jr)|0,wt=wt+Math.imul(Rr,kn)|0,nr=nr+Math.imul(Rr,Kr)|0,nr=nr+Math.imul(Ar,kn)|0,or=or+Math.imul(Ar,Kr)|0;var zn=(g+wt|0)+((nr&8191)<<13)|0;g=(or+(nr>>>13)|0)+(zn>>>26)|0,zn&=67108863,wt=Math.imul(En,Vr),nr=Math.imul(En,Br),nr=nr+Math.imul(Fr,Vr)|0,or=Math.imul(Fr,Br),wt=wt+Math.imul(gn,An)|0,nr=nr+Math.imul(gn,Ur)|0,nr=nr+Math.imul(Lr,An)|0,or=or+Math.imul(Lr,Ur)|0,wt=wt+Math.imul(Qr,wn)|0,nr=nr+Math.imul(Qr,Xr)|0,nr=nr+Math.imul(qr,wn)|0,or=or+Math.imul(qr,Xr)|0,wt=wt+Math.imul(Sr,In)|0,nr=nr+Math.imul(Sr,Jr)|0,nr=nr+Math.imul(br,In)|0,or=or+Math.imul(br,Jr)|0,wt=wt+Math.imul(wr,kn)|0,nr=nr+Math.imul(wr,Kr)|0,nr=nr+Math.imul(Tr,kn)|0,or=or+Math.imul(Tr,Kr)|0,wt=wt+Math.imul(Rr,Rn)|0,nr=nr+Math.imul(Rr,Zr)|0,nr=nr+Math.imul(Ar,Rn)|0,or=or+Math.imul(Ar,Zr)|0;var Hn=(g+wt|0)+((nr&8191)<<13)|0;g=(or+(nr>>>13)|0)+(Hn>>>26)|0,Hn&=67108863,wt=Math.imul(yn,Vr),nr=Math.imul(yn,Br),nr=nr+Math.imul(Nr,Vr)|0,or=Math.imul(Nr,Br),wt=wt+Math.imul(En,An)|0,nr=nr+Math.imul(En,Ur)|0,nr=nr+Math.imul(Fr,An)|0,or=or+Math.imul(Fr,Ur)|0,wt=wt+Math.imul(gn,wn)|0,nr=nr+Math.imul(gn,Xr)|0,nr=nr+Math.imul(Lr,wn)|0,or=or+Math.imul(Lr,Xr)|0,wt=wt+Math.imul(Qr,In)|0,nr=nr+Math.imul(Qr,Jr)|0,nr=nr+Math.imul(qr,In)|0,or=or+Math.imul(qr,Jr)|0,wt=wt+Math.imul(Sr,kn)|0,nr=nr+Math.imul(Sr,Kr)|0,nr=nr+Math.imul(br,kn)|0,or=or+Math.imul(br,Kr)|0,wt=wt+Math.imul(wr,Rn)|0,nr=nr+Math.imul(wr,Zr)|0,nr=nr+Math.imul(Tr,Rn)|0,or=or+Math.imul(Tr,Zr)|0,wt=wt+Math.imul(Rr,Mn)|0,nr=nr+Math.imul(Rr,rn)|0,nr=nr+Math.imul(Ar,Mn)|0,or=or+Math.imul(Ar,rn)|0;var Xn=(g+wt|0)+((nr&8191)<<13)|0;g=(or+(nr>>>13)|0)+(Xn>>>26)|0,Xn&=67108863,wt=Math.imul(xn,Vr),nr=Math.imul(xn,Br),nr=nr+Math.imul(Or,Vr)|0,or=Math.imul(Or,Br),wt=wt+Math.imul(yn,An)|0,nr=nr+Math.imul(yn,Ur)|0,nr=nr+Math.imul(Nr,An)|0,or=or+Math.imul(Nr,Ur)|0,wt=wt+Math.imul(En,wn)|0,nr=nr+Math.imul(En,Xr)|0,nr=nr+Math.imul(Fr,wn)|0,or=or+Math.imul(Fr,Xr)|0,wt=wt+Math.imul(gn,In)|0,nr=nr+Math.imul(gn,Jr)|0,nr=nr+Math.imul(Lr,In)|0,or=or+Math.imul(Lr,Jr)|0,wt=wt+Math.imul(Qr,kn)|0,nr=nr+Math.imul(Qr,Kr)|0,nr=nr+Math.imul(qr,kn)|0,or=or+Math.imul(qr,Kr)|0,wt=wt+Math.imul(Sr,Rn)|0,nr=nr+Math.imul(Sr,Zr)|0,nr=nr+Math.imul(br,Rn)|0,or=or+Math.imul(br,Zr)|0,wt=wt+Math.imul(wr,Mn)|0,nr=nr+Math.imul(wr,rn)|0,nr=nr+Math.imul(Tr,Mn)|0,or=or+Math.imul(Tr,rn)|0,wt=wt+Math.imul(Rr,Cn)|0,nr=nr+Math.imul(Rr,ln)|0,nr=nr+Math.imul(Ar,Cn)|0,or=or+Math.imul(Ar,ln)|0;var qn=(g+wt|0)+((nr&8191)<<13)|0;g=(or+(nr>>>13)|0)+(qn>>>26)|0,qn&=67108863,wt=Math.imul(Pn,Vr),nr=Math.imul(Pn,Br),nr=nr+Math.imul(xr,Vr)|0,or=Math.imul(xr,Br),wt=wt+Math.imul(xn,An)|0,nr=nr+Math.imul(xn,Ur)|0,nr=nr+Math.imul(Or,An)|0,or=or+Math.imul(Or,Ur)|0,wt=wt+Math.imul(yn,wn)|0,nr=nr+Math.imul(yn,Xr)|0,nr=nr+Math.imul(Nr,wn)|0,or=or+Math.imul(Nr,Xr)|0,wt=wt+Math.imul(En,In)|0,nr=nr+Math.imul(En,Jr)|0,nr=nr+Math.imul(Fr,In)|0,or=or+Math.imul(Fr,Jr)|0,wt=wt+Math.imul(gn,kn)|0,nr=nr+Math.imul(gn,Kr)|0,nr=nr+Math.imul(Lr,kn)|0,or=or+Math.imul(Lr,Kr)|0,wt=wt+Math.imul(Qr,Rn)|0,nr=nr+Math.imul(Qr,Zr)|0,nr=nr+Math.imul(qr,Rn)|0,or=or+Math.imul(qr,Zr)|0,wt=wt+Math.imul(Sr,Mn)|0,nr=nr+Math.imul(Sr,rn)|0,nr=nr+Math.imul(br,Mn)|0,or=or+Math.imul(br,rn)|0,wt=wt+Math.imul(wr,Cn)|0,nr=nr+Math.imul(wr,ln)|0,nr=nr+Math.imul(Tr,Cn)|0,or=or+Math.imul(Tr,ln)|0,wt=wt+Math.imul(Rr,Bn)|0,nr=nr+Math.imul(Rr,an)|0,nr=nr+Math.imul(Ar,Bn)|0,or=or+Math.imul(Ar,an)|0;var Wn=(g+wt|0)+((nr&8191)<<13)|0;g=(or+(nr>>>13)|0)+(Wn>>>26)|0,Wn&=67108863,wt=Math.imul(yr,Vr),nr=Math.imul(yr,Br),nr=nr+Math.imul(Mr,Vr)|0,or=Math.imul(Mr,Br),wt=wt+Math.imul(Pn,An)|0,nr=nr+Math.imul(Pn,Ur)|0,nr=nr+Math.imul(xr,An)|0,or=or+Math.imul(xr,Ur)|0,wt=wt+Math.imul(xn,wn)|0,nr=nr+Math.imul(xn,Xr)|0,nr=nr+Math.imul(Or,wn)|0,or=or+Math.imul(Or,Xr)|0,wt=wt+Math.imul(yn,In)|0,nr=nr+Math.imul(yn,Jr)|0,nr=nr+Math.imul(Nr,In)|0,or=or+Math.imul(Nr,Jr)|0,wt=wt+Math.imul(En,kn)|0,nr=nr+Math.imul(En,Kr)|0,nr=nr+Math.imul(Fr,kn)|0,or=or+Math.imul(Fr,Kr)|0,wt=wt+Math.imul(gn,Rn)|0,nr=nr+Math.imul(gn,Zr)|0,nr=nr+Math.imul(Lr,Rn)|0,or=or+Math.imul(Lr,Zr)|0,wt=wt+Math.imul(Qr,Mn)|0,nr=nr+Math.imul(Qr,rn)|0,nr=nr+Math.imul(qr,Mn)|0,or=or+Math.imul(qr,rn)|0,wt=wt+Math.imul(Sr,Cn)|0,nr=nr+Math.imul(Sr,ln)|0,nr=nr+Math.imul(br,Cn)|0,or=or+Math.imul(br,ln)|0,wt=wt+Math.imul(wr,Bn)|0,nr=nr+Math.imul(wr,an)|0,nr=nr+Math.imul(Tr,Bn)|0,or=or+Math.imul(Tr,an)|0,wt=wt+Math.imul(Rr,Sn)|0,nr=nr+Math.imul(Rr,Tn)|0,nr=nr+Math.imul(Ar,Sn)|0,or=or+Math.imul(Ar,Tn)|0;var On=(g+wt|0)+((nr&8191)<<13)|0;g=(or+(nr>>>13)|0)+(On>>>26)|0,On&=67108863,wt=Math.imul(yr,An),nr=Math.imul(yr,Ur),nr=nr+Math.imul(Mr,An)|0,or=Math.imul(Mr,Ur),wt=wt+Math.imul(Pn,wn)|0,nr=nr+Math.imul(Pn,Xr)|0,nr=nr+Math.imul(xr,wn)|0,or=or+Math.imul(xr,Xr)|0,wt=wt+Math.imul(xn,In)|0,nr=nr+Math.imul(xn,Jr)|0,nr=nr+Math.imul(Or,In)|0,or=or+Math.imul(Or,Jr)|0,wt=wt+Math.imul(yn,kn)|0,nr=nr+Math.imul(yn,Kr)|0,nr=nr+Math.imul(Nr,kn)|0,or=or+Math.imul(Nr,Kr)|0,wt=wt+Math.imul(En,Rn)|0,nr=nr+Math.imul(En,Zr)|0,nr=nr+Math.imul(Fr,Rn)|0,or=or+Math.imul(Fr,Zr)|0,wt=wt+Math.imul(gn,Mn)|0,nr=nr+Math.imul(gn,rn)|0,nr=nr+Math.imul(Lr,Mn)|0,or=or+Math.imul(Lr,rn)|0,wt=wt+Math.imul(Qr,Cn)|0,nr=nr+Math.imul(Qr,ln)|0,nr=nr+Math.imul(qr,Cn)|0,or=or+Math.imul(qr,ln)|0,wt=wt+Math.imul(Sr,Bn)|0,nr=nr+Math.imul(Sr,an)|0,nr=nr+Math.imul(br,Bn)|0,or=or+Math.imul(br,an)|0,wt=wt+Math.imul(wr,Sn)|0,nr=nr+Math.imul(wr,Tn)|0,nr=nr+Math.imul(Tr,Sn)|0,or=or+Math.imul(Tr,Tn)|0;var $n=(g+wt|0)+((nr&8191)<<13)|0;g=(or+(nr>>>13)|0)+($n>>>26)|0,$n&=67108863,wt=Math.imul(yr,wn),nr=Math.imul(yr,Xr),nr=nr+Math.imul(Mr,wn)|0,or=Math.imul(Mr,Xr),wt=wt+Math.imul(Pn,In)|0,nr=nr+Math.imul(Pn,Jr)|0,nr=nr+Math.imul(xr,In)|0,or=or+Math.imul(xr,Jr)|0,wt=wt+Math.imul(xn,kn)|0,nr=nr+Math.imul(xn,Kr)|0,nr=nr+Math.imul(Or,kn)|0,or=or+Math.imul(Or,Kr)|0,wt=wt+Math.imul(yn,Rn)|0,nr=nr+Math.imul(yn,Zr)|0,nr=nr+Math.imul(Nr,Rn)|0,or=or+Math.imul(Nr,Zr)|0,wt=wt+Math.imul(En,Mn)|0,nr=nr+Math.imul(En,rn)|0,nr=nr+Math.imul(Fr,Mn)|0,or=or+Math.imul(Fr,rn)|0,wt=wt+Math.imul(gn,Cn)|0,nr=nr+Math.imul(gn,ln)|0,nr=nr+Math.imul(Lr,Cn)|0,or=or+Math.imul(Lr,ln)|0,wt=wt+Math.imul(Qr,Bn)|0,nr=nr+Math.imul(Qr,an)|0,nr=nr+Math.imul(qr,Bn)|0,or=or+Math.imul(qr,an)|0,wt=wt+Math.imul(Sr,Sn)|0,nr=nr+Math.imul(Sr,Tn)|0,nr=nr+Math.imul(br,Sn)|0,or=or+Math.imul(br,Tn)|0;var Dn=(g+wt|0)+((nr&8191)<<13)|0;g=(or+(nr>>>13)|0)+(Dn>>>26)|0,Dn&=67108863,wt=Math.imul(yr,In),nr=Math.imul(yr,Jr),nr=nr+Math.imul(Mr,In)|0,or=Math.imul(Mr,Jr),wt=wt+Math.imul(Pn,kn)|0,nr=nr+Math.imul(Pn,Kr)|0,nr=nr+Math.imul(xr,kn)|0,or=or+Math.imul(xr,Kr)|0,wt=wt+Math.imul(xn,Rn)|0,nr=nr+Math.imul(xn,Zr)|0,nr=nr+Math.imul(Or,Rn)|0,or=or+Math.imul(Or,Zr)|0,wt=wt+Math.imul(yn,Mn)|0,nr=nr+Math.imul(yn,rn)|0,nr=nr+Math.imul(Nr,Mn)|0,or=or+Math.imul(Nr,rn)|0,wt=wt+Math.imul(En,Cn)|0,nr=nr+Math.imul(En,ln)|0,nr=nr+Math.imul(Fr,Cn)|0,or=or+Math.imul(Fr,ln)|0,wt=wt+Math.imul(gn,Bn)|0,nr=nr+Math.imul(gn,an)|0,nr=nr+Math.imul(Lr,Bn)|0,or=or+Math.imul(Lr,an)|0,wt=wt+Math.imul(Qr,Sn)|0,nr=nr+Math.imul(Qr,Tn)|0,nr=nr+Math.imul(qr,Sn)|0,or=or+Math.imul(qr,Tn)|0;var Ln=(g+wt|0)+((nr&8191)<<13)|0;g=(or+(nr>>>13)|0)+(Ln>>>26)|0,Ln&=67108863,wt=Math.imul(yr,kn),nr=Math.imul(yr,Kr),nr=nr+Math.imul(Mr,kn)|0,or=Math.imul(Mr,Kr),wt=wt+Math.imul(Pn,Rn)|0,nr=nr+Math.imul(Pn,Zr)|0,nr=nr+Math.imul(xr,Rn)|0,or=or+Math.imul(xr,Zr)|0,wt=wt+Math.imul(xn,Mn)|0,nr=nr+Math.imul(xn,rn)|0,nr=nr+Math.imul(Or,Mn)|0,or=or+Math.imul(Or,rn)|0,wt=wt+Math.imul(yn,Cn)|0,nr=nr+Math.imul(yn,ln)|0,nr=nr+Math.imul(Nr,Cn)|0,or=or+Math.imul(Nr,ln)|0,wt=wt+Math.imul(En,Bn)|0,nr=nr+Math.imul(En,an)|0,nr=nr+Math.imul(Fr,Bn)|0,or=or+Math.imul(Fr,an)|0,wt=wt+Math.imul(gn,Sn)|0,nr=nr+Math.imul(gn,Tn)|0,nr=nr+Math.imul(Lr,Sn)|0,or=or+Math.imul(Lr,Tn)|0;var Zn=(g+wt|0)+((nr&8191)<<13)|0;g=(or+(nr>>>13)|0)+(Zn>>>26)|0,Zn&=67108863,wt=Math.imul(yr,Rn),nr=Math.imul(yr,Zr),nr=nr+Math.imul(Mr,Rn)|0,or=Math.imul(Mr,Zr),wt=wt+Math.imul(Pn,Mn)|0,nr=nr+Math.imul(Pn,rn)|0,nr=nr+Math.imul(xr,Mn)|0,or=or+Math.imul(xr,rn)|0,wt=wt+Math.imul(xn,Cn)|0,nr=nr+Math.imul(xn,ln)|0,nr=nr+Math.imul(Or,Cn)|0,or=or+Math.imul(Or,ln)|0,wt=wt+Math.imul(yn,Bn)|0,nr=nr+Math.imul(yn,an)|0,nr=nr+Math.imul(Nr,Bn)|0,or=or+Math.imul(Nr,an)|0,wt=wt+Math.imul(En,Sn)|0,nr=nr+Math.imul(En,Tn)|0,nr=nr+Math.imul(Fr,Sn)|0,or=or+Math.imul(Fr,Tn)|0;var Gn=(g+wt|0)+((nr&8191)<<13)|0;g=(or+(nr>>>13)|0)+(Gn>>>26)|0,Gn&=67108863,wt=Math.imul(yr,Mn),nr=Math.imul(yr,rn),nr=nr+Math.imul(Mr,Mn)|0,or=Math.imul(Mr,rn),wt=wt+Math.imul(Pn,Cn)|0,nr=nr+Math.imul(Pn,ln)|0,nr=nr+Math.imul(xr,Cn)|0,or=or+Math.imul(xr,ln)|0,wt=wt+Math.imul(xn,Bn)|0,nr=nr+Math.imul(xn,an)|0,nr=nr+Math.imul(Or,Bn)|0,or=or+Math.imul(Or,an)|0,wt=wt+Math.imul(yn,Sn)|0,nr=nr+Math.imul(yn,Tn)|0,nr=nr+Math.imul(Nr,Sn)|0,or=or+Math.imul(Nr,Tn)|0;var Kn=(g+wt|0)+((nr&8191)<<13)|0;g=(or+(nr>>>13)|0)+(Kn>>>26)|0,Kn&=67108863,wt=Math.imul(yr,Cn),nr=Math.imul(yr,ln),nr=nr+Math.imul(Mr,Cn)|0,or=Math.imul(Mr,ln),wt=wt+Math.imul(Pn,Bn)|0,nr=nr+Math.imul(Pn,an)|0,nr=nr+Math.imul(xr,Bn)|0,or=or+Math.imul(xr,an)|0,wt=wt+Math.imul(xn,Sn)|0,nr=nr+Math.imul(xn,Tn)|0,nr=nr+Math.imul(Or,Sn)|0,or=or+Math.imul(Or,Tn)|0;var Qn=(g+wt|0)+((nr&8191)<<13)|0;g=(or+(nr>>>13)|0)+(Qn>>>26)|0,Qn&=67108863,wt=Math.imul(yr,Bn),nr=Math.imul(yr,an),nr=nr+Math.imul(Mr,Bn)|0,or=Math.imul(Mr,an),wt=wt+Math.imul(Pn,Sn)|0,nr=nr+Math.imul(Pn,Tn)|0,nr=nr+Math.imul(xr,Sn)|0,or=or+Math.imul(xr,Tn)|0;var ls=(g+wt|0)+((nr&8191)<<13)|0;g=(or+(nr>>>13)|0)+(ls>>>26)|0,ls&=67108863,wt=Math.imul(yr,Sn),nr=Math.imul(yr,Tn),nr=nr+Math.imul(Mr,Sn)|0,or=Math.imul(Mr,Tn);var fs=(g+wt|0)+((nr&8191)<<13)|0;return g=(or+(nr>>>13)|0)+(fs>>>26)|0,fs&=67108863,xt[0]=Un,xt[1]=jn,xt[2]=Vn,xt[3]=Nn,xt[4]=zn,xt[5]=Hn,xt[6]=Xn,xt[7]=qn,xt[8]=Wn,xt[9]=On,xt[10]=$n,xt[11]=Dn,xt[12]=Ln,xt[13]=Zn,xt[14]=Gn,xt[15]=Kn,xt[16]=Qn,xt[17]=ls,xt[18]=fs,g!==0&&(xt[19]=g,Rt.length++),Rt};Math.imul||(tr=er);function sr(_,b,lt){lt.negative=b.negative^_.negative,lt.length=_.length+b.length;for(var Rt=0,kt=0,Ft=0;Ft<lt.length-1;Ft++){var xt=kt;kt=0;for(var g=Rt&67108863,wt=Math.min(Ft,b.length-1),nr=Math.max(0,Ft-_.length+1);nr<=wt;nr++){var or=Ft-nr,cr=_.words[or]|0,Rr=b.words[nr]|0,Ar=cr*Rr,pr=Ar&67108863;xt=xt+(Ar/67108864|0)|0,pr=pr+g|0,g=pr&67108863,xt=xt+(pr>>>26)|0,kt+=xt>>>26,xt&=67108863}lt.words[Ft]=g,Rt=xt,xt=kt}return Rt!==0?lt.words[Ft]=Rt:lt.length--,lt._strip()}function ar(_,b,lt){return sr(_,b,lt)}c.prototype.mulTo=function(b,lt){var Rt,kt=this.length+b.length;return this.length===10&&b.length===10?Rt=tr(this,b,lt):kt<63?Rt=er(this,b,lt):kt<1024?Rt=sr(this,b,lt):Rt=ar(this,b,lt),Rt},c.prototype.mul=function(b){var lt=new c(null);return lt.words=new Array(this.length+b.length),this.mulTo(b,lt)},c.prototype.mulf=function(b){var lt=new c(null);return lt.words=new Array(this.length+b.length),ar(this,b,lt)},c.prototype.imul=function(b){return this.clone().mulTo(b,this)},c.prototype.imuln=function(b){var lt=b<0;lt&&(b=-b),a(typeof b=="number"),a(b<67108864);for(var Rt=0,kt=0;kt<this.length;kt++){var Ft=(this.words[kt]|0)*b,xt=(Ft&67108863)+(Rt&67108863);Rt>>=26,Rt+=Ft/67108864|0,Rt+=xt>>>26,this.words[kt]=xt&67108863}return Rt!==0&&(this.words[kt]=Rt,this.length++),this.length=b===0?1:this.length,lt?this.ineg():this},c.prototype.muln=function(b){return this.clone().imuln(b)},c.prototype.sqr=function(){return this.mul(this)},c.prototype.isqr=function(){return this.imul(this.clone())},c.prototype.pow=function(b){var lt=ir(b);if(lt.length===0)return new c(1);for(var Rt=this,kt=0;kt<lt.length&&lt[kt]===0;kt++,Rt=Rt.sqr());if(++kt<lt.length)for(var Ft=Rt.sqr();kt<lt.length;kt++,Ft=Ft.sqr())lt[kt]!==0&&(Rt=Rt.mul(Ft));return Rt},c.prototype.iushln=function(b){a(typeof b=="number"&&b>=0);var lt=b%26,Rt=(b-lt)/26,kt=67108863>>>26-lt<<26-lt,Ft;if(lt!==0){var xt=0;for(Ft=0;Ft<this.length;Ft++){var g=this.words[Ft]&kt,wt=(this.words[Ft]|0)-g<<lt;this.words[Ft]=wt|xt,xt=g>>>26-lt}xt&&(this.words[Ft]=xt,this.length++)}if(Rt!==0){for(Ft=this.length-1;Ft>=0;Ft--)this.words[Ft+Rt]=this.words[Ft];for(Ft=0;Ft<Rt;Ft++)this.words[Ft]=0;this.length+=Rt}return this._strip()},c.prototype.ishln=function(b){return a(this.negative===0),this.iushln(b)},c.prototype.iushrn=function(b,lt,Rt){a(typeof b=="number"&&b>=0);var kt;lt?kt=(lt-lt%26)/26:kt=0;var Ft=b%26,xt=Math.min((b-Ft)/26,this.length),g=67108863^67108863>>>Ft<<Ft,wt=Rt;if(kt-=xt,kt=Math.max(0,kt),wt){for(var nr=0;nr<xt;nr++)wt.words[nr]=this.words[nr];wt.length=xt}if(xt!==0)if(this.length>xt)for(this.length-=xt,nr=0;nr<this.length;nr++)this.words[nr]=this.words[nr+xt];else this.words[0]=0,this.length=1;var or=0;for(nr=this.length-1;nr>=0&&(or!==0||nr>=kt);nr--){var cr=this.words[nr]|0;this.words[nr]=or<<26-Ft|cr>>>Ft,or=cr&g}return wt&&or!==0&&(wt.words[wt.length++]=or),this.length===0&&(this.words[0]=0,this.length=1),this._strip()},c.prototype.ishrn=function(b,lt,Rt){return a(this.negative===0),this.iushrn(b,lt,Rt)},c.prototype.shln=function(b){return this.clone().ishln(b)},c.prototype.ushln=function(b){return this.clone().iushln(b)},c.prototype.shrn=function(b){return this.clone().ishrn(b)},c.prototype.ushrn=function(b){return this.clone().iushrn(b)},c.prototype.testn=function(b){a(typeof b=="number"&&b>=0);var lt=b%26,Rt=(b-lt)/26,kt=1<<lt;if(this.length<=Rt)return!1;var Ft=this.words[Rt];return!!(Ft&kt)},c.prototype.imaskn=function(b){a(typeof b=="number"&&b>=0);var lt=b%26,Rt=(b-lt)/26;if(a(this.negative===0,"imaskn works only with positive numbers"),this.length<=Rt)return this;if(lt!==0&&Rt++,this.length=Math.min(Rt,this.length),lt!==0){var kt=67108863^67108863>>>lt<<lt;this.words[this.length-1]&=kt}return this._strip()},c.prototype.maskn=function(b){return this.clone().imaskn(b)},c.prototype.iaddn=function(b){return a(typeof b=="number"),a(b<67108864),b<0?this.isubn(-b):this.negative!==0?this.length===1&&(this.words[0]|0)<=b?(this.words[0]=b-(this.words[0]|0),this.negative=0,this):(this.negative=0,this.isubn(b),this.negative=1,this):this._iaddn(b)},c.prototype._iaddn=function(b){this.words[0]+=b;for(var lt=0;lt<this.length&&this.words[lt]>=67108864;lt++)this.words[lt]-=67108864,lt===this.length-1?this.words[lt+1]=1:this.words[lt+1]++;return this.length=Math.max(this.length,lt+1),this},c.prototype.isubn=function(b){if(a(typeof b=="number"),a(b<67108864),b<0)return this.iaddn(-b);if(this.negative!==0)return this.negative=0,this.iaddn(b),this.negative=1,this;if(this.words[0]-=b,this.length===1&&this.words[0]<0)this.words[0]=-this.words[0],this.negative=1;else for(var lt=0;lt<this.length&&this.words[lt]<0;lt++)this.words[lt]+=67108864,this.words[lt+1]-=1;return this._strip()},c.prototype.addn=function(b){return this.clone().iaddn(b)},c.prototype.subn=function(b){return this.clone().isubn(b)},c.prototype.iabs=function(){return this.negative=0,this},c.prototype.abs=function(){return this.clone().iabs()},c.prototype._ishlnsubmul=function(b,lt,Rt){var kt=b.length+Rt,Ft;this._expand(kt);var xt,g=0;for(Ft=0;Ft<b.length;Ft++){xt=(this.words[Ft+Rt]|0)+g;var wt=(b.words[Ft]|0)*lt;xt-=wt&67108863,g=(xt>>26)-(wt/67108864|0),this.words[Ft+Rt]=xt&67108863}for(;Ft<this.length-Rt;Ft++)xt=(this.words[Ft+Rt]|0)+g,g=xt>>26,this.words[Ft+Rt]=xt&67108863;if(g===0)return this._strip();for(a(g===-1),g=0,Ft=0;Ft<this.length;Ft++)xt=-(this.words[Ft]|0)+g,g=xt>>26,this.words[Ft]=xt&67108863;return this.negative=1,this._strip()},c.prototype._wordDiv=function(b,lt){var Rt=this.length-b.length,kt=this.clone(),Ft=b,xt=Ft.words[Ft.length-1]|0,g=this._countBits(xt);Rt=26-g,Rt!==0&&(Ft=Ft.ushln(Rt),kt.iushln(Rt),xt=Ft.words[Ft.length-1]|0);var wt=kt.length-Ft.length,nr;if(lt!=="mod"){nr=new c(null),nr.length=wt+1,nr.words=new Array(nr.length);for(var or=0;or<nr.length;or++)nr.words[or]=0}var cr=kt.clone()._ishlnsubmul(Ft,1,wt);cr.negative===0&&(kt=cr,nr&&(nr.words[wt]=1));for(var Rr=wt-1;Rr>=0;Rr--){var Ar=(kt.words[Ft.length+Rr]|0)*67108864+(kt.words[Ft.length+Rr-1]|0);for(Ar=Math.min(Ar/xt|0,67108863),kt._ishlnsubmul(Ft,Ar,Rr);kt.negative!==0;)Ar--,kt.negative=0,kt._ishlnsubmul(Ft,1,Rr),kt.isZero()||(kt.negative^=1);nr&&(nr.words[Rr]=Ar)}return nr&&nr._strip(),kt._strip(),lt!=="div"&&Rt!==0&&kt.iushrn(Rt),{div:nr||null,mod:kt}},c.prototype.divmod=function(b,lt,Rt){if(a(!b.isZero()),this.isZero())return{div:new c(0),mod:new c(0)};var kt,Ft,xt;return this.negative!==0&&b.negative===0?(xt=this.neg().divmod(b,lt),lt!=="mod"&&(kt=xt.div.neg()),lt!=="div"&&(Ft=xt.mod.neg(),Rt&&Ft.negative!==0&&Ft.iadd(b)),{div:kt,mod:Ft}):this.negative===0&&b.negative!==0?(xt=this.divmod(b.neg(),lt),lt!=="mod"&&(kt=xt.div.neg()),{div:kt,mod:xt.mod}):this.negative&b.negative?(xt=this.neg().divmod(b.neg(),lt),lt!=="div"&&(Ft=xt.mod.neg(),Rt&&Ft.negative!==0&&Ft.isub(b)),{div:xt.div,mod:Ft}):b.length>this.length||this.cmp(b)<0?{div:new c(0),mod:this}:b.length===1?lt==="div"?{div:this.divn(b.words[0]),mod:null}:lt==="mod"?{div:null,mod:new c(this.modrn(b.words[0]))}:{div:this.divn(b.words[0]),mod:new c(this.modrn(b.words[0]))}:this._wordDiv(b,lt)},c.prototype.div=function(b){return this.divmod(b,"div",!1).div},c.prototype.mod=function(b){return this.divmod(b,"mod",!1).mod},c.prototype.umod=function(b){return this.divmod(b,"mod",!0).mod},c.prototype.divRound=function(b){var lt=this.divmod(b);if(lt.mod.isZero())return lt.div;var Rt=lt.div.negative!==0?lt.mod.isub(b):lt.mod,kt=b.ushrn(1),Ft=b.andln(1),xt=Rt.cmp(kt);return xt<0||Ft===1&&xt===0?lt.div:lt.div.negative!==0?lt.div.isubn(1):lt.div.iaddn(1)},c.prototype.modrn=function(b){var lt=b<0;lt&&(b=-b),a(b<=67108863);for(var Rt=(1<<26)%b,kt=0,Ft=this.length-1;Ft>=0;Ft--)kt=(Rt*kt+(this.words[Ft]|0))%b;return lt?-kt:kt},c.prototype.modn=function(b){return this.modrn(b)},c.prototype.idivn=function(b){var lt=b<0;lt&&(b=-b),a(b<=67108863);for(var Rt=0,kt=this.length-1;kt>=0;kt--){var Ft=(this.words[kt]|0)+Rt*67108864;this.words[kt]=Ft/b|0,Rt=Ft%b}return this._strip(),lt?this.ineg():this},c.prototype.divn=function(b){return this.clone().idivn(b)},c.prototype.egcd=function(b){a(b.negative===0),a(!b.isZero());var lt=this,Rt=b.clone();lt.negative!==0?lt=lt.umod(b):lt=lt.clone();for(var kt=new c(1),Ft=new c(0),xt=new c(0),g=new c(1),wt=0;lt.isEven()&&Rt.isEven();)lt.iushrn(1),Rt.iushrn(1),++wt;for(var nr=Rt.clone(),or=lt.clone();!lt.isZero();){for(var cr=0,Rr=1;!(lt.words[0]&Rr)&&cr<26;++cr,Rr<<=1);if(cr>0)for(lt.iushrn(cr);cr-- >0;)(kt.isOdd()||Ft.isOdd())&&(kt.iadd(nr),Ft.isub(or)),kt.iushrn(1),Ft.iushrn(1);for(var Ar=0,pr=1;!(Rt.words[0]&pr)&&Ar<26;++Ar,pr<<=1);if(Ar>0)for(Rt.iushrn(Ar);Ar-- >0;)(xt.isOdd()||g.isOdd())&&(xt.iadd(nr),g.isub(or)),xt.iushrn(1),g.iushrn(1);lt.cmp(Rt)>=0?(lt.isub(Rt),kt.isub(xt),Ft.isub(g)):(Rt.isub(lt),xt.isub(kt),g.isub(Ft))}return{a:xt,b:g,gcd:Rt.iushln(wt)}},c.prototype._invmp=function(b){a(b.negative===0),a(!b.isZero());var lt=this,Rt=b.clone();lt.negative!==0?lt=lt.umod(b):lt=lt.clone();for(var kt=new c(1),Ft=new c(0),xt=Rt.clone();lt.cmpn(1)>0&&Rt.cmpn(1)>0;){for(var g=0,wt=1;!(lt.words[0]&wt)&&g<26;++g,wt<<=1);if(g>0)for(lt.iushrn(g);g-- >0;)kt.isOdd()&&kt.iadd(xt),kt.iushrn(1);for(var nr=0,or=1;!(Rt.words[0]&or)&&nr<26;++nr,or<<=1);if(nr>0)for(Rt.iushrn(nr);nr-- >0;)Ft.isOdd()&&Ft.iadd(xt),Ft.iushrn(1);lt.cmp(Rt)>=0?(lt.isub(Rt),kt.isub(Ft)):(Rt.isub(lt),Ft.isub(kt))}var cr;return lt.cmpn(1)===0?cr=kt:cr=Ft,cr.cmpn(0)<0&&cr.iadd(b),cr},c.prototype.gcd=function(b){if(this.isZero())return b.abs();if(b.isZero())return this.abs();var lt=this.clone(),Rt=b.clone();lt.negative=0,Rt.negative=0;for(var kt=0;lt.isEven()&&Rt.isEven();kt++)lt.iushrn(1),Rt.iushrn(1);do{for(;lt.isEven();)lt.iushrn(1);for(;Rt.isEven();)Rt.iushrn(1);var Ft=lt.cmp(Rt);if(Ft<0){var xt=lt;lt=Rt,Rt=xt}else if(Ft===0||Rt.cmpn(1)===0)break;lt.isub(Rt)}while(!0);return Rt.iushln(kt)},c.prototype.invm=function(b){return this.egcd(b).a.umod(b)},c.prototype.isEven=function(){return(this.words[0]&1)===0},c.prototype.isOdd=function(){return(this.words[0]&1)===1},c.prototype.andln=function(b){return this.words[0]&b},c.prototype.bincn=function(b){a(typeof b=="number");var lt=b%26,Rt=(b-lt)/26,kt=1<<lt;if(this.length<=Rt)return this._expand(Rt+1),this.words[Rt]|=kt,this;for(var Ft=kt,xt=Rt;Ft!==0&&xt<this.length;xt++){var g=this.words[xt]|0;g+=Ft,Ft=g>>>26,g&=67108863,this.words[xt]=g}return Ft!==0&&(this.words[xt]=Ft,this.length++),this},c.prototype.isZero=function(){return this.length===1&&this.words[0]===0},c.prototype.cmpn=function(b){var lt=b<0;if(this.negative!==0&&!lt)return-1;if(this.negative===0&&lt)return 1;this._strip();var Rt;if(this.length>1)Rt=1;else{lt&&(b=-b),a(b<=67108863,"Number is too big");var kt=this.words[0]|0;Rt=kt===b?0:kt<b?-1:1}return this.negative!==0?-Rt|0:Rt},c.prototype.cmp=function(b){if(this.negative!==0&&b.negative===0)return-1;if(this.negative===0&&b.negative!==0)return 1;var lt=this.ucmp(b);return this.negative!==0?-lt|0:lt},c.prototype.ucmp=function(b){if(this.length>b.length)return 1;if(this.length<b.length)return-1;for(var lt=0,Rt=this.length-1;Rt>=0;Rt--){var kt=this.words[Rt]|0,Ft=b.words[Rt]|0;if(kt!==Ft){kt<Ft?lt=-1:kt>Ft&&(lt=1);break}}return lt},c.prototype.gtn=function(b){return this.cmpn(b)===1},c.prototype.gt=function(b){return this.cmp(b)===1},c.prototype.gten=function(b){return this.cmpn(b)>=0},c.prototype.gte=function(b){return this.cmp(b)>=0},c.prototype.ltn=function(b){return this.cmpn(b)===-1},c.prototype.lt=function(b){return this.cmp(b)===-1},c.prototype.lten=function(b){return this.cmpn(b)<=0},c.prototype.lte=function(b){return this.cmp(b)<=0},c.prototype.eqn=function(b){return this.cmpn(b)===0},c.prototype.eq=function(b){return this.cmp(b)===0},c.red=function(b){return new Mt(b)},c.prototype.toRed=function(b){return a(!this.red,"Already a number in reduction context"),a(this.negative===0,"red works only with positives"),b.convertTo(this)._forceRed(b)},c.prototype.fromRed=function(){return a(this.red,"fromRed works only with numbers in reduction context"),this.red.convertFrom(this)},c.prototype._forceRed=function(b){return this.red=b,this},c.prototype.forceRed=function(b){return a(!this.red,"Already a number in reduction context"),this._forceRed(b)},c.prototype.redAdd=function(b){return a(this.red,"redAdd works only with red numbers"),this.red.add(this,b)},c.prototype.redIAdd=function(b){return a(this.red,"redIAdd works only with red numbers"),this.red.iadd(this,b)},c.prototype.redSub=function(b){return a(this.red,"redSub works only with red numbers"),this.red.sub(this,b)},c.prototype.redISub=function(b){return a(this.red,"redISub works only with red numbers"),this.red.isub(this,b)},c.prototype.redShl=function(b){return a(this.red,"redShl works only with red numbers"),this.red.shl(this,b)},c.prototype.redMul=function(b){return a(this.red,"redMul works only with red numbers"),this.red._verify2(this,b),this.red.mul(this,b)},c.prototype.redIMul=function(b){return a(this.red,"redMul works only with red numbers"),this.red._verify2(this,b),this.red.imul(this,b)},c.prototype.redSqr=function(){return a(this.red,"redSqr works only with red numbers"),this.red._verify1(this),this.red.sqr(this)},c.prototype.redISqr=function(){return a(this.red,"redISqr works only with red numbers"),this.red._verify1(this),this.red.isqr(this)},c.prototype.redSqrt=function(){return a(this.red,"redSqrt works only with red numbers"),this.red._verify1(this),this.red.sqrt(this)},c.prototype.redInvm=function(){return a(this.red,"redInvm works only with red numbers"),this.red._verify1(this),this.red.invm(this)},c.prototype.redNeg=function(){return a(this.red,"redNeg works only with red numbers"),this.red._verify1(this),this.red.neg(this)},c.prototype.redPow=function(b){return a(this.red&&!b.red,"redPow(normalNum)"),this.red._verify1(this),this.red.pow(this,b)};var hr={k256:null,p224:null,p192:null,p25519:null};function _r(_,b){this.name=_,this.p=new c(b,16),this.n=this.p.bitLength(),this.k=new c(1).iushln(this.n).isub(this.p),this.tmp=this._tmp()}_r.prototype._tmp=function(){var b=new c(null);return b.words=new Array(Math.ceil(this.n/13)),b},_r.prototype.ireduce=function(b){var lt=b,Rt;do this.split(lt,this.tmp),lt=this.imulK(lt),lt=lt.iadd(this.tmp),Rt=lt.bitLength();while(Rt>this.n);var kt=Rt<this.n?-1:lt.ucmp(this.p);return kt===0?(lt.words[0]=0,lt.length=1):kt>0?lt.isub(this.p):lt.strip!==void 0?lt.strip():lt._strip(),lt},_r.prototype.split=function(b,lt){b.iushrn(this.n,0,lt)},_r.prototype.imulK=function(b){return b.imul(this.k)};function dr(){_r.call(this,"k256","ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff fffffffe fffffc2f")}d(dr,_r),dr.prototype.split=function(b,lt){for(var Rt=4194303,kt=Math.min(b.length,9),Ft=0;Ft<kt;Ft++)lt.words[Ft]=b.words[Ft];if(lt.length=kt,b.length<=9){b.words[0]=0,b.length=1;return}var xt=b.words[9];for(lt.words[lt.length++]=xt&Rt,Ft=10;Ft<b.length;Ft++){var g=b.words[Ft]|0;b.words[Ft-10]=(g&Rt)<<4|xt>>>22,xt=g}xt>>>=22,b.words[Ft-10]=xt,xt===0&&b.length>10?b.length-=10:b.length-=9},dr.prototype.imulK=function(b){b.words[b.length]=0,b.words[b.length+1]=0,b.length+=2;for(var lt=0,Rt=0;Rt<b.length;Rt++){var kt=b.words[Rt]|0;lt+=kt*977,b.words[Rt]=lt&67108863,lt=kt*64+(lt/67108864|0)}return b.words[b.length-1]===0&&(b.length--,b.words[b.length-1]===0&&b.length--),b};function ur(){_r.call(this,"p224","ffffffff ffffffff ffffffff ffffffff 00000000 00000000 00000001")}d(ur,_r);function lr(){_r.call(this,"p192","ffffffff ffffffff ffffffff fffffffe ffffffff ffffffff")}d(lr,_r);function gr(){_r.call(this,"25519","7fffffffffffffff ffffffffffffffff ffffffffffffffff ffffffffffffffed")}d(gr,_r),gr.prototype.imulK=function(b){for(var lt=0,Rt=0;Rt<b.length;Rt++){var kt=(b.words[Rt]|0)*19+lt,Ft=kt&67108863;kt>>>=26,b.words[Rt]=Ft,lt=kt}return lt!==0&&(b.words[b.length++]=lt),b},c._prime=function(b){if(hr[b])return hr[b];var lt;if(b==="k256")lt=new dr;else if(b==="p224")lt=new ur;else if(b==="p192")lt=new lr;else if(b==="p25519")lt=new gr;else throw new Error("Unknown prime "+b);return hr[b]=lt,lt};function Mt(_){if(typeof _=="string"){var b=c._prime(_);this.m=b.p,this.prime=b}else a(_.gtn(1),"modulus must be greater than 1"),this.m=_,this.prime=null}Mt.prototype._verify1=function(b){a(b.negative===0,"red works only with positives"),a(b.red,"red works only with red numbers")},Mt.prototype._verify2=function(b,lt){a((b.negative|lt.negative)===0,"red works only with positives"),a(b.red&&b.red===lt.red,"red works only with red numbers")},Mt.prototype.imod=function(b){return this.prime?this.prime.ireduce(b)._forceRed(this):(ct(b,b.umod(this.m)._forceRed(this)),b)},Mt.prototype.neg=function(b){return b.isZero()?b.clone():this.m.sub(b)._forceRed(this)},Mt.prototype.add=function(b,lt){this._verify2(b,lt);var Rt=b.add(lt);return Rt.cmp(this.m)>=0&&Rt.isub(this.m),Rt._forceRed(this)},Mt.prototype.iadd=function(b,lt){this._verify2(b,lt);var Rt=b.iadd(lt);return Rt.cmp(this.m)>=0&&Rt.isub(this.m),Rt},Mt.prototype.sub=function(b,lt){this._verify2(b,lt);var Rt=b.sub(lt);return Rt.cmpn(0)<0&&Rt.iadd(this.m),Rt._forceRed(this)},Mt.prototype.isub=function(b,lt){this._verify2(b,lt);var Rt=b.isub(lt);return Rt.cmpn(0)<0&&Rt.iadd(this.m),Rt},Mt.prototype.shl=function(b,lt){return this._verify1(b),this.imod(b.ushln(lt))},Mt.prototype.imul=function(b,lt){return this._verify2(b,lt),this.imod(b.imul(lt))},Mt.prototype.mul=function(b,lt){return this._verify2(b,lt),this.imod(b.mul(lt))},Mt.prototype.isqr=function(b){return this.imul(b,b.clone())},Mt.prototype.sqr=function(b){return this.mul(b,b)},Mt.prototype.sqrt=function(b){if(b.isZero())return b.clone();var lt=this.m.andln(3);if(a(lt%2===1),lt===3){var Rt=this.m.add(new c(1)).iushrn(2);return this.pow(b,Rt)}for(var kt=this.m.subn(1),Ft=0;!kt.isZero()&&kt.andln(1)===0;)Ft++,kt.iushrn(1);a(!kt.isZero());var xt=new c(1).toRed(this),g=xt.redNeg(),wt=this.m.subn(1).iushrn(1),nr=this.m.bitLength();for(nr=new c(2*nr*nr).toRed(this);this.pow(nr,wt).cmp(g)!==0;)nr.redIAdd(g);for(var or=this.pow(nr,kt),cr=this.pow(b,kt.addn(1).iushrn(1)),Rr=this.pow(b,kt),Ar=Ft;Rr.cmp(xt)!==0;){for(var pr=Rr,wr=0;pr.cmp(xt)!==0;wr++)pr=pr.redSqr();a(wr<Ar);var Tr=this.pow(or,new c(1).iushln(Ar-wr-1));cr=cr.redMul(Tr),or=Tr.redSqr(),Rr=Rr.redMul(or),Ar=wr}return cr},Mt.prototype.invm=function(b){var lt=b._invmp(this.m);return lt.negative!==0?(lt.negative=0,this.imod(lt).redNeg()):this.imod(lt)},Mt.prototype.pow=function(b,lt){if(lt.isZero())return new c(1).toRed(this);if(lt.cmpn(1)===0)return b.clone();var Rt=4,kt=new Array(1<<Rt);kt[0]=new c(1).toRed(this),kt[1]=b;for(var Ft=2;Ft<kt.length;Ft++)kt[Ft]=this.mul(kt[Ft-1],b);var xt=kt[0],g=0,wt=0,nr=lt.bitLength()%26;for(nr===0&&(nr=26),Ft=lt.length-1;Ft>=0;Ft--){for(var or=lt.words[Ft],cr=nr-1;cr>=0;cr--){var Rr=or>>cr&1;if(xt!==kt[0]&&(xt=this.sqr(xt)),Rr===0&&g===0){wt=0;continue}g<<=1,g|=Rr,wt++,!(wt!==Rt&&(Ft!==0||cr!==0))&&(xt=this.mul(xt,kt[g]),wt=0,g=0)}nr=26}return xt},Mt.prototype.convertTo=function(b){var lt=b.umod(this.m);return lt===b?lt.clone():lt},Mt.prototype.convertFrom=function(b){var lt=b.clone();return lt.red=null,lt},c.mont=function(b){return new h(b)};function h(_){Mt.call(this,_),this.shift=this.m.bitLength(),this.shift%26!==0&&(this.shift+=26-this.shift%26),this.r=new c(1).iushln(this.shift),this.r2=this.imod(this.r.sqr()),this.rinv=this.r._invmp(this.m),this.minv=this.rinv.mul(this.r).isubn(1).div(this.m),this.minv=this.minv.umod(this.r),this.minv=this.r.sub(this.minv)}d(h,Mt),h.prototype.convertTo=function(b){return this.imod(b.ushln(this.shift))},h.prototype.convertFrom=function(b){var lt=this.imod(b.mul(this.rinv));return lt.red=null,lt},h.prototype.imul=function(b,lt){if(b.isZero()||lt.isZero())return b.words[0]=0,b.length=1,b;var Rt=b.imul(lt),kt=Rt.maskn(this.shift).mul(this.minv).imaskn(this.shift).mul(this.m),Ft=Rt.isub(kt).iushrn(this.shift),xt=Ft;return Ft.cmp(this.m)>=0?xt=Ft.isub(this.m):Ft.cmpn(0)<0&&(xt=Ft.iadd(this.m)),xt._forceRed(this)},h.prototype.mul=function(b,lt){if(b.isZero()||lt.isZero())return new c(0)._forceRed(this);var Rt=b.mul(lt),kt=Rt.maskn(this.shift).mul(this.minv).imaskn(this.shift).mul(this.m),Ft=Rt.isub(kt).iushrn(this.shift),xt=Ft;return Ft.cmp(this.m)>=0?xt=Ft.isub(this.m):Ft.cmpn(0)<0&&(xt=Ft.iadd(this.m)),xt._forceRed(this)},h.prototype.invm=function(b){var lt=this.imod(b._invmp(this.m).mul(this.r2));return lt._forceRed(this)}})(s,commonjsGlobal$2)}(bn$4)),bn$4.exports}var browserifyRsa,hasRequiredBrowserifyRsa;function requireBrowserifyRsa(){if(hasRequiredBrowserifyRsa)return browserifyRsa;hasRequiredBrowserifyRsa=1;var s=requireBn$4(),e=requireBrowser$b(),o=requireSafeBuffer$1().Buffer;function a(j){var _e=j.modulus.byteLength(),pt;do pt=new s(e(_e));while(pt.cmp(j.modulus)>=0||!pt.umod(j.prime1)||!pt.umod(j.prime2));return pt}function d(j){var _e=a(j),pt=_e.toRed(s.mont(j.modulus)).redPow(new s(j.publicExponent)).fromRed();return{blinder:pt,unblinder:_e.invm(j.modulus)}}function c(j,_e){var pt=d(_e),yt=_e.modulus.byteLength(),ct=new s(j).mul(pt.blinder).umod(_e.modulus),Ct=ct.toRed(s.mont(_e.prime1)),qt=ct.toRed(s.mont(_e.prime2)),Ot=_e.coefficient,Lt=_e.prime1,Qt=_e.prime2,ir=Ct.redPow(_e.exponent1).fromRed(),er=qt.redPow(_e.exponent2).fromRed(),tr=ir.isub(er).imul(Ot).umod(Lt).imul(Qt);return er.iadd(tr).imul(pt.unblinder).umod(_e.modulus).toArrayLike(o,"be",yt)}return c.getr=a,browserifyRsa=c,browserifyRsa}var elliptic={};const version="6.6.1",require$$0={version};var utils$2={},bn$3={exports:{}};bn$3.exports;var hasRequiredBn$3;function requireBn$3(){return hasRequiredBn$3||(hasRequiredBn$3=1,function(s){(function(e,o){function a(Mt,h){if(!Mt)throw new Error(h||"Assertion failed")}function d(Mt,h){Mt.super_=h;var _=function(){};_.prototype=h.prototype,Mt.prototype=new _,Mt.prototype.constructor=Mt}function c(Mt,h,_){if(c.isBN(Mt))return Mt;this.negative=0,this.words=null,this.length=0,this.red=null,Mt!==null&&((h==="le"||h==="be")&&(_=h,h=10),this._init(Mt||0,h||10,_||"be"))}typeof e=="object"?e.exports=c:o.BN=c,c.BN=c,c.wordSize=26;var j;try{typeof window<"u"&&typeof window.Buffer<"u"?j=window.Buffer:j=require$$0$1.Buffer}catch{}c.isBN=function(h){return h instanceof c?!0:h!==null&&typeof h=="object"&&h.constructor.wordSize===c.wordSize&&Array.isArray(h.words)},c.max=function(h,_){return h.cmp(_)>0?h:_},c.min=function(h,_){return h.cmp(_)<0?h:_},c.prototype._init=function(h,_,b){if(typeof h=="number")return this._initNumber(h,_,b);if(typeof h=="object")return this._initArray(h,_,b);_==="hex"&&(_=16),a(_===(_|0)&&_>=2&&_<=36),h=h.toString().replace(/\s+/g,"");var lt=0;h[0]==="-"&&(lt++,this.negative=1),lt<h.length&&(_===16?this._parseHex(h,lt,b):(this._parseBase(h,_,lt),b==="le"&&this._initArray(this.toArray(),_,b)))},c.prototype._initNumber=function(h,_,b){h<0&&(this.negative=1,h=-h),h<67108864?(this.words=[h&67108863],this.length=1):h<4503599627370496?(this.words=[h&67108863,h/67108864&67108863],this.length=2):(a(h<9007199254740992),this.words=[h&67108863,h/67108864&67108863,1],this.length=3),b==="le"&&this._initArray(this.toArray(),_,b)},c.prototype._initArray=function(h,_,b){if(a(typeof h.length=="number"),h.length<=0)return this.words=[0],this.length=1,this;this.length=Math.ceil(h.length/3),this.words=new Array(this.length);for(var lt=0;lt<this.length;lt++)this.words[lt]=0;var Rt,kt,Ft=0;if(b==="be")for(lt=h.length-1,Rt=0;lt>=0;lt-=3)kt=h[lt]|h[lt-1]<<8|h[lt-2]<<16,this.words[Rt]|=kt<<Ft&67108863,this.words[Rt+1]=kt>>>26-Ft&67108863,Ft+=24,Ft>=26&&(Ft-=26,Rt++);else if(b==="le")for(lt=0,Rt=0;lt<h.length;lt+=3)kt=h[lt]|h[lt+1]<<8|h[lt+2]<<16,this.words[Rt]|=kt<<Ft&67108863,this.words[Rt+1]=kt>>>26-Ft&67108863,Ft+=24,Ft>=26&&(Ft-=26,Rt++);return this.strip()};function _e(Mt,h){var _=Mt.charCodeAt(h);return _>=65&&_<=70?_-55:_>=97&&_<=102?_-87:_-48&15}function pt(Mt,h,_){var b=_e(Mt,_);return _-1>=h&&(b|=_e(Mt,_-1)<<4),b}c.prototype._parseHex=function(h,_,b){this.length=Math.ceil((h.length-_)/6),this.words=new Array(this.length);for(var lt=0;lt<this.length;lt++)this.words[lt]=0;var Rt=0,kt=0,Ft;if(b==="be")for(lt=h.length-1;lt>=_;lt-=2)Ft=pt(h,_,lt)<<Rt,this.words[kt]|=Ft&67108863,Rt>=18?(Rt-=18,kt+=1,this.words[kt]|=Ft>>>26):Rt+=8;else{var xt=h.length-_;for(lt=xt%2===0?_+1:_;lt<h.length;lt+=2)Ft=pt(h,_,lt)<<Rt,this.words[kt]|=Ft&67108863,Rt>=18?(Rt-=18,kt+=1,this.words[kt]|=Ft>>>26):Rt+=8}this.strip()};function yt(Mt,h,_,b){for(var lt=0,Rt=Math.min(Mt.length,_),kt=h;kt<Rt;kt++){var Ft=Mt.charCodeAt(kt)-48;lt*=b,Ft>=49?lt+=Ft-49+10:Ft>=17?lt+=Ft-17+10:lt+=Ft}return lt}c.prototype._parseBase=function(h,_,b){this.words=[0],this.length=1;for(var lt=0,Rt=1;Rt<=67108863;Rt*=_)lt++;lt--,Rt=Rt/_|0;for(var kt=h.length-b,Ft=kt%lt,xt=Math.min(kt,kt-Ft)+b,g=0,wt=b;wt<xt;wt+=lt)g=yt(h,wt,wt+lt,_),this.imuln(Rt),this.words[0]+g<67108864?this.words[0]+=g:this._iaddn(g);if(Ft!==0){var nr=1;for(g=yt(h,wt,h.length,_),wt=0;wt<Ft;wt++)nr*=_;this.imuln(nr),this.words[0]+g<67108864?this.words[0]+=g:this._iaddn(g)}this.strip()},c.prototype.copy=function(h){h.words=new Array(this.length);for(var _=0;_<this.length;_++)h.words[_]=this.words[_];h.length=this.length,h.negative=this.negative,h.red=this.red},c.prototype.clone=function(){var h=new c(null);return this.copy(h),h},c.prototype._expand=function(h){for(;this.length<h;)this.words[this.length++]=0;return this},c.prototype.strip=function(){for(;this.length>1&&this.words[this.length-1]===0;)this.length--;return this._normSign()},c.prototype._normSign=function(){return this.length===1&&this.words[0]===0&&(this.negative=0),this},c.prototype.inspect=function(){return(this.red?"<BN-R: ":"<BN: ")+this.toString(16)+">"};var ct=["","0","00","000","0000","00000","000000","0000000","00000000","000000000","0000000000","00000000000","000000000000","0000000000000","00000000000000","000000000000000","0000000000000000","00000000000000000","000000000000000000","0000000000000000000","00000000000000000000","000000000000000000000","0000000000000000000000","00000000000000000000000","000000000000000000000000","0000000000000000000000000"],Ct=[0,0,25,16,12,11,10,9,8,8,7,7,7,7,6,6,6,6,6,6,6,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5],qt=[0,0,33554432,43046721,16777216,48828125,60466176,40353607,16777216,43046721,1e7,19487171,35831808,62748517,7529536,11390625,16777216,24137569,34012224,47045881,64e6,4084101,5153632,6436343,7962624,9765625,11881376,14348907,17210368,20511149,243e5,28629151,33554432,39135393,45435424,52521875,60466176];c.prototype.toString=function(h,_){h=h||10,_=_|0||1;var b;if(h===16||h==="hex"){b="";for(var lt=0,Rt=0,kt=0;kt<this.length;kt++){var Ft=this.words[kt],xt=((Ft<<lt|Rt)&16777215).toString(16);Rt=Ft>>>24-lt&16777215,lt+=2,lt>=26&&(lt-=26,kt--),Rt!==0||kt!==this.length-1?b=ct[6-xt.length]+xt+b:b=xt+b}for(Rt!==0&&(b=Rt.toString(16)+b);b.length%_!==0;)b="0"+b;return this.negative!==0&&(b="-"+b),b}if(h===(h|0)&&h>=2&&h<=36){var g=Ct[h],wt=qt[h];b="";var nr=this.clone();for(nr.negative=0;!nr.isZero();){var or=nr.modn(wt).toString(h);nr=nr.idivn(wt),nr.isZero()?b=or+b:b=ct[g-or.length]+or+b}for(this.isZero()&&(b="0"+b);b.length%_!==0;)b="0"+b;return this.negative!==0&&(b="-"+b),b}a(!1,"Base should be between 2 and 36")},c.prototype.toNumber=function(){var h=this.words[0];return this.length===2?h+=this.words[1]*67108864:this.length===3&&this.words[2]===1?h+=4503599627370496+this.words[1]*67108864:this.length>2&&a(!1,"Number can only safely store up to 53 bits"),this.negative!==0?-h:h},c.prototype.toJSON=function(){return this.toString(16)},c.prototype.toBuffer=function(h,_){return a(typeof j<"u"),this.toArrayLike(j,h,_)},c.prototype.toArray=function(h,_){return this.toArrayLike(Array,h,_)},c.prototype.toArrayLike=function(h,_,b){var lt=this.byteLength(),Rt=b||Math.max(1,lt);a(lt<=Rt,"byte array longer than desired length"),a(Rt>0,"Requested array length <= 0"),this.strip();var kt=_==="le",Ft=new h(Rt),xt,g,wt=this.clone();if(kt){for(g=0;!wt.isZero();g++)xt=wt.andln(255),wt.iushrn(8),Ft[g]=xt;for(;g<Rt;g++)Ft[g]=0}else{for(g=0;g<Rt-lt;g++)Ft[g]=0;for(g=0;!wt.isZero();g++)xt=wt.andln(255),wt.iushrn(8),Ft[Rt-g-1]=xt}return Ft},Math.clz32?c.prototype._countBits=function(h){return 32-Math.clz32(h)}:c.prototype._countBits=function(h){var _=h,b=0;return _>=4096&&(b+=13,_>>>=13),_>=64&&(b+=7,_>>>=7),_>=8&&(b+=4,_>>>=4),_>=2&&(b+=2,_>>>=2),b+_},c.prototype._zeroBits=function(h){if(h===0)return 26;var _=h,b=0;return _&8191||(b+=13,_>>>=13),_&127||(b+=7,_>>>=7),_&15||(b+=4,_>>>=4),_&3||(b+=2,_>>>=2),_&1||b++,b},c.prototype.bitLength=function(){var h=this.words[this.length-1],_=this._countBits(h);return(this.length-1)*26+_};function Ot(Mt){for(var h=new Array(Mt.bitLength()),_=0;_<h.length;_++){var b=_/26|0,lt=_%26;h[_]=(Mt.words[b]&1<<lt)>>>lt}return h}c.prototype.zeroBits=function(){if(this.isZero())return 0;for(var h=0,_=0;_<this.length;_++){var b=this._zeroBits(this.words[_]);if(h+=b,b!==26)break}return h},c.prototype.byteLength=function(){return Math.ceil(this.bitLength()/8)},c.prototype.toTwos=function(h){return this.negative!==0?this.abs().inotn(h).iaddn(1):this.clone()},c.prototype.fromTwos=function(h){return this.testn(h-1)?this.notn(h).iaddn(1).ineg():this.clone()},c.prototype.isNeg=function(){return this.negative!==0},c.prototype.neg=function(){return this.clone().ineg()},c.prototype.ineg=function(){return this.isZero()||(this.negative^=1),this},c.prototype.iuor=function(h){for(;this.length<h.length;)this.words[this.length++]=0;for(var _=0;_<h.length;_++)this.words[_]=this.words[_]|h.words[_];return this.strip()},c.prototype.ior=function(h){return a((this.negative|h.negative)===0),this.iuor(h)},c.prototype.or=function(h){return this.length>h.length?this.clone().ior(h):h.clone().ior(this)},c.prototype.uor=function(h){return this.length>h.length?this.clone().iuor(h):h.clone().iuor(this)},c.prototype.iuand=function(h){var _;this.length>h.length?_=h:_=this;for(var b=0;b<_.length;b++)this.words[b]=this.words[b]&h.words[b];return this.length=_.length,this.strip()},c.prototype.iand=function(h){return a((this.negative|h.negative)===0),this.iuand(h)},c.prototype.and=function(h){return this.length>h.length?this.clone().iand(h):h.clone().iand(this)},c.prototype.uand=function(h){return this.length>h.length?this.clone().iuand(h):h.clone().iuand(this)},c.prototype.iuxor=function(h){var _,b;this.length>h.length?(_=this,b=h):(_=h,b=this);for(var lt=0;lt<b.length;lt++)this.words[lt]=_.words[lt]^b.words[lt];if(this!==_)for(;lt<_.length;lt++)this.words[lt]=_.words[lt];return this.length=_.length,this.strip()},c.prototype.ixor=function(h){return a((this.negative|h.negative)===0),this.iuxor(h)},c.prototype.xor=function(h){return this.length>h.length?this.clone().ixor(h):h.clone().ixor(this)},c.prototype.uxor=function(h){return this.length>h.length?this.clone().iuxor(h):h.clone().iuxor(this)},c.prototype.inotn=function(h){a(typeof h=="number"&&h>=0);var _=Math.ceil(h/26)|0,b=h%26;this._expand(_),b>0&&_--;for(var lt=0;lt<_;lt++)this.words[lt]=~this.words[lt]&67108863;return b>0&&(this.words[lt]=~this.words[lt]&67108863>>26-b),this.strip()},c.prototype.notn=function(h){return this.clone().inotn(h)},c.prototype.setn=function(h,_){a(typeof h=="number"&&h>=0);var b=h/26|0,lt=h%26;return this._expand(b+1),_?this.words[b]=this.words[b]|1<<lt:this.words[b]=this.words[b]&~(1<<lt),this.strip()},c.prototype.iadd=function(h){var _;if(this.negative!==0&&h.negative===0)return this.negative=0,_=this.isub(h),this.negative^=1,this._normSign();if(this.negative===0&&h.negative!==0)return h.negative=0,_=this.isub(h),h.negative=1,_._normSign();var b,lt;this.length>h.length?(b=this,lt=h):(b=h,lt=this);for(var Rt=0,kt=0;kt<lt.length;kt++)_=(b.words[kt]|0)+(lt.words[kt]|0)+Rt,this.words[kt]=_&67108863,Rt=_>>>26;for(;Rt!==0&&kt<b.length;kt++)_=(b.words[kt]|0)+Rt,this.words[kt]=_&67108863,Rt=_>>>26;if(this.length=b.length,Rt!==0)this.words[this.length]=Rt,this.length++;else if(b!==this)for(;kt<b.length;kt++)this.words[kt]=b.words[kt];return this},c.prototype.add=function(h){var _;return h.negative!==0&&this.negative===0?(h.negative=0,_=this.sub(h),h.negative^=1,_):h.negative===0&&this.negative!==0?(this.negative=0,_=h.sub(this),this.negative=1,_):this.length>h.length?this.clone().iadd(h):h.clone().iadd(this)},c.prototype.isub=function(h){if(h.negative!==0){h.negative=0;var _=this.iadd(h);return h.negative=1,_._normSign()}else if(this.negative!==0)return this.negative=0,this.iadd(h),this.negative=1,this._normSign();var b=this.cmp(h);if(b===0)return this.negative=0,this.length=1,this.words[0]=0,this;var lt,Rt;b>0?(lt=this,Rt=h):(lt=h,Rt=this);for(var kt=0,Ft=0;Ft<Rt.length;Ft++)_=(lt.words[Ft]|0)-(Rt.words[Ft]|0)+kt,kt=_>>26,this.words[Ft]=_&67108863;for(;kt!==0&&Ft<lt.length;Ft++)_=(lt.words[Ft]|0)+kt,kt=_>>26,this.words[Ft]=_&67108863;if(kt===0&&Ft<lt.length&&lt!==this)for(;Ft<lt.length;Ft++)this.words[Ft]=lt.words[Ft];return this.length=Math.max(this.length,Ft),lt!==this&&(this.negative=1),this.strip()},c.prototype.sub=function(h){return this.clone().isub(h)};function Lt(Mt,h,_){_.negative=h.negative^Mt.negative;var b=Mt.length+h.length|0;_.length=b,b=b-1|0;var lt=Mt.words[0]|0,Rt=h.words[0]|0,kt=lt*Rt,Ft=kt&67108863,xt=kt/67108864|0;_.words[0]=Ft;for(var g=1;g<b;g++){for(var wt=xt>>>26,nr=xt&67108863,or=Math.min(g,h.length-1),cr=Math.max(0,g-Mt.length+1);cr<=or;cr++){var Rr=g-cr|0;lt=Mt.words[Rr]|0,Rt=h.words[cr]|0,kt=lt*Rt+nr,wt+=kt/67108864|0,nr=kt&67108863}_.words[g]=nr|0,xt=wt|0}return xt!==0?_.words[g]=xt|0:_.length--,_.strip()}var Qt=function(h,_,b){var lt=h.words,Rt=_.words,kt=b.words,Ft=0,xt,g,wt,nr=lt[0]|0,or=nr&8191,cr=nr>>>13,Rr=lt[1]|0,Ar=Rr&8191,pr=Rr>>>13,wr=lt[2]|0,Tr=wr&8191,Ir=wr>>>13,Sr=lt[3]|0,br=Sr&8191,kr=Sr>>>13,Qr=lt[4]|0,qr=Qr&8191,$r=Qr>>>13,gn=lt[5]|0,Lr=gn&8191,Dr=gn>>>13,En=lt[6]|0,Fr=En&8191,zr=En>>>13,yn=lt[7]|0,Nr=yn&8191,Wr=yn>>>13,xn=lt[8]|0,Or=xn&8191,Yr=xn>>>13,Pn=lt[9]|0,xr=Pn&8191,fr=Pn>>>13,yr=Rt[0]|0,Mr=yr&8191,Pr=yr>>>13,Vr=Rt[1]|0,Br=Vr&8191,jr=Vr>>>13,An=Rt[2]|0,Ur=An&8191,Gr=An>>>13,wn=Rt[3]|0,Xr=wn&8191,hn=wn>>>13,In=Rt[4]|0,Jr=In&8191,fn=In>>>13,kn=Rt[5]|0,Kr=kn&8191,dn=kn>>>13,Rn=Rt[6]|0,Zr=Rn&8191,un=Rn>>>13,Mn=Rt[7]|0,rn=Mn&8191,pn=Mn>>>13,Cn=Rt[8]|0,ln=Cn&8191,vn=Cn>>>13,Bn=Rt[9]|0,an=Bn&8191,mn=Bn>>>13;b.negative=h.negative^_.negative,b.length=19,xt=Math.imul(or,Mr),g=Math.imul(or,Pr),g=g+Math.imul(cr,Mr)|0,wt=Math.imul(cr,Pr);var Sn=(Ft+xt|0)+((g&8191)<<13)|0;Ft=(wt+(g>>>13)|0)+(Sn>>>26)|0,Sn&=67108863,xt=Math.imul(Ar,Mr),g=Math.imul(Ar,Pr),g=g+Math.imul(pr,Mr)|0,wt=Math.imul(pr,Pr),xt=xt+Math.imul(or,Br)|0,g=g+Math.imul(or,jr)|0,g=g+Math.imul(cr,Br)|0,wt=wt+Math.imul(cr,jr)|0;var Tn=(Ft+xt|0)+((g&8191)<<13)|0;Ft=(wt+(g>>>13)|0)+(Tn>>>26)|0,Tn&=67108863,xt=Math.imul(Tr,Mr),g=Math.imul(Tr,Pr),g=g+Math.imul(Ir,Mr)|0,wt=Math.imul(Ir,Pr),xt=xt+Math.imul(Ar,Br)|0,g=g+Math.imul(Ar,jr)|0,g=g+Math.imul(pr,Br)|0,wt=wt+Math.imul(pr,jr)|0,xt=xt+Math.imul(or,Ur)|0,g=g+Math.imul(or,Gr)|0,g=g+Math.imul(cr,Ur)|0,wt=wt+Math.imul(cr,Gr)|0;var Un=(Ft+xt|0)+((g&8191)<<13)|0;Ft=(wt+(g>>>13)|0)+(Un>>>26)|0,Un&=67108863,xt=Math.imul(br,Mr),g=Math.imul(br,Pr),g=g+Math.imul(kr,Mr)|0,wt=Math.imul(kr,Pr),xt=xt+Math.imul(Tr,Br)|0,g=g+Math.imul(Tr,jr)|0,g=g+Math.imul(Ir,Br)|0,wt=wt+Math.imul(Ir,jr)|0,xt=xt+Math.imul(Ar,Ur)|0,g=g+Math.imul(Ar,Gr)|0,g=g+Math.imul(pr,Ur)|0,wt=wt+Math.imul(pr,Gr)|0,xt=xt+Math.imul(or,Xr)|0,g=g+Math.imul(or,hn)|0,g=g+Math.imul(cr,Xr)|0,wt=wt+Math.imul(cr,hn)|0;var jn=(Ft+xt|0)+((g&8191)<<13)|0;Ft=(wt+(g>>>13)|0)+(jn>>>26)|0,jn&=67108863,xt=Math.imul(qr,Mr),g=Math.imul(qr,Pr),g=g+Math.imul($r,Mr)|0,wt=Math.imul($r,Pr),xt=xt+Math.imul(br,Br)|0,g=g+Math.imul(br,jr)|0,g=g+Math.imul(kr,Br)|0,wt=wt+Math.imul(kr,jr)|0,xt=xt+Math.imul(Tr,Ur)|0,g=g+Math.imul(Tr,Gr)|0,g=g+Math.imul(Ir,Ur)|0,wt=wt+Math.imul(Ir,Gr)|0,xt=xt+Math.imul(Ar,Xr)|0,g=g+Math.imul(Ar,hn)|0,g=g+Math.imul(pr,Xr)|0,wt=wt+Math.imul(pr,hn)|0,xt=xt+Math.imul(or,Jr)|0,g=g+Math.imul(or,fn)|0,g=g+Math.imul(cr,Jr)|0,wt=wt+Math.imul(cr,fn)|0;var Vn=(Ft+xt|0)+((g&8191)<<13)|0;Ft=(wt+(g>>>13)|0)+(Vn>>>26)|0,Vn&=67108863,xt=Math.imul(Lr,Mr),g=Math.imul(Lr,Pr),g=g+Math.imul(Dr,Mr)|0,wt=Math.imul(Dr,Pr),xt=xt+Math.imul(qr,Br)|0,g=g+Math.imul(qr,jr)|0,g=g+Math.imul($r,Br)|0,wt=wt+Math.imul($r,jr)|0,xt=xt+Math.imul(br,Ur)|0,g=g+Math.imul(br,Gr)|0,g=g+Math.imul(kr,Ur)|0,wt=wt+Math.imul(kr,Gr)|0,xt=xt+Math.imul(Tr,Xr)|0,g=g+Math.imul(Tr,hn)|0,g=g+Math.imul(Ir,Xr)|0,wt=wt+Math.imul(Ir,hn)|0,xt=xt+Math.imul(Ar,Jr)|0,g=g+Math.imul(Ar,fn)|0,g=g+Math.imul(pr,Jr)|0,wt=wt+Math.imul(pr,fn)|0,xt=xt+Math.imul(or,Kr)|0,g=g+Math.imul(or,dn)|0,g=g+Math.imul(cr,Kr)|0,wt=wt+Math.imul(cr,dn)|0;var Nn=(Ft+xt|0)+((g&8191)<<13)|0;Ft=(wt+(g>>>13)|0)+(Nn>>>26)|0,Nn&=67108863,xt=Math.imul(Fr,Mr),g=Math.imul(Fr,Pr),g=g+Math.imul(zr,Mr)|0,wt=Math.imul(zr,Pr),xt=xt+Math.imul(Lr,Br)|0,g=g+Math.imul(Lr,jr)|0,g=g+Math.imul(Dr,Br)|0,wt=wt+Math.imul(Dr,jr)|0,xt=xt+Math.imul(qr,Ur)|0,g=g+Math.imul(qr,Gr)|0,g=g+Math.imul($r,Ur)|0,wt=wt+Math.imul($r,Gr)|0,xt=xt+Math.imul(br,Xr)|0,g=g+Math.imul(br,hn)|0,g=g+Math.imul(kr,Xr)|0,wt=wt+Math.imul(kr,hn)|0,xt=xt+Math.imul(Tr,Jr)|0,g=g+Math.imul(Tr,fn)|0,g=g+Math.imul(Ir,Jr)|0,wt=wt+Math.imul(Ir,fn)|0,xt=xt+Math.imul(Ar,Kr)|0,g=g+Math.imul(Ar,dn)|0,g=g+Math.imul(pr,Kr)|0,wt=wt+Math.imul(pr,dn)|0,xt=xt+Math.imul(or,Zr)|0,g=g+Math.imul(or,un)|0,g=g+Math.imul(cr,Zr)|0,wt=wt+Math.imul(cr,un)|0;var zn=(Ft+xt|0)+((g&8191)<<13)|0;Ft=(wt+(g>>>13)|0)+(zn>>>26)|0,zn&=67108863,xt=Math.imul(Nr,Mr),g=Math.imul(Nr,Pr),g=g+Math.imul(Wr,Mr)|0,wt=Math.imul(Wr,Pr),xt=xt+Math.imul(Fr,Br)|0,g=g+Math.imul(Fr,jr)|0,g=g+Math.imul(zr,Br)|0,wt=wt+Math.imul(zr,jr)|0,xt=xt+Math.imul(Lr,Ur)|0,g=g+Math.imul(Lr,Gr)|0,g=g+Math.imul(Dr,Ur)|0,wt=wt+Math.imul(Dr,Gr)|0,xt=xt+Math.imul(qr,Xr)|0,g=g+Math.imul(qr,hn)|0,g=g+Math.imul($r,Xr)|0,wt=wt+Math.imul($r,hn)|0,xt=xt+Math.imul(br,Jr)|0,g=g+Math.imul(br,fn)|0,g=g+Math.imul(kr,Jr)|0,wt=wt+Math.imul(kr,fn)|0,xt=xt+Math.imul(Tr,Kr)|0,g=g+Math.imul(Tr,dn)|0,g=g+Math.imul(Ir,Kr)|0,wt=wt+Math.imul(Ir,dn)|0,xt=xt+Math.imul(Ar,Zr)|0,g=g+Math.imul(Ar,un)|0,g=g+Math.imul(pr,Zr)|0,wt=wt+Math.imul(pr,un)|0,xt=xt+Math.imul(or,rn)|0,g=g+Math.imul(or,pn)|0,g=g+Math.imul(cr,rn)|0,wt=wt+Math.imul(cr,pn)|0;var Hn=(Ft+xt|0)+((g&8191)<<13)|0;Ft=(wt+(g>>>13)|0)+(Hn>>>26)|0,Hn&=67108863,xt=Math.imul(Or,Mr),g=Math.imul(Or,Pr),g=g+Math.imul(Yr,Mr)|0,wt=Math.imul(Yr,Pr),xt=xt+Math.imul(Nr,Br)|0,g=g+Math.imul(Nr,jr)|0,g=g+Math.imul(Wr,Br)|0,wt=wt+Math.imul(Wr,jr)|0,xt=xt+Math.imul(Fr,Ur)|0,g=g+Math.imul(Fr,Gr)|0,g=g+Math.imul(zr,Ur)|0,wt=wt+Math.imul(zr,Gr)|0,xt=xt+Math.imul(Lr,Xr)|0,g=g+Math.imul(Lr,hn)|0,g=g+Math.imul(Dr,Xr)|0,wt=wt+Math.imul(Dr,hn)|0,xt=xt+Math.imul(qr,Jr)|0,g=g+Math.imul(qr,fn)|0,g=g+Math.imul($r,Jr)|0,wt=wt+Math.imul($r,fn)|0,xt=xt+Math.imul(br,Kr)|0,g=g+Math.imul(br,dn)|0,g=g+Math.imul(kr,Kr)|0,wt=wt+Math.imul(kr,dn)|0,xt=xt+Math.imul(Tr,Zr)|0,g=g+Math.imul(Tr,un)|0,g=g+Math.imul(Ir,Zr)|0,wt=wt+Math.imul(Ir,un)|0,xt=xt+Math.imul(Ar,rn)|0,g=g+Math.imul(Ar,pn)|0,g=g+Math.imul(pr,rn)|0,wt=wt+Math.imul(pr,pn)|0,xt=xt+Math.imul(or,ln)|0,g=g+Math.imul(or,vn)|0,g=g+Math.imul(cr,ln)|0,wt=wt+Math.imul(cr,vn)|0;var Xn=(Ft+xt|0)+((g&8191)<<13)|0;Ft=(wt+(g>>>13)|0)+(Xn>>>26)|0,Xn&=67108863,xt=Math.imul(xr,Mr),g=Math.imul(xr,Pr),g=g+Math.imul(fr,Mr)|0,wt=Math.imul(fr,Pr),xt=xt+Math.imul(Or,Br)|0,g=g+Math.imul(Or,jr)|0,g=g+Math.imul(Yr,Br)|0,wt=wt+Math.imul(Yr,jr)|0,xt=xt+Math.imul(Nr,Ur)|0,g=g+Math.imul(Nr,Gr)|0,g=g+Math.imul(Wr,Ur)|0,wt=wt+Math.imul(Wr,Gr)|0,xt=xt+Math.imul(Fr,Xr)|0,g=g+Math.imul(Fr,hn)|0,g=g+Math.imul(zr,Xr)|0,wt=wt+Math.imul(zr,hn)|0,xt=xt+Math.imul(Lr,Jr)|0,g=g+Math.imul(Lr,fn)|0,g=g+Math.imul(Dr,Jr)|0,wt=wt+Math.imul(Dr,fn)|0,xt=xt+Math.imul(qr,Kr)|0,g=g+Math.imul(qr,dn)|0,g=g+Math.imul($r,Kr)|0,wt=wt+Math.imul($r,dn)|0,xt=xt+Math.imul(br,Zr)|0,g=g+Math.imul(br,un)|0,g=g+Math.imul(kr,Zr)|0,wt=wt+Math.imul(kr,un)|0,xt=xt+Math.imul(Tr,rn)|0,g=g+Math.imul(Tr,pn)|0,g=g+Math.imul(Ir,rn)|0,wt=wt+Math.imul(Ir,pn)|0,xt=xt+Math.imul(Ar,ln)|0,g=g+Math.imul(Ar,vn)|0,g=g+Math.imul(pr,ln)|0,wt=wt+Math.imul(pr,vn)|0,xt=xt+Math.imul(or,an)|0,g=g+Math.imul(or,mn)|0,g=g+Math.imul(cr,an)|0,wt=wt+Math.imul(cr,mn)|0;var qn=(Ft+xt|0)+((g&8191)<<13)|0;Ft=(wt+(g>>>13)|0)+(qn>>>26)|0,qn&=67108863,xt=Math.imul(xr,Br),g=Math.imul(xr,jr),g=g+Math.imul(fr,Br)|0,wt=Math.imul(fr,jr),xt=xt+Math.imul(Or,Ur)|0,g=g+Math.imul(Or,Gr)|0,g=g+Math.imul(Yr,Ur)|0,wt=wt+Math.imul(Yr,Gr)|0,xt=xt+Math.imul(Nr,Xr)|0,g=g+Math.imul(Nr,hn)|0,g=g+Math.imul(Wr,Xr)|0,wt=wt+Math.imul(Wr,hn)|0,xt=xt+Math.imul(Fr,Jr)|0,g=g+Math.imul(Fr,fn)|0,g=g+Math.imul(zr,Jr)|0,wt=wt+Math.imul(zr,fn)|0,xt=xt+Math.imul(Lr,Kr)|0,g=g+Math.imul(Lr,dn)|0,g=g+Math.imul(Dr,Kr)|0,wt=wt+Math.imul(Dr,dn)|0,xt=xt+Math.imul(qr,Zr)|0,g=g+Math.imul(qr,un)|0,g=g+Math.imul($r,Zr)|0,wt=wt+Math.imul($r,un)|0,xt=xt+Math.imul(br,rn)|0,g=g+Math.imul(br,pn)|0,g=g+Math.imul(kr,rn)|0,wt=wt+Math.imul(kr,pn)|0,xt=xt+Math.imul(Tr,ln)|0,g=g+Math.imul(Tr,vn)|0,g=g+Math.imul(Ir,ln)|0,wt=wt+Math.imul(Ir,vn)|0,xt=xt+Math.imul(Ar,an)|0,g=g+Math.imul(Ar,mn)|0,g=g+Math.imul(pr,an)|0,wt=wt+Math.imul(pr,mn)|0;var Wn=(Ft+xt|0)+((g&8191)<<13)|0;Ft=(wt+(g>>>13)|0)+(Wn>>>26)|0,Wn&=67108863,xt=Math.imul(xr,Ur),g=Math.imul(xr,Gr),g=g+Math.imul(fr,Ur)|0,wt=Math.imul(fr,Gr),xt=xt+Math.imul(Or,Xr)|0,g=g+Math.imul(Or,hn)|0,g=g+Math.imul(Yr,Xr)|0,wt=wt+Math.imul(Yr,hn)|0,xt=xt+Math.imul(Nr,Jr)|0,g=g+Math.imul(Nr,fn)|0,g=g+Math.imul(Wr,Jr)|0,wt=wt+Math.imul(Wr,fn)|0,xt=xt+Math.imul(Fr,Kr)|0,g=g+Math.imul(Fr,dn)|0,g=g+Math.imul(zr,Kr)|0,wt=wt+Math.imul(zr,dn)|0,xt=xt+Math.imul(Lr,Zr)|0,g=g+Math.imul(Lr,un)|0,g=g+Math.imul(Dr,Zr)|0,wt=wt+Math.imul(Dr,un)|0,xt=xt+Math.imul(qr,rn)|0,g=g+Math.imul(qr,pn)|0,g=g+Math.imul($r,rn)|0,wt=wt+Math.imul($r,pn)|0,xt=xt+Math.imul(br,ln)|0,g=g+Math.imul(br,vn)|0,g=g+Math.imul(kr,ln)|0,wt=wt+Math.imul(kr,vn)|0,xt=xt+Math.imul(Tr,an)|0,g=g+Math.imul(Tr,mn)|0,g=g+Math.imul(Ir,an)|0,wt=wt+Math.imul(Ir,mn)|0;var On=(Ft+xt|0)+((g&8191)<<13)|0;Ft=(wt+(g>>>13)|0)+(On>>>26)|0,On&=67108863,xt=Math.imul(xr,Xr),g=Math.imul(xr,hn),g=g+Math.imul(fr,Xr)|0,wt=Math.imul(fr,hn),xt=xt+Math.imul(Or,Jr)|0,g=g+Math.imul(Or,fn)|0,g=g+Math.imul(Yr,Jr)|0,wt=wt+Math.imul(Yr,fn)|0,xt=xt+Math.imul(Nr,Kr)|0,g=g+Math.imul(Nr,dn)|0,g=g+Math.imul(Wr,Kr)|0,wt=wt+Math.imul(Wr,dn)|0,xt=xt+Math.imul(Fr,Zr)|0,g=g+Math.imul(Fr,un)|0,g=g+Math.imul(zr,Zr)|0,wt=wt+Math.imul(zr,un)|0,xt=xt+Math.imul(Lr,rn)|0,g=g+Math.imul(Lr,pn)|0,g=g+Math.imul(Dr,rn)|0,wt=wt+Math.imul(Dr,pn)|0,xt=xt+Math.imul(qr,ln)|0,g=g+Math.imul(qr,vn)|0,g=g+Math.imul($r,ln)|0,wt=wt+Math.imul($r,vn)|0,xt=xt+Math.imul(br,an)|0,g=g+Math.imul(br,mn)|0,g=g+Math.imul(kr,an)|0,wt=wt+Math.imul(kr,mn)|0;var $n=(Ft+xt|0)+((g&8191)<<13)|0;Ft=(wt+(g>>>13)|0)+($n>>>26)|0,$n&=67108863,xt=Math.imul(xr,Jr),g=Math.imul(xr,fn),g=g+Math.imul(fr,Jr)|0,wt=Math.imul(fr,fn),xt=xt+Math.imul(Or,Kr)|0,g=g+Math.imul(Or,dn)|0,g=g+Math.imul(Yr,Kr)|0,wt=wt+Math.imul(Yr,dn)|0,xt=xt+Math.imul(Nr,Zr)|0,g=g+Math.imul(Nr,un)|0,g=g+Math.imul(Wr,Zr)|0,wt=wt+Math.imul(Wr,un)|0,xt=xt+Math.imul(Fr,rn)|0,g=g+Math.imul(Fr,pn)|0,g=g+Math.imul(zr,rn)|0,wt=wt+Math.imul(zr,pn)|0,xt=xt+Math.imul(Lr,ln)|0,g=g+Math.imul(Lr,vn)|0,g=g+Math.imul(Dr,ln)|0,wt=wt+Math.imul(Dr,vn)|0,xt=xt+Math.imul(qr,an)|0,g=g+Math.imul(qr,mn)|0,g=g+Math.imul($r,an)|0,wt=wt+Math.imul($r,mn)|0;var Dn=(Ft+xt|0)+((g&8191)<<13)|0;Ft=(wt+(g>>>13)|0)+(Dn>>>26)|0,Dn&=67108863,xt=Math.imul(xr,Kr),g=Math.imul(xr,dn),g=g+Math.imul(fr,Kr)|0,wt=Math.imul(fr,dn),xt=xt+Math.imul(Or,Zr)|0,g=g+Math.imul(Or,un)|0,g=g+Math.imul(Yr,Zr)|0,wt=wt+Math.imul(Yr,un)|0,xt=xt+Math.imul(Nr,rn)|0,g=g+Math.imul(Nr,pn)|0,g=g+Math.imul(Wr,rn)|0,wt=wt+Math.imul(Wr,pn)|0,xt=xt+Math.imul(Fr,ln)|0,g=g+Math.imul(Fr,vn)|0,g=g+Math.imul(zr,ln)|0,wt=wt+Math.imul(zr,vn)|0,xt=xt+Math.imul(Lr,an)|0,g=g+Math.imul(Lr,mn)|0,g=g+Math.imul(Dr,an)|0,wt=wt+Math.imul(Dr,mn)|0;var Ln=(Ft+xt|0)+((g&8191)<<13)|0;Ft=(wt+(g>>>13)|0)+(Ln>>>26)|0,Ln&=67108863,xt=Math.imul(xr,Zr),g=Math.imul(xr,un),g=g+Math.imul(fr,Zr)|0,wt=Math.imul(fr,un),xt=xt+Math.imul(Or,rn)|0,g=g+Math.imul(Or,pn)|0,g=g+Math.imul(Yr,rn)|0,wt=wt+Math.imul(Yr,pn)|0,xt=xt+Math.imul(Nr,ln)|0,g=g+Math.imul(Nr,vn)|0,g=g+Math.imul(Wr,ln)|0,wt=wt+Math.imul(Wr,vn)|0,xt=xt+Math.imul(Fr,an)|0,g=g+Math.imul(Fr,mn)|0,g=g+Math.imul(zr,an)|0,wt=wt+Math.imul(zr,mn)|0;var Zn=(Ft+xt|0)+((g&8191)<<13)|0;Ft=(wt+(g>>>13)|0)+(Zn>>>26)|0,Zn&=67108863,xt=Math.imul(xr,rn),g=Math.imul(xr,pn),g=g+Math.imul(fr,rn)|0,wt=Math.imul(fr,pn),xt=xt+Math.imul(Or,ln)|0,g=g+Math.imul(Or,vn)|0,g=g+Math.imul(Yr,ln)|0,wt=wt+Math.imul(Yr,vn)|0,xt=xt+Math.imul(Nr,an)|0,g=g+Math.imul(Nr,mn)|0,g=g+Math.imul(Wr,an)|0,wt=wt+Math.imul(Wr,mn)|0;var Gn=(Ft+xt|0)+((g&8191)<<13)|0;Ft=(wt+(g>>>13)|0)+(Gn>>>26)|0,Gn&=67108863,xt=Math.imul(xr,ln),g=Math.imul(xr,vn),g=g+Math.imul(fr,ln)|0,wt=Math.imul(fr,vn),xt=xt+Math.imul(Or,an)|0,g=g+Math.imul(Or,mn)|0,g=g+Math.imul(Yr,an)|0,wt=wt+Math.imul(Yr,mn)|0;var Kn=(Ft+xt|0)+((g&8191)<<13)|0;Ft=(wt+(g>>>13)|0)+(Kn>>>26)|0,Kn&=67108863,xt=Math.imul(xr,an),g=Math.imul(xr,mn),g=g+Math.imul(fr,an)|0,wt=Math.imul(fr,mn);var Qn=(Ft+xt|0)+((g&8191)<<13)|0;return Ft=(wt+(g>>>13)|0)+(Qn>>>26)|0,Qn&=67108863,kt[0]=Sn,kt[1]=Tn,kt[2]=Un,kt[3]=jn,kt[4]=Vn,kt[5]=Nn,kt[6]=zn,kt[7]=Hn,kt[8]=Xn,kt[9]=qn,kt[10]=Wn,kt[11]=On,kt[12]=$n,kt[13]=Dn,kt[14]=Ln,kt[15]=Zn,kt[16]=Gn,kt[17]=Kn,kt[18]=Qn,Ft!==0&&(kt[19]=Ft,b.length++),b};Math.imul||(Qt=Lt);function ir(Mt,h,_){_.negative=h.negative^Mt.negative,_.length=Mt.length+h.length;for(var b=0,lt=0,Rt=0;Rt<_.length-1;Rt++){var kt=lt;lt=0;for(var Ft=b&67108863,xt=Math.min(Rt,h.length-1),g=Math.max(0,Rt-Mt.length+1);g<=xt;g++){var wt=Rt-g,nr=Mt.words[wt]|0,or=h.words[g]|0,cr=nr*or,Rr=cr&67108863;kt=kt+(cr/67108864|0)|0,Rr=Rr+Ft|0,Ft=Rr&67108863,kt=kt+(Rr>>>26)|0,lt+=kt>>>26,kt&=67108863}_.words[Rt]=Ft,b=kt,kt=lt}return b!==0?_.words[Rt]=b:_.length--,_.strip()}function er(Mt,h,_){var b=new tr;return b.mulp(Mt,h,_)}c.prototype.mulTo=function(h,_){var b,lt=this.length+h.length;return this.length===10&&h.length===10?b=Qt(this,h,_):lt<63?b=Lt(this,h,_):lt<1024?b=ir(this,h,_):b=er(this,h,_),b};function tr(Mt,h){this.x=Mt,this.y=h}tr.prototype.makeRBT=function(h){for(var _=new Array(h),b=c.prototype._countBits(h)-1,lt=0;lt<h;lt++)_[lt]=this.revBin(lt,b,h);return _},tr.prototype.revBin=function(h,_,b){if(h===0||h===b-1)return h;for(var lt=0,Rt=0;Rt<_;Rt++)lt|=(h&1)<<_-Rt-1,h>>=1;return lt},tr.prototype.permute=function(h,_,b,lt,Rt,kt){for(var Ft=0;Ft<kt;Ft++)lt[Ft]=_[h[Ft]],Rt[Ft]=b[h[Ft]]},tr.prototype.transform=function(h,_,b,lt,Rt,kt){this.permute(kt,h,_,b,lt,Rt);for(var Ft=1;Ft<Rt;Ft<<=1)for(var xt=Ft<<1,g=Math.cos(2*Math.PI/xt),wt=Math.sin(2*Math.PI/xt),nr=0;nr<Rt;nr+=xt)for(var or=g,cr=wt,Rr=0;Rr<Ft;Rr++){var Ar=b[nr+Rr],pr=lt[nr+Rr],wr=b[nr+Rr+Ft],Tr=lt[nr+Rr+Ft],Ir=or*wr-cr*Tr;Tr=or*Tr+cr*wr,wr=Ir,b[nr+Rr]=Ar+wr,lt[nr+Rr]=pr+Tr,b[nr+Rr+Ft]=Ar-wr,lt[nr+Rr+Ft]=pr-Tr,Rr!==xt&&(Ir=g*or-wt*cr,cr=g*cr+wt*or,or=Ir)}},tr.prototype.guessLen13b=function(h,_){var b=Math.max(_,h)|1,lt=b&1,Rt=0;for(b=b/2|0;b;b=b>>>1)Rt++;return 1<<Rt+1+lt},tr.prototype.conjugate=function(h,_,b){if(!(b<=1))for(var lt=0;lt<b/2;lt++){var Rt=h[lt];h[lt]=h[b-lt-1],h[b-lt-1]=Rt,Rt=_[lt],_[lt]=-_[b-lt-1],_[b-lt-1]=-Rt}},tr.prototype.normalize13b=function(h,_){for(var b=0,lt=0;lt<_/2;lt++){var Rt=Math.round(h[2*lt+1]/_)*8192+Math.round(h[2*lt]/_)+b;h[lt]=Rt&67108863,Rt<67108864?b=0:b=Rt/67108864|0}return h},tr.prototype.convert13b=function(h,_,b,lt){for(var Rt=0,kt=0;kt<_;kt++)Rt=Rt+(h[kt]|0),b[2*kt]=Rt&8191,Rt=Rt>>>13,b[2*kt+1]=Rt&8191,Rt=Rt>>>13;for(kt=2*_;kt<lt;++kt)b[kt]=0;a(Rt===0),a((Rt&-8192)===0)},tr.prototype.stub=function(h){for(var _=new Array(h),b=0;b<h;b++)_[b]=0;return _},tr.prototype.mulp=function(h,_,b){var lt=2*this.guessLen13b(h.length,_.length),Rt=this.makeRBT(lt),kt=this.stub(lt),Ft=new Array(lt),xt=new Array(lt),g=new Array(lt),wt=new Array(lt),nr=new Array(lt),or=new Array(lt),cr=b.words;cr.length=lt,this.convert13b(h.words,h.length,Ft,lt),this.convert13b(_.words,_.length,wt,lt),this.transform(Ft,kt,xt,g,lt,Rt),this.transform(wt,kt,nr,or,lt,Rt);for(var Rr=0;Rr<lt;Rr++){var Ar=xt[Rr]*nr[Rr]-g[Rr]*or[Rr];g[Rr]=xt[Rr]*or[Rr]+g[Rr]*nr[Rr],xt[Rr]=Ar}return this.conjugate(xt,g,lt),this.transform(xt,g,cr,kt,lt,Rt),this.conjugate(cr,kt,lt),this.normalize13b(cr,lt),b.negative=h.negative^_.negative,b.length=h.length+_.length,b.strip()},c.prototype.mul=function(h){var _=new c(null);return _.words=new Array(this.length+h.length),this.mulTo(h,_)},c.prototype.mulf=function(h){var _=new c(null);return _.words=new Array(this.length+h.length),er(this,h,_)},c.prototype.imul=function(h){return this.clone().mulTo(h,this)},c.prototype.imuln=function(h){a(typeof h=="number"),a(h<67108864);for(var _=0,b=0;b<this.length;b++){var lt=(this.words[b]|0)*h,Rt=(lt&67108863)+(_&67108863);_>>=26,_+=lt/67108864|0,_+=Rt>>>26,this.words[b]=Rt&67108863}return _!==0&&(this.words[b]=_,this.length++),this.length=h===0?1:this.length,this},c.prototype.muln=function(h){return this.clone().imuln(h)},c.prototype.sqr=function(){return this.mul(this)},c.prototype.isqr=function(){return this.imul(this.clone())},c.prototype.pow=function(h){var _=Ot(h);if(_.length===0)return new c(1);for(var b=this,lt=0;lt<_.length&&_[lt]===0;lt++,b=b.sqr());if(++lt<_.length)for(var Rt=b.sqr();lt<_.length;lt++,Rt=Rt.sqr())_[lt]!==0&&(b=b.mul(Rt));return b},c.prototype.iushln=function(h){a(typeof h=="number"&&h>=0);var _=h%26,b=(h-_)/26,lt=67108863>>>26-_<<26-_,Rt;if(_!==0){var kt=0;for(Rt=0;Rt<this.length;Rt++){var Ft=this.words[Rt]&lt,xt=(this.words[Rt]|0)-Ft<<_;this.words[Rt]=xt|kt,kt=Ft>>>26-_}kt&&(this.words[Rt]=kt,this.length++)}if(b!==0){for(Rt=this.length-1;Rt>=0;Rt--)this.words[Rt+b]=this.words[Rt];for(Rt=0;Rt<b;Rt++)this.words[Rt]=0;this.length+=b}return this.strip()},c.prototype.ishln=function(h){return a(this.negative===0),this.iushln(h)},c.prototype.iushrn=function(h,_,b){a(typeof h=="number"&&h>=0);var lt;_?lt=(_-_%26)/26:lt=0;var Rt=h%26,kt=Math.min((h-Rt)/26,this.length),Ft=67108863^67108863>>>Rt<<Rt,xt=b;if(lt-=kt,lt=Math.max(0,lt),xt){for(var g=0;g<kt;g++)xt.words[g]=this.words[g];xt.length=kt}if(kt!==0)if(this.length>kt)for(this.length-=kt,g=0;g<this.length;g++)this.words[g]=this.words[g+kt];else this.words[0]=0,this.length=1;var wt=0;for(g=this.length-1;g>=0&&(wt!==0||g>=lt);g--){var nr=this.words[g]|0;this.words[g]=wt<<26-Rt|nr>>>Rt,wt=nr&Ft}return xt&&wt!==0&&(xt.words[xt.length++]=wt),this.length===0&&(this.words[0]=0,this.length=1),this.strip()},c.prototype.ishrn=function(h,_,b){return a(this.negative===0),this.iushrn(h,_,b)},c.prototype.shln=function(h){return this.clone().ishln(h)},c.prototype.ushln=function(h){return this.clone().iushln(h)},c.prototype.shrn=function(h){return this.clone().ishrn(h)},c.prototype.ushrn=function(h){return this.clone().iushrn(h)},c.prototype.testn=function(h){a(typeof h=="number"&&h>=0);var _=h%26,b=(h-_)/26,lt=1<<_;if(this.length<=b)return!1;var Rt=this.words[b];return!!(Rt&lt)},c.prototype.imaskn=function(h){a(typeof h=="number"&&h>=0);var _=h%26,b=(h-_)/26;if(a(this.negative===0,"imaskn works only with positive numbers"),this.length<=b)return this;if(_!==0&&b++,this.length=Math.min(b,this.length),_!==0){var lt=67108863^67108863>>>_<<_;this.words[this.length-1]&=lt}return this.strip()},c.prototype.maskn=function(h){return this.clone().imaskn(h)},c.prototype.iaddn=function(h){return a(typeof h=="number"),a(h<67108864),h<0?this.isubn(-h):this.negative!==0?this.length===1&&(this.words[0]|0)<h?(this.words[0]=h-(this.words[0]|0),this.negative=0,this):(this.negative=0,this.isubn(h),this.negative=1,this):this._iaddn(h)},c.prototype._iaddn=function(h){this.words[0]+=h;for(var _=0;_<this.length&&this.words[_]>=67108864;_++)this.words[_]-=67108864,_===this.length-1?this.words[_+1]=1:this.words[_+1]++;return this.length=Math.max(this.length,_+1),this},c.prototype.isubn=function(h){if(a(typeof h=="number"),a(h<67108864),h<0)return this.iaddn(-h);if(this.negative!==0)return this.negative=0,this.iaddn(h),this.negative=1,this;if(this.words[0]-=h,this.length===1&&this.words[0]<0)this.words[0]=-this.words[0],this.negative=1;else for(var _=0;_<this.length&&this.words[_]<0;_++)this.words[_]+=67108864,this.words[_+1]-=1;return this.strip()},c.prototype.addn=function(h){return this.clone().iaddn(h)},c.prototype.subn=function(h){return this.clone().isubn(h)},c.prototype.iabs=function(){return this.negative=0,this},c.prototype.abs=function(){return this.clone().iabs()},c.prototype._ishlnsubmul=function(h,_,b){var lt=h.length+b,Rt;this._expand(lt);var kt,Ft=0;for(Rt=0;Rt<h.length;Rt++){kt=(this.words[Rt+b]|0)+Ft;var xt=(h.words[Rt]|0)*_;kt-=xt&67108863,Ft=(kt>>26)-(xt/67108864|0),this.words[Rt+b]=kt&67108863}for(;Rt<this.length-b;Rt++)kt=(this.words[Rt+b]|0)+Ft,Ft=kt>>26,this.words[Rt+b]=kt&67108863;if(Ft===0)return this.strip();for(a(Ft===-1),Ft=0,Rt=0;Rt<this.length;Rt++)kt=-(this.words[Rt]|0)+Ft,Ft=kt>>26,this.words[Rt]=kt&67108863;return this.negative=1,this.strip()},c.prototype._wordDiv=function(h,_){var b=this.length-h.length,lt=this.clone(),Rt=h,kt=Rt.words[Rt.length-1]|0,Ft=this._countBits(kt);b=26-Ft,b!==0&&(Rt=Rt.ushln(b),lt.iushln(b),kt=Rt.words[Rt.length-1]|0);var xt=lt.length-Rt.length,g;if(_!=="mod"){g=new c(null),g.length=xt+1,g.words=new Array(g.length);for(var wt=0;wt<g.length;wt++)g.words[wt]=0}var nr=lt.clone()._ishlnsubmul(Rt,1,xt);nr.negative===0&&(lt=nr,g&&(g.words[xt]=1));for(var or=xt-1;or>=0;or--){var cr=(lt.words[Rt.length+or]|0)*67108864+(lt.words[Rt.length+or-1]|0);for(cr=Math.min(cr/kt|0,67108863),lt._ishlnsubmul(Rt,cr,or);lt.negative!==0;)cr--,lt.negative=0,lt._ishlnsubmul(Rt,1,or),lt.isZero()||(lt.negative^=1);g&&(g.words[or]=cr)}return g&&g.strip(),lt.strip(),_!=="div"&&b!==0&&lt.iushrn(b),{div:g||null,mod:lt}},c.prototype.divmod=function(h,_,b){if(a(!h.isZero()),this.isZero())return{div:new c(0),mod:new c(0)};var lt,Rt,kt;return this.negative!==0&&h.negative===0?(kt=this.neg().divmod(h,_),_!=="mod"&&(lt=kt.div.neg()),_!=="div"&&(Rt=kt.mod.neg(),b&&Rt.negative!==0&&Rt.iadd(h)),{div:lt,mod:Rt}):this.negative===0&&h.negative!==0?(kt=this.divmod(h.neg(),_),_!=="mod"&&(lt=kt.div.neg()),{div:lt,mod:kt.mod}):this.negative&h.negative?(kt=this.neg().divmod(h.neg(),_),_!=="div"&&(Rt=kt.mod.neg(),b&&Rt.negative!==0&&Rt.isub(h)),{div:kt.div,mod:Rt}):h.length>this.length||this.cmp(h)<0?{div:new c(0),mod:this}:h.length===1?_==="div"?{div:this.divn(h.words[0]),mod:null}:_==="mod"?{div:null,mod:new c(this.modn(h.words[0]))}:{div:this.divn(h.words[0]),mod:new c(this.modn(h.words[0]))}:this._wordDiv(h,_)},c.prototype.div=function(h){return this.divmod(h,"div",!1).div},c.prototype.mod=function(h){return this.divmod(h,"mod",!1).mod},c.prototype.umod=function(h){return this.divmod(h,"mod",!0).mod},c.prototype.divRound=function(h){var _=this.divmod(h);if(_.mod.isZero())return _.div;var b=_.div.negative!==0?_.mod.isub(h):_.mod,lt=h.ushrn(1),Rt=h.andln(1),kt=b.cmp(lt);return kt<0||Rt===1&&kt===0?_.div:_.div.negative!==0?_.div.isubn(1):_.div.iaddn(1)},c.prototype.modn=function(h){a(h<=67108863);for(var _=(1<<26)%h,b=0,lt=this.length-1;lt>=0;lt--)b=(_*b+(this.words[lt]|0))%h;return b},c.prototype.idivn=function(h){a(h<=67108863);for(var _=0,b=this.length-1;b>=0;b--){var lt=(this.words[b]|0)+_*67108864;this.words[b]=lt/h|0,_=lt%h}return this.strip()},c.prototype.divn=function(h){return this.clone().idivn(h)},c.prototype.egcd=function(h){a(h.negative===0),a(!h.isZero());var _=this,b=h.clone();_.negative!==0?_=_.umod(h):_=_.clone();for(var lt=new c(1),Rt=new c(0),kt=new c(0),Ft=new c(1),xt=0;_.isEven()&&b.isEven();)_.iushrn(1),b.iushrn(1),++xt;for(var g=b.clone(),wt=_.clone();!_.isZero();){for(var nr=0,or=1;!(_.words[0]&or)&&nr<26;++nr,or<<=1);if(nr>0)for(_.iushrn(nr);nr-- >0;)(lt.isOdd()||Rt.isOdd())&&(lt.iadd(g),Rt.isub(wt)),lt.iushrn(1),Rt.iushrn(1);for(var cr=0,Rr=1;!(b.words[0]&Rr)&&cr<26;++cr,Rr<<=1);if(cr>0)for(b.iushrn(cr);cr-- >0;)(kt.isOdd()||Ft.isOdd())&&(kt.iadd(g),Ft.isub(wt)),kt.iushrn(1),Ft.iushrn(1);_.cmp(b)>=0?(_.isub(b),lt.isub(kt),Rt.isub(Ft)):(b.isub(_),kt.isub(lt),Ft.isub(Rt))}return{a:kt,b:Ft,gcd:b.iushln(xt)}},c.prototype._invmp=function(h){a(h.negative===0),a(!h.isZero());var _=this,b=h.clone();_.negative!==0?_=_.umod(h):_=_.clone();for(var lt=new c(1),Rt=new c(0),kt=b.clone();_.cmpn(1)>0&&b.cmpn(1)>0;){for(var Ft=0,xt=1;!(_.words[0]&xt)&&Ft<26;++Ft,xt<<=1);if(Ft>0)for(_.iushrn(Ft);Ft-- >0;)lt.isOdd()&&lt.iadd(kt),lt.iushrn(1);for(var g=0,wt=1;!(b.words[0]&wt)&&g<26;++g,wt<<=1);if(g>0)for(b.iushrn(g);g-- >0;)Rt.isOdd()&&Rt.iadd(kt),Rt.iushrn(1);_.cmp(b)>=0?(_.isub(b),lt.isub(Rt)):(b.isub(_),Rt.isub(lt))}var nr;return _.cmpn(1)===0?nr=lt:nr=Rt,nr.cmpn(0)<0&&nr.iadd(h),nr},c.prototype.gcd=function(h){if(this.isZero())return h.abs();if(h.isZero())return this.abs();var _=this.clone(),b=h.clone();_.negative=0,b.negative=0;for(var lt=0;_.isEven()&&b.isEven();lt++)_.iushrn(1),b.iushrn(1);do{for(;_.isEven();)_.iushrn(1);for(;b.isEven();)b.iushrn(1);var Rt=_.cmp(b);if(Rt<0){var kt=_;_=b,b=kt}else if(Rt===0||b.cmpn(1)===0)break;_.isub(b)}while(!0);return b.iushln(lt)},c.prototype.invm=function(h){return this.egcd(h).a.umod(h)},c.prototype.isEven=function(){return(this.words[0]&1)===0},c.prototype.isOdd=function(){return(this.words[0]&1)===1},c.prototype.andln=function(h){return this.words[0]&h},c.prototype.bincn=function(h){a(typeof h=="number");var _=h%26,b=(h-_)/26,lt=1<<_;if(this.length<=b)return this._expand(b+1),this.words[b]|=lt,this;for(var Rt=lt,kt=b;Rt!==0&&kt<this.length;kt++){var Ft=this.words[kt]|0;Ft+=Rt,Rt=Ft>>>26,Ft&=67108863,this.words[kt]=Ft}return Rt!==0&&(this.words[kt]=Rt,this.length++),this},c.prototype.isZero=function(){return this.length===1&&this.words[0]===0},c.prototype.cmpn=function(h){var _=h<0;if(this.negative!==0&&!_)return-1;if(this.negative===0&&_)return 1;this.strip();var b;if(this.length>1)b=1;else{_&&(h=-h),a(h<=67108863,"Number is too big");var lt=this.words[0]|0;b=lt===h?0:lt<h?-1:1}return this.negative!==0?-b|0:b},c.prototype.cmp=function(h){if(this.negative!==0&&h.negative===0)return-1;if(this.negative===0&&h.negative!==0)return 1;var _=this.ucmp(h);return this.negative!==0?-_|0:_},c.prototype.ucmp=function(h){if(this.length>h.length)return 1;if(this.length<h.length)return-1;for(var _=0,b=this.length-1;b>=0;b--){var lt=this.words[b]|0,Rt=h.words[b]|0;if(lt!==Rt){lt<Rt?_=-1:lt>Rt&&(_=1);break}}return _},c.prototype.gtn=function(h){return this.cmpn(h)===1},c.prototype.gt=function(h){return this.cmp(h)===1},c.prototype.gten=function(h){return this.cmpn(h)>=0},c.prototype.gte=function(h){return this.cmp(h)>=0},c.prototype.ltn=function(h){return this.cmpn(h)===-1},c.prototype.lt=function(h){return this.cmp(h)===-1},c.prototype.lten=function(h){return this.cmpn(h)<=0},c.prototype.lte=function(h){return this.cmp(h)<=0},c.prototype.eqn=function(h){return this.cmpn(h)===0},c.prototype.eq=function(h){return this.cmp(h)===0},c.red=function(h){return new lr(h)},c.prototype.toRed=function(h){return a(!this.red,"Already a number in reduction context"),a(this.negative===0,"red works only with positives"),h.convertTo(this)._forceRed(h)},c.prototype.fromRed=function(){return a(this.red,"fromRed works only with numbers in reduction context"),this.red.convertFrom(this)},c.prototype._forceRed=function(h){return this.red=h,this},c.prototype.forceRed=function(h){return a(!this.red,"Already a number in reduction context"),this._forceRed(h)},c.prototype.redAdd=function(h){return a(this.red,"redAdd works only with red numbers"),this.red.add(this,h)},c.prototype.redIAdd=function(h){return a(this.red,"redIAdd works only with red numbers"),this.red.iadd(this,h)},c.prototype.redSub=function(h){return a(this.red,"redSub works only with red numbers"),this.red.sub(this,h)},c.prototype.redISub=function(h){return a(this.red,"redISub works only with red numbers"),this.red.isub(this,h)},c.prototype.redShl=function(h){return a(this.red,"redShl works only with red numbers"),this.red.shl(this,h)},c.prototype.redMul=function(h){return a(this.red,"redMul works only with red numbers"),this.red._verify2(this,h),this.red.mul(this,h)},c.prototype.redIMul=function(h){return a(this.red,"redMul works only with red numbers"),this.red._verify2(this,h),this.red.imul(this,h)},c.prototype.redSqr=function(){return a(this.red,"redSqr works only with red numbers"),this.red._verify1(this),this.red.sqr(this)},c.prototype.redISqr=function(){return a(this.red,"redISqr works only with red numbers"),this.red._verify1(this),this.red.isqr(this)},c.prototype.redSqrt=function(){return a(this.red,"redSqrt works only with red numbers"),this.red._verify1(this),this.red.sqrt(this)},c.prototype.redInvm=function(){return a(this.red,"redInvm works only with red numbers"),this.red._verify1(this),this.red.invm(this)},c.prototype.redNeg=function(){return a(this.red,"redNeg works only with red numbers"),this.red._verify1(this),this.red.neg(this)},c.prototype.redPow=function(h){return a(this.red&&!h.red,"redPow(normalNum)"),this.red._verify1(this),this.red.pow(this,h)};var sr={k256:null,p224:null,p192:null,p25519:null};function ar(Mt,h){this.name=Mt,this.p=new c(h,16),this.n=this.p.bitLength(),this.k=new c(1).iushln(this.n).isub(this.p),this.tmp=this._tmp()}ar.prototype._tmp=function(){var h=new c(null);return h.words=new Array(Math.ceil(this.n/13)),h},ar.prototype.ireduce=function(h){var _=h,b;do this.split(_,this.tmp),_=this.imulK(_),_=_.iadd(this.tmp),b=_.bitLength();while(b>this.n);var lt=b<this.n?-1:_.ucmp(this.p);return lt===0?(_.words[0]=0,_.length=1):lt>0?_.isub(this.p):_.strip!==void 0?_.strip():_._strip(),_},ar.prototype.split=function(h,_){h.iushrn(this.n,0,_)},ar.prototype.imulK=function(h){return h.imul(this.k)};function hr(){ar.call(this,"k256","ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff fffffffe fffffc2f")}d(hr,ar),hr.prototype.split=function(h,_){for(var b=4194303,lt=Math.min(h.length,9),Rt=0;Rt<lt;Rt++)_.words[Rt]=h.words[Rt];if(_.length=lt,h.length<=9){h.words[0]=0,h.length=1;return}var kt=h.words[9];for(_.words[_.length++]=kt&b,Rt=10;Rt<h.length;Rt++){var Ft=h.words[Rt]|0;h.words[Rt-10]=(Ft&b)<<4|kt>>>22,kt=Ft}kt>>>=22,h.words[Rt-10]=kt,kt===0&&h.length>10?h.length-=10:h.length-=9},hr.prototype.imulK=function(h){h.words[h.length]=0,h.words[h.length+1]=0,h.length+=2;for(var _=0,b=0;b<h.length;b++){var lt=h.words[b]|0;_+=lt*977,h.words[b]=_&67108863,_=lt*64+(_/67108864|0)}return h.words[h.length-1]===0&&(h.length--,h.words[h.length-1]===0&&h.length--),h};function _r(){ar.call(this,"p224","ffffffff ffffffff ffffffff ffffffff 00000000 00000000 00000001")}d(_r,ar);function dr(){ar.call(this,"p192","ffffffff ffffffff ffffffff fffffffe ffffffff ffffffff")}d(dr,ar);function ur(){ar.call(this,"25519","7fffffffffffffff ffffffffffffffff ffffffffffffffff ffffffffffffffed")}d(ur,ar),ur.prototype.imulK=function(h){for(var _=0,b=0;b<h.length;b++){var lt=(h.words[b]|0)*19+_,Rt=lt&67108863;lt>>>=26,h.words[b]=Rt,_=lt}return _!==0&&(h.words[h.length++]=_),h},c._prime=function(h){if(sr[h])return sr[h];var _;if(h==="k256")_=new hr;else if(h==="p224")_=new _r;else if(h==="p192")_=new dr;else if(h==="p25519")_=new ur;else throw new Error("Unknown prime "+h);return sr[h]=_,_};function lr(Mt){if(typeof Mt=="string"){var h=c._prime(Mt);this.m=h.p,this.prime=h}else a(Mt.gtn(1),"modulus must be greater than 1"),this.m=Mt,this.prime=null}lr.prototype._verify1=function(h){a(h.negative===0,"red works only with positives"),a(h.red,"red works only with red numbers")},lr.prototype._verify2=function(h,_){a((h.negative|_.negative)===0,"red works only with positives"),a(h.red&&h.red===_.red,"red works only with red numbers")},lr.prototype.imod=function(h){return this.prime?this.prime.ireduce(h)._forceRed(this):h.umod(this.m)._forceRed(this)},lr.prototype.neg=function(h){return h.isZero()?h.clone():this.m.sub(h)._forceRed(this)},lr.prototype.add=function(h,_){this._verify2(h,_);var b=h.add(_);return b.cmp(this.m)>=0&&b.isub(this.m),b._forceRed(this)},lr.prototype.iadd=function(h,_){this._verify2(h,_);var b=h.iadd(_);return b.cmp(this.m)>=0&&b.isub(this.m),b},lr.prototype.sub=function(h,_){this._verify2(h,_);var b=h.sub(_);return b.cmpn(0)<0&&b.iadd(this.m),b._forceRed(this)},lr.prototype.isub=function(h,_){this._verify2(h,_);var b=h.isub(_);return b.cmpn(0)<0&&b.iadd(this.m),b},lr.prototype.shl=function(h,_){return this._verify1(h),this.imod(h.ushln(_))},lr.prototype.imul=function(h,_){return this._verify2(h,_),this.imod(h.imul(_))},lr.prototype.mul=function(h,_){return this._verify2(h,_),this.imod(h.mul(_))},lr.prototype.isqr=function(h){return this.imul(h,h.clone())},lr.prototype.sqr=function(h){return this.mul(h,h)},lr.prototype.sqrt=function(h){if(h.isZero())return h.clone();var _=this.m.andln(3);if(a(_%2===1),_===3){var b=this.m.add(new c(1)).iushrn(2);return this.pow(h,b)}for(var lt=this.m.subn(1),Rt=0;!lt.isZero()&&lt.andln(1)===0;)Rt++,lt.iushrn(1);a(!lt.isZero());var kt=new c(1).toRed(this),Ft=kt.redNeg(),xt=this.m.subn(1).iushrn(1),g=this.m.bitLength();for(g=new c(2*g*g).toRed(this);this.pow(g,xt).cmp(Ft)!==0;)g.redIAdd(Ft);for(var wt=this.pow(g,lt),nr=this.pow(h,lt.addn(1).iushrn(1)),or=this.pow(h,lt),cr=Rt;or.cmp(kt)!==0;){for(var Rr=or,Ar=0;Rr.cmp(kt)!==0;Ar++)Rr=Rr.redSqr();a(Ar<cr);var pr=this.pow(wt,new c(1).iushln(cr-Ar-1));nr=nr.redMul(pr),wt=pr.redSqr(),or=or.redMul(wt),cr=Ar}return nr},lr.prototype.invm=function(h){var _=h._invmp(this.m);return _.negative!==0?(_.negative=0,this.imod(_).redNeg()):this.imod(_)},lr.prototype.pow=function(h,_){if(_.isZero())return new c(1).toRed(this);if(_.cmpn(1)===0)return h.clone();var b=4,lt=new Array(1<<b);lt[0]=new c(1).toRed(this),lt[1]=h;for(var Rt=2;Rt<lt.length;Rt++)lt[Rt]=this.mul(lt[Rt-1],h);var kt=lt[0],Ft=0,xt=0,g=_.bitLength()%26;for(g===0&&(g=26),Rt=_.length-1;Rt>=0;Rt--){for(var wt=_.words[Rt],nr=g-1;nr>=0;nr--){var or=wt>>nr&1;if(kt!==lt[0]&&(kt=this.sqr(kt)),or===0&&Ft===0){xt=0;continue}Ft<<=1,Ft|=or,xt++,!(xt!==b&&(Rt!==0||nr!==0))&&(kt=this.mul(kt,lt[Ft]),xt=0,Ft=0)}g=26}return kt},lr.prototype.convertTo=function(h){var _=h.umod(this.m);return _===h?_.clone():_},lr.prototype.convertFrom=function(h){var _=h.clone();return _.red=null,_},c.mont=function(h){return new gr(h)};function gr(Mt){lr.call(this,Mt),this.shift=this.m.bitLength(),this.shift%26!==0&&(this.shift+=26-this.shift%26),this.r=new c(1).iushln(this.shift),this.r2=this.imod(this.r.sqr()),this.rinv=this.r._invmp(this.m),this.minv=this.rinv.mul(this.r).isubn(1).div(this.m),this.minv=this.minv.umod(this.r),this.minv=this.r.sub(this.minv)}d(gr,lr),gr.prototype.convertTo=function(h){return this.imod(h.ushln(this.shift))},gr.prototype.convertFrom=function(h){var _=this.imod(h.mul(this.rinv));return _.red=null,_},gr.prototype.imul=function(h,_){if(h.isZero()||_.isZero())return h.words[0]=0,h.length=1,h;var b=h.imul(_),lt=b.maskn(this.shift).mul(this.minv).imaskn(this.shift).mul(this.m),Rt=b.isub(lt).iushrn(this.shift),kt=Rt;return Rt.cmp(this.m)>=0?kt=Rt.isub(this.m):Rt.cmpn(0)<0&&(kt=Rt.iadd(this.m)),kt._forceRed(this)},gr.prototype.mul=function(h,_){if(h.isZero()||_.isZero())return new c(0)._forceRed(this);var b=h.mul(_),lt=b.maskn(this.shift).mul(this.minv).imaskn(this.shift).mul(this.m),Rt=b.isub(lt).iushrn(this.shift),kt=Rt;return Rt.cmp(this.m)>=0?kt=Rt.isub(this.m):Rt.cmpn(0)<0&&(kt=Rt.iadd(this.m)),kt._forceRed(this)},gr.prototype.invm=function(h){var _=this.imod(h._invmp(this.m).mul(this.r2));return _._forceRed(this)}})(s,commonjsGlobal$2)}(bn$3)),bn$3.exports}var utils$1={},hasRequiredUtils$2;function requireUtils$2(){return hasRequiredUtils$2||(hasRequiredUtils$2=1,function(s){var e=s;function o(c,j){if(Array.isArray(c))return c.slice();if(!c)return[];var _e=[];if(typeof c!="string"){for(var pt=0;pt<c.length;pt++)_e[pt]=c[pt]|0;return _e}if(j==="hex"){c=c.replace(/[^a-z0-9]+/ig,""),c.length%2!==0&&(c="0"+c);for(var pt=0;pt<c.length;pt+=2)_e.push(parseInt(c[pt]+c[pt+1],16))}else for(var pt=0;pt<c.length;pt++){var yt=c.charCodeAt(pt),ct=yt>>8,Ct=yt&255;ct?_e.push(ct,Ct):_e.push(Ct)}return _e}e.toArray=o;function a(c){return c.length===1?"0"+c:c}e.zero2=a;function d(c){for(var j="",_e=0;_e<c.length;_e++)j+=a(c[_e].toString(16));return j}e.toHex=d,e.encode=function(j,_e){return _e==="hex"?d(j):j}}(utils$1)),utils$1}var hasRequiredUtils$1;function requireUtils$1(){return hasRequiredUtils$1||(hasRequiredUtils$1=1,function(s){var e=s,o=requireBn$3(),a=requireMinimalisticAssert(),d=requireUtils$2();e.assert=a,e.toArray=d.toArray,e.zero2=d.zero2,e.toHex=d.toHex,e.encode=d.encode;function c(ct,Ct,qt){var Ot=new Array(Math.max(ct.bitLength(),qt)+1),Lt;for(Lt=0;Lt<Ot.length;Lt+=1)Ot[Lt]=0;var Qt=1<<Ct+1,ir=ct.clone();for(Lt=0;Lt<Ot.length;Lt++){var er,tr=ir.andln(Qt-1);ir.isOdd()?(tr>(Qt>>1)-1?er=(Qt>>1)-tr:er=tr,ir.isubn(er)):er=0,Ot[Lt]=er,ir.iushrn(1)}return Ot}e.getNAF=c;function j(ct,Ct){var qt=[[],[]];ct=ct.clone(),Ct=Ct.clone();for(var Ot=0,Lt=0,Qt;ct.cmpn(-Ot)>0||Ct.cmpn(-Lt)>0;){var ir=ct.andln(3)+Ot&3,er=Ct.andln(3)+Lt&3;ir===3&&(ir=-1),er===3&&(er=-1);var tr;ir&1?(Qt=ct.andln(7)+Ot&7,(Qt===3||Qt===5)&&er===2?tr=-ir:tr=ir):tr=0,qt[0].push(tr);var sr;er&1?(Qt=Ct.andln(7)+Lt&7,(Qt===3||Qt===5)&&ir===2?sr=-er:sr=er):sr=0,qt[1].push(sr),2*Ot===tr+1&&(Ot=1-Ot),2*Lt===sr+1&&(Lt=1-Lt),ct.iushrn(1),Ct.iushrn(1)}return qt}e.getJSF=j;function _e(ct,Ct,qt){var Ot="_"+Ct;ct.prototype[Ct]=function(){return this[Ot]!==void 0?this[Ot]:this[Ot]=qt.call(this)}}e.cachedProperty=_e;function pt(ct){return typeof ct=="string"?e.toArray(ct,"hex"):ct}e.parseBytes=pt;function yt(ct){return new o(ct,"hex","le")}e.intFromLE=yt}(utils$2)),utils$2}var curve={},base$1,hasRequiredBase$1;function requireBase$1(){if(hasRequiredBase$1)return base$1;hasRequiredBase$1=1;var s=requireBn$3(),e=requireUtils$1(),o=e.getNAF,a=e.getJSF,d=e.assert;function c(_e,pt){this.type=_e,this.p=new s(pt.p,16),this.red=pt.prime?s.red(pt.prime):s.mont(this.p),this.zero=new s(0).toRed(this.red),this.one=new s(1).toRed(this.red),this.two=new s(2).toRed(this.red),this.n=pt.n&&new s(pt.n,16),this.g=pt.g&&this.pointFromJSON(pt.g,pt.gRed),this._wnafT1=new Array(4),this._wnafT2=new Array(4),this._wnafT3=new Array(4),this._wnafT4=new Array(4),this._bitLength=this.n?this.n.bitLength():0;var yt=this.n&&this.p.div(this.n);!yt||yt.cmpn(100)>0?this.redN=null:(this._maxwellTrick=!0,this.redN=this.n.toRed(this.red))}base$1=c,c.prototype.point=function(){throw new Error("Not implemented")},c.prototype.validate=function(){throw new Error("Not implemented")},c.prototype._fixedNafMul=function(pt,yt){d(pt.precomputed);var ct=pt._getDoubles(),Ct=o(yt,1,this._bitLength),qt=(1<<ct.step+1)-(ct.step%2===0?2:1);qt/=3;var Ot=[],Lt,Qt;for(Lt=0;Lt<Ct.length;Lt+=ct.step){Qt=0;for(var ir=Lt+ct.step-1;ir>=Lt;ir--)Qt=(Qt<<1)+Ct[ir];Ot.push(Qt)}for(var er=this.jpoint(null,null,null),tr=this.jpoint(null,null,null),sr=qt;sr>0;sr--){for(Lt=0;Lt<Ot.length;Lt++)Qt=Ot[Lt],Qt===sr?tr=tr.mixedAdd(ct.points[Lt]):Qt===-sr&&(tr=tr.mixedAdd(ct.points[Lt].neg()));er=er.add(tr)}return er.toP()},c.prototype._wnafMul=function(pt,yt){var ct=4,Ct=pt._getNAFPoints(ct);ct=Ct.wnd;for(var qt=Ct.points,Ot=o(yt,ct,this._bitLength),Lt=this.jpoint(null,null,null),Qt=Ot.length-1;Qt>=0;Qt--){for(var ir=0;Qt>=0&&Ot[Qt]===0;Qt--)ir++;if(Qt>=0&&ir++,Lt=Lt.dblp(ir),Qt<0)break;var er=Ot[Qt];d(er!==0),pt.type==="affine"?er>0?Lt=Lt.mixedAdd(qt[er-1>>1]):Lt=Lt.mixedAdd(qt[-er-1>>1].neg()):er>0?Lt=Lt.add(qt[er-1>>1]):Lt=Lt.add(qt[-er-1>>1].neg())}return pt.type==="affine"?Lt.toP():Lt},c.prototype._wnafMulAdd=function(pt,yt,ct,Ct,qt){var Ot=this._wnafT1,Lt=this._wnafT2,Qt=this._wnafT3,ir=0,er,tr,sr;for(er=0;er<Ct;er++){sr=yt[er];var ar=sr._getNAFPoints(pt);Ot[er]=ar.wnd,Lt[er]=ar.points}for(er=Ct-1;er>=1;er-=2){var hr=er-1,_r=er;if(Ot[hr]!==1||Ot[_r]!==1){Qt[hr]=o(ct[hr],Ot[hr],this._bitLength),Qt[_r]=o(ct[_r],Ot[_r],this._bitLength),ir=Math.max(Qt[hr].length,ir),ir=Math.max(Qt[_r].length,ir);continue}var dr=[yt[hr],null,null,yt[_r]];yt[hr].y.cmp(yt[_r].y)===0?(dr[1]=yt[hr].add(yt[_r]),dr[2]=yt[hr].toJ().mixedAdd(yt[_r].neg())):yt[hr].y.cmp(yt[_r].y.redNeg())===0?(dr[1]=yt[hr].toJ().mixedAdd(yt[_r]),dr[2]=yt[hr].add(yt[_r].neg())):(dr[1]=yt[hr].toJ().mixedAdd(yt[_r]),dr[2]=yt[hr].toJ().mixedAdd(yt[_r].neg()));var ur=[-3,-1,-5,-7,0,7,5,1,3],lr=a(ct[hr],ct[_r]);for(ir=Math.max(lr[0].length,ir),Qt[hr]=new Array(ir),Qt[_r]=new Array(ir),tr=0;tr<ir;tr++){var gr=lr[0][tr]|0,Mt=lr[1][tr]|0;Qt[hr][tr]=ur[(gr+1)*3+(Mt+1)],Qt[_r][tr]=0,Lt[hr]=dr}}var h=this.jpoint(null,null,null),_=this._wnafT4;for(er=ir;er>=0;er--){for(var b=0;er>=0;){var lt=!0;for(tr=0;tr<Ct;tr++)_[tr]=Qt[tr][er]|0,_[tr]!==0&&(lt=!1);if(!lt)break;b++,er--}if(er>=0&&b++,h=h.dblp(b),er<0)break;for(tr=0;tr<Ct;tr++){var Rt=_[tr];Rt!==0&&(Rt>0?sr=Lt[tr][Rt-1>>1]:Rt<0&&(sr=Lt[tr][-Rt-1>>1].neg()),sr.type==="affine"?h=h.mixedAdd(sr):h=h.add(sr))}}for(er=0;er<Ct;er++)Lt[er]=null;return qt?h:h.toP()};function j(_e,pt){this.curve=_e,this.type=pt,this.precomputed=null}return c.BasePoint=j,j.prototype.eq=function(){throw new Error("Not implemented")},j.prototype.validate=function(){return this.curve.validate(this)},c.prototype.decodePoint=function(pt,yt){pt=e.toArray(pt,yt);var ct=this.p.byteLength();if((pt[0]===4||pt[0]===6||pt[0]===7)&&pt.length-1===2*ct){pt[0]===6?d(pt[pt.length-1]%2===0):pt[0]===7&&d(pt[pt.length-1]%2===1);var Ct=this.point(pt.slice(1,1+ct),pt.slice(1+ct,1+2*ct));return Ct}else if((pt[0]===2||pt[0]===3)&&pt.length-1===ct)return this.pointFromX(pt.slice(1,1+ct),pt[0]===3);throw new Error("Unknown point format")},j.prototype.encodeCompressed=function(pt){return this.encode(pt,!0)},j.prototype._encode=function(pt){var yt=this.curve.p.byteLength(),ct=this.getX().toArray("be",yt);return pt?[this.getY().isEven()?2:3].concat(ct):[4].concat(ct,this.getY().toArray("be",yt))},j.prototype.encode=function(pt,yt){return e.encode(this._encode(yt),pt)},j.prototype.precompute=function(pt){if(this.precomputed)return this;var yt={doubles:null,naf:null,beta:null};return yt.naf=this._getNAFPoints(8),yt.doubles=this._getDoubles(4,pt),yt.beta=this._getBeta(),this.precomputed=yt,this},j.prototype._hasDoubles=function(pt){if(!this.precomputed)return!1;var yt=this.precomputed.doubles;return yt?yt.points.length>=Math.ceil((pt.bitLength()+1)/yt.step):!1},j.prototype._getDoubles=function(pt,yt){if(this.precomputed&&this.precomputed.doubles)return this.precomputed.doubles;for(var ct=[this],Ct=this,qt=0;qt<yt;qt+=pt){for(var Ot=0;Ot<pt;Ot++)Ct=Ct.dbl();ct.push(Ct)}return{step:pt,points:ct}},j.prototype._getNAFPoints=function(pt){if(this.precomputed&&this.precomputed.naf)return this.precomputed.naf;for(var yt=[this],ct=(1<<pt)-1,Ct=ct===1?null:this.dbl(),qt=1;qt<ct;qt++)yt[qt]=yt[qt-1].add(Ct);return{wnd:pt,points:yt}},j.prototype._getBeta=function(){return null},j.prototype.dblp=function(pt){for(var yt=this,ct=0;ct<pt;ct++)yt=yt.dbl();return yt},base$1}var short,hasRequiredShort;function requireShort(){if(hasRequiredShort)return short;hasRequiredShort=1;var s=requireUtils$1(),e=requireBn$3(),o=requireInherits_browser(),a=requireBase$1(),d=s.assert;function c(pt){a.call(this,"short",pt),this.a=new e(pt.a,16).toRed(this.red),this.b=new e(pt.b,16).toRed(this.red),this.tinv=this.two.redInvm(),this.zeroA=this.a.fromRed().cmpn(0)===0,this.threeA=this.a.fromRed().sub(this.p).cmpn(-3)===0,this.endo=this._getEndomorphism(pt),this._endoWnafT1=new Array(4),this._endoWnafT2=new Array(4)}o(c,a),short=c,c.prototype._getEndomorphism=function(yt){if(!(!this.zeroA||!this.g||!this.n||this.p.modn(3)!==1)){var ct,Ct;if(yt.beta)ct=new e(yt.beta,16).toRed(this.red);else{var qt=this._getEndoRoots(this.p);ct=qt[0].cmp(qt[1])<0?qt[0]:qt[1],ct=ct.toRed(this.red)}if(yt.lambda)Ct=new e(yt.lambda,16);else{var Ot=this._getEndoRoots(this.n);this.g.mul(Ot[0]).x.cmp(this.g.x.redMul(ct))===0?Ct=Ot[0]:(Ct=Ot[1],d(this.g.mul(Ct).x.cmp(this.g.x.redMul(ct))===0))}var Lt;return yt.basis?Lt=yt.basis.map(function(Qt){return{a:new e(Qt.a,16),b:new e(Qt.b,16)}}):Lt=this._getEndoBasis(Ct),{beta:ct,lambda:Ct,basis:Lt}}},c.prototype._getEndoRoots=function(yt){var ct=yt===this.p?this.red:e.mont(yt),Ct=new e(2).toRed(ct).redInvm(),qt=Ct.redNeg(),Ot=new e(3).toRed(ct).redNeg().redSqrt().redMul(Ct),Lt=qt.redAdd(Ot).fromRed(),Qt=qt.redSub(Ot).fromRed();return[Lt,Qt]},c.prototype._getEndoBasis=function(yt){for(var ct=this.n.ushrn(Math.floor(this.n.bitLength()/2)),Ct=yt,qt=this.n.clone(),Ot=new e(1),Lt=new e(0),Qt=new e(0),ir=new e(1),er,tr,sr,ar,hr,_r,dr,ur=0,lr,gr;Ct.cmpn(0)!==0;){var Mt=qt.div(Ct);lr=qt.sub(Mt.mul(Ct)),gr=Qt.sub(Mt.mul(Ot));var h=ir.sub(Mt.mul(Lt));if(!sr&&lr.cmp(ct)<0)er=dr.neg(),tr=Ot,sr=lr.neg(),ar=gr;else if(sr&&++ur===2)break;dr=lr,qt=Ct,Ct=lr,Qt=Ot,Ot=gr,ir=Lt,Lt=h}hr=lr.neg(),_r=gr;var _=sr.sqr().add(ar.sqr()),b=hr.sqr().add(_r.sqr());return b.cmp(_)>=0&&(hr=er,_r=tr),sr.negative&&(sr=sr.neg(),ar=ar.neg()),hr.negative&&(hr=hr.neg(),_r=_r.neg()),[{a:sr,b:ar},{a:hr,b:_r}]},c.prototype._endoSplit=function(yt){var ct=this.endo.basis,Ct=ct[0],qt=ct[1],Ot=qt.b.mul(yt).divRound(this.n),Lt=Ct.b.neg().mul(yt).divRound(this.n),Qt=Ot.mul(Ct.a),ir=Lt.mul(qt.a),er=Ot.mul(Ct.b),tr=Lt.mul(qt.b),sr=yt.sub(Qt).sub(ir),ar=er.add(tr).neg();return{k1:sr,k2:ar}},c.prototype.pointFromX=function(yt,ct){yt=new e(yt,16),yt.red||(yt=yt.toRed(this.red));var Ct=yt.redSqr().redMul(yt).redIAdd(yt.redMul(this.a)).redIAdd(this.b),qt=Ct.redSqrt();if(qt.redSqr().redSub(Ct).cmp(this.zero)!==0)throw new Error("invalid point");var Ot=qt.fromRed().isOdd();return(ct&&!Ot||!ct&&Ot)&&(qt=qt.redNeg()),this.point(yt,qt)},c.prototype.validate=function(yt){if(yt.inf)return!0;var ct=yt.x,Ct=yt.y,qt=this.a.redMul(ct),Ot=ct.redSqr().redMul(ct).redIAdd(qt).redIAdd(this.b);return Ct.redSqr().redISub(Ot).cmpn(0)===0},c.prototype._endoWnafMulAdd=function(yt,ct,Ct){for(var qt=this._endoWnafT1,Ot=this._endoWnafT2,Lt=0;Lt<yt.length;Lt++){var Qt=this._endoSplit(ct[Lt]),ir=yt[Lt],er=ir._getBeta();Qt.k1.negative&&(Qt.k1.ineg(),ir=ir.neg(!0)),Qt.k2.negative&&(Qt.k2.ineg(),er=er.neg(!0)),qt[Lt*2]=ir,qt[Lt*2+1]=er,Ot[Lt*2]=Qt.k1,Ot[Lt*2+1]=Qt.k2}for(var tr=this._wnafMulAdd(1,qt,Ot,Lt*2,Ct),sr=0;sr<Lt*2;sr++)qt[sr]=null,Ot[sr]=null;return tr};function j(pt,yt,ct,Ct){a.BasePoint.call(this,pt,"affine"),yt===null&&ct===null?(this.x=null,this.y=null,this.inf=!0):(this.x=new e(yt,16),this.y=new e(ct,16),Ct&&(this.x.forceRed(this.curve.red),this.y.forceRed(this.curve.red)),this.x.red||(this.x=this.x.toRed(this.curve.red)),this.y.red||(this.y=this.y.toRed(this.curve.red)),this.inf=!1)}o(j,a.BasePoint),c.prototype.point=function(yt,ct,Ct){return new j(this,yt,ct,Ct)},c.prototype.pointFromJSON=function(yt,ct){return j.fromJSON(this,yt,ct)},j.prototype._getBeta=function(){if(this.curve.endo){var yt=this.precomputed;if(yt&&yt.beta)return yt.beta;var ct=this.curve.point(this.x.redMul(this.curve.endo.beta),this.y);if(yt){var Ct=this.curve,qt=function(Ot){return Ct.point(Ot.x.redMul(Ct.endo.beta),Ot.y)};yt.beta=ct,ct.precomputed={beta:null,naf:yt.naf&&{wnd:yt.naf.wnd,points:yt.naf.points.map(qt)},doubles:yt.doubles&&{step:yt.doubles.step,points:yt.doubles.points.map(qt)}}}return ct}},j.prototype.toJSON=function(){return this.precomputed?[this.x,this.y,this.precomputed&&{doubles:this.precomputed.doubles&&{step:this.precomputed.doubles.step,points:this.precomputed.doubles.points.slice(1)},naf:this.precomputed.naf&&{wnd:this.precomputed.naf.wnd,points:this.precomputed.naf.points.slice(1)}}]:[this.x,this.y]},j.fromJSON=function(yt,ct,Ct){typeof ct=="string"&&(ct=JSON.parse(ct));var qt=yt.point(ct[0],ct[1],Ct);if(!ct[2])return qt;function Ot(Qt){return yt.point(Qt[0],Qt[1],Ct)}var Lt=ct[2];return qt.precomputed={beta:null,doubles:Lt.doubles&&{step:Lt.doubles.step,points:[qt].concat(Lt.doubles.points.map(Ot))},naf:Lt.naf&&{wnd:Lt.naf.wnd,points:[qt].concat(Lt.naf.points.map(Ot))}},qt},j.prototype.inspect=function(){return this.isInfinity()?"<EC Point Infinity>":"<EC Point x: "+this.x.fromRed().toString(16,2)+" y: "+this.y.fromRed().toString(16,2)+">"},j.prototype.isInfinity=function(){return this.inf},j.prototype.add=function(yt){if(this.inf)return yt;if(yt.inf)return this;if(this.eq(yt))return this.dbl();if(this.neg().eq(yt))return this.curve.point(null,null);if(this.x.cmp(yt.x)===0)return this.curve.point(null,null);var ct=this.y.redSub(yt.y);ct.cmpn(0)!==0&&(ct=ct.redMul(this.x.redSub(yt.x).redInvm()));var Ct=ct.redSqr().redISub(this.x).redISub(yt.x),qt=ct.redMul(this.x.redSub(Ct)).redISub(this.y);return this.curve.point(Ct,qt)},j.prototype.dbl=function(){if(this.inf)return this;var yt=this.y.redAdd(this.y);if(yt.cmpn(0)===0)return this.curve.point(null,null);var ct=this.curve.a,Ct=this.x.redSqr(),qt=yt.redInvm(),Ot=Ct.redAdd(Ct).redIAdd(Ct).redIAdd(ct).redMul(qt),Lt=Ot.redSqr().redISub(this.x.redAdd(this.x)),Qt=Ot.redMul(this.x.redSub(Lt)).redISub(this.y);return this.curve.point(Lt,Qt)},j.prototype.getX=function(){return this.x.fromRed()},j.prototype.getY=function(){return this.y.fromRed()},j.prototype.mul=function(yt){return yt=new e(yt,16),this.isInfinity()?this:this._hasDoubles(yt)?this.curve._fixedNafMul(this,yt):this.curve.endo?this.curve._endoWnafMulAdd([this],[yt]):this.curve._wnafMul(this,yt)},j.prototype.mulAdd=function(yt,ct,Ct){var qt=[this,ct],Ot=[yt,Ct];return this.curve.endo?this.curve._endoWnafMulAdd(qt,Ot):this.curve._wnafMulAdd(1,qt,Ot,2)},j.prototype.jmulAdd=function(yt,ct,Ct){var qt=[this,ct],Ot=[yt,Ct];return this.curve.endo?this.curve._endoWnafMulAdd(qt,Ot,!0):this.curve._wnafMulAdd(1,qt,Ot,2,!0)},j.prototype.eq=function(yt){return this===yt||this.inf===yt.inf&&(this.inf||this.x.cmp(yt.x)===0&&this.y.cmp(yt.y)===0)},j.prototype.neg=function(yt){if(this.inf)return this;var ct=this.curve.point(this.x,this.y.redNeg());if(yt&&this.precomputed){var Ct=this.precomputed,qt=function(Ot){return Ot.neg()};ct.precomputed={naf:Ct.naf&&{wnd:Ct.naf.wnd,points:Ct.naf.points.map(qt)},doubles:Ct.doubles&&{step:Ct.doubles.step,points:Ct.doubles.points.map(qt)}}}return ct},j.prototype.toJ=function(){if(this.inf)return this.curve.jpoint(null,null,null);var yt=this.curve.jpoint(this.x,this.y,this.curve.one);return yt};function _e(pt,yt,ct,Ct){a.BasePoint.call(this,pt,"jacobian"),yt===null&&ct===null&&Ct===null?(this.x=this.curve.one,this.y=this.curve.one,this.z=new e(0)):(this.x=new e(yt,16),this.y=new e(ct,16),this.z=new e(Ct,16)),this.x.red||(this.x=this.x.toRed(this.curve.red)),this.y.red||(this.y=this.y.toRed(this.curve.red)),this.z.red||(this.z=this.z.toRed(this.curve.red)),this.zOne=this.z===this.curve.one}return o(_e,a.BasePoint),c.prototype.jpoint=function(yt,ct,Ct){return new _e(this,yt,ct,Ct)},_e.prototype.toP=function(){if(this.isInfinity())return this.curve.point(null,null);var yt=this.z.redInvm(),ct=yt.redSqr(),Ct=this.x.redMul(ct),qt=this.y.redMul(ct).redMul(yt);return this.curve.point(Ct,qt)},_e.prototype.neg=function(){return this.curve.jpoint(this.x,this.y.redNeg(),this.z)},_e.prototype.add=function(yt){if(this.isInfinity())return yt;if(yt.isInfinity())return this;var ct=yt.z.redSqr(),Ct=this.z.redSqr(),qt=this.x.redMul(ct),Ot=yt.x.redMul(Ct),Lt=this.y.redMul(ct.redMul(yt.z)),Qt=yt.y.redMul(Ct.redMul(this.z)),ir=qt.redSub(Ot),er=Lt.redSub(Qt);if(ir.cmpn(0)===0)return er.cmpn(0)!==0?this.curve.jpoint(null,null,null):this.dbl();var tr=ir.redSqr(),sr=tr.redMul(ir),ar=qt.redMul(tr),hr=er.redSqr().redIAdd(sr).redISub(ar).redISub(ar),_r=er.redMul(ar.redISub(hr)).redISub(Lt.redMul(sr)),dr=this.z.redMul(yt.z).redMul(ir);return this.curve.jpoint(hr,_r,dr)},_e.prototype.mixedAdd=function(yt){if(this.isInfinity())return yt.toJ();if(yt.isInfinity())return this;var ct=this.z.redSqr(),Ct=this.x,qt=yt.x.redMul(ct),Ot=this.y,Lt=yt.y.redMul(ct).redMul(this.z),Qt=Ct.redSub(qt),ir=Ot.redSub(Lt);if(Qt.cmpn(0)===0)return ir.cmpn(0)!==0?this.curve.jpoint(null,null,null):this.dbl();var er=Qt.redSqr(),tr=er.redMul(Qt),sr=Ct.redMul(er),ar=ir.redSqr().redIAdd(tr).redISub(sr).redISub(sr),hr=ir.redMul(sr.redISub(ar)).redISub(Ot.redMul(tr)),_r=this.z.redMul(Qt);return this.curve.jpoint(ar,hr,_r)},_e.prototype.dblp=function(yt){if(yt===0)return this;if(this.isInfinity())return this;if(!yt)return this.dbl();var ct;if(this.curve.zeroA||this.curve.threeA){var Ct=this;for(ct=0;ct<yt;ct++)Ct=Ct.dbl();return Ct}var qt=this.curve.a,Ot=this.curve.tinv,Lt=this.x,Qt=this.y,ir=this.z,er=ir.redSqr().redSqr(),tr=Qt.redAdd(Qt);for(ct=0;ct<yt;ct++){var sr=Lt.redSqr(),ar=tr.redSqr(),hr=ar.redSqr(),_r=sr.redAdd(sr).redIAdd(sr).redIAdd(qt.redMul(er)),dr=Lt.redMul(ar),ur=_r.redSqr().redISub(dr.redAdd(dr)),lr=dr.redISub(ur),gr=_r.redMul(lr);gr=gr.redIAdd(gr).redISub(hr);var Mt=tr.redMul(ir);ct+1<yt&&(er=er.redMul(hr)),Lt=ur,ir=Mt,tr=gr}return this.curve.jpoint(Lt,tr.redMul(Ot),ir)},_e.prototype.dbl=function(){return this.isInfinity()?this:this.curve.zeroA?this._zeroDbl():this.curve.threeA?this._threeDbl():this._dbl()},_e.prototype._zeroDbl=function(){var yt,ct,Ct;if(this.zOne){var qt=this.x.redSqr(),Ot=this.y.redSqr(),Lt=Ot.redSqr(),Qt=this.x.redAdd(Ot).redSqr().redISub(qt).redISub(Lt);Qt=Qt.redIAdd(Qt);var ir=qt.redAdd(qt).redIAdd(qt),er=ir.redSqr().redISub(Qt).redISub(Qt),tr=Lt.redIAdd(Lt);tr=tr.redIAdd(tr),tr=tr.redIAdd(tr),yt=er,ct=ir.redMul(Qt.redISub(er)).redISub(tr),Ct=this.y.redAdd(this.y)}else{var sr=this.x.redSqr(),ar=this.y.redSqr(),hr=ar.redSqr(),_r=this.x.redAdd(ar).redSqr().redISub(sr).redISub(hr);_r=_r.redIAdd(_r);var dr=sr.redAdd(sr).redIAdd(sr),ur=dr.redSqr(),lr=hr.redIAdd(hr);lr=lr.redIAdd(lr),lr=lr.redIAdd(lr),yt=ur.redISub(_r).redISub(_r),ct=dr.redMul(_r.redISub(yt)).redISub(lr),Ct=this.y.redMul(this.z),Ct=Ct.redIAdd(Ct)}return this.curve.jpoint(yt,ct,Ct)},_e.prototype._threeDbl=function(){var yt,ct,Ct;if(this.zOne){var qt=this.x.redSqr(),Ot=this.y.redSqr(),Lt=Ot.redSqr(),Qt=this.x.redAdd(Ot).redSqr().redISub(qt).redISub(Lt);Qt=Qt.redIAdd(Qt);var ir=qt.redAdd(qt).redIAdd(qt).redIAdd(this.curve.a),er=ir.redSqr().redISub(Qt).redISub(Qt);yt=er;var tr=Lt.redIAdd(Lt);tr=tr.redIAdd(tr),tr=tr.redIAdd(tr),ct=ir.redMul(Qt.redISub(er)).redISub(tr),Ct=this.y.redAdd(this.y)}else{var sr=this.z.redSqr(),ar=this.y.redSqr(),hr=this.x.redMul(ar),_r=this.x.redSub(sr).redMul(this.x.redAdd(sr));_r=_r.redAdd(_r).redIAdd(_r);var dr=hr.redIAdd(hr);dr=dr.redIAdd(dr);var ur=dr.redAdd(dr);yt=_r.redSqr().redISub(ur),Ct=this.y.redAdd(this.z).redSqr().redISub(ar).redISub(sr);var lr=ar.redSqr();lr=lr.redIAdd(lr),lr=lr.redIAdd(lr),lr=lr.redIAdd(lr),ct=_r.redMul(dr.redISub(yt)).redISub(lr)}return this.curve.jpoint(yt,ct,Ct)},_e.prototype._dbl=function(){var yt=this.curve.a,ct=this.x,Ct=this.y,qt=this.z,Ot=qt.redSqr().redSqr(),Lt=ct.redSqr(),Qt=Ct.redSqr(),ir=Lt.redAdd(Lt).redIAdd(Lt).redIAdd(yt.redMul(Ot)),er=ct.redAdd(ct);er=er.redIAdd(er);var tr=er.redMul(Qt),sr=ir.redSqr().redISub(tr.redAdd(tr)),ar=tr.redISub(sr),hr=Qt.redSqr();hr=hr.redIAdd(hr),hr=hr.redIAdd(hr),hr=hr.redIAdd(hr);var _r=ir.redMul(ar).redISub(hr),dr=Ct.redAdd(Ct).redMul(qt);return this.curve.jpoint(sr,_r,dr)},_e.prototype.trpl=function(){if(!this.curve.zeroA)return this.dbl().add(this);var yt=this.x.redSqr(),ct=this.y.redSqr(),Ct=this.z.redSqr(),qt=ct.redSqr(),Ot=yt.redAdd(yt).redIAdd(yt),Lt=Ot.redSqr(),Qt=this.x.redAdd(ct).redSqr().redISub(yt).redISub(qt);Qt=Qt.redIAdd(Qt),Qt=Qt.redAdd(Qt).redIAdd(Qt),Qt=Qt.redISub(Lt);var ir=Qt.redSqr(),er=qt.redIAdd(qt);er=er.redIAdd(er),er=er.redIAdd(er),er=er.redIAdd(er);var tr=Ot.redIAdd(Qt).redSqr().redISub(Lt).redISub(ir).redISub(er),sr=ct.redMul(tr);sr=sr.redIAdd(sr),sr=sr.redIAdd(sr);var ar=this.x.redMul(ir).redISub(sr);ar=ar.redIAdd(ar),ar=ar.redIAdd(ar);var hr=this.y.redMul(tr.redMul(er.redISub(tr)).redISub(Qt.redMul(ir)));hr=hr.redIAdd(hr),hr=hr.redIAdd(hr),hr=hr.redIAdd(hr);var _r=this.z.redAdd(Qt).redSqr().redISub(Ct).redISub(ir);return this.curve.jpoint(ar,hr,_r)},_e.prototype.mul=function(yt,ct){return yt=new e(yt,ct),this.curve._wnafMul(this,yt)},_e.prototype.eq=function(yt){if(yt.type==="affine")return this.eq(yt.toJ());if(this===yt)return!0;var ct=this.z.redSqr(),Ct=yt.z.redSqr();if(this.x.redMul(Ct).redISub(yt.x.redMul(ct)).cmpn(0)!==0)return!1;var qt=ct.redMul(this.z),Ot=Ct.redMul(yt.z);return this.y.redMul(Ot).redISub(yt.y.redMul(qt)).cmpn(0)===0},_e.prototype.eqXToP=function(yt){var ct=this.z.redSqr(),Ct=yt.toRed(this.curve.red).redMul(ct);if(this.x.cmp(Ct)===0)return!0;for(var qt=yt.clone(),Ot=this.curve.redN.redMul(ct);;){if(qt.iadd(this.curve.n),qt.cmp(this.curve.p)>=0)return!1;if(Ct.redIAdd(Ot),this.x.cmp(Ct)===0)return!0}},_e.prototype.inspect=function(){return this.isInfinity()?"<EC JPoint Infinity>":"<EC JPoint x: "+this.x.toString(16,2)+" y: "+this.y.toString(16,2)+" z: "+this.z.toString(16,2)+">"},_e.prototype.isInfinity=function(){return this.z.cmpn(0)===0},short}var mont,hasRequiredMont;function requireMont(){if(hasRequiredMont)return mont;hasRequiredMont=1;var s=requireBn$3(),e=requireInherits_browser(),o=requireBase$1(),a=requireUtils$1();function d(j){o.call(this,"mont",j),this.a=new s(j.a,16).toRed(this.red),this.b=new s(j.b,16).toRed(this.red),this.i4=new s(4).toRed(this.red).redInvm(),this.two=new s(2).toRed(this.red),this.a24=this.i4.redMul(this.a.redAdd(this.two))}e(d,o),mont=d,d.prototype.validate=function(_e){var pt=_e.normalize().x,yt=pt.redSqr(),ct=yt.redMul(pt).redAdd(yt.redMul(this.a)).redAdd(pt),Ct=ct.redSqrt();return Ct.redSqr().cmp(ct)===0};function c(j,_e,pt){o.BasePoint.call(this,j,"projective"),_e===null&&pt===null?(this.x=this.curve.one,this.z=this.curve.zero):(this.x=new s(_e,16),this.z=new s(pt,16),this.x.red||(this.x=this.x.toRed(this.curve.red)),this.z.red||(this.z=this.z.toRed(this.curve.red)))}return e(c,o.BasePoint),d.prototype.decodePoint=function(_e,pt){return this.point(a.toArray(_e,pt),1)},d.prototype.point=function(_e,pt){return new c(this,_e,pt)},d.prototype.pointFromJSON=function(_e){return c.fromJSON(this,_e)},c.prototype.precompute=function(){},c.prototype._encode=function(){return this.getX().toArray("be",this.curve.p.byteLength())},c.fromJSON=function(_e,pt){return new c(_e,pt[0],pt[1]||_e.one)},c.prototype.inspect=function(){return this.isInfinity()?"<EC Point Infinity>":"<EC Point x: "+this.x.fromRed().toString(16,2)+" z: "+this.z.fromRed().toString(16,2)+">"},c.prototype.isInfinity=function(){return this.z.cmpn(0)===0},c.prototype.dbl=function(){var _e=this.x.redAdd(this.z),pt=_e.redSqr(),yt=this.x.redSub(this.z),ct=yt.redSqr(),Ct=pt.redSub(ct),qt=pt.redMul(ct),Ot=Ct.redMul(ct.redAdd(this.curve.a24.redMul(Ct)));return this.curve.point(qt,Ot)},c.prototype.add=function(){throw new Error("Not supported on Montgomery curve")},c.prototype.diffAdd=function(_e,pt){var yt=this.x.redAdd(this.z),ct=this.x.redSub(this.z),Ct=_e.x.redAdd(_e.z),qt=_e.x.redSub(_e.z),Ot=qt.redMul(yt),Lt=Ct.redMul(ct),Qt=pt.z.redMul(Ot.redAdd(Lt).redSqr()),ir=pt.x.redMul(Ot.redISub(Lt).redSqr());return this.curve.point(Qt,ir)},c.prototype.mul=function(_e){for(var pt=_e.clone(),yt=this,ct=this.curve.point(null,null),Ct=this,qt=[];pt.cmpn(0)!==0;pt.iushrn(1))qt.push(pt.andln(1));for(var Ot=qt.length-1;Ot>=0;Ot--)qt[Ot]===0?(yt=yt.diffAdd(ct,Ct),ct=ct.dbl()):(ct=yt.diffAdd(ct,Ct),yt=yt.dbl());return ct},c.prototype.mulAdd=function(){throw new Error("Not supported on Montgomery curve")},c.prototype.jumlAdd=function(){throw new Error("Not supported on Montgomery curve")},c.prototype.eq=function(_e){return this.getX().cmp(_e.getX())===0},c.prototype.normalize=function(){return this.x=this.x.redMul(this.z.redInvm()),this.z=this.curve.one,this},c.prototype.getX=function(){return this.normalize(),this.x.fromRed()},mont}var edwards,hasRequiredEdwards;function requireEdwards(){if(hasRequiredEdwards)return edwards;hasRequiredEdwards=1;var s=requireUtils$1(),e=requireBn$3(),o=requireInherits_browser(),a=requireBase$1(),d=s.assert;function c(_e){this.twisted=(_e.a|0)!==1,this.mOneA=this.twisted&&(_e.a|0)===-1,this.extended=this.mOneA,a.call(this,"edwards",_e),this.a=new e(_e.a,16).umod(this.red.m),this.a=this.a.toRed(this.red),this.c=new e(_e.c,16).toRed(this.red),this.c2=this.c.redSqr(),this.d=new e(_e.d,16).toRed(this.red),this.dd=this.d.redAdd(this.d),d(!this.twisted||this.c.fromRed().cmpn(1)===0),this.oneC=(_e.c|0)===1}o(c,a),edwards=c,c.prototype._mulA=function(pt){return this.mOneA?pt.redNeg():this.a.redMul(pt)},c.prototype._mulC=function(pt){return this.oneC?pt:this.c.redMul(pt)},c.prototype.jpoint=function(pt,yt,ct,Ct){return this.point(pt,yt,ct,Ct)},c.prototype.pointFromX=function(pt,yt){pt=new e(pt,16),pt.red||(pt=pt.toRed(this.red));var ct=pt.redSqr(),Ct=this.c2.redSub(this.a.redMul(ct)),qt=this.one.redSub(this.c2.redMul(this.d).redMul(ct)),Ot=Ct.redMul(qt.redInvm()),Lt=Ot.redSqrt();if(Lt.redSqr().redSub(Ot).cmp(this.zero)!==0)throw new Error("invalid point");var Qt=Lt.fromRed().isOdd();return(yt&&!Qt||!yt&&Qt)&&(Lt=Lt.redNeg()),this.point(pt,Lt)},c.prototype.pointFromY=function(pt,yt){pt=new e(pt,16),pt.red||(pt=pt.toRed(this.red));var ct=pt.redSqr(),Ct=ct.redSub(this.c2),qt=ct.redMul(this.d).redMul(this.c2).redSub(this.a),Ot=Ct.redMul(qt.redInvm());if(Ot.cmp(this.zero)===0){if(yt)throw new Error("invalid point");return this.point(this.zero,pt)}var Lt=Ot.redSqrt();if(Lt.redSqr().redSub(Ot).cmp(this.zero)!==0)throw new Error("invalid point");return Lt.fromRed().isOdd()!==yt&&(Lt=Lt.redNeg()),this.point(Lt,pt)},c.prototype.validate=function(pt){if(pt.isInfinity())return!0;pt.normalize();var yt=pt.x.redSqr(),ct=pt.y.redSqr(),Ct=yt.redMul(this.a).redAdd(ct),qt=this.c2.redMul(this.one.redAdd(this.d.redMul(yt).redMul(ct)));return Ct.cmp(qt)===0};function j(_e,pt,yt,ct,Ct){a.BasePoint.call(this,_e,"projective"),pt===null&&yt===null&&ct===null?(this.x=this.curve.zero,this.y=this.curve.one,this.z=this.curve.one,this.t=this.curve.zero,this.zOne=!0):(this.x=new e(pt,16),this.y=new e(yt,16),this.z=ct?new e(ct,16):this.curve.one,this.t=Ct&&new e(Ct,16),this.x.red||(this.x=this.x.toRed(this.curve.red)),this.y.red||(this.y=this.y.toRed(this.curve.red)),this.z.red||(this.z=this.z.toRed(this.curve.red)),this.t&&!this.t.red&&(this.t=this.t.toRed(this.curve.red)),this.zOne=this.z===this.curve.one,this.curve.extended&&!this.t&&(this.t=this.x.redMul(this.y),this.zOne||(this.t=this.t.redMul(this.z.redInvm()))))}return o(j,a.BasePoint),c.prototype.pointFromJSON=function(pt){return j.fromJSON(this,pt)},c.prototype.point=function(pt,yt,ct,Ct){return new j(this,pt,yt,ct,Ct)},j.fromJSON=function(pt,yt){return new j(pt,yt[0],yt[1],yt[2])},j.prototype.inspect=function(){return this.isInfinity()?"<EC Point Infinity>":"<EC Point x: "+this.x.fromRed().toString(16,2)+" y: "+this.y.fromRed().toString(16,2)+" z: "+this.z.fromRed().toString(16,2)+">"},j.prototype.isInfinity=function(){return this.x.cmpn(0)===0&&(this.y.cmp(this.z)===0||this.zOne&&this.y.cmp(this.curve.c)===0)},j.prototype._extDbl=function(){var pt=this.x.redSqr(),yt=this.y.redSqr(),ct=this.z.redSqr();ct=ct.redIAdd(ct);var Ct=this.curve._mulA(pt),qt=this.x.redAdd(this.y).redSqr().redISub(pt).redISub(yt),Ot=Ct.redAdd(yt),Lt=Ot.redSub(ct),Qt=Ct.redSub(yt),ir=qt.redMul(Lt),er=Ot.redMul(Qt),tr=qt.redMul(Qt),sr=Lt.redMul(Ot);return this.curve.point(ir,er,sr,tr)},j.prototype._projDbl=function(){var pt=this.x.redAdd(this.y).redSqr(),yt=this.x.redSqr(),ct=this.y.redSqr(),Ct,qt,Ot,Lt,Qt,ir;if(this.curve.twisted){Lt=this.curve._mulA(yt);var er=Lt.redAdd(ct);this.zOne?(Ct=pt.redSub(yt).redSub(ct).redMul(er.redSub(this.curve.two)),qt=er.redMul(Lt.redSub(ct)),Ot=er.redSqr().redSub(er).redSub(er)):(Qt=this.z.redSqr(),ir=er.redSub(Qt).redISub(Qt),Ct=pt.redSub(yt).redISub(ct).redMul(ir),qt=er.redMul(Lt.redSub(ct)),Ot=er.redMul(ir))}else Lt=yt.redAdd(ct),Qt=this.curve._mulC(this.z).redSqr(),ir=Lt.redSub(Qt).redSub(Qt),Ct=this.curve._mulC(pt.redISub(Lt)).redMul(ir),qt=this.curve._mulC(Lt).redMul(yt.redISub(ct)),Ot=Lt.redMul(ir);return this.curve.point(Ct,qt,Ot)},j.prototype.dbl=function(){return this.isInfinity()?this:this.curve.extended?this._extDbl():this._projDbl()},j.prototype._extAdd=function(pt){var yt=this.y.redSub(this.x).redMul(pt.y.redSub(pt.x)),ct=this.y.redAdd(this.x).redMul(pt.y.redAdd(pt.x)),Ct=this.t.redMul(this.curve.dd).redMul(pt.t),qt=this.z.redMul(pt.z.redAdd(pt.z)),Ot=ct.redSub(yt),Lt=qt.redSub(Ct),Qt=qt.redAdd(Ct),ir=ct.redAdd(yt),er=Ot.redMul(Lt),tr=Qt.redMul(ir),sr=Ot.redMul(ir),ar=Lt.redMul(Qt);return this.curve.point(er,tr,ar,sr)},j.prototype._projAdd=function(pt){var yt=this.z.redMul(pt.z),ct=yt.redSqr(),Ct=this.x.redMul(pt.x),qt=this.y.redMul(pt.y),Ot=this.curve.d.redMul(Ct).redMul(qt),Lt=ct.redSub(Ot),Qt=ct.redAdd(Ot),ir=this.x.redAdd(this.y).redMul(pt.x.redAdd(pt.y)).redISub(Ct).redISub(qt),er=yt.redMul(Lt).redMul(ir),tr,sr;return this.curve.twisted?(tr=yt.redMul(Qt).redMul(qt.redSub(this.curve._mulA(Ct))),sr=Lt.redMul(Qt)):(tr=yt.redMul(Qt).redMul(qt.redSub(Ct)),sr=this.curve._mulC(Lt).redMul(Qt)),this.curve.point(er,tr,sr)},j.prototype.add=function(pt){return this.isInfinity()?pt:pt.isInfinity()?this:this.curve.extended?this._extAdd(pt):this._projAdd(pt)},j.prototype.mul=function(pt){return this._hasDoubles(pt)?this.curve._fixedNafMul(this,pt):this.curve._wnafMul(this,pt)},j.prototype.mulAdd=function(pt,yt,ct){return this.curve._wnafMulAdd(1,[this,yt],[pt,ct],2,!1)},j.prototype.jmulAdd=function(pt,yt,ct){return this.curve._wnafMulAdd(1,[this,yt],[pt,ct],2,!0)},j.prototype.normalize=function(){if(this.zOne)return this;var pt=this.z.redInvm();return this.x=this.x.redMul(pt),this.y=this.y.redMul(pt),this.t&&(this.t=this.t.redMul(pt)),this.z=this.curve.one,this.zOne=!0,this},j.prototype.neg=function(){return this.curve.point(this.x.redNeg(),this.y,this.z,this.t&&this.t.redNeg())},j.prototype.getX=function(){return this.normalize(),this.x.fromRed()},j.prototype.getY=function(){return this.normalize(),this.y.fromRed()},j.prototype.eq=function(pt){return this===pt||this.getX().cmp(pt.getX())===0&&this.getY().cmp(pt.getY())===0},j.prototype.eqXToP=function(pt){var yt=pt.toRed(this.curve.red).redMul(this.z);if(this.x.cmp(yt)===0)return!0;for(var ct=pt.clone(),Ct=this.curve.redN.redMul(this.z);;){if(ct.iadd(this.curve.n),ct.cmp(this.curve.p)>=0)return!1;if(yt.redIAdd(Ct),this.x.cmp(yt)===0)return!0}},j.prototype.toP=j.prototype.normalize,j.prototype.mixedAdd=j.prototype.add,edwards}var hasRequiredCurve;function requireCurve(){return hasRequiredCurve||(hasRequiredCurve=1,function(s){var e=s;e.base=requireBase$1(),e.short=requireShort(),e.mont=requireMont(),e.edwards=requireEdwards()}(curve)),curve}var curves={},hash={},utils={},hasRequiredUtils;function requireUtils(){if(hasRequiredUtils)return utils;hasRequiredUtils=1;var s=requireMinimalisticAssert(),e=requireInherits_browser();utils.inherits=e;function o(h,_){return(h.charCodeAt(_)&64512)!==55296||_<0||_+1>=h.length?!1:(h.charCodeAt(_+1)&64512)===56320}function a(h,_){if(Array.isArray(h))return h.slice();if(!h)return[];var b=[];if(typeof h=="string")if(_){if(_==="hex")for(h=h.replace(/[^a-z0-9]+/ig,""),h.length%2!==0&&(h="0"+h),Rt=0;Rt<h.length;Rt+=2)b.push(parseInt(h[Rt]+h[Rt+1],16))}else for(var lt=0,Rt=0;Rt<h.length;Rt++){var kt=h.charCodeAt(Rt);kt<128?b[lt++]=kt:kt<2048?(b[lt++]=kt>>6|192,b[lt++]=kt&63|128):o(h,Rt)?(kt=65536+((kt&1023)<<10)+(h.charCodeAt(++Rt)&1023),b[lt++]=kt>>18|240,b[lt++]=kt>>12&63|128,b[lt++]=kt>>6&63|128,b[lt++]=kt&63|128):(b[lt++]=kt>>12|224,b[lt++]=kt>>6&63|128,b[lt++]=kt&63|128)}else for(Rt=0;Rt<h.length;Rt++)b[Rt]=h[Rt]|0;return b}utils.toArray=a;function d(h){for(var _="",b=0;b<h.length;b++)_+=_e(h[b].toString(16));return _}utils.toHex=d;function c(h){var _=h>>>24|h>>>8&65280|h<<8&16711680|(h&255)<<24;return _>>>0}utils.htonl=c;function j(h,_){for(var b="",lt=0;lt<h.length;lt++){var Rt=h[lt];_==="little"&&(Rt=c(Rt)),b+=pt(Rt.toString(16))}return b}utils.toHex32=j;function _e(h){return h.length===1?"0"+h:h}utils.zero2=_e;function pt(h){return h.length===7?"0"+h:h.length===6?"00"+h:h.length===5?"000"+h:h.length===4?"0000"+h:h.length===3?"00000"+h:h.length===2?"000000"+h:h.length===1?"0000000"+h:h}utils.zero8=pt;function yt(h,_,b,lt){var Rt=b-_;s(Rt%4===0);for(var kt=new Array(Rt/4),Ft=0,xt=_;Ft<kt.length;Ft++,xt+=4){var g;lt==="big"?g=h[xt]<<24|h[xt+1]<<16|h[xt+2]<<8|h[xt+3]:g=h[xt+3]<<24|h[xt+2]<<16|h[xt+1]<<8|h[xt],kt[Ft]=g>>>0}return kt}utils.join32=yt;function ct(h,_){for(var b=new Array(h.length*4),lt=0,Rt=0;lt<h.length;lt++,Rt+=4){var kt=h[lt];_==="big"?(b[Rt]=kt>>>24,b[Rt+1]=kt>>>16&255,b[Rt+2]=kt>>>8&255,b[Rt+3]=kt&255):(b[Rt+3]=kt>>>24,b[Rt+2]=kt>>>16&255,b[Rt+1]=kt>>>8&255,b[Rt]=kt&255)}return b}utils.split32=ct;function Ct(h,_){return h>>>_|h<<32-_}utils.rotr32=Ct;function qt(h,_){return h<<_|h>>>32-_}utils.rotl32=qt;function Ot(h,_){return h+_>>>0}utils.sum32=Ot;function Lt(h,_,b){return h+_+b>>>0}utils.sum32_3=Lt;function Qt(h,_,b,lt){return h+_+b+lt>>>0}utils.sum32_4=Qt;function ir(h,_,b,lt,Rt){return h+_+b+lt+Rt>>>0}utils.sum32_5=ir;function er(h,_,b,lt){var Rt=h[_],kt=h[_+1],Ft=lt+kt>>>0,xt=(Ft<lt?1:0)+b+Rt;h[_]=xt>>>0,h[_+1]=Ft}utils.sum64=er;function tr(h,_,b,lt){var Rt=_+lt>>>0,kt=(Rt<_?1:0)+h+b;return kt>>>0}utils.sum64_hi=tr;function sr(h,_,b,lt){var Rt=_+lt;return Rt>>>0}utils.sum64_lo=sr;function ar(h,_,b,lt,Rt,kt,Ft,xt){var g=0,wt=_;wt=wt+lt>>>0,g+=wt<_?1:0,wt=wt+kt>>>0,g+=wt<kt?1:0,wt=wt+xt>>>0,g+=wt<xt?1:0;var nr=h+b+Rt+Ft+g;return nr>>>0}utils.sum64_4_hi=ar;function hr(h,_,b,lt,Rt,kt,Ft,xt){var g=_+lt+kt+xt;return g>>>0}utils.sum64_4_lo=hr;function _r(h,_,b,lt,Rt,kt,Ft,xt,g,wt){var nr=0,or=_;or=or+lt>>>0,nr+=or<_?1:0,or=or+kt>>>0,nr+=or<kt?1:0,or=or+xt>>>0,nr+=or<xt?1:0,or=or+wt>>>0,nr+=or<wt?1:0;var cr=h+b+Rt+Ft+g+nr;return cr>>>0}utils.sum64_5_hi=_r;function dr(h,_,b,lt,Rt,kt,Ft,xt,g,wt){var nr=_+lt+kt+xt+wt;return nr>>>0}utils.sum64_5_lo=dr;function ur(h,_,b){var lt=_<<32-b|h>>>b;return lt>>>0}utils.rotr64_hi=ur;function lr(h,_,b){var lt=h<<32-b|_>>>b;return lt>>>0}utils.rotr64_lo=lr;function gr(h,_,b){return h>>>b}utils.shr64_hi=gr;function Mt(h,_,b){var lt=h<<32-b|_>>>b;return lt>>>0}return utils.shr64_lo=Mt,utils}var common$1={},hasRequiredCommon$1;function requireCommon$1(){if(hasRequiredCommon$1)return common$1;hasRequiredCommon$1=1;var s=requireUtils(),e=requireMinimalisticAssert();function o(){this.pending=null,this.pendingTotal=0,this.blockSize=this.constructor.blockSize,this.outSize=this.constructor.outSize,this.hmacStrength=this.constructor.hmacStrength,this.padLength=this.constructor.padLength/8,this.endian="big",this._delta8=this.blockSize/8,this._delta32=this.blockSize/32}return common$1.BlockHash=o,o.prototype.update=function(d,c){if(d=s.toArray(d,c),this.pending?this.pending=this.pending.concat(d):this.pending=d,this.pendingTotal+=d.length,this.pending.length>=this._delta8){d=this.pending;var j=d.length%this._delta8;this.pending=d.slice(d.length-j,d.length),this.pending.length===0&&(this.pending=null),d=s.join32(d,0,d.length-j,this.endian);for(var _e=0;_e<d.length;_e+=this._delta32)this._update(d,_e,_e+this._delta32)}return this},o.prototype.digest=function(d){return this.update(this._pad()),e(this.pending===null),this._digest(d)},o.prototype._pad=function(){var d=this.pendingTotal,c=this._delta8,j=c-(d+this.padLength)%c,_e=new Array(j+this.padLength);_e[0]=128;for(var pt=1;pt<j;pt++)_e[pt]=0;if(d<<=3,this.endian==="big"){for(var yt=8;yt<this.padLength;yt++)_e[pt++]=0;_e[pt++]=0,_e[pt++]=0,_e[pt++]=0,_e[pt++]=0,_e[pt++]=d>>>24&255,_e[pt++]=d>>>16&255,_e[pt++]=d>>>8&255,_e[pt++]=d&255}else for(_e[pt++]=d&255,_e[pt++]=d>>>8&255,_e[pt++]=d>>>16&255,_e[pt++]=d>>>24&255,_e[pt++]=0,_e[pt++]=0,_e[pt++]=0,_e[pt++]=0,yt=8;yt<this.padLength;yt++)_e[pt++]=0;return _e},common$1}var sha={},common={},hasRequiredCommon;function requireCommon(){if(hasRequiredCommon)return common;hasRequiredCommon=1;var s=requireUtils(),e=s.rotr32;function o(ct,Ct,qt,Ot){if(ct===0)return a(Ct,qt,Ot);if(ct===1||ct===3)return c(Ct,qt,Ot);if(ct===2)return d(Ct,qt,Ot)}common.ft_1=o;function a(ct,Ct,qt){return ct&Ct^~ct&qt}common.ch32=a;function d(ct,Ct,qt){return ct&Ct^ct&qt^Ct&qt}common.maj32=d;function c(ct,Ct,qt){return ct^Ct^qt}common.p32=c;function j(ct){return e(ct,2)^e(ct,13)^e(ct,22)}common.s0_256=j;function _e(ct){return e(ct,6)^e(ct,11)^e(ct,25)}common.s1_256=_e;function pt(ct){return e(ct,7)^e(ct,18)^ct>>>3}common.g0_256=pt;function yt(ct){return e(ct,17)^e(ct,19)^ct>>>10}return common.g1_256=yt,common}var _1,hasRequired_1;function require_1(){if(hasRequired_1)return _1;hasRequired_1=1;var s=requireUtils(),e=requireCommon$1(),o=requireCommon(),a=s.rotl32,d=s.sum32,c=s.sum32_5,j=o.ft_1,_e=e.BlockHash,pt=[1518500249,1859775393,2400959708,3395469782];function yt(){if(!(this instanceof yt))return new yt;_e.call(this),this.h=[1732584193,4023233417,2562383102,271733878,3285377520],this.W=new Array(80)}return s.inherits(yt,_e),_1=yt,yt.blockSize=512,yt.outSize=160,yt.hmacStrength=80,yt.padLength=64,yt.prototype._update=function(Ct,qt){for(var Ot=this.W,Lt=0;Lt<16;Lt++)Ot[Lt]=Ct[qt+Lt];for(;Lt<Ot.length;Lt++)Ot[Lt]=a(Ot[Lt-3]^Ot[Lt-8]^Ot[Lt-14]^Ot[Lt-16],1);var Qt=this.h[0],ir=this.h[1],er=this.h[2],tr=this.h[3],sr=this.h[4];for(Lt=0;Lt<Ot.length;Lt++){var ar=~~(Lt/20),hr=c(a(Qt,5),j(ar,ir,er,tr),sr,Ot[Lt],pt[ar]);sr=tr,tr=er,er=a(ir,30),ir=Qt,Qt=hr}this.h[0]=d(this.h[0],Qt),this.h[1]=d(this.h[1],ir),this.h[2]=d(this.h[2],er),this.h[3]=d(this.h[3],tr),this.h[4]=d(this.h[4],sr)},yt.prototype._digest=function(Ct){return Ct==="hex"?s.toHex32(this.h,"big"):s.split32(this.h,"big")},_1}var _256,hasRequired_256;function require_256(){if(hasRequired_256)return _256;hasRequired_256=1;var s=requireUtils(),e=requireCommon$1(),o=requireCommon(),a=requireMinimalisticAssert(),d=s.sum32,c=s.sum32_4,j=s.sum32_5,_e=o.ch32,pt=o.maj32,yt=o.s0_256,ct=o.s1_256,Ct=o.g0_256,qt=o.g1_256,Ot=e.BlockHash,Lt=[1116352408,1899447441,3049323471,3921009573,961987163,1508970993,2453635748,2870763221,3624381080,310598401,607225278,1426881987,1925078388,2162078206,2614888103,3248222580,3835390401,4022224774,264347078,604807628,770255983,1249150122,1555081692,1996064986,2554220882,2821834349,2952996808,3210313671,3336571891,3584528711,113926993,338241895,666307205,773529912,1294757372,1396182291,1695183700,1986661051,2177026350,2456956037,2730485921,2820302411,3259730800,3345764771,3516065817,3600352804,4094571909,275423344,430227734,506948616,659060556,883997877,958139571,1322822218,1537002063,1747873779,1955562222,2024104815,2227730452,2361852424,2428436474,2756734187,3204031479,3329325298];function Qt(){if(!(this instanceof Qt))return new Qt;Ot.call(this),this.h=[1779033703,3144134277,1013904242,2773480762,1359893119,2600822924,528734635,1541459225],this.k=Lt,this.W=new Array(64)}return s.inherits(Qt,Ot),_256=Qt,Qt.blockSize=512,Qt.outSize=256,Qt.hmacStrength=192,Qt.padLength=64,Qt.prototype._update=function(er,tr){for(var sr=this.W,ar=0;ar<16;ar++)sr[ar]=er[tr+ar];for(;ar<sr.length;ar++)sr[ar]=c(qt(sr[ar-2]),sr[ar-7],Ct(sr[ar-15]),sr[ar-16]);var hr=this.h[0],_r=this.h[1],dr=this.h[2],ur=this.h[3],lr=this.h[4],gr=this.h[5],Mt=this.h[6],h=this.h[7];for(a(this.k.length===sr.length),ar=0;ar<sr.length;ar++){var _=j(h,ct(lr),_e(lr,gr,Mt),this.k[ar],sr[ar]),b=d(yt(hr),pt(hr,_r,dr));h=Mt,Mt=gr,gr=lr,lr=d(ur,_),ur=dr,dr=_r,_r=hr,hr=d(_,b)}this.h[0]=d(this.h[0],hr),this.h[1]=d(this.h[1],_r),this.h[2]=d(this.h[2],dr),this.h[3]=d(this.h[3],ur),this.h[4]=d(this.h[4],lr),this.h[5]=d(this.h[5],gr),this.h[6]=d(this.h[6],Mt),this.h[7]=d(this.h[7],h)},Qt.prototype._digest=function(er){return er==="hex"?s.toHex32(this.h,"big"):s.split32(this.h,"big")},_256}var _224,hasRequired_224;function require_224(){if(hasRequired_224)return _224;hasRequired_224=1;var s=requireUtils(),e=require_256();function o(){if(!(this instanceof o))return new o;e.call(this),this.h=[3238371032,914150663,812702999,4144912697,4290775857,1750603025,1694076839,3204075428]}return s.inherits(o,e),_224=o,o.blockSize=512,o.outSize=224,o.hmacStrength=192,o.padLength=64,o.prototype._digest=function(d){return d==="hex"?s.toHex32(this.h.slice(0,7),"big"):s.split32(this.h.slice(0,7),"big")},_224}var _512,hasRequired_512;function require_512(){if(hasRequired_512)return _512;hasRequired_512=1;var s=requireUtils(),e=requireCommon$1(),o=requireMinimalisticAssert(),a=s.rotr64_hi,d=s.rotr64_lo,c=s.shr64_hi,j=s.shr64_lo,_e=s.sum64,pt=s.sum64_hi,yt=s.sum64_lo,ct=s.sum64_4_hi,Ct=s.sum64_4_lo,qt=s.sum64_5_hi,Ot=s.sum64_5_lo,Lt=e.BlockHash,Qt=[1116352408,3609767458,1899447441,602891725,3049323471,3964484399,3921009573,2173295548,961987163,4081628472,1508970993,3053834265,2453635748,2937671579,2870763221,3664609560,3624381080,2734883394,310598401,1164996542,607225278,1323610764,1426881987,3590304994,1925078388,4068182383,2162078206,991336113,2614888103,633803317,3248222580,3479774868,3835390401,2666613458,4022224774,944711139,264347078,2341262773,604807628,2007800933,770255983,1495990901,1249150122,1856431235,1555081692,3175218132,1996064986,2198950837,2554220882,3999719339,2821834349,766784016,2952996808,2566594879,3210313671,3203337956,3336571891,1034457026,3584528711,2466948901,113926993,3758326383,338241895,168717936,666307205,1188179964,773529912,1546045734,1294757372,1522805485,1396182291,2643833823,1695183700,2343527390,1986661051,1014477480,2177026350,1206759142,2456956037,344077627,2730485921,1290863460,2820302411,3158454273,3259730800,3505952657,3345764771,106217008,3516065817,3606008344,3600352804,1432725776,4094571909,1467031594,275423344,851169720,430227734,3100823752,506948616,1363258195,659060556,3750685593,883997877,3785050280,958139571,3318307427,1322822218,3812723403,1537002063,2003034995,1747873779,3602036899,1955562222,1575990012,2024104815,1125592928,2227730452,2716904306,2361852424,442776044,2428436474,593698344,2756734187,3733110249,3204031479,2999351573,3329325298,3815920427,3391569614,3928383900,3515267271,566280711,3940187606,3454069534,4118630271,4000239992,116418474,1914138554,174292421,2731055270,289380356,3203993006,460393269,320620315,685471733,587496836,852142971,1086792851,1017036298,365543100,1126000580,2618297676,1288033470,3409855158,1501505948,4234509866,1607167915,987167468,1816402316,1246189591];function ir(){if(!(this instanceof ir))return new ir;Lt.call(this),this.h=[1779033703,4089235720,3144134277,2227873595,1013904242,4271175723,2773480762,1595750129,1359893119,2917565137,2600822924,725511199,528734635,4215389547,1541459225,327033209],this.k=Qt,this.W=new Array(160)}s.inherits(ir,Lt),_512=ir,ir.blockSize=1024,ir.outSize=512,ir.hmacStrength=192,ir.padLength=128,ir.prototype._prepareBlock=function(b,lt){for(var Rt=this.W,kt=0;kt<32;kt++)Rt[kt]=b[lt+kt];for(;kt<Rt.length;kt+=2){var Ft=Mt(Rt[kt-4],Rt[kt-3]),xt=h(Rt[kt-4],Rt[kt-3]),g=Rt[kt-14],wt=Rt[kt-13],nr=lr(Rt[kt-30],Rt[kt-29]),or=gr(Rt[kt-30],Rt[kt-29]),cr=Rt[kt-32],Rr=Rt[kt-31];Rt[kt]=ct(Ft,xt,g,wt,nr,or,cr,Rr),Rt[kt+1]=Ct(Ft,xt,g,wt,nr,or,cr,Rr)}},ir.prototype._update=function(b,lt){this._prepareBlock(b,lt);var Rt=this.W,kt=this.h[0],Ft=this.h[1],xt=this.h[2],g=this.h[3],wt=this.h[4],nr=this.h[5],or=this.h[6],cr=this.h[7],Rr=this.h[8],Ar=this.h[9],pr=this.h[10],wr=this.h[11],Tr=this.h[12],Ir=this.h[13],Sr=this.h[14],br=this.h[15];o(this.k.length===Rt.length);for(var kr=0;kr<Rt.length;kr+=2){var Qr=Sr,qr=br,$r=dr(Rr,Ar),gn=ur(Rr,Ar),Lr=er(Rr,Ar,pr,wr,Tr),Dr=tr(Rr,Ar,pr,wr,Tr,Ir),En=this.k[kr],Fr=this.k[kr+1],zr=Rt[kr],yn=Rt[kr+1],Nr=qt(Qr,qr,$r,gn,Lr,Dr,En,Fr,zr,yn),Wr=Ot(Qr,qr,$r,gn,Lr,Dr,En,Fr,zr,yn);Qr=hr(kt,Ft),qr=_r(kt,Ft),$r=sr(kt,Ft,xt,g,wt),gn=ar(kt,Ft,xt,g,wt,nr);var xn=pt(Qr,qr,$r,gn),Or=yt(Qr,qr,$r,gn);Sr=Tr,br=Ir,Tr=pr,Ir=wr,pr=Rr,wr=Ar,Rr=pt(or,cr,Nr,Wr),Ar=yt(cr,cr,Nr,Wr),or=wt,cr=nr,wt=xt,nr=g,xt=kt,g=Ft,kt=pt(Nr,Wr,xn,Or),Ft=yt(Nr,Wr,xn,Or)}_e(this.h,0,kt,Ft),_e(this.h,2,xt,g),_e(this.h,4,wt,nr),_e(this.h,6,or,cr),_e(this.h,8,Rr,Ar),_e(this.h,10,pr,wr),_e(this.h,12,Tr,Ir),_e(this.h,14,Sr,br)},ir.prototype._digest=function(b){return b==="hex"?s.toHex32(this.h,"big"):s.split32(this.h,"big")};function er(_,b,lt,Rt,kt){var Ft=_&lt^~_&kt;return Ft<0&&(Ft+=4294967296),Ft}function tr(_,b,lt,Rt,kt,Ft){var xt=b&Rt^~b&Ft;return xt<0&&(xt+=4294967296),xt}function sr(_,b,lt,Rt,kt){var Ft=_&lt^_&kt^lt&kt;return Ft<0&&(Ft+=4294967296),Ft}function ar(_,b,lt,Rt,kt,Ft){var xt=b&Rt^b&Ft^Rt&Ft;return xt<0&&(xt+=4294967296),xt}function hr(_,b){var lt=a(_,b,28),Rt=a(b,_,2),kt=a(b,_,7),Ft=lt^Rt^kt;return Ft<0&&(Ft+=4294967296),Ft}function _r(_,b){var lt=d(_,b,28),Rt=d(b,_,2),kt=d(b,_,7),Ft=lt^Rt^kt;return Ft<0&&(Ft+=4294967296),Ft}function dr(_,b){var lt=a(_,b,14),Rt=a(_,b,18),kt=a(b,_,9),Ft=lt^Rt^kt;return Ft<0&&(Ft+=4294967296),Ft}function ur(_,b){var lt=d(_,b,14),Rt=d(_,b,18),kt=d(b,_,9),Ft=lt^Rt^kt;return Ft<0&&(Ft+=4294967296),Ft}function lr(_,b){var lt=a(_,b,1),Rt=a(_,b,8),kt=c(_,b,7),Ft=lt^Rt^kt;return Ft<0&&(Ft+=4294967296),Ft}function gr(_,b){var lt=d(_,b,1),Rt=d(_,b,8),kt=j(_,b,7),Ft=lt^Rt^kt;return Ft<0&&(Ft+=4294967296),Ft}function Mt(_,b){var lt=a(_,b,19),Rt=a(b,_,29),kt=c(_,b,6),Ft=lt^Rt^kt;return Ft<0&&(Ft+=4294967296),Ft}function h(_,b){var lt=d(_,b,19),Rt=d(b,_,29),kt=j(_,b,6),Ft=lt^Rt^kt;return Ft<0&&(Ft+=4294967296),Ft}return _512}var _384,hasRequired_384;function require_384(){if(hasRequired_384)return _384;hasRequired_384=1;var s=requireUtils(),e=require_512();function o(){if(!(this instanceof o))return new o;e.call(this),this.h=[3418070365,3238371032,1654270250,914150663,2438529370,812702999,355462360,4144912697,1731405415,4290775857,2394180231,1750603025,3675008525,1694076839,1203062813,3204075428]}return s.inherits(o,e),_384=o,o.blockSize=1024,o.outSize=384,o.hmacStrength=192,o.padLength=128,o.prototype._digest=function(d){return d==="hex"?s.toHex32(this.h.slice(0,12),"big"):s.split32(this.h.slice(0,12),"big")},_384}var hasRequiredSha;function requireSha(){return hasRequiredSha||(hasRequiredSha=1,sha.sha1=require_1(),sha.sha224=require_224(),sha.sha256=require_256(),sha.sha384=require_384(),sha.sha512=require_512()),sha}var ripemd={},hasRequiredRipemd;function requireRipemd(){if(hasRequiredRipemd)return ripemd;hasRequiredRipemd=1;var s=requireUtils(),e=requireCommon$1(),o=s.rotl32,a=s.sum32,d=s.sum32_3,c=s.sum32_4,j=e.BlockHash;function _e(){if(!(this instanceof _e))return new _e;j.call(this),this.h=[1732584193,4023233417,2562383102,271733878,3285377520],this.endian="little"}s.inherits(_e,j),ripemd.ripemd160=_e,_e.blockSize=512,_e.outSize=160,_e.hmacStrength=192,_e.padLength=64,_e.prototype._update=function(ir,er){for(var tr=this.h[0],sr=this.h[1],ar=this.h[2],hr=this.h[3],_r=this.h[4],dr=tr,ur=sr,lr=ar,gr=hr,Mt=_r,h=0;h<80;h++){var _=a(o(c(tr,pt(h,sr,ar,hr),ir[Ct[h]+er],yt(h)),Ot[h]),_r);tr=_r,_r=hr,hr=o(ar,10),ar=sr,sr=_,_=a(o(c(dr,pt(79-h,ur,lr,gr),ir[qt[h]+er],ct(h)),Lt[h]),Mt),dr=Mt,Mt=gr,gr=o(lr,10),lr=ur,ur=_}_=d(this.h[1],ar,gr),this.h[1]=d(this.h[2],hr,Mt),this.h[2]=d(this.h[3],_r,dr),this.h[3]=d(this.h[4],tr,ur),this.h[4]=d(this.h[0],sr,lr),this.h[0]=_},_e.prototype._digest=function(ir){return ir==="hex"?s.toHex32(this.h,"little"):s.split32(this.h,"little")};function pt(Qt,ir,er,tr){return Qt<=15?ir^er^tr:Qt<=31?ir&er|~ir&tr:Qt<=47?(ir|~er)^tr:Qt<=63?ir&tr|er&~tr:ir^(er|~tr)}function yt(Qt){return Qt<=15?0:Qt<=31?1518500249:Qt<=47?1859775393:Qt<=63?2400959708:2840853838}function ct(Qt){return Qt<=15?1352829926:Qt<=31?1548603684:Qt<=47?1836072691:Qt<=63?2053994217:0}var Ct=[0,1,2,3,4,5,6,7,8,9,10,11,12,13,14,15,7,4,13,1,10,6,15,3,12,0,9,5,2,14,11,8,3,10,14,4,9,15,8,1,2,7,0,6,13,11,5,12,1,9,11,10,0,8,12,4,13,3,7,15,14,5,6,2,4,0,5,9,7,12,2,10,14,1,3,8,11,6,15,13],qt=[5,14,7,0,9,2,11,4,13,6,15,8,1,10,3,12,6,11,3,7,0,13,5,10,14,15,8,12,4,9,1,2,15,5,1,3,7,14,6,9,11,8,12,2,10,0,4,13,8,6,4,1,3,11,15,0,5,12,2,13,9,7,10,14,12,15,10,4,1,5,8,7,6,2,13,14,0,3,9,11],Ot=[11,14,15,12,5,8,7,9,11,13,14,15,6,7,9,8,7,6,8,13,11,9,7,15,7,12,15,9,11,7,13,12,11,13,6,7,14,9,13,15,14,8,13,6,5,12,7,5,11,12,14,15,14,15,9,8,9,14,5,6,8,6,5,12,9,15,5,11,6,8,13,12,5,12,13,14,11,8,5,6],Lt=[8,9,9,11,13,15,15,5,7,7,8,11,14,14,12,6,9,13,15,7,12,8,9,11,7,7,12,7,6,15,13,11,9,7,15,11,8,6,6,14,12,13,5,14,13,13,7,5,15,5,8,11,14,14,6,14,6,9,12,9,12,5,15,8,8,5,12,9,12,5,14,6,8,13,6,5,15,13,11,11];return ripemd}var hmac$1,hasRequiredHmac$1;function requireHmac$1(){if(hasRequiredHmac$1)return hmac$1;hasRequiredHmac$1=1;var s=requireUtils(),e=requireMinimalisticAssert();function o(a,d,c){if(!(this instanceof o))return new o(a,d,c);this.Hash=a,this.blockSize=a.blockSize/8,this.outSize=a.outSize/8,this.inner=null,this.outer=null,this._init(s.toArray(d,c))}return hmac$1=o,o.prototype._init=function(d){d.length>this.blockSize&&(d=new this.Hash().update(d).digest()),e(d.length<=this.blockSize);for(var c=d.length;c<this.blockSize;c++)d.push(0);for(c=0;c<d.length;c++)d[c]^=54;for(this.inner=new this.Hash().update(d),c=0;c<d.length;c++)d[c]^=106;this.outer=new this.Hash().update(d)},o.prototype.update=function(d,c){return this.inner.update(d,c),this},o.prototype.digest=function(d){return this.outer.update(this.inner.digest()),this.outer.digest(d)},hmac$1}var hasRequiredHash;function requireHash(){return hasRequiredHash||(hasRequiredHash=1,function(s){var e=s;e.utils=requireUtils(),e.common=requireCommon$1(),e.sha=requireSha(),e.ripemd=requireRipemd(),e.hmac=requireHmac$1(),e.sha1=e.sha.sha1,e.sha256=e.sha.sha256,e.sha224=e.sha.sha224,e.sha384=e.sha.sha384,e.sha512=e.sha.sha512,e.ripemd160=e.ripemd.ripemd160}(hash)),hash}var secp256k1,hasRequiredSecp256k1;function requireSecp256k1(){return hasRequiredSecp256k1||(hasRequiredSecp256k1=1,secp256k1={doubles:{step:4,points:[["e60fce93b59e9ec53011aabc21c23e97b2a31369b87a5ae9c44ee89e2a6dec0a","f7e3507399e595929db99f34f57937101296891e44d23f0be1f32cce69616821"],["8282263212c609d9ea2a6e3e172de238d8c39cabd5ac1ca10646e23fd5f51508","11f8a8098557dfe45e8256e830b60ace62d613ac2f7b17bed31b6eaff6e26caf"],["175e159f728b865a72f99cc6c6fc846de0b93833fd2222ed73fce5b551e5b739","d3506e0d9e3c79eba4ef97a51ff71f5eacb5955add24345c6efa6ffee9fed695"],["363d90d447b00c9c99ceac05b6262ee053441c7e55552ffe526bad8f83ff4640","4e273adfc732221953b445397f3363145b9a89008199ecb62003c7f3bee9de9"],["8b4b5f165df3c2be8c6244b5b745638843e4a781a15bcd1b69f79a55dffdf80c","4aad0a6f68d308b4b3fbd7813ab0da04f9e336546162ee56b3eff0c65fd4fd36"],["723cbaa6e5db996d6bf771c00bd548c7b700dbffa6c0e77bcb6115925232fcda","96e867b5595cc498a921137488824d6e2660a0653779494801dc069d9eb39f5f"],["eebfa4d493bebf98ba5feec812c2d3b50947961237a919839a533eca0e7dd7fa","5d9a8ca3970ef0f269ee7edaf178089d9ae4cdc3a711f712ddfd4fdae1de8999"],["100f44da696e71672791d0a09b7bde459f1215a29b3c03bfefd7835b39a48db0","cdd9e13192a00b772ec8f3300c090666b7ff4a18ff5195ac0fbd5cd62bc65a09"],["e1031be262c7ed1b1dc9227a4a04c017a77f8d4464f3b3852c8acde6e534fd2d","9d7061928940405e6bb6a4176597535af292dd419e1ced79a44f18f29456a00d"],["feea6cae46d55b530ac2839f143bd7ec5cf8b266a41d6af52d5e688d9094696d","e57c6b6c97dce1bab06e4e12bf3ecd5c981c8957cc41442d3155debf18090088"],["da67a91d91049cdcb367be4be6ffca3cfeed657d808583de33fa978bc1ec6cb1","9bacaa35481642bc41f463f7ec9780e5dec7adc508f740a17e9ea8e27a68be1d"],["53904faa0b334cdda6e000935ef22151ec08d0f7bb11069f57545ccc1a37b7c0","5bc087d0bc80106d88c9eccac20d3c1c13999981e14434699dcb096b022771c8"],["8e7bcd0bd35983a7719cca7764ca906779b53a043a9b8bcaeff959f43ad86047","10b7770b2a3da4b3940310420ca9514579e88e2e47fd68b3ea10047e8460372a"],["385eed34c1cdff21e6d0818689b81bde71a7f4f18397e6690a841e1599c43862","283bebc3e8ea23f56701de19e9ebf4576b304eec2086dc8cc0458fe5542e5453"],["6f9d9b803ecf191637c73a4413dfa180fddf84a5947fbc9c606ed86c3fac3a7","7c80c68e603059ba69b8e2a30e45c4d47ea4dd2f5c281002d86890603a842160"],["3322d401243c4e2582a2147c104d6ecbf774d163db0f5e5313b7e0e742d0e6bd","56e70797e9664ef5bfb019bc4ddaf9b72805f63ea2873af624f3a2e96c28b2a0"],["85672c7d2de0b7da2bd1770d89665868741b3f9af7643397721d74d28134ab83","7c481b9b5b43b2eb6374049bfa62c2e5e77f17fcc5298f44c8e3094f790313a6"],["948bf809b1988a46b06c9f1919413b10f9226c60f668832ffd959af60c82a0a","53a562856dcb6646dc6b74c5d1c3418c6d4dff08c97cd2bed4cb7f88d8c8e589"],["6260ce7f461801c34f067ce0f02873a8f1b0e44dfc69752accecd819f38fd8e8","bc2da82b6fa5b571a7f09049776a1ef7ecd292238051c198c1a84e95b2b4ae17"],["e5037de0afc1d8d43d8348414bbf4103043ec8f575bfdc432953cc8d2037fa2d","4571534baa94d3b5f9f98d09fb990bddbd5f5b03ec481f10e0e5dc841d755bda"],["e06372b0f4a207adf5ea905e8f1771b4e7e8dbd1c6a6c5b725866a0ae4fce725","7a908974bce18cfe12a27bb2ad5a488cd7484a7787104870b27034f94eee31dd"],["213c7a715cd5d45358d0bbf9dc0ce02204b10bdde2a3f58540ad6908d0559754","4b6dad0b5ae462507013ad06245ba190bb4850f5f36a7eeddff2c27534b458f2"],["4e7c272a7af4b34e8dbb9352a5419a87e2838c70adc62cddf0cc3a3b08fbd53c","17749c766c9d0b18e16fd09f6def681b530b9614bff7dd33e0b3941817dcaae6"],["fea74e3dbe778b1b10f238ad61686aa5c76e3db2be43057632427e2840fb27b6","6e0568db9b0b13297cf674deccb6af93126b596b973f7b77701d3db7f23cb96f"],["76e64113f677cf0e10a2570d599968d31544e179b760432952c02a4417bdde39","c90ddf8dee4e95cf577066d70681f0d35e2a33d2b56d2032b4b1752d1901ac01"],["c738c56b03b2abe1e8281baa743f8f9a8f7cc643df26cbee3ab150242bcbb891","893fb578951ad2537f718f2eacbfbbbb82314eef7880cfe917e735d9699a84c3"],["d895626548b65b81e264c7637c972877d1d72e5f3a925014372e9f6588f6c14b","febfaa38f2bc7eae728ec60818c340eb03428d632bb067e179363ed75d7d991f"],["b8da94032a957518eb0f6433571e8761ceffc73693e84edd49150a564f676e03","2804dfa44805a1e4d7c99cc9762808b092cc584d95ff3b511488e4e74efdf6e7"],["e80fea14441fb33a7d8adab9475d7fab2019effb5156a792f1a11778e3c0df5d","eed1de7f638e00771e89768ca3ca94472d155e80af322ea9fcb4291b6ac9ec78"],["a301697bdfcd704313ba48e51d567543f2a182031efd6915ddc07bbcc4e16070","7370f91cfb67e4f5081809fa25d40f9b1735dbf7c0a11a130c0d1a041e177ea1"],["90ad85b389d6b936463f9d0512678de208cc330b11307fffab7ac63e3fb04ed4","e507a3620a38261affdcbd9427222b839aefabe1582894d991d4d48cb6ef150"],["8f68b9d2f63b5f339239c1ad981f162ee88c5678723ea3351b7b444c9ec4c0da","662a9f2dba063986de1d90c2b6be215dbbea2cfe95510bfdf23cbf79501fff82"],["e4f3fb0176af85d65ff99ff9198c36091f48e86503681e3e6686fd5053231e11","1e63633ad0ef4f1c1661a6d0ea02b7286cc7e74ec951d1c9822c38576feb73bc"],["8c00fa9b18ebf331eb961537a45a4266c7034f2f0d4e1d0716fb6eae20eae29e","efa47267fea521a1a9dc343a3736c974c2fadafa81e36c54e7d2a4c66702414b"],["e7a26ce69dd4829f3e10cec0a9e98ed3143d084f308b92c0997fddfc60cb3e41","2a758e300fa7984b471b006a1aafbb18d0a6b2c0420e83e20e8a9421cf2cfd51"],["b6459e0ee3662ec8d23540c223bcbdc571cbcb967d79424f3cf29eb3de6b80ef","67c876d06f3e06de1dadf16e5661db3c4b3ae6d48e35b2ff30bf0b61a71ba45"],["d68a80c8280bb840793234aa118f06231d6f1fc67e73c5a5deda0f5b496943e8","db8ba9fff4b586d00c4b1f9177b0e28b5b0e7b8f7845295a294c84266b133120"],["324aed7df65c804252dc0270907a30b09612aeb973449cea4095980fc28d3d5d","648a365774b61f2ff130c0c35aec1f4f19213b0c7e332843967224af96ab7c84"],["4df9c14919cde61f6d51dfdbe5fee5dceec4143ba8d1ca888e8bd373fd054c96","35ec51092d8728050974c23a1d85d4b5d506cdc288490192ebac06cad10d5d"],["9c3919a84a474870faed8a9c1cc66021523489054d7f0308cbfc99c8ac1f98cd","ddb84f0f4a4ddd57584f044bf260e641905326f76c64c8e6be7e5e03d4fc599d"],["6057170b1dd12fdf8de05f281d8e06bb91e1493a8b91d4cc5a21382120a959e5","9a1af0b26a6a4807add9a2daf71df262465152bc3ee24c65e899be932385a2a8"],["a576df8e23a08411421439a4518da31880cef0fba7d4df12b1a6973eecb94266","40a6bf20e76640b2c92b97afe58cd82c432e10a7f514d9f3ee8be11ae1b28ec8"],["7778a78c28dec3e30a05fe9629de8c38bb30d1f5cf9a3a208f763889be58ad71","34626d9ab5a5b22ff7098e12f2ff580087b38411ff24ac563b513fc1fd9f43ac"],["928955ee637a84463729fd30e7afd2ed5f96274e5ad7e5cb09eda9c06d903ac","c25621003d3f42a827b78a13093a95eeac3d26efa8a8d83fc5180e935bcd091f"],["85d0fef3ec6db109399064f3a0e3b2855645b4a907ad354527aae75163d82751","1f03648413a38c0be29d496e582cf5663e8751e96877331582c237a24eb1f962"],["ff2b0dce97eece97c1c9b6041798b85dfdfb6d8882da20308f5404824526087e","493d13fef524ba188af4c4dc54d07936c7b7ed6fb90e2ceb2c951e01f0c29907"],["827fbbe4b1e880ea9ed2b2e6301b212b57f1ee148cd6dd28780e5e2cf856e241","c60f9c923c727b0b71bef2c67d1d12687ff7a63186903166d605b68baec293ec"],["eaa649f21f51bdbae7be4ae34ce6e5217a58fdce7f47f9aa7f3b58fa2120e2b3","be3279ed5bbbb03ac69a80f89879aa5a01a6b965f13f7e59d47a5305ba5ad93d"],["e4a42d43c5cf169d9391df6decf42ee541b6d8f0c9a137401e23632dda34d24f","4d9f92e716d1c73526fc99ccfb8ad34ce886eedfa8d8e4f13a7f7131deba9414"],["1ec80fef360cbdd954160fadab352b6b92b53576a88fea4947173b9d4300bf19","aeefe93756b5340d2f3a4958a7abbf5e0146e77f6295a07b671cdc1cc107cefd"],["146a778c04670c2f91b00af4680dfa8bce3490717d58ba889ddb5928366642be","b318e0ec3354028add669827f9d4b2870aaa971d2f7e5ed1d0b297483d83efd0"],["fa50c0f61d22e5f07e3acebb1aa07b128d0012209a28b9776d76a8793180eef9","6b84c6922397eba9b72cd2872281a68a5e683293a57a213b38cd8d7d3f4f2811"],["da1d61d0ca721a11b1a5bf6b7d88e8421a288ab5d5bba5220e53d32b5f067ec2","8157f55a7c99306c79c0766161c91e2966a73899d279b48a655fba0f1ad836f1"],["a8e282ff0c9706907215ff98e8fd416615311de0446f1e062a73b0610d064e13","7f97355b8db81c09abfb7f3c5b2515888b679a3e50dd6bd6cef7c73111f4cc0c"],["174a53b9c9a285872d39e56e6913cab15d59b1fa512508c022f382de8319497c","ccc9dc37abfc9c1657b4155f2c47f9e6646b3a1d8cb9854383da13ac079afa73"],["959396981943785c3d3e57edf5018cdbe039e730e4918b3d884fdff09475b7ba","2e7e552888c331dd8ba0386a4b9cd6849c653f64c8709385e9b8abf87524f2fd"],["d2a63a50ae401e56d645a1153b109a8fcca0a43d561fba2dbb51340c9d82b151","e82d86fb6443fcb7565aee58b2948220a70f750af484ca52d4142174dcf89405"],["64587e2335471eb890ee7896d7cfdc866bacbdbd3839317b3436f9b45617e073","d99fcdd5bf6902e2ae96dd6447c299a185b90a39133aeab358299e5e9faf6589"],["8481bde0e4e4d885b3a546d3e549de042f0aa6cea250e7fd358d6c86dd45e458","38ee7b8cba5404dd84a25bf39cecb2ca900a79c42b262e556d64b1b59779057e"],["13464a57a78102aa62b6979ae817f4637ffcfed3c4b1ce30bcd6303f6caf666b","69be159004614580ef7e433453ccb0ca48f300a81d0942e13f495a907f6ecc27"],["bc4a9df5b713fe2e9aef430bcc1dc97a0cd9ccede2f28588cada3a0d2d83f366","d3a81ca6e785c06383937adf4b798caa6e8a9fbfa547b16d758d666581f33c1"],["8c28a97bf8298bc0d23d8c749452a32e694b65e30a9472a3954ab30fe5324caa","40a30463a3305193378fedf31f7cc0eb7ae784f0451cb9459e71dc73cbef9482"],["8ea9666139527a8c1dd94ce4f071fd23c8b350c5a4bb33748c4ba111faccae0","620efabbc8ee2782e24e7c0cfb95c5d735b783be9cf0f8e955af34a30e62b945"],["dd3625faef5ba06074669716bbd3788d89bdde815959968092f76cc4eb9a9787","7a188fa3520e30d461da2501045731ca941461982883395937f68d00c644a573"],["f710d79d9eb962297e4f6232b40e8f7feb2bc63814614d692c12de752408221e","ea98e67232d3b3295d3b535532115ccac8612c721851617526ae47a9c77bfc82"]]},naf:{wnd:7,points:[["f9308a019258c31049344f85f89d5229b531c845836f99b08601f113bce036f9","388f7b0f632de8140fe337e62a37f3566500a99934c2231b6cb9fd7584b8e672"],["2f8bde4d1a07209355b4a7250a5c5128e88b84bddc619ab7cba8d569b240efe4","d8ac222636e5e3d6d4dba9dda6c9c426f788271bab0d6840dca87d3aa6ac62d6"],["5cbdf0646e5db4eaa398f365f2ea7a0e3d419b7e0330e39ce92bddedcac4f9bc","6aebca40ba255960a3178d6d861a54dba813d0b813fde7b5a5082628087264da"],["acd484e2f0c7f65309ad178a9f559abde09796974c57e714c35f110dfc27ccbe","cc338921b0a7d9fd64380971763b61e9add888a4375f8e0f05cc262ac64f9c37"],["774ae7f858a9411e5ef4246b70c65aac5649980be5c17891bbec17895da008cb","d984a032eb6b5e190243dd56d7b7b365372db1e2dff9d6a8301d74c9c953c61b"],["f28773c2d975288bc7d1d205c3748651b075fbc6610e58cddeeddf8f19405aa8","ab0902e8d880a89758212eb65cdaf473a1a06da521fa91f29b5cb52db03ed81"],["d7924d4f7d43ea965a465ae3095ff41131e5946f3c85f79e44adbcf8e27e080e","581e2872a86c72a683842ec228cc6defea40af2bd896d3a5c504dc9ff6a26b58"],["defdea4cdb677750a420fee807eacf21eb9898ae79b9768766e4faa04a2d4a34","4211ab0694635168e997b0ead2a93daeced1f4a04a95c0f6cfb199f69e56eb77"],["2b4ea0a797a443d293ef5cff444f4979f06acfebd7e86d277475656138385b6c","85e89bc037945d93b343083b5a1c86131a01f60c50269763b570c854e5c09b7a"],["352bbf4a4cdd12564f93fa332ce333301d9ad40271f8107181340aef25be59d5","321eb4075348f534d59c18259dda3e1f4a1b3b2e71b1039c67bd3d8bcf81998c"],["2fa2104d6b38d11b0230010559879124e42ab8dfeff5ff29dc9cdadd4ecacc3f","2de1068295dd865b64569335bd5dd80181d70ecfc882648423ba76b532b7d67"],["9248279b09b4d68dab21a9b066edda83263c3d84e09572e269ca0cd7f5453714","73016f7bf234aade5d1aa71bdea2b1ff3fc0de2a887912ffe54a32ce97cb3402"],["daed4f2be3a8bf278e70132fb0beb7522f570e144bf615c07e996d443dee8729","a69dce4a7d6c98e8d4a1aca87ef8d7003f83c230f3afa726ab40e52290be1c55"],["c44d12c7065d812e8acf28d7cbb19f9011ecd9e9fdf281b0e6a3b5e87d22e7db","2119a460ce326cdc76c45926c982fdac0e106e861edf61c5a039063f0e0e6482"],["6a245bf6dc698504c89a20cfded60853152b695336c28063b61c65cbd269e6b4","e022cf42c2bd4a708b3f5126f16a24ad8b33ba48d0423b6efd5e6348100d8a82"],["1697ffa6fd9de627c077e3d2fe541084ce13300b0bec1146f95ae57f0d0bd6a5","b9c398f186806f5d27561506e4557433a2cf15009e498ae7adee9d63d01b2396"],["605bdb019981718b986d0f07e834cb0d9deb8360ffb7f61df982345ef27a7479","2972d2de4f8d20681a78d93ec96fe23c26bfae84fb14db43b01e1e9056b8c49"],["62d14dab4150bf497402fdc45a215e10dcb01c354959b10cfe31c7e9d87ff33d","80fc06bd8cc5b01098088a1950eed0db01aa132967ab472235f5642483b25eaf"],["80c60ad0040f27dade5b4b06c408e56b2c50e9f56b9b8b425e555c2f86308b6f","1c38303f1cc5c30f26e66bad7fe72f70a65eed4cbe7024eb1aa01f56430bd57a"],["7a9375ad6167ad54aa74c6348cc54d344cc5dc9487d847049d5eabb0fa03c8fb","d0e3fa9eca8726909559e0d79269046bdc59ea10c70ce2b02d499ec224dc7f7"],["d528ecd9b696b54c907a9ed045447a79bb408ec39b68df504bb51f459bc3ffc9","eecf41253136e5f99966f21881fd656ebc4345405c520dbc063465b521409933"],["49370a4b5f43412ea25f514e8ecdad05266115e4a7ecb1387231808f8b45963","758f3f41afd6ed428b3081b0512fd62a54c3f3afbb5b6764b653052a12949c9a"],["77f230936ee88cbbd73df930d64702ef881d811e0e1498e2f1c13eb1fc345d74","958ef42a7886b6400a08266e9ba1b37896c95330d97077cbbe8eb3c7671c60d6"],["f2dac991cc4ce4b9ea44887e5c7c0bce58c80074ab9d4dbaeb28531b7739f530","e0dedc9b3b2f8dad4da1f32dec2531df9eb5fbeb0598e4fd1a117dba703a3c37"],["463b3d9f662621fb1b4be8fbbe2520125a216cdfc9dae3debcba4850c690d45b","5ed430d78c296c3543114306dd8622d7c622e27c970a1de31cb377b01af7307e"],["f16f804244e46e2a09232d4aff3b59976b98fac14328a2d1a32496b49998f247","cedabd9b82203f7e13d206fcdf4e33d92a6c53c26e5cce26d6579962c4e31df6"],["caf754272dc84563b0352b7a14311af55d245315ace27c65369e15f7151d41d1","cb474660ef35f5f2a41b643fa5e460575f4fa9b7962232a5c32f908318a04476"],["2600ca4b282cb986f85d0f1709979d8b44a09c07cb86d7c124497bc86f082120","4119b88753c15bd6a693b03fcddbb45d5ac6be74ab5f0ef44b0be9475a7e4b40"],["7635ca72d7e8432c338ec53cd12220bc01c48685e24f7dc8c602a7746998e435","91b649609489d613d1d5e590f78e6d74ecfc061d57048bad9e76f302c5b9c61"],["754e3239f325570cdbbf4a87deee8a66b7f2b33479d468fbc1a50743bf56cc18","673fb86e5bda30fb3cd0ed304ea49a023ee33d0197a695d0c5d98093c536683"],["e3e6bd1071a1e96aff57859c82d570f0330800661d1c952f9fe2694691d9b9e8","59c9e0bba394e76f40c0aa58379a3cb6a5a2283993e90c4167002af4920e37f5"],["186b483d056a033826ae73d88f732985c4ccb1f32ba35f4b4cc47fdcf04aa6eb","3b952d32c67cf77e2e17446e204180ab21fb8090895138b4a4a797f86e80888b"],["df9d70a6b9876ce544c98561f4be4f725442e6d2b737d9c91a8321724ce0963f","55eb2dafd84d6ccd5f862b785dc39d4ab157222720ef9da217b8c45cf2ba2417"],["5edd5cc23c51e87a497ca815d5dce0f8ab52554f849ed8995de64c5f34ce7143","efae9c8dbc14130661e8cec030c89ad0c13c66c0d17a2905cdc706ab7399a868"],["290798c2b6476830da12fe02287e9e777aa3fba1c355b17a722d362f84614fba","e38da76dcd440621988d00bcf79af25d5b29c094db2a23146d003afd41943e7a"],["af3c423a95d9f5b3054754efa150ac39cd29552fe360257362dfdecef4053b45","f98a3fd831eb2b749a93b0e6f35cfb40c8cd5aa667a15581bc2feded498fd9c6"],["766dbb24d134e745cccaa28c99bf274906bb66b26dcf98df8d2fed50d884249a","744b1152eacbe5e38dcc887980da38b897584a65fa06cedd2c924f97cbac5996"],["59dbf46f8c94759ba21277c33784f41645f7b44f6c596a58ce92e666191abe3e","c534ad44175fbc300f4ea6ce648309a042ce739a7919798cd85e216c4a307f6e"],["f13ada95103c4537305e691e74e9a4a8dd647e711a95e73cb62dc6018cfd87b8","e13817b44ee14de663bf4bc808341f326949e21a6a75c2570778419bdaf5733d"],["7754b4fa0e8aced06d4167a2c59cca4cda1869c06ebadfb6488550015a88522c","30e93e864e669d82224b967c3020b8fa8d1e4e350b6cbcc537a48b57841163a2"],["948dcadf5990e048aa3874d46abef9d701858f95de8041d2a6828c99e2262519","e491a42537f6e597d5d28a3224b1bc25df9154efbd2ef1d2cbba2cae5347d57e"],["7962414450c76c1689c7b48f8202ec37fb224cf5ac0bfa1570328a8a3d7c77ab","100b610ec4ffb4760d5c1fc133ef6f6b12507a051f04ac5760afa5b29db83437"],["3514087834964b54b15b160644d915485a16977225b8847bb0dd085137ec47ca","ef0afbb2056205448e1652c48e8127fc6039e77c15c2378b7e7d15a0de293311"],["d3cc30ad6b483e4bc79ce2c9dd8bc54993e947eb8df787b442943d3f7b527eaf","8b378a22d827278d89c5e9be8f9508ae3c2ad46290358630afb34db04eede0a4"],["1624d84780732860ce1c78fcbfefe08b2b29823db913f6493975ba0ff4847610","68651cf9b6da903e0914448c6cd9d4ca896878f5282be4c8cc06e2a404078575"],["733ce80da955a8a26902c95633e62a985192474b5af207da6df7b4fd5fc61cd4","f5435a2bd2badf7d485a4d8b8db9fcce3e1ef8e0201e4578c54673bc1dc5ea1d"],["15d9441254945064cf1a1c33bbd3b49f8966c5092171e699ef258dfab81c045c","d56eb30b69463e7234f5137b73b84177434800bacebfc685fc37bbe9efe4070d"],["a1d0fcf2ec9de675b612136e5ce70d271c21417c9d2b8aaaac138599d0717940","edd77f50bcb5a3cab2e90737309667f2641462a54070f3d519212d39c197a629"],["e22fbe15c0af8ccc5780c0735f84dbe9a790badee8245c06c7ca37331cb36980","a855babad5cd60c88b430a69f53a1a7a38289154964799be43d06d77d31da06"],["311091dd9860e8e20ee13473c1155f5f69635e394704eaa74009452246cfa9b3","66db656f87d1f04fffd1f04788c06830871ec5a64feee685bd80f0b1286d8374"],["34c1fd04d301be89b31c0442d3e6ac24883928b45a9340781867d4232ec2dbdf","9414685e97b1b5954bd46f730174136d57f1ceeb487443dc5321857ba73abee"],["f219ea5d6b54701c1c14de5b557eb42a8d13f3abbcd08affcc2a5e6b049b8d63","4cb95957e83d40b0f73af4544cccf6b1f4b08d3c07b27fb8d8c2962a400766d1"],["d7b8740f74a8fbaab1f683db8f45de26543a5490bca627087236912469a0b448","fa77968128d9c92ee1010f337ad4717eff15db5ed3c049b3411e0315eaa4593b"],["32d31c222f8f6f0ef86f7c98d3a3335ead5bcd32abdd94289fe4d3091aa824bf","5f3032f5892156e39ccd3d7915b9e1da2e6dac9e6f26e961118d14b8462e1661"],["7461f371914ab32671045a155d9831ea8793d77cd59592c4340f86cbc18347b5","8ec0ba238b96bec0cbdddcae0aa442542eee1ff50c986ea6b39847b3cc092ff6"],["ee079adb1df1860074356a25aa38206a6d716b2c3e67453d287698bad7b2b2d6","8dc2412aafe3be5c4c5f37e0ecc5f9f6a446989af04c4e25ebaac479ec1c8c1e"],["16ec93e447ec83f0467b18302ee620f7e65de331874c9dc72bfd8616ba9da6b5","5e4631150e62fb40d0e8c2a7ca5804a39d58186a50e497139626778e25b0674d"],["eaa5f980c245f6f038978290afa70b6bd8855897f98b6aa485b96065d537bd99","f65f5d3e292c2e0819a528391c994624d784869d7e6ea67fb18041024edc07dc"],["78c9407544ac132692ee1910a02439958ae04877151342ea96c4b6b35a49f51","f3e0319169eb9b85d5404795539a5e68fa1fbd583c064d2462b675f194a3ddb4"],["494f4be219a1a77016dcd838431aea0001cdc8ae7a6fc688726578d9702857a5","42242a969283a5f339ba7f075e36ba2af925ce30d767ed6e55f4b031880d562c"],["a598a8030da6d86c6bc7f2f5144ea549d28211ea58faa70ebf4c1e665c1fe9b5","204b5d6f84822c307e4b4a7140737aec23fc63b65b35f86a10026dbd2d864e6b"],["c41916365abb2b5d09192f5f2dbeafec208f020f12570a184dbadc3e58595997","4f14351d0087efa49d245b328984989d5caf9450f34bfc0ed16e96b58fa9913"],["841d6063a586fa475a724604da03bc5b92a2e0d2e0a36acfe4c73a5514742881","73867f59c0659e81904f9a1c7543698e62562d6744c169ce7a36de01a8d6154"],["5e95bb399a6971d376026947f89bde2f282b33810928be4ded112ac4d70e20d5","39f23f366809085beebfc71181313775a99c9aed7d8ba38b161384c746012865"],["36e4641a53948fd476c39f8a99fd974e5ec07564b5315d8bf99471bca0ef2f66","d2424b1b1abe4eb8164227b085c9aa9456ea13493fd563e06fd51cf5694c78fc"],["336581ea7bfbbb290c191a2f507a41cf5643842170e914faeab27c2c579f726","ead12168595fe1be99252129b6e56b3391f7ab1410cd1e0ef3dcdcabd2fda224"],["8ab89816dadfd6b6a1f2634fcf00ec8403781025ed6890c4849742706bd43ede","6fdcef09f2f6d0a044e654aef624136f503d459c3e89845858a47a9129cdd24e"],["1e33f1a746c9c5778133344d9299fcaa20b0938e8acff2544bb40284b8c5fb94","60660257dd11b3aa9c8ed618d24edff2306d320f1d03010e33a7d2057f3b3b6"],["85b7c1dcb3cec1b7ee7f30ded79dd20a0ed1f4cc18cbcfcfa410361fd8f08f31","3d98a9cdd026dd43f39048f25a8847f4fcafad1895d7a633c6fed3c35e999511"],["29df9fbd8d9e46509275f4b125d6d45d7fbe9a3b878a7af872a2800661ac5f51","b4c4fe99c775a606e2d8862179139ffda61dc861c019e55cd2876eb2a27d84b"],["a0b1cae06b0a847a3fea6e671aaf8adfdfe58ca2f768105c8082b2e449fce252","ae434102edde0958ec4b19d917a6a28e6b72da1834aff0e650f049503a296cf2"],["4e8ceafb9b3e9a136dc7ff67e840295b499dfb3b2133e4ba113f2e4c0e121e5","cf2174118c8b6d7a4b48f6d534ce5c79422c086a63460502b827ce62a326683c"],["d24a44e047e19b6f5afb81c7ca2f69080a5076689a010919f42725c2b789a33b","6fb8d5591b466f8fc63db50f1c0f1c69013f996887b8244d2cdec417afea8fa3"],["ea01606a7a6c9cdd249fdfcfacb99584001edd28abbab77b5104e98e8e3b35d4","322af4908c7312b0cfbfe369f7a7b3cdb7d4494bc2823700cfd652188a3ea98d"],["af8addbf2b661c8a6c6328655eb96651252007d8c5ea31be4ad196de8ce2131f","6749e67c029b85f52a034eafd096836b2520818680e26ac8f3dfbcdb71749700"],["e3ae1974566ca06cc516d47e0fb165a674a3dabcfca15e722f0e3450f45889","2aeabe7e4531510116217f07bf4d07300de97e4874f81f533420a72eeb0bd6a4"],["591ee355313d99721cf6993ffed1e3e301993ff3ed258802075ea8ced397e246","b0ea558a113c30bea60fc4775460c7901ff0b053d25ca2bdeee98f1a4be5d196"],["11396d55fda54c49f19aa97318d8da61fa8584e47b084945077cf03255b52984","998c74a8cd45ac01289d5833a7beb4744ff536b01b257be4c5767bea93ea57a4"],["3c5d2a1ba39c5a1790000738c9e0c40b8dcdfd5468754b6405540157e017aa7a","b2284279995a34e2f9d4de7396fc18b80f9b8b9fdd270f6661f79ca4c81bd257"],["cc8704b8a60a0defa3a99a7299f2e9c3fbc395afb04ac078425ef8a1793cc030","bdd46039feed17881d1e0862db347f8cf395b74fc4bcdc4e940b74e3ac1f1b13"],["c533e4f7ea8555aacd9777ac5cad29b97dd4defccc53ee7ea204119b2889b197","6f0a256bc5efdf429a2fb6242f1a43a2d9b925bb4a4b3a26bb8e0f45eb596096"],["c14f8f2ccb27d6f109f6d08d03cc96a69ba8c34eec07bbcf566d48e33da6593","c359d6923bb398f7fd4473e16fe1c28475b740dd098075e6c0e8649113dc3a38"],["a6cbc3046bc6a450bac24789fa17115a4c9739ed75f8f21ce441f72e0b90e6ef","21ae7f4680e889bb130619e2c0f95a360ceb573c70603139862afd617fa9b9f"],["347d6d9a02c48927ebfb86c1359b1caf130a3c0267d11ce6344b39f99d43cc38","60ea7f61a353524d1c987f6ecec92f086d565ab687870cb12689ff1e31c74448"],["da6545d2181db8d983f7dcb375ef5866d47c67b1bf31c8cf855ef7437b72656a","49b96715ab6878a79e78f07ce5680c5d6673051b4935bd897fea824b77dc208a"],["c40747cc9d012cb1a13b8148309c6de7ec25d6945d657146b9d5994b8feb1111","5ca560753be2a12fc6de6caf2cb489565db936156b9514e1bb5e83037e0fa2d4"],["4e42c8ec82c99798ccf3a610be870e78338c7f713348bd34c8203ef4037f3502","7571d74ee5e0fb92a7a8b33a07783341a5492144cc54bcc40a94473693606437"],["3775ab7089bc6af823aba2e1af70b236d251cadb0c86743287522a1b3b0dedea","be52d107bcfa09d8bcb9736a828cfa7fac8db17bf7a76a2c42ad961409018cf7"],["cee31cbf7e34ec379d94fb814d3d775ad954595d1314ba8846959e3e82f74e26","8fd64a14c06b589c26b947ae2bcf6bfa0149ef0be14ed4d80f448a01c43b1c6d"],["b4f9eaea09b6917619f6ea6a4eb5464efddb58fd45b1ebefcdc1a01d08b47986","39e5c9925b5a54b07433a4f18c61726f8bb131c012ca542eb24a8ac07200682a"],["d4263dfc3d2df923a0179a48966d30ce84e2515afc3dccc1b77907792ebcc60e","62dfaf07a0f78feb30e30d6295853ce189e127760ad6cf7fae164e122a208d54"],["48457524820fa65a4f8d35eb6930857c0032acc0a4a2de422233eeda897612c4","25a748ab367979d98733c38a1fa1c2e7dc6cc07db2d60a9ae7a76aaa49bd0f77"],["dfeeef1881101f2cb11644f3a2afdfc2045e19919152923f367a1767c11cceda","ecfb7056cf1de042f9420bab396793c0c390bde74b4bbdff16a83ae09a9a7517"],["6d7ef6b17543f8373c573f44e1f389835d89bcbc6062ced36c82df83b8fae859","cd450ec335438986dfefa10c57fea9bcc521a0959b2d80bbf74b190dca712d10"],["e75605d59102a5a2684500d3b991f2e3f3c88b93225547035af25af66e04541f","f5c54754a8f71ee540b9b48728473e314f729ac5308b06938360990e2bfad125"],["eb98660f4c4dfaa06a2be453d5020bc99a0c2e60abe388457dd43fefb1ed620c","6cb9a8876d9cb8520609af3add26cd20a0a7cd8a9411131ce85f44100099223e"],["13e87b027d8514d35939f2e6892b19922154596941888336dc3563e3b8dba942","fef5a3c68059a6dec5d624114bf1e91aac2b9da568d6abeb2570d55646b8adf1"],["ee163026e9fd6fe017c38f06a5be6fc125424b371ce2708e7bf4491691e5764a","1acb250f255dd61c43d94ccc670d0f58f49ae3fa15b96623e5430da0ad6c62b2"],["b268f5ef9ad51e4d78de3a750c2dc89b1e626d43505867999932e5db33af3d80","5f310d4b3c99b9ebb19f77d41c1dee018cf0d34fd4191614003e945a1216e423"],["ff07f3118a9df035e9fad85eb6c7bfe42b02f01ca99ceea3bf7ffdba93c4750d","438136d603e858a3a5c440c38eccbaddc1d2942114e2eddd4740d098ced1f0d8"],["8d8b9855c7c052a34146fd20ffb658bea4b9f69e0d825ebec16e8c3ce2b526a1","cdb559eedc2d79f926baf44fb84ea4d44bcf50fee51d7ceb30e2e7f463036758"],["52db0b5384dfbf05bfa9d472d7ae26dfe4b851ceca91b1eba54263180da32b63","c3b997d050ee5d423ebaf66a6db9f57b3180c902875679de924b69d84a7b375"],["e62f9490d3d51da6395efd24e80919cc7d0f29c3f3fa48c6fff543becbd43352","6d89ad7ba4876b0b22c2ca280c682862f342c8591f1daf5170e07bfd9ccafa7d"],["7f30ea2476b399b4957509c88f77d0191afa2ff5cb7b14fd6d8e7d65aaab1193","ca5ef7d4b231c94c3b15389a5f6311e9daff7bb67b103e9880ef4bff637acaec"],["5098ff1e1d9f14fb46a210fada6c903fef0fb7b4a1dd1d9ac60a0361800b7a00","9731141d81fc8f8084d37c6e7542006b3ee1b40d60dfe5362a5b132fd17ddc0"],["32b78c7de9ee512a72895be6b9cbefa6e2f3c4ccce445c96b9f2c81e2778ad58","ee1849f513df71e32efc3896ee28260c73bb80547ae2275ba497237794c8753c"],["e2cb74fddc8e9fbcd076eef2a7c72b0ce37d50f08269dfc074b581550547a4f7","d3aa2ed71c9dd2247a62df062736eb0baddea9e36122d2be8641abcb005cc4a4"],["8438447566d4d7bedadc299496ab357426009a35f235cb141be0d99cd10ae3a8","c4e1020916980a4da5d01ac5e6ad330734ef0d7906631c4f2390426b2edd791f"],["4162d488b89402039b584c6fc6c308870587d9c46f660b878ab65c82c711d67e","67163e903236289f776f22c25fb8a3afc1732f2b84b4e95dbda47ae5a0852649"],["3fad3fa84caf0f34f0f89bfd2dcf54fc175d767aec3e50684f3ba4a4bf5f683d","cd1bc7cb6cc407bb2f0ca647c718a730cf71872e7d0d2a53fa20efcdfe61826"],["674f2600a3007a00568c1a7ce05d0816c1fb84bf1370798f1c69532faeb1a86b","299d21f9413f33b3edf43b257004580b70db57da0b182259e09eecc69e0d38a5"],["d32f4da54ade74abb81b815ad1fb3b263d82d6c692714bcff87d29bd5ee9f08f","f9429e738b8e53b968e99016c059707782e14f4535359d582fc416910b3eea87"],["30e4e670435385556e593657135845d36fbb6931f72b08cb1ed954f1e3ce3ff6","462f9bce619898638499350113bbc9b10a878d35da70740dc695a559eb88db7b"],["be2062003c51cc3004682904330e4dee7f3dcd10b01e580bf1971b04d4cad297","62188bc49d61e5428573d48a74e1c655b1c61090905682a0d5558ed72dccb9bc"],["93144423ace3451ed29e0fb9ac2af211cb6e84a601df5993c419859fff5df04a","7c10dfb164c3425f5c71a3f9d7992038f1065224f72bb9d1d902a6d13037b47c"],["b015f8044f5fcbdcf21ca26d6c34fb8197829205c7b7d2a7cb66418c157b112c","ab8c1e086d04e813744a655b2df8d5f83b3cdc6faa3088c1d3aea1454e3a1d5f"],["d5e9e1da649d97d89e4868117a465a3a4f8a18de57a140d36b3f2af341a21b52","4cb04437f391ed73111a13cc1d4dd0db1693465c2240480d8955e8592f27447a"],["d3ae41047dd7ca065dbf8ed77b992439983005cd72e16d6f996a5316d36966bb","bd1aeb21ad22ebb22a10f0303417c6d964f8cdd7df0aca614b10dc14d125ac46"],["463e2763d885f958fc66cdd22800f0a487197d0a82e377b49f80af87c897b065","bfefacdb0e5d0fd7df3a311a94de062b26b80c61fbc97508b79992671ef7ca7f"],["7985fdfd127c0567c6f53ec1bb63ec3158e597c40bfe747c83cddfc910641917","603c12daf3d9862ef2b25fe1de289aed24ed291e0ec6708703a5bd567f32ed03"],["74a1ad6b5f76e39db2dd249410eac7f99e74c59cb83d2d0ed5ff1543da7703e9","cc6157ef18c9c63cd6193d83631bbea0093e0968942e8c33d5737fd790e0db08"],["30682a50703375f602d416664ba19b7fc9bab42c72747463a71d0896b22f6da3","553e04f6b018b4fa6c8f39e7f311d3176290d0e0f19ca73f17714d9977a22ff8"],["9e2158f0d7c0d5f26c3791efefa79597654e7a2b2464f52b1ee6c1347769ef57","712fcdd1b9053f09003a3481fa7762e9ffd7c8ef35a38509e2fbf2629008373"],["176e26989a43c9cfeba4029c202538c28172e566e3c4fce7322857f3be327d66","ed8cc9d04b29eb877d270b4878dc43c19aefd31f4eee09ee7b47834c1fa4b1c3"],["75d46efea3771e6e68abb89a13ad747ecf1892393dfc4f1b7004788c50374da8","9852390a99507679fd0b86fd2b39a868d7efc22151346e1a3ca4726586a6bed8"],["809a20c67d64900ffb698c4c825f6d5f2310fb0451c869345b7319f645605721","9e994980d9917e22b76b061927fa04143d096ccc54963e6a5ebfa5f3f8e286c1"],["1b38903a43f7f114ed4500b4eac7083fdefece1cf29c63528d563446f972c180","4036edc931a60ae889353f77fd53de4a2708b26b6f5da72ad3394119daf408f9"]]}}),secp256k1}var hasRequiredCurves;function requireCurves(){return hasRequiredCurves||(hasRequiredCurves=1,function(s){var e=s,o=requireHash(),a=requireCurve(),d=requireUtils$1(),c=d.assert;function j(yt){yt.type==="short"?this.curve=new a.short(yt):yt.type==="edwards"?this.curve=new a.edwards(yt):this.curve=new a.mont(yt),this.g=this.curve.g,this.n=this.curve.n,this.hash=yt.hash,c(this.g.validate(),"Invalid curve"),c(this.g.mul(this.n).isInfinity(),"Invalid curve, G*N != O")}e.PresetCurve=j;function _e(yt,ct){Object.defineProperty(e,yt,{configurable:!0,enumerable:!0,get:function(){var Ct=new j(ct);return Object.defineProperty(e,yt,{configurable:!0,enumerable:!0,value:Ct}),Ct}})}_e("p192",{type:"short",prime:"p192",p:"ffffffff ffffffff ffffffff fffffffe ffffffff ffffffff",a:"ffffffff ffffffff ffffffff fffffffe ffffffff fffffffc",b:"64210519 e59c80e7 0fa7e9ab 72243049 feb8deec c146b9b1",n:"ffffffff ffffffff ffffffff 99def836 146bc9b1 b4d22831",hash:o.sha256,gRed:!1,g:["188da80e b03090f6 7cbf20eb 43a18800 f4ff0afd 82ff1012","07192b95 ffc8da78 631011ed 6b24cdd5 73f977a1 1e794811"]}),_e("p224",{type:"short",prime:"p224",p:"ffffffff ffffffff ffffffff ffffffff 00000000 00000000 00000001",a:"ffffffff ffffffff ffffffff fffffffe ffffffff ffffffff fffffffe",b:"b4050a85 0c04b3ab f5413256 5044b0b7 d7bfd8ba 270b3943 2355ffb4",n:"ffffffff ffffffff ffffffff ffff16a2 e0b8f03e 13dd2945 5c5c2a3d",hash:o.sha256,gRed:!1,g:["b70e0cbd 6bb4bf7f 321390b9 4a03c1d3 56c21122 343280d6 115c1d21","bd376388 b5f723fb 4c22dfe6 cd4375a0 5a074764 44d58199 85007e34"]}),_e("p256",{type:"short",prime:null,p:"ffffffff 00000001 00000000 00000000 00000000 ffffffff ffffffff ffffffff",a:"ffffffff 00000001 00000000 00000000 00000000 ffffffff ffffffff fffffffc",b:"5ac635d8 aa3a93e7 b3ebbd55 769886bc 651d06b0 cc53b0f6 3bce3c3e 27d2604b",n:"ffffffff 00000000 ffffffff ffffffff bce6faad a7179e84 f3b9cac2 fc632551",hash:o.sha256,gRed:!1,g:["6b17d1f2 e12c4247 f8bce6e5 63a440f2 77037d81 2deb33a0 f4a13945 d898c296","4fe342e2 fe1a7f9b 8ee7eb4a 7c0f9e16 2bce3357 6b315ece cbb64068 37bf51f5"]}),_e("p384",{type:"short",prime:null,p:"ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff fffffffe ffffffff 00000000 00000000 ffffffff",a:"ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff fffffffe ffffffff 00000000 00000000 fffffffc",b:"b3312fa7 e23ee7e4 988e056b e3f82d19 181d9c6e fe814112 0314088f 5013875a c656398d 8a2ed19d 2a85c8ed d3ec2aef",n:"ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff c7634d81 f4372ddf 581a0db2 48b0a77a ecec196a ccc52973",hash:o.sha384,gRed:!1,g:["aa87ca22 be8b0537 8eb1c71e f320ad74 6e1d3b62 8ba79b98 59f741e0 82542a38 5502f25d bf55296c 3a545e38 72760ab7","3617de4a 96262c6f 5d9e98bf 9292dc29 f8f41dbd 289a147c e9da3113 b5f0b8c0 0a60b1ce 1d7e819d 7a431d7c 90ea0e5f"]}),_e("p521",{type:"short",prime:null,p:"000001ff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff",a:"000001ff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff fffffffc",b:"00000051 953eb961 8e1c9a1f 929a21a0 b68540ee a2da725b 99b315f3 b8b48991 8ef109e1 56193951 ec7e937b 1652c0bd 3bb1bf07 3573df88 3d2c34f1 ef451fd4 6b503f00",n:"000001ff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff fffffffa 51868783 bf2f966b 7fcc0148 f709a5d0 3bb5c9b8 899c47ae bb6fb71e 91386409",hash:o.sha512,gRed:!1,g:["000000c6 858e06b7 0404e9cd 9e3ecb66 2395b442 9c648139 053fb521 f828af60 6b4d3dba a14b5e77 efe75928 fe1dc127 a2ffa8de 3348b3c1 856a429b f97e7e31 c2e5bd66","00000118 39296a78 9a3bc004 5c8a5fb4 2c7d1bd9 98f54449 579b4468 17afbd17 273e662c 97ee7299 5ef42640 c550b901 3fad0761 353c7086 a272c240 88be9476 9fd16650"]}),_e("curve25519",{type:"mont",prime:"p25519",p:"7fffffffffffffff ffffffffffffffff ffffffffffffffff ffffffffffffffed",a:"76d06",b:"1",n:"1000000000000000 0000000000000000 14def9dea2f79cd6 5812631a5cf5d3ed",hash:o.sha256,gRed:!1,g:["9"]}),_e("ed25519",{type:"edwards",prime:"p25519",p:"7fffffffffffffff ffffffffffffffff ffffffffffffffff ffffffffffffffed",a:"-1",c:"1",d:"52036cee2b6ffe73 8cc740797779e898 00700a4d4141d8ab 75eb4dca135978a3",n:"1000000000000000 0000000000000000 14def9dea2f79cd6 5812631a5cf5d3ed",hash:o.sha256,gRed:!1,g:["216936d3cd6e53fec0a4e231fdd6dc5c692cc7609525a7b2c9562d608f25d51a","6666666666666666666666666666666666666666666666666666666666666658"]});var pt;try{pt=requireSecp256k1()}catch{pt=void 0}_e("secp256k1",{type:"short",prime:"k256",p:"ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff fffffffe fffffc2f",a:"0",b:"7",n:"ffffffff ffffffff ffffffff fffffffe baaedce6 af48a03b bfd25e8c d0364141",h:"1",hash:o.sha256,beta:"7ae96a2b657c07106e64479eac3434e99cf0497512f58995c1396c28719501ee",lambda:"5363ad4cc05c30e0a5261c028812645a122e22ea20816678df02967c1b23bd72",basis:[{a:"3086d221a7d46bcde86c90e49284eb15",b:"-e4437ed6010e88286f547fa90abfe4c3"},{a:"114ca50f7a8e2f3f657c1108d9d44cfd8",b:"3086d221a7d46bcde86c90e49284eb15"}],gRed:!1,g:["79be667ef9dcbbac55a06295ce870b07029bfcdb2dce28d959f2815b16f81798","483ada7726a3c4655da4fbfc0e1108a8fd17b448a68554199c47d08ffb10d4b8",pt]})}(curves)),curves}var hmacDrbg,hasRequiredHmacDrbg;function requireHmacDrbg(){if(hasRequiredHmacDrbg)return hmacDrbg;hasRequiredHmacDrbg=1;var s=requireHash(),e=requireUtils$2(),o=requireMinimalisticAssert();function a(d){if(!(this instanceof a))return new a(d);this.hash=d.hash,this.predResist=!!d.predResist,this.outLen=this.hash.outSize,this.minEntropy=d.minEntropy||this.hash.hmacStrength,this._reseed=null,this.reseedInterval=null,this.K=null,this.V=null;var c=e.toArray(d.entropy,d.entropyEnc||"hex"),j=e.toArray(d.nonce,d.nonceEnc||"hex"),_e=e.toArray(d.pers,d.persEnc||"hex");o(c.length>=this.minEntropy/8,"Not enough entropy. Minimum is: "+this.minEntropy+" bits"),this._init(c,j,_e)}return hmacDrbg=a,a.prototype._init=function(c,j,_e){var pt=c.concat(j).concat(_e);this.K=new Array(this.outLen/8),this.V=new Array(this.outLen/8);for(var yt=0;yt<this.V.length;yt++)this.K[yt]=0,this.V[yt]=1;this._update(pt),this._reseed=1,this.reseedInterval=281474976710656},a.prototype._hmac=function(){return new s.hmac(this.hash,this.K)},a.prototype._update=function(c){var j=this._hmac().update(this.V).update([0]);c&&(j=j.update(c)),this.K=j.digest(),this.V=this._hmac().update(this.V).digest(),c&&(this.K=this._hmac().update(this.V).update([1]).update(c).digest(),this.V=this._hmac().update(this.V).digest())},a.prototype.reseed=function(c,j,_e,pt){typeof j!="string"&&(pt=_e,_e=j,j=null),c=e.toArray(c,j),_e=e.toArray(_e,pt),o(c.length>=this.minEntropy/8,"Not enough entropy. Minimum is: "+this.minEntropy+" bits"),this._update(c.concat(_e||[])),this._reseed=1},a.prototype.generate=function(c,j,_e,pt){if(this._reseed>this.reseedInterval)throw new Error("Reseed is required");typeof j!="string"&&(pt=_e,_e=j,j=null),_e&&(_e=e.toArray(_e,pt||"hex"),this._update(_e));for(var yt=[];yt.length<c;)this.V=this._hmac().update(this.V).digest(),yt=yt.concat(this.V);var ct=yt.slice(0,c);return this._update(_e),this._reseed++,e.encode(ct,j)},hmacDrbg}var key$1,hasRequiredKey$1;function requireKey$1(){if(hasRequiredKey$1)return key$1;hasRequiredKey$1=1;var s=requireBn$3(),e=requireUtils$1(),o=e.assert;function a(d,c){this.ec=d,this.priv=null,this.pub=null,c.priv&&this._importPrivate(c.priv,c.privEnc),c.pub&&this._importPublic(c.pub,c.pubEnc)}return key$1=a,a.fromPublic=function(c,j,_e){return j instanceof a?j:new a(c,{pub:j,pubEnc:_e})},a.fromPrivate=function(c,j,_e){return j instanceof a?j:new a(c,{priv:j,privEnc:_e})},a.prototype.validate=function(){var c=this.getPublic();return c.isInfinity()?{result:!1,reason:"Invalid public key"}:c.validate()?c.mul(this.ec.curve.n).isInfinity()?{result:!0,reason:null}:{result:!1,reason:"Public key * N != O"}:{result:!1,reason:"Public key is not a point"}},a.prototype.getPublic=function(c,j){return typeof c=="string"&&(j=c,c=null),this.pub||(this.pub=this.ec.g.mul(this.priv)),j?this.pub.encode(j,c):this.pub},a.prototype.getPrivate=function(c){return c==="hex"?this.priv.toString(16,2):this.priv},a.prototype._importPrivate=function(c,j){this.priv=new s(c,j||16),this.priv=this.priv.umod(this.ec.curve.n)},a.prototype._importPublic=function(c,j){if(c.x||c.y){this.ec.curve.type==="mont"?o(c.x,"Need x coordinate"):(this.ec.curve.type==="short"||this.ec.curve.type==="edwards")&&o(c.x&&c.y,"Need both x and y coordinate"),this.pub=this.ec.curve.point(c.x,c.y);return}this.pub=this.ec.curve.decodePoint(c,j)},a.prototype.derive=function(c){return c.validate()||o(c.validate(),"public point not validated"),c.mul(this.priv).getX()},a.prototype.sign=function(c,j,_e){return this.ec.sign(c,this,j,_e)},a.prototype.verify=function(c,j,_e){return this.ec.verify(c,j,this,void 0,_e)},a.prototype.inspect=function(){return"<Key priv: "+(this.priv&&this.priv.toString(16,2))+" pub: "+(this.pub&&this.pub.inspect())+" >"},key$1}var signature$1,hasRequiredSignature$1;function requireSignature$1(){if(hasRequiredSignature$1)return signature$1;hasRequiredSignature$1=1;var s=requireBn$3(),e=requireUtils$1(),o=e.assert;function a(pt,yt){if(pt instanceof a)return pt;this._importDER(pt,yt)||(o(pt.r&&pt.s,"Signature without r or s"),this.r=new s(pt.r,16),this.s=new s(pt.s,16),pt.recoveryParam===void 0?this.recoveryParam=null:this.recoveryParam=pt.recoveryParam)}signature$1=a;function d(){this.place=0}function c(pt,yt){var ct=pt[yt.place++];if(!(ct&128))return ct;var Ct=ct&15;if(Ct===0||Ct>4||pt[yt.place]===0)return!1;for(var qt=0,Ot=0,Lt=yt.place;Ot<Ct;Ot++,Lt++)qt<<=8,qt|=pt[Lt],qt>>>=0;return qt<=127?!1:(yt.place=Lt,qt)}function j(pt){for(var yt=0,ct=pt.length-1;!pt[yt]&&!(pt[yt+1]&128)&&yt<ct;)yt++;return yt===0?pt:pt.slice(yt)}a.prototype._importDER=function(yt,ct){yt=e.toArray(yt,ct);var Ct=new d;if(yt[Ct.place++]!==48)return!1;var qt=c(yt,Ct);if(qt===!1||qt+Ct.place!==yt.length||yt[Ct.place++]!==2)return!1;var Ot=c(yt,Ct);if(Ot===!1||yt[Ct.place]&128)return!1;var Lt=yt.slice(Ct.place,Ot+Ct.place);if(Ct.place+=Ot,yt[Ct.place++]!==2)return!1;var Qt=c(yt,Ct);if(Qt===!1||yt.length!==Qt+Ct.place||yt[Ct.place]&128)return!1;var ir=yt.slice(Ct.place,Qt+Ct.place);if(Lt[0]===0)if(Lt[1]&128)Lt=Lt.slice(1);else return!1;if(ir[0]===0)if(ir[1]&128)ir=ir.slice(1);else return!1;return this.r=new s(Lt),this.s=new s(ir),this.recoveryParam=null,!0};function _e(pt,yt){if(yt<128){pt.push(yt);return}var ct=1+(Math.log(yt)/Math.LN2>>>3);for(pt.push(ct|128);--ct;)pt.push(yt>>>(ct<<3)&255);pt.push(yt)}return a.prototype.toDER=function(yt){var ct=this.r.toArray(),Ct=this.s.toArray();for(ct[0]&128&&(ct=[0].concat(ct)),Ct[0]&128&&(Ct=[0].concat(Ct)),ct=j(ct),Ct=j(Ct);!Ct[0]&&!(Ct[1]&128);)Ct=Ct.slice(1);var qt=[2];_e(qt,ct.length),qt=qt.concat(ct),qt.push(2),_e(qt,Ct.length);var Ot=qt.concat(Ct),Lt=[48];return _e(Lt,Ot.length),Lt=Lt.concat(Ot),e.encode(Lt,yt)},signature$1}var ec,hasRequiredEc;function requireEc(){if(hasRequiredEc)return ec;hasRequiredEc=1;var s=requireBn$3(),e=requireHmacDrbg(),o=requireUtils$1(),a=requireCurves(),d=requireBrorand(),c=o.assert,j=requireKey$1(),_e=requireSignature$1();function pt(yt){if(!(this instanceof pt))return new pt(yt);typeof yt=="string"&&(c(Object.prototype.hasOwnProperty.call(a,yt),"Unknown curve "+yt),yt=a[yt]),yt instanceof a.PresetCurve&&(yt={curve:yt}),this.curve=yt.curve.curve,this.n=this.curve.n,this.nh=this.n.ushrn(1),this.g=this.curve.g,this.g=yt.curve.g,this.g.precompute(yt.curve.n.bitLength()+1),this.hash=yt.hash||yt.curve.hash}return ec=pt,pt.prototype.keyPair=function(ct){return new j(this,ct)},pt.prototype.keyFromPrivate=function(ct,Ct){return j.fromPrivate(this,ct,Ct)},pt.prototype.keyFromPublic=function(ct,Ct){return j.fromPublic(this,ct,Ct)},pt.prototype.genKeyPair=function(ct){ct||(ct={});for(var Ct=new e({hash:this.hash,pers:ct.pers,persEnc:ct.persEnc||"utf8",entropy:ct.entropy||d(this.hash.hmacStrength),entropyEnc:ct.entropy&&ct.entropyEnc||"utf8",nonce:this.n.toArray()}),qt=this.n.byteLength(),Ot=this.n.sub(new s(2));;){var Lt=new s(Ct.generate(qt));if(!(Lt.cmp(Ot)>0))return Lt.iaddn(1),this.keyFromPrivate(Lt)}},pt.prototype._truncateToN=function(ct,Ct,qt){var Ot;if(s.isBN(ct)||typeof ct=="number")ct=new s(ct,16),Ot=ct.byteLength();else if(typeof ct=="object")Ot=ct.length,ct=new s(ct,16);else{var Lt=ct.toString();Ot=Lt.length+1>>>1,ct=new s(Lt,16)}typeof qt!="number"&&(qt=Ot*8);var Qt=qt-this.n.bitLength();return Qt>0&&(ct=ct.ushrn(Qt)),!Ct&&ct.cmp(this.n)>=0?ct.sub(this.n):ct},pt.prototype.sign=function(ct,Ct,qt,Ot){if(typeof qt=="object"&&(Ot=qt,qt=null),Ot||(Ot={}),typeof ct!="string"&&typeof ct!="number"&&!s.isBN(ct)){c(typeof ct=="object"&&ct&&typeof ct.length=="number","Expected message to be an array-like, a hex string, or a BN instance"),c(ct.length>>>0===ct.length);for(var Lt=0;Lt<ct.length;Lt++)c((ct[Lt]&255)===ct[Lt])}Ct=this.keyFromPrivate(Ct,qt),ct=this._truncateToN(ct,!1,Ot.msgBitLength),c(!ct.isNeg(),"Can not sign a negative message");var Qt=this.n.byteLength(),ir=Ct.getPrivate().toArray("be",Qt),er=ct.toArray("be",Qt);c(new s(er).eq(ct),"Can not sign message");for(var tr=new e({hash:this.hash,entropy:ir,nonce:er,pers:Ot.pers,persEnc:Ot.persEnc||"utf8"}),sr=this.n.sub(new s(1)),ar=0;;ar++){var hr=Ot.k?Ot.k(ar):new s(tr.generate(this.n.byteLength()));if(hr=this._truncateToN(hr,!0),!(hr.cmpn(1)<=0||hr.cmp(sr)>=0)){var _r=this.g.mul(hr);if(!_r.isInfinity()){var dr=_r.getX(),ur=dr.umod(this.n);if(ur.cmpn(0)!==0){var lr=hr.invm(this.n).mul(ur.mul(Ct.getPrivate()).iadd(ct));if(lr=lr.umod(this.n),lr.cmpn(0)!==0){var gr=(_r.getY().isOdd()?1:0)|(dr.cmp(ur)!==0?2:0);return Ot.canonical&&lr.cmp(this.nh)>0&&(lr=this.n.sub(lr),gr^=1),new _e({r:ur,s:lr,recoveryParam:gr})}}}}}},pt.prototype.verify=function(ct,Ct,qt,Ot,Lt){Lt||(Lt={}),ct=this._truncateToN(ct,!1,Lt.msgBitLength),qt=this.keyFromPublic(qt,Ot),Ct=new _e(Ct,"hex");var Qt=Ct.r,ir=Ct.s;if(Qt.cmpn(1)<0||Qt.cmp(this.n)>=0||ir.cmpn(1)<0||ir.cmp(this.n)>=0)return!1;var er=ir.invm(this.n),tr=er.mul(ct).umod(this.n),sr=er.mul(Qt).umod(this.n),ar;return this.curve._maxwellTrick?(ar=this.g.jmulAdd(tr,qt.getPublic(),sr),ar.isInfinity()?!1:ar.eqXToP(Qt)):(ar=this.g.mulAdd(tr,qt.getPublic(),sr),ar.isInfinity()?!1:ar.getX().umod(this.n).cmp(Qt)===0)},pt.prototype.recoverPubKey=function(yt,ct,Ct,qt){c((3&Ct)===Ct,"The recovery param is more than two bits"),ct=new _e(ct,qt);var Ot=this.n,Lt=new s(yt),Qt=ct.r,ir=ct.s,er=Ct&1,tr=Ct>>1;if(Qt.cmp(this.curve.p.umod(this.curve.n))>=0&&tr)throw new Error("Unable to find sencond key candinate");tr?Qt=this.curve.pointFromX(Qt.add(this.curve.n),er):Qt=this.curve.pointFromX(Qt,er);var sr=ct.r.invm(Ot),ar=Ot.sub(Lt).mul(sr).umod(Ot),hr=ir.mul(sr).umod(Ot);return this.g.mulAdd(ar,Qt,hr)},pt.prototype.getKeyRecoveryParam=function(yt,ct,Ct,qt){if(ct=new _e(ct,qt),ct.recoveryParam!==null)return ct.recoveryParam;for(var Ot=0;Ot<4;Ot++){var Lt;try{Lt=this.recoverPubKey(yt,ct,Ot)}catch{continue}if(Lt.eq(Ct))return Ot}throw new Error("Unable to find valid recovery factor")},ec}var key,hasRequiredKey;function requireKey(){if(hasRequiredKey)return key;hasRequiredKey=1;var s=requireUtils$1(),e=s.assert,o=s.parseBytes,a=s.cachedProperty;function d(c,j){this.eddsa=c,this._secret=o(j.secret),c.isPoint(j.pub)?this._pub=j.pub:this._pubBytes=o(j.pub)}return d.fromPublic=function(j,_e){return _e instanceof d?_e:new d(j,{pub:_e})},d.fromSecret=function(j,_e){return _e instanceof d?_e:new d(j,{secret:_e})},d.prototype.secret=function(){return this._secret},a(d,"pubBytes",function(){return this.eddsa.encodePoint(this.pub())}),a(d,"pub",function(){return this._pubBytes?this.eddsa.decodePoint(this._pubBytes):this.eddsa.g.mul(this.priv())}),a(d,"privBytes",function(){var j=this.eddsa,_e=this.hash(),pt=j.encodingLength-1,yt=_e.slice(0,j.encodingLength);return yt[0]&=248,yt[pt]&=127,yt[pt]|=64,yt}),a(d,"priv",function(){return this.eddsa.decodeInt(this.privBytes())}),a(d,"hash",function(){return this.eddsa.hash().update(this.secret()).digest()}),a(d,"messagePrefix",function(){return this.hash().slice(this.eddsa.encodingLength)}),d.prototype.sign=function(j){return e(this._secret,"KeyPair can only verify"),this.eddsa.sign(j,this)},d.prototype.verify=function(j,_e){return this.eddsa.verify(j,_e,this)},d.prototype.getSecret=function(j){return e(this._secret,"KeyPair is public only"),s.encode(this.secret(),j)},d.prototype.getPublic=function(j){return s.encode(this.pubBytes(),j)},key=d,key}var signature,hasRequiredSignature;function requireSignature(){if(hasRequiredSignature)return signature;hasRequiredSignature=1;var s=requireBn$3(),e=requireUtils$1(),o=e.assert,a=e.cachedProperty,d=e.parseBytes;function c(j,_e){this.eddsa=j,typeof _e!="object"&&(_e=d(_e)),Array.isArray(_e)&&(o(_e.length===j.encodingLength*2,"Signature has invalid size"),_e={R:_e.slice(0,j.encodingLength),S:_e.slice(j.encodingLength)}),o(_e.R&&_e.S,"Signature without R or S"),j.isPoint(_e.R)&&(this._R=_e.R),_e.S instanceof s&&(this._S=_e.S),this._Rencoded=Array.isArray(_e.R)?_e.R:_e.Rencoded,this._Sencoded=Array.isArray(_e.S)?_e.S:_e.Sencoded}return a(c,"S",function(){return this.eddsa.decodeInt(this.Sencoded())}),a(c,"R",function(){return this.eddsa.decodePoint(this.Rencoded())}),a(c,"Rencoded",function(){return this.eddsa.encodePoint(this.R())}),a(c,"Sencoded",function(){return this.eddsa.encodeInt(this.S())}),c.prototype.toBytes=function(){return this.Rencoded().concat(this.Sencoded())},c.prototype.toHex=function(){return e.encode(this.toBytes(),"hex").toUpperCase()},signature=c,signature}var eddsa,hasRequiredEddsa;function requireEddsa(){if(hasRequiredEddsa)return eddsa;hasRequiredEddsa=1;var s=requireHash(),e=requireCurves(),o=requireUtils$1(),a=o.assert,d=o.parseBytes,c=requireKey(),j=requireSignature();function _e(pt){if(a(pt==="ed25519","only tested with ed25519 so far"),!(this instanceof _e))return new _e(pt);pt=e[pt].curve,this.curve=pt,this.g=pt.g,this.g.precompute(pt.n.bitLength()+1),this.pointClass=pt.point().constructor,this.encodingLength=Math.ceil(pt.n.bitLength()/8),this.hash=s.sha512}return eddsa=_e,_e.prototype.sign=function(yt,ct){yt=d(yt);var Ct=this.keyFromSecret(ct),qt=this.hashInt(Ct.messagePrefix(),yt),Ot=this.g.mul(qt),Lt=this.encodePoint(Ot),Qt=this.hashInt(Lt,Ct.pubBytes(),yt).mul(Ct.priv()),ir=qt.add(Qt).umod(this.curve.n);return this.makeSignature({R:Ot,S:ir,Rencoded:Lt})},_e.prototype.verify=function(yt,ct,Ct){if(yt=d(yt),ct=this.makeSignature(ct),ct.S().gte(ct.eddsa.curve.n)||ct.S().isNeg())return!1;var qt=this.keyFromPublic(Ct),Ot=this.hashInt(ct.Rencoded(),qt.pubBytes(),yt),Lt=this.g.mul(ct.S()),Qt=ct.R().add(qt.pub().mul(Ot));return Qt.eq(Lt)},_e.prototype.hashInt=function(){for(var yt=this.hash(),ct=0;ct<arguments.length;ct++)yt.update(arguments[ct]);return o.intFromLE(yt.digest()).umod(this.curve.n)},_e.prototype.keyFromPublic=function(yt){return c.fromPublic(this,yt)},_e.prototype.keyFromSecret=function(yt){return c.fromSecret(this,yt)},_e.prototype.makeSignature=function(yt){return yt instanceof j?yt:new j(this,yt)},_e.prototype.encodePoint=function(yt){var ct=yt.getY().toArray("le",this.encodingLength);return ct[this.encodingLength-1]|=yt.getX().isOdd()?128:0,ct},_e.prototype.decodePoint=function(yt){yt=o.parseBytes(yt);var ct=yt.length-1,Ct=yt.slice(0,ct).concat(yt[ct]&-129),qt=(yt[ct]&128)!==0,Ot=o.intFromLE(Ct);return this.curve.pointFromY(Ot,qt)},_e.prototype.encodeInt=function(yt){return yt.toArray("le",this.encodingLength)},_e.prototype.decodeInt=function(yt){return o.intFromLE(yt)},_e.prototype.isPoint=function(yt){return yt instanceof this.pointClass},eddsa}var hasRequiredElliptic;function requireElliptic(){return hasRequiredElliptic||(hasRequiredElliptic=1,function(s){var e=s;e.version=require$$0.version,e.utils=requireUtils$1(),e.rand=requireBrorand(),e.curve=requireCurve(),e.curves=requireCurves(),e.ec=requireEc(),e.eddsa=requireEddsa()}(elliptic)),elliptic}var asn1$1={},asn1={},bn$2={exports:{}};bn$2.exports;var hasRequiredBn$2;function requireBn$2(){return hasRequiredBn$2||(hasRequiredBn$2=1,function(s){(function(e,o){function a(Mt,h){if(!Mt)throw new Error(h||"Assertion failed")}function d(Mt,h){Mt.super_=h;var _=function(){};_.prototype=h.prototype,Mt.prototype=new _,Mt.prototype.constructor=Mt}function c(Mt,h,_){if(c.isBN(Mt))return Mt;this.negative=0,this.words=null,this.length=0,this.red=null,Mt!==null&&((h==="le"||h==="be")&&(_=h,h=10),this._init(Mt||0,h||10,_||"be"))}typeof e=="object"?e.exports=c:o.BN=c,c.BN=c,c.wordSize=26;var j;try{typeof window<"u"&&typeof window.Buffer<"u"?j=window.Buffer:j=require$$0$1.Buffer}catch{}c.isBN=function(h){return h instanceof c?!0:h!==null&&typeof h=="object"&&h.constructor.wordSize===c.wordSize&&Array.isArray(h.words)},c.max=function(h,_){return h.cmp(_)>0?h:_},c.min=function(h,_){return h.cmp(_)<0?h:_},c.prototype._init=function(h,_,b){if(typeof h=="number")return this._initNumber(h,_,b);if(typeof h=="object")return this._initArray(h,_,b);_==="hex"&&(_=16),a(_===(_|0)&&_>=2&&_<=36),h=h.toString().replace(/\s+/g,"");var lt=0;h[0]==="-"&&(lt++,this.negative=1),lt<h.length&&(_===16?this._parseHex(h,lt,b):(this._parseBase(h,_,lt),b==="le"&&this._initArray(this.toArray(),_,b)))},c.prototype._initNumber=function(h,_,b){h<0&&(this.negative=1,h=-h),h<67108864?(this.words=[h&67108863],this.length=1):h<4503599627370496?(this.words=[h&67108863,h/67108864&67108863],this.length=2):(a(h<9007199254740992),this.words=[h&67108863,h/67108864&67108863,1],this.length=3),b==="le"&&this._initArray(this.toArray(),_,b)},c.prototype._initArray=function(h,_,b){if(a(typeof h.length=="number"),h.length<=0)return this.words=[0],this.length=1,this;this.length=Math.ceil(h.length/3),this.words=new Array(this.length);for(var lt=0;lt<this.length;lt++)this.words[lt]=0;var Rt,kt,Ft=0;if(b==="be")for(lt=h.length-1,Rt=0;lt>=0;lt-=3)kt=h[lt]|h[lt-1]<<8|h[lt-2]<<16,this.words[Rt]|=kt<<Ft&67108863,this.words[Rt+1]=kt>>>26-Ft&67108863,Ft+=24,Ft>=26&&(Ft-=26,Rt++);else if(b==="le")for(lt=0,Rt=0;lt<h.length;lt+=3)kt=h[lt]|h[lt+1]<<8|h[lt+2]<<16,this.words[Rt]|=kt<<Ft&67108863,this.words[Rt+1]=kt>>>26-Ft&67108863,Ft+=24,Ft>=26&&(Ft-=26,Rt++);return this.strip()};function _e(Mt,h){var _=Mt.charCodeAt(h);return _>=65&&_<=70?_-55:_>=97&&_<=102?_-87:_-48&15}function pt(Mt,h,_){var b=_e(Mt,_);return _-1>=h&&(b|=_e(Mt,_-1)<<4),b}c.prototype._parseHex=function(h,_,b){this.length=Math.ceil((h.length-_)/6),this.words=new Array(this.length);for(var lt=0;lt<this.length;lt++)this.words[lt]=0;var Rt=0,kt=0,Ft;if(b==="be")for(lt=h.length-1;lt>=_;lt-=2)Ft=pt(h,_,lt)<<Rt,this.words[kt]|=Ft&67108863,Rt>=18?(Rt-=18,kt+=1,this.words[kt]|=Ft>>>26):Rt+=8;else{var xt=h.length-_;for(lt=xt%2===0?_+1:_;lt<h.length;lt+=2)Ft=pt(h,_,lt)<<Rt,this.words[kt]|=Ft&67108863,Rt>=18?(Rt-=18,kt+=1,this.words[kt]|=Ft>>>26):Rt+=8}this.strip()};function yt(Mt,h,_,b){for(var lt=0,Rt=Math.min(Mt.length,_),kt=h;kt<Rt;kt++){var Ft=Mt.charCodeAt(kt)-48;lt*=b,Ft>=49?lt+=Ft-49+10:Ft>=17?lt+=Ft-17+10:lt+=Ft}return lt}c.prototype._parseBase=function(h,_,b){this.words=[0],this.length=1;for(var lt=0,Rt=1;Rt<=67108863;Rt*=_)lt++;lt--,Rt=Rt/_|0;for(var kt=h.length-b,Ft=kt%lt,xt=Math.min(kt,kt-Ft)+b,g=0,wt=b;wt<xt;wt+=lt)g=yt(h,wt,wt+lt,_),this.imuln(Rt),this.words[0]+g<67108864?this.words[0]+=g:this._iaddn(g);if(Ft!==0){var nr=1;for(g=yt(h,wt,h.length,_),wt=0;wt<Ft;wt++)nr*=_;this.imuln(nr),this.words[0]+g<67108864?this.words[0]+=g:this._iaddn(g)}this.strip()},c.prototype.copy=function(h){h.words=new Array(this.length);for(var _=0;_<this.length;_++)h.words[_]=this.words[_];h.length=this.length,h.negative=this.negative,h.red=this.red},c.prototype.clone=function(){var h=new c(null);return this.copy(h),h},c.prototype._expand=function(h){for(;this.length<h;)this.words[this.length++]=0;return this},c.prototype.strip=function(){for(;this.length>1&&this.words[this.length-1]===0;)this.length--;return this._normSign()},c.prototype._normSign=function(){return this.length===1&&this.words[0]===0&&(this.negative=0),this},c.prototype.inspect=function(){return(this.red?"<BN-R: ":"<BN: ")+this.toString(16)+">"};var ct=["","0","00","000","0000","00000","000000","0000000","00000000","000000000","0000000000","00000000000","000000000000","0000000000000","00000000000000","000000000000000","0000000000000000","00000000000000000","000000000000000000","0000000000000000000","00000000000000000000","000000000000000000000","0000000000000000000000","00000000000000000000000","000000000000000000000000","0000000000000000000000000"],Ct=[0,0,25,16,12,11,10,9,8,8,7,7,7,7,6,6,6,6,6,6,6,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5],qt=[0,0,33554432,43046721,16777216,48828125,60466176,40353607,16777216,43046721,1e7,19487171,35831808,62748517,7529536,11390625,16777216,24137569,34012224,47045881,64e6,4084101,5153632,6436343,7962624,9765625,11881376,14348907,17210368,20511149,243e5,28629151,33554432,39135393,45435424,52521875,60466176];c.prototype.toString=function(h,_){h=h||10,_=_|0||1;var b;if(h===16||h==="hex"){b="";for(var lt=0,Rt=0,kt=0;kt<this.length;kt++){var Ft=this.words[kt],xt=((Ft<<lt|Rt)&16777215).toString(16);Rt=Ft>>>24-lt&16777215,lt+=2,lt>=26&&(lt-=26,kt--),Rt!==0||kt!==this.length-1?b=ct[6-xt.length]+xt+b:b=xt+b}for(Rt!==0&&(b=Rt.toString(16)+b);b.length%_!==0;)b="0"+b;return this.negative!==0&&(b="-"+b),b}if(h===(h|0)&&h>=2&&h<=36){var g=Ct[h],wt=qt[h];b="";var nr=this.clone();for(nr.negative=0;!nr.isZero();){var or=nr.modn(wt).toString(h);nr=nr.idivn(wt),nr.isZero()?b=or+b:b=ct[g-or.length]+or+b}for(this.isZero()&&(b="0"+b);b.length%_!==0;)b="0"+b;return this.negative!==0&&(b="-"+b),b}a(!1,"Base should be between 2 and 36")},c.prototype.toNumber=function(){var h=this.words[0];return this.length===2?h+=this.words[1]*67108864:this.length===3&&this.words[2]===1?h+=4503599627370496+this.words[1]*67108864:this.length>2&&a(!1,"Number can only safely store up to 53 bits"),this.negative!==0?-h:h},c.prototype.toJSON=function(){return this.toString(16)},c.prototype.toBuffer=function(h,_){return a(typeof j<"u"),this.toArrayLike(j,h,_)},c.prototype.toArray=function(h,_){return this.toArrayLike(Array,h,_)},c.prototype.toArrayLike=function(h,_,b){var lt=this.byteLength(),Rt=b||Math.max(1,lt);a(lt<=Rt,"byte array longer than desired length"),a(Rt>0,"Requested array length <= 0"),this.strip();var kt=_==="le",Ft=new h(Rt),xt,g,wt=this.clone();if(kt){for(g=0;!wt.isZero();g++)xt=wt.andln(255),wt.iushrn(8),Ft[g]=xt;for(;g<Rt;g++)Ft[g]=0}else{for(g=0;g<Rt-lt;g++)Ft[g]=0;for(g=0;!wt.isZero();g++)xt=wt.andln(255),wt.iushrn(8),Ft[Rt-g-1]=xt}return Ft},Math.clz32?c.prototype._countBits=function(h){return 32-Math.clz32(h)}:c.prototype._countBits=function(h){var _=h,b=0;return _>=4096&&(b+=13,_>>>=13),_>=64&&(b+=7,_>>>=7),_>=8&&(b+=4,_>>>=4),_>=2&&(b+=2,_>>>=2),b+_},c.prototype._zeroBits=function(h){if(h===0)return 26;var _=h,b=0;return _&8191||(b+=13,_>>>=13),_&127||(b+=7,_>>>=7),_&15||(b+=4,_>>>=4),_&3||(b+=2,_>>>=2),_&1||b++,b},c.prototype.bitLength=function(){var h=this.words[this.length-1],_=this._countBits(h);return(this.length-1)*26+_};function Ot(Mt){for(var h=new Array(Mt.bitLength()),_=0;_<h.length;_++){var b=_/26|0,lt=_%26;h[_]=(Mt.words[b]&1<<lt)>>>lt}return h}c.prototype.zeroBits=function(){if(this.isZero())return 0;for(var h=0,_=0;_<this.length;_++){var b=this._zeroBits(this.words[_]);if(h+=b,b!==26)break}return h},c.prototype.byteLength=function(){return Math.ceil(this.bitLength()/8)},c.prototype.toTwos=function(h){return this.negative!==0?this.abs().inotn(h).iaddn(1):this.clone()},c.prototype.fromTwos=function(h){return this.testn(h-1)?this.notn(h).iaddn(1).ineg():this.clone()},c.prototype.isNeg=function(){return this.negative!==0},c.prototype.neg=function(){return this.clone().ineg()},c.prototype.ineg=function(){return this.isZero()||(this.negative^=1),this},c.prototype.iuor=function(h){for(;this.length<h.length;)this.words[this.length++]=0;for(var _=0;_<h.length;_++)this.words[_]=this.words[_]|h.words[_];return this.strip()},c.prototype.ior=function(h){return a((this.negative|h.negative)===0),this.iuor(h)},c.prototype.or=function(h){return this.length>h.length?this.clone().ior(h):h.clone().ior(this)},c.prototype.uor=function(h){return this.length>h.length?this.clone().iuor(h):h.clone().iuor(this)},c.prototype.iuand=function(h){var _;this.length>h.length?_=h:_=this;for(var b=0;b<_.length;b++)this.words[b]=this.words[b]&h.words[b];return this.length=_.length,this.strip()},c.prototype.iand=function(h){return a((this.negative|h.negative)===0),this.iuand(h)},c.prototype.and=function(h){return this.length>h.length?this.clone().iand(h):h.clone().iand(this)},c.prototype.uand=function(h){return this.length>h.length?this.clone().iuand(h):h.clone().iuand(this)},c.prototype.iuxor=function(h){var _,b;this.length>h.length?(_=this,b=h):(_=h,b=this);for(var lt=0;lt<b.length;lt++)this.words[lt]=_.words[lt]^b.words[lt];if(this!==_)for(;lt<_.length;lt++)this.words[lt]=_.words[lt];return this.length=_.length,this.strip()},c.prototype.ixor=function(h){return a((this.negative|h.negative)===0),this.iuxor(h)},c.prototype.xor=function(h){return this.length>h.length?this.clone().ixor(h):h.clone().ixor(this)},c.prototype.uxor=function(h){return this.length>h.length?this.clone().iuxor(h):h.clone().iuxor(this)},c.prototype.inotn=function(h){a(typeof h=="number"&&h>=0);var _=Math.ceil(h/26)|0,b=h%26;this._expand(_),b>0&&_--;for(var lt=0;lt<_;lt++)this.words[lt]=~this.words[lt]&67108863;return b>0&&(this.words[lt]=~this.words[lt]&67108863>>26-b),this.strip()},c.prototype.notn=function(h){return this.clone().inotn(h)},c.prototype.setn=function(h,_){a(typeof h=="number"&&h>=0);var b=h/26|0,lt=h%26;return this._expand(b+1),_?this.words[b]=this.words[b]|1<<lt:this.words[b]=this.words[b]&~(1<<lt),this.strip()},c.prototype.iadd=function(h){var _;if(this.negative!==0&&h.negative===0)return this.negative=0,_=this.isub(h),this.negative^=1,this._normSign();if(this.negative===0&&h.negative!==0)return h.negative=0,_=this.isub(h),h.negative=1,_._normSign();var b,lt;this.length>h.length?(b=this,lt=h):(b=h,lt=this);for(var Rt=0,kt=0;kt<lt.length;kt++)_=(b.words[kt]|0)+(lt.words[kt]|0)+Rt,this.words[kt]=_&67108863,Rt=_>>>26;for(;Rt!==0&&kt<b.length;kt++)_=(b.words[kt]|0)+Rt,this.words[kt]=_&67108863,Rt=_>>>26;if(this.length=b.length,Rt!==0)this.words[this.length]=Rt,this.length++;else if(b!==this)for(;kt<b.length;kt++)this.words[kt]=b.words[kt];return this},c.prototype.add=function(h){var _;return h.negative!==0&&this.negative===0?(h.negative=0,_=this.sub(h),h.negative^=1,_):h.negative===0&&this.negative!==0?(this.negative=0,_=h.sub(this),this.negative=1,_):this.length>h.length?this.clone().iadd(h):h.clone().iadd(this)},c.prototype.isub=function(h){if(h.negative!==0){h.negative=0;var _=this.iadd(h);return h.negative=1,_._normSign()}else if(this.negative!==0)return this.negative=0,this.iadd(h),this.negative=1,this._normSign();var b=this.cmp(h);if(b===0)return this.negative=0,this.length=1,this.words[0]=0,this;var lt,Rt;b>0?(lt=this,Rt=h):(lt=h,Rt=this);for(var kt=0,Ft=0;Ft<Rt.length;Ft++)_=(lt.words[Ft]|0)-(Rt.words[Ft]|0)+kt,kt=_>>26,this.words[Ft]=_&67108863;for(;kt!==0&&Ft<lt.length;Ft++)_=(lt.words[Ft]|0)+kt,kt=_>>26,this.words[Ft]=_&67108863;if(kt===0&&Ft<lt.length&&lt!==this)for(;Ft<lt.length;Ft++)this.words[Ft]=lt.words[Ft];return this.length=Math.max(this.length,Ft),lt!==this&&(this.negative=1),this.strip()},c.prototype.sub=function(h){return this.clone().isub(h)};function Lt(Mt,h,_){_.negative=h.negative^Mt.negative;var b=Mt.length+h.length|0;_.length=b,b=b-1|0;var lt=Mt.words[0]|0,Rt=h.words[0]|0,kt=lt*Rt,Ft=kt&67108863,xt=kt/67108864|0;_.words[0]=Ft;for(var g=1;g<b;g++){for(var wt=xt>>>26,nr=xt&67108863,or=Math.min(g,h.length-1),cr=Math.max(0,g-Mt.length+1);cr<=or;cr++){var Rr=g-cr|0;lt=Mt.words[Rr]|0,Rt=h.words[cr]|0,kt=lt*Rt+nr,wt+=kt/67108864|0,nr=kt&67108863}_.words[g]=nr|0,xt=wt|0}return xt!==0?_.words[g]=xt|0:_.length--,_.strip()}var Qt=function(h,_,b){var lt=h.words,Rt=_.words,kt=b.words,Ft=0,xt,g,wt,nr=lt[0]|0,or=nr&8191,cr=nr>>>13,Rr=lt[1]|0,Ar=Rr&8191,pr=Rr>>>13,wr=lt[2]|0,Tr=wr&8191,Ir=wr>>>13,Sr=lt[3]|0,br=Sr&8191,kr=Sr>>>13,Qr=lt[4]|0,qr=Qr&8191,$r=Qr>>>13,gn=lt[5]|0,Lr=gn&8191,Dr=gn>>>13,En=lt[6]|0,Fr=En&8191,zr=En>>>13,yn=lt[7]|0,Nr=yn&8191,Wr=yn>>>13,xn=lt[8]|0,Or=xn&8191,Yr=xn>>>13,Pn=lt[9]|0,xr=Pn&8191,fr=Pn>>>13,yr=Rt[0]|0,Mr=yr&8191,Pr=yr>>>13,Vr=Rt[1]|0,Br=Vr&8191,jr=Vr>>>13,An=Rt[2]|0,Ur=An&8191,Gr=An>>>13,wn=Rt[3]|0,Xr=wn&8191,hn=wn>>>13,In=Rt[4]|0,Jr=In&8191,fn=In>>>13,kn=Rt[5]|0,Kr=kn&8191,dn=kn>>>13,Rn=Rt[6]|0,Zr=Rn&8191,un=Rn>>>13,Mn=Rt[7]|0,rn=Mn&8191,pn=Mn>>>13,Cn=Rt[8]|0,ln=Cn&8191,vn=Cn>>>13,Bn=Rt[9]|0,an=Bn&8191,mn=Bn>>>13;b.negative=h.negative^_.negative,b.length=19,xt=Math.imul(or,Mr),g=Math.imul(or,Pr),g=g+Math.imul(cr,Mr)|0,wt=Math.imul(cr,Pr);var Sn=(Ft+xt|0)+((g&8191)<<13)|0;Ft=(wt+(g>>>13)|0)+(Sn>>>26)|0,Sn&=67108863,xt=Math.imul(Ar,Mr),g=Math.imul(Ar,Pr),g=g+Math.imul(pr,Mr)|0,wt=Math.imul(pr,Pr),xt=xt+Math.imul(or,Br)|0,g=g+Math.imul(or,jr)|0,g=g+Math.imul(cr,Br)|0,wt=wt+Math.imul(cr,jr)|0;var Tn=(Ft+xt|0)+((g&8191)<<13)|0;Ft=(wt+(g>>>13)|0)+(Tn>>>26)|0,Tn&=67108863,xt=Math.imul(Tr,Mr),g=Math.imul(Tr,Pr),g=g+Math.imul(Ir,Mr)|0,wt=Math.imul(Ir,Pr),xt=xt+Math.imul(Ar,Br)|0,g=g+Math.imul(Ar,jr)|0,g=g+Math.imul(pr,Br)|0,wt=wt+Math.imul(pr,jr)|0,xt=xt+Math.imul(or,Ur)|0,g=g+Math.imul(or,Gr)|0,g=g+Math.imul(cr,Ur)|0,wt=wt+Math.imul(cr,Gr)|0;var Un=(Ft+xt|0)+((g&8191)<<13)|0;Ft=(wt+(g>>>13)|0)+(Un>>>26)|0,Un&=67108863,xt=Math.imul(br,Mr),g=Math.imul(br,Pr),g=g+Math.imul(kr,Mr)|0,wt=Math.imul(kr,Pr),xt=xt+Math.imul(Tr,Br)|0,g=g+Math.imul(Tr,jr)|0,g=g+Math.imul(Ir,Br)|0,wt=wt+Math.imul(Ir,jr)|0,xt=xt+Math.imul(Ar,Ur)|0,g=g+Math.imul(Ar,Gr)|0,g=g+Math.imul(pr,Ur)|0,wt=wt+Math.imul(pr,Gr)|0,xt=xt+Math.imul(or,Xr)|0,g=g+Math.imul(or,hn)|0,g=g+Math.imul(cr,Xr)|0,wt=wt+Math.imul(cr,hn)|0;var jn=(Ft+xt|0)+((g&8191)<<13)|0;Ft=(wt+(g>>>13)|0)+(jn>>>26)|0,jn&=67108863,xt=Math.imul(qr,Mr),g=Math.imul(qr,Pr),g=g+Math.imul($r,Mr)|0,wt=Math.imul($r,Pr),xt=xt+Math.imul(br,Br)|0,g=g+Math.imul(br,jr)|0,g=g+Math.imul(kr,Br)|0,wt=wt+Math.imul(kr,jr)|0,xt=xt+Math.imul(Tr,Ur)|0,g=g+Math.imul(Tr,Gr)|0,g=g+Math.imul(Ir,Ur)|0,wt=wt+Math.imul(Ir,Gr)|0,xt=xt+Math.imul(Ar,Xr)|0,g=g+Math.imul(Ar,hn)|0,g=g+Math.imul(pr,Xr)|0,wt=wt+Math.imul(pr,hn)|0,xt=xt+Math.imul(or,Jr)|0,g=g+Math.imul(or,fn)|0,g=g+Math.imul(cr,Jr)|0,wt=wt+Math.imul(cr,fn)|0;var Vn=(Ft+xt|0)+((g&8191)<<13)|0;Ft=(wt+(g>>>13)|0)+(Vn>>>26)|0,Vn&=67108863,xt=Math.imul(Lr,Mr),g=Math.imul(Lr,Pr),g=g+Math.imul(Dr,Mr)|0,wt=Math.imul(Dr,Pr),xt=xt+Math.imul(qr,Br)|0,g=g+Math.imul(qr,jr)|0,g=g+Math.imul($r,Br)|0,wt=wt+Math.imul($r,jr)|0,xt=xt+Math.imul(br,Ur)|0,g=g+Math.imul(br,Gr)|0,g=g+Math.imul(kr,Ur)|0,wt=wt+Math.imul(kr,Gr)|0,xt=xt+Math.imul(Tr,Xr)|0,g=g+Math.imul(Tr,hn)|0,g=g+Math.imul(Ir,Xr)|0,wt=wt+Math.imul(Ir,hn)|0,xt=xt+Math.imul(Ar,Jr)|0,g=g+Math.imul(Ar,fn)|0,g=g+Math.imul(pr,Jr)|0,wt=wt+Math.imul(pr,fn)|0,xt=xt+Math.imul(or,Kr)|0,g=g+Math.imul(or,dn)|0,g=g+Math.imul(cr,Kr)|0,wt=wt+Math.imul(cr,dn)|0;var Nn=(Ft+xt|0)+((g&8191)<<13)|0;Ft=(wt+(g>>>13)|0)+(Nn>>>26)|0,Nn&=67108863,xt=Math.imul(Fr,Mr),g=Math.imul(Fr,Pr),g=g+Math.imul(zr,Mr)|0,wt=Math.imul(zr,Pr),xt=xt+Math.imul(Lr,Br)|0,g=g+Math.imul(Lr,jr)|0,g=g+Math.imul(Dr,Br)|0,wt=wt+Math.imul(Dr,jr)|0,xt=xt+Math.imul(qr,Ur)|0,g=g+Math.imul(qr,Gr)|0,g=g+Math.imul($r,Ur)|0,wt=wt+Math.imul($r,Gr)|0,xt=xt+Math.imul(br,Xr)|0,g=g+Math.imul(br,hn)|0,g=g+Math.imul(kr,Xr)|0,wt=wt+Math.imul(kr,hn)|0,xt=xt+Math.imul(Tr,Jr)|0,g=g+Math.imul(Tr,fn)|0,g=g+Math.imul(Ir,Jr)|0,wt=wt+Math.imul(Ir,fn)|0,xt=xt+Math.imul(Ar,Kr)|0,g=g+Math.imul(Ar,dn)|0,g=g+Math.imul(pr,Kr)|0,wt=wt+Math.imul(pr,dn)|0,xt=xt+Math.imul(or,Zr)|0,g=g+Math.imul(or,un)|0,g=g+Math.imul(cr,Zr)|0,wt=wt+Math.imul(cr,un)|0;var zn=(Ft+xt|0)+((g&8191)<<13)|0;Ft=(wt+(g>>>13)|0)+(zn>>>26)|0,zn&=67108863,xt=Math.imul(Nr,Mr),g=Math.imul(Nr,Pr),g=g+Math.imul(Wr,Mr)|0,wt=Math.imul(Wr,Pr),xt=xt+Math.imul(Fr,Br)|0,g=g+Math.imul(Fr,jr)|0,g=g+Math.imul(zr,Br)|0,wt=wt+Math.imul(zr,jr)|0,xt=xt+Math.imul(Lr,Ur)|0,g=g+Math.imul(Lr,Gr)|0,g=g+Math.imul(Dr,Ur)|0,wt=wt+Math.imul(Dr,Gr)|0,xt=xt+Math.imul(qr,Xr)|0,g=g+Math.imul(qr,hn)|0,g=g+Math.imul($r,Xr)|0,wt=wt+Math.imul($r,hn)|0,xt=xt+Math.imul(br,Jr)|0,g=g+Math.imul(br,fn)|0,g=g+Math.imul(kr,Jr)|0,wt=wt+Math.imul(kr,fn)|0,xt=xt+Math.imul(Tr,Kr)|0,g=g+Math.imul(Tr,dn)|0,g=g+Math.imul(Ir,Kr)|0,wt=wt+Math.imul(Ir,dn)|0,xt=xt+Math.imul(Ar,Zr)|0,g=g+Math.imul(Ar,un)|0,g=g+Math.imul(pr,Zr)|0,wt=wt+Math.imul(pr,un)|0,xt=xt+Math.imul(or,rn)|0,g=g+Math.imul(or,pn)|0,g=g+Math.imul(cr,rn)|0,wt=wt+Math.imul(cr,pn)|0;var Hn=(Ft+xt|0)+((g&8191)<<13)|0;Ft=(wt+(g>>>13)|0)+(Hn>>>26)|0,Hn&=67108863,xt=Math.imul(Or,Mr),g=Math.imul(Or,Pr),g=g+Math.imul(Yr,Mr)|0,wt=Math.imul(Yr,Pr),xt=xt+Math.imul(Nr,Br)|0,g=g+Math.imul(Nr,jr)|0,g=g+Math.imul(Wr,Br)|0,wt=wt+Math.imul(Wr,jr)|0,xt=xt+Math.imul(Fr,Ur)|0,g=g+Math.imul(Fr,Gr)|0,g=g+Math.imul(zr,Ur)|0,wt=wt+Math.imul(zr,Gr)|0,xt=xt+Math.imul(Lr,Xr)|0,g=g+Math.imul(Lr,hn)|0,g=g+Math.imul(Dr,Xr)|0,wt=wt+Math.imul(Dr,hn)|0,xt=xt+Math.imul(qr,Jr)|0,g=g+Math.imul(qr,fn)|0,g=g+Math.imul($r,Jr)|0,wt=wt+Math.imul($r,fn)|0,xt=xt+Math.imul(br,Kr)|0,g=g+Math.imul(br,dn)|0,g=g+Math.imul(kr,Kr)|0,wt=wt+Math.imul(kr,dn)|0,xt=xt+Math.imul(Tr,Zr)|0,g=g+Math.imul(Tr,un)|0,g=g+Math.imul(Ir,Zr)|0,wt=wt+Math.imul(Ir,un)|0,xt=xt+Math.imul(Ar,rn)|0,g=g+Math.imul(Ar,pn)|0,g=g+Math.imul(pr,rn)|0,wt=wt+Math.imul(pr,pn)|0,xt=xt+Math.imul(or,ln)|0,g=g+Math.imul(or,vn)|0,g=g+Math.imul(cr,ln)|0,wt=wt+Math.imul(cr,vn)|0;var Xn=(Ft+xt|0)+((g&8191)<<13)|0;Ft=(wt+(g>>>13)|0)+(Xn>>>26)|0,Xn&=67108863,xt=Math.imul(xr,Mr),g=Math.imul(xr,Pr),g=g+Math.imul(fr,Mr)|0,wt=Math.imul(fr,Pr),xt=xt+Math.imul(Or,Br)|0,g=g+Math.imul(Or,jr)|0,g=g+Math.imul(Yr,Br)|0,wt=wt+Math.imul(Yr,jr)|0,xt=xt+Math.imul(Nr,Ur)|0,g=g+Math.imul(Nr,Gr)|0,g=g+Math.imul(Wr,Ur)|0,wt=wt+Math.imul(Wr,Gr)|0,xt=xt+Math.imul(Fr,Xr)|0,g=g+Math.imul(Fr,hn)|0,g=g+Math.imul(zr,Xr)|0,wt=wt+Math.imul(zr,hn)|0,xt=xt+Math.imul(Lr,Jr)|0,g=g+Math.imul(Lr,fn)|0,g=g+Math.imul(Dr,Jr)|0,wt=wt+Math.imul(Dr,fn)|0,xt=xt+Math.imul(qr,Kr)|0,g=g+Math.imul(qr,dn)|0,g=g+Math.imul($r,Kr)|0,wt=wt+Math.imul($r,dn)|0,xt=xt+Math.imul(br,Zr)|0,g=g+Math.imul(br,un)|0,g=g+Math.imul(kr,Zr)|0,wt=wt+Math.imul(kr,un)|0,xt=xt+Math.imul(Tr,rn)|0,g=g+Math.imul(Tr,pn)|0,g=g+Math.imul(Ir,rn)|0,wt=wt+Math.imul(Ir,pn)|0,xt=xt+Math.imul(Ar,ln)|0,g=g+Math.imul(Ar,vn)|0,g=g+Math.imul(pr,ln)|0,wt=wt+Math.imul(pr,vn)|0,xt=xt+Math.imul(or,an)|0,g=g+Math.imul(or,mn)|0,g=g+Math.imul(cr,an)|0,wt=wt+Math.imul(cr,mn)|0;var qn=(Ft+xt|0)+((g&8191)<<13)|0;Ft=(wt+(g>>>13)|0)+(qn>>>26)|0,qn&=67108863,xt=Math.imul(xr,Br),g=Math.imul(xr,jr),g=g+Math.imul(fr,Br)|0,wt=Math.imul(fr,jr),xt=xt+Math.imul(Or,Ur)|0,g=g+Math.imul(Or,Gr)|0,g=g+Math.imul(Yr,Ur)|0,wt=wt+Math.imul(Yr,Gr)|0,xt=xt+Math.imul(Nr,Xr)|0,g=g+Math.imul(Nr,hn)|0,g=g+Math.imul(Wr,Xr)|0,wt=wt+Math.imul(Wr,hn)|0,xt=xt+Math.imul(Fr,Jr)|0,g=g+Math.imul(Fr,fn)|0,g=g+Math.imul(zr,Jr)|0,wt=wt+Math.imul(zr,fn)|0,xt=xt+Math.imul(Lr,Kr)|0,g=g+Math.imul(Lr,dn)|0,g=g+Math.imul(Dr,Kr)|0,wt=wt+Math.imul(Dr,dn)|0,xt=xt+Math.imul(qr,Zr)|0,g=g+Math.imul(qr,un)|0,g=g+Math.imul($r,Zr)|0,wt=wt+Math.imul($r,un)|0,xt=xt+Math.imul(br,rn)|0,g=g+Math.imul(br,pn)|0,g=g+Math.imul(kr,rn)|0,wt=wt+Math.imul(kr,pn)|0,xt=xt+Math.imul(Tr,ln)|0,g=g+Math.imul(Tr,vn)|0,g=g+Math.imul(Ir,ln)|0,wt=wt+Math.imul(Ir,vn)|0,xt=xt+Math.imul(Ar,an)|0,g=g+Math.imul(Ar,mn)|0,g=g+Math.imul(pr,an)|0,wt=wt+Math.imul(pr,mn)|0;var Wn=(Ft+xt|0)+((g&8191)<<13)|0;Ft=(wt+(g>>>13)|0)+(Wn>>>26)|0,Wn&=67108863,xt=Math.imul(xr,Ur),g=Math.imul(xr,Gr),g=g+Math.imul(fr,Ur)|0,wt=Math.imul(fr,Gr),xt=xt+Math.imul(Or,Xr)|0,g=g+Math.imul(Or,hn)|0,g=g+Math.imul(Yr,Xr)|0,wt=wt+Math.imul(Yr,hn)|0,xt=xt+Math.imul(Nr,Jr)|0,g=g+Math.imul(Nr,fn)|0,g=g+Math.imul(Wr,Jr)|0,wt=wt+Math.imul(Wr,fn)|0,xt=xt+Math.imul(Fr,Kr)|0,g=g+Math.imul(Fr,dn)|0,g=g+Math.imul(zr,Kr)|0,wt=wt+Math.imul(zr,dn)|0,xt=xt+Math.imul(Lr,Zr)|0,g=g+Math.imul(Lr,un)|0,g=g+Math.imul(Dr,Zr)|0,wt=wt+Math.imul(Dr,un)|0,xt=xt+Math.imul(qr,rn)|0,g=g+Math.imul(qr,pn)|0,g=g+Math.imul($r,rn)|0,wt=wt+Math.imul($r,pn)|0,xt=xt+Math.imul(br,ln)|0,g=g+Math.imul(br,vn)|0,g=g+Math.imul(kr,ln)|0,wt=wt+Math.imul(kr,vn)|0,xt=xt+Math.imul(Tr,an)|0,g=g+Math.imul(Tr,mn)|0,g=g+Math.imul(Ir,an)|0,wt=wt+Math.imul(Ir,mn)|0;var On=(Ft+xt|0)+((g&8191)<<13)|0;Ft=(wt+(g>>>13)|0)+(On>>>26)|0,On&=67108863,xt=Math.imul(xr,Xr),g=Math.imul(xr,hn),g=g+Math.imul(fr,Xr)|0,wt=Math.imul(fr,hn),xt=xt+Math.imul(Or,Jr)|0,g=g+Math.imul(Or,fn)|0,g=g+Math.imul(Yr,Jr)|0,wt=wt+Math.imul(Yr,fn)|0,xt=xt+Math.imul(Nr,Kr)|0,g=g+Math.imul(Nr,dn)|0,g=g+Math.imul(Wr,Kr)|0,wt=wt+Math.imul(Wr,dn)|0,xt=xt+Math.imul(Fr,Zr)|0,g=g+Math.imul(Fr,un)|0,g=g+Math.imul(zr,Zr)|0,wt=wt+Math.imul(zr,un)|0,xt=xt+Math.imul(Lr,rn)|0,g=g+Math.imul(Lr,pn)|0,g=g+Math.imul(Dr,rn)|0,wt=wt+Math.imul(Dr,pn)|0,xt=xt+Math.imul(qr,ln)|0,g=g+Math.imul(qr,vn)|0,g=g+Math.imul($r,ln)|0,wt=wt+Math.imul($r,vn)|0,xt=xt+Math.imul(br,an)|0,g=g+Math.imul(br,mn)|0,g=g+Math.imul(kr,an)|0,wt=wt+Math.imul(kr,mn)|0;var $n=(Ft+xt|0)+((g&8191)<<13)|0;Ft=(wt+(g>>>13)|0)+($n>>>26)|0,$n&=67108863,xt=Math.imul(xr,Jr),g=Math.imul(xr,fn),g=g+Math.imul(fr,Jr)|0,wt=Math.imul(fr,fn),xt=xt+Math.imul(Or,Kr)|0,g=g+Math.imul(Or,dn)|0,g=g+Math.imul(Yr,Kr)|0,wt=wt+Math.imul(Yr,dn)|0,xt=xt+Math.imul(Nr,Zr)|0,g=g+Math.imul(Nr,un)|0,g=g+Math.imul(Wr,Zr)|0,wt=wt+Math.imul(Wr,un)|0,xt=xt+Math.imul(Fr,rn)|0,g=g+Math.imul(Fr,pn)|0,g=g+Math.imul(zr,rn)|0,wt=wt+Math.imul(zr,pn)|0,xt=xt+Math.imul(Lr,ln)|0,g=g+Math.imul(Lr,vn)|0,g=g+Math.imul(Dr,ln)|0,wt=wt+Math.imul(Dr,vn)|0,xt=xt+Math.imul(qr,an)|0,g=g+Math.imul(qr,mn)|0,g=g+Math.imul($r,an)|0,wt=wt+Math.imul($r,mn)|0;var Dn=(Ft+xt|0)+((g&8191)<<13)|0;Ft=(wt+(g>>>13)|0)+(Dn>>>26)|0,Dn&=67108863,xt=Math.imul(xr,Kr),g=Math.imul(xr,dn),g=g+Math.imul(fr,Kr)|0,wt=Math.imul(fr,dn),xt=xt+Math.imul(Or,Zr)|0,g=g+Math.imul(Or,un)|0,g=g+Math.imul(Yr,Zr)|0,wt=wt+Math.imul(Yr,un)|0,xt=xt+Math.imul(Nr,rn)|0,g=g+Math.imul(Nr,pn)|0,g=g+Math.imul(Wr,rn)|0,wt=wt+Math.imul(Wr,pn)|0,xt=xt+Math.imul(Fr,ln)|0,g=g+Math.imul(Fr,vn)|0,g=g+Math.imul(zr,ln)|0,wt=wt+Math.imul(zr,vn)|0,xt=xt+Math.imul(Lr,an)|0,g=g+Math.imul(Lr,mn)|0,g=g+Math.imul(Dr,an)|0,wt=wt+Math.imul(Dr,mn)|0;var Ln=(Ft+xt|0)+((g&8191)<<13)|0;Ft=(wt+(g>>>13)|0)+(Ln>>>26)|0,Ln&=67108863,xt=Math.imul(xr,Zr),g=Math.imul(xr,un),g=g+Math.imul(fr,Zr)|0,wt=Math.imul(fr,un),xt=xt+Math.imul(Or,rn)|0,g=g+Math.imul(Or,pn)|0,g=g+Math.imul(Yr,rn)|0,wt=wt+Math.imul(Yr,pn)|0,xt=xt+Math.imul(Nr,ln)|0,g=g+Math.imul(Nr,vn)|0,g=g+Math.imul(Wr,ln)|0,wt=wt+Math.imul(Wr,vn)|0,xt=xt+Math.imul(Fr,an)|0,g=g+Math.imul(Fr,mn)|0,g=g+Math.imul(zr,an)|0,wt=wt+Math.imul(zr,mn)|0;var Zn=(Ft+xt|0)+((g&8191)<<13)|0;Ft=(wt+(g>>>13)|0)+(Zn>>>26)|0,Zn&=67108863,xt=Math.imul(xr,rn),g=Math.imul(xr,pn),g=g+Math.imul(fr,rn)|0,wt=Math.imul(fr,pn),xt=xt+Math.imul(Or,ln)|0,g=g+Math.imul(Or,vn)|0,g=g+Math.imul(Yr,ln)|0,wt=wt+Math.imul(Yr,vn)|0,xt=xt+Math.imul(Nr,an)|0,g=g+Math.imul(Nr,mn)|0,g=g+Math.imul(Wr,an)|0,wt=wt+Math.imul(Wr,mn)|0;var Gn=(Ft+xt|0)+((g&8191)<<13)|0;Ft=(wt+(g>>>13)|0)+(Gn>>>26)|0,Gn&=67108863,xt=Math.imul(xr,ln),g=Math.imul(xr,vn),g=g+Math.imul(fr,ln)|0,wt=Math.imul(fr,vn),xt=xt+Math.imul(Or,an)|0,g=g+Math.imul(Or,mn)|0,g=g+Math.imul(Yr,an)|0,wt=wt+Math.imul(Yr,mn)|0;var Kn=(Ft+xt|0)+((g&8191)<<13)|0;Ft=(wt+(g>>>13)|0)+(Kn>>>26)|0,Kn&=67108863,xt=Math.imul(xr,an),g=Math.imul(xr,mn),g=g+Math.imul(fr,an)|0,wt=Math.imul(fr,mn);var Qn=(Ft+xt|0)+((g&8191)<<13)|0;return Ft=(wt+(g>>>13)|0)+(Qn>>>26)|0,Qn&=67108863,kt[0]=Sn,kt[1]=Tn,kt[2]=Un,kt[3]=jn,kt[4]=Vn,kt[5]=Nn,kt[6]=zn,kt[7]=Hn,kt[8]=Xn,kt[9]=qn,kt[10]=Wn,kt[11]=On,kt[12]=$n,kt[13]=Dn,kt[14]=Ln,kt[15]=Zn,kt[16]=Gn,kt[17]=Kn,kt[18]=Qn,Ft!==0&&(kt[19]=Ft,b.length++),b};Math.imul||(Qt=Lt);function ir(Mt,h,_){_.negative=h.negative^Mt.negative,_.length=Mt.length+h.length;for(var b=0,lt=0,Rt=0;Rt<_.length-1;Rt++){var kt=lt;lt=0;for(var Ft=b&67108863,xt=Math.min(Rt,h.length-1),g=Math.max(0,Rt-Mt.length+1);g<=xt;g++){var wt=Rt-g,nr=Mt.words[wt]|0,or=h.words[g]|0,cr=nr*or,Rr=cr&67108863;kt=kt+(cr/67108864|0)|0,Rr=Rr+Ft|0,Ft=Rr&67108863,kt=kt+(Rr>>>26)|0,lt+=kt>>>26,kt&=67108863}_.words[Rt]=Ft,b=kt,kt=lt}return b!==0?_.words[Rt]=b:_.length--,_.strip()}function er(Mt,h,_){var b=new tr;return b.mulp(Mt,h,_)}c.prototype.mulTo=function(h,_){var b,lt=this.length+h.length;return this.length===10&&h.length===10?b=Qt(this,h,_):lt<63?b=Lt(this,h,_):lt<1024?b=ir(this,h,_):b=er(this,h,_),b};function tr(Mt,h){this.x=Mt,this.y=h}tr.prototype.makeRBT=function(h){for(var _=new Array(h),b=c.prototype._countBits(h)-1,lt=0;lt<h;lt++)_[lt]=this.revBin(lt,b,h);return _},tr.prototype.revBin=function(h,_,b){if(h===0||h===b-1)return h;for(var lt=0,Rt=0;Rt<_;Rt++)lt|=(h&1)<<_-Rt-1,h>>=1;return lt},tr.prototype.permute=function(h,_,b,lt,Rt,kt){for(var Ft=0;Ft<kt;Ft++)lt[Ft]=_[h[Ft]],Rt[Ft]=b[h[Ft]]},tr.prototype.transform=function(h,_,b,lt,Rt,kt){this.permute(kt,h,_,b,lt,Rt);for(var Ft=1;Ft<Rt;Ft<<=1)for(var xt=Ft<<1,g=Math.cos(2*Math.PI/xt),wt=Math.sin(2*Math.PI/xt),nr=0;nr<Rt;nr+=xt)for(var or=g,cr=wt,Rr=0;Rr<Ft;Rr++){var Ar=b[nr+Rr],pr=lt[nr+Rr],wr=b[nr+Rr+Ft],Tr=lt[nr+Rr+Ft],Ir=or*wr-cr*Tr;Tr=or*Tr+cr*wr,wr=Ir,b[nr+Rr]=Ar+wr,lt[nr+Rr]=pr+Tr,b[nr+Rr+Ft]=Ar-wr,lt[nr+Rr+Ft]=pr-Tr,Rr!==xt&&(Ir=g*or-wt*cr,cr=g*cr+wt*or,or=Ir)}},tr.prototype.guessLen13b=function(h,_){var b=Math.max(_,h)|1,lt=b&1,Rt=0;for(b=b/2|0;b;b=b>>>1)Rt++;return 1<<Rt+1+lt},tr.prototype.conjugate=function(h,_,b){if(!(b<=1))for(var lt=0;lt<b/2;lt++){var Rt=h[lt];h[lt]=h[b-lt-1],h[b-lt-1]=Rt,Rt=_[lt],_[lt]=-_[b-lt-1],_[b-lt-1]=-Rt}},tr.prototype.normalize13b=function(h,_){for(var b=0,lt=0;lt<_/2;lt++){var Rt=Math.round(h[2*lt+1]/_)*8192+Math.round(h[2*lt]/_)+b;h[lt]=Rt&67108863,Rt<67108864?b=0:b=Rt/67108864|0}return h},tr.prototype.convert13b=function(h,_,b,lt){for(var Rt=0,kt=0;kt<_;kt++)Rt=Rt+(h[kt]|0),b[2*kt]=Rt&8191,Rt=Rt>>>13,b[2*kt+1]=Rt&8191,Rt=Rt>>>13;for(kt=2*_;kt<lt;++kt)b[kt]=0;a(Rt===0),a((Rt&-8192)===0)},tr.prototype.stub=function(h){for(var _=new Array(h),b=0;b<h;b++)_[b]=0;return _},tr.prototype.mulp=function(h,_,b){var lt=2*this.guessLen13b(h.length,_.length),Rt=this.makeRBT(lt),kt=this.stub(lt),Ft=new Array(lt),xt=new Array(lt),g=new Array(lt),wt=new Array(lt),nr=new Array(lt),or=new Array(lt),cr=b.words;cr.length=lt,this.convert13b(h.words,h.length,Ft,lt),this.convert13b(_.words,_.length,wt,lt),this.transform(Ft,kt,xt,g,lt,Rt),this.transform(wt,kt,nr,or,lt,Rt);for(var Rr=0;Rr<lt;Rr++){var Ar=xt[Rr]*nr[Rr]-g[Rr]*or[Rr];g[Rr]=xt[Rr]*or[Rr]+g[Rr]*nr[Rr],xt[Rr]=Ar}return this.conjugate(xt,g,lt),this.transform(xt,g,cr,kt,lt,Rt),this.conjugate(cr,kt,lt),this.normalize13b(cr,lt),b.negative=h.negative^_.negative,b.length=h.length+_.length,b.strip()},c.prototype.mul=function(h){var _=new c(null);return _.words=new Array(this.length+h.length),this.mulTo(h,_)},c.prototype.mulf=function(h){var _=new c(null);return _.words=new Array(this.length+h.length),er(this,h,_)},c.prototype.imul=function(h){return this.clone().mulTo(h,this)},c.prototype.imuln=function(h){a(typeof h=="number"),a(h<67108864);for(var _=0,b=0;b<this.length;b++){var lt=(this.words[b]|0)*h,Rt=(lt&67108863)+(_&67108863);_>>=26,_+=lt/67108864|0,_+=Rt>>>26,this.words[b]=Rt&67108863}return _!==0&&(this.words[b]=_,this.length++),this.length=h===0?1:this.length,this},c.prototype.muln=function(h){return this.clone().imuln(h)},c.prototype.sqr=function(){return this.mul(this)},c.prototype.isqr=function(){return this.imul(this.clone())},c.prototype.pow=function(h){var _=Ot(h);if(_.length===0)return new c(1);for(var b=this,lt=0;lt<_.length&&_[lt]===0;lt++,b=b.sqr());if(++lt<_.length)for(var Rt=b.sqr();lt<_.length;lt++,Rt=Rt.sqr())_[lt]!==0&&(b=b.mul(Rt));return b},c.prototype.iushln=function(h){a(typeof h=="number"&&h>=0);var _=h%26,b=(h-_)/26,lt=67108863>>>26-_<<26-_,Rt;if(_!==0){var kt=0;for(Rt=0;Rt<this.length;Rt++){var Ft=this.words[Rt]&lt,xt=(this.words[Rt]|0)-Ft<<_;this.words[Rt]=xt|kt,kt=Ft>>>26-_}kt&&(this.words[Rt]=kt,this.length++)}if(b!==0){for(Rt=this.length-1;Rt>=0;Rt--)this.words[Rt+b]=this.words[Rt];for(Rt=0;Rt<b;Rt++)this.words[Rt]=0;this.length+=b}return this.strip()},c.prototype.ishln=function(h){return a(this.negative===0),this.iushln(h)},c.prototype.iushrn=function(h,_,b){a(typeof h=="number"&&h>=0);var lt;_?lt=(_-_%26)/26:lt=0;var Rt=h%26,kt=Math.min((h-Rt)/26,this.length),Ft=67108863^67108863>>>Rt<<Rt,xt=b;if(lt-=kt,lt=Math.max(0,lt),xt){for(var g=0;g<kt;g++)xt.words[g]=this.words[g];xt.length=kt}if(kt!==0)if(this.length>kt)for(this.length-=kt,g=0;g<this.length;g++)this.words[g]=this.words[g+kt];else this.words[0]=0,this.length=1;var wt=0;for(g=this.length-1;g>=0&&(wt!==0||g>=lt);g--){var nr=this.words[g]|0;this.words[g]=wt<<26-Rt|nr>>>Rt,wt=nr&Ft}return xt&&wt!==0&&(xt.words[xt.length++]=wt),this.length===0&&(this.words[0]=0,this.length=1),this.strip()},c.prototype.ishrn=function(h,_,b){return a(this.negative===0),this.iushrn(h,_,b)},c.prototype.shln=function(h){return this.clone().ishln(h)},c.prototype.ushln=function(h){return this.clone().iushln(h)},c.prototype.shrn=function(h){return this.clone().ishrn(h)},c.prototype.ushrn=function(h){return this.clone().iushrn(h)},c.prototype.testn=function(h){a(typeof h=="number"&&h>=0);var _=h%26,b=(h-_)/26,lt=1<<_;if(this.length<=b)return!1;var Rt=this.words[b];return!!(Rt&lt)},c.prototype.imaskn=function(h){a(typeof h=="number"&&h>=0);var _=h%26,b=(h-_)/26;if(a(this.negative===0,"imaskn works only with positive numbers"),this.length<=b)return this;if(_!==0&&b++,this.length=Math.min(b,this.length),_!==0){var lt=67108863^67108863>>>_<<_;this.words[this.length-1]&=lt}return this.strip()},c.prototype.maskn=function(h){return this.clone().imaskn(h)},c.prototype.iaddn=function(h){return a(typeof h=="number"),a(h<67108864),h<0?this.isubn(-h):this.negative!==0?this.length===1&&(this.words[0]|0)<h?(this.words[0]=h-(this.words[0]|0),this.negative=0,this):(this.negative=0,this.isubn(h),this.negative=1,this):this._iaddn(h)},c.prototype._iaddn=function(h){this.words[0]+=h;for(var _=0;_<this.length&&this.words[_]>=67108864;_++)this.words[_]-=67108864,_===this.length-1?this.words[_+1]=1:this.words[_+1]++;return this.length=Math.max(this.length,_+1),this},c.prototype.isubn=function(h){if(a(typeof h=="number"),a(h<67108864),h<0)return this.iaddn(-h);if(this.negative!==0)return this.negative=0,this.iaddn(h),this.negative=1,this;if(this.words[0]-=h,this.length===1&&this.words[0]<0)this.words[0]=-this.words[0],this.negative=1;else for(var _=0;_<this.length&&this.words[_]<0;_++)this.words[_]+=67108864,this.words[_+1]-=1;return this.strip()},c.prototype.addn=function(h){return this.clone().iaddn(h)},c.prototype.subn=function(h){return this.clone().isubn(h)},c.prototype.iabs=function(){return this.negative=0,this},c.prototype.abs=function(){return this.clone().iabs()},c.prototype._ishlnsubmul=function(h,_,b){var lt=h.length+b,Rt;this._expand(lt);var kt,Ft=0;for(Rt=0;Rt<h.length;Rt++){kt=(this.words[Rt+b]|0)+Ft;var xt=(h.words[Rt]|0)*_;kt-=xt&67108863,Ft=(kt>>26)-(xt/67108864|0),this.words[Rt+b]=kt&67108863}for(;Rt<this.length-b;Rt++)kt=(this.words[Rt+b]|0)+Ft,Ft=kt>>26,this.words[Rt+b]=kt&67108863;if(Ft===0)return this.strip();for(a(Ft===-1),Ft=0,Rt=0;Rt<this.length;Rt++)kt=-(this.words[Rt]|0)+Ft,Ft=kt>>26,this.words[Rt]=kt&67108863;return this.negative=1,this.strip()},c.prototype._wordDiv=function(h,_){var b=this.length-h.length,lt=this.clone(),Rt=h,kt=Rt.words[Rt.length-1]|0,Ft=this._countBits(kt);b=26-Ft,b!==0&&(Rt=Rt.ushln(b),lt.iushln(b),kt=Rt.words[Rt.length-1]|0);var xt=lt.length-Rt.length,g;if(_!=="mod"){g=new c(null),g.length=xt+1,g.words=new Array(g.length);for(var wt=0;wt<g.length;wt++)g.words[wt]=0}var nr=lt.clone()._ishlnsubmul(Rt,1,xt);nr.negative===0&&(lt=nr,g&&(g.words[xt]=1));for(var or=xt-1;or>=0;or--){var cr=(lt.words[Rt.length+or]|0)*67108864+(lt.words[Rt.length+or-1]|0);for(cr=Math.min(cr/kt|0,67108863),lt._ishlnsubmul(Rt,cr,or);lt.negative!==0;)cr--,lt.negative=0,lt._ishlnsubmul(Rt,1,or),lt.isZero()||(lt.negative^=1);g&&(g.words[or]=cr)}return g&&g.strip(),lt.strip(),_!=="div"&&b!==0&&lt.iushrn(b),{div:g||null,mod:lt}},c.prototype.divmod=function(h,_,b){if(a(!h.isZero()),this.isZero())return{div:new c(0),mod:new c(0)};var lt,Rt,kt;return this.negative!==0&&h.negative===0?(kt=this.neg().divmod(h,_),_!=="mod"&&(lt=kt.div.neg()),_!=="div"&&(Rt=kt.mod.neg(),b&&Rt.negative!==0&&Rt.iadd(h)),{div:lt,mod:Rt}):this.negative===0&&h.negative!==0?(kt=this.divmod(h.neg(),_),_!=="mod"&&(lt=kt.div.neg()),{div:lt,mod:kt.mod}):this.negative&h.negative?(kt=this.neg().divmod(h.neg(),_),_!=="div"&&(Rt=kt.mod.neg(),b&&Rt.negative!==0&&Rt.isub(h)),{div:kt.div,mod:Rt}):h.length>this.length||this.cmp(h)<0?{div:new c(0),mod:this}:h.length===1?_==="div"?{div:this.divn(h.words[0]),mod:null}:_==="mod"?{div:null,mod:new c(this.modn(h.words[0]))}:{div:this.divn(h.words[0]),mod:new c(this.modn(h.words[0]))}:this._wordDiv(h,_)},c.prototype.div=function(h){return this.divmod(h,"div",!1).div},c.prototype.mod=function(h){return this.divmod(h,"mod",!1).mod},c.prototype.umod=function(h){return this.divmod(h,"mod",!0).mod},c.prototype.divRound=function(h){var _=this.divmod(h);if(_.mod.isZero())return _.div;var b=_.div.negative!==0?_.mod.isub(h):_.mod,lt=h.ushrn(1),Rt=h.andln(1),kt=b.cmp(lt);return kt<0||Rt===1&&kt===0?_.div:_.div.negative!==0?_.div.isubn(1):_.div.iaddn(1)},c.prototype.modn=function(h){a(h<=67108863);for(var _=(1<<26)%h,b=0,lt=this.length-1;lt>=0;lt--)b=(_*b+(this.words[lt]|0))%h;return b},c.prototype.idivn=function(h){a(h<=67108863);for(var _=0,b=this.length-1;b>=0;b--){var lt=(this.words[b]|0)+_*67108864;this.words[b]=lt/h|0,_=lt%h}return this.strip()},c.prototype.divn=function(h){return this.clone().idivn(h)},c.prototype.egcd=function(h){a(h.negative===0),a(!h.isZero());var _=this,b=h.clone();_.negative!==0?_=_.umod(h):_=_.clone();for(var lt=new c(1),Rt=new c(0),kt=new c(0),Ft=new c(1),xt=0;_.isEven()&&b.isEven();)_.iushrn(1),b.iushrn(1),++xt;for(var g=b.clone(),wt=_.clone();!_.isZero();){for(var nr=0,or=1;!(_.words[0]&or)&&nr<26;++nr,or<<=1);if(nr>0)for(_.iushrn(nr);nr-- >0;)(lt.isOdd()||Rt.isOdd())&&(lt.iadd(g),Rt.isub(wt)),lt.iushrn(1),Rt.iushrn(1);for(var cr=0,Rr=1;!(b.words[0]&Rr)&&cr<26;++cr,Rr<<=1);if(cr>0)for(b.iushrn(cr);cr-- >0;)(kt.isOdd()||Ft.isOdd())&&(kt.iadd(g),Ft.isub(wt)),kt.iushrn(1),Ft.iushrn(1);_.cmp(b)>=0?(_.isub(b),lt.isub(kt),Rt.isub(Ft)):(b.isub(_),kt.isub(lt),Ft.isub(Rt))}return{a:kt,b:Ft,gcd:b.iushln(xt)}},c.prototype._invmp=function(h){a(h.negative===0),a(!h.isZero());var _=this,b=h.clone();_.negative!==0?_=_.umod(h):_=_.clone();for(var lt=new c(1),Rt=new c(0),kt=b.clone();_.cmpn(1)>0&&b.cmpn(1)>0;){for(var Ft=0,xt=1;!(_.words[0]&xt)&&Ft<26;++Ft,xt<<=1);if(Ft>0)for(_.iushrn(Ft);Ft-- >0;)lt.isOdd()&&lt.iadd(kt),lt.iushrn(1);for(var g=0,wt=1;!(b.words[0]&wt)&&g<26;++g,wt<<=1);if(g>0)for(b.iushrn(g);g-- >0;)Rt.isOdd()&&Rt.iadd(kt),Rt.iushrn(1);_.cmp(b)>=0?(_.isub(b),lt.isub(Rt)):(b.isub(_),Rt.isub(lt))}var nr;return _.cmpn(1)===0?nr=lt:nr=Rt,nr.cmpn(0)<0&&nr.iadd(h),nr},c.prototype.gcd=function(h){if(this.isZero())return h.abs();if(h.isZero())return this.abs();var _=this.clone(),b=h.clone();_.negative=0,b.negative=0;for(var lt=0;_.isEven()&&b.isEven();lt++)_.iushrn(1),b.iushrn(1);do{for(;_.isEven();)_.iushrn(1);for(;b.isEven();)b.iushrn(1);var Rt=_.cmp(b);if(Rt<0){var kt=_;_=b,b=kt}else if(Rt===0||b.cmpn(1)===0)break;_.isub(b)}while(!0);return b.iushln(lt)},c.prototype.invm=function(h){return this.egcd(h).a.umod(h)},c.prototype.isEven=function(){return(this.words[0]&1)===0},c.prototype.isOdd=function(){return(this.words[0]&1)===1},c.prototype.andln=function(h){return this.words[0]&h},c.prototype.bincn=function(h){a(typeof h=="number");var _=h%26,b=(h-_)/26,lt=1<<_;if(this.length<=b)return this._expand(b+1),this.words[b]|=lt,this;for(var Rt=lt,kt=b;Rt!==0&&kt<this.length;kt++){var Ft=this.words[kt]|0;Ft+=Rt,Rt=Ft>>>26,Ft&=67108863,this.words[kt]=Ft}return Rt!==0&&(this.words[kt]=Rt,this.length++),this},c.prototype.isZero=function(){return this.length===1&&this.words[0]===0},c.prototype.cmpn=function(h){var _=h<0;if(this.negative!==0&&!_)return-1;if(this.negative===0&&_)return 1;this.strip();var b;if(this.length>1)b=1;else{_&&(h=-h),a(h<=67108863,"Number is too big");var lt=this.words[0]|0;b=lt===h?0:lt<h?-1:1}return this.negative!==0?-b|0:b},c.prototype.cmp=function(h){if(this.negative!==0&&h.negative===0)return-1;if(this.negative===0&&h.negative!==0)return 1;var _=this.ucmp(h);return this.negative!==0?-_|0:_},c.prototype.ucmp=function(h){if(this.length>h.length)return 1;if(this.length<h.length)return-1;for(var _=0,b=this.length-1;b>=0;b--){var lt=this.words[b]|0,Rt=h.words[b]|0;if(lt!==Rt){lt<Rt?_=-1:lt>Rt&&(_=1);break}}return _},c.prototype.gtn=function(h){return this.cmpn(h)===1},c.prototype.gt=function(h){return this.cmp(h)===1},c.prototype.gten=function(h){return this.cmpn(h)>=0},c.prototype.gte=function(h){return this.cmp(h)>=0},c.prototype.ltn=function(h){return this.cmpn(h)===-1},c.prototype.lt=function(h){return this.cmp(h)===-1},c.prototype.lten=function(h){return this.cmpn(h)<=0},c.prototype.lte=function(h){return this.cmp(h)<=0},c.prototype.eqn=function(h){return this.cmpn(h)===0},c.prototype.eq=function(h){return this.cmp(h)===0},c.red=function(h){return new lr(h)},c.prototype.toRed=function(h){return a(!this.red,"Already a number in reduction context"),a(this.negative===0,"red works only with positives"),h.convertTo(this)._forceRed(h)},c.prototype.fromRed=function(){return a(this.red,"fromRed works only with numbers in reduction context"),this.red.convertFrom(this)},c.prototype._forceRed=function(h){return this.red=h,this},c.prototype.forceRed=function(h){return a(!this.red,"Already a number in reduction context"),this._forceRed(h)},c.prototype.redAdd=function(h){return a(this.red,"redAdd works only with red numbers"),this.red.add(this,h)},c.prototype.redIAdd=function(h){return a(this.red,"redIAdd works only with red numbers"),this.red.iadd(this,h)},c.prototype.redSub=function(h){return a(this.red,"redSub works only with red numbers"),this.red.sub(this,h)},c.prototype.redISub=function(h){return a(this.red,"redISub works only with red numbers"),this.red.isub(this,h)},c.prototype.redShl=function(h){return a(this.red,"redShl works only with red numbers"),this.red.shl(this,h)},c.prototype.redMul=function(h){return a(this.red,"redMul works only with red numbers"),this.red._verify2(this,h),this.red.mul(this,h)},c.prototype.redIMul=function(h){return a(this.red,"redMul works only with red numbers"),this.red._verify2(this,h),this.red.imul(this,h)},c.prototype.redSqr=function(){return a(this.red,"redSqr works only with red numbers"),this.red._verify1(this),this.red.sqr(this)},c.prototype.redISqr=function(){return a(this.red,"redISqr works only with red numbers"),this.red._verify1(this),this.red.isqr(this)},c.prototype.redSqrt=function(){return a(this.red,"redSqrt works only with red numbers"),this.red._verify1(this),this.red.sqrt(this)},c.prototype.redInvm=function(){return a(this.red,"redInvm works only with red numbers"),this.red._verify1(this),this.red.invm(this)},c.prototype.redNeg=function(){return a(this.red,"redNeg works only with red numbers"),this.red._verify1(this),this.red.neg(this)},c.prototype.redPow=function(h){return a(this.red&&!h.red,"redPow(normalNum)"),this.red._verify1(this),this.red.pow(this,h)};var sr={k256:null,p224:null,p192:null,p25519:null};function ar(Mt,h){this.name=Mt,this.p=new c(h,16),this.n=this.p.bitLength(),this.k=new c(1).iushln(this.n).isub(this.p),this.tmp=this._tmp()}ar.prototype._tmp=function(){var h=new c(null);return h.words=new Array(Math.ceil(this.n/13)),h},ar.prototype.ireduce=function(h){var _=h,b;do this.split(_,this.tmp),_=this.imulK(_),_=_.iadd(this.tmp),b=_.bitLength();while(b>this.n);var lt=b<this.n?-1:_.ucmp(this.p);return lt===0?(_.words[0]=0,_.length=1):lt>0?_.isub(this.p):_.strip!==void 0?_.strip():_._strip(),_},ar.prototype.split=function(h,_){h.iushrn(this.n,0,_)},ar.prototype.imulK=function(h){return h.imul(this.k)};function hr(){ar.call(this,"k256","ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff fffffffe fffffc2f")}d(hr,ar),hr.prototype.split=function(h,_){for(var b=4194303,lt=Math.min(h.length,9),Rt=0;Rt<lt;Rt++)_.words[Rt]=h.words[Rt];if(_.length=lt,h.length<=9){h.words[0]=0,h.length=1;return}var kt=h.words[9];for(_.words[_.length++]=kt&b,Rt=10;Rt<h.length;Rt++){var Ft=h.words[Rt]|0;h.words[Rt-10]=(Ft&b)<<4|kt>>>22,kt=Ft}kt>>>=22,h.words[Rt-10]=kt,kt===0&&h.length>10?h.length-=10:h.length-=9},hr.prototype.imulK=function(h){h.words[h.length]=0,h.words[h.length+1]=0,h.length+=2;for(var _=0,b=0;b<h.length;b++){var lt=h.words[b]|0;_+=lt*977,h.words[b]=_&67108863,_=lt*64+(_/67108864|0)}return h.words[h.length-1]===0&&(h.length--,h.words[h.length-1]===0&&h.length--),h};function _r(){ar.call(this,"p224","ffffffff ffffffff ffffffff ffffffff 00000000 00000000 00000001")}d(_r,ar);function dr(){ar.call(this,"p192","ffffffff ffffffff ffffffff fffffffe ffffffff ffffffff")}d(dr,ar);function ur(){ar.call(this,"25519","7fffffffffffffff ffffffffffffffff ffffffffffffffff ffffffffffffffed")}d(ur,ar),ur.prototype.imulK=function(h){for(var _=0,b=0;b<h.length;b++){var lt=(h.words[b]|0)*19+_,Rt=lt&67108863;lt>>>=26,h.words[b]=Rt,_=lt}return _!==0&&(h.words[h.length++]=_),h},c._prime=function(h){if(sr[h])return sr[h];var _;if(h==="k256")_=new hr;else if(h==="p224")_=new _r;else if(h==="p192")_=new dr;else if(h==="p25519")_=new ur;else throw new Error("Unknown prime "+h);return sr[h]=_,_};function lr(Mt){if(typeof Mt=="string"){var h=c._prime(Mt);this.m=h.p,this.prime=h}else a(Mt.gtn(1),"modulus must be greater than 1"),this.m=Mt,this.prime=null}lr.prototype._verify1=function(h){a(h.negative===0,"red works only with positives"),a(h.red,"red works only with red numbers")},lr.prototype._verify2=function(h,_){a((h.negative|_.negative)===0,"red works only with positives"),a(h.red&&h.red===_.red,"red works only with red numbers")},lr.prototype.imod=function(h){return this.prime?this.prime.ireduce(h)._forceRed(this):h.umod(this.m)._forceRed(this)},lr.prototype.neg=function(h){return h.isZero()?h.clone():this.m.sub(h)._forceRed(this)},lr.prototype.add=function(h,_){this._verify2(h,_);var b=h.add(_);return b.cmp(this.m)>=0&&b.isub(this.m),b._forceRed(this)},lr.prototype.iadd=function(h,_){this._verify2(h,_);var b=h.iadd(_);return b.cmp(this.m)>=0&&b.isub(this.m),b},lr.prototype.sub=function(h,_){this._verify2(h,_);var b=h.sub(_);return b.cmpn(0)<0&&b.iadd(this.m),b._forceRed(this)},lr.prototype.isub=function(h,_){this._verify2(h,_);var b=h.isub(_);return b.cmpn(0)<0&&b.iadd(this.m),b},lr.prototype.shl=function(h,_){return this._verify1(h),this.imod(h.ushln(_))},lr.prototype.imul=function(h,_){return this._verify2(h,_),this.imod(h.imul(_))},lr.prototype.mul=function(h,_){return this._verify2(h,_),this.imod(h.mul(_))},lr.prototype.isqr=function(h){return this.imul(h,h.clone())},lr.prototype.sqr=function(h){return this.mul(h,h)},lr.prototype.sqrt=function(h){if(h.isZero())return h.clone();var _=this.m.andln(3);if(a(_%2===1),_===3){var b=this.m.add(new c(1)).iushrn(2);return this.pow(h,b)}for(var lt=this.m.subn(1),Rt=0;!lt.isZero()&&lt.andln(1)===0;)Rt++,lt.iushrn(1);a(!lt.isZero());var kt=new c(1).toRed(this),Ft=kt.redNeg(),xt=this.m.subn(1).iushrn(1),g=this.m.bitLength();for(g=new c(2*g*g).toRed(this);this.pow(g,xt).cmp(Ft)!==0;)g.redIAdd(Ft);for(var wt=this.pow(g,lt),nr=this.pow(h,lt.addn(1).iushrn(1)),or=this.pow(h,lt),cr=Rt;or.cmp(kt)!==0;){for(var Rr=or,Ar=0;Rr.cmp(kt)!==0;Ar++)Rr=Rr.redSqr();a(Ar<cr);var pr=this.pow(wt,new c(1).iushln(cr-Ar-1));nr=nr.redMul(pr),wt=pr.redSqr(),or=or.redMul(wt),cr=Ar}return nr},lr.prototype.invm=function(h){var _=h._invmp(this.m);return _.negative!==0?(_.negative=0,this.imod(_).redNeg()):this.imod(_)},lr.prototype.pow=function(h,_){if(_.isZero())return new c(1).toRed(this);if(_.cmpn(1)===0)return h.clone();var b=4,lt=new Array(1<<b);lt[0]=new c(1).toRed(this),lt[1]=h;for(var Rt=2;Rt<lt.length;Rt++)lt[Rt]=this.mul(lt[Rt-1],h);var kt=lt[0],Ft=0,xt=0,g=_.bitLength()%26;for(g===0&&(g=26),Rt=_.length-1;Rt>=0;Rt--){for(var wt=_.words[Rt],nr=g-1;nr>=0;nr--){var or=wt>>nr&1;if(kt!==lt[0]&&(kt=this.sqr(kt)),or===0&&Ft===0){xt=0;continue}Ft<<=1,Ft|=or,xt++,!(xt!==b&&(Rt!==0||nr!==0))&&(kt=this.mul(kt,lt[Ft]),xt=0,Ft=0)}g=26}return kt},lr.prototype.convertTo=function(h){var _=h.umod(this.m);return _===h?_.clone():_},lr.prototype.convertFrom=function(h){var _=h.clone();return _.red=null,_},c.mont=function(h){return new gr(h)};function gr(Mt){lr.call(this,Mt),this.shift=this.m.bitLength(),this.shift%26!==0&&(this.shift+=26-this.shift%26),this.r=new c(1).iushln(this.shift),this.r2=this.imod(this.r.sqr()),this.rinv=this.r._invmp(this.m),this.minv=this.rinv.mul(this.r).isubn(1).div(this.m),this.minv=this.minv.umod(this.r),this.minv=this.r.sub(this.minv)}d(gr,lr),gr.prototype.convertTo=function(h){return this.imod(h.ushln(this.shift))},gr.prototype.convertFrom=function(h){var _=this.imod(h.mul(this.rinv));return _.red=null,_},gr.prototype.imul=function(h,_){if(h.isZero()||_.isZero())return h.words[0]=0,h.length=1,h;var b=h.imul(_),lt=b.maskn(this.shift).mul(this.minv).imaskn(this.shift).mul(this.m),Rt=b.isub(lt).iushrn(this.shift),kt=Rt;return Rt.cmp(this.m)>=0?kt=Rt.isub(this.m):Rt.cmpn(0)<0&&(kt=Rt.iadd(this.m)),kt._forceRed(this)},gr.prototype.mul=function(h,_){if(h.isZero()||_.isZero())return new c(0)._forceRed(this);var b=h.mul(_),lt=b.maskn(this.shift).mul(this.minv).imaskn(this.shift).mul(this.m),Rt=b.isub(lt).iushrn(this.shift),kt=Rt;return Rt.cmp(this.m)>=0?kt=Rt.isub(this.m):Rt.cmpn(0)<0&&(kt=Rt.iadd(this.m)),kt._forceRed(this)},gr.prototype.invm=function(h){var _=this.imod(h._invmp(this.m).mul(this.r2));return _._forceRed(this)}})(s,commonjsGlobal$2)}(bn$2)),bn$2.exports}var api={},vmBrowserify={},hasRequiredVmBrowserify;function requireVmBrowserify(){return hasRequiredVmBrowserify||(hasRequiredVmBrowserify=1,function(exports){var indexOf=function(s,e){if(s.indexOf)return s.indexOf(e);for(var o=0;o<s.length;o++)if(s[o]===e)return o;return-1},Object_keys=function(s){if(Object.keys)return Object.keys(s);var e=[];for(var o in s)e.push(o);return e},forEach=function(s,e){if(s.forEach)return s.forEach(e);for(var o=0;o<s.length;o++)e(s[o],o,s)},defineProp=function(){try{return Object.defineProperty({},"_",{}),function(s,e,o){Object.defineProperty(s,e,{writable:!0,enumerable:!1,configurable:!0,value:o})}}catch{return function(e,o,a){e[o]=a}}}(),globals=["Array","Boolean","Date","Error","EvalError","Function","Infinity","JSON","Math","NaN","Number","Object","RangeError","ReferenceError","RegExp","String","SyntaxError","TypeError","URIError","decodeURI","decodeURIComponent","encodeURI","encodeURIComponent","escape","eval","isFinite","isNaN","parseFloat","parseInt","undefined","unescape"];function Context(){}Context.prototype={};var Script=exports.Script=function(e){if(!(this instanceof Script))return new Script(e);this.code=e};Script.prototype.runInContext=function(s){if(!(s instanceof Context))throw new TypeError("needs a 'context' argument.");var e=document.createElement("iframe");e.style||(e.style={}),e.style.display="none",document.body.appendChild(e);var o=e.contentWindow,a=o.eval,d=o.execScript;!a&&d&&(d.call(o,"null"),a=o.eval),forEach(Object_keys(s),function(_e){o[_e]=s[_e]}),forEach(globals,function(_e){s[_e]&&(o[_e]=s[_e])});var c=Object_keys(o),j=a.call(o,this.code);return forEach(Object_keys(o),function(_e){(_e in s||indexOf(c,_e)===-1)&&(s[_e]=o[_e])}),forEach(globals,function(_e){_e in s||defineProp(s,_e,o[_e])}),document.body.removeChild(e),j},Script.prototype.runInThisContext=function(){return eval(this.code)},Script.prototype.runInNewContext=function(s){var e=Script.createContext(s),o=this.runInContext(e);return s&&forEach(Object_keys(e),function(a){s[a]=e[a]}),o},forEach(Object_keys(Script.prototype),function(s){exports[s]=Script[s]=function(e){var o=Script(e);return o[s].apply(o,[].slice.call(arguments,1))}}),exports.isContext=function(s){return s instanceof Context},exports.createScript=function(s){return exports.Script(s)},exports.createContext=Script.createContext=function(s){var e=new Context;return typeof s=="object"&&forEach(Object_keys(s),function(o){e[o]=s[o]}),e}}(vmBrowserify)),vmBrowserify}var hasRequiredApi;function requireApi(){return hasRequiredApi||(hasRequiredApi=1,function(s){var e=requireAsn1$1(),o=requireInherits_browser(),a=s;a.define=function(j,_e){return new d(j,_e)};function d(c,j){this.name=c,this.body=j,this.decoders={},this.encoders={}}d.prototype._createNamed=function(j){var _e;try{_e=requireVmBrowserify().runInThisContext("(function "+this.name+`(entity) {
  this._initNamed(entity);
})`)}catch{_e=function(yt){this._initNamed(yt)}}return o(_e,j),_e.prototype._initNamed=function(yt){j.call(this,yt)},new _e(this)},d.prototype._getDecoder=function(j){return j=j||"der",this.decoders.hasOwnProperty(j)||(this.decoders[j]=this._createNamed(e.decoders[j])),this.decoders[j]},d.prototype.decode=function(j,_e,pt){return this._getDecoder(_e).decode(j,pt)},d.prototype._getEncoder=function(j){return j=j||"der",this.encoders.hasOwnProperty(j)||(this.encoders[j]=this._createNamed(e.encoders[j])),this.encoders[j]},d.prototype.encode=function(j,_e,pt){return this._getEncoder(_e).encode(j,pt)}}(api)),api}var base={},reporter={},hasRequiredReporter;function requireReporter(){if(hasRequiredReporter)return reporter;hasRequiredReporter=1;var s=requireInherits_browser();function e(a){this._reporterState={obj:null,path:[],options:a||{},errors:[]}}reporter.Reporter=e,e.prototype.isError=function(d){return d instanceof o},e.prototype.save=function(){var d=this._reporterState;return{obj:d.obj,pathLen:d.path.length}},e.prototype.restore=function(d){var c=this._reporterState;c.obj=d.obj,c.path=c.path.slice(0,d.pathLen)},e.prototype.enterKey=function(d){return this._reporterState.path.push(d)},e.prototype.exitKey=function(d){var c=this._reporterState;c.path=c.path.slice(0,d-1)},e.prototype.leaveKey=function(d,c,j){var _e=this._reporterState;this.exitKey(d),_e.obj!==null&&(_e.obj[c]=j)},e.prototype.path=function(){return this._reporterState.path.join("/")},e.prototype.enterObject=function(){var d=this._reporterState,c=d.obj;return d.obj={},c},e.prototype.leaveObject=function(d){var c=this._reporterState,j=c.obj;return c.obj=d,j},e.prototype.error=function(d){var c,j=this._reporterState,_e=d instanceof o;if(_e?c=d:c=new o(j.path.map(function(pt){return"["+JSON.stringify(pt)+"]"}).join(""),d.message||d,d.stack),!j.options.partial)throw c;return _e||j.errors.push(c),c},e.prototype.wrapResult=function(d){var c=this._reporterState;return c.options.partial?{result:this.isError(d)?null:d,errors:c.errors}:d};function o(a,d){this.path=a,this.rethrow(d)}return s(o,Error),o.prototype.rethrow=function(d){if(this.message=d+" at: "+(this.path||"(shallow)"),Error.captureStackTrace&&Error.captureStackTrace(this,o),!this.stack)try{throw new Error(this.message)}catch(c){this.stack=c.stack}return this},reporter}var buffer={},hasRequiredBuffer;function requireBuffer(){if(hasRequiredBuffer)return buffer;hasRequiredBuffer=1;var s=requireInherits_browser(),e=requireBase().Reporter,o=require$$0$1.Buffer;function a(c,j){if(e.call(this,j),!o.isBuffer(c)){this.error("Input not Buffer");return}this.base=c,this.offset=0,this.length=c.length}s(a,e),buffer.DecoderBuffer=a,a.prototype.save=function(){return{offset:this.offset,reporter:e.prototype.save.call(this)}},a.prototype.restore=function(j){var _e=new a(this.base);return _e.offset=j.offset,_e.length=this.offset,this.offset=j.offset,e.prototype.restore.call(this,j.reporter),_e},a.prototype.isEmpty=function(){return this.offset===this.length},a.prototype.readUInt8=function(j){return this.offset+1<=this.length?this.base.readUInt8(this.offset++,!0):this.error(j||"DecoderBuffer overrun")},a.prototype.skip=function(j,_e){if(!(this.offset+j<=this.length))return this.error(_e||"DecoderBuffer overrun");var pt=new a(this.base);return pt._reporterState=this._reporterState,pt.offset=this.offset,pt.length=this.offset+j,this.offset+=j,pt},a.prototype.raw=function(j){return this.base.slice(j?j.offset:this.offset,this.length)};function d(c,j){if(Array.isArray(c))this.length=0,this.value=c.map(function(_e){return _e instanceof d||(_e=new d(_e,j)),this.length+=_e.length,_e},this);else if(typeof c=="number"){if(!(0<=c&&c<=255))return j.error("non-byte EncoderBuffer value");this.value=c,this.length=1}else if(typeof c=="string")this.value=c,this.length=o.byteLength(c);else if(o.isBuffer(c))this.value=c,this.length=c.length;else return j.error("Unsupported type: "+typeof c)}return buffer.EncoderBuffer=d,d.prototype.join=function(j,_e){return j||(j=new o(this.length)),_e||(_e=0),this.length===0||(Array.isArray(this.value)?this.value.forEach(function(pt){pt.join(j,_e),_e+=pt.length}):(typeof this.value=="number"?j[_e]=this.value:typeof this.value=="string"?j.write(this.value,_e):o.isBuffer(this.value)&&this.value.copy(j,_e),_e+=this.length)),j},buffer}var node,hasRequiredNode;function requireNode(){if(hasRequiredNode)return node;hasRequiredNode=1;var s=requireBase().Reporter,e=requireBase().EncoderBuffer,o=requireBase().DecoderBuffer,a=requireMinimalisticAssert(),d=["seq","seqof","set","setof","objid","bool","gentime","utctime","null_","enum","int","objDesc","bitstr","bmpstr","charstr","genstr","graphstr","ia5str","iso646str","numstr","octstr","printstr","t61str","unistr","utf8str","videostr"],c=["key","obj","use","optional","explicit","implicit","def","choice","any","contains"].concat(d),j=["_peekTag","_decodeTag","_use","_decodeStr","_decodeObjid","_decodeTime","_decodeNull","_decodeInt","_decodeBool","_decodeList","_encodeComposite","_encodeStr","_encodeObjid","_encodeTime","_encodeNull","_encodeInt","_encodeBool"];function _e(yt,ct){var Ct={};this._baseState=Ct,Ct.enc=yt,Ct.parent=ct||null,Ct.children=null,Ct.tag=null,Ct.args=null,Ct.reverseArgs=null,Ct.choice=null,Ct.optional=!1,Ct.any=!1,Ct.obj=!1,Ct.use=null,Ct.useDecoder=null,Ct.key=null,Ct.default=null,Ct.explicit=null,Ct.implicit=null,Ct.contains=null,Ct.parent||(Ct.children=[],this._wrap())}node=_e;var pt=["enc","parent","children","tag","args","reverseArgs","choice","optional","any","obj","use","alteredUse","key","default","explicit","implicit","contains"];return _e.prototype.clone=function(){var ct=this._baseState,Ct={};pt.forEach(function(Ot){Ct[Ot]=ct[Ot]});var qt=new this.constructor(Ct.parent);return qt._baseState=Ct,qt},_e.prototype._wrap=function(){var ct=this._baseState;c.forEach(function(Ct){this[Ct]=function(){var Ot=new this.constructor(this);return ct.children.push(Ot),Ot[Ct].apply(Ot,arguments)}},this)},_e.prototype._init=function(ct){var Ct=this._baseState;a(Ct.parent===null),ct.call(this),Ct.children=Ct.children.filter(function(qt){return qt._baseState.parent===this},this),a.equal(Ct.children.length,1,"Root node can have only one child")},_e.prototype._useArgs=function(ct){var Ct=this._baseState,qt=ct.filter(function(Ot){return Ot instanceof this.constructor},this);ct=ct.filter(function(Ot){return!(Ot instanceof this.constructor)},this),qt.length!==0&&(a(Ct.children===null),Ct.children=qt,qt.forEach(function(Ot){Ot._baseState.parent=this},this)),ct.length!==0&&(a(Ct.args===null),Ct.args=ct,Ct.reverseArgs=ct.map(function(Ot){if(typeof Ot!="object"||Ot.constructor!==Object)return Ot;var Lt={};return Object.keys(Ot).forEach(function(Qt){Qt==(Qt|0)&&(Qt|=0);var ir=Ot[Qt];Lt[ir]=Qt}),Lt}))},j.forEach(function(yt){_e.prototype[yt]=function(){var Ct=this._baseState;throw new Error(yt+" not implemented for encoding: "+Ct.enc)}}),d.forEach(function(yt){_e.prototype[yt]=function(){var Ct=this._baseState,qt=Array.prototype.slice.call(arguments);return a(Ct.tag===null),Ct.tag=yt,this._useArgs(qt),this}}),_e.prototype.use=function(ct){a(ct);var Ct=this._baseState;return a(Ct.use===null),Ct.use=ct,this},_e.prototype.optional=function(){var ct=this._baseState;return ct.optional=!0,this},_e.prototype.def=function(ct){var Ct=this._baseState;return a(Ct.default===null),Ct.default=ct,Ct.optional=!0,this},_e.prototype.explicit=function(ct){var Ct=this._baseState;return a(Ct.explicit===null&&Ct.implicit===null),Ct.explicit=ct,this},_e.prototype.implicit=function(ct){var Ct=this._baseState;return a(Ct.explicit===null&&Ct.implicit===null),Ct.implicit=ct,this},_e.prototype.obj=function(){var ct=this._baseState,Ct=Array.prototype.slice.call(arguments);return ct.obj=!0,Ct.length!==0&&this._useArgs(Ct),this},_e.prototype.key=function(ct){var Ct=this._baseState;return a(Ct.key===null),Ct.key=ct,this},_e.prototype.any=function(){var ct=this._baseState;return ct.any=!0,this},_e.prototype.choice=function(ct){var Ct=this._baseState;return a(Ct.choice===null),Ct.choice=ct,this._useArgs(Object.keys(ct).map(function(qt){return ct[qt]})),this},_e.prototype.contains=function(ct){var Ct=this._baseState;return a(Ct.use===null),Ct.contains=ct,this},_e.prototype._decode=function(ct,Ct){var qt=this._baseState;if(qt.parent===null)return ct.wrapResult(qt.children[0]._decode(ct,Ct));var Ot=qt.default,Lt=!0,Qt=null;if(qt.key!==null&&(Qt=ct.enterKey(qt.key)),qt.optional){var ir=null;if(qt.explicit!==null?ir=qt.explicit:qt.implicit!==null?ir=qt.implicit:qt.tag!==null&&(ir=qt.tag),ir===null&&!qt.any){var er=ct.save();try{qt.choice===null?this._decodeGeneric(qt.tag,ct,Ct):this._decodeChoice(ct,Ct),Lt=!0}catch{Lt=!1}ct.restore(er)}else if(Lt=this._peekTag(ct,ir,qt.any),ct.isError(Lt))return Lt}var tr;if(qt.obj&&Lt&&(tr=ct.enterObject()),Lt){if(qt.explicit!==null){var sr=this._decodeTag(ct,qt.explicit);if(ct.isError(sr))return sr;ct=sr}var ar=ct.offset;if(qt.use===null&&qt.choice===null){if(qt.any)var er=ct.save();var hr=this._decodeTag(ct,qt.implicit!==null?qt.implicit:qt.tag,qt.any);if(ct.isError(hr))return hr;qt.any?Ot=ct.raw(er):ct=hr}if(Ct&&Ct.track&&qt.tag!==null&&Ct.track(ct.path(),ar,ct.length,"tagged"),Ct&&Ct.track&&qt.tag!==null&&Ct.track(ct.path(),ct.offset,ct.length,"content"),qt.any?Ot=Ot:qt.choice===null?Ot=this._decodeGeneric(qt.tag,ct,Ct):Ot=this._decodeChoice(ct,Ct),ct.isError(Ot))return Ot;if(!qt.any&&qt.choice===null&&qt.children!==null&&qt.children.forEach(function(ur){ur._decode(ct,Ct)}),qt.contains&&(qt.tag==="octstr"||qt.tag==="bitstr")){var _r=new o(Ot);Ot=this._getUse(qt.contains,ct._reporterState.obj)._decode(_r,Ct)}}return qt.obj&&Lt&&(Ot=ct.leaveObject(tr)),qt.key!==null&&(Ot!==null||Lt===!0)?ct.leaveKey(Qt,qt.key,Ot):Qt!==null&&ct.exitKey(Qt),Ot},_e.prototype._decodeGeneric=function(ct,Ct,qt){var Ot=this._baseState;return ct==="seq"||ct==="set"?null:ct==="seqof"||ct==="setof"?this._decodeList(Ct,ct,Ot.args[0],qt):/str$/.test(ct)?this._decodeStr(Ct,ct,qt):ct==="objid"&&Ot.args?this._decodeObjid(Ct,Ot.args[0],Ot.args[1],qt):ct==="objid"?this._decodeObjid(Ct,null,null,qt):ct==="gentime"||ct==="utctime"?this._decodeTime(Ct,ct,qt):ct==="null_"?this._decodeNull(Ct,qt):ct==="bool"?this._decodeBool(Ct,qt):ct==="objDesc"?this._decodeStr(Ct,ct,qt):ct==="int"||ct==="enum"?this._decodeInt(Ct,Ot.args&&Ot.args[0],qt):Ot.use!==null?this._getUse(Ot.use,Ct._reporterState.obj)._decode(Ct,qt):Ct.error("unknown tag: "+ct)},_e.prototype._getUse=function(ct,Ct){var qt=this._baseState;return qt.useDecoder=this._use(ct,Ct),a(qt.useDecoder._baseState.parent===null),qt.useDecoder=qt.useDecoder._baseState.children[0],qt.implicit!==qt.useDecoder._baseState.implicit&&(qt.useDecoder=qt.useDecoder.clone(),qt.useDecoder._baseState.implicit=qt.implicit),qt.useDecoder},_e.prototype._decodeChoice=function(ct,Ct){var qt=this._baseState,Ot=null,Lt=!1;return Object.keys(qt.choice).some(function(Qt){var ir=ct.save(),er=qt.choice[Qt];try{var tr=er._decode(ct,Ct);if(ct.isError(tr))return!1;Ot={type:Qt,value:tr},Lt=!0}catch{return ct.restore(ir),!1}return!0},this),Lt?Ot:ct.error("Choice not matched")},_e.prototype._createEncoderBuffer=function(ct){return new e(ct,this.reporter)},_e.prototype._encode=function(ct,Ct,qt){var Ot=this._baseState;if(!(Ot.default!==null&&Ot.default===ct)){var Lt=this._encodeValue(ct,Ct,qt);if(Lt!==void 0&&!this._skipDefault(Lt,Ct,qt))return Lt}},_e.prototype._encodeValue=function(ct,Ct,qt){var Ot=this._baseState;if(Ot.parent===null)return Ot.children[0]._encode(ct,Ct||new s);var er=null;if(this.reporter=Ct,Ot.optional&&ct===void 0)if(Ot.default!==null)ct=Ot.default;else return;var Lt=null,Qt=!1;if(Ot.any)er=this._createEncoderBuffer(ct);else if(Ot.choice)er=this._encodeChoice(ct,Ct);else if(Ot.contains)Lt=this._getUse(Ot.contains,qt)._encode(ct,Ct),Qt=!0;else if(Ot.children)Lt=Ot.children.map(function(ar){if(ar._baseState.tag==="null_")return ar._encode(null,Ct,ct);if(ar._baseState.key===null)return Ct.error("Child should have a key");var hr=Ct.enterKey(ar._baseState.key);if(typeof ct!="object")return Ct.error("Child expected, but input is not object");var _r=ar._encode(ct[ar._baseState.key],Ct,ct);return Ct.leaveKey(hr),_r},this).filter(function(ar){return ar}),Lt=this._createEncoderBuffer(Lt);else if(Ot.tag==="seqof"||Ot.tag==="setof"){if(!(Ot.args&&Ot.args.length===1))return Ct.error("Too many args for : "+Ot.tag);if(!Array.isArray(ct))return Ct.error("seqof/setof, but data is not Array");var ir=this.clone();ir._baseState.implicit=null,Lt=this._createEncoderBuffer(ct.map(function(ar){var hr=this._baseState;return this._getUse(hr.args[0],ct)._encode(ar,Ct)},ir))}else Ot.use!==null?er=this._getUse(Ot.use,qt)._encode(ct,Ct):(Lt=this._encodePrimitive(Ot.tag,ct),Qt=!0);var er;if(!Ot.any&&Ot.choice===null){var tr=Ot.implicit!==null?Ot.implicit:Ot.tag,sr=Ot.implicit===null?"universal":"context";tr===null?Ot.use===null&&Ct.error("Tag could be omitted only for .use()"):Ot.use===null&&(er=this._encodeComposite(tr,Qt,sr,Lt))}return Ot.explicit!==null&&(er=this._encodeComposite(Ot.explicit,!1,"context",er)),er},_e.prototype._encodeChoice=function(ct,Ct){var qt=this._baseState,Ot=qt.choice[ct.type];return Ot||a(!1,ct.type+" not found in "+JSON.stringify(Object.keys(qt.choice))),Ot._encode(ct.value,Ct)},_e.prototype._encodePrimitive=function(ct,Ct){var qt=this._baseState;if(/str$/.test(ct))return this._encodeStr(Ct,ct);if(ct==="objid"&&qt.args)return this._encodeObjid(Ct,qt.reverseArgs[0],qt.args[1]);if(ct==="objid")return this._encodeObjid(Ct,null,null);if(ct==="gentime"||ct==="utctime")return this._encodeTime(Ct,ct);if(ct==="null_")return this._encodeNull();if(ct==="int"||ct==="enum")return this._encodeInt(Ct,qt.args&&qt.reverseArgs[0]);if(ct==="bool")return this._encodeBool(Ct);if(ct==="objDesc")return this._encodeStr(Ct,ct);throw new Error("Unsupported tag: "+ct)},_e.prototype._isNumstr=function(ct){return/^[0-9 ]*$/.test(ct)},_e.prototype._isPrintstr=function(ct){return/^[A-Za-z0-9 '\(\)\+,\-\.\/:=\?]*$/.test(ct)},node}var hasRequiredBase;function requireBase(){return hasRequiredBase||(hasRequiredBase=1,function(s){var e=s;e.Reporter=requireReporter().Reporter,e.DecoderBuffer=requireBuffer().DecoderBuffer,e.EncoderBuffer=requireBuffer().EncoderBuffer,e.Node=requireNode()}(base)),base}var constants={},der={},hasRequiredDer$2;function requireDer$2(){return hasRequiredDer$2||(hasRequiredDer$2=1,function(s){var e=requireConstants();s.tagClass={0:"universal",1:"application",2:"context",3:"private"},s.tagClassByName=e._reverse(s.tagClass),s.tag={0:"end",1:"bool",2:"int",3:"bitstr",4:"octstr",5:"null_",6:"objid",7:"objDesc",8:"external",9:"real",10:"enum",11:"embed",12:"utf8str",13:"relativeOid",16:"seq",17:"set",18:"numstr",19:"printstr",20:"t61str",21:"videostr",22:"ia5str",23:"utctime",24:"gentime",25:"graphstr",26:"iso646str",27:"genstr",28:"unistr",29:"charstr",30:"bmpstr"},s.tagByName=e._reverse(s.tag)}(der)),der}var hasRequiredConstants;function requireConstants(){return hasRequiredConstants||(hasRequiredConstants=1,function(s){var e=s;e._reverse=function(a){var d={};return Object.keys(a).forEach(function(c){(c|0)==c&&(c=c|0);var j=a[c];d[j]=c}),d},e.der=requireDer$2()}(constants)),constants}var decoders={},der_1$1,hasRequiredDer$1;function requireDer$1(){if(hasRequiredDer$1)return der_1$1;hasRequiredDer$1=1;var s=requireInherits_browser(),e=requireAsn1$1(),o=e.base,a=e.bignum,d=e.constants.der;function c(yt){this.enc="der",this.name=yt.name,this.entity=yt,this.tree=new j,this.tree._init(yt.body)}der_1$1=c,c.prototype.decode=function(ct,Ct){return ct instanceof o.DecoderBuffer||(ct=new o.DecoderBuffer(ct,Ct)),this.tree._decode(ct,Ct)};function j(yt){o.Node.call(this,"der",yt)}s(j,o.Node),j.prototype._peekTag=function(ct,Ct,qt){if(ct.isEmpty())return!1;var Ot=ct.save(),Lt=_e(ct,'Failed to peek tag: "'+Ct+'"');return ct.isError(Lt)?Lt:(ct.restore(Ot),Lt.tag===Ct||Lt.tagStr===Ct||Lt.tagStr+"of"===Ct||qt)},j.prototype._decodeTag=function(ct,Ct,qt){var Ot=_e(ct,'Failed to decode tag of "'+Ct+'"');if(ct.isError(Ot))return Ot;var Lt=pt(ct,Ot.primitive,'Failed to get length of "'+Ct+'"');if(ct.isError(Lt))return Lt;if(!qt&&Ot.tag!==Ct&&Ot.tagStr!==Ct&&Ot.tagStr+"of"!==Ct)return ct.error('Failed to match tag: "'+Ct+'"');if(Ot.primitive||Lt!==null)return ct.skip(Lt,'Failed to match body of: "'+Ct+'"');var Qt=ct.save(),ir=this._skipUntilEnd(ct,'Failed to skip indefinite length body: "'+this.tag+'"');return ct.isError(ir)?ir:(Lt=ct.offset-Qt.offset,ct.restore(Qt),ct.skip(Lt,'Failed to match body of: "'+Ct+'"'))},j.prototype._skipUntilEnd=function(ct,Ct){for(;;){var qt=_e(ct,Ct);if(ct.isError(qt))return qt;var Ot=pt(ct,qt.primitive,Ct);if(ct.isError(Ot))return Ot;var Lt;if(qt.primitive||Ot!==null?Lt=ct.skip(Ot):Lt=this._skipUntilEnd(ct,Ct),ct.isError(Lt))return Lt;if(qt.tagStr==="end")break}},j.prototype._decodeList=function(ct,Ct,qt,Ot){for(var Lt=[];!ct.isEmpty();){var Qt=this._peekTag(ct,"end");if(ct.isError(Qt))return Qt;var ir=qt.decode(ct,"der",Ot);if(ct.isError(ir)&&Qt)break;Lt.push(ir)}return Lt},j.prototype._decodeStr=function(ct,Ct){if(Ct==="bitstr"){var qt=ct.readUInt8();return ct.isError(qt)?qt:{unused:qt,data:ct.raw()}}else if(Ct==="bmpstr"){var Ot=ct.raw();if(Ot.length%2===1)return ct.error("Decoding of string type: bmpstr length mismatch");for(var Lt="",Qt=0;Qt<Ot.length/2;Qt++)Lt+=String.fromCharCode(Ot.readUInt16BE(Qt*2));return Lt}else if(Ct==="numstr"){var ir=ct.raw().toString("ascii");return this._isNumstr(ir)?ir:ct.error("Decoding of string type: numstr unsupported characters")}else{if(Ct==="octstr")return ct.raw();if(Ct==="objDesc")return ct.raw();if(Ct==="printstr"){var er=ct.raw().toString("ascii");return this._isPrintstr(er)?er:ct.error("Decoding of string type: printstr unsupported characters")}else return/str$/.test(Ct)?ct.raw().toString():ct.error("Decoding of string type: "+Ct+" unsupported")}},j.prototype._decodeObjid=function(ct,Ct,qt){for(var Ot,Lt=[],Qt=0;!ct.isEmpty();){var ir=ct.readUInt8();Qt<<=7,Qt|=ir&127,ir&128||(Lt.push(Qt),Qt=0)}ir&128&&Lt.push(Qt);var er=Lt[0]/40|0,tr=Lt[0]%40;if(qt?Ot=Lt:Ot=[er,tr].concat(Lt.slice(1)),Ct){var sr=Ct[Ot.join(" ")];sr===void 0&&(sr=Ct[Ot.join(".")]),sr!==void 0&&(Ot=sr)}return Ot},j.prototype._decodeTime=function(ct,Ct){var qt=ct.raw().toString();if(Ct==="gentime")var Ot=qt.slice(0,4)|0,Lt=qt.slice(4,6)|0,Qt=qt.slice(6,8)|0,ir=qt.slice(8,10)|0,er=qt.slice(10,12)|0,tr=qt.slice(12,14)|0;else if(Ct==="utctime"){var Ot=qt.slice(0,2)|0,Lt=qt.slice(2,4)|0,Qt=qt.slice(4,6)|0,ir=qt.slice(6,8)|0,er=qt.slice(8,10)|0,tr=qt.slice(10,12)|0;Ot<70?Ot=2e3+Ot:Ot=1900+Ot}else return ct.error("Decoding "+Ct+" time is not supported yet");return Date.UTC(Ot,Lt-1,Qt,ir,er,tr,0)},j.prototype._decodeNull=function(ct){return null},j.prototype._decodeBool=function(ct){var Ct=ct.readUInt8();return ct.isError(Ct)?Ct:Ct!==0},j.prototype._decodeInt=function(ct,Ct){var qt=ct.raw(),Ot=new a(qt);return Ct&&(Ot=Ct[Ot.toString(10)]||Ot),Ot},j.prototype._use=function(ct,Ct){return typeof ct=="function"&&(ct=ct(Ct)),ct._getDecoder("der").tree};function _e(yt,ct){var Ct=yt.readUInt8(ct);if(yt.isError(Ct))return Ct;var qt=d.tagClass[Ct>>6],Ot=(Ct&32)===0;if((Ct&31)===31){var Lt=Ct;for(Ct=0;(Lt&128)===128;){if(Lt=yt.readUInt8(ct),yt.isError(Lt))return Lt;Ct<<=7,Ct|=Lt&127}}else Ct&=31;var Qt=d.tag[Ct];return{cls:qt,primitive:Ot,tag:Ct,tagStr:Qt}}function pt(yt,ct,Ct){var qt=yt.readUInt8(Ct);if(yt.isError(qt))return qt;if(!ct&&qt===128)return null;if(!(qt&128))return qt;var Ot=qt&127;if(Ot>4)return yt.error("length octect is too long");qt=0;for(var Lt=0;Lt<Ot;Lt++){qt<<=8;var Qt=yt.readUInt8(Ct);if(yt.isError(Qt))return Qt;qt|=Qt}return qt}return der_1$1}var pem$1,hasRequiredPem$1;function requirePem$1(){if(hasRequiredPem$1)return pem$1;hasRequiredPem$1=1;var s=requireInherits_browser(),e=require$$0$1.Buffer,o=requireDer$1();function a(d){o.call(this,d),this.enc="pem"}return s(a,o),pem$1=a,a.prototype.decode=function(c,j){for(var _e=c.toString().split(/[\r\n]+/g),pt=j.label.toUpperCase(),yt=/^-----(BEGIN|END) ([^-]+)-----$/,ct=-1,Ct=-1,qt=0;qt<_e.length;qt++){var Ot=_e[qt].match(yt);if(Ot!==null&&Ot[2]===pt)if(ct===-1){if(Ot[1]!=="BEGIN")break;ct=qt}else{if(Ot[1]!=="END")break;Ct=qt;break}}if(ct===-1||Ct===-1)throw new Error("PEM section not found for: "+pt);var Lt=_e.slice(ct+1,Ct).join("");Lt.replace(/[^a-z0-9\+\/=]+/gi,"");var Qt=new e(Lt,"base64");return o.prototype.decode.call(this,Qt,j)},pem$1}var hasRequiredDecoders;function requireDecoders(){return hasRequiredDecoders||(hasRequiredDecoders=1,function(s){var e=s;e.der=requireDer$1(),e.pem=requirePem$1()}(decoders)),decoders}var encoders={},der_1,hasRequiredDer;function requireDer(){if(hasRequiredDer)return der_1;hasRequiredDer=1;var s=requireInherits_browser(),e=require$$0$1.Buffer,o=requireAsn1$1(),a=o.base,d=o.constants.der;function c(yt){this.enc="der",this.name=yt.name,this.entity=yt,this.tree=new j,this.tree._init(yt.body)}der_1=c,c.prototype.encode=function(ct,Ct){return this.tree._encode(ct,Ct).join()};function j(yt){a.Node.call(this,"der",yt)}s(j,a.Node),j.prototype._encodeComposite=function(ct,Ct,qt,Ot){var Lt=pt(ct,Ct,qt,this.reporter);if(Ot.length<128){var er=new e(2);return er[0]=Lt,er[1]=Ot.length,this._createEncoderBuffer([er,Ot])}for(var Qt=1,ir=Ot.length;ir>=256;ir>>=8)Qt++;var er=new e(2+Qt);er[0]=Lt,er[1]=128|Qt;for(var ir=1+Qt,tr=Ot.length;tr>0;ir--,tr>>=8)er[ir]=tr&255;return this._createEncoderBuffer([er,Ot])},j.prototype._encodeStr=function(ct,Ct){if(Ct==="bitstr")return this._createEncoderBuffer([ct.unused|0,ct.data]);if(Ct==="bmpstr"){for(var qt=new e(ct.length*2),Ot=0;Ot<ct.length;Ot++)qt.writeUInt16BE(ct.charCodeAt(Ot),Ot*2);return this._createEncoderBuffer(qt)}else return Ct==="numstr"?this._isNumstr(ct)?this._createEncoderBuffer(ct):this.reporter.error("Encoding of string type: numstr supports only digits and space"):Ct==="printstr"?this._isPrintstr(ct)?this._createEncoderBuffer(ct):this.reporter.error("Encoding of string type: printstr supports only latin upper and lower case letters, digits, space, apostrophe, left and rigth parenthesis, plus sign, comma, hyphen, dot, slash, colon, equal sign, question mark"):/str$/.test(Ct)?this._createEncoderBuffer(ct):Ct==="objDesc"?this._createEncoderBuffer(ct):this.reporter.error("Encoding of string type: "+Ct+" unsupported")},j.prototype._encodeObjid=function(ct,Ct,qt){if(typeof ct=="string"){if(!Ct)return this.reporter.error("string objid given, but no values map found");if(!Ct.hasOwnProperty(ct))return this.reporter.error("objid not found in values map");ct=Ct[ct].split(/[\s\.]+/g);for(var Ot=0;Ot<ct.length;Ot++)ct[Ot]|=0}else if(Array.isArray(ct)){ct=ct.slice();for(var Ot=0;Ot<ct.length;Ot++)ct[Ot]|=0}if(!Array.isArray(ct))return this.reporter.error("objid() should be either array or string, got: "+JSON.stringify(ct));if(!qt){if(ct[1]>=40)return this.reporter.error("Second objid identifier OOB");ct.splice(0,2,ct[0]*40+ct[1])}for(var Lt=0,Ot=0;Ot<ct.length;Ot++){var Qt=ct[Ot];for(Lt++;Qt>=128;Qt>>=7)Lt++}for(var ir=new e(Lt),er=ir.length-1,Ot=ct.length-1;Ot>=0;Ot--){var Qt=ct[Ot];for(ir[er--]=Qt&127;(Qt>>=7)>0;)ir[er--]=128|Qt&127}return this._createEncoderBuffer(ir)};function _e(yt){return yt<10?"0"+yt:yt}j.prototype._encodeTime=function(ct,Ct){var qt,Ot=new Date(ct);return Ct==="gentime"?qt=[_e(Ot.getFullYear()),_e(Ot.getUTCMonth()+1),_e(Ot.getUTCDate()),_e(Ot.getUTCHours()),_e(Ot.getUTCMinutes()),_e(Ot.getUTCSeconds()),"Z"].join(""):Ct==="utctime"?qt=[_e(Ot.getFullYear()%100),_e(Ot.getUTCMonth()+1),_e(Ot.getUTCDate()),_e(Ot.getUTCHours()),_e(Ot.getUTCMinutes()),_e(Ot.getUTCSeconds()),"Z"].join(""):this.reporter.error("Encoding "+Ct+" time is not supported yet"),this._encodeStr(qt,"octstr")},j.prototype._encodeNull=function(){return this._createEncoderBuffer("")},j.prototype._encodeInt=function(ct,Ct){if(typeof ct=="string"){if(!Ct)return this.reporter.error("String int or enum given, but no values map");if(!Ct.hasOwnProperty(ct))return this.reporter.error("Values map doesn't contain: "+JSON.stringify(ct));ct=Ct[ct]}if(typeof ct!="number"&&!e.isBuffer(ct)){var qt=ct.toArray();!ct.sign&&qt[0]&128&&qt.unshift(0),ct=new e(qt)}if(e.isBuffer(ct)){var Ot=ct.length;ct.length===0&&Ot++;var Qt=new e(Ot);return ct.copy(Qt),ct.length===0&&(Qt[0]=0),this._createEncoderBuffer(Qt)}if(ct<128)return this._createEncoderBuffer(ct);if(ct<256)return this._createEncoderBuffer([0,ct]);for(var Ot=1,Lt=ct;Lt>=256;Lt>>=8)Ot++;for(var Qt=new Array(Ot),Lt=Qt.length-1;Lt>=0;Lt--)Qt[Lt]=ct&255,ct>>=8;return Qt[0]&128&&Qt.unshift(0),this._createEncoderBuffer(new e(Qt))},j.prototype._encodeBool=function(ct){return this._createEncoderBuffer(ct?255:0)},j.prototype._use=function(ct,Ct){return typeof ct=="function"&&(ct=ct(Ct)),ct._getEncoder("der").tree},j.prototype._skipDefault=function(ct,Ct,qt){var Ot=this._baseState,Lt;if(Ot.default===null)return!1;var Qt=ct.join();if(Ot.defaultBuffer===void 0&&(Ot.defaultBuffer=this._encodeValue(Ot.default,Ct,qt).join()),Qt.length!==Ot.defaultBuffer.length)return!1;for(Lt=0;Lt<Qt.length;Lt++)if(Qt[Lt]!==Ot.defaultBuffer[Lt])return!1;return!0};function pt(yt,ct,Ct,qt){var Ot;if(yt==="seqof"?yt="seq":yt==="setof"&&(yt="set"),d.tagByName.hasOwnProperty(yt))Ot=d.tagByName[yt];else if(typeof yt=="number"&&(yt|0)===yt)Ot=yt;else return qt.error("Unknown tag: "+yt);return Ot>=31?qt.error("Multi-octet tag encoding unsupported"):(ct||(Ot|=32),Ot|=d.tagClassByName[Ct||"universal"]<<6,Ot)}return der_1}var pem,hasRequiredPem;function requirePem(){if(hasRequiredPem)return pem;hasRequiredPem=1;var s=requireInherits_browser(),e=requireDer();function o(a){e.call(this,a),this.enc="pem"}return s(o,e),pem=o,o.prototype.encode=function(d,c){for(var j=e.prototype.encode.call(this,d),_e=j.toString("base64"),pt=["-----BEGIN "+c.label+"-----"],yt=0;yt<_e.length;yt+=64)pt.push(_e.slice(yt,yt+64));return pt.push("-----END "+c.label+"-----"),pt.join(`
`)},pem}var hasRequiredEncoders;function requireEncoders(){return hasRequiredEncoders||(hasRequiredEncoders=1,function(s){var e=s;e.der=requireDer(),e.pem=requirePem()}(encoders)),encoders}var hasRequiredAsn1$1;function requireAsn1$1(){return hasRequiredAsn1$1||(hasRequiredAsn1$1=1,function(s){var e=s;e.bignum=requireBn$2(),e.define=requireApi().define,e.base=requireBase(),e.constants=requireConstants(),e.decoders=requireDecoders(),e.encoders=requireEncoders()}(asn1)),asn1}var certificate,hasRequiredCertificate;function requireCertificate(){if(hasRequiredCertificate)return certificate;hasRequiredCertificate=1;var s=requireAsn1$1(),e=s.define("Time",function(){this.choice({utcTime:this.utctime(),generalTime:this.gentime()})}),o=s.define("AttributeTypeValue",function(){this.seq().obj(this.key("type").objid(),this.key("value").any())}),a=s.define("AlgorithmIdentifier",function(){this.seq().obj(this.key("algorithm").objid(),this.key("parameters").optional(),this.key("curve").objid().optional())}),d=s.define("SubjectPublicKeyInfo",function(){this.seq().obj(this.key("algorithm").use(a),this.key("subjectPublicKey").bitstr())}),c=s.define("RelativeDistinguishedName",function(){this.setof(o)}),j=s.define("RDNSequence",function(){this.seqof(c)}),_e=s.define("Name",function(){this.choice({rdnSequence:this.use(j)})}),pt=s.define("Validity",function(){this.seq().obj(this.key("notBefore").use(e),this.key("notAfter").use(e))}),yt=s.define("Extension",function(){this.seq().obj(this.key("extnID").objid(),this.key("critical").bool().def(!1),this.key("extnValue").octstr())}),ct=s.define("TBSCertificate",function(){this.seq().obj(this.key("version").explicit(0).int().optional(),this.key("serialNumber").int(),this.key("signature").use(a),this.key("issuer").use(_e),this.key("validity").use(pt),this.key("subject").use(_e),this.key("subjectPublicKeyInfo").use(d),this.key("issuerUniqueID").implicit(1).bitstr().optional(),this.key("subjectUniqueID").implicit(2).bitstr().optional(),this.key("extensions").explicit(3).seqof(yt).optional())}),Ct=s.define("X509Certificate",function(){this.seq().obj(this.key("tbsCertificate").use(ct),this.key("signatureAlgorithm").use(a),this.key("signatureValue").bitstr())});return certificate=Ct,certificate}var hasRequiredAsn1;function requireAsn1(){if(hasRequiredAsn1)return asn1$1;hasRequiredAsn1=1;var s=requireAsn1$1();asn1$1.certificate=requireCertificate();var e=s.define("RSAPrivateKey",function(){this.seq().obj(this.key("version").int(),this.key("modulus").int(),this.key("publicExponent").int(),this.key("privateExponent").int(),this.key("prime1").int(),this.key("prime2").int(),this.key("exponent1").int(),this.key("exponent2").int(),this.key("coefficient").int())});asn1$1.RSAPrivateKey=e;var o=s.define("RSAPublicKey",function(){this.seq().obj(this.key("modulus").int(),this.key("publicExponent").int())});asn1$1.RSAPublicKey=o;var a=s.define("AlgorithmIdentifier",function(){this.seq().obj(this.key("algorithm").objid(),this.key("none").null_().optional(),this.key("curve").objid().optional(),this.key("params").seq().obj(this.key("p").int(),this.key("q").int(),this.key("g").int()).optional())}),d=s.define("SubjectPublicKeyInfo",function(){this.seq().obj(this.key("algorithm").use(a),this.key("subjectPublicKey").bitstr())});asn1$1.PublicKey=d;var c=s.define("PrivateKeyInfo",function(){this.seq().obj(this.key("version").int(),this.key("algorithm").use(a),this.key("subjectPrivateKey").octstr())});asn1$1.PrivateKey=c;var j=s.define("EncryptedPrivateKeyInfo",function(){this.seq().obj(this.key("algorithm").seq().obj(this.key("id").objid(),this.key("decrypt").seq().obj(this.key("kde").seq().obj(this.key("id").objid(),this.key("kdeparams").seq().obj(this.key("salt").octstr(),this.key("iters").int())),this.key("cipher").seq().obj(this.key("algo").objid(),this.key("iv").octstr()))),this.key("subjectPrivateKey").octstr())});asn1$1.EncryptedPrivateKey=j;var _e=s.define("DSAPrivateKey",function(){this.seq().obj(this.key("version").int(),this.key("p").int(),this.key("q").int(),this.key("g").int(),this.key("pub_key").int(),this.key("priv_key").int())});asn1$1.DSAPrivateKey=_e,asn1$1.DSAparam=s.define("DSAparam",function(){this.int()});var pt=s.define("ECParameters",function(){this.choice({namedCurve:this.objid()})}),yt=s.define("ECPrivateKey",function(){this.seq().obj(this.key("version").int(),this.key("privateKey").octstr(),this.key("parameters").optional().explicit(0).use(pt),this.key("publicKey").optional().explicit(1).bitstr())});return asn1$1.ECPrivateKey=yt,asn1$1.signature=s.define("signature",function(){this.seq().obj(this.key("r").int(),this.key("s").int())}),asn1$1}const require$$1={"2.16.840.1.101.3.4.1.1":"aes-128-ecb","2.16.840.1.101.3.4.1.2":"aes-128-cbc","2.16.840.1.101.3.4.1.3":"aes-128-ofb","2.16.840.1.101.3.4.1.4":"aes-128-cfb","2.16.840.1.101.3.4.1.21":"aes-192-ecb","2.16.840.1.101.3.4.1.22":"aes-192-cbc","2.16.840.1.101.3.4.1.23":"aes-192-ofb","2.16.840.1.101.3.4.1.24":"aes-192-cfb","2.16.840.1.101.3.4.1.41":"aes-256-ecb","2.16.840.1.101.3.4.1.42":"aes-256-cbc","2.16.840.1.101.3.4.1.43":"aes-256-ofb","2.16.840.1.101.3.4.1.44":"aes-256-cfb"};var fixProc,hasRequiredFixProc;function requireFixProc(){if(hasRequiredFixProc)return fixProc;hasRequiredFixProc=1;var s=/Proc-Type: 4,ENCRYPTED[\n\r]+DEK-Info: AES-((?:128)|(?:192)|(?:256))-CBC,([0-9A-H]+)[\n\r]+([0-9A-z\n\r+/=]+)[\n\r]+/m,e=/^-----BEGIN ((?:.*? KEY)|CERTIFICATE)-----/m,o=/^-----BEGIN ((?:.*? KEY)|CERTIFICATE)-----([0-9A-z\n\r+/=]+)-----END \1-----$/m,a=requireEvp_bytestokey(),d=requireBrowser$6(),c=requireSafeBuffer$1().Buffer;return fixProc=function(j,_e){var pt=j.toString(),yt=pt.match(s),ct;if(yt){var qt="aes"+yt[1],Ot=c.from(yt[2],"hex"),Lt=c.from(yt[3].replace(/[\r\n]/g,""),"base64"),Qt=a(_e,Ot.slice(0,8),parseInt(yt[1],10)).key,ir=[],er=d.createDecipheriv(qt,Qt,Ot);ir.push(er.update(Lt)),ir.push(er.final()),ct=c.concat(ir)}else{var Ct=pt.match(o);ct=c.from(Ct[2].replace(/[\r\n]/g,""),"base64")}var tr=pt.match(e)[1];return{tag:tr,data:ct}},fixProc}var parseAsn1,hasRequiredParseAsn1;function requireParseAsn1(){if(hasRequiredParseAsn1)return parseAsn1;hasRequiredParseAsn1=1;var s=requireAsn1(),e=require$$1,o=requireFixProc(),a=requireBrowser$6(),d=requireBrowser$7(),c=requireSafeBuffer$1().Buffer;function j(pt,yt){var ct=pt.algorithm.decrypt.kde.kdeparams.salt,Ct=parseInt(pt.algorithm.decrypt.kde.kdeparams.iters.toString(),10),qt=e[pt.algorithm.decrypt.cipher.algo.join(".")],Ot=pt.algorithm.decrypt.cipher.iv,Lt=pt.subjectPrivateKey,Qt=parseInt(qt.split("-")[1],10)/8,ir=d.pbkdf2Sync(yt,ct,Ct,Qt,"sha1"),er=a.createDecipheriv(qt,ir,Ot),tr=[];return tr.push(er.update(Lt)),tr.push(er.final()),c.concat(tr)}function _e(pt){var yt;typeof pt=="object"&&!c.isBuffer(pt)&&(yt=pt.passphrase,pt=pt.key),typeof pt=="string"&&(pt=c.from(pt));var ct=o(pt,yt),Ct=ct.tag,qt=ct.data,Ot,Lt;switch(Ct){case"CERTIFICATE":Lt=s.certificate.decode(qt,"der").tbsCertificate.subjectPublicKeyInfo;case"PUBLIC KEY":switch(Lt||(Lt=s.PublicKey.decode(qt,"der")),Ot=Lt.algorithm.algorithm.join("."),Ot){case"1.2.840.113549.1.1.1":return s.RSAPublicKey.decode(Lt.subjectPublicKey.data,"der");case"1.2.840.10045.2.1":return Lt.subjectPrivateKey=Lt.subjectPublicKey,{type:"ec",data:Lt};case"1.2.840.10040.4.1":return Lt.algorithm.params.pub_key=s.DSAparam.decode(Lt.subjectPublicKey.data,"der"),{type:"dsa",data:Lt.algorithm.params};default:throw new Error("unknown key id "+Ot)}case"ENCRYPTED PRIVATE KEY":qt=s.EncryptedPrivateKey.decode(qt,"der"),qt=j(qt,yt);case"PRIVATE KEY":switch(Lt=s.PrivateKey.decode(qt,"der"),Ot=Lt.algorithm.algorithm.join("."),Ot){case"1.2.840.113549.1.1.1":return s.RSAPrivateKey.decode(Lt.subjectPrivateKey,"der");case"1.2.840.10045.2.1":return{curve:Lt.algorithm.curve,privateKey:s.ECPrivateKey.decode(Lt.subjectPrivateKey,"der").privateKey};case"1.2.840.10040.4.1":return Lt.algorithm.params.priv_key=s.DSAparam.decode(Lt.subjectPrivateKey,"der"),{type:"dsa",params:Lt.algorithm.params};default:throw new Error("unknown key id "+Ot)}case"RSA PUBLIC KEY":return s.RSAPublicKey.decode(qt,"der");case"RSA PRIVATE KEY":return s.RSAPrivateKey.decode(qt,"der");case"DSA PRIVATE KEY":return{type:"dsa",params:s.DSAPrivateKey.decode(qt,"der")};case"EC PRIVATE KEY":return qt=s.ECPrivateKey.decode(qt,"der"),{curve:qt.parameters.value,privateKey:qt.privateKey};default:throw new Error("unknown key type "+Ct)}}return _e.signature=s.signature,parseAsn1=_e,parseAsn1}const require$$4={"1.3.132.0.10":"secp256k1","1.3.132.0.33":"p224","1.2.840.10045.3.1.1":"p192","1.2.840.10045.3.1.7":"p256","1.3.132.0.34":"p384","1.3.132.0.35":"p521"};var hasRequiredSign;function requireSign(){if(hasRequiredSign)return sign.exports;hasRequiredSign=1;var s=requireSafeBuffer$1().Buffer,e=requireBrowser$8(),o=requireBrowserifyRsa(),a=requireElliptic().ec,d=requireBn$4(),c=requireParseAsn1(),j=require$$4,_e=1;function pt(er,tr,sr,ar,hr){var _r=c(tr);if(_r.curve){if(ar!=="ecdsa"&&ar!=="ecdsa/rsa")throw new Error("wrong private key type");return yt(er,_r)}else if(_r.type==="dsa"){if(ar!=="dsa")throw new Error("wrong private key type");return ct(er,_r,sr)}if(ar!=="rsa"&&ar!=="ecdsa/rsa")throw new Error("wrong private key type");if(tr.padding!==void 0&&tr.padding!==_e)throw new Error("illegal or unsupported padding mode");er=s.concat([hr,er]);for(var dr=_r.modulus.byteLength(),ur=[0,1];er.length+ur.length+1<dr;)ur.push(255);ur.push(0);for(var lr=-1;++lr<er.length;)ur.push(er[lr]);var gr=o(ur,_r);return gr}function yt(er,tr){var sr=j[tr.curve.join(".")];if(!sr)throw new Error("unknown curve "+tr.curve.join("."));var ar=new a(sr),hr=ar.keyFromPrivate(tr.privateKey),_r=hr.sign(er);return s.from(_r.toDER())}function ct(er,tr,sr){for(var ar=tr.params.priv_key,hr=tr.params.p,_r=tr.params.q,dr=tr.params.g,ur=new d(0),lr,gr=Ot(er,_r).mod(_r),Mt=!1,h=qt(ar,_r,er,sr);Mt===!1;)lr=Qt(_r,h,sr),ur=ir(dr,lr,hr,_r),Mt=lr.invm(_r).imul(gr.add(ar.mul(ur))).mod(_r),Mt.cmpn(0)===0&&(Mt=!1,ur=new d(0));return Ct(ur,Mt)}function Ct(er,tr){er=er.toArray(),tr=tr.toArray(),er[0]&128&&(er=[0].concat(er)),tr[0]&128&&(tr=[0].concat(tr));var sr=er.length+tr.length+4,ar=[48,sr,2,er.length];return ar=ar.concat(er,[2,tr.length],tr),s.from(ar)}function qt(er,tr,sr,ar){if(er=s.from(er.toArray()),er.length<tr.byteLength()){var hr=s.alloc(tr.byteLength()-er.length);er=s.concat([hr,er])}var _r=sr.length,dr=Lt(sr,tr),ur=s.alloc(_r);ur.fill(1);var lr=s.alloc(_r);return lr=e(ar,lr).update(ur).update(s.from([0])).update(er).update(dr).digest(),ur=e(ar,lr).update(ur).digest(),lr=e(ar,lr).update(ur).update(s.from([1])).update(er).update(dr).digest(),ur=e(ar,lr).update(ur).digest(),{k:lr,v:ur}}function Ot(er,tr){var sr=new d(er),ar=(er.length<<3)-tr.bitLength();return ar>0&&sr.ishrn(ar),sr}function Lt(er,tr){er=Ot(er,tr),er=er.mod(tr);var sr=s.from(er.toArray());if(sr.length<tr.byteLength()){var ar=s.alloc(tr.byteLength()-sr.length);sr=s.concat([ar,sr])}return sr}function Qt(er,tr,sr){var ar,hr;do{for(ar=s.alloc(0);ar.length*8<er.bitLength();)tr.v=e(sr,tr.k).update(tr.v).digest(),ar=s.concat([ar,tr.v]);hr=Ot(ar,er),tr.k=e(sr,tr.k).update(tr.v).update(s.from([0])).digest(),tr.v=e(sr,tr.k).update(tr.v).digest()}while(hr.cmp(er)!==-1);return hr}function ir(er,tr,sr,ar){return er.toRed(d.mont(sr)).redPow(tr).fromRed().mod(ar)}return sign.exports=pt,sign.exports.getKey=qt,sign.exports.makeKey=Qt,sign.exports}var verify_1,hasRequiredVerify;function requireVerify(){if(hasRequiredVerify)return verify_1;hasRequiredVerify=1;var s=requireSafeBuffer$1().Buffer,e=requireBn$4(),o=requireElliptic().ec,a=requireParseAsn1(),d=require$$4;function c(yt,ct,Ct,qt,Ot){var Lt=a(Ct);if(Lt.type==="ec"){if(qt!=="ecdsa"&&qt!=="ecdsa/rsa")throw new Error("wrong public key type");return j(yt,ct,Lt)}else if(Lt.type==="dsa"){if(qt!=="dsa")throw new Error("wrong public key type");return _e(yt,ct,Lt)}if(qt!=="rsa"&&qt!=="ecdsa/rsa")throw new Error("wrong public key type");ct=s.concat([Ot,ct]);for(var Qt=Lt.modulus.byteLength(),ir=[1],er=0;ct.length+ir.length+2<Qt;)ir.push(255),er+=1;ir.push(0);for(var tr=-1;++tr<ct.length;)ir.push(ct[tr]);ir=s.from(ir);var sr=e.mont(Lt.modulus);yt=new e(yt).toRed(sr),yt=yt.redPow(new e(Lt.publicExponent)),yt=s.from(yt.fromRed().toArray());var ar=er<8?1:0;for(Qt=Math.min(yt.length,ir.length),yt.length!==ir.length&&(ar=1),tr=-1;++tr<Qt;)ar|=yt[tr]^ir[tr];return ar===0}function j(yt,ct,Ct){var qt=d[Ct.data.algorithm.curve.join(".")];if(!qt)throw new Error("unknown curve "+Ct.data.algorithm.curve.join("."));var Ot=new o(qt),Lt=Ct.data.subjectPrivateKey.data;return Ot.verify(ct,yt,Lt)}function _e(yt,ct,Ct){var qt=Ct.data.p,Ot=Ct.data.q,Lt=Ct.data.g,Qt=Ct.data.pub_key,ir=a.signature.decode(yt,"der"),er=ir.s,tr=ir.r;pt(er,Ot),pt(tr,Ot);var sr=e.mont(qt),ar=er.invm(Ot),hr=Lt.toRed(sr).redPow(new e(ct).mul(ar).mod(Ot)).fromRed().mul(Qt.toRed(sr).redPow(tr.mul(ar).mod(Ot)).fromRed()).mod(qt).mod(Ot);return hr.cmp(tr)===0}function pt(yt,ct){if(yt.cmpn(0)<=0)throw new Error("invalid sig");if(yt.cmp(ct)>=0)throw new Error("invalid sig")}return verify_1=c,verify_1}var browser$4,hasRequiredBrowser$3;function requireBrowser$3(){if(hasRequiredBrowser$3)return browser$4;hasRequiredBrowser$3=1;var s=requireSafeBuffer$1().Buffer,e=requireBrowser$9(),o=requireReadableBrowser(),a=requireInherits_browser(),d=requireSign(),c=requireVerify(),j=require$$6;Object.keys(j).forEach(function(Ct){j[Ct].id=s.from(j[Ct].id,"hex"),j[Ct.toLowerCase()]=j[Ct]});function _e(Ct){o.Writable.call(this);var qt=j[Ct];if(!qt)throw new Error("Unknown message digest");this._hashType=qt.hash,this._hash=e(qt.hash),this._tag=qt.id,this._signType=qt.sign}a(_e,o.Writable),_e.prototype._write=function(qt,Ot,Lt){this._hash.update(qt),Lt()},_e.prototype.update=function(qt,Ot){return this._hash.update(typeof qt=="string"?s.from(qt,Ot):qt),this},_e.prototype.sign=function(qt,Ot){this.end();var Lt=this._hash.digest(),Qt=d(Lt,qt,this._hashType,this._signType,this._tag);return Ot?Qt.toString(Ot):Qt};function pt(Ct){o.Writable.call(this);var qt=j[Ct];if(!qt)throw new Error("Unknown message digest");this._hash=e(qt.hash),this._tag=qt.id,this._signType=qt.sign}a(pt,o.Writable),pt.prototype._write=function(qt,Ot,Lt){this._hash.update(qt),Lt()},pt.prototype.update=function(qt,Ot){return this._hash.update(typeof qt=="string"?s.from(qt,Ot):qt),this},pt.prototype.verify=function(qt,Ot,Lt){var Qt=typeof Ot=="string"?s.from(Ot,Lt):Ot;this.end();var ir=this._hash.digest();return c(Qt,ir,qt,this._signType,this._tag)};function yt(Ct){return new _e(Ct)}function ct(Ct){return new pt(Ct)}return browser$4={Sign:yt,Verify:ct,createSign:yt,createVerify:ct},browser$4}var bn$1={exports:{}};bn$1.exports;var hasRequiredBn$1;function requireBn$1(){return hasRequiredBn$1||(hasRequiredBn$1=1,function(s){(function(e,o){function a(Mt,h){if(!Mt)throw new Error(h||"Assertion failed")}function d(Mt,h){Mt.super_=h;var _=function(){};_.prototype=h.prototype,Mt.prototype=new _,Mt.prototype.constructor=Mt}function c(Mt,h,_){if(c.isBN(Mt))return Mt;this.negative=0,this.words=null,this.length=0,this.red=null,Mt!==null&&((h==="le"||h==="be")&&(_=h,h=10),this._init(Mt||0,h||10,_||"be"))}typeof e=="object"?e.exports=c:o.BN=c,c.BN=c,c.wordSize=26;var j;try{typeof window<"u"&&typeof window.Buffer<"u"?j=window.Buffer:j=require$$0$1.Buffer}catch{}c.isBN=function(h){return h instanceof c?!0:h!==null&&typeof h=="object"&&h.constructor.wordSize===c.wordSize&&Array.isArray(h.words)},c.max=function(h,_){return h.cmp(_)>0?h:_},c.min=function(h,_){return h.cmp(_)<0?h:_},c.prototype._init=function(h,_,b){if(typeof h=="number")return this._initNumber(h,_,b);if(typeof h=="object")return this._initArray(h,_,b);_==="hex"&&(_=16),a(_===(_|0)&&_>=2&&_<=36),h=h.toString().replace(/\s+/g,"");var lt=0;h[0]==="-"&&(lt++,this.negative=1),lt<h.length&&(_===16?this._parseHex(h,lt,b):(this._parseBase(h,_,lt),b==="le"&&this._initArray(this.toArray(),_,b)))},c.prototype._initNumber=function(h,_,b){h<0&&(this.negative=1,h=-h),h<67108864?(this.words=[h&67108863],this.length=1):h<4503599627370496?(this.words=[h&67108863,h/67108864&67108863],this.length=2):(a(h<9007199254740992),this.words=[h&67108863,h/67108864&67108863,1],this.length=3),b==="le"&&this._initArray(this.toArray(),_,b)},c.prototype._initArray=function(h,_,b){if(a(typeof h.length=="number"),h.length<=0)return this.words=[0],this.length=1,this;this.length=Math.ceil(h.length/3),this.words=new Array(this.length);for(var lt=0;lt<this.length;lt++)this.words[lt]=0;var Rt,kt,Ft=0;if(b==="be")for(lt=h.length-1,Rt=0;lt>=0;lt-=3)kt=h[lt]|h[lt-1]<<8|h[lt-2]<<16,this.words[Rt]|=kt<<Ft&67108863,this.words[Rt+1]=kt>>>26-Ft&67108863,Ft+=24,Ft>=26&&(Ft-=26,Rt++);else if(b==="le")for(lt=0,Rt=0;lt<h.length;lt+=3)kt=h[lt]|h[lt+1]<<8|h[lt+2]<<16,this.words[Rt]|=kt<<Ft&67108863,this.words[Rt+1]=kt>>>26-Ft&67108863,Ft+=24,Ft>=26&&(Ft-=26,Rt++);return this.strip()};function _e(Mt,h){var _=Mt.charCodeAt(h);return _>=65&&_<=70?_-55:_>=97&&_<=102?_-87:_-48&15}function pt(Mt,h,_){var b=_e(Mt,_);return _-1>=h&&(b|=_e(Mt,_-1)<<4),b}c.prototype._parseHex=function(h,_,b){this.length=Math.ceil((h.length-_)/6),this.words=new Array(this.length);for(var lt=0;lt<this.length;lt++)this.words[lt]=0;var Rt=0,kt=0,Ft;if(b==="be")for(lt=h.length-1;lt>=_;lt-=2)Ft=pt(h,_,lt)<<Rt,this.words[kt]|=Ft&67108863,Rt>=18?(Rt-=18,kt+=1,this.words[kt]|=Ft>>>26):Rt+=8;else{var xt=h.length-_;for(lt=xt%2===0?_+1:_;lt<h.length;lt+=2)Ft=pt(h,_,lt)<<Rt,this.words[kt]|=Ft&67108863,Rt>=18?(Rt-=18,kt+=1,this.words[kt]|=Ft>>>26):Rt+=8}this.strip()};function yt(Mt,h,_,b){for(var lt=0,Rt=Math.min(Mt.length,_),kt=h;kt<Rt;kt++){var Ft=Mt.charCodeAt(kt)-48;lt*=b,Ft>=49?lt+=Ft-49+10:Ft>=17?lt+=Ft-17+10:lt+=Ft}return lt}c.prototype._parseBase=function(h,_,b){this.words=[0],this.length=1;for(var lt=0,Rt=1;Rt<=67108863;Rt*=_)lt++;lt--,Rt=Rt/_|0;for(var kt=h.length-b,Ft=kt%lt,xt=Math.min(kt,kt-Ft)+b,g=0,wt=b;wt<xt;wt+=lt)g=yt(h,wt,wt+lt,_),this.imuln(Rt),this.words[0]+g<67108864?this.words[0]+=g:this._iaddn(g);if(Ft!==0){var nr=1;for(g=yt(h,wt,h.length,_),wt=0;wt<Ft;wt++)nr*=_;this.imuln(nr),this.words[0]+g<67108864?this.words[0]+=g:this._iaddn(g)}this.strip()},c.prototype.copy=function(h){h.words=new Array(this.length);for(var _=0;_<this.length;_++)h.words[_]=this.words[_];h.length=this.length,h.negative=this.negative,h.red=this.red},c.prototype.clone=function(){var h=new c(null);return this.copy(h),h},c.prototype._expand=function(h){for(;this.length<h;)this.words[this.length++]=0;return this},c.prototype.strip=function(){for(;this.length>1&&this.words[this.length-1]===0;)this.length--;return this._normSign()},c.prototype._normSign=function(){return this.length===1&&this.words[0]===0&&(this.negative=0),this},c.prototype.inspect=function(){return(this.red?"<BN-R: ":"<BN: ")+this.toString(16)+">"};var ct=["","0","00","000","0000","00000","000000","0000000","00000000","000000000","0000000000","00000000000","000000000000","0000000000000","00000000000000","000000000000000","0000000000000000","00000000000000000","000000000000000000","0000000000000000000","00000000000000000000","000000000000000000000","0000000000000000000000","00000000000000000000000","000000000000000000000000","0000000000000000000000000"],Ct=[0,0,25,16,12,11,10,9,8,8,7,7,7,7,6,6,6,6,6,6,6,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5],qt=[0,0,33554432,43046721,16777216,48828125,60466176,40353607,16777216,43046721,1e7,19487171,35831808,62748517,7529536,11390625,16777216,24137569,34012224,47045881,64e6,4084101,5153632,6436343,7962624,9765625,11881376,14348907,17210368,20511149,243e5,28629151,33554432,39135393,45435424,52521875,60466176];c.prototype.toString=function(h,_){h=h||10,_=_|0||1;var b;if(h===16||h==="hex"){b="";for(var lt=0,Rt=0,kt=0;kt<this.length;kt++){var Ft=this.words[kt],xt=((Ft<<lt|Rt)&16777215).toString(16);Rt=Ft>>>24-lt&16777215,lt+=2,lt>=26&&(lt-=26,kt--),Rt!==0||kt!==this.length-1?b=ct[6-xt.length]+xt+b:b=xt+b}for(Rt!==0&&(b=Rt.toString(16)+b);b.length%_!==0;)b="0"+b;return this.negative!==0&&(b="-"+b),b}if(h===(h|0)&&h>=2&&h<=36){var g=Ct[h],wt=qt[h];b="";var nr=this.clone();for(nr.negative=0;!nr.isZero();){var or=nr.modn(wt).toString(h);nr=nr.idivn(wt),nr.isZero()?b=or+b:b=ct[g-or.length]+or+b}for(this.isZero()&&(b="0"+b);b.length%_!==0;)b="0"+b;return this.negative!==0&&(b="-"+b),b}a(!1,"Base should be between 2 and 36")},c.prototype.toNumber=function(){var h=this.words[0];return this.length===2?h+=this.words[1]*67108864:this.length===3&&this.words[2]===1?h+=4503599627370496+this.words[1]*67108864:this.length>2&&a(!1,"Number can only safely store up to 53 bits"),this.negative!==0?-h:h},c.prototype.toJSON=function(){return this.toString(16)},c.prototype.toBuffer=function(h,_){return a(typeof j<"u"),this.toArrayLike(j,h,_)},c.prototype.toArray=function(h,_){return this.toArrayLike(Array,h,_)},c.prototype.toArrayLike=function(h,_,b){var lt=this.byteLength(),Rt=b||Math.max(1,lt);a(lt<=Rt,"byte array longer than desired length"),a(Rt>0,"Requested array length <= 0"),this.strip();var kt=_==="le",Ft=new h(Rt),xt,g,wt=this.clone();if(kt){for(g=0;!wt.isZero();g++)xt=wt.andln(255),wt.iushrn(8),Ft[g]=xt;for(;g<Rt;g++)Ft[g]=0}else{for(g=0;g<Rt-lt;g++)Ft[g]=0;for(g=0;!wt.isZero();g++)xt=wt.andln(255),wt.iushrn(8),Ft[Rt-g-1]=xt}return Ft},Math.clz32?c.prototype._countBits=function(h){return 32-Math.clz32(h)}:c.prototype._countBits=function(h){var _=h,b=0;return _>=4096&&(b+=13,_>>>=13),_>=64&&(b+=7,_>>>=7),_>=8&&(b+=4,_>>>=4),_>=2&&(b+=2,_>>>=2),b+_},c.prototype._zeroBits=function(h){if(h===0)return 26;var _=h,b=0;return _&8191||(b+=13,_>>>=13),_&127||(b+=7,_>>>=7),_&15||(b+=4,_>>>=4),_&3||(b+=2,_>>>=2),_&1||b++,b},c.prototype.bitLength=function(){var h=this.words[this.length-1],_=this._countBits(h);return(this.length-1)*26+_};function Ot(Mt){for(var h=new Array(Mt.bitLength()),_=0;_<h.length;_++){var b=_/26|0,lt=_%26;h[_]=(Mt.words[b]&1<<lt)>>>lt}return h}c.prototype.zeroBits=function(){if(this.isZero())return 0;for(var h=0,_=0;_<this.length;_++){var b=this._zeroBits(this.words[_]);if(h+=b,b!==26)break}return h},c.prototype.byteLength=function(){return Math.ceil(this.bitLength()/8)},c.prototype.toTwos=function(h){return this.negative!==0?this.abs().inotn(h).iaddn(1):this.clone()},c.prototype.fromTwos=function(h){return this.testn(h-1)?this.notn(h).iaddn(1).ineg():this.clone()},c.prototype.isNeg=function(){return this.negative!==0},c.prototype.neg=function(){return this.clone().ineg()},c.prototype.ineg=function(){return this.isZero()||(this.negative^=1),this},c.prototype.iuor=function(h){for(;this.length<h.length;)this.words[this.length++]=0;for(var _=0;_<h.length;_++)this.words[_]=this.words[_]|h.words[_];return this.strip()},c.prototype.ior=function(h){return a((this.negative|h.negative)===0),this.iuor(h)},c.prototype.or=function(h){return this.length>h.length?this.clone().ior(h):h.clone().ior(this)},c.prototype.uor=function(h){return this.length>h.length?this.clone().iuor(h):h.clone().iuor(this)},c.prototype.iuand=function(h){var _;this.length>h.length?_=h:_=this;for(var b=0;b<_.length;b++)this.words[b]=this.words[b]&h.words[b];return this.length=_.length,this.strip()},c.prototype.iand=function(h){return a((this.negative|h.negative)===0),this.iuand(h)},c.prototype.and=function(h){return this.length>h.length?this.clone().iand(h):h.clone().iand(this)},c.prototype.uand=function(h){return this.length>h.length?this.clone().iuand(h):h.clone().iuand(this)},c.prototype.iuxor=function(h){var _,b;this.length>h.length?(_=this,b=h):(_=h,b=this);for(var lt=0;lt<b.length;lt++)this.words[lt]=_.words[lt]^b.words[lt];if(this!==_)for(;lt<_.length;lt++)this.words[lt]=_.words[lt];return this.length=_.length,this.strip()},c.prototype.ixor=function(h){return a((this.negative|h.negative)===0),this.iuxor(h)},c.prototype.xor=function(h){return this.length>h.length?this.clone().ixor(h):h.clone().ixor(this)},c.prototype.uxor=function(h){return this.length>h.length?this.clone().iuxor(h):h.clone().iuxor(this)},c.prototype.inotn=function(h){a(typeof h=="number"&&h>=0);var _=Math.ceil(h/26)|0,b=h%26;this._expand(_),b>0&&_--;for(var lt=0;lt<_;lt++)this.words[lt]=~this.words[lt]&67108863;return b>0&&(this.words[lt]=~this.words[lt]&67108863>>26-b),this.strip()},c.prototype.notn=function(h){return this.clone().inotn(h)},c.prototype.setn=function(h,_){a(typeof h=="number"&&h>=0);var b=h/26|0,lt=h%26;return this._expand(b+1),_?this.words[b]=this.words[b]|1<<lt:this.words[b]=this.words[b]&~(1<<lt),this.strip()},c.prototype.iadd=function(h){var _;if(this.negative!==0&&h.negative===0)return this.negative=0,_=this.isub(h),this.negative^=1,this._normSign();if(this.negative===0&&h.negative!==0)return h.negative=0,_=this.isub(h),h.negative=1,_._normSign();var b,lt;this.length>h.length?(b=this,lt=h):(b=h,lt=this);for(var Rt=0,kt=0;kt<lt.length;kt++)_=(b.words[kt]|0)+(lt.words[kt]|0)+Rt,this.words[kt]=_&67108863,Rt=_>>>26;for(;Rt!==0&&kt<b.length;kt++)_=(b.words[kt]|0)+Rt,this.words[kt]=_&67108863,Rt=_>>>26;if(this.length=b.length,Rt!==0)this.words[this.length]=Rt,this.length++;else if(b!==this)for(;kt<b.length;kt++)this.words[kt]=b.words[kt];return this},c.prototype.add=function(h){var _;return h.negative!==0&&this.negative===0?(h.negative=0,_=this.sub(h),h.negative^=1,_):h.negative===0&&this.negative!==0?(this.negative=0,_=h.sub(this),this.negative=1,_):this.length>h.length?this.clone().iadd(h):h.clone().iadd(this)},c.prototype.isub=function(h){if(h.negative!==0){h.negative=0;var _=this.iadd(h);return h.negative=1,_._normSign()}else if(this.negative!==0)return this.negative=0,this.iadd(h),this.negative=1,this._normSign();var b=this.cmp(h);if(b===0)return this.negative=0,this.length=1,this.words[0]=0,this;var lt,Rt;b>0?(lt=this,Rt=h):(lt=h,Rt=this);for(var kt=0,Ft=0;Ft<Rt.length;Ft++)_=(lt.words[Ft]|0)-(Rt.words[Ft]|0)+kt,kt=_>>26,this.words[Ft]=_&67108863;for(;kt!==0&&Ft<lt.length;Ft++)_=(lt.words[Ft]|0)+kt,kt=_>>26,this.words[Ft]=_&67108863;if(kt===0&&Ft<lt.length&&lt!==this)for(;Ft<lt.length;Ft++)this.words[Ft]=lt.words[Ft];return this.length=Math.max(this.length,Ft),lt!==this&&(this.negative=1),this.strip()},c.prototype.sub=function(h){return this.clone().isub(h)};function Lt(Mt,h,_){_.negative=h.negative^Mt.negative;var b=Mt.length+h.length|0;_.length=b,b=b-1|0;var lt=Mt.words[0]|0,Rt=h.words[0]|0,kt=lt*Rt,Ft=kt&67108863,xt=kt/67108864|0;_.words[0]=Ft;for(var g=1;g<b;g++){for(var wt=xt>>>26,nr=xt&67108863,or=Math.min(g,h.length-1),cr=Math.max(0,g-Mt.length+1);cr<=or;cr++){var Rr=g-cr|0;lt=Mt.words[Rr]|0,Rt=h.words[cr]|0,kt=lt*Rt+nr,wt+=kt/67108864|0,nr=kt&67108863}_.words[g]=nr|0,xt=wt|0}return xt!==0?_.words[g]=xt|0:_.length--,_.strip()}var Qt=function(h,_,b){var lt=h.words,Rt=_.words,kt=b.words,Ft=0,xt,g,wt,nr=lt[0]|0,or=nr&8191,cr=nr>>>13,Rr=lt[1]|0,Ar=Rr&8191,pr=Rr>>>13,wr=lt[2]|0,Tr=wr&8191,Ir=wr>>>13,Sr=lt[3]|0,br=Sr&8191,kr=Sr>>>13,Qr=lt[4]|0,qr=Qr&8191,$r=Qr>>>13,gn=lt[5]|0,Lr=gn&8191,Dr=gn>>>13,En=lt[6]|0,Fr=En&8191,zr=En>>>13,yn=lt[7]|0,Nr=yn&8191,Wr=yn>>>13,xn=lt[8]|0,Or=xn&8191,Yr=xn>>>13,Pn=lt[9]|0,xr=Pn&8191,fr=Pn>>>13,yr=Rt[0]|0,Mr=yr&8191,Pr=yr>>>13,Vr=Rt[1]|0,Br=Vr&8191,jr=Vr>>>13,An=Rt[2]|0,Ur=An&8191,Gr=An>>>13,wn=Rt[3]|0,Xr=wn&8191,hn=wn>>>13,In=Rt[4]|0,Jr=In&8191,fn=In>>>13,kn=Rt[5]|0,Kr=kn&8191,dn=kn>>>13,Rn=Rt[6]|0,Zr=Rn&8191,un=Rn>>>13,Mn=Rt[7]|0,rn=Mn&8191,pn=Mn>>>13,Cn=Rt[8]|0,ln=Cn&8191,vn=Cn>>>13,Bn=Rt[9]|0,an=Bn&8191,mn=Bn>>>13;b.negative=h.negative^_.negative,b.length=19,xt=Math.imul(or,Mr),g=Math.imul(or,Pr),g=g+Math.imul(cr,Mr)|0,wt=Math.imul(cr,Pr);var Sn=(Ft+xt|0)+((g&8191)<<13)|0;Ft=(wt+(g>>>13)|0)+(Sn>>>26)|0,Sn&=67108863,xt=Math.imul(Ar,Mr),g=Math.imul(Ar,Pr),g=g+Math.imul(pr,Mr)|0,wt=Math.imul(pr,Pr),xt=xt+Math.imul(or,Br)|0,g=g+Math.imul(or,jr)|0,g=g+Math.imul(cr,Br)|0,wt=wt+Math.imul(cr,jr)|0;var Tn=(Ft+xt|0)+((g&8191)<<13)|0;Ft=(wt+(g>>>13)|0)+(Tn>>>26)|0,Tn&=67108863,xt=Math.imul(Tr,Mr),g=Math.imul(Tr,Pr),g=g+Math.imul(Ir,Mr)|0,wt=Math.imul(Ir,Pr),xt=xt+Math.imul(Ar,Br)|0,g=g+Math.imul(Ar,jr)|0,g=g+Math.imul(pr,Br)|0,wt=wt+Math.imul(pr,jr)|0,xt=xt+Math.imul(or,Ur)|0,g=g+Math.imul(or,Gr)|0,g=g+Math.imul(cr,Ur)|0,wt=wt+Math.imul(cr,Gr)|0;var Un=(Ft+xt|0)+((g&8191)<<13)|0;Ft=(wt+(g>>>13)|0)+(Un>>>26)|0,Un&=67108863,xt=Math.imul(br,Mr),g=Math.imul(br,Pr),g=g+Math.imul(kr,Mr)|0,wt=Math.imul(kr,Pr),xt=xt+Math.imul(Tr,Br)|0,g=g+Math.imul(Tr,jr)|0,g=g+Math.imul(Ir,Br)|0,wt=wt+Math.imul(Ir,jr)|0,xt=xt+Math.imul(Ar,Ur)|0,g=g+Math.imul(Ar,Gr)|0,g=g+Math.imul(pr,Ur)|0,wt=wt+Math.imul(pr,Gr)|0,xt=xt+Math.imul(or,Xr)|0,g=g+Math.imul(or,hn)|0,g=g+Math.imul(cr,Xr)|0,wt=wt+Math.imul(cr,hn)|0;var jn=(Ft+xt|0)+((g&8191)<<13)|0;Ft=(wt+(g>>>13)|0)+(jn>>>26)|0,jn&=67108863,xt=Math.imul(qr,Mr),g=Math.imul(qr,Pr),g=g+Math.imul($r,Mr)|0,wt=Math.imul($r,Pr),xt=xt+Math.imul(br,Br)|0,g=g+Math.imul(br,jr)|0,g=g+Math.imul(kr,Br)|0,wt=wt+Math.imul(kr,jr)|0,xt=xt+Math.imul(Tr,Ur)|0,g=g+Math.imul(Tr,Gr)|0,g=g+Math.imul(Ir,Ur)|0,wt=wt+Math.imul(Ir,Gr)|0,xt=xt+Math.imul(Ar,Xr)|0,g=g+Math.imul(Ar,hn)|0,g=g+Math.imul(pr,Xr)|0,wt=wt+Math.imul(pr,hn)|0,xt=xt+Math.imul(or,Jr)|0,g=g+Math.imul(or,fn)|0,g=g+Math.imul(cr,Jr)|0,wt=wt+Math.imul(cr,fn)|0;var Vn=(Ft+xt|0)+((g&8191)<<13)|0;Ft=(wt+(g>>>13)|0)+(Vn>>>26)|0,Vn&=67108863,xt=Math.imul(Lr,Mr),g=Math.imul(Lr,Pr),g=g+Math.imul(Dr,Mr)|0,wt=Math.imul(Dr,Pr),xt=xt+Math.imul(qr,Br)|0,g=g+Math.imul(qr,jr)|0,g=g+Math.imul($r,Br)|0,wt=wt+Math.imul($r,jr)|0,xt=xt+Math.imul(br,Ur)|0,g=g+Math.imul(br,Gr)|0,g=g+Math.imul(kr,Ur)|0,wt=wt+Math.imul(kr,Gr)|0,xt=xt+Math.imul(Tr,Xr)|0,g=g+Math.imul(Tr,hn)|0,g=g+Math.imul(Ir,Xr)|0,wt=wt+Math.imul(Ir,hn)|0,xt=xt+Math.imul(Ar,Jr)|0,g=g+Math.imul(Ar,fn)|0,g=g+Math.imul(pr,Jr)|0,wt=wt+Math.imul(pr,fn)|0,xt=xt+Math.imul(or,Kr)|0,g=g+Math.imul(or,dn)|0,g=g+Math.imul(cr,Kr)|0,wt=wt+Math.imul(cr,dn)|0;var Nn=(Ft+xt|0)+((g&8191)<<13)|0;Ft=(wt+(g>>>13)|0)+(Nn>>>26)|0,Nn&=67108863,xt=Math.imul(Fr,Mr),g=Math.imul(Fr,Pr),g=g+Math.imul(zr,Mr)|0,wt=Math.imul(zr,Pr),xt=xt+Math.imul(Lr,Br)|0,g=g+Math.imul(Lr,jr)|0,g=g+Math.imul(Dr,Br)|0,wt=wt+Math.imul(Dr,jr)|0,xt=xt+Math.imul(qr,Ur)|0,g=g+Math.imul(qr,Gr)|0,g=g+Math.imul($r,Ur)|0,wt=wt+Math.imul($r,Gr)|0,xt=xt+Math.imul(br,Xr)|0,g=g+Math.imul(br,hn)|0,g=g+Math.imul(kr,Xr)|0,wt=wt+Math.imul(kr,hn)|0,xt=xt+Math.imul(Tr,Jr)|0,g=g+Math.imul(Tr,fn)|0,g=g+Math.imul(Ir,Jr)|0,wt=wt+Math.imul(Ir,fn)|0,xt=xt+Math.imul(Ar,Kr)|0,g=g+Math.imul(Ar,dn)|0,g=g+Math.imul(pr,Kr)|0,wt=wt+Math.imul(pr,dn)|0,xt=xt+Math.imul(or,Zr)|0,g=g+Math.imul(or,un)|0,g=g+Math.imul(cr,Zr)|0,wt=wt+Math.imul(cr,un)|0;var zn=(Ft+xt|0)+((g&8191)<<13)|0;Ft=(wt+(g>>>13)|0)+(zn>>>26)|0,zn&=67108863,xt=Math.imul(Nr,Mr),g=Math.imul(Nr,Pr),g=g+Math.imul(Wr,Mr)|0,wt=Math.imul(Wr,Pr),xt=xt+Math.imul(Fr,Br)|0,g=g+Math.imul(Fr,jr)|0,g=g+Math.imul(zr,Br)|0,wt=wt+Math.imul(zr,jr)|0,xt=xt+Math.imul(Lr,Ur)|0,g=g+Math.imul(Lr,Gr)|0,g=g+Math.imul(Dr,Ur)|0,wt=wt+Math.imul(Dr,Gr)|0,xt=xt+Math.imul(qr,Xr)|0,g=g+Math.imul(qr,hn)|0,g=g+Math.imul($r,Xr)|0,wt=wt+Math.imul($r,hn)|0,xt=xt+Math.imul(br,Jr)|0,g=g+Math.imul(br,fn)|0,g=g+Math.imul(kr,Jr)|0,wt=wt+Math.imul(kr,fn)|0,xt=xt+Math.imul(Tr,Kr)|0,g=g+Math.imul(Tr,dn)|0,g=g+Math.imul(Ir,Kr)|0,wt=wt+Math.imul(Ir,dn)|0,xt=xt+Math.imul(Ar,Zr)|0,g=g+Math.imul(Ar,un)|0,g=g+Math.imul(pr,Zr)|0,wt=wt+Math.imul(pr,un)|0,xt=xt+Math.imul(or,rn)|0,g=g+Math.imul(or,pn)|0,g=g+Math.imul(cr,rn)|0,wt=wt+Math.imul(cr,pn)|0;var Hn=(Ft+xt|0)+((g&8191)<<13)|0;Ft=(wt+(g>>>13)|0)+(Hn>>>26)|0,Hn&=67108863,xt=Math.imul(Or,Mr),g=Math.imul(Or,Pr),g=g+Math.imul(Yr,Mr)|0,wt=Math.imul(Yr,Pr),xt=xt+Math.imul(Nr,Br)|0,g=g+Math.imul(Nr,jr)|0,g=g+Math.imul(Wr,Br)|0,wt=wt+Math.imul(Wr,jr)|0,xt=xt+Math.imul(Fr,Ur)|0,g=g+Math.imul(Fr,Gr)|0,g=g+Math.imul(zr,Ur)|0,wt=wt+Math.imul(zr,Gr)|0,xt=xt+Math.imul(Lr,Xr)|0,g=g+Math.imul(Lr,hn)|0,g=g+Math.imul(Dr,Xr)|0,wt=wt+Math.imul(Dr,hn)|0,xt=xt+Math.imul(qr,Jr)|0,g=g+Math.imul(qr,fn)|0,g=g+Math.imul($r,Jr)|0,wt=wt+Math.imul($r,fn)|0,xt=xt+Math.imul(br,Kr)|0,g=g+Math.imul(br,dn)|0,g=g+Math.imul(kr,Kr)|0,wt=wt+Math.imul(kr,dn)|0,xt=xt+Math.imul(Tr,Zr)|0,g=g+Math.imul(Tr,un)|0,g=g+Math.imul(Ir,Zr)|0,wt=wt+Math.imul(Ir,un)|0,xt=xt+Math.imul(Ar,rn)|0,g=g+Math.imul(Ar,pn)|0,g=g+Math.imul(pr,rn)|0,wt=wt+Math.imul(pr,pn)|0,xt=xt+Math.imul(or,ln)|0,g=g+Math.imul(or,vn)|0,g=g+Math.imul(cr,ln)|0,wt=wt+Math.imul(cr,vn)|0;var Xn=(Ft+xt|0)+((g&8191)<<13)|0;Ft=(wt+(g>>>13)|0)+(Xn>>>26)|0,Xn&=67108863,xt=Math.imul(xr,Mr),g=Math.imul(xr,Pr),g=g+Math.imul(fr,Mr)|0,wt=Math.imul(fr,Pr),xt=xt+Math.imul(Or,Br)|0,g=g+Math.imul(Or,jr)|0,g=g+Math.imul(Yr,Br)|0,wt=wt+Math.imul(Yr,jr)|0,xt=xt+Math.imul(Nr,Ur)|0,g=g+Math.imul(Nr,Gr)|0,g=g+Math.imul(Wr,Ur)|0,wt=wt+Math.imul(Wr,Gr)|0,xt=xt+Math.imul(Fr,Xr)|0,g=g+Math.imul(Fr,hn)|0,g=g+Math.imul(zr,Xr)|0,wt=wt+Math.imul(zr,hn)|0,xt=xt+Math.imul(Lr,Jr)|0,g=g+Math.imul(Lr,fn)|0,g=g+Math.imul(Dr,Jr)|0,wt=wt+Math.imul(Dr,fn)|0,xt=xt+Math.imul(qr,Kr)|0,g=g+Math.imul(qr,dn)|0,g=g+Math.imul($r,Kr)|0,wt=wt+Math.imul($r,dn)|0,xt=xt+Math.imul(br,Zr)|0,g=g+Math.imul(br,un)|0,g=g+Math.imul(kr,Zr)|0,wt=wt+Math.imul(kr,un)|0,xt=xt+Math.imul(Tr,rn)|0,g=g+Math.imul(Tr,pn)|0,g=g+Math.imul(Ir,rn)|0,wt=wt+Math.imul(Ir,pn)|0,xt=xt+Math.imul(Ar,ln)|0,g=g+Math.imul(Ar,vn)|0,g=g+Math.imul(pr,ln)|0,wt=wt+Math.imul(pr,vn)|0,xt=xt+Math.imul(or,an)|0,g=g+Math.imul(or,mn)|0,g=g+Math.imul(cr,an)|0,wt=wt+Math.imul(cr,mn)|0;var qn=(Ft+xt|0)+((g&8191)<<13)|0;Ft=(wt+(g>>>13)|0)+(qn>>>26)|0,qn&=67108863,xt=Math.imul(xr,Br),g=Math.imul(xr,jr),g=g+Math.imul(fr,Br)|0,wt=Math.imul(fr,jr),xt=xt+Math.imul(Or,Ur)|0,g=g+Math.imul(Or,Gr)|0,g=g+Math.imul(Yr,Ur)|0,wt=wt+Math.imul(Yr,Gr)|0,xt=xt+Math.imul(Nr,Xr)|0,g=g+Math.imul(Nr,hn)|0,g=g+Math.imul(Wr,Xr)|0,wt=wt+Math.imul(Wr,hn)|0,xt=xt+Math.imul(Fr,Jr)|0,g=g+Math.imul(Fr,fn)|0,g=g+Math.imul(zr,Jr)|0,wt=wt+Math.imul(zr,fn)|0,xt=xt+Math.imul(Lr,Kr)|0,g=g+Math.imul(Lr,dn)|0,g=g+Math.imul(Dr,Kr)|0,wt=wt+Math.imul(Dr,dn)|0,xt=xt+Math.imul(qr,Zr)|0,g=g+Math.imul(qr,un)|0,g=g+Math.imul($r,Zr)|0,wt=wt+Math.imul($r,un)|0,xt=xt+Math.imul(br,rn)|0,g=g+Math.imul(br,pn)|0,g=g+Math.imul(kr,rn)|0,wt=wt+Math.imul(kr,pn)|0,xt=xt+Math.imul(Tr,ln)|0,g=g+Math.imul(Tr,vn)|0,g=g+Math.imul(Ir,ln)|0,wt=wt+Math.imul(Ir,vn)|0,xt=xt+Math.imul(Ar,an)|0,g=g+Math.imul(Ar,mn)|0,g=g+Math.imul(pr,an)|0,wt=wt+Math.imul(pr,mn)|0;var Wn=(Ft+xt|0)+((g&8191)<<13)|0;Ft=(wt+(g>>>13)|0)+(Wn>>>26)|0,Wn&=67108863,xt=Math.imul(xr,Ur),g=Math.imul(xr,Gr),g=g+Math.imul(fr,Ur)|0,wt=Math.imul(fr,Gr),xt=xt+Math.imul(Or,Xr)|0,g=g+Math.imul(Or,hn)|0,g=g+Math.imul(Yr,Xr)|0,wt=wt+Math.imul(Yr,hn)|0,xt=xt+Math.imul(Nr,Jr)|0,g=g+Math.imul(Nr,fn)|0,g=g+Math.imul(Wr,Jr)|0,wt=wt+Math.imul(Wr,fn)|0,xt=xt+Math.imul(Fr,Kr)|0,g=g+Math.imul(Fr,dn)|0,g=g+Math.imul(zr,Kr)|0,wt=wt+Math.imul(zr,dn)|0,xt=xt+Math.imul(Lr,Zr)|0,g=g+Math.imul(Lr,un)|0,g=g+Math.imul(Dr,Zr)|0,wt=wt+Math.imul(Dr,un)|0,xt=xt+Math.imul(qr,rn)|0,g=g+Math.imul(qr,pn)|0,g=g+Math.imul($r,rn)|0,wt=wt+Math.imul($r,pn)|0,xt=xt+Math.imul(br,ln)|0,g=g+Math.imul(br,vn)|0,g=g+Math.imul(kr,ln)|0,wt=wt+Math.imul(kr,vn)|0,xt=xt+Math.imul(Tr,an)|0,g=g+Math.imul(Tr,mn)|0,g=g+Math.imul(Ir,an)|0,wt=wt+Math.imul(Ir,mn)|0;var On=(Ft+xt|0)+((g&8191)<<13)|0;Ft=(wt+(g>>>13)|0)+(On>>>26)|0,On&=67108863,xt=Math.imul(xr,Xr),g=Math.imul(xr,hn),g=g+Math.imul(fr,Xr)|0,wt=Math.imul(fr,hn),xt=xt+Math.imul(Or,Jr)|0,g=g+Math.imul(Or,fn)|0,g=g+Math.imul(Yr,Jr)|0,wt=wt+Math.imul(Yr,fn)|0,xt=xt+Math.imul(Nr,Kr)|0,g=g+Math.imul(Nr,dn)|0,g=g+Math.imul(Wr,Kr)|0,wt=wt+Math.imul(Wr,dn)|0,xt=xt+Math.imul(Fr,Zr)|0,g=g+Math.imul(Fr,un)|0,g=g+Math.imul(zr,Zr)|0,wt=wt+Math.imul(zr,un)|0,xt=xt+Math.imul(Lr,rn)|0,g=g+Math.imul(Lr,pn)|0,g=g+Math.imul(Dr,rn)|0,wt=wt+Math.imul(Dr,pn)|0,xt=xt+Math.imul(qr,ln)|0,g=g+Math.imul(qr,vn)|0,g=g+Math.imul($r,ln)|0,wt=wt+Math.imul($r,vn)|0,xt=xt+Math.imul(br,an)|0,g=g+Math.imul(br,mn)|0,g=g+Math.imul(kr,an)|0,wt=wt+Math.imul(kr,mn)|0;var $n=(Ft+xt|0)+((g&8191)<<13)|0;Ft=(wt+(g>>>13)|0)+($n>>>26)|0,$n&=67108863,xt=Math.imul(xr,Jr),g=Math.imul(xr,fn),g=g+Math.imul(fr,Jr)|0,wt=Math.imul(fr,fn),xt=xt+Math.imul(Or,Kr)|0,g=g+Math.imul(Or,dn)|0,g=g+Math.imul(Yr,Kr)|0,wt=wt+Math.imul(Yr,dn)|0,xt=xt+Math.imul(Nr,Zr)|0,g=g+Math.imul(Nr,un)|0,g=g+Math.imul(Wr,Zr)|0,wt=wt+Math.imul(Wr,un)|0,xt=xt+Math.imul(Fr,rn)|0,g=g+Math.imul(Fr,pn)|0,g=g+Math.imul(zr,rn)|0,wt=wt+Math.imul(zr,pn)|0,xt=xt+Math.imul(Lr,ln)|0,g=g+Math.imul(Lr,vn)|0,g=g+Math.imul(Dr,ln)|0,wt=wt+Math.imul(Dr,vn)|0,xt=xt+Math.imul(qr,an)|0,g=g+Math.imul(qr,mn)|0,g=g+Math.imul($r,an)|0,wt=wt+Math.imul($r,mn)|0;var Dn=(Ft+xt|0)+((g&8191)<<13)|0;Ft=(wt+(g>>>13)|0)+(Dn>>>26)|0,Dn&=67108863,xt=Math.imul(xr,Kr),g=Math.imul(xr,dn),g=g+Math.imul(fr,Kr)|0,wt=Math.imul(fr,dn),xt=xt+Math.imul(Or,Zr)|0,g=g+Math.imul(Or,un)|0,g=g+Math.imul(Yr,Zr)|0,wt=wt+Math.imul(Yr,un)|0,xt=xt+Math.imul(Nr,rn)|0,g=g+Math.imul(Nr,pn)|0,g=g+Math.imul(Wr,rn)|0,wt=wt+Math.imul(Wr,pn)|0,xt=xt+Math.imul(Fr,ln)|0,g=g+Math.imul(Fr,vn)|0,g=g+Math.imul(zr,ln)|0,wt=wt+Math.imul(zr,vn)|0,xt=xt+Math.imul(Lr,an)|0,g=g+Math.imul(Lr,mn)|0,g=g+Math.imul(Dr,an)|0,wt=wt+Math.imul(Dr,mn)|0;var Ln=(Ft+xt|0)+((g&8191)<<13)|0;Ft=(wt+(g>>>13)|0)+(Ln>>>26)|0,Ln&=67108863,xt=Math.imul(xr,Zr),g=Math.imul(xr,un),g=g+Math.imul(fr,Zr)|0,wt=Math.imul(fr,un),xt=xt+Math.imul(Or,rn)|0,g=g+Math.imul(Or,pn)|0,g=g+Math.imul(Yr,rn)|0,wt=wt+Math.imul(Yr,pn)|0,xt=xt+Math.imul(Nr,ln)|0,g=g+Math.imul(Nr,vn)|0,g=g+Math.imul(Wr,ln)|0,wt=wt+Math.imul(Wr,vn)|0,xt=xt+Math.imul(Fr,an)|0,g=g+Math.imul(Fr,mn)|0,g=g+Math.imul(zr,an)|0,wt=wt+Math.imul(zr,mn)|0;var Zn=(Ft+xt|0)+((g&8191)<<13)|0;Ft=(wt+(g>>>13)|0)+(Zn>>>26)|0,Zn&=67108863,xt=Math.imul(xr,rn),g=Math.imul(xr,pn),g=g+Math.imul(fr,rn)|0,wt=Math.imul(fr,pn),xt=xt+Math.imul(Or,ln)|0,g=g+Math.imul(Or,vn)|0,g=g+Math.imul(Yr,ln)|0,wt=wt+Math.imul(Yr,vn)|0,xt=xt+Math.imul(Nr,an)|0,g=g+Math.imul(Nr,mn)|0,g=g+Math.imul(Wr,an)|0,wt=wt+Math.imul(Wr,mn)|0;var Gn=(Ft+xt|0)+((g&8191)<<13)|0;Ft=(wt+(g>>>13)|0)+(Gn>>>26)|0,Gn&=67108863,xt=Math.imul(xr,ln),g=Math.imul(xr,vn),g=g+Math.imul(fr,ln)|0,wt=Math.imul(fr,vn),xt=xt+Math.imul(Or,an)|0,g=g+Math.imul(Or,mn)|0,g=g+Math.imul(Yr,an)|0,wt=wt+Math.imul(Yr,mn)|0;var Kn=(Ft+xt|0)+((g&8191)<<13)|0;Ft=(wt+(g>>>13)|0)+(Kn>>>26)|0,Kn&=67108863,xt=Math.imul(xr,an),g=Math.imul(xr,mn),g=g+Math.imul(fr,an)|0,wt=Math.imul(fr,mn);var Qn=(Ft+xt|0)+((g&8191)<<13)|0;return Ft=(wt+(g>>>13)|0)+(Qn>>>26)|0,Qn&=67108863,kt[0]=Sn,kt[1]=Tn,kt[2]=Un,kt[3]=jn,kt[4]=Vn,kt[5]=Nn,kt[6]=zn,kt[7]=Hn,kt[8]=Xn,kt[9]=qn,kt[10]=Wn,kt[11]=On,kt[12]=$n,kt[13]=Dn,kt[14]=Ln,kt[15]=Zn,kt[16]=Gn,kt[17]=Kn,kt[18]=Qn,Ft!==0&&(kt[19]=Ft,b.length++),b};Math.imul||(Qt=Lt);function ir(Mt,h,_){_.negative=h.negative^Mt.negative,_.length=Mt.length+h.length;for(var b=0,lt=0,Rt=0;Rt<_.length-1;Rt++){var kt=lt;lt=0;for(var Ft=b&67108863,xt=Math.min(Rt,h.length-1),g=Math.max(0,Rt-Mt.length+1);g<=xt;g++){var wt=Rt-g,nr=Mt.words[wt]|0,or=h.words[g]|0,cr=nr*or,Rr=cr&67108863;kt=kt+(cr/67108864|0)|0,Rr=Rr+Ft|0,Ft=Rr&67108863,kt=kt+(Rr>>>26)|0,lt+=kt>>>26,kt&=67108863}_.words[Rt]=Ft,b=kt,kt=lt}return b!==0?_.words[Rt]=b:_.length--,_.strip()}function er(Mt,h,_){var b=new tr;return b.mulp(Mt,h,_)}c.prototype.mulTo=function(h,_){var b,lt=this.length+h.length;return this.length===10&&h.length===10?b=Qt(this,h,_):lt<63?b=Lt(this,h,_):lt<1024?b=ir(this,h,_):b=er(this,h,_),b};function tr(Mt,h){this.x=Mt,this.y=h}tr.prototype.makeRBT=function(h){for(var _=new Array(h),b=c.prototype._countBits(h)-1,lt=0;lt<h;lt++)_[lt]=this.revBin(lt,b,h);return _},tr.prototype.revBin=function(h,_,b){if(h===0||h===b-1)return h;for(var lt=0,Rt=0;Rt<_;Rt++)lt|=(h&1)<<_-Rt-1,h>>=1;return lt},tr.prototype.permute=function(h,_,b,lt,Rt,kt){for(var Ft=0;Ft<kt;Ft++)lt[Ft]=_[h[Ft]],Rt[Ft]=b[h[Ft]]},tr.prototype.transform=function(h,_,b,lt,Rt,kt){this.permute(kt,h,_,b,lt,Rt);for(var Ft=1;Ft<Rt;Ft<<=1)for(var xt=Ft<<1,g=Math.cos(2*Math.PI/xt),wt=Math.sin(2*Math.PI/xt),nr=0;nr<Rt;nr+=xt)for(var or=g,cr=wt,Rr=0;Rr<Ft;Rr++){var Ar=b[nr+Rr],pr=lt[nr+Rr],wr=b[nr+Rr+Ft],Tr=lt[nr+Rr+Ft],Ir=or*wr-cr*Tr;Tr=or*Tr+cr*wr,wr=Ir,b[nr+Rr]=Ar+wr,lt[nr+Rr]=pr+Tr,b[nr+Rr+Ft]=Ar-wr,lt[nr+Rr+Ft]=pr-Tr,Rr!==xt&&(Ir=g*or-wt*cr,cr=g*cr+wt*or,or=Ir)}},tr.prototype.guessLen13b=function(h,_){var b=Math.max(_,h)|1,lt=b&1,Rt=0;for(b=b/2|0;b;b=b>>>1)Rt++;return 1<<Rt+1+lt},tr.prototype.conjugate=function(h,_,b){if(!(b<=1))for(var lt=0;lt<b/2;lt++){var Rt=h[lt];h[lt]=h[b-lt-1],h[b-lt-1]=Rt,Rt=_[lt],_[lt]=-_[b-lt-1],_[b-lt-1]=-Rt}},tr.prototype.normalize13b=function(h,_){for(var b=0,lt=0;lt<_/2;lt++){var Rt=Math.round(h[2*lt+1]/_)*8192+Math.round(h[2*lt]/_)+b;h[lt]=Rt&67108863,Rt<67108864?b=0:b=Rt/67108864|0}return h},tr.prototype.convert13b=function(h,_,b,lt){for(var Rt=0,kt=0;kt<_;kt++)Rt=Rt+(h[kt]|0),b[2*kt]=Rt&8191,Rt=Rt>>>13,b[2*kt+1]=Rt&8191,Rt=Rt>>>13;for(kt=2*_;kt<lt;++kt)b[kt]=0;a(Rt===0),a((Rt&-8192)===0)},tr.prototype.stub=function(h){for(var _=new Array(h),b=0;b<h;b++)_[b]=0;return _},tr.prototype.mulp=function(h,_,b){var lt=2*this.guessLen13b(h.length,_.length),Rt=this.makeRBT(lt),kt=this.stub(lt),Ft=new Array(lt),xt=new Array(lt),g=new Array(lt),wt=new Array(lt),nr=new Array(lt),or=new Array(lt),cr=b.words;cr.length=lt,this.convert13b(h.words,h.length,Ft,lt),this.convert13b(_.words,_.length,wt,lt),this.transform(Ft,kt,xt,g,lt,Rt),this.transform(wt,kt,nr,or,lt,Rt);for(var Rr=0;Rr<lt;Rr++){var Ar=xt[Rr]*nr[Rr]-g[Rr]*or[Rr];g[Rr]=xt[Rr]*or[Rr]+g[Rr]*nr[Rr],xt[Rr]=Ar}return this.conjugate(xt,g,lt),this.transform(xt,g,cr,kt,lt,Rt),this.conjugate(cr,kt,lt),this.normalize13b(cr,lt),b.negative=h.negative^_.negative,b.length=h.length+_.length,b.strip()},c.prototype.mul=function(h){var _=new c(null);return _.words=new Array(this.length+h.length),this.mulTo(h,_)},c.prototype.mulf=function(h){var _=new c(null);return _.words=new Array(this.length+h.length),er(this,h,_)},c.prototype.imul=function(h){return this.clone().mulTo(h,this)},c.prototype.imuln=function(h){a(typeof h=="number"),a(h<67108864);for(var _=0,b=0;b<this.length;b++){var lt=(this.words[b]|0)*h,Rt=(lt&67108863)+(_&67108863);_>>=26,_+=lt/67108864|0,_+=Rt>>>26,this.words[b]=Rt&67108863}return _!==0&&(this.words[b]=_,this.length++),this.length=h===0?1:this.length,this},c.prototype.muln=function(h){return this.clone().imuln(h)},c.prototype.sqr=function(){return this.mul(this)},c.prototype.isqr=function(){return this.imul(this.clone())},c.prototype.pow=function(h){var _=Ot(h);if(_.length===0)return new c(1);for(var b=this,lt=0;lt<_.length&&_[lt]===0;lt++,b=b.sqr());if(++lt<_.length)for(var Rt=b.sqr();lt<_.length;lt++,Rt=Rt.sqr())_[lt]!==0&&(b=b.mul(Rt));return b},c.prototype.iushln=function(h){a(typeof h=="number"&&h>=0);var _=h%26,b=(h-_)/26,lt=67108863>>>26-_<<26-_,Rt;if(_!==0){var kt=0;for(Rt=0;Rt<this.length;Rt++){var Ft=this.words[Rt]&lt,xt=(this.words[Rt]|0)-Ft<<_;this.words[Rt]=xt|kt,kt=Ft>>>26-_}kt&&(this.words[Rt]=kt,this.length++)}if(b!==0){for(Rt=this.length-1;Rt>=0;Rt--)this.words[Rt+b]=this.words[Rt];for(Rt=0;Rt<b;Rt++)this.words[Rt]=0;this.length+=b}return this.strip()},c.prototype.ishln=function(h){return a(this.negative===0),this.iushln(h)},c.prototype.iushrn=function(h,_,b){a(typeof h=="number"&&h>=0);var lt;_?lt=(_-_%26)/26:lt=0;var Rt=h%26,kt=Math.min((h-Rt)/26,this.length),Ft=67108863^67108863>>>Rt<<Rt,xt=b;if(lt-=kt,lt=Math.max(0,lt),xt){for(var g=0;g<kt;g++)xt.words[g]=this.words[g];xt.length=kt}if(kt!==0)if(this.length>kt)for(this.length-=kt,g=0;g<this.length;g++)this.words[g]=this.words[g+kt];else this.words[0]=0,this.length=1;var wt=0;for(g=this.length-1;g>=0&&(wt!==0||g>=lt);g--){var nr=this.words[g]|0;this.words[g]=wt<<26-Rt|nr>>>Rt,wt=nr&Ft}return xt&&wt!==0&&(xt.words[xt.length++]=wt),this.length===0&&(this.words[0]=0,this.length=1),this.strip()},c.prototype.ishrn=function(h,_,b){return a(this.negative===0),this.iushrn(h,_,b)},c.prototype.shln=function(h){return this.clone().ishln(h)},c.prototype.ushln=function(h){return this.clone().iushln(h)},c.prototype.shrn=function(h){return this.clone().ishrn(h)},c.prototype.ushrn=function(h){return this.clone().iushrn(h)},c.prototype.testn=function(h){a(typeof h=="number"&&h>=0);var _=h%26,b=(h-_)/26,lt=1<<_;if(this.length<=b)return!1;var Rt=this.words[b];return!!(Rt&lt)},c.prototype.imaskn=function(h){a(typeof h=="number"&&h>=0);var _=h%26,b=(h-_)/26;if(a(this.negative===0,"imaskn works only with positive numbers"),this.length<=b)return this;if(_!==0&&b++,this.length=Math.min(b,this.length),_!==0){var lt=67108863^67108863>>>_<<_;this.words[this.length-1]&=lt}return this.strip()},c.prototype.maskn=function(h){return this.clone().imaskn(h)},c.prototype.iaddn=function(h){return a(typeof h=="number"),a(h<67108864),h<0?this.isubn(-h):this.negative!==0?this.length===1&&(this.words[0]|0)<h?(this.words[0]=h-(this.words[0]|0),this.negative=0,this):(this.negative=0,this.isubn(h),this.negative=1,this):this._iaddn(h)},c.prototype._iaddn=function(h){this.words[0]+=h;for(var _=0;_<this.length&&this.words[_]>=67108864;_++)this.words[_]-=67108864,_===this.length-1?this.words[_+1]=1:this.words[_+1]++;return this.length=Math.max(this.length,_+1),this},c.prototype.isubn=function(h){if(a(typeof h=="number"),a(h<67108864),h<0)return this.iaddn(-h);if(this.negative!==0)return this.negative=0,this.iaddn(h),this.negative=1,this;if(this.words[0]-=h,this.length===1&&this.words[0]<0)this.words[0]=-this.words[0],this.negative=1;else for(var _=0;_<this.length&&this.words[_]<0;_++)this.words[_]+=67108864,this.words[_+1]-=1;return this.strip()},c.prototype.addn=function(h){return this.clone().iaddn(h)},c.prototype.subn=function(h){return this.clone().isubn(h)},c.prototype.iabs=function(){return this.negative=0,this},c.prototype.abs=function(){return this.clone().iabs()},c.prototype._ishlnsubmul=function(h,_,b){var lt=h.length+b,Rt;this._expand(lt);var kt,Ft=0;for(Rt=0;Rt<h.length;Rt++){kt=(this.words[Rt+b]|0)+Ft;var xt=(h.words[Rt]|0)*_;kt-=xt&67108863,Ft=(kt>>26)-(xt/67108864|0),this.words[Rt+b]=kt&67108863}for(;Rt<this.length-b;Rt++)kt=(this.words[Rt+b]|0)+Ft,Ft=kt>>26,this.words[Rt+b]=kt&67108863;if(Ft===0)return this.strip();for(a(Ft===-1),Ft=0,Rt=0;Rt<this.length;Rt++)kt=-(this.words[Rt]|0)+Ft,Ft=kt>>26,this.words[Rt]=kt&67108863;return this.negative=1,this.strip()},c.prototype._wordDiv=function(h,_){var b=this.length-h.length,lt=this.clone(),Rt=h,kt=Rt.words[Rt.length-1]|0,Ft=this._countBits(kt);b=26-Ft,b!==0&&(Rt=Rt.ushln(b),lt.iushln(b),kt=Rt.words[Rt.length-1]|0);var xt=lt.length-Rt.length,g;if(_!=="mod"){g=new c(null),g.length=xt+1,g.words=new Array(g.length);for(var wt=0;wt<g.length;wt++)g.words[wt]=0}var nr=lt.clone()._ishlnsubmul(Rt,1,xt);nr.negative===0&&(lt=nr,g&&(g.words[xt]=1));for(var or=xt-1;or>=0;or--){var cr=(lt.words[Rt.length+or]|0)*67108864+(lt.words[Rt.length+or-1]|0);for(cr=Math.min(cr/kt|0,67108863),lt._ishlnsubmul(Rt,cr,or);lt.negative!==0;)cr--,lt.negative=0,lt._ishlnsubmul(Rt,1,or),lt.isZero()||(lt.negative^=1);g&&(g.words[or]=cr)}return g&&g.strip(),lt.strip(),_!=="div"&&b!==0&&lt.iushrn(b),{div:g||null,mod:lt}},c.prototype.divmod=function(h,_,b){if(a(!h.isZero()),this.isZero())return{div:new c(0),mod:new c(0)};var lt,Rt,kt;return this.negative!==0&&h.negative===0?(kt=this.neg().divmod(h,_),_!=="mod"&&(lt=kt.div.neg()),_!=="div"&&(Rt=kt.mod.neg(),b&&Rt.negative!==0&&Rt.iadd(h)),{div:lt,mod:Rt}):this.negative===0&&h.negative!==0?(kt=this.divmod(h.neg(),_),_!=="mod"&&(lt=kt.div.neg()),{div:lt,mod:kt.mod}):this.negative&h.negative?(kt=this.neg().divmod(h.neg(),_),_!=="div"&&(Rt=kt.mod.neg(),b&&Rt.negative!==0&&Rt.isub(h)),{div:kt.div,mod:Rt}):h.length>this.length||this.cmp(h)<0?{div:new c(0),mod:this}:h.length===1?_==="div"?{div:this.divn(h.words[0]),mod:null}:_==="mod"?{div:null,mod:new c(this.modn(h.words[0]))}:{div:this.divn(h.words[0]),mod:new c(this.modn(h.words[0]))}:this._wordDiv(h,_)},c.prototype.div=function(h){return this.divmod(h,"div",!1).div},c.prototype.mod=function(h){return this.divmod(h,"mod",!1).mod},c.prototype.umod=function(h){return this.divmod(h,"mod",!0).mod},c.prototype.divRound=function(h){var _=this.divmod(h);if(_.mod.isZero())return _.div;var b=_.div.negative!==0?_.mod.isub(h):_.mod,lt=h.ushrn(1),Rt=h.andln(1),kt=b.cmp(lt);return kt<0||Rt===1&&kt===0?_.div:_.div.negative!==0?_.div.isubn(1):_.div.iaddn(1)},c.prototype.modn=function(h){a(h<=67108863);for(var _=(1<<26)%h,b=0,lt=this.length-1;lt>=0;lt--)b=(_*b+(this.words[lt]|0))%h;return b},c.prototype.idivn=function(h){a(h<=67108863);for(var _=0,b=this.length-1;b>=0;b--){var lt=(this.words[b]|0)+_*67108864;this.words[b]=lt/h|0,_=lt%h}return this.strip()},c.prototype.divn=function(h){return this.clone().idivn(h)},c.prototype.egcd=function(h){a(h.negative===0),a(!h.isZero());var _=this,b=h.clone();_.negative!==0?_=_.umod(h):_=_.clone();for(var lt=new c(1),Rt=new c(0),kt=new c(0),Ft=new c(1),xt=0;_.isEven()&&b.isEven();)_.iushrn(1),b.iushrn(1),++xt;for(var g=b.clone(),wt=_.clone();!_.isZero();){for(var nr=0,or=1;!(_.words[0]&or)&&nr<26;++nr,or<<=1);if(nr>0)for(_.iushrn(nr);nr-- >0;)(lt.isOdd()||Rt.isOdd())&&(lt.iadd(g),Rt.isub(wt)),lt.iushrn(1),Rt.iushrn(1);for(var cr=0,Rr=1;!(b.words[0]&Rr)&&cr<26;++cr,Rr<<=1);if(cr>0)for(b.iushrn(cr);cr-- >0;)(kt.isOdd()||Ft.isOdd())&&(kt.iadd(g),Ft.isub(wt)),kt.iushrn(1),Ft.iushrn(1);_.cmp(b)>=0?(_.isub(b),lt.isub(kt),Rt.isub(Ft)):(b.isub(_),kt.isub(lt),Ft.isub(Rt))}return{a:kt,b:Ft,gcd:b.iushln(xt)}},c.prototype._invmp=function(h){a(h.negative===0),a(!h.isZero());var _=this,b=h.clone();_.negative!==0?_=_.umod(h):_=_.clone();for(var lt=new c(1),Rt=new c(0),kt=b.clone();_.cmpn(1)>0&&b.cmpn(1)>0;){for(var Ft=0,xt=1;!(_.words[0]&xt)&&Ft<26;++Ft,xt<<=1);if(Ft>0)for(_.iushrn(Ft);Ft-- >0;)lt.isOdd()&&lt.iadd(kt),lt.iushrn(1);for(var g=0,wt=1;!(b.words[0]&wt)&&g<26;++g,wt<<=1);if(g>0)for(b.iushrn(g);g-- >0;)Rt.isOdd()&&Rt.iadd(kt),Rt.iushrn(1);_.cmp(b)>=0?(_.isub(b),lt.isub(Rt)):(b.isub(_),Rt.isub(lt))}var nr;return _.cmpn(1)===0?nr=lt:nr=Rt,nr.cmpn(0)<0&&nr.iadd(h),nr},c.prototype.gcd=function(h){if(this.isZero())return h.abs();if(h.isZero())return this.abs();var _=this.clone(),b=h.clone();_.negative=0,b.negative=0;for(var lt=0;_.isEven()&&b.isEven();lt++)_.iushrn(1),b.iushrn(1);do{for(;_.isEven();)_.iushrn(1);for(;b.isEven();)b.iushrn(1);var Rt=_.cmp(b);if(Rt<0){var kt=_;_=b,b=kt}else if(Rt===0||b.cmpn(1)===0)break;_.isub(b)}while(!0);return b.iushln(lt)},c.prototype.invm=function(h){return this.egcd(h).a.umod(h)},c.prototype.isEven=function(){return(this.words[0]&1)===0},c.prototype.isOdd=function(){return(this.words[0]&1)===1},c.prototype.andln=function(h){return this.words[0]&h},c.prototype.bincn=function(h){a(typeof h=="number");var _=h%26,b=(h-_)/26,lt=1<<_;if(this.length<=b)return this._expand(b+1),this.words[b]|=lt,this;for(var Rt=lt,kt=b;Rt!==0&&kt<this.length;kt++){var Ft=this.words[kt]|0;Ft+=Rt,Rt=Ft>>>26,Ft&=67108863,this.words[kt]=Ft}return Rt!==0&&(this.words[kt]=Rt,this.length++),this},c.prototype.isZero=function(){return this.length===1&&this.words[0]===0},c.prototype.cmpn=function(h){var _=h<0;if(this.negative!==0&&!_)return-1;if(this.negative===0&&_)return 1;this.strip();var b;if(this.length>1)b=1;else{_&&(h=-h),a(h<=67108863,"Number is too big");var lt=this.words[0]|0;b=lt===h?0:lt<h?-1:1}return this.negative!==0?-b|0:b},c.prototype.cmp=function(h){if(this.negative!==0&&h.negative===0)return-1;if(this.negative===0&&h.negative!==0)return 1;var _=this.ucmp(h);return this.negative!==0?-_|0:_},c.prototype.ucmp=function(h){if(this.length>h.length)return 1;if(this.length<h.length)return-1;for(var _=0,b=this.length-1;b>=0;b--){var lt=this.words[b]|0,Rt=h.words[b]|0;if(lt!==Rt){lt<Rt?_=-1:lt>Rt&&(_=1);break}}return _},c.prototype.gtn=function(h){return this.cmpn(h)===1},c.prototype.gt=function(h){return this.cmp(h)===1},c.prototype.gten=function(h){return this.cmpn(h)>=0},c.prototype.gte=function(h){return this.cmp(h)>=0},c.prototype.ltn=function(h){return this.cmpn(h)===-1},c.prototype.lt=function(h){return this.cmp(h)===-1},c.prototype.lten=function(h){return this.cmpn(h)<=0},c.prototype.lte=function(h){return this.cmp(h)<=0},c.prototype.eqn=function(h){return this.cmpn(h)===0},c.prototype.eq=function(h){return this.cmp(h)===0},c.red=function(h){return new lr(h)},c.prototype.toRed=function(h){return a(!this.red,"Already a number in reduction context"),a(this.negative===0,"red works only with positives"),h.convertTo(this)._forceRed(h)},c.prototype.fromRed=function(){return a(this.red,"fromRed works only with numbers in reduction context"),this.red.convertFrom(this)},c.prototype._forceRed=function(h){return this.red=h,this},c.prototype.forceRed=function(h){return a(!this.red,"Already a number in reduction context"),this._forceRed(h)},c.prototype.redAdd=function(h){return a(this.red,"redAdd works only with red numbers"),this.red.add(this,h)},c.prototype.redIAdd=function(h){return a(this.red,"redIAdd works only with red numbers"),this.red.iadd(this,h)},c.prototype.redSub=function(h){return a(this.red,"redSub works only with red numbers"),this.red.sub(this,h)},c.prototype.redISub=function(h){return a(this.red,"redISub works only with red numbers"),this.red.isub(this,h)},c.prototype.redShl=function(h){return a(this.red,"redShl works only with red numbers"),this.red.shl(this,h)},c.prototype.redMul=function(h){return a(this.red,"redMul works only with red numbers"),this.red._verify2(this,h),this.red.mul(this,h)},c.prototype.redIMul=function(h){return a(this.red,"redMul works only with red numbers"),this.red._verify2(this,h),this.red.imul(this,h)},c.prototype.redSqr=function(){return a(this.red,"redSqr works only with red numbers"),this.red._verify1(this),this.red.sqr(this)},c.prototype.redISqr=function(){return a(this.red,"redISqr works only with red numbers"),this.red._verify1(this),this.red.isqr(this)},c.prototype.redSqrt=function(){return a(this.red,"redSqrt works only with red numbers"),this.red._verify1(this),this.red.sqrt(this)},c.prototype.redInvm=function(){return a(this.red,"redInvm works only with red numbers"),this.red._verify1(this),this.red.invm(this)},c.prototype.redNeg=function(){return a(this.red,"redNeg works only with red numbers"),this.red._verify1(this),this.red.neg(this)},c.prototype.redPow=function(h){return a(this.red&&!h.red,"redPow(normalNum)"),this.red._verify1(this),this.red.pow(this,h)};var sr={k256:null,p224:null,p192:null,p25519:null};function ar(Mt,h){this.name=Mt,this.p=new c(h,16),this.n=this.p.bitLength(),this.k=new c(1).iushln(this.n).isub(this.p),this.tmp=this._tmp()}ar.prototype._tmp=function(){var h=new c(null);return h.words=new Array(Math.ceil(this.n/13)),h},ar.prototype.ireduce=function(h){var _=h,b;do this.split(_,this.tmp),_=this.imulK(_),_=_.iadd(this.tmp),b=_.bitLength();while(b>this.n);var lt=b<this.n?-1:_.ucmp(this.p);return lt===0?(_.words[0]=0,_.length=1):lt>0?_.isub(this.p):_.strip!==void 0?_.strip():_._strip(),_},ar.prototype.split=function(h,_){h.iushrn(this.n,0,_)},ar.prototype.imulK=function(h){return h.imul(this.k)};function hr(){ar.call(this,"k256","ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff fffffffe fffffc2f")}d(hr,ar),hr.prototype.split=function(h,_){for(var b=4194303,lt=Math.min(h.length,9),Rt=0;Rt<lt;Rt++)_.words[Rt]=h.words[Rt];if(_.length=lt,h.length<=9){h.words[0]=0,h.length=1;return}var kt=h.words[9];for(_.words[_.length++]=kt&b,Rt=10;Rt<h.length;Rt++){var Ft=h.words[Rt]|0;h.words[Rt-10]=(Ft&b)<<4|kt>>>22,kt=Ft}kt>>>=22,h.words[Rt-10]=kt,kt===0&&h.length>10?h.length-=10:h.length-=9},hr.prototype.imulK=function(h){h.words[h.length]=0,h.words[h.length+1]=0,h.length+=2;for(var _=0,b=0;b<h.length;b++){var lt=h.words[b]|0;_+=lt*977,h.words[b]=_&67108863,_=lt*64+(_/67108864|0)}return h.words[h.length-1]===0&&(h.length--,h.words[h.length-1]===0&&h.length--),h};function _r(){ar.call(this,"p224","ffffffff ffffffff ffffffff ffffffff 00000000 00000000 00000001")}d(_r,ar);function dr(){ar.call(this,"p192","ffffffff ffffffff ffffffff fffffffe ffffffff ffffffff")}d(dr,ar);function ur(){ar.call(this,"25519","7fffffffffffffff ffffffffffffffff ffffffffffffffff ffffffffffffffed")}d(ur,ar),ur.prototype.imulK=function(h){for(var _=0,b=0;b<h.length;b++){var lt=(h.words[b]|0)*19+_,Rt=lt&67108863;lt>>>=26,h.words[b]=Rt,_=lt}return _!==0&&(h.words[h.length++]=_),h},c._prime=function(h){if(sr[h])return sr[h];var _;if(h==="k256")_=new hr;else if(h==="p224")_=new _r;else if(h==="p192")_=new dr;else if(h==="p25519")_=new ur;else throw new Error("Unknown prime "+h);return sr[h]=_,_};function lr(Mt){if(typeof Mt=="string"){var h=c._prime(Mt);this.m=h.p,this.prime=h}else a(Mt.gtn(1),"modulus must be greater than 1"),this.m=Mt,this.prime=null}lr.prototype._verify1=function(h){a(h.negative===0,"red works only with positives"),a(h.red,"red works only with red numbers")},lr.prototype._verify2=function(h,_){a((h.negative|_.negative)===0,"red works only with positives"),a(h.red&&h.red===_.red,"red works only with red numbers")},lr.prototype.imod=function(h){return this.prime?this.prime.ireduce(h)._forceRed(this):h.umod(this.m)._forceRed(this)},lr.prototype.neg=function(h){return h.isZero()?h.clone():this.m.sub(h)._forceRed(this)},lr.prototype.add=function(h,_){this._verify2(h,_);var b=h.add(_);return b.cmp(this.m)>=0&&b.isub(this.m),b._forceRed(this)},lr.prototype.iadd=function(h,_){this._verify2(h,_);var b=h.iadd(_);return b.cmp(this.m)>=0&&b.isub(this.m),b},lr.prototype.sub=function(h,_){this._verify2(h,_);var b=h.sub(_);return b.cmpn(0)<0&&b.iadd(this.m),b._forceRed(this)},lr.prototype.isub=function(h,_){this._verify2(h,_);var b=h.isub(_);return b.cmpn(0)<0&&b.iadd(this.m),b},lr.prototype.shl=function(h,_){return this._verify1(h),this.imod(h.ushln(_))},lr.prototype.imul=function(h,_){return this._verify2(h,_),this.imod(h.imul(_))},lr.prototype.mul=function(h,_){return this._verify2(h,_),this.imod(h.mul(_))},lr.prototype.isqr=function(h){return this.imul(h,h.clone())},lr.prototype.sqr=function(h){return this.mul(h,h)},lr.prototype.sqrt=function(h){if(h.isZero())return h.clone();var _=this.m.andln(3);if(a(_%2===1),_===3){var b=this.m.add(new c(1)).iushrn(2);return this.pow(h,b)}for(var lt=this.m.subn(1),Rt=0;!lt.isZero()&&lt.andln(1)===0;)Rt++,lt.iushrn(1);a(!lt.isZero());var kt=new c(1).toRed(this),Ft=kt.redNeg(),xt=this.m.subn(1).iushrn(1),g=this.m.bitLength();for(g=new c(2*g*g).toRed(this);this.pow(g,xt).cmp(Ft)!==0;)g.redIAdd(Ft);for(var wt=this.pow(g,lt),nr=this.pow(h,lt.addn(1).iushrn(1)),or=this.pow(h,lt),cr=Rt;or.cmp(kt)!==0;){for(var Rr=or,Ar=0;Rr.cmp(kt)!==0;Ar++)Rr=Rr.redSqr();a(Ar<cr);var pr=this.pow(wt,new c(1).iushln(cr-Ar-1));nr=nr.redMul(pr),wt=pr.redSqr(),or=or.redMul(wt),cr=Ar}return nr},lr.prototype.invm=function(h){var _=h._invmp(this.m);return _.negative!==0?(_.negative=0,this.imod(_).redNeg()):this.imod(_)},lr.prototype.pow=function(h,_){if(_.isZero())return new c(1).toRed(this);if(_.cmpn(1)===0)return h.clone();var b=4,lt=new Array(1<<b);lt[0]=new c(1).toRed(this),lt[1]=h;for(var Rt=2;Rt<lt.length;Rt++)lt[Rt]=this.mul(lt[Rt-1],h);var kt=lt[0],Ft=0,xt=0,g=_.bitLength()%26;for(g===0&&(g=26),Rt=_.length-1;Rt>=0;Rt--){for(var wt=_.words[Rt],nr=g-1;nr>=0;nr--){var or=wt>>nr&1;if(kt!==lt[0]&&(kt=this.sqr(kt)),or===0&&Ft===0){xt=0;continue}Ft<<=1,Ft|=or,xt++,!(xt!==b&&(Rt!==0||nr!==0))&&(kt=this.mul(kt,lt[Ft]),xt=0,Ft=0)}g=26}return kt},lr.prototype.convertTo=function(h){var _=h.umod(this.m);return _===h?_.clone():_},lr.prototype.convertFrom=function(h){var _=h.clone();return _.red=null,_},c.mont=function(h){return new gr(h)};function gr(Mt){lr.call(this,Mt),this.shift=this.m.bitLength(),this.shift%26!==0&&(this.shift+=26-this.shift%26),this.r=new c(1).iushln(this.shift),this.r2=this.imod(this.r.sqr()),this.rinv=this.r._invmp(this.m),this.minv=this.rinv.mul(this.r).isubn(1).div(this.m),this.minv=this.minv.umod(this.r),this.minv=this.r.sub(this.minv)}d(gr,lr),gr.prototype.convertTo=function(h){return this.imod(h.ushln(this.shift))},gr.prototype.convertFrom=function(h){var _=this.imod(h.mul(this.rinv));return _.red=null,_},gr.prototype.imul=function(h,_){if(h.isZero()||_.isZero())return h.words[0]=0,h.length=1,h;var b=h.imul(_),lt=b.maskn(this.shift).mul(this.minv).imaskn(this.shift).mul(this.m),Rt=b.isub(lt).iushrn(this.shift),kt=Rt;return Rt.cmp(this.m)>=0?kt=Rt.isub(this.m):Rt.cmpn(0)<0&&(kt=Rt.iadd(this.m)),kt._forceRed(this)},gr.prototype.mul=function(h,_){if(h.isZero()||_.isZero())return new c(0)._forceRed(this);var b=h.mul(_),lt=b.maskn(this.shift).mul(this.minv).imaskn(this.shift).mul(this.m),Rt=b.isub(lt).iushrn(this.shift),kt=Rt;return Rt.cmp(this.m)>=0?kt=Rt.isub(this.m):Rt.cmpn(0)<0&&(kt=Rt.iadd(this.m)),kt._forceRed(this)},gr.prototype.invm=function(h){var _=this.imod(h._invmp(this.m).mul(this.r2));return _._forceRed(this)}})(s,commonjsGlobal$2)}(bn$1)),bn$1.exports}var browser$3,hasRequiredBrowser$2;function requireBrowser$2(){if(hasRequiredBrowser$2)return browser$3;hasRequiredBrowser$2=1;var s=requireElliptic(),e=requireBn$1();browser$3=function(j){return new a(j)};var o={secp256k1:{name:"secp256k1",byteLength:32},secp224r1:{name:"p224",byteLength:28},prime256v1:{name:"p256",byteLength:32},prime192v1:{name:"p192",byteLength:24},ed25519:{name:"ed25519",byteLength:32},secp384r1:{name:"p384",byteLength:48},secp521r1:{name:"p521",byteLength:66}};o.p224=o.secp224r1,o.p256=o.secp256r1=o.prime256v1,o.p192=o.secp192r1=o.prime192v1,o.p384=o.secp384r1,o.p521=o.secp521r1;function a(c){this.curveType=o[c],this.curveType||(this.curveType={name:c}),this.curve=new s.ec(this.curveType.name),this.keys=void 0}a.prototype.generateKeys=function(c,j){return this.keys=this.curve.genKeyPair(),this.getPublicKey(c,j)},a.prototype.computeSecret=function(c,j,_e){j=j||"utf8",Buffer.isBuffer(c)||(c=new Buffer(c,j));var pt=this.curve.keyFromPublic(c).getPublic(),yt=pt.mul(this.keys.getPrivate()).getX();return d(yt,_e,this.curveType.byteLength)},a.prototype.getPublicKey=function(c,j){var _e=this.keys.getPublic(j==="compressed",!0);return j==="hybrid"&&(_e[_e.length-1]%2?_e[0]=7:_e[0]=6),d(_e,c)},a.prototype.getPrivateKey=function(c){return d(this.keys.getPrivate(),c)},a.prototype.setPublicKey=function(c,j){return j=j||"utf8",Buffer.isBuffer(c)||(c=new Buffer(c,j)),this.keys._importPublic(c),this},a.prototype.setPrivateKey=function(c,j){j=j||"utf8",Buffer.isBuffer(c)||(c=new Buffer(c,j));var _e=new e(c);return _e=_e.toString(16),this.keys=this.curve.genKeyPair(),this.keys._importPrivate(_e),this};function d(c,j,_e){Array.isArray(c)||(c=c.toArray());var pt=new Buffer(c);if(_e&&pt.length<_e){var yt=new Buffer(_e-pt.length);yt.fill(0),pt=Buffer.concat([yt,pt])}return j?pt.toString(j):pt}return browser$3}var browser$2={},mgf,hasRequiredMgf;function requireMgf(){if(hasRequiredMgf)return mgf;hasRequiredMgf=1;var s=requireBrowser$9(),e=requireSafeBuffer$1().Buffer;mgf=function(a,d){for(var c=e.alloc(0),j=0,_e;c.length<d;)_e=o(j++),c=e.concat([c,s("sha1").update(a).update(_e).digest()]);return c.slice(0,d)};function o(a){var d=e.allocUnsafe(4);return d.writeUInt32BE(a,0),d}return mgf}var xor,hasRequiredXor;function requireXor(){return hasRequiredXor||(hasRequiredXor=1,xor=function(e,o){for(var a=e.length,d=-1;++d<a;)e[d]^=o[d];return e}),xor}var bn={exports:{}};bn.exports;var hasRequiredBn;function requireBn(){return hasRequiredBn||(hasRequiredBn=1,function(s){(function(e,o){function a(Mt,h){if(!Mt)throw new Error(h||"Assertion failed")}function d(Mt,h){Mt.super_=h;var _=function(){};_.prototype=h.prototype,Mt.prototype=new _,Mt.prototype.constructor=Mt}function c(Mt,h,_){if(c.isBN(Mt))return Mt;this.negative=0,this.words=null,this.length=0,this.red=null,Mt!==null&&((h==="le"||h==="be")&&(_=h,h=10),this._init(Mt||0,h||10,_||"be"))}typeof e=="object"?e.exports=c:o.BN=c,c.BN=c,c.wordSize=26;var j;try{typeof window<"u"&&typeof window.Buffer<"u"?j=window.Buffer:j=require$$0$1.Buffer}catch{}c.isBN=function(h){return h instanceof c?!0:h!==null&&typeof h=="object"&&h.constructor.wordSize===c.wordSize&&Array.isArray(h.words)},c.max=function(h,_){return h.cmp(_)>0?h:_},c.min=function(h,_){return h.cmp(_)<0?h:_},c.prototype._init=function(h,_,b){if(typeof h=="number")return this._initNumber(h,_,b);if(typeof h=="object")return this._initArray(h,_,b);_==="hex"&&(_=16),a(_===(_|0)&&_>=2&&_<=36),h=h.toString().replace(/\s+/g,"");var lt=0;h[0]==="-"&&(lt++,this.negative=1),lt<h.length&&(_===16?this._parseHex(h,lt,b):(this._parseBase(h,_,lt),b==="le"&&this._initArray(this.toArray(),_,b)))},c.prototype._initNumber=function(h,_,b){h<0&&(this.negative=1,h=-h),h<67108864?(this.words=[h&67108863],this.length=1):h<4503599627370496?(this.words=[h&67108863,h/67108864&67108863],this.length=2):(a(h<9007199254740992),this.words=[h&67108863,h/67108864&67108863,1],this.length=3),b==="le"&&this._initArray(this.toArray(),_,b)},c.prototype._initArray=function(h,_,b){if(a(typeof h.length=="number"),h.length<=0)return this.words=[0],this.length=1,this;this.length=Math.ceil(h.length/3),this.words=new Array(this.length);for(var lt=0;lt<this.length;lt++)this.words[lt]=0;var Rt,kt,Ft=0;if(b==="be")for(lt=h.length-1,Rt=0;lt>=0;lt-=3)kt=h[lt]|h[lt-1]<<8|h[lt-2]<<16,this.words[Rt]|=kt<<Ft&67108863,this.words[Rt+1]=kt>>>26-Ft&67108863,Ft+=24,Ft>=26&&(Ft-=26,Rt++);else if(b==="le")for(lt=0,Rt=0;lt<h.length;lt+=3)kt=h[lt]|h[lt+1]<<8|h[lt+2]<<16,this.words[Rt]|=kt<<Ft&67108863,this.words[Rt+1]=kt>>>26-Ft&67108863,Ft+=24,Ft>=26&&(Ft-=26,Rt++);return this.strip()};function _e(Mt,h){var _=Mt.charCodeAt(h);return _>=65&&_<=70?_-55:_>=97&&_<=102?_-87:_-48&15}function pt(Mt,h,_){var b=_e(Mt,_);return _-1>=h&&(b|=_e(Mt,_-1)<<4),b}c.prototype._parseHex=function(h,_,b){this.length=Math.ceil((h.length-_)/6),this.words=new Array(this.length);for(var lt=0;lt<this.length;lt++)this.words[lt]=0;var Rt=0,kt=0,Ft;if(b==="be")for(lt=h.length-1;lt>=_;lt-=2)Ft=pt(h,_,lt)<<Rt,this.words[kt]|=Ft&67108863,Rt>=18?(Rt-=18,kt+=1,this.words[kt]|=Ft>>>26):Rt+=8;else{var xt=h.length-_;for(lt=xt%2===0?_+1:_;lt<h.length;lt+=2)Ft=pt(h,_,lt)<<Rt,this.words[kt]|=Ft&67108863,Rt>=18?(Rt-=18,kt+=1,this.words[kt]|=Ft>>>26):Rt+=8}this.strip()};function yt(Mt,h,_,b){for(var lt=0,Rt=Math.min(Mt.length,_),kt=h;kt<Rt;kt++){var Ft=Mt.charCodeAt(kt)-48;lt*=b,Ft>=49?lt+=Ft-49+10:Ft>=17?lt+=Ft-17+10:lt+=Ft}return lt}c.prototype._parseBase=function(h,_,b){this.words=[0],this.length=1;for(var lt=0,Rt=1;Rt<=67108863;Rt*=_)lt++;lt--,Rt=Rt/_|0;for(var kt=h.length-b,Ft=kt%lt,xt=Math.min(kt,kt-Ft)+b,g=0,wt=b;wt<xt;wt+=lt)g=yt(h,wt,wt+lt,_),this.imuln(Rt),this.words[0]+g<67108864?this.words[0]+=g:this._iaddn(g);if(Ft!==0){var nr=1;for(g=yt(h,wt,h.length,_),wt=0;wt<Ft;wt++)nr*=_;this.imuln(nr),this.words[0]+g<67108864?this.words[0]+=g:this._iaddn(g)}this.strip()},c.prototype.copy=function(h){h.words=new Array(this.length);for(var _=0;_<this.length;_++)h.words[_]=this.words[_];h.length=this.length,h.negative=this.negative,h.red=this.red},c.prototype.clone=function(){var h=new c(null);return this.copy(h),h},c.prototype._expand=function(h){for(;this.length<h;)this.words[this.length++]=0;return this},c.prototype.strip=function(){for(;this.length>1&&this.words[this.length-1]===0;)this.length--;return this._normSign()},c.prototype._normSign=function(){return this.length===1&&this.words[0]===0&&(this.negative=0),this},c.prototype.inspect=function(){return(this.red?"<BN-R: ":"<BN: ")+this.toString(16)+">"};var ct=["","0","00","000","0000","00000","000000","0000000","00000000","000000000","0000000000","00000000000","000000000000","0000000000000","00000000000000","000000000000000","0000000000000000","00000000000000000","000000000000000000","0000000000000000000","00000000000000000000","000000000000000000000","0000000000000000000000","00000000000000000000000","000000000000000000000000","0000000000000000000000000"],Ct=[0,0,25,16,12,11,10,9,8,8,7,7,7,7,6,6,6,6,6,6,6,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5],qt=[0,0,33554432,43046721,16777216,48828125,60466176,40353607,16777216,43046721,1e7,19487171,35831808,62748517,7529536,11390625,16777216,24137569,34012224,47045881,64e6,4084101,5153632,6436343,7962624,9765625,11881376,14348907,17210368,20511149,243e5,28629151,33554432,39135393,45435424,52521875,60466176];c.prototype.toString=function(h,_){h=h||10,_=_|0||1;var b;if(h===16||h==="hex"){b="";for(var lt=0,Rt=0,kt=0;kt<this.length;kt++){var Ft=this.words[kt],xt=((Ft<<lt|Rt)&16777215).toString(16);Rt=Ft>>>24-lt&16777215,lt+=2,lt>=26&&(lt-=26,kt--),Rt!==0||kt!==this.length-1?b=ct[6-xt.length]+xt+b:b=xt+b}for(Rt!==0&&(b=Rt.toString(16)+b);b.length%_!==0;)b="0"+b;return this.negative!==0&&(b="-"+b),b}if(h===(h|0)&&h>=2&&h<=36){var g=Ct[h],wt=qt[h];b="";var nr=this.clone();for(nr.negative=0;!nr.isZero();){var or=nr.modn(wt).toString(h);nr=nr.idivn(wt),nr.isZero()?b=or+b:b=ct[g-or.length]+or+b}for(this.isZero()&&(b="0"+b);b.length%_!==0;)b="0"+b;return this.negative!==0&&(b="-"+b),b}a(!1,"Base should be between 2 and 36")},c.prototype.toNumber=function(){var h=this.words[0];return this.length===2?h+=this.words[1]*67108864:this.length===3&&this.words[2]===1?h+=4503599627370496+this.words[1]*67108864:this.length>2&&a(!1,"Number can only safely store up to 53 bits"),this.negative!==0?-h:h},c.prototype.toJSON=function(){return this.toString(16)},c.prototype.toBuffer=function(h,_){return a(typeof j<"u"),this.toArrayLike(j,h,_)},c.prototype.toArray=function(h,_){return this.toArrayLike(Array,h,_)},c.prototype.toArrayLike=function(h,_,b){var lt=this.byteLength(),Rt=b||Math.max(1,lt);a(lt<=Rt,"byte array longer than desired length"),a(Rt>0,"Requested array length <= 0"),this.strip();var kt=_==="le",Ft=new h(Rt),xt,g,wt=this.clone();if(kt){for(g=0;!wt.isZero();g++)xt=wt.andln(255),wt.iushrn(8),Ft[g]=xt;for(;g<Rt;g++)Ft[g]=0}else{for(g=0;g<Rt-lt;g++)Ft[g]=0;for(g=0;!wt.isZero();g++)xt=wt.andln(255),wt.iushrn(8),Ft[Rt-g-1]=xt}return Ft},Math.clz32?c.prototype._countBits=function(h){return 32-Math.clz32(h)}:c.prototype._countBits=function(h){var _=h,b=0;return _>=4096&&(b+=13,_>>>=13),_>=64&&(b+=7,_>>>=7),_>=8&&(b+=4,_>>>=4),_>=2&&(b+=2,_>>>=2),b+_},c.prototype._zeroBits=function(h){if(h===0)return 26;var _=h,b=0;return _&8191||(b+=13,_>>>=13),_&127||(b+=7,_>>>=7),_&15||(b+=4,_>>>=4),_&3||(b+=2,_>>>=2),_&1||b++,b},c.prototype.bitLength=function(){var h=this.words[this.length-1],_=this._countBits(h);return(this.length-1)*26+_};function Ot(Mt){for(var h=new Array(Mt.bitLength()),_=0;_<h.length;_++){var b=_/26|0,lt=_%26;h[_]=(Mt.words[b]&1<<lt)>>>lt}return h}c.prototype.zeroBits=function(){if(this.isZero())return 0;for(var h=0,_=0;_<this.length;_++){var b=this._zeroBits(this.words[_]);if(h+=b,b!==26)break}return h},c.prototype.byteLength=function(){return Math.ceil(this.bitLength()/8)},c.prototype.toTwos=function(h){return this.negative!==0?this.abs().inotn(h).iaddn(1):this.clone()},c.prototype.fromTwos=function(h){return this.testn(h-1)?this.notn(h).iaddn(1).ineg():this.clone()},c.prototype.isNeg=function(){return this.negative!==0},c.prototype.neg=function(){return this.clone().ineg()},c.prototype.ineg=function(){return this.isZero()||(this.negative^=1),this},c.prototype.iuor=function(h){for(;this.length<h.length;)this.words[this.length++]=0;for(var _=0;_<h.length;_++)this.words[_]=this.words[_]|h.words[_];return this.strip()},c.prototype.ior=function(h){return a((this.negative|h.negative)===0),this.iuor(h)},c.prototype.or=function(h){return this.length>h.length?this.clone().ior(h):h.clone().ior(this)},c.prototype.uor=function(h){return this.length>h.length?this.clone().iuor(h):h.clone().iuor(this)},c.prototype.iuand=function(h){var _;this.length>h.length?_=h:_=this;for(var b=0;b<_.length;b++)this.words[b]=this.words[b]&h.words[b];return this.length=_.length,this.strip()},c.prototype.iand=function(h){return a((this.negative|h.negative)===0),this.iuand(h)},c.prototype.and=function(h){return this.length>h.length?this.clone().iand(h):h.clone().iand(this)},c.prototype.uand=function(h){return this.length>h.length?this.clone().iuand(h):h.clone().iuand(this)},c.prototype.iuxor=function(h){var _,b;this.length>h.length?(_=this,b=h):(_=h,b=this);for(var lt=0;lt<b.length;lt++)this.words[lt]=_.words[lt]^b.words[lt];if(this!==_)for(;lt<_.length;lt++)this.words[lt]=_.words[lt];return this.length=_.length,this.strip()},c.prototype.ixor=function(h){return a((this.negative|h.negative)===0),this.iuxor(h)},c.prototype.xor=function(h){return this.length>h.length?this.clone().ixor(h):h.clone().ixor(this)},c.prototype.uxor=function(h){return this.length>h.length?this.clone().iuxor(h):h.clone().iuxor(this)},c.prototype.inotn=function(h){a(typeof h=="number"&&h>=0);var _=Math.ceil(h/26)|0,b=h%26;this._expand(_),b>0&&_--;for(var lt=0;lt<_;lt++)this.words[lt]=~this.words[lt]&67108863;return b>0&&(this.words[lt]=~this.words[lt]&67108863>>26-b),this.strip()},c.prototype.notn=function(h){return this.clone().inotn(h)},c.prototype.setn=function(h,_){a(typeof h=="number"&&h>=0);var b=h/26|0,lt=h%26;return this._expand(b+1),_?this.words[b]=this.words[b]|1<<lt:this.words[b]=this.words[b]&~(1<<lt),this.strip()},c.prototype.iadd=function(h){var _;if(this.negative!==0&&h.negative===0)return this.negative=0,_=this.isub(h),this.negative^=1,this._normSign();if(this.negative===0&&h.negative!==0)return h.negative=0,_=this.isub(h),h.negative=1,_._normSign();var b,lt;this.length>h.length?(b=this,lt=h):(b=h,lt=this);for(var Rt=0,kt=0;kt<lt.length;kt++)_=(b.words[kt]|0)+(lt.words[kt]|0)+Rt,this.words[kt]=_&67108863,Rt=_>>>26;for(;Rt!==0&&kt<b.length;kt++)_=(b.words[kt]|0)+Rt,this.words[kt]=_&67108863,Rt=_>>>26;if(this.length=b.length,Rt!==0)this.words[this.length]=Rt,this.length++;else if(b!==this)for(;kt<b.length;kt++)this.words[kt]=b.words[kt];return this},c.prototype.add=function(h){var _;return h.negative!==0&&this.negative===0?(h.negative=0,_=this.sub(h),h.negative^=1,_):h.negative===0&&this.negative!==0?(this.negative=0,_=h.sub(this),this.negative=1,_):this.length>h.length?this.clone().iadd(h):h.clone().iadd(this)},c.prototype.isub=function(h){if(h.negative!==0){h.negative=0;var _=this.iadd(h);return h.negative=1,_._normSign()}else if(this.negative!==0)return this.negative=0,this.iadd(h),this.negative=1,this._normSign();var b=this.cmp(h);if(b===0)return this.negative=0,this.length=1,this.words[0]=0,this;var lt,Rt;b>0?(lt=this,Rt=h):(lt=h,Rt=this);for(var kt=0,Ft=0;Ft<Rt.length;Ft++)_=(lt.words[Ft]|0)-(Rt.words[Ft]|0)+kt,kt=_>>26,this.words[Ft]=_&67108863;for(;kt!==0&&Ft<lt.length;Ft++)_=(lt.words[Ft]|0)+kt,kt=_>>26,this.words[Ft]=_&67108863;if(kt===0&&Ft<lt.length&&lt!==this)for(;Ft<lt.length;Ft++)this.words[Ft]=lt.words[Ft];return this.length=Math.max(this.length,Ft),lt!==this&&(this.negative=1),this.strip()},c.prototype.sub=function(h){return this.clone().isub(h)};function Lt(Mt,h,_){_.negative=h.negative^Mt.negative;var b=Mt.length+h.length|0;_.length=b,b=b-1|0;var lt=Mt.words[0]|0,Rt=h.words[0]|0,kt=lt*Rt,Ft=kt&67108863,xt=kt/67108864|0;_.words[0]=Ft;for(var g=1;g<b;g++){for(var wt=xt>>>26,nr=xt&67108863,or=Math.min(g,h.length-1),cr=Math.max(0,g-Mt.length+1);cr<=or;cr++){var Rr=g-cr|0;lt=Mt.words[Rr]|0,Rt=h.words[cr]|0,kt=lt*Rt+nr,wt+=kt/67108864|0,nr=kt&67108863}_.words[g]=nr|0,xt=wt|0}return xt!==0?_.words[g]=xt|0:_.length--,_.strip()}var Qt=function(h,_,b){var lt=h.words,Rt=_.words,kt=b.words,Ft=0,xt,g,wt,nr=lt[0]|0,or=nr&8191,cr=nr>>>13,Rr=lt[1]|0,Ar=Rr&8191,pr=Rr>>>13,wr=lt[2]|0,Tr=wr&8191,Ir=wr>>>13,Sr=lt[3]|0,br=Sr&8191,kr=Sr>>>13,Qr=lt[4]|0,qr=Qr&8191,$r=Qr>>>13,gn=lt[5]|0,Lr=gn&8191,Dr=gn>>>13,En=lt[6]|0,Fr=En&8191,zr=En>>>13,yn=lt[7]|0,Nr=yn&8191,Wr=yn>>>13,xn=lt[8]|0,Or=xn&8191,Yr=xn>>>13,Pn=lt[9]|0,xr=Pn&8191,fr=Pn>>>13,yr=Rt[0]|0,Mr=yr&8191,Pr=yr>>>13,Vr=Rt[1]|0,Br=Vr&8191,jr=Vr>>>13,An=Rt[2]|0,Ur=An&8191,Gr=An>>>13,wn=Rt[3]|0,Xr=wn&8191,hn=wn>>>13,In=Rt[4]|0,Jr=In&8191,fn=In>>>13,kn=Rt[5]|0,Kr=kn&8191,dn=kn>>>13,Rn=Rt[6]|0,Zr=Rn&8191,un=Rn>>>13,Mn=Rt[7]|0,rn=Mn&8191,pn=Mn>>>13,Cn=Rt[8]|0,ln=Cn&8191,vn=Cn>>>13,Bn=Rt[9]|0,an=Bn&8191,mn=Bn>>>13;b.negative=h.negative^_.negative,b.length=19,xt=Math.imul(or,Mr),g=Math.imul(or,Pr),g=g+Math.imul(cr,Mr)|0,wt=Math.imul(cr,Pr);var Sn=(Ft+xt|0)+((g&8191)<<13)|0;Ft=(wt+(g>>>13)|0)+(Sn>>>26)|0,Sn&=67108863,xt=Math.imul(Ar,Mr),g=Math.imul(Ar,Pr),g=g+Math.imul(pr,Mr)|0,wt=Math.imul(pr,Pr),xt=xt+Math.imul(or,Br)|0,g=g+Math.imul(or,jr)|0,g=g+Math.imul(cr,Br)|0,wt=wt+Math.imul(cr,jr)|0;var Tn=(Ft+xt|0)+((g&8191)<<13)|0;Ft=(wt+(g>>>13)|0)+(Tn>>>26)|0,Tn&=67108863,xt=Math.imul(Tr,Mr),g=Math.imul(Tr,Pr),g=g+Math.imul(Ir,Mr)|0,wt=Math.imul(Ir,Pr),xt=xt+Math.imul(Ar,Br)|0,g=g+Math.imul(Ar,jr)|0,g=g+Math.imul(pr,Br)|0,wt=wt+Math.imul(pr,jr)|0,xt=xt+Math.imul(or,Ur)|0,g=g+Math.imul(or,Gr)|0,g=g+Math.imul(cr,Ur)|0,wt=wt+Math.imul(cr,Gr)|0;var Un=(Ft+xt|0)+((g&8191)<<13)|0;Ft=(wt+(g>>>13)|0)+(Un>>>26)|0,Un&=67108863,xt=Math.imul(br,Mr),g=Math.imul(br,Pr),g=g+Math.imul(kr,Mr)|0,wt=Math.imul(kr,Pr),xt=xt+Math.imul(Tr,Br)|0,g=g+Math.imul(Tr,jr)|0,g=g+Math.imul(Ir,Br)|0,wt=wt+Math.imul(Ir,jr)|0,xt=xt+Math.imul(Ar,Ur)|0,g=g+Math.imul(Ar,Gr)|0,g=g+Math.imul(pr,Ur)|0,wt=wt+Math.imul(pr,Gr)|0,xt=xt+Math.imul(or,Xr)|0,g=g+Math.imul(or,hn)|0,g=g+Math.imul(cr,Xr)|0,wt=wt+Math.imul(cr,hn)|0;var jn=(Ft+xt|0)+((g&8191)<<13)|0;Ft=(wt+(g>>>13)|0)+(jn>>>26)|0,jn&=67108863,xt=Math.imul(qr,Mr),g=Math.imul(qr,Pr),g=g+Math.imul($r,Mr)|0,wt=Math.imul($r,Pr),xt=xt+Math.imul(br,Br)|0,g=g+Math.imul(br,jr)|0,g=g+Math.imul(kr,Br)|0,wt=wt+Math.imul(kr,jr)|0,xt=xt+Math.imul(Tr,Ur)|0,g=g+Math.imul(Tr,Gr)|0,g=g+Math.imul(Ir,Ur)|0,wt=wt+Math.imul(Ir,Gr)|0,xt=xt+Math.imul(Ar,Xr)|0,g=g+Math.imul(Ar,hn)|0,g=g+Math.imul(pr,Xr)|0,wt=wt+Math.imul(pr,hn)|0,xt=xt+Math.imul(or,Jr)|0,g=g+Math.imul(or,fn)|0,g=g+Math.imul(cr,Jr)|0,wt=wt+Math.imul(cr,fn)|0;var Vn=(Ft+xt|0)+((g&8191)<<13)|0;Ft=(wt+(g>>>13)|0)+(Vn>>>26)|0,Vn&=67108863,xt=Math.imul(Lr,Mr),g=Math.imul(Lr,Pr),g=g+Math.imul(Dr,Mr)|0,wt=Math.imul(Dr,Pr),xt=xt+Math.imul(qr,Br)|0,g=g+Math.imul(qr,jr)|0,g=g+Math.imul($r,Br)|0,wt=wt+Math.imul($r,jr)|0,xt=xt+Math.imul(br,Ur)|0,g=g+Math.imul(br,Gr)|0,g=g+Math.imul(kr,Ur)|0,wt=wt+Math.imul(kr,Gr)|0,xt=xt+Math.imul(Tr,Xr)|0,g=g+Math.imul(Tr,hn)|0,g=g+Math.imul(Ir,Xr)|0,wt=wt+Math.imul(Ir,hn)|0,xt=xt+Math.imul(Ar,Jr)|0,g=g+Math.imul(Ar,fn)|0,g=g+Math.imul(pr,Jr)|0,wt=wt+Math.imul(pr,fn)|0,xt=xt+Math.imul(or,Kr)|0,g=g+Math.imul(or,dn)|0,g=g+Math.imul(cr,Kr)|0,wt=wt+Math.imul(cr,dn)|0;var Nn=(Ft+xt|0)+((g&8191)<<13)|0;Ft=(wt+(g>>>13)|0)+(Nn>>>26)|0,Nn&=67108863,xt=Math.imul(Fr,Mr),g=Math.imul(Fr,Pr),g=g+Math.imul(zr,Mr)|0,wt=Math.imul(zr,Pr),xt=xt+Math.imul(Lr,Br)|0,g=g+Math.imul(Lr,jr)|0,g=g+Math.imul(Dr,Br)|0,wt=wt+Math.imul(Dr,jr)|0,xt=xt+Math.imul(qr,Ur)|0,g=g+Math.imul(qr,Gr)|0,g=g+Math.imul($r,Ur)|0,wt=wt+Math.imul($r,Gr)|0,xt=xt+Math.imul(br,Xr)|0,g=g+Math.imul(br,hn)|0,g=g+Math.imul(kr,Xr)|0,wt=wt+Math.imul(kr,hn)|0,xt=xt+Math.imul(Tr,Jr)|0,g=g+Math.imul(Tr,fn)|0,g=g+Math.imul(Ir,Jr)|0,wt=wt+Math.imul(Ir,fn)|0,xt=xt+Math.imul(Ar,Kr)|0,g=g+Math.imul(Ar,dn)|0,g=g+Math.imul(pr,Kr)|0,wt=wt+Math.imul(pr,dn)|0,xt=xt+Math.imul(or,Zr)|0,g=g+Math.imul(or,un)|0,g=g+Math.imul(cr,Zr)|0,wt=wt+Math.imul(cr,un)|0;var zn=(Ft+xt|0)+((g&8191)<<13)|0;Ft=(wt+(g>>>13)|0)+(zn>>>26)|0,zn&=67108863,xt=Math.imul(Nr,Mr),g=Math.imul(Nr,Pr),g=g+Math.imul(Wr,Mr)|0,wt=Math.imul(Wr,Pr),xt=xt+Math.imul(Fr,Br)|0,g=g+Math.imul(Fr,jr)|0,g=g+Math.imul(zr,Br)|0,wt=wt+Math.imul(zr,jr)|0,xt=xt+Math.imul(Lr,Ur)|0,g=g+Math.imul(Lr,Gr)|0,g=g+Math.imul(Dr,Ur)|0,wt=wt+Math.imul(Dr,Gr)|0,xt=xt+Math.imul(qr,Xr)|0,g=g+Math.imul(qr,hn)|0,g=g+Math.imul($r,Xr)|0,wt=wt+Math.imul($r,hn)|0,xt=xt+Math.imul(br,Jr)|0,g=g+Math.imul(br,fn)|0,g=g+Math.imul(kr,Jr)|0,wt=wt+Math.imul(kr,fn)|0,xt=xt+Math.imul(Tr,Kr)|0,g=g+Math.imul(Tr,dn)|0,g=g+Math.imul(Ir,Kr)|0,wt=wt+Math.imul(Ir,dn)|0,xt=xt+Math.imul(Ar,Zr)|0,g=g+Math.imul(Ar,un)|0,g=g+Math.imul(pr,Zr)|0,wt=wt+Math.imul(pr,un)|0,xt=xt+Math.imul(or,rn)|0,g=g+Math.imul(or,pn)|0,g=g+Math.imul(cr,rn)|0,wt=wt+Math.imul(cr,pn)|0;var Hn=(Ft+xt|0)+((g&8191)<<13)|0;Ft=(wt+(g>>>13)|0)+(Hn>>>26)|0,Hn&=67108863,xt=Math.imul(Or,Mr),g=Math.imul(Or,Pr),g=g+Math.imul(Yr,Mr)|0,wt=Math.imul(Yr,Pr),xt=xt+Math.imul(Nr,Br)|0,g=g+Math.imul(Nr,jr)|0,g=g+Math.imul(Wr,Br)|0,wt=wt+Math.imul(Wr,jr)|0,xt=xt+Math.imul(Fr,Ur)|0,g=g+Math.imul(Fr,Gr)|0,g=g+Math.imul(zr,Ur)|0,wt=wt+Math.imul(zr,Gr)|0,xt=xt+Math.imul(Lr,Xr)|0,g=g+Math.imul(Lr,hn)|0,g=g+Math.imul(Dr,Xr)|0,wt=wt+Math.imul(Dr,hn)|0,xt=xt+Math.imul(qr,Jr)|0,g=g+Math.imul(qr,fn)|0,g=g+Math.imul($r,Jr)|0,wt=wt+Math.imul($r,fn)|0,xt=xt+Math.imul(br,Kr)|0,g=g+Math.imul(br,dn)|0,g=g+Math.imul(kr,Kr)|0,wt=wt+Math.imul(kr,dn)|0,xt=xt+Math.imul(Tr,Zr)|0,g=g+Math.imul(Tr,un)|0,g=g+Math.imul(Ir,Zr)|0,wt=wt+Math.imul(Ir,un)|0,xt=xt+Math.imul(Ar,rn)|0,g=g+Math.imul(Ar,pn)|0,g=g+Math.imul(pr,rn)|0,wt=wt+Math.imul(pr,pn)|0,xt=xt+Math.imul(or,ln)|0,g=g+Math.imul(or,vn)|0,g=g+Math.imul(cr,ln)|0,wt=wt+Math.imul(cr,vn)|0;var Xn=(Ft+xt|0)+((g&8191)<<13)|0;Ft=(wt+(g>>>13)|0)+(Xn>>>26)|0,Xn&=67108863,xt=Math.imul(xr,Mr),g=Math.imul(xr,Pr),g=g+Math.imul(fr,Mr)|0,wt=Math.imul(fr,Pr),xt=xt+Math.imul(Or,Br)|0,g=g+Math.imul(Or,jr)|0,g=g+Math.imul(Yr,Br)|0,wt=wt+Math.imul(Yr,jr)|0,xt=xt+Math.imul(Nr,Ur)|0,g=g+Math.imul(Nr,Gr)|0,g=g+Math.imul(Wr,Ur)|0,wt=wt+Math.imul(Wr,Gr)|0,xt=xt+Math.imul(Fr,Xr)|0,g=g+Math.imul(Fr,hn)|0,g=g+Math.imul(zr,Xr)|0,wt=wt+Math.imul(zr,hn)|0,xt=xt+Math.imul(Lr,Jr)|0,g=g+Math.imul(Lr,fn)|0,g=g+Math.imul(Dr,Jr)|0,wt=wt+Math.imul(Dr,fn)|0,xt=xt+Math.imul(qr,Kr)|0,g=g+Math.imul(qr,dn)|0,g=g+Math.imul($r,Kr)|0,wt=wt+Math.imul($r,dn)|0,xt=xt+Math.imul(br,Zr)|0,g=g+Math.imul(br,un)|0,g=g+Math.imul(kr,Zr)|0,wt=wt+Math.imul(kr,un)|0,xt=xt+Math.imul(Tr,rn)|0,g=g+Math.imul(Tr,pn)|0,g=g+Math.imul(Ir,rn)|0,wt=wt+Math.imul(Ir,pn)|0,xt=xt+Math.imul(Ar,ln)|0,g=g+Math.imul(Ar,vn)|0,g=g+Math.imul(pr,ln)|0,wt=wt+Math.imul(pr,vn)|0,xt=xt+Math.imul(or,an)|0,g=g+Math.imul(or,mn)|0,g=g+Math.imul(cr,an)|0,wt=wt+Math.imul(cr,mn)|0;var qn=(Ft+xt|0)+((g&8191)<<13)|0;Ft=(wt+(g>>>13)|0)+(qn>>>26)|0,qn&=67108863,xt=Math.imul(xr,Br),g=Math.imul(xr,jr),g=g+Math.imul(fr,Br)|0,wt=Math.imul(fr,jr),xt=xt+Math.imul(Or,Ur)|0,g=g+Math.imul(Or,Gr)|0,g=g+Math.imul(Yr,Ur)|0,wt=wt+Math.imul(Yr,Gr)|0,xt=xt+Math.imul(Nr,Xr)|0,g=g+Math.imul(Nr,hn)|0,g=g+Math.imul(Wr,Xr)|0,wt=wt+Math.imul(Wr,hn)|0,xt=xt+Math.imul(Fr,Jr)|0,g=g+Math.imul(Fr,fn)|0,g=g+Math.imul(zr,Jr)|0,wt=wt+Math.imul(zr,fn)|0,xt=xt+Math.imul(Lr,Kr)|0,g=g+Math.imul(Lr,dn)|0,g=g+Math.imul(Dr,Kr)|0,wt=wt+Math.imul(Dr,dn)|0,xt=xt+Math.imul(qr,Zr)|0,g=g+Math.imul(qr,un)|0,g=g+Math.imul($r,Zr)|0,wt=wt+Math.imul($r,un)|0,xt=xt+Math.imul(br,rn)|0,g=g+Math.imul(br,pn)|0,g=g+Math.imul(kr,rn)|0,wt=wt+Math.imul(kr,pn)|0,xt=xt+Math.imul(Tr,ln)|0,g=g+Math.imul(Tr,vn)|0,g=g+Math.imul(Ir,ln)|0,wt=wt+Math.imul(Ir,vn)|0,xt=xt+Math.imul(Ar,an)|0,g=g+Math.imul(Ar,mn)|0,g=g+Math.imul(pr,an)|0,wt=wt+Math.imul(pr,mn)|0;var Wn=(Ft+xt|0)+((g&8191)<<13)|0;Ft=(wt+(g>>>13)|0)+(Wn>>>26)|0,Wn&=67108863,xt=Math.imul(xr,Ur),g=Math.imul(xr,Gr),g=g+Math.imul(fr,Ur)|0,wt=Math.imul(fr,Gr),xt=xt+Math.imul(Or,Xr)|0,g=g+Math.imul(Or,hn)|0,g=g+Math.imul(Yr,Xr)|0,wt=wt+Math.imul(Yr,hn)|0,xt=xt+Math.imul(Nr,Jr)|0,g=g+Math.imul(Nr,fn)|0,g=g+Math.imul(Wr,Jr)|0,wt=wt+Math.imul(Wr,fn)|0,xt=xt+Math.imul(Fr,Kr)|0,g=g+Math.imul(Fr,dn)|0,g=g+Math.imul(zr,Kr)|0,wt=wt+Math.imul(zr,dn)|0,xt=xt+Math.imul(Lr,Zr)|0,g=g+Math.imul(Lr,un)|0,g=g+Math.imul(Dr,Zr)|0,wt=wt+Math.imul(Dr,un)|0,xt=xt+Math.imul(qr,rn)|0,g=g+Math.imul(qr,pn)|0,g=g+Math.imul($r,rn)|0,wt=wt+Math.imul($r,pn)|0,xt=xt+Math.imul(br,ln)|0,g=g+Math.imul(br,vn)|0,g=g+Math.imul(kr,ln)|0,wt=wt+Math.imul(kr,vn)|0,xt=xt+Math.imul(Tr,an)|0,g=g+Math.imul(Tr,mn)|0,g=g+Math.imul(Ir,an)|0,wt=wt+Math.imul(Ir,mn)|0;var On=(Ft+xt|0)+((g&8191)<<13)|0;Ft=(wt+(g>>>13)|0)+(On>>>26)|0,On&=67108863,xt=Math.imul(xr,Xr),g=Math.imul(xr,hn),g=g+Math.imul(fr,Xr)|0,wt=Math.imul(fr,hn),xt=xt+Math.imul(Or,Jr)|0,g=g+Math.imul(Or,fn)|0,g=g+Math.imul(Yr,Jr)|0,wt=wt+Math.imul(Yr,fn)|0,xt=xt+Math.imul(Nr,Kr)|0,g=g+Math.imul(Nr,dn)|0,g=g+Math.imul(Wr,Kr)|0,wt=wt+Math.imul(Wr,dn)|0,xt=xt+Math.imul(Fr,Zr)|0,g=g+Math.imul(Fr,un)|0,g=g+Math.imul(zr,Zr)|0,wt=wt+Math.imul(zr,un)|0,xt=xt+Math.imul(Lr,rn)|0,g=g+Math.imul(Lr,pn)|0,g=g+Math.imul(Dr,rn)|0,wt=wt+Math.imul(Dr,pn)|0,xt=xt+Math.imul(qr,ln)|0,g=g+Math.imul(qr,vn)|0,g=g+Math.imul($r,ln)|0,wt=wt+Math.imul($r,vn)|0,xt=xt+Math.imul(br,an)|0,g=g+Math.imul(br,mn)|0,g=g+Math.imul(kr,an)|0,wt=wt+Math.imul(kr,mn)|0;var $n=(Ft+xt|0)+((g&8191)<<13)|0;Ft=(wt+(g>>>13)|0)+($n>>>26)|0,$n&=67108863,xt=Math.imul(xr,Jr),g=Math.imul(xr,fn),g=g+Math.imul(fr,Jr)|0,wt=Math.imul(fr,fn),xt=xt+Math.imul(Or,Kr)|0,g=g+Math.imul(Or,dn)|0,g=g+Math.imul(Yr,Kr)|0,wt=wt+Math.imul(Yr,dn)|0,xt=xt+Math.imul(Nr,Zr)|0,g=g+Math.imul(Nr,un)|0,g=g+Math.imul(Wr,Zr)|0,wt=wt+Math.imul(Wr,un)|0,xt=xt+Math.imul(Fr,rn)|0,g=g+Math.imul(Fr,pn)|0,g=g+Math.imul(zr,rn)|0,wt=wt+Math.imul(zr,pn)|0,xt=xt+Math.imul(Lr,ln)|0,g=g+Math.imul(Lr,vn)|0,g=g+Math.imul(Dr,ln)|0,wt=wt+Math.imul(Dr,vn)|0,xt=xt+Math.imul(qr,an)|0,g=g+Math.imul(qr,mn)|0,g=g+Math.imul($r,an)|0,wt=wt+Math.imul($r,mn)|0;var Dn=(Ft+xt|0)+((g&8191)<<13)|0;Ft=(wt+(g>>>13)|0)+(Dn>>>26)|0,Dn&=67108863,xt=Math.imul(xr,Kr),g=Math.imul(xr,dn),g=g+Math.imul(fr,Kr)|0,wt=Math.imul(fr,dn),xt=xt+Math.imul(Or,Zr)|0,g=g+Math.imul(Or,un)|0,g=g+Math.imul(Yr,Zr)|0,wt=wt+Math.imul(Yr,un)|0,xt=xt+Math.imul(Nr,rn)|0,g=g+Math.imul(Nr,pn)|0,g=g+Math.imul(Wr,rn)|0,wt=wt+Math.imul(Wr,pn)|0,xt=xt+Math.imul(Fr,ln)|0,g=g+Math.imul(Fr,vn)|0,g=g+Math.imul(zr,ln)|0,wt=wt+Math.imul(zr,vn)|0,xt=xt+Math.imul(Lr,an)|0,g=g+Math.imul(Lr,mn)|0,g=g+Math.imul(Dr,an)|0,wt=wt+Math.imul(Dr,mn)|0;var Ln=(Ft+xt|0)+((g&8191)<<13)|0;Ft=(wt+(g>>>13)|0)+(Ln>>>26)|0,Ln&=67108863,xt=Math.imul(xr,Zr),g=Math.imul(xr,un),g=g+Math.imul(fr,Zr)|0,wt=Math.imul(fr,un),xt=xt+Math.imul(Or,rn)|0,g=g+Math.imul(Or,pn)|0,g=g+Math.imul(Yr,rn)|0,wt=wt+Math.imul(Yr,pn)|0,xt=xt+Math.imul(Nr,ln)|0,g=g+Math.imul(Nr,vn)|0,g=g+Math.imul(Wr,ln)|0,wt=wt+Math.imul(Wr,vn)|0,xt=xt+Math.imul(Fr,an)|0,g=g+Math.imul(Fr,mn)|0,g=g+Math.imul(zr,an)|0,wt=wt+Math.imul(zr,mn)|0;var Zn=(Ft+xt|0)+((g&8191)<<13)|0;Ft=(wt+(g>>>13)|0)+(Zn>>>26)|0,Zn&=67108863,xt=Math.imul(xr,rn),g=Math.imul(xr,pn),g=g+Math.imul(fr,rn)|0,wt=Math.imul(fr,pn),xt=xt+Math.imul(Or,ln)|0,g=g+Math.imul(Or,vn)|0,g=g+Math.imul(Yr,ln)|0,wt=wt+Math.imul(Yr,vn)|0,xt=xt+Math.imul(Nr,an)|0,g=g+Math.imul(Nr,mn)|0,g=g+Math.imul(Wr,an)|0,wt=wt+Math.imul(Wr,mn)|0;var Gn=(Ft+xt|0)+((g&8191)<<13)|0;Ft=(wt+(g>>>13)|0)+(Gn>>>26)|0,Gn&=67108863,xt=Math.imul(xr,ln),g=Math.imul(xr,vn),g=g+Math.imul(fr,ln)|0,wt=Math.imul(fr,vn),xt=xt+Math.imul(Or,an)|0,g=g+Math.imul(Or,mn)|0,g=g+Math.imul(Yr,an)|0,wt=wt+Math.imul(Yr,mn)|0;var Kn=(Ft+xt|0)+((g&8191)<<13)|0;Ft=(wt+(g>>>13)|0)+(Kn>>>26)|0,Kn&=67108863,xt=Math.imul(xr,an),g=Math.imul(xr,mn),g=g+Math.imul(fr,an)|0,wt=Math.imul(fr,mn);var Qn=(Ft+xt|0)+((g&8191)<<13)|0;return Ft=(wt+(g>>>13)|0)+(Qn>>>26)|0,Qn&=67108863,kt[0]=Sn,kt[1]=Tn,kt[2]=Un,kt[3]=jn,kt[4]=Vn,kt[5]=Nn,kt[6]=zn,kt[7]=Hn,kt[8]=Xn,kt[9]=qn,kt[10]=Wn,kt[11]=On,kt[12]=$n,kt[13]=Dn,kt[14]=Ln,kt[15]=Zn,kt[16]=Gn,kt[17]=Kn,kt[18]=Qn,Ft!==0&&(kt[19]=Ft,b.length++),b};Math.imul||(Qt=Lt);function ir(Mt,h,_){_.negative=h.negative^Mt.negative,_.length=Mt.length+h.length;for(var b=0,lt=0,Rt=0;Rt<_.length-1;Rt++){var kt=lt;lt=0;for(var Ft=b&67108863,xt=Math.min(Rt,h.length-1),g=Math.max(0,Rt-Mt.length+1);g<=xt;g++){var wt=Rt-g,nr=Mt.words[wt]|0,or=h.words[g]|0,cr=nr*or,Rr=cr&67108863;kt=kt+(cr/67108864|0)|0,Rr=Rr+Ft|0,Ft=Rr&67108863,kt=kt+(Rr>>>26)|0,lt+=kt>>>26,kt&=67108863}_.words[Rt]=Ft,b=kt,kt=lt}return b!==0?_.words[Rt]=b:_.length--,_.strip()}function er(Mt,h,_){var b=new tr;return b.mulp(Mt,h,_)}c.prototype.mulTo=function(h,_){var b,lt=this.length+h.length;return this.length===10&&h.length===10?b=Qt(this,h,_):lt<63?b=Lt(this,h,_):lt<1024?b=ir(this,h,_):b=er(this,h,_),b};function tr(Mt,h){this.x=Mt,this.y=h}tr.prototype.makeRBT=function(h){for(var _=new Array(h),b=c.prototype._countBits(h)-1,lt=0;lt<h;lt++)_[lt]=this.revBin(lt,b,h);return _},tr.prototype.revBin=function(h,_,b){if(h===0||h===b-1)return h;for(var lt=0,Rt=0;Rt<_;Rt++)lt|=(h&1)<<_-Rt-1,h>>=1;return lt},tr.prototype.permute=function(h,_,b,lt,Rt,kt){for(var Ft=0;Ft<kt;Ft++)lt[Ft]=_[h[Ft]],Rt[Ft]=b[h[Ft]]},tr.prototype.transform=function(h,_,b,lt,Rt,kt){this.permute(kt,h,_,b,lt,Rt);for(var Ft=1;Ft<Rt;Ft<<=1)for(var xt=Ft<<1,g=Math.cos(2*Math.PI/xt),wt=Math.sin(2*Math.PI/xt),nr=0;nr<Rt;nr+=xt)for(var or=g,cr=wt,Rr=0;Rr<Ft;Rr++){var Ar=b[nr+Rr],pr=lt[nr+Rr],wr=b[nr+Rr+Ft],Tr=lt[nr+Rr+Ft],Ir=or*wr-cr*Tr;Tr=or*Tr+cr*wr,wr=Ir,b[nr+Rr]=Ar+wr,lt[nr+Rr]=pr+Tr,b[nr+Rr+Ft]=Ar-wr,lt[nr+Rr+Ft]=pr-Tr,Rr!==xt&&(Ir=g*or-wt*cr,cr=g*cr+wt*or,or=Ir)}},tr.prototype.guessLen13b=function(h,_){var b=Math.max(_,h)|1,lt=b&1,Rt=0;for(b=b/2|0;b;b=b>>>1)Rt++;return 1<<Rt+1+lt},tr.prototype.conjugate=function(h,_,b){if(!(b<=1))for(var lt=0;lt<b/2;lt++){var Rt=h[lt];h[lt]=h[b-lt-1],h[b-lt-1]=Rt,Rt=_[lt],_[lt]=-_[b-lt-1],_[b-lt-1]=-Rt}},tr.prototype.normalize13b=function(h,_){for(var b=0,lt=0;lt<_/2;lt++){var Rt=Math.round(h[2*lt+1]/_)*8192+Math.round(h[2*lt]/_)+b;h[lt]=Rt&67108863,Rt<67108864?b=0:b=Rt/67108864|0}return h},tr.prototype.convert13b=function(h,_,b,lt){for(var Rt=0,kt=0;kt<_;kt++)Rt=Rt+(h[kt]|0),b[2*kt]=Rt&8191,Rt=Rt>>>13,b[2*kt+1]=Rt&8191,Rt=Rt>>>13;for(kt=2*_;kt<lt;++kt)b[kt]=0;a(Rt===0),a((Rt&-8192)===0)},tr.prototype.stub=function(h){for(var _=new Array(h),b=0;b<h;b++)_[b]=0;return _},tr.prototype.mulp=function(h,_,b){var lt=2*this.guessLen13b(h.length,_.length),Rt=this.makeRBT(lt),kt=this.stub(lt),Ft=new Array(lt),xt=new Array(lt),g=new Array(lt),wt=new Array(lt),nr=new Array(lt),or=new Array(lt),cr=b.words;cr.length=lt,this.convert13b(h.words,h.length,Ft,lt),this.convert13b(_.words,_.length,wt,lt),this.transform(Ft,kt,xt,g,lt,Rt),this.transform(wt,kt,nr,or,lt,Rt);for(var Rr=0;Rr<lt;Rr++){var Ar=xt[Rr]*nr[Rr]-g[Rr]*or[Rr];g[Rr]=xt[Rr]*or[Rr]+g[Rr]*nr[Rr],xt[Rr]=Ar}return this.conjugate(xt,g,lt),this.transform(xt,g,cr,kt,lt,Rt),this.conjugate(cr,kt,lt),this.normalize13b(cr,lt),b.negative=h.negative^_.negative,b.length=h.length+_.length,b.strip()},c.prototype.mul=function(h){var _=new c(null);return _.words=new Array(this.length+h.length),this.mulTo(h,_)},c.prototype.mulf=function(h){var _=new c(null);return _.words=new Array(this.length+h.length),er(this,h,_)},c.prototype.imul=function(h){return this.clone().mulTo(h,this)},c.prototype.imuln=function(h){a(typeof h=="number"),a(h<67108864);for(var _=0,b=0;b<this.length;b++){var lt=(this.words[b]|0)*h,Rt=(lt&67108863)+(_&67108863);_>>=26,_+=lt/67108864|0,_+=Rt>>>26,this.words[b]=Rt&67108863}return _!==0&&(this.words[b]=_,this.length++),this.length=h===0?1:this.length,this},c.prototype.muln=function(h){return this.clone().imuln(h)},c.prototype.sqr=function(){return this.mul(this)},c.prototype.isqr=function(){return this.imul(this.clone())},c.prototype.pow=function(h){var _=Ot(h);if(_.length===0)return new c(1);for(var b=this,lt=0;lt<_.length&&_[lt]===0;lt++,b=b.sqr());if(++lt<_.length)for(var Rt=b.sqr();lt<_.length;lt++,Rt=Rt.sqr())_[lt]!==0&&(b=b.mul(Rt));return b},c.prototype.iushln=function(h){a(typeof h=="number"&&h>=0);var _=h%26,b=(h-_)/26,lt=67108863>>>26-_<<26-_,Rt;if(_!==0){var kt=0;for(Rt=0;Rt<this.length;Rt++){var Ft=this.words[Rt]&lt,xt=(this.words[Rt]|0)-Ft<<_;this.words[Rt]=xt|kt,kt=Ft>>>26-_}kt&&(this.words[Rt]=kt,this.length++)}if(b!==0){for(Rt=this.length-1;Rt>=0;Rt--)this.words[Rt+b]=this.words[Rt];for(Rt=0;Rt<b;Rt++)this.words[Rt]=0;this.length+=b}return this.strip()},c.prototype.ishln=function(h){return a(this.negative===0),this.iushln(h)},c.prototype.iushrn=function(h,_,b){a(typeof h=="number"&&h>=0);var lt;_?lt=(_-_%26)/26:lt=0;var Rt=h%26,kt=Math.min((h-Rt)/26,this.length),Ft=67108863^67108863>>>Rt<<Rt,xt=b;if(lt-=kt,lt=Math.max(0,lt),xt){for(var g=0;g<kt;g++)xt.words[g]=this.words[g];xt.length=kt}if(kt!==0)if(this.length>kt)for(this.length-=kt,g=0;g<this.length;g++)this.words[g]=this.words[g+kt];else this.words[0]=0,this.length=1;var wt=0;for(g=this.length-1;g>=0&&(wt!==0||g>=lt);g--){var nr=this.words[g]|0;this.words[g]=wt<<26-Rt|nr>>>Rt,wt=nr&Ft}return xt&&wt!==0&&(xt.words[xt.length++]=wt),this.length===0&&(this.words[0]=0,this.length=1),this.strip()},c.prototype.ishrn=function(h,_,b){return a(this.negative===0),this.iushrn(h,_,b)},c.prototype.shln=function(h){return this.clone().ishln(h)},c.prototype.ushln=function(h){return this.clone().iushln(h)},c.prototype.shrn=function(h){return this.clone().ishrn(h)},c.prototype.ushrn=function(h){return this.clone().iushrn(h)},c.prototype.testn=function(h){a(typeof h=="number"&&h>=0);var _=h%26,b=(h-_)/26,lt=1<<_;if(this.length<=b)return!1;var Rt=this.words[b];return!!(Rt&lt)},c.prototype.imaskn=function(h){a(typeof h=="number"&&h>=0);var _=h%26,b=(h-_)/26;if(a(this.negative===0,"imaskn works only with positive numbers"),this.length<=b)return this;if(_!==0&&b++,this.length=Math.min(b,this.length),_!==0){var lt=67108863^67108863>>>_<<_;this.words[this.length-1]&=lt}return this.strip()},c.prototype.maskn=function(h){return this.clone().imaskn(h)},c.prototype.iaddn=function(h){return a(typeof h=="number"),a(h<67108864),h<0?this.isubn(-h):this.negative!==0?this.length===1&&(this.words[0]|0)<h?(this.words[0]=h-(this.words[0]|0),this.negative=0,this):(this.negative=0,this.isubn(h),this.negative=1,this):this._iaddn(h)},c.prototype._iaddn=function(h){this.words[0]+=h;for(var _=0;_<this.length&&this.words[_]>=67108864;_++)this.words[_]-=67108864,_===this.length-1?this.words[_+1]=1:this.words[_+1]++;return this.length=Math.max(this.length,_+1),this},c.prototype.isubn=function(h){if(a(typeof h=="number"),a(h<67108864),h<0)return this.iaddn(-h);if(this.negative!==0)return this.negative=0,this.iaddn(h),this.negative=1,this;if(this.words[0]-=h,this.length===1&&this.words[0]<0)this.words[0]=-this.words[0],this.negative=1;else for(var _=0;_<this.length&&this.words[_]<0;_++)this.words[_]+=67108864,this.words[_+1]-=1;return this.strip()},c.prototype.addn=function(h){return this.clone().iaddn(h)},c.prototype.subn=function(h){return this.clone().isubn(h)},c.prototype.iabs=function(){return this.negative=0,this},c.prototype.abs=function(){return this.clone().iabs()},c.prototype._ishlnsubmul=function(h,_,b){var lt=h.length+b,Rt;this._expand(lt);var kt,Ft=0;for(Rt=0;Rt<h.length;Rt++){kt=(this.words[Rt+b]|0)+Ft;var xt=(h.words[Rt]|0)*_;kt-=xt&67108863,Ft=(kt>>26)-(xt/67108864|0),this.words[Rt+b]=kt&67108863}for(;Rt<this.length-b;Rt++)kt=(this.words[Rt+b]|0)+Ft,Ft=kt>>26,this.words[Rt+b]=kt&67108863;if(Ft===0)return this.strip();for(a(Ft===-1),Ft=0,Rt=0;Rt<this.length;Rt++)kt=-(this.words[Rt]|0)+Ft,Ft=kt>>26,this.words[Rt]=kt&67108863;return this.negative=1,this.strip()},c.prototype._wordDiv=function(h,_){var b=this.length-h.length,lt=this.clone(),Rt=h,kt=Rt.words[Rt.length-1]|0,Ft=this._countBits(kt);b=26-Ft,b!==0&&(Rt=Rt.ushln(b),lt.iushln(b),kt=Rt.words[Rt.length-1]|0);var xt=lt.length-Rt.length,g;if(_!=="mod"){g=new c(null),g.length=xt+1,g.words=new Array(g.length);for(var wt=0;wt<g.length;wt++)g.words[wt]=0}var nr=lt.clone()._ishlnsubmul(Rt,1,xt);nr.negative===0&&(lt=nr,g&&(g.words[xt]=1));for(var or=xt-1;or>=0;or--){var cr=(lt.words[Rt.length+or]|0)*67108864+(lt.words[Rt.length+or-1]|0);for(cr=Math.min(cr/kt|0,67108863),lt._ishlnsubmul(Rt,cr,or);lt.negative!==0;)cr--,lt.negative=0,lt._ishlnsubmul(Rt,1,or),lt.isZero()||(lt.negative^=1);g&&(g.words[or]=cr)}return g&&g.strip(),lt.strip(),_!=="div"&&b!==0&&lt.iushrn(b),{div:g||null,mod:lt}},c.prototype.divmod=function(h,_,b){if(a(!h.isZero()),this.isZero())return{div:new c(0),mod:new c(0)};var lt,Rt,kt;return this.negative!==0&&h.negative===0?(kt=this.neg().divmod(h,_),_!=="mod"&&(lt=kt.div.neg()),_!=="div"&&(Rt=kt.mod.neg(),b&&Rt.negative!==0&&Rt.iadd(h)),{div:lt,mod:Rt}):this.negative===0&&h.negative!==0?(kt=this.divmod(h.neg(),_),_!=="mod"&&(lt=kt.div.neg()),{div:lt,mod:kt.mod}):this.negative&h.negative?(kt=this.neg().divmod(h.neg(),_),_!=="div"&&(Rt=kt.mod.neg(),b&&Rt.negative!==0&&Rt.isub(h)),{div:kt.div,mod:Rt}):h.length>this.length||this.cmp(h)<0?{div:new c(0),mod:this}:h.length===1?_==="div"?{div:this.divn(h.words[0]),mod:null}:_==="mod"?{div:null,mod:new c(this.modn(h.words[0]))}:{div:this.divn(h.words[0]),mod:new c(this.modn(h.words[0]))}:this._wordDiv(h,_)},c.prototype.div=function(h){return this.divmod(h,"div",!1).div},c.prototype.mod=function(h){return this.divmod(h,"mod",!1).mod},c.prototype.umod=function(h){return this.divmod(h,"mod",!0).mod},c.prototype.divRound=function(h){var _=this.divmod(h);if(_.mod.isZero())return _.div;var b=_.div.negative!==0?_.mod.isub(h):_.mod,lt=h.ushrn(1),Rt=h.andln(1),kt=b.cmp(lt);return kt<0||Rt===1&&kt===0?_.div:_.div.negative!==0?_.div.isubn(1):_.div.iaddn(1)},c.prototype.modn=function(h){a(h<=67108863);for(var _=(1<<26)%h,b=0,lt=this.length-1;lt>=0;lt--)b=(_*b+(this.words[lt]|0))%h;return b},c.prototype.idivn=function(h){a(h<=67108863);for(var _=0,b=this.length-1;b>=0;b--){var lt=(this.words[b]|0)+_*67108864;this.words[b]=lt/h|0,_=lt%h}return this.strip()},c.prototype.divn=function(h){return this.clone().idivn(h)},c.prototype.egcd=function(h){a(h.negative===0),a(!h.isZero());var _=this,b=h.clone();_.negative!==0?_=_.umod(h):_=_.clone();for(var lt=new c(1),Rt=new c(0),kt=new c(0),Ft=new c(1),xt=0;_.isEven()&&b.isEven();)_.iushrn(1),b.iushrn(1),++xt;for(var g=b.clone(),wt=_.clone();!_.isZero();){for(var nr=0,or=1;!(_.words[0]&or)&&nr<26;++nr,or<<=1);if(nr>0)for(_.iushrn(nr);nr-- >0;)(lt.isOdd()||Rt.isOdd())&&(lt.iadd(g),Rt.isub(wt)),lt.iushrn(1),Rt.iushrn(1);for(var cr=0,Rr=1;!(b.words[0]&Rr)&&cr<26;++cr,Rr<<=1);if(cr>0)for(b.iushrn(cr);cr-- >0;)(kt.isOdd()||Ft.isOdd())&&(kt.iadd(g),Ft.isub(wt)),kt.iushrn(1),Ft.iushrn(1);_.cmp(b)>=0?(_.isub(b),lt.isub(kt),Rt.isub(Ft)):(b.isub(_),kt.isub(lt),Ft.isub(Rt))}return{a:kt,b:Ft,gcd:b.iushln(xt)}},c.prototype._invmp=function(h){a(h.negative===0),a(!h.isZero());var _=this,b=h.clone();_.negative!==0?_=_.umod(h):_=_.clone();for(var lt=new c(1),Rt=new c(0),kt=b.clone();_.cmpn(1)>0&&b.cmpn(1)>0;){for(var Ft=0,xt=1;!(_.words[0]&xt)&&Ft<26;++Ft,xt<<=1);if(Ft>0)for(_.iushrn(Ft);Ft-- >0;)lt.isOdd()&&lt.iadd(kt),lt.iushrn(1);for(var g=0,wt=1;!(b.words[0]&wt)&&g<26;++g,wt<<=1);if(g>0)for(b.iushrn(g);g-- >0;)Rt.isOdd()&&Rt.iadd(kt),Rt.iushrn(1);_.cmp(b)>=0?(_.isub(b),lt.isub(Rt)):(b.isub(_),Rt.isub(lt))}var nr;return _.cmpn(1)===0?nr=lt:nr=Rt,nr.cmpn(0)<0&&nr.iadd(h),nr},c.prototype.gcd=function(h){if(this.isZero())return h.abs();if(h.isZero())return this.abs();var _=this.clone(),b=h.clone();_.negative=0,b.negative=0;for(var lt=0;_.isEven()&&b.isEven();lt++)_.iushrn(1),b.iushrn(1);do{for(;_.isEven();)_.iushrn(1);for(;b.isEven();)b.iushrn(1);var Rt=_.cmp(b);if(Rt<0){var kt=_;_=b,b=kt}else if(Rt===0||b.cmpn(1)===0)break;_.isub(b)}while(!0);return b.iushln(lt)},c.prototype.invm=function(h){return this.egcd(h).a.umod(h)},c.prototype.isEven=function(){return(this.words[0]&1)===0},c.prototype.isOdd=function(){return(this.words[0]&1)===1},c.prototype.andln=function(h){return this.words[0]&h},c.prototype.bincn=function(h){a(typeof h=="number");var _=h%26,b=(h-_)/26,lt=1<<_;if(this.length<=b)return this._expand(b+1),this.words[b]|=lt,this;for(var Rt=lt,kt=b;Rt!==0&&kt<this.length;kt++){var Ft=this.words[kt]|0;Ft+=Rt,Rt=Ft>>>26,Ft&=67108863,this.words[kt]=Ft}return Rt!==0&&(this.words[kt]=Rt,this.length++),this},c.prototype.isZero=function(){return this.length===1&&this.words[0]===0},c.prototype.cmpn=function(h){var _=h<0;if(this.negative!==0&&!_)return-1;if(this.negative===0&&_)return 1;this.strip();var b;if(this.length>1)b=1;else{_&&(h=-h),a(h<=67108863,"Number is too big");var lt=this.words[0]|0;b=lt===h?0:lt<h?-1:1}return this.negative!==0?-b|0:b},c.prototype.cmp=function(h){if(this.negative!==0&&h.negative===0)return-1;if(this.negative===0&&h.negative!==0)return 1;var _=this.ucmp(h);return this.negative!==0?-_|0:_},c.prototype.ucmp=function(h){if(this.length>h.length)return 1;if(this.length<h.length)return-1;for(var _=0,b=this.length-1;b>=0;b--){var lt=this.words[b]|0,Rt=h.words[b]|0;if(lt!==Rt){lt<Rt?_=-1:lt>Rt&&(_=1);break}}return _},c.prototype.gtn=function(h){return this.cmpn(h)===1},c.prototype.gt=function(h){return this.cmp(h)===1},c.prototype.gten=function(h){return this.cmpn(h)>=0},c.prototype.gte=function(h){return this.cmp(h)>=0},c.prototype.ltn=function(h){return this.cmpn(h)===-1},c.prototype.lt=function(h){return this.cmp(h)===-1},c.prototype.lten=function(h){return this.cmpn(h)<=0},c.prototype.lte=function(h){return this.cmp(h)<=0},c.prototype.eqn=function(h){return this.cmpn(h)===0},c.prototype.eq=function(h){return this.cmp(h)===0},c.red=function(h){return new lr(h)},c.prototype.toRed=function(h){return a(!this.red,"Already a number in reduction context"),a(this.negative===0,"red works only with positives"),h.convertTo(this)._forceRed(h)},c.prototype.fromRed=function(){return a(this.red,"fromRed works only with numbers in reduction context"),this.red.convertFrom(this)},c.prototype._forceRed=function(h){return this.red=h,this},c.prototype.forceRed=function(h){return a(!this.red,"Already a number in reduction context"),this._forceRed(h)},c.prototype.redAdd=function(h){return a(this.red,"redAdd works only with red numbers"),this.red.add(this,h)},c.prototype.redIAdd=function(h){return a(this.red,"redIAdd works only with red numbers"),this.red.iadd(this,h)},c.prototype.redSub=function(h){return a(this.red,"redSub works only with red numbers"),this.red.sub(this,h)},c.prototype.redISub=function(h){return a(this.red,"redISub works only with red numbers"),this.red.isub(this,h)},c.prototype.redShl=function(h){return a(this.red,"redShl works only with red numbers"),this.red.shl(this,h)},c.prototype.redMul=function(h){return a(this.red,"redMul works only with red numbers"),this.red._verify2(this,h),this.red.mul(this,h)},c.prototype.redIMul=function(h){return a(this.red,"redMul works only with red numbers"),this.red._verify2(this,h),this.red.imul(this,h)},c.prototype.redSqr=function(){return a(this.red,"redSqr works only with red numbers"),this.red._verify1(this),this.red.sqr(this)},c.prototype.redISqr=function(){return a(this.red,"redISqr works only with red numbers"),this.red._verify1(this),this.red.isqr(this)},c.prototype.redSqrt=function(){return a(this.red,"redSqrt works only with red numbers"),this.red._verify1(this),this.red.sqrt(this)},c.prototype.redInvm=function(){return a(this.red,"redInvm works only with red numbers"),this.red._verify1(this),this.red.invm(this)},c.prototype.redNeg=function(){return a(this.red,"redNeg works only with red numbers"),this.red._verify1(this),this.red.neg(this)},c.prototype.redPow=function(h){return a(this.red&&!h.red,"redPow(normalNum)"),this.red._verify1(this),this.red.pow(this,h)};var sr={k256:null,p224:null,p192:null,p25519:null};function ar(Mt,h){this.name=Mt,this.p=new c(h,16),this.n=this.p.bitLength(),this.k=new c(1).iushln(this.n).isub(this.p),this.tmp=this._tmp()}ar.prototype._tmp=function(){var h=new c(null);return h.words=new Array(Math.ceil(this.n/13)),h},ar.prototype.ireduce=function(h){var _=h,b;do this.split(_,this.tmp),_=this.imulK(_),_=_.iadd(this.tmp),b=_.bitLength();while(b>this.n);var lt=b<this.n?-1:_.ucmp(this.p);return lt===0?(_.words[0]=0,_.length=1):lt>0?_.isub(this.p):_.strip!==void 0?_.strip():_._strip(),_},ar.prototype.split=function(h,_){h.iushrn(this.n,0,_)},ar.prototype.imulK=function(h){return h.imul(this.k)};function hr(){ar.call(this,"k256","ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff fffffffe fffffc2f")}d(hr,ar),hr.prototype.split=function(h,_){for(var b=4194303,lt=Math.min(h.length,9),Rt=0;Rt<lt;Rt++)_.words[Rt]=h.words[Rt];if(_.length=lt,h.length<=9){h.words[0]=0,h.length=1;return}var kt=h.words[9];for(_.words[_.length++]=kt&b,Rt=10;Rt<h.length;Rt++){var Ft=h.words[Rt]|0;h.words[Rt-10]=(Ft&b)<<4|kt>>>22,kt=Ft}kt>>>=22,h.words[Rt-10]=kt,kt===0&&h.length>10?h.length-=10:h.length-=9},hr.prototype.imulK=function(h){h.words[h.length]=0,h.words[h.length+1]=0,h.length+=2;for(var _=0,b=0;b<h.length;b++){var lt=h.words[b]|0;_+=lt*977,h.words[b]=_&67108863,_=lt*64+(_/67108864|0)}return h.words[h.length-1]===0&&(h.length--,h.words[h.length-1]===0&&h.length--),h};function _r(){ar.call(this,"p224","ffffffff ffffffff ffffffff ffffffff 00000000 00000000 00000001")}d(_r,ar);function dr(){ar.call(this,"p192","ffffffff ffffffff ffffffff fffffffe ffffffff ffffffff")}d(dr,ar);function ur(){ar.call(this,"25519","7fffffffffffffff ffffffffffffffff ffffffffffffffff ffffffffffffffed")}d(ur,ar),ur.prototype.imulK=function(h){for(var _=0,b=0;b<h.length;b++){var lt=(h.words[b]|0)*19+_,Rt=lt&67108863;lt>>>=26,h.words[b]=Rt,_=lt}return _!==0&&(h.words[h.length++]=_),h},c._prime=function(h){if(sr[h])return sr[h];var _;if(h==="k256")_=new hr;else if(h==="p224")_=new _r;else if(h==="p192")_=new dr;else if(h==="p25519")_=new ur;else throw new Error("Unknown prime "+h);return sr[h]=_,_};function lr(Mt){if(typeof Mt=="string"){var h=c._prime(Mt);this.m=h.p,this.prime=h}else a(Mt.gtn(1),"modulus must be greater than 1"),this.m=Mt,this.prime=null}lr.prototype._verify1=function(h){a(h.negative===0,"red works only with positives"),a(h.red,"red works only with red numbers")},lr.prototype._verify2=function(h,_){a((h.negative|_.negative)===0,"red works only with positives"),a(h.red&&h.red===_.red,"red works only with red numbers")},lr.prototype.imod=function(h){return this.prime?this.prime.ireduce(h)._forceRed(this):h.umod(this.m)._forceRed(this)},lr.prototype.neg=function(h){return h.isZero()?h.clone():this.m.sub(h)._forceRed(this)},lr.prototype.add=function(h,_){this._verify2(h,_);var b=h.add(_);return b.cmp(this.m)>=0&&b.isub(this.m),b._forceRed(this)},lr.prototype.iadd=function(h,_){this._verify2(h,_);var b=h.iadd(_);return b.cmp(this.m)>=0&&b.isub(this.m),b},lr.prototype.sub=function(h,_){this._verify2(h,_);var b=h.sub(_);return b.cmpn(0)<0&&b.iadd(this.m),b._forceRed(this)},lr.prototype.isub=function(h,_){this._verify2(h,_);var b=h.isub(_);return b.cmpn(0)<0&&b.iadd(this.m),b},lr.prototype.shl=function(h,_){return this._verify1(h),this.imod(h.ushln(_))},lr.prototype.imul=function(h,_){return this._verify2(h,_),this.imod(h.imul(_))},lr.prototype.mul=function(h,_){return this._verify2(h,_),this.imod(h.mul(_))},lr.prototype.isqr=function(h){return this.imul(h,h.clone())},lr.prototype.sqr=function(h){return this.mul(h,h)},lr.prototype.sqrt=function(h){if(h.isZero())return h.clone();var _=this.m.andln(3);if(a(_%2===1),_===3){var b=this.m.add(new c(1)).iushrn(2);return this.pow(h,b)}for(var lt=this.m.subn(1),Rt=0;!lt.isZero()&&lt.andln(1)===0;)Rt++,lt.iushrn(1);a(!lt.isZero());var kt=new c(1).toRed(this),Ft=kt.redNeg(),xt=this.m.subn(1).iushrn(1),g=this.m.bitLength();for(g=new c(2*g*g).toRed(this);this.pow(g,xt).cmp(Ft)!==0;)g.redIAdd(Ft);for(var wt=this.pow(g,lt),nr=this.pow(h,lt.addn(1).iushrn(1)),or=this.pow(h,lt),cr=Rt;or.cmp(kt)!==0;){for(var Rr=or,Ar=0;Rr.cmp(kt)!==0;Ar++)Rr=Rr.redSqr();a(Ar<cr);var pr=this.pow(wt,new c(1).iushln(cr-Ar-1));nr=nr.redMul(pr),wt=pr.redSqr(),or=or.redMul(wt),cr=Ar}return nr},lr.prototype.invm=function(h){var _=h._invmp(this.m);return _.negative!==0?(_.negative=0,this.imod(_).redNeg()):this.imod(_)},lr.prototype.pow=function(h,_){if(_.isZero())return new c(1).toRed(this);if(_.cmpn(1)===0)return h.clone();var b=4,lt=new Array(1<<b);lt[0]=new c(1).toRed(this),lt[1]=h;for(var Rt=2;Rt<lt.length;Rt++)lt[Rt]=this.mul(lt[Rt-1],h);var kt=lt[0],Ft=0,xt=0,g=_.bitLength()%26;for(g===0&&(g=26),Rt=_.length-1;Rt>=0;Rt--){for(var wt=_.words[Rt],nr=g-1;nr>=0;nr--){var or=wt>>nr&1;if(kt!==lt[0]&&(kt=this.sqr(kt)),or===0&&Ft===0){xt=0;continue}Ft<<=1,Ft|=or,xt++,!(xt!==b&&(Rt!==0||nr!==0))&&(kt=this.mul(kt,lt[Ft]),xt=0,Ft=0)}g=26}return kt},lr.prototype.convertTo=function(h){var _=h.umod(this.m);return _===h?_.clone():_},lr.prototype.convertFrom=function(h){var _=h.clone();return _.red=null,_},c.mont=function(h){return new gr(h)};function gr(Mt){lr.call(this,Mt),this.shift=this.m.bitLength(),this.shift%26!==0&&(this.shift+=26-this.shift%26),this.r=new c(1).iushln(this.shift),this.r2=this.imod(this.r.sqr()),this.rinv=this.r._invmp(this.m),this.minv=this.rinv.mul(this.r).isubn(1).div(this.m),this.minv=this.minv.umod(this.r),this.minv=this.r.sub(this.minv)}d(gr,lr),gr.prototype.convertTo=function(h){return this.imod(h.ushln(this.shift))},gr.prototype.convertFrom=function(h){var _=this.imod(h.mul(this.rinv));return _.red=null,_},gr.prototype.imul=function(h,_){if(h.isZero()||_.isZero())return h.words[0]=0,h.length=1,h;var b=h.imul(_),lt=b.maskn(this.shift).mul(this.minv).imaskn(this.shift).mul(this.m),Rt=b.isub(lt).iushrn(this.shift),kt=Rt;return Rt.cmp(this.m)>=0?kt=Rt.isub(this.m):Rt.cmpn(0)<0&&(kt=Rt.iadd(this.m)),kt._forceRed(this)},gr.prototype.mul=function(h,_){if(h.isZero()||_.isZero())return new c(0)._forceRed(this);var b=h.mul(_),lt=b.maskn(this.shift).mul(this.minv).imaskn(this.shift).mul(this.m),Rt=b.isub(lt).iushrn(this.shift),kt=Rt;return Rt.cmp(this.m)>=0?kt=Rt.isub(this.m):Rt.cmpn(0)<0&&(kt=Rt.iadd(this.m)),kt._forceRed(this)},gr.prototype.invm=function(h){var _=this.imod(h._invmp(this.m).mul(this.r2));return _._forceRed(this)}})(s,commonjsGlobal$2)}(bn)),bn.exports}var withPublic_1,hasRequiredWithPublic;function requireWithPublic(){if(hasRequiredWithPublic)return withPublic_1;hasRequiredWithPublic=1;var s=requireBn(),e=requireSafeBuffer$1().Buffer;function o(a,d){return e.from(a.toRed(s.mont(d.modulus)).redPow(new s(d.publicExponent)).fromRed().toArray())}return withPublic_1=o,withPublic_1}var publicEncrypt,hasRequiredPublicEncrypt;function requirePublicEncrypt(){if(hasRequiredPublicEncrypt)return publicEncrypt;hasRequiredPublicEncrypt=1;var s=requireParseAsn1(),e=requireBrowser$b(),o=requireBrowser$9(),a=requireMgf(),d=requireXor(),c=requireBn(),j=requireWithPublic(),_e=requireBrowserifyRsa(),pt=requireSafeBuffer$1().Buffer;publicEncrypt=function(Ot,Lt,Qt){var ir;Ot.padding?ir=Ot.padding:Qt?ir=1:ir=4;var er=s(Ot),tr;if(ir===4)tr=yt(er,Lt);else if(ir===1)tr=ct(er,Lt,Qt);else if(ir===3){if(tr=new c(Lt),tr.cmp(er.modulus)>=0)throw new Error("data too long for modulus")}else throw new Error("unknown padding");return Qt?_e(tr,er):j(tr,er)};function yt(qt,Ot){var Lt=qt.modulus.byteLength(),Qt=Ot.length,ir=o("sha1").update(pt.alloc(0)).digest(),er=ir.length,tr=2*er;if(Qt>Lt-tr-2)throw new Error("message too long");var sr=pt.alloc(Lt-Qt-tr-2),ar=Lt-er-1,hr=e(er),_r=d(pt.concat([ir,sr,pt.alloc(1,1),Ot],ar),a(hr,ar)),dr=d(hr,a(_r,er));return new c(pt.concat([pt.alloc(1),dr,_r],Lt))}function ct(qt,Ot,Lt){var Qt=Ot.length,ir=qt.modulus.byteLength();if(Qt>ir-11)throw new Error("message too long");var er;return Lt?er=pt.alloc(ir-Qt-3,255):er=Ct(ir-Qt-3),new c(pt.concat([pt.from([0,Lt?1:2]),er,pt.alloc(1),Ot],ir))}function Ct(qt){for(var Ot=pt.allocUnsafe(qt),Lt=0,Qt=e(qt*2),ir=0,er;Lt<qt;)ir===Qt.length&&(Qt=e(qt*2),ir=0),er=Qt[ir++],er&&(Ot[Lt++]=er);return Ot}return publicEncrypt}var privateDecrypt,hasRequiredPrivateDecrypt;function requirePrivateDecrypt(){if(hasRequiredPrivateDecrypt)return privateDecrypt;hasRequiredPrivateDecrypt=1;var s=requireParseAsn1(),e=requireMgf(),o=requireXor(),a=requireBn(),d=requireBrowserifyRsa(),c=requireBrowser$9(),j=requireWithPublic(),_e=requireSafeBuffer$1().Buffer;privateDecrypt=function(qt,Ot,Lt){var Qt;qt.padding?Qt=qt.padding:Lt?Qt=1:Qt=4;var ir=s(qt),er=ir.modulus.byteLength();if(Ot.length>er||new a(Ot).cmp(ir.modulus)>=0)throw new Error("decryption error");var tr;Lt?tr=j(new a(Ot),ir):tr=d(Ot,ir);var sr=_e.alloc(er-tr.length);if(tr=_e.concat([sr,tr],er),Qt===4)return pt(ir,tr);if(Qt===1)return yt(ir,tr,Lt);if(Qt===3)return tr;throw new Error("unknown padding")};function pt(Ct,qt){var Ot=Ct.modulus.byteLength(),Lt=c("sha1").update(_e.alloc(0)).digest(),Qt=Lt.length;if(qt[0]!==0)throw new Error("decryption error");var ir=qt.slice(1,Qt+1),er=qt.slice(Qt+1),tr=o(ir,e(er,Qt)),sr=o(er,e(tr,Ot-Qt-1));if(ct(Lt,sr.slice(0,Qt)))throw new Error("decryption error");for(var ar=Qt;sr[ar]===0;)ar++;if(sr[ar++]!==1)throw new Error("decryption error");return sr.slice(ar)}function yt(Ct,qt,Ot){for(var Lt=qt.slice(0,2),Qt=2,ir=0;qt[Qt++]!==0;)if(Qt>=qt.length){ir++;break}var er=qt.slice(2,Qt-1);if((Lt.toString("hex")!=="0002"&&!Ot||Lt.toString("hex")!=="0001"&&Ot)&&ir++,er.length<8&&ir++,ir)throw new Error("decryption error");return qt.slice(Qt)}function ct(Ct,qt){Ct=_e.from(Ct),qt=_e.from(qt);var Ot=0,Lt=Ct.length;Ct.length!==qt.length&&(Ot++,Lt=Math.min(Ct.length,qt.length));for(var Qt=-1;++Qt<Lt;)Ot+=Ct[Qt]^qt[Qt];return Ot}return privateDecrypt}var hasRequiredBrowser$1;function requireBrowser$1(){return hasRequiredBrowser$1||(hasRequiredBrowser$1=1,function(s){s.publicEncrypt=requirePublicEncrypt(),s.privateDecrypt=requirePrivateDecrypt(),s.privateEncrypt=function(o,a){return s.publicEncrypt(o,a,!0)},s.publicDecrypt=function(o,a){return s.privateDecrypt(o,a,!0)}}(browser$2)),browser$2}var browser$1={},hasRequiredBrowser;function requireBrowser(){if(hasRequiredBrowser)return browser$1;hasRequiredBrowser=1;function s(){throw new Error(`secure random number generation not supported by this browser
use chrome, FireFox or Internet Explorer 11`)}var e=requireSafeBuffer$1(),o=requireBrowser$b(),a=e.Buffer,d=e.kMaxLength,c=commonjsGlobal$2.crypto||commonjsGlobal$2.msCrypto,j=Math.pow(2,32)-1;function _e(qt,Ot){if(typeof qt!="number"||qt!==qt)throw new TypeError("offset must be a number");if(qt>j||qt<0)throw new TypeError("offset must be a uint32");if(qt>d||qt>Ot)throw new RangeError("offset out of range")}function pt(qt,Ot,Lt){if(typeof qt!="number"||qt!==qt)throw new TypeError("size must be a number");if(qt>j||qt<0)throw new TypeError("size must be a uint32");if(qt+Ot>Lt||qt>d)throw new RangeError("buffer too small")}c&&c.getRandomValues||!process$1.browser?(browser$1.randomFill=yt,browser$1.randomFillSync=Ct):(browser$1.randomFill=s,browser$1.randomFillSync=s);function yt(qt,Ot,Lt,Qt){if(!a.isBuffer(qt)&&!(qt instanceof commonjsGlobal$2.Uint8Array))throw new TypeError('"buf" argument must be a Buffer or Uint8Array');if(typeof Ot=="function")Qt=Ot,Ot=0,Lt=qt.length;else if(typeof Lt=="function")Qt=Lt,Lt=qt.length-Ot;else if(typeof Qt!="function")throw new TypeError('"cb" argument must be a function');return _e(Ot,qt.length),pt(Lt,Ot,qt.length),ct(qt,Ot,Lt,Qt)}function ct(qt,Ot,Lt,Qt){if(process$1.browser){var ir=qt.buffer,er=new Uint8Array(ir,Ot,Lt);if(c.getRandomValues(er),Qt){process$1.nextTick(function(){Qt(null,qt)});return}return qt}if(Qt){o(Lt,function(sr,ar){if(sr)return Qt(sr);ar.copy(qt,Ot),Qt(null,qt)});return}var tr=o(Lt);return tr.copy(qt,Ot),qt}function Ct(qt,Ot,Lt){if(typeof Ot>"u"&&(Ot=0),!a.isBuffer(qt)&&!(qt instanceof commonjsGlobal$2.Uint8Array))throw new TypeError('"buf" argument must be a Buffer or Uint8Array');return _e(Ot,qt.length),Lt===void 0&&(Lt=qt.length-Ot),pt(Lt,Ot,qt.length),ct(qt,Ot,Lt)}return browser$1}var hasRequiredCryptoBrowserify;function requireCryptoBrowserify(){if(hasRequiredCryptoBrowserify)return cryptoBrowserify;hasRequiredCryptoBrowserify=1,cryptoBrowserify.randomBytes=cryptoBrowserify.rng=cryptoBrowserify.pseudoRandomBytes=cryptoBrowserify.prng=requireBrowser$b(),cryptoBrowserify.createHash=cryptoBrowserify.Hash=requireBrowser$9(),cryptoBrowserify.createHmac=cryptoBrowserify.Hmac=requireBrowser$8();var s=requireAlgos(),e=Object.keys(s),o=["sha1","sha224","sha256","sha384","sha512","md5","rmd160"].concat(e);cryptoBrowserify.getHashes=function(){return o};var a=requireBrowser$7();cryptoBrowserify.pbkdf2=a.pbkdf2,cryptoBrowserify.pbkdf2Sync=a.pbkdf2Sync;var d=requireBrowser$5();cryptoBrowserify.Cipher=d.Cipher,cryptoBrowserify.createCipher=d.createCipher,cryptoBrowserify.Cipheriv=d.Cipheriv,cryptoBrowserify.createCipheriv=d.createCipheriv,cryptoBrowserify.Decipher=d.Decipher,cryptoBrowserify.createDecipher=d.createDecipher,cryptoBrowserify.Decipheriv=d.Decipheriv,cryptoBrowserify.createDecipheriv=d.createDecipheriv,cryptoBrowserify.getCiphers=d.getCiphers,cryptoBrowserify.listCiphers=d.listCiphers;var c=requireBrowser$4();cryptoBrowserify.DiffieHellmanGroup=c.DiffieHellmanGroup,cryptoBrowserify.createDiffieHellmanGroup=c.createDiffieHellmanGroup,cryptoBrowserify.getDiffieHellman=c.getDiffieHellman,cryptoBrowserify.createDiffieHellman=c.createDiffieHellman,cryptoBrowserify.DiffieHellman=c.DiffieHellman;var j=requireBrowser$3();cryptoBrowserify.createSign=j.createSign,cryptoBrowserify.Sign=j.Sign,cryptoBrowserify.createVerify=j.createVerify,cryptoBrowserify.Verify=j.Verify,cryptoBrowserify.createECDH=requireBrowser$2();var _e=requireBrowser$1();cryptoBrowserify.publicEncrypt=_e.publicEncrypt,cryptoBrowserify.privateEncrypt=_e.privateEncrypt,cryptoBrowserify.publicDecrypt=_e.publicDecrypt,cryptoBrowserify.privateDecrypt=_e.privateDecrypt;var pt=requireBrowser();return cryptoBrowserify.randomFill=pt.randomFill,cryptoBrowserify.randomFillSync=pt.randomFillSync,cryptoBrowserify.createCredentials=function(){throw new Error(`sorry, createCredentials is not implemented yet
we accept pull requests
https://github.com/browserify/crypto-browserify`)},cryptoBrowserify.constants={DH_CHECK_P_NOT_SAFE_PRIME:2,DH_CHECK_P_NOT_PRIME:1,DH_UNABLE_TO_CHECK_GENERATOR:4,DH_NOT_SUITABLE_GENERATOR:8,NPN_ENABLED:1,ALPN_ENABLED:1,RSA_PKCS1_PADDING:1,RSA_SSLV23_PADDING:2,RSA_NO_PADDING:3,RSA_PKCS1_OAEP_PADDING:4,RSA_X931_PADDING:5,RSA_PKCS1_PSS_PADDING:6,POINT_CONVERSION_COMPRESSED:2,POINT_CONVERSION_UNCOMPRESSED:4,POINT_CONVERSION_HYBRID:6},cryptoBrowserify}var hasRequiredCore;function requireCore(){return hasRequiredCore||(hasRequiredCore=1,function(s,e){(function(o,a){s.exports=a()})(commonjsGlobal$2,function(){var o=o||function(a,d){var c;if(typeof window<"u"&&window.crypto&&(c=window.crypto),typeof self<"u"&&self.crypto&&(c=self.crypto),typeof globalThis<"u"&&globalThis.crypto&&(c=globalThis.crypto),!c&&typeof window<"u"&&window.msCrypto&&(c=window.msCrypto),!c&&typeof commonjsGlobal$2<"u"&&commonjsGlobal$2.crypto&&(c=commonjsGlobal$2.crypto),!c&&typeof commonjsRequire=="function")try{c=requireCryptoBrowserify()}catch{}var j=function(){if(c){if(typeof c.getRandomValues=="function")try{return c.getRandomValues(new Uint32Array(1))[0]}catch{}if(typeof c.randomBytes=="function")try{return c.randomBytes(4).readInt32LE()}catch{}}throw new Error("Native crypto module could not be used to get secure random number.")},_e=Object.create||function(){function tr(){}return function(sr){var ar;return tr.prototype=sr,ar=new tr,tr.prototype=null,ar}}(),pt={},yt=pt.lib={},ct=yt.Base=function(){return{extend:function(tr){var sr=_e(this);return tr&&sr.mixIn(tr),(!sr.hasOwnProperty("init")||this.init===sr.init)&&(sr.init=function(){sr.$super.init.apply(this,arguments)}),sr.init.prototype=sr,sr.$super=this,sr},create:function(){var tr=this.extend();return tr.init.apply(tr,arguments),tr},init:function(){},mixIn:function(tr){for(var sr in tr)tr.hasOwnProperty(sr)&&(this[sr]=tr[sr]);tr.hasOwnProperty("toString")&&(this.toString=tr.toString)},clone:function(){return this.init.prototype.extend(this)}}}(),Ct=yt.WordArray=ct.extend({init:function(tr,sr){tr=this.words=tr||[],sr!=d?this.sigBytes=sr:this.sigBytes=tr.length*4},toString:function(tr){return(tr||Ot).stringify(this)},concat:function(tr){var sr=this.words,ar=tr.words,hr=this.sigBytes,_r=tr.sigBytes;if(this.clamp(),hr%4)for(var dr=0;dr<_r;dr++){var ur=ar[dr>>>2]>>>24-dr%4*8&255;sr[hr+dr>>>2]|=ur<<24-(hr+dr)%4*8}else for(var lr=0;lr<_r;lr+=4)sr[hr+lr>>>2]=ar[lr>>>2];return this.sigBytes+=_r,this},clamp:function(){var tr=this.words,sr=this.sigBytes;tr[sr>>>2]&=4294967295<<32-sr%4*8,tr.length=a.ceil(sr/4)},clone:function(){var tr=ct.clone.call(this);return tr.words=this.words.slice(0),tr},random:function(tr){for(var sr=[],ar=0;ar<tr;ar+=4)sr.push(j());return new Ct.init(sr,tr)}}),qt=pt.enc={},Ot=qt.Hex={stringify:function(tr){for(var sr=tr.words,ar=tr.sigBytes,hr=[],_r=0;_r<ar;_r++){var dr=sr[_r>>>2]>>>24-_r%4*8&255;hr.push((dr>>>4).toString(16)),hr.push((dr&15).toString(16))}return hr.join("")},parse:function(tr){for(var sr=tr.length,ar=[],hr=0;hr<sr;hr+=2)ar[hr>>>3]|=parseInt(tr.substr(hr,2),16)<<24-hr%8*4;return new Ct.init(ar,sr/2)}},Lt=qt.Latin1={stringify:function(tr){for(var sr=tr.words,ar=tr.sigBytes,hr=[],_r=0;_r<ar;_r++){var dr=sr[_r>>>2]>>>24-_r%4*8&255;hr.push(String.fromCharCode(dr))}return hr.join("")},parse:function(tr){for(var sr=tr.length,ar=[],hr=0;hr<sr;hr++)ar[hr>>>2]|=(tr.charCodeAt(hr)&255)<<24-hr%4*8;return new Ct.init(ar,sr)}},Qt=qt.Utf8={stringify:function(tr){try{return decodeURIComponent(escape(Lt.stringify(tr)))}catch{throw new Error("Malformed UTF-8 data")}},parse:function(tr){return Lt.parse(unescape(encodeURIComponent(tr)))}},ir=yt.BufferedBlockAlgorithm=ct.extend({reset:function(){this._data=new Ct.init,this._nDataBytes=0},_append:function(tr){typeof tr=="string"&&(tr=Qt.parse(tr)),this._data.concat(tr),this._nDataBytes+=tr.sigBytes},_process:function(tr){var sr,ar=this._data,hr=ar.words,_r=ar.sigBytes,dr=this.blockSize,ur=dr*4,lr=_r/ur;tr?lr=a.ceil(lr):lr=a.max((lr|0)-this._minBufferSize,0);var gr=lr*dr,Mt=a.min(gr*4,_r);if(gr){for(var h=0;h<gr;h+=dr)this._doProcessBlock(hr,h);sr=hr.splice(0,gr),ar.sigBytes-=Mt}return new Ct.init(sr,Mt)},clone:function(){var tr=ct.clone.call(this);return tr._data=this._data.clone(),tr},_minBufferSize:0});yt.Hasher=ir.extend({cfg:ct.extend(),init:function(tr){this.cfg=this.cfg.extend(tr),this.reset()},reset:function(){ir.reset.call(this),this._doReset()},update:function(tr){return this._append(tr),this._process(),this},finalize:function(tr){tr&&this._append(tr);var sr=this._doFinalize();return sr},blockSize:16,_createHelper:function(tr){return function(sr,ar){return new tr.init(ar).finalize(sr)}},_createHmacHelper:function(tr){return function(sr,ar){return new er.HMAC.init(tr,ar).finalize(sr)}}});var er=pt.algo={};return pt}(Math);return o})}(core)),core.exports}var x64Core={exports:{}},hasRequiredX64Core;function requireX64Core(){return hasRequiredX64Core||(hasRequiredX64Core=1,function(s,e){(function(o,a){s.exports=a(requireCore())})(commonjsGlobal$2,function(o){return function(a){var d=o,c=d.lib,j=c.Base,_e=c.WordArray,pt=d.x64={};pt.Word=j.extend({init:function(yt,ct){this.high=yt,this.low=ct}}),pt.WordArray=j.extend({init:function(yt,ct){yt=this.words=yt||[],ct!=a?this.sigBytes=ct:this.sigBytes=yt.length*8},toX32:function(){for(var yt=this.words,ct=yt.length,Ct=[],qt=0;qt<ct;qt++){var Ot=yt[qt];Ct.push(Ot.high),Ct.push(Ot.low)}return _e.create(Ct,this.sigBytes)},clone:function(){for(var yt=j.clone.call(this),ct=yt.words=this.words.slice(0),Ct=ct.length,qt=0;qt<Ct;qt++)ct[qt]=ct[qt].clone();return yt}})}(),o})}(x64Core)),x64Core.exports}var libTypedarrays={exports:{}},hasRequiredLibTypedarrays;function requireLibTypedarrays(){return hasRequiredLibTypedarrays||(hasRequiredLibTypedarrays=1,function(s,e){(function(o,a){s.exports=a(requireCore())})(commonjsGlobal$2,function(o){return function(){if(typeof ArrayBuffer=="function"){var a=o,d=a.lib,c=d.WordArray,j=c.init,_e=c.init=function(pt){if(pt instanceof ArrayBuffer&&(pt=new Uint8Array(pt)),(pt instanceof Int8Array||typeof Uint8ClampedArray<"u"&&pt instanceof Uint8ClampedArray||pt instanceof Int16Array||pt instanceof Uint16Array||pt instanceof Int32Array||pt instanceof Uint32Array||pt instanceof Float32Array||pt instanceof Float64Array)&&(pt=new Uint8Array(pt.buffer,pt.byteOffset,pt.byteLength)),pt instanceof Uint8Array){for(var yt=pt.byteLength,ct=[],Ct=0;Ct<yt;Ct++)ct[Ct>>>2]|=pt[Ct]<<24-Ct%4*8;j.call(this,ct,yt)}else j.apply(this,arguments)};_e.prototype=c}}(),o.lib.WordArray})}(libTypedarrays)),libTypedarrays.exports}var encUtf16={exports:{}},hasRequiredEncUtf16;function requireEncUtf16(){return hasRequiredEncUtf16||(hasRequiredEncUtf16=1,function(s,e){(function(o,a){s.exports=a(requireCore())})(commonjsGlobal$2,function(o){return function(){var a=o,d=a.lib,c=d.WordArray,j=a.enc;j.Utf16=j.Utf16BE={stringify:function(pt){for(var yt=pt.words,ct=pt.sigBytes,Ct=[],qt=0;qt<ct;qt+=2){var Ot=yt[qt>>>2]>>>16-qt%4*8&65535;Ct.push(String.fromCharCode(Ot))}return Ct.join("")},parse:function(pt){for(var yt=pt.length,ct=[],Ct=0;Ct<yt;Ct++)ct[Ct>>>1]|=pt.charCodeAt(Ct)<<16-Ct%2*16;return c.create(ct,yt*2)}},j.Utf16LE={stringify:function(pt){for(var yt=pt.words,ct=pt.sigBytes,Ct=[],qt=0;qt<ct;qt+=2){var Ot=_e(yt[qt>>>2]>>>16-qt%4*8&65535);Ct.push(String.fromCharCode(Ot))}return Ct.join("")},parse:function(pt){for(var yt=pt.length,ct=[],Ct=0;Ct<yt;Ct++)ct[Ct>>>1]|=_e(pt.charCodeAt(Ct)<<16-Ct%2*16);return c.create(ct,yt*2)}};function _e(pt){return pt<<8&4278255360|pt>>>8&16711935}}(),o.enc.Utf16})}(encUtf16)),encUtf16.exports}var encBase64={exports:{}},hasRequiredEncBase64;function requireEncBase64(){return hasRequiredEncBase64||(hasRequiredEncBase64=1,function(s,e){(function(o,a){s.exports=a(requireCore())})(commonjsGlobal$2,function(o){return function(){var a=o,d=a.lib,c=d.WordArray,j=a.enc;j.Base64={stringify:function(pt){var yt=pt.words,ct=pt.sigBytes,Ct=this._map;pt.clamp();for(var qt=[],Ot=0;Ot<ct;Ot+=3)for(var Lt=yt[Ot>>>2]>>>24-Ot%4*8&255,Qt=yt[Ot+1>>>2]>>>24-(Ot+1)%4*8&255,ir=yt[Ot+2>>>2]>>>24-(Ot+2)%4*8&255,er=Lt<<16|Qt<<8|ir,tr=0;tr<4&&Ot+tr*.75<ct;tr++)qt.push(Ct.charAt(er>>>6*(3-tr)&63));var sr=Ct.charAt(64);if(sr)for(;qt.length%4;)qt.push(sr);return qt.join("")},parse:function(pt){var yt=pt.length,ct=this._map,Ct=this._reverseMap;if(!Ct){Ct=this._reverseMap=[];for(var qt=0;qt<ct.length;qt++)Ct[ct.charCodeAt(qt)]=qt}var Ot=ct.charAt(64);if(Ot){var Lt=pt.indexOf(Ot);Lt!==-1&&(yt=Lt)}return _e(pt,yt,Ct)},_map:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/="};function _e(pt,yt,ct){for(var Ct=[],qt=0,Ot=0;Ot<yt;Ot++)if(Ot%4){var Lt=ct[pt.charCodeAt(Ot-1)]<<Ot%4*2,Qt=ct[pt.charCodeAt(Ot)]>>>6-Ot%4*2,ir=Lt|Qt;Ct[qt>>>2]|=ir<<24-qt%4*8,qt++}return c.create(Ct,qt)}}(),o.enc.Base64})}(encBase64)),encBase64.exports}var encBase64url={exports:{}},hasRequiredEncBase64url;function requireEncBase64url(){return hasRequiredEncBase64url||(hasRequiredEncBase64url=1,function(s,e){(function(o,a){s.exports=a(requireCore())})(commonjsGlobal$2,function(o){return function(){var a=o,d=a.lib,c=d.WordArray,j=a.enc;j.Base64url={stringify:function(pt,yt){yt===void 0&&(yt=!0);var ct=pt.words,Ct=pt.sigBytes,qt=yt?this._safe_map:this._map;pt.clamp();for(var Ot=[],Lt=0;Lt<Ct;Lt+=3)for(var Qt=ct[Lt>>>2]>>>24-Lt%4*8&255,ir=ct[Lt+1>>>2]>>>24-(Lt+1)%4*8&255,er=ct[Lt+2>>>2]>>>24-(Lt+2)%4*8&255,tr=Qt<<16|ir<<8|er,sr=0;sr<4&&Lt+sr*.75<Ct;sr++)Ot.push(qt.charAt(tr>>>6*(3-sr)&63));var ar=qt.charAt(64);if(ar)for(;Ot.length%4;)Ot.push(ar);return Ot.join("")},parse:function(pt,yt){yt===void 0&&(yt=!0);var ct=pt.length,Ct=yt?this._safe_map:this._map,qt=this._reverseMap;if(!qt){qt=this._reverseMap=[];for(var Ot=0;Ot<Ct.length;Ot++)qt[Ct.charCodeAt(Ot)]=Ot}var Lt=Ct.charAt(64);if(Lt){var Qt=pt.indexOf(Lt);Qt!==-1&&(ct=Qt)}return _e(pt,ct,qt)},_map:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=",_safe_map:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789-_"};function _e(pt,yt,ct){for(var Ct=[],qt=0,Ot=0;Ot<yt;Ot++)if(Ot%4){var Lt=ct[pt.charCodeAt(Ot-1)]<<Ot%4*2,Qt=ct[pt.charCodeAt(Ot)]>>>6-Ot%4*2,ir=Lt|Qt;Ct[qt>>>2]|=ir<<24-qt%4*8,qt++}return c.create(Ct,qt)}}(),o.enc.Base64url})}(encBase64url)),encBase64url.exports}var md5={exports:{}},hasRequiredMd5;function requireMd5(){return hasRequiredMd5||(hasRequiredMd5=1,function(s,e){(function(o,a){s.exports=a(requireCore())})(commonjsGlobal$2,function(o){return function(a){var d=o,c=d.lib,j=c.WordArray,_e=c.Hasher,pt=d.algo,yt=[];(function(){for(var Qt=0;Qt<64;Qt++)yt[Qt]=a.abs(a.sin(Qt+1))*4294967296|0})();var ct=pt.MD5=_e.extend({_doReset:function(){this._hash=new j.init([1732584193,4023233417,2562383102,271733878])},_doProcessBlock:function(Qt,ir){for(var er=0;er<16;er++){var tr=ir+er,sr=Qt[tr];Qt[tr]=(sr<<8|sr>>>24)&16711935|(sr<<24|sr>>>8)&4278255360}var ar=this._hash.words,hr=Qt[ir+0],_r=Qt[ir+1],dr=Qt[ir+2],ur=Qt[ir+3],lr=Qt[ir+4],gr=Qt[ir+5],Mt=Qt[ir+6],h=Qt[ir+7],_=Qt[ir+8],b=Qt[ir+9],lt=Qt[ir+10],Rt=Qt[ir+11],kt=Qt[ir+12],Ft=Qt[ir+13],xt=Qt[ir+14],g=Qt[ir+15],wt=ar[0],nr=ar[1],or=ar[2],cr=ar[3];wt=Ct(wt,nr,or,cr,hr,7,yt[0]),cr=Ct(cr,wt,nr,or,_r,12,yt[1]),or=Ct(or,cr,wt,nr,dr,17,yt[2]),nr=Ct(nr,or,cr,wt,ur,22,yt[3]),wt=Ct(wt,nr,or,cr,lr,7,yt[4]),cr=Ct(cr,wt,nr,or,gr,12,yt[5]),or=Ct(or,cr,wt,nr,Mt,17,yt[6]),nr=Ct(nr,or,cr,wt,h,22,yt[7]),wt=Ct(wt,nr,or,cr,_,7,yt[8]),cr=Ct(cr,wt,nr,or,b,12,yt[9]),or=Ct(or,cr,wt,nr,lt,17,yt[10]),nr=Ct(nr,or,cr,wt,Rt,22,yt[11]),wt=Ct(wt,nr,or,cr,kt,7,yt[12]),cr=Ct(cr,wt,nr,or,Ft,12,yt[13]),or=Ct(or,cr,wt,nr,xt,17,yt[14]),nr=Ct(nr,or,cr,wt,g,22,yt[15]),wt=qt(wt,nr,or,cr,_r,5,yt[16]),cr=qt(cr,wt,nr,or,Mt,9,yt[17]),or=qt(or,cr,wt,nr,Rt,14,yt[18]),nr=qt(nr,or,cr,wt,hr,20,yt[19]),wt=qt(wt,nr,or,cr,gr,5,yt[20]),cr=qt(cr,wt,nr,or,lt,9,yt[21]),or=qt(or,cr,wt,nr,g,14,yt[22]),nr=qt(nr,or,cr,wt,lr,20,yt[23]),wt=qt(wt,nr,or,cr,b,5,yt[24]),cr=qt(cr,wt,nr,or,xt,9,yt[25]),or=qt(or,cr,wt,nr,ur,14,yt[26]),nr=qt(nr,or,cr,wt,_,20,yt[27]),wt=qt(wt,nr,or,cr,Ft,5,yt[28]),cr=qt(cr,wt,nr,or,dr,9,yt[29]),or=qt(or,cr,wt,nr,h,14,yt[30]),nr=qt(nr,or,cr,wt,kt,20,yt[31]),wt=Ot(wt,nr,or,cr,gr,4,yt[32]),cr=Ot(cr,wt,nr,or,_,11,yt[33]),or=Ot(or,cr,wt,nr,Rt,16,yt[34]),nr=Ot(nr,or,cr,wt,xt,23,yt[35]),wt=Ot(wt,nr,or,cr,_r,4,yt[36]),cr=Ot(cr,wt,nr,or,lr,11,yt[37]),or=Ot(or,cr,wt,nr,h,16,yt[38]),nr=Ot(nr,or,cr,wt,lt,23,yt[39]),wt=Ot(wt,nr,or,cr,Ft,4,yt[40]),cr=Ot(cr,wt,nr,or,hr,11,yt[41]),or=Ot(or,cr,wt,nr,ur,16,yt[42]),nr=Ot(nr,or,cr,wt,Mt,23,yt[43]),wt=Ot(wt,nr,or,cr,b,4,yt[44]),cr=Ot(cr,wt,nr,or,kt,11,yt[45]),or=Ot(or,cr,wt,nr,g,16,yt[46]),nr=Ot(nr,or,cr,wt,dr,23,yt[47]),wt=Lt(wt,nr,or,cr,hr,6,yt[48]),cr=Lt(cr,wt,nr,or,h,10,yt[49]),or=Lt(or,cr,wt,nr,xt,15,yt[50]),nr=Lt(nr,or,cr,wt,gr,21,yt[51]),wt=Lt(wt,nr,or,cr,kt,6,yt[52]),cr=Lt(cr,wt,nr,or,ur,10,yt[53]),or=Lt(or,cr,wt,nr,lt,15,yt[54]),nr=Lt(nr,or,cr,wt,_r,21,yt[55]),wt=Lt(wt,nr,or,cr,_,6,yt[56]),cr=Lt(cr,wt,nr,or,g,10,yt[57]),or=Lt(or,cr,wt,nr,Mt,15,yt[58]),nr=Lt(nr,or,cr,wt,Ft,21,yt[59]),wt=Lt(wt,nr,or,cr,lr,6,yt[60]),cr=Lt(cr,wt,nr,or,Rt,10,yt[61]),or=Lt(or,cr,wt,nr,dr,15,yt[62]),nr=Lt(nr,or,cr,wt,b,21,yt[63]),ar[0]=ar[0]+wt|0,ar[1]=ar[1]+nr|0,ar[2]=ar[2]+or|0,ar[3]=ar[3]+cr|0},_doFinalize:function(){var Qt=this._data,ir=Qt.words,er=this._nDataBytes*8,tr=Qt.sigBytes*8;ir[tr>>>5]|=128<<24-tr%32;var sr=a.floor(er/4294967296),ar=er;ir[(tr+64>>>9<<4)+15]=(sr<<8|sr>>>24)&16711935|(sr<<24|sr>>>8)&4278255360,ir[(tr+64>>>9<<4)+14]=(ar<<8|ar>>>24)&16711935|(ar<<24|ar>>>8)&4278255360,Qt.sigBytes=(ir.length+1)*4,this._process();for(var hr=this._hash,_r=hr.words,dr=0;dr<4;dr++){var ur=_r[dr];_r[dr]=(ur<<8|ur>>>24)&16711935|(ur<<24|ur>>>8)&4278255360}return hr},clone:function(){var Qt=_e.clone.call(this);return Qt._hash=this._hash.clone(),Qt}});function Ct(Qt,ir,er,tr,sr,ar,hr){var _r=Qt+(ir&er|~ir&tr)+sr+hr;return(_r<<ar|_r>>>32-ar)+ir}function qt(Qt,ir,er,tr,sr,ar,hr){var _r=Qt+(ir&tr|er&~tr)+sr+hr;return(_r<<ar|_r>>>32-ar)+ir}function Ot(Qt,ir,er,tr,sr,ar,hr){var _r=Qt+(ir^er^tr)+sr+hr;return(_r<<ar|_r>>>32-ar)+ir}function Lt(Qt,ir,er,tr,sr,ar,hr){var _r=Qt+(er^(ir|~tr))+sr+hr;return(_r<<ar|_r>>>32-ar)+ir}d.MD5=_e._createHelper(ct),d.HmacMD5=_e._createHmacHelper(ct)}(Math),o.MD5})}(md5)),md5.exports}var sha1={exports:{}},hasRequiredSha1;function requireSha1(){return hasRequiredSha1||(hasRequiredSha1=1,function(s,e){(function(o,a){s.exports=a(requireCore())})(commonjsGlobal$2,function(o){return function(){var a=o,d=a.lib,c=d.WordArray,j=d.Hasher,_e=a.algo,pt=[],yt=_e.SHA1=j.extend({_doReset:function(){this._hash=new c.init([1732584193,4023233417,2562383102,271733878,3285377520])},_doProcessBlock:function(ct,Ct){for(var qt=this._hash.words,Ot=qt[0],Lt=qt[1],Qt=qt[2],ir=qt[3],er=qt[4],tr=0;tr<80;tr++){if(tr<16)pt[tr]=ct[Ct+tr]|0;else{var sr=pt[tr-3]^pt[tr-8]^pt[tr-14]^pt[tr-16];pt[tr]=sr<<1|sr>>>31}var ar=(Ot<<5|Ot>>>27)+er+pt[tr];tr<20?ar+=(Lt&Qt|~Lt&ir)+1518500249:tr<40?ar+=(Lt^Qt^ir)+1859775393:tr<60?ar+=(Lt&Qt|Lt&ir|Qt&ir)-1894007588:ar+=(Lt^Qt^ir)-899497514,er=ir,ir=Qt,Qt=Lt<<30|Lt>>>2,Lt=Ot,Ot=ar}qt[0]=qt[0]+Ot|0,qt[1]=qt[1]+Lt|0,qt[2]=qt[2]+Qt|0,qt[3]=qt[3]+ir|0,qt[4]=qt[4]+er|0},_doFinalize:function(){var ct=this._data,Ct=ct.words,qt=this._nDataBytes*8,Ot=ct.sigBytes*8;return Ct[Ot>>>5]|=128<<24-Ot%32,Ct[(Ot+64>>>9<<4)+14]=Math.floor(qt/4294967296),Ct[(Ot+64>>>9<<4)+15]=qt,ct.sigBytes=Ct.length*4,this._process(),this._hash},clone:function(){var ct=j.clone.call(this);return ct._hash=this._hash.clone(),ct}});a.SHA1=j._createHelper(yt),a.HmacSHA1=j._createHmacHelper(yt)}(),o.SHA1})}(sha1)),sha1.exports}var sha256={exports:{}},hasRequiredSha256;function requireSha256(){return hasRequiredSha256||(hasRequiredSha256=1,function(s,e){(function(o,a){s.exports=a(requireCore())})(commonjsGlobal$2,function(o){return function(a){var d=o,c=d.lib,j=c.WordArray,_e=c.Hasher,pt=d.algo,yt=[],ct=[];(function(){function Ot(er){for(var tr=a.sqrt(er),sr=2;sr<=tr;sr++)if(!(er%sr))return!1;return!0}function Lt(er){return(er-(er|0))*4294967296|0}for(var Qt=2,ir=0;ir<64;)Ot(Qt)&&(ir<8&&(yt[ir]=Lt(a.pow(Qt,1/2))),ct[ir]=Lt(a.pow(Qt,1/3)),ir++),Qt++})();var Ct=[],qt=pt.SHA256=_e.extend({_doReset:function(){this._hash=new j.init(yt.slice(0))},_doProcessBlock:function(Ot,Lt){for(var Qt=this._hash.words,ir=Qt[0],er=Qt[1],tr=Qt[2],sr=Qt[3],ar=Qt[4],hr=Qt[5],_r=Qt[6],dr=Qt[7],ur=0;ur<64;ur++){if(ur<16)Ct[ur]=Ot[Lt+ur]|0;else{var lr=Ct[ur-15],gr=(lr<<25|lr>>>7)^(lr<<14|lr>>>18)^lr>>>3,Mt=Ct[ur-2],h=(Mt<<15|Mt>>>17)^(Mt<<13|Mt>>>19)^Mt>>>10;Ct[ur]=gr+Ct[ur-7]+h+Ct[ur-16]}var _=ar&hr^~ar&_r,b=ir&er^ir&tr^er&tr,lt=(ir<<30|ir>>>2)^(ir<<19|ir>>>13)^(ir<<10|ir>>>22),Rt=(ar<<26|ar>>>6)^(ar<<21|ar>>>11)^(ar<<7|ar>>>25),kt=dr+Rt+_+ct[ur]+Ct[ur],Ft=lt+b;dr=_r,_r=hr,hr=ar,ar=sr+kt|0,sr=tr,tr=er,er=ir,ir=kt+Ft|0}Qt[0]=Qt[0]+ir|0,Qt[1]=Qt[1]+er|0,Qt[2]=Qt[2]+tr|0,Qt[3]=Qt[3]+sr|0,Qt[4]=Qt[4]+ar|0,Qt[5]=Qt[5]+hr|0,Qt[6]=Qt[6]+_r|0,Qt[7]=Qt[7]+dr|0},_doFinalize:function(){var Ot=this._data,Lt=Ot.words,Qt=this._nDataBytes*8,ir=Ot.sigBytes*8;return Lt[ir>>>5]|=128<<24-ir%32,Lt[(ir+64>>>9<<4)+14]=a.floor(Qt/4294967296),Lt[(ir+64>>>9<<4)+15]=Qt,Ot.sigBytes=Lt.length*4,this._process(),this._hash},clone:function(){var Ot=_e.clone.call(this);return Ot._hash=this._hash.clone(),Ot}});d.SHA256=_e._createHelper(qt),d.HmacSHA256=_e._createHmacHelper(qt)}(Math),o.SHA256})}(sha256)),sha256.exports}var sha224={exports:{}},hasRequiredSha224;function requireSha224(){return hasRequiredSha224||(hasRequiredSha224=1,function(s,e){(function(o,a,d){s.exports=a(requireCore(),requireSha256())})(commonjsGlobal$2,function(o){return function(){var a=o,d=a.lib,c=d.WordArray,j=a.algo,_e=j.SHA256,pt=j.SHA224=_e.extend({_doReset:function(){this._hash=new c.init([3238371032,914150663,812702999,4144912697,4290775857,1750603025,1694076839,3204075428])},_doFinalize:function(){var yt=_e._doFinalize.call(this);return yt.sigBytes-=4,yt}});a.SHA224=_e._createHelper(pt),a.HmacSHA224=_e._createHmacHelper(pt)}(),o.SHA224})}(sha224)),sha224.exports}var sha512={exports:{}},hasRequiredSha512;function requireSha512(){return hasRequiredSha512||(hasRequiredSha512=1,function(s,e){(function(o,a,d){s.exports=a(requireCore(),requireX64Core())})(commonjsGlobal$2,function(o){return function(){var a=o,d=a.lib,c=d.Hasher,j=a.x64,_e=j.Word,pt=j.WordArray,yt=a.algo;function ct(){return _e.create.apply(_e,arguments)}var Ct=[ct(1116352408,3609767458),ct(1899447441,602891725),ct(3049323471,3964484399),ct(3921009573,2173295548),ct(961987163,4081628472),ct(1508970993,3053834265),ct(2453635748,2937671579),ct(2870763221,3664609560),ct(3624381080,2734883394),ct(310598401,1164996542),ct(607225278,1323610764),ct(1426881987,3590304994),ct(1925078388,4068182383),ct(2162078206,991336113),ct(2614888103,633803317),ct(3248222580,3479774868),ct(3835390401,2666613458),ct(4022224774,944711139),ct(264347078,2341262773),ct(604807628,2007800933),ct(770255983,1495990901),ct(1249150122,1856431235),ct(1555081692,3175218132),ct(1996064986,2198950837),ct(2554220882,3999719339),ct(2821834349,766784016),ct(2952996808,2566594879),ct(3210313671,3203337956),ct(3336571891,1034457026),ct(3584528711,2466948901),ct(113926993,3758326383),ct(338241895,168717936),ct(666307205,1188179964),ct(773529912,1546045734),ct(1294757372,1522805485),ct(1396182291,2643833823),ct(1695183700,2343527390),ct(1986661051,1014477480),ct(2177026350,1206759142),ct(2456956037,344077627),ct(2730485921,1290863460),ct(2820302411,3158454273),ct(3259730800,3505952657),ct(3345764771,106217008),ct(3516065817,3606008344),ct(3600352804,1432725776),ct(4094571909,1467031594),ct(275423344,851169720),ct(430227734,3100823752),ct(506948616,1363258195),ct(659060556,3750685593),ct(883997877,3785050280),ct(958139571,3318307427),ct(1322822218,3812723403),ct(1537002063,2003034995),ct(1747873779,3602036899),ct(1955562222,1575990012),ct(2024104815,1125592928),ct(2227730452,2716904306),ct(2361852424,442776044),ct(2428436474,593698344),ct(2756734187,3733110249),ct(3204031479,2999351573),ct(3329325298,3815920427),ct(3391569614,3928383900),ct(3515267271,566280711),ct(3940187606,3454069534),ct(4118630271,4000239992),ct(116418474,1914138554),ct(174292421,2731055270),ct(289380356,3203993006),ct(460393269,320620315),ct(685471733,587496836),ct(852142971,1086792851),ct(1017036298,365543100),ct(1126000580,2618297676),ct(1288033470,3409855158),ct(1501505948,4234509866),ct(1607167915,987167468),ct(1816402316,1246189591)],qt=[];(function(){for(var Lt=0;Lt<80;Lt++)qt[Lt]=ct()})();var Ot=yt.SHA512=c.extend({_doReset:function(){this._hash=new pt.init([new _e.init(1779033703,4089235720),new _e.init(3144134277,2227873595),new _e.init(1013904242,4271175723),new _e.init(2773480762,1595750129),new _e.init(1359893119,2917565137),new _e.init(2600822924,725511199),new _e.init(528734635,4215389547),new _e.init(1541459225,327033209)])},_doProcessBlock:function(Lt,Qt){for(var ir=this._hash.words,er=ir[0],tr=ir[1],sr=ir[2],ar=ir[3],hr=ir[4],_r=ir[5],dr=ir[6],ur=ir[7],lr=er.high,gr=er.low,Mt=tr.high,h=tr.low,_=sr.high,b=sr.low,lt=ar.high,Rt=ar.low,kt=hr.high,Ft=hr.low,xt=_r.high,g=_r.low,wt=dr.high,nr=dr.low,or=ur.high,cr=ur.low,Rr=lr,Ar=gr,pr=Mt,wr=h,Tr=_,Ir=b,Sr=lt,br=Rt,kr=kt,Qr=Ft,qr=xt,$r=g,gn=wt,Lr=nr,Dr=or,En=cr,Fr=0;Fr<80;Fr++){var zr,yn,Nr=qt[Fr];if(Fr<16)yn=Nr.high=Lt[Qt+Fr*2]|0,zr=Nr.low=Lt[Qt+Fr*2+1]|0;else{var Wr=qt[Fr-15],xn=Wr.high,Or=Wr.low,Yr=(xn>>>1|Or<<31)^(xn>>>8|Or<<24)^xn>>>7,Pn=(Or>>>1|xn<<31)^(Or>>>8|xn<<24)^(Or>>>7|xn<<25),xr=qt[Fr-2],fr=xr.high,yr=xr.low,Mr=(fr>>>19|yr<<13)^(fr<<3|yr>>>29)^fr>>>6,Pr=(yr>>>19|fr<<13)^(yr<<3|fr>>>29)^(yr>>>6|fr<<26),Vr=qt[Fr-7],Br=Vr.high,jr=Vr.low,An=qt[Fr-16],Ur=An.high,Gr=An.low;zr=Pn+jr,yn=Yr+Br+(zr>>>0<Pn>>>0?1:0),zr=zr+Pr,yn=yn+Mr+(zr>>>0<Pr>>>0?1:0),zr=zr+Gr,yn=yn+Ur+(zr>>>0<Gr>>>0?1:0),Nr.high=yn,Nr.low=zr}var wn=kr&qr^~kr&gn,Xr=Qr&$r^~Qr&Lr,hn=Rr&pr^Rr&Tr^pr&Tr,In=Ar&wr^Ar&Ir^wr&Ir,Jr=(Rr>>>28|Ar<<4)^(Rr<<30|Ar>>>2)^(Rr<<25|Ar>>>7),fn=(Ar>>>28|Rr<<4)^(Ar<<30|Rr>>>2)^(Ar<<25|Rr>>>7),kn=(kr>>>14|Qr<<18)^(kr>>>18|Qr<<14)^(kr<<23|Qr>>>9),Kr=(Qr>>>14|kr<<18)^(Qr>>>18|kr<<14)^(Qr<<23|kr>>>9),dn=Ct[Fr],Rn=dn.high,Zr=dn.low,un=En+Kr,Mn=Dr+kn+(un>>>0<En>>>0?1:0),un=un+Xr,Mn=Mn+wn+(un>>>0<Xr>>>0?1:0),un=un+Zr,Mn=Mn+Rn+(un>>>0<Zr>>>0?1:0),un=un+zr,Mn=Mn+yn+(un>>>0<zr>>>0?1:0),rn=fn+In,pn=Jr+hn+(rn>>>0<fn>>>0?1:0);Dr=gn,En=Lr,gn=qr,Lr=$r,qr=kr,$r=Qr,Qr=br+un|0,kr=Sr+Mn+(Qr>>>0<br>>>0?1:0)|0,Sr=Tr,br=Ir,Tr=pr,Ir=wr,pr=Rr,wr=Ar,Ar=un+rn|0,Rr=Mn+pn+(Ar>>>0<un>>>0?1:0)|0}gr=er.low=gr+Ar,er.high=lr+Rr+(gr>>>0<Ar>>>0?1:0),h=tr.low=h+wr,tr.high=Mt+pr+(h>>>0<wr>>>0?1:0),b=sr.low=b+Ir,sr.high=_+Tr+(b>>>0<Ir>>>0?1:0),Rt=ar.low=Rt+br,ar.high=lt+Sr+(Rt>>>0<br>>>0?1:0),Ft=hr.low=Ft+Qr,hr.high=kt+kr+(Ft>>>0<Qr>>>0?1:0),g=_r.low=g+$r,_r.high=xt+qr+(g>>>0<$r>>>0?1:0),nr=dr.low=nr+Lr,dr.high=wt+gn+(nr>>>0<Lr>>>0?1:0),cr=ur.low=cr+En,ur.high=or+Dr+(cr>>>0<En>>>0?1:0)},_doFinalize:function(){var Lt=this._data,Qt=Lt.words,ir=this._nDataBytes*8,er=Lt.sigBytes*8;Qt[er>>>5]|=128<<24-er%32,Qt[(er+128>>>10<<5)+30]=Math.floor(ir/4294967296),Qt[(er+128>>>10<<5)+31]=ir,Lt.sigBytes=Qt.length*4,this._process();var tr=this._hash.toX32();return tr},clone:function(){var Lt=c.clone.call(this);return Lt._hash=this._hash.clone(),Lt},blockSize:1024/32});a.SHA512=c._createHelper(Ot),a.HmacSHA512=c._createHmacHelper(Ot)}(),o.SHA512})}(sha512)),sha512.exports}var sha384={exports:{}},hasRequiredSha384;function requireSha384(){return hasRequiredSha384||(hasRequiredSha384=1,function(s,e){(function(o,a,d){s.exports=a(requireCore(),requireX64Core(),requireSha512())})(commonjsGlobal$2,function(o){return function(){var a=o,d=a.x64,c=d.Word,j=d.WordArray,_e=a.algo,pt=_e.SHA512,yt=_e.SHA384=pt.extend({_doReset:function(){this._hash=new j.init([new c.init(3418070365,3238371032),new c.init(1654270250,914150663),new c.init(2438529370,812702999),new c.init(355462360,4144912697),new c.init(1731405415,4290775857),new c.init(2394180231,1750603025),new c.init(3675008525,1694076839),new c.init(1203062813,3204075428)])},_doFinalize:function(){var ct=pt._doFinalize.call(this);return ct.sigBytes-=16,ct}});a.SHA384=pt._createHelper(yt),a.HmacSHA384=pt._createHmacHelper(yt)}(),o.SHA384})}(sha384)),sha384.exports}var sha3={exports:{}},hasRequiredSha3;function requireSha3(){return hasRequiredSha3||(hasRequiredSha3=1,function(s,e){(function(o,a,d){s.exports=a(requireCore(),requireX64Core())})(commonjsGlobal$2,function(o){return function(a){var d=o,c=d.lib,j=c.WordArray,_e=c.Hasher,pt=d.x64,yt=pt.Word,ct=d.algo,Ct=[],qt=[],Ot=[];(function(){for(var ir=1,er=0,tr=0;tr<24;tr++){Ct[ir+5*er]=(tr+1)*(tr+2)/2%64;var sr=er%5,ar=(2*ir+3*er)%5;ir=sr,er=ar}for(var ir=0;ir<5;ir++)for(var er=0;er<5;er++)qt[ir+5*er]=er+(2*ir+3*er)%5*5;for(var hr=1,_r=0;_r<24;_r++){for(var dr=0,ur=0,lr=0;lr<7;lr++){if(hr&1){var gr=(1<<lr)-1;gr<32?ur^=1<<gr:dr^=1<<gr-32}hr&128?hr=hr<<1^113:hr<<=1}Ot[_r]=yt.create(dr,ur)}})();var Lt=[];(function(){for(var ir=0;ir<25;ir++)Lt[ir]=yt.create()})();var Qt=ct.SHA3=_e.extend({cfg:_e.cfg.extend({outputLength:512}),_doReset:function(){for(var ir=this._state=[],er=0;er<25;er++)ir[er]=new yt.init;this.blockSize=(1600-2*this.cfg.outputLength)/32},_doProcessBlock:function(ir,er){for(var tr=this._state,sr=this.blockSize/2,ar=0;ar<sr;ar++){var hr=ir[er+2*ar],_r=ir[er+2*ar+1];hr=(hr<<8|hr>>>24)&16711935|(hr<<24|hr>>>8)&4278255360,_r=(_r<<8|_r>>>24)&16711935|(_r<<24|_r>>>8)&4278255360;var dr=tr[ar];dr.high^=_r,dr.low^=hr}for(var ur=0;ur<24;ur++){for(var lr=0;lr<5;lr++){for(var gr=0,Mt=0,h=0;h<5;h++){var dr=tr[lr+5*h];gr^=dr.high,Mt^=dr.low}var _=Lt[lr];_.high=gr,_.low=Mt}for(var lr=0;lr<5;lr++)for(var b=Lt[(lr+4)%5],lt=Lt[(lr+1)%5],Rt=lt.high,kt=lt.low,gr=b.high^(Rt<<1|kt>>>31),Mt=b.low^(kt<<1|Rt>>>31),h=0;h<5;h++){var dr=tr[lr+5*h];dr.high^=gr,dr.low^=Mt}for(var Ft=1;Ft<25;Ft++){var gr,Mt,dr=tr[Ft],xt=dr.high,g=dr.low,wt=Ct[Ft];wt<32?(gr=xt<<wt|g>>>32-wt,Mt=g<<wt|xt>>>32-wt):(gr=g<<wt-32|xt>>>64-wt,Mt=xt<<wt-32|g>>>64-wt);var nr=Lt[qt[Ft]];nr.high=gr,nr.low=Mt}var or=Lt[0],cr=tr[0];or.high=cr.high,or.low=cr.low;for(var lr=0;lr<5;lr++)for(var h=0;h<5;h++){var Ft=lr+5*h,dr=tr[Ft],Rr=Lt[Ft],Ar=Lt[(lr+1)%5+5*h],pr=Lt[(lr+2)%5+5*h];dr.high=Rr.high^~Ar.high&pr.high,dr.low=Rr.low^~Ar.low&pr.low}var dr=tr[0],wr=Ot[ur];dr.high^=wr.high,dr.low^=wr.low}},_doFinalize:function(){var ir=this._data,er=ir.words;this._nDataBytes*8;var tr=ir.sigBytes*8,sr=this.blockSize*32;er[tr>>>5]|=1<<24-tr%32,er[(a.ceil((tr+1)/sr)*sr>>>5)-1]|=128,ir.sigBytes=er.length*4,this._process();for(var ar=this._state,hr=this.cfg.outputLength/8,_r=hr/8,dr=[],ur=0;ur<_r;ur++){var lr=ar[ur],gr=lr.high,Mt=lr.low;gr=(gr<<8|gr>>>24)&16711935|(gr<<24|gr>>>8)&4278255360,Mt=(Mt<<8|Mt>>>24)&16711935|(Mt<<24|Mt>>>8)&4278255360,dr.push(Mt),dr.push(gr)}return new j.init(dr,hr)},clone:function(){for(var ir=_e.clone.call(this),er=ir._state=this._state.slice(0),tr=0;tr<25;tr++)er[tr]=er[tr].clone();return ir}});d.SHA3=_e._createHelper(Qt),d.HmacSHA3=_e._createHmacHelper(Qt)}(Math),o.SHA3})}(sha3)),sha3.exports}var ripemd160={exports:{}},hasRequiredRipemd160;function requireRipemd160(){return hasRequiredRipemd160||(hasRequiredRipemd160=1,function(s,e){(function(o,a){s.exports=a(requireCore())})(commonjsGlobal$2,function(o){/** @preserve
			(c) 2012 by Cdric Mesnil. All rights reserved.

			Redistribution and use in source and binary forms, with or without modification, are permitted provided that the following conditions are met:

			    - Redistributions of source code must retain the above copyright notice, this list of conditions and the following disclaimer.
			    - Redistributions in binary form must reproduce the above copyright notice, this list of conditions and the following disclaimer in the documentation and/or other materials provided with the distribution.

			THIS SOFTWARE IS PROVIDED BY THE COPYRIGHT HOLDERS AND CONTRIBUTORS "AS IS" AND ANY EXPRESS OR IMPLIED WARRANTIES, INCLUDING, BUT NOT LIMITED TO, THE IMPLIED WARRANTIES OF MERCHANTABILITY AND FITNESS FOR A PARTICULAR PURPOSE ARE DISCLAIMED. IN NO EVENT SHALL THE COPYRIGHT HOLDER OR CONTRIBUTORS BE LIABLE FOR ANY DIRECT, INDIRECT, INCIDENTAL, SPECIAL, EXEMPLARY, OR CONSEQUENTIAL DAMAGES (INCLUDING, BUT NOT LIMITED TO, PROCUREMENT OF SUBSTITUTE GOODS OR SERVICES; LOSS OF USE, DATA, OR PROFITS; OR BUSINESS INTERRUPTION) HOWEVER CAUSED AND ON ANY THEORY OF LIABILITY, WHETHER IN CONTRACT, STRICT LIABILITY, OR TORT (INCLUDING NEGLIGENCE OR OTHERWISE) ARISING IN ANY WAY OUT OF THE USE OF THIS SOFTWARE, EVEN IF ADVISED OF THE POSSIBILITY OF SUCH DAMAGE.
			*/return function(a){var d=o,c=d.lib,j=c.WordArray,_e=c.Hasher,pt=d.algo,yt=j.create([0,1,2,3,4,5,6,7,8,9,10,11,12,13,14,15,7,4,13,1,10,6,15,3,12,0,9,5,2,14,11,8,3,10,14,4,9,15,8,1,2,7,0,6,13,11,5,12,1,9,11,10,0,8,12,4,13,3,7,15,14,5,6,2,4,0,5,9,7,12,2,10,14,1,3,8,11,6,15,13]),ct=j.create([5,14,7,0,9,2,11,4,13,6,15,8,1,10,3,12,6,11,3,7,0,13,5,10,14,15,8,12,4,9,1,2,15,5,1,3,7,14,6,9,11,8,12,2,10,0,4,13,8,6,4,1,3,11,15,0,5,12,2,13,9,7,10,14,12,15,10,4,1,5,8,7,6,2,13,14,0,3,9,11]),Ct=j.create([11,14,15,12,5,8,7,9,11,13,14,15,6,7,9,8,7,6,8,13,11,9,7,15,7,12,15,9,11,7,13,12,11,13,6,7,14,9,13,15,14,8,13,6,5,12,7,5,11,12,14,15,14,15,9,8,9,14,5,6,8,6,5,12,9,15,5,11,6,8,13,12,5,12,13,14,11,8,5,6]),qt=j.create([8,9,9,11,13,15,15,5,7,7,8,11,14,14,12,6,9,13,15,7,12,8,9,11,7,7,12,7,6,15,13,11,9,7,15,11,8,6,6,14,12,13,5,14,13,13,7,5,15,5,8,11,14,14,6,14,6,9,12,9,12,5,15,8,8,5,12,9,12,5,14,6,8,13,6,5,15,13,11,11]),Ot=j.create([0,1518500249,1859775393,2400959708,2840853838]),Lt=j.create([1352829926,1548603684,1836072691,2053994217,0]),Qt=pt.RIPEMD160=_e.extend({_doReset:function(){this._hash=j.create([1732584193,4023233417,2562383102,271733878,3285377520])},_doProcessBlock:function(_r,dr){for(var ur=0;ur<16;ur++){var lr=dr+ur,gr=_r[lr];_r[lr]=(gr<<8|gr>>>24)&16711935|(gr<<24|gr>>>8)&4278255360}var Mt=this._hash.words,h=Ot.words,_=Lt.words,b=yt.words,lt=ct.words,Rt=Ct.words,kt=qt.words,Ft,xt,g,wt,nr,or,cr,Rr,Ar,pr;or=Ft=Mt[0],cr=xt=Mt[1],Rr=g=Mt[2],Ar=wt=Mt[3],pr=nr=Mt[4];for(var wr,ur=0;ur<80;ur+=1)wr=Ft+_r[dr+b[ur]]|0,ur<16?wr+=ir(xt,g,wt)+h[0]:ur<32?wr+=er(xt,g,wt)+h[1]:ur<48?wr+=tr(xt,g,wt)+h[2]:ur<64?wr+=sr(xt,g,wt)+h[3]:wr+=ar(xt,g,wt)+h[4],wr=wr|0,wr=hr(wr,Rt[ur]),wr=wr+nr|0,Ft=nr,nr=wt,wt=hr(g,10),g=xt,xt=wr,wr=or+_r[dr+lt[ur]]|0,ur<16?wr+=ar(cr,Rr,Ar)+_[0]:ur<32?wr+=sr(cr,Rr,Ar)+_[1]:ur<48?wr+=tr(cr,Rr,Ar)+_[2]:ur<64?wr+=er(cr,Rr,Ar)+_[3]:wr+=ir(cr,Rr,Ar)+_[4],wr=wr|0,wr=hr(wr,kt[ur]),wr=wr+pr|0,or=pr,pr=Ar,Ar=hr(Rr,10),Rr=cr,cr=wr;wr=Mt[1]+g+Ar|0,Mt[1]=Mt[2]+wt+pr|0,Mt[2]=Mt[3]+nr+or|0,Mt[3]=Mt[4]+Ft+cr|0,Mt[4]=Mt[0]+xt+Rr|0,Mt[0]=wr},_doFinalize:function(){var _r=this._data,dr=_r.words,ur=this._nDataBytes*8,lr=_r.sigBytes*8;dr[lr>>>5]|=128<<24-lr%32,dr[(lr+64>>>9<<4)+14]=(ur<<8|ur>>>24)&16711935|(ur<<24|ur>>>8)&4278255360,_r.sigBytes=(dr.length+1)*4,this._process();for(var gr=this._hash,Mt=gr.words,h=0;h<5;h++){var _=Mt[h];Mt[h]=(_<<8|_>>>24)&16711935|(_<<24|_>>>8)&4278255360}return gr},clone:function(){var _r=_e.clone.call(this);return _r._hash=this._hash.clone(),_r}});function ir(_r,dr,ur){return _r^dr^ur}function er(_r,dr,ur){return _r&dr|~_r&ur}function tr(_r,dr,ur){return(_r|~dr)^ur}function sr(_r,dr,ur){return _r&ur|dr&~ur}function ar(_r,dr,ur){return _r^(dr|~ur)}function hr(_r,dr){return _r<<dr|_r>>>32-dr}d.RIPEMD160=_e._createHelper(Qt),d.HmacRIPEMD160=_e._createHmacHelper(Qt)}(),o.RIPEMD160})}(ripemd160)),ripemd160.exports}var hmac={exports:{}},hasRequiredHmac;function requireHmac(){return hasRequiredHmac||(hasRequiredHmac=1,function(s,e){(function(o,a){s.exports=a(requireCore())})(commonjsGlobal$2,function(o){(function(){var a=o,d=a.lib,c=d.Base,j=a.enc,_e=j.Utf8,pt=a.algo;pt.HMAC=c.extend({init:function(yt,ct){yt=this._hasher=new yt.init,typeof ct=="string"&&(ct=_e.parse(ct));var Ct=yt.blockSize,qt=Ct*4;ct.sigBytes>qt&&(ct=yt.finalize(ct)),ct.clamp();for(var Ot=this._oKey=ct.clone(),Lt=this._iKey=ct.clone(),Qt=Ot.words,ir=Lt.words,er=0;er<Ct;er++)Qt[er]^=1549556828,ir[er]^=909522486;Ot.sigBytes=Lt.sigBytes=qt,this.reset()},reset:function(){var yt=this._hasher;yt.reset(),yt.update(this._iKey)},update:function(yt){return this._hasher.update(yt),this},finalize:function(yt){var ct=this._hasher,Ct=ct.finalize(yt);ct.reset();var qt=ct.finalize(this._oKey.clone().concat(Ct));return qt}})})()})}(hmac)),hmac.exports}var pbkdf2={exports:{}},hasRequiredPbkdf2;function requirePbkdf2(){return hasRequiredPbkdf2||(hasRequiredPbkdf2=1,function(s,e){(function(o,a,d){s.exports=a(requireCore(),requireSha256(),requireHmac())})(commonjsGlobal$2,function(o){return function(){var a=o,d=a.lib,c=d.Base,j=d.WordArray,_e=a.algo,pt=_e.SHA256,yt=_e.HMAC,ct=_e.PBKDF2=c.extend({cfg:c.extend({keySize:128/32,hasher:pt,iterations:25e4}),init:function(Ct){this.cfg=this.cfg.extend(Ct)},compute:function(Ct,qt){for(var Ot=this.cfg,Lt=yt.create(Ot.hasher,Ct),Qt=j.create(),ir=j.create([1]),er=Qt.words,tr=ir.words,sr=Ot.keySize,ar=Ot.iterations;er.length<sr;){var hr=Lt.update(qt).finalize(ir);Lt.reset();for(var _r=hr.words,dr=_r.length,ur=hr,lr=1;lr<ar;lr++){ur=Lt.finalize(ur),Lt.reset();for(var gr=ur.words,Mt=0;Mt<dr;Mt++)_r[Mt]^=gr[Mt]}Qt.concat(hr),tr[0]++}return Qt.sigBytes=sr*4,Qt}});a.PBKDF2=function(Ct,qt,Ot){return ct.create(Ot).compute(Ct,qt)}}(),o.PBKDF2})}(pbkdf2)),pbkdf2.exports}var evpkdf={exports:{}},hasRequiredEvpkdf;function requireEvpkdf(){return hasRequiredEvpkdf||(hasRequiredEvpkdf=1,function(s,e){(function(o,a,d){s.exports=a(requireCore(),requireSha1(),requireHmac())})(commonjsGlobal$2,function(o){return function(){var a=o,d=a.lib,c=d.Base,j=d.WordArray,_e=a.algo,pt=_e.MD5,yt=_e.EvpKDF=c.extend({cfg:c.extend({keySize:128/32,hasher:pt,iterations:1}),init:function(ct){this.cfg=this.cfg.extend(ct)},compute:function(ct,Ct){for(var qt,Ot=this.cfg,Lt=Ot.hasher.create(),Qt=j.create(),ir=Qt.words,er=Ot.keySize,tr=Ot.iterations;ir.length<er;){qt&&Lt.update(qt),qt=Lt.update(ct).finalize(Ct),Lt.reset();for(var sr=1;sr<tr;sr++)qt=Lt.finalize(qt),Lt.reset();Qt.concat(qt)}return Qt.sigBytes=er*4,Qt}});a.EvpKDF=function(ct,Ct,qt){return yt.create(qt).compute(ct,Ct)}}(),o.EvpKDF})}(evpkdf)),evpkdf.exports}var cipherCore={exports:{}},hasRequiredCipherCore;function requireCipherCore(){return hasRequiredCipherCore||(hasRequiredCipherCore=1,function(s,e){(function(o,a,d){s.exports=a(requireCore(),requireEvpkdf())})(commonjsGlobal$2,function(o){o.lib.Cipher||function(a){var d=o,c=d.lib,j=c.Base,_e=c.WordArray,pt=c.BufferedBlockAlgorithm,yt=d.enc;yt.Utf8;var ct=yt.Base64,Ct=d.algo,qt=Ct.EvpKDF,Ot=c.Cipher=pt.extend({cfg:j.extend(),createEncryptor:function(gr,Mt){return this.create(this._ENC_XFORM_MODE,gr,Mt)},createDecryptor:function(gr,Mt){return this.create(this._DEC_XFORM_MODE,gr,Mt)},init:function(gr,Mt,h){this.cfg=this.cfg.extend(h),this._xformMode=gr,this._key=Mt,this.reset()},reset:function(){pt.reset.call(this),this._doReset()},process:function(gr){return this._append(gr),this._process()},finalize:function(gr){gr&&this._append(gr);var Mt=this._doFinalize();return Mt},keySize:128/32,ivSize:128/32,_ENC_XFORM_MODE:1,_DEC_XFORM_MODE:2,_createHelper:function(){function gr(Mt){return typeof Mt=="string"?lr:_r}return function(Mt){return{encrypt:function(h,_,b){return gr(_).encrypt(Mt,h,_,b)},decrypt:function(h,_,b){return gr(_).decrypt(Mt,h,_,b)}}}}()});c.StreamCipher=Ot.extend({_doFinalize:function(){var gr=this._process(!0);return gr},blockSize:1});var Lt=d.mode={},Qt=c.BlockCipherMode=j.extend({createEncryptor:function(gr,Mt){return this.Encryptor.create(gr,Mt)},createDecryptor:function(gr,Mt){return this.Decryptor.create(gr,Mt)},init:function(gr,Mt){this._cipher=gr,this._iv=Mt}}),ir=Lt.CBC=function(){var gr=Qt.extend();gr.Encryptor=gr.extend({processBlock:function(h,_){var b=this._cipher,lt=b.blockSize;Mt.call(this,h,_,lt),b.encryptBlock(h,_),this._prevBlock=h.slice(_,_+lt)}}),gr.Decryptor=gr.extend({processBlock:function(h,_){var b=this._cipher,lt=b.blockSize,Rt=h.slice(_,_+lt);b.decryptBlock(h,_),Mt.call(this,h,_,lt),this._prevBlock=Rt}});function Mt(h,_,b){var lt,Rt=this._iv;Rt?(lt=Rt,this._iv=a):lt=this._prevBlock;for(var kt=0;kt<b;kt++)h[_+kt]^=lt[kt]}return gr}(),er=d.pad={},tr=er.Pkcs7={pad:function(gr,Mt){for(var h=Mt*4,_=h-gr.sigBytes%h,b=_<<24|_<<16|_<<8|_,lt=[],Rt=0;Rt<_;Rt+=4)lt.push(b);var kt=_e.create(lt,_);gr.concat(kt)},unpad:function(gr){var Mt=gr.words[gr.sigBytes-1>>>2]&255;gr.sigBytes-=Mt}};c.BlockCipher=Ot.extend({cfg:Ot.cfg.extend({mode:ir,padding:tr}),reset:function(){var gr;Ot.reset.call(this);var Mt=this.cfg,h=Mt.iv,_=Mt.mode;this._xformMode==this._ENC_XFORM_MODE?gr=_.createEncryptor:(gr=_.createDecryptor,this._minBufferSize=1),this._mode&&this._mode.__creator==gr?this._mode.init(this,h&&h.words):(this._mode=gr.call(_,this,h&&h.words),this._mode.__creator=gr)},_doProcessBlock:function(gr,Mt){this._mode.processBlock(gr,Mt)},_doFinalize:function(){var gr,Mt=this.cfg.padding;return this._xformMode==this._ENC_XFORM_MODE?(Mt.pad(this._data,this.blockSize),gr=this._process(!0)):(gr=this._process(!0),Mt.unpad(gr)),gr},blockSize:128/32});var sr=c.CipherParams=j.extend({init:function(gr){this.mixIn(gr)},toString:function(gr){return(gr||this.formatter).stringify(this)}}),ar=d.format={},hr=ar.OpenSSL={stringify:function(gr){var Mt,h=gr.ciphertext,_=gr.salt;return _?Mt=_e.create([1398893684,1701076831]).concat(_).concat(h):Mt=h,Mt.toString(ct)},parse:function(gr){var Mt,h=ct.parse(gr),_=h.words;return _[0]==1398893684&&_[1]==1701076831&&(Mt=_e.create(_.slice(2,4)),_.splice(0,4),h.sigBytes-=16),sr.create({ciphertext:h,salt:Mt})}},_r=c.SerializableCipher=j.extend({cfg:j.extend({format:hr}),encrypt:function(gr,Mt,h,_){_=this.cfg.extend(_);var b=gr.createEncryptor(h,_),lt=b.finalize(Mt),Rt=b.cfg;return sr.create({ciphertext:lt,key:h,iv:Rt.iv,algorithm:gr,mode:Rt.mode,padding:Rt.padding,blockSize:gr.blockSize,formatter:_.format})},decrypt:function(gr,Mt,h,_){_=this.cfg.extend(_),Mt=this._parse(Mt,_.format);var b=gr.createDecryptor(h,_).finalize(Mt.ciphertext);return b},_parse:function(gr,Mt){return typeof gr=="string"?Mt.parse(gr,this):gr}}),dr=d.kdf={},ur=dr.OpenSSL={execute:function(gr,Mt,h,_,b){if(_||(_=_e.random(64/8)),b)var lt=qt.create({keySize:Mt+h,hasher:b}).compute(gr,_);else var lt=qt.create({keySize:Mt+h}).compute(gr,_);var Rt=_e.create(lt.words.slice(Mt),h*4);return lt.sigBytes=Mt*4,sr.create({key:lt,iv:Rt,salt:_})}},lr=c.PasswordBasedCipher=_r.extend({cfg:_r.cfg.extend({kdf:ur}),encrypt:function(gr,Mt,h,_){_=this.cfg.extend(_);var b=_.kdf.execute(h,gr.keySize,gr.ivSize,_.salt,_.hasher);_.iv=b.iv;var lt=_r.encrypt.call(this,gr,Mt,b.key,_);return lt.mixIn(b),lt},decrypt:function(gr,Mt,h,_){_=this.cfg.extend(_),Mt=this._parse(Mt,_.format);var b=_.kdf.execute(h,gr.keySize,gr.ivSize,Mt.salt,_.hasher);_.iv=b.iv;var lt=_r.decrypt.call(this,gr,Mt,b.key,_);return lt}})}()})}(cipherCore)),cipherCore.exports}var modeCfb={exports:{}},hasRequiredModeCfb;function requireModeCfb(){return hasRequiredModeCfb||(hasRequiredModeCfb=1,function(s,e){(function(o,a,d){s.exports=a(requireCore(),requireCipherCore())})(commonjsGlobal$2,function(o){return o.mode.CFB=function(){var a=o.lib.BlockCipherMode.extend();a.Encryptor=a.extend({processBlock:function(c,j){var _e=this._cipher,pt=_e.blockSize;d.call(this,c,j,pt,_e),this._prevBlock=c.slice(j,j+pt)}}),a.Decryptor=a.extend({processBlock:function(c,j){var _e=this._cipher,pt=_e.blockSize,yt=c.slice(j,j+pt);d.call(this,c,j,pt,_e),this._prevBlock=yt}});function d(c,j,_e,pt){var yt,ct=this._iv;ct?(yt=ct.slice(0),this._iv=void 0):yt=this._prevBlock,pt.encryptBlock(yt,0);for(var Ct=0;Ct<_e;Ct++)c[j+Ct]^=yt[Ct]}return a}(),o.mode.CFB})}(modeCfb)),modeCfb.exports}var modeCtr={exports:{}},hasRequiredModeCtr;function requireModeCtr(){return hasRequiredModeCtr||(hasRequiredModeCtr=1,function(s,e){(function(o,a,d){s.exports=a(requireCore(),requireCipherCore())})(commonjsGlobal$2,function(o){return o.mode.CTR=function(){var a=o.lib.BlockCipherMode.extend(),d=a.Encryptor=a.extend({processBlock:function(c,j){var _e=this._cipher,pt=_e.blockSize,yt=this._iv,ct=this._counter;yt&&(ct=this._counter=yt.slice(0),this._iv=void 0);var Ct=ct.slice(0);_e.encryptBlock(Ct,0),ct[pt-1]=ct[pt-1]+1|0;for(var qt=0;qt<pt;qt++)c[j+qt]^=Ct[qt]}});return a.Decryptor=d,a}(),o.mode.CTR})}(modeCtr)),modeCtr.exports}var modeCtrGladman={exports:{}},hasRequiredModeCtrGladman;function requireModeCtrGladman(){return hasRequiredModeCtrGladman||(hasRequiredModeCtrGladman=1,function(s,e){(function(o,a,d){s.exports=a(requireCore(),requireCipherCore())})(commonjsGlobal$2,function(o){/** @preserve
 * Counter block mode compatible with  Dr Brian Gladman fileenc.c
 * derived from CryptoJS.mode.CTR
 * Jan Hruby jhruby.web@gmail.com
 */return o.mode.CTRGladman=function(){var a=o.lib.BlockCipherMode.extend();function d(_e){if((_e>>24&255)===255){var pt=_e>>16&255,yt=_e>>8&255,ct=_e&255;pt===255?(pt=0,yt===255?(yt=0,ct===255?ct=0:++ct):++yt):++pt,_e=0,_e+=pt<<16,_e+=yt<<8,_e+=ct}else _e+=1<<24;return _e}function c(_e){return(_e[0]=d(_e[0]))===0&&(_e[1]=d(_e[1])),_e}var j=a.Encryptor=a.extend({processBlock:function(_e,pt){var yt=this._cipher,ct=yt.blockSize,Ct=this._iv,qt=this._counter;Ct&&(qt=this._counter=Ct.slice(0),this._iv=void 0),c(qt);var Ot=qt.slice(0);yt.encryptBlock(Ot,0);for(var Lt=0;Lt<ct;Lt++)_e[pt+Lt]^=Ot[Lt]}});return a.Decryptor=j,a}(),o.mode.CTRGladman})}(modeCtrGladman)),modeCtrGladman.exports}var modeOfb={exports:{}},hasRequiredModeOfb;function requireModeOfb(){return hasRequiredModeOfb||(hasRequiredModeOfb=1,function(s,e){(function(o,a,d){s.exports=a(requireCore(),requireCipherCore())})(commonjsGlobal$2,function(o){return o.mode.OFB=function(){var a=o.lib.BlockCipherMode.extend(),d=a.Encryptor=a.extend({processBlock:function(c,j){var _e=this._cipher,pt=_e.blockSize,yt=this._iv,ct=this._keystream;yt&&(ct=this._keystream=yt.slice(0),this._iv=void 0),_e.encryptBlock(ct,0);for(var Ct=0;Ct<pt;Ct++)c[j+Ct]^=ct[Ct]}});return a.Decryptor=d,a}(),o.mode.OFB})}(modeOfb)),modeOfb.exports}var modeEcb={exports:{}},hasRequiredModeEcb;function requireModeEcb(){return hasRequiredModeEcb||(hasRequiredModeEcb=1,function(s,e){(function(o,a,d){s.exports=a(requireCore(),requireCipherCore())})(commonjsGlobal$2,function(o){return o.mode.ECB=function(){var a=o.lib.BlockCipherMode.extend();return a.Encryptor=a.extend({processBlock:function(d,c){this._cipher.encryptBlock(d,c)}}),a.Decryptor=a.extend({processBlock:function(d,c){this._cipher.decryptBlock(d,c)}}),a}(),o.mode.ECB})}(modeEcb)),modeEcb.exports}var padAnsix923={exports:{}},hasRequiredPadAnsix923;function requirePadAnsix923(){return hasRequiredPadAnsix923||(hasRequiredPadAnsix923=1,function(s,e){(function(o,a,d){s.exports=a(requireCore(),requireCipherCore())})(commonjsGlobal$2,function(o){return o.pad.AnsiX923={pad:function(a,d){var c=a.sigBytes,j=d*4,_e=j-c%j,pt=c+_e-1;a.clamp(),a.words[pt>>>2]|=_e<<24-pt%4*8,a.sigBytes+=_e},unpad:function(a){var d=a.words[a.sigBytes-1>>>2]&255;a.sigBytes-=d}},o.pad.Ansix923})}(padAnsix923)),padAnsix923.exports}var padIso10126={exports:{}},hasRequiredPadIso10126;function requirePadIso10126(){return hasRequiredPadIso10126||(hasRequiredPadIso10126=1,function(s,e){(function(o,a,d){s.exports=a(requireCore(),requireCipherCore())})(commonjsGlobal$2,function(o){return o.pad.Iso10126={pad:function(a,d){var c=d*4,j=c-a.sigBytes%c;a.concat(o.lib.WordArray.random(j-1)).concat(o.lib.WordArray.create([j<<24],1))},unpad:function(a){var d=a.words[a.sigBytes-1>>>2]&255;a.sigBytes-=d}},o.pad.Iso10126})}(padIso10126)),padIso10126.exports}var padIso97971={exports:{}},hasRequiredPadIso97971;function requirePadIso97971(){return hasRequiredPadIso97971||(hasRequiredPadIso97971=1,function(s,e){(function(o,a,d){s.exports=a(requireCore(),requireCipherCore())})(commonjsGlobal$2,function(o){return o.pad.Iso97971={pad:function(a,d){a.concat(o.lib.WordArray.create([2147483648],1)),o.pad.ZeroPadding.pad(a,d)},unpad:function(a){o.pad.ZeroPadding.unpad(a),a.sigBytes--}},o.pad.Iso97971})}(padIso97971)),padIso97971.exports}var padZeropadding={exports:{}},hasRequiredPadZeropadding;function requirePadZeropadding(){return hasRequiredPadZeropadding||(hasRequiredPadZeropadding=1,function(s,e){(function(o,a,d){s.exports=a(requireCore(),requireCipherCore())})(commonjsGlobal$2,function(o){return o.pad.ZeroPadding={pad:function(a,d){var c=d*4;a.clamp(),a.sigBytes+=c-(a.sigBytes%c||c)},unpad:function(a){for(var d=a.words,c=a.sigBytes-1,c=a.sigBytes-1;c>=0;c--)if(d[c>>>2]>>>24-c%4*8&255){a.sigBytes=c+1;break}}},o.pad.ZeroPadding})}(padZeropadding)),padZeropadding.exports}var padNopadding={exports:{}},hasRequiredPadNopadding;function requirePadNopadding(){return hasRequiredPadNopadding||(hasRequiredPadNopadding=1,function(s,e){(function(o,a,d){s.exports=a(requireCore(),requireCipherCore())})(commonjsGlobal$2,function(o){return o.pad.NoPadding={pad:function(){},unpad:function(){}},o.pad.NoPadding})}(padNopadding)),padNopadding.exports}var formatHex={exports:{}},hasRequiredFormatHex;function requireFormatHex(){return hasRequiredFormatHex||(hasRequiredFormatHex=1,function(s,e){(function(o,a,d){s.exports=a(requireCore(),requireCipherCore())})(commonjsGlobal$2,function(o){return function(a){var d=o,c=d.lib,j=c.CipherParams,_e=d.enc,pt=_e.Hex,yt=d.format;yt.Hex={stringify:function(ct){return ct.ciphertext.toString(pt)},parse:function(ct){var Ct=pt.parse(ct);return j.create({ciphertext:Ct})}}}(),o.format.Hex})}(formatHex)),formatHex.exports}var aes={exports:{}},hasRequiredAes;function requireAes(){return hasRequiredAes||(hasRequiredAes=1,function(s,e){(function(o,a,d){s.exports=a(requireCore(),requireEncBase64(),requireMd5(),requireEvpkdf(),requireCipherCore())})(commonjsGlobal$2,function(o){return function(){var a=o,d=a.lib,c=d.BlockCipher,j=a.algo,_e=[],pt=[],yt=[],ct=[],Ct=[],qt=[],Ot=[],Lt=[],Qt=[],ir=[];(function(){for(var sr=[],ar=0;ar<256;ar++)ar<128?sr[ar]=ar<<1:sr[ar]=ar<<1^283;for(var hr=0,_r=0,ar=0;ar<256;ar++){var dr=_r^_r<<1^_r<<2^_r<<3^_r<<4;dr=dr>>>8^dr&255^99,_e[hr]=dr,pt[dr]=hr;var ur=sr[hr],lr=sr[ur],gr=sr[lr],Mt=sr[dr]*257^dr*16843008;yt[hr]=Mt<<24|Mt>>>8,ct[hr]=Mt<<16|Mt>>>16,Ct[hr]=Mt<<8|Mt>>>24,qt[hr]=Mt;var Mt=gr*16843009^lr*65537^ur*257^hr*16843008;Ot[dr]=Mt<<24|Mt>>>8,Lt[dr]=Mt<<16|Mt>>>16,Qt[dr]=Mt<<8|Mt>>>24,ir[dr]=Mt,hr?(hr=ur^sr[sr[sr[gr^ur]]],_r^=sr[sr[_r]]):hr=_r=1}})();var er=[0,1,2,4,8,16,32,64,128,27,54],tr=j.AES=c.extend({_doReset:function(){var sr;if(!(this._nRounds&&this._keyPriorReset===this._key)){for(var ar=this._keyPriorReset=this._key,hr=ar.words,_r=ar.sigBytes/4,dr=this._nRounds=_r+6,ur=(dr+1)*4,lr=this._keySchedule=[],gr=0;gr<ur;gr++)gr<_r?lr[gr]=hr[gr]:(sr=lr[gr-1],gr%_r?_r>6&&gr%_r==4&&(sr=_e[sr>>>24]<<24|_e[sr>>>16&255]<<16|_e[sr>>>8&255]<<8|_e[sr&255]):(sr=sr<<8|sr>>>24,sr=_e[sr>>>24]<<24|_e[sr>>>16&255]<<16|_e[sr>>>8&255]<<8|_e[sr&255],sr^=er[gr/_r|0]<<24),lr[gr]=lr[gr-_r]^sr);for(var Mt=this._invKeySchedule=[],h=0;h<ur;h++){var gr=ur-h;if(h%4)var sr=lr[gr];else var sr=lr[gr-4];h<4||gr<=4?Mt[h]=sr:Mt[h]=Ot[_e[sr>>>24]]^Lt[_e[sr>>>16&255]]^Qt[_e[sr>>>8&255]]^ir[_e[sr&255]]}}},encryptBlock:function(sr,ar){this._doCryptBlock(sr,ar,this._keySchedule,yt,ct,Ct,qt,_e)},decryptBlock:function(sr,ar){var hr=sr[ar+1];sr[ar+1]=sr[ar+3],sr[ar+3]=hr,this._doCryptBlock(sr,ar,this._invKeySchedule,Ot,Lt,Qt,ir,pt);var hr=sr[ar+1];sr[ar+1]=sr[ar+3],sr[ar+3]=hr},_doCryptBlock:function(sr,ar,hr,_r,dr,ur,lr,gr){for(var Mt=this._nRounds,h=sr[ar]^hr[0],_=sr[ar+1]^hr[1],b=sr[ar+2]^hr[2],lt=sr[ar+3]^hr[3],Rt=4,kt=1;kt<Mt;kt++){var Ft=_r[h>>>24]^dr[_>>>16&255]^ur[b>>>8&255]^lr[lt&255]^hr[Rt++],xt=_r[_>>>24]^dr[b>>>16&255]^ur[lt>>>8&255]^lr[h&255]^hr[Rt++],g=_r[b>>>24]^dr[lt>>>16&255]^ur[h>>>8&255]^lr[_&255]^hr[Rt++],wt=_r[lt>>>24]^dr[h>>>16&255]^ur[_>>>8&255]^lr[b&255]^hr[Rt++];h=Ft,_=xt,b=g,lt=wt}var Ft=(gr[h>>>24]<<24|gr[_>>>16&255]<<16|gr[b>>>8&255]<<8|gr[lt&255])^hr[Rt++],xt=(gr[_>>>24]<<24|gr[b>>>16&255]<<16|gr[lt>>>8&255]<<8|gr[h&255])^hr[Rt++],g=(gr[b>>>24]<<24|gr[lt>>>16&255]<<16|gr[h>>>8&255]<<8|gr[_&255])^hr[Rt++],wt=(gr[lt>>>24]<<24|gr[h>>>16&255]<<16|gr[_>>>8&255]<<8|gr[b&255])^hr[Rt++];sr[ar]=Ft,sr[ar+1]=xt,sr[ar+2]=g,sr[ar+3]=wt},keySize:256/32});a.AES=c._createHelper(tr)}(),o.AES})}(aes)),aes.exports}var tripledes={exports:{}},hasRequiredTripledes;function requireTripledes(){return hasRequiredTripledes||(hasRequiredTripledes=1,function(s,e){(function(o,a,d){s.exports=a(requireCore(),requireEncBase64(),requireMd5(),requireEvpkdf(),requireCipherCore())})(commonjsGlobal$2,function(o){return function(){var a=o,d=a.lib,c=d.WordArray,j=d.BlockCipher,_e=a.algo,pt=[57,49,41,33,25,17,9,1,58,50,42,34,26,18,10,2,59,51,43,35,27,19,11,3,60,52,44,36,63,55,47,39,31,23,15,7,62,54,46,38,30,22,14,6,61,53,45,37,29,21,13,5,28,20,12,4],yt=[14,17,11,24,1,5,3,28,15,6,21,10,23,19,12,4,26,8,16,7,27,20,13,2,41,52,31,37,47,55,30,40,51,45,33,48,44,49,39,56,34,53,46,42,50,36,29,32],ct=[1,2,4,6,8,10,12,14,15,17,19,21,23,25,27,28],Ct=[{0:8421888,268435456:32768,536870912:8421378,805306368:2,1073741824:512,1342177280:8421890,1610612736:8389122,1879048192:8388608,2147483648:514,2415919104:8389120,2684354560:33280,2952790016:8421376,3221225472:32770,3489660928:8388610,3758096384:0,4026531840:33282,134217728:0,402653184:8421890,671088640:33282,939524096:32768,1207959552:8421888,1476395008:512,1744830464:8421378,2013265920:2,2281701376:8389120,2550136832:33280,2818572288:8421376,3087007744:8389122,3355443200:8388610,3623878656:32770,3892314112:514,4160749568:8388608,1:32768,268435457:2,536870913:8421888,805306369:8388608,1073741825:8421378,1342177281:33280,1610612737:512,1879048193:8389122,2147483649:8421890,2415919105:8421376,2684354561:8388610,2952790017:33282,3221225473:514,3489660929:8389120,3758096385:32770,4026531841:0,134217729:8421890,402653185:8421376,671088641:8388608,939524097:512,1207959553:32768,1476395009:8388610,1744830465:2,2013265921:33282,2281701377:32770,2550136833:8389122,2818572289:514,3087007745:8421888,3355443201:8389120,3623878657:0,3892314113:33280,4160749569:8421378},{0:1074282512,16777216:16384,33554432:524288,50331648:1074266128,67108864:1073741840,83886080:1074282496,100663296:1073758208,117440512:16,134217728:540672,150994944:1073758224,167772160:1073741824,184549376:540688,201326592:524304,218103808:0,234881024:16400,251658240:1074266112,8388608:1073758208,25165824:540688,41943040:16,58720256:1073758224,75497472:1074282512,92274688:1073741824,109051904:524288,125829120:1074266128,142606336:524304,159383552:0,176160768:16384,192937984:1074266112,209715200:1073741840,226492416:540672,243269632:1074282496,260046848:16400,268435456:0,285212672:1074266128,301989888:1073758224,318767104:1074282496,335544320:1074266112,352321536:16,369098752:540688,385875968:16384,402653184:16400,419430400:524288,436207616:524304,452984832:1073741840,469762048:540672,486539264:1073758208,503316480:1073741824,520093696:1074282512,276824064:540688,293601280:524288,310378496:1074266112,327155712:16384,343932928:1073758208,360710144:1074282512,377487360:16,394264576:1073741824,411041792:1074282496,427819008:1073741840,444596224:1073758224,461373440:524304,478150656:0,494927872:16400,511705088:1074266128,528482304:540672},{0:260,1048576:0,2097152:67109120,3145728:65796,4194304:65540,5242880:67108868,6291456:67174660,7340032:67174400,8388608:67108864,9437184:67174656,10485760:65792,11534336:67174404,12582912:67109124,13631488:65536,14680064:4,15728640:256,524288:67174656,1572864:67174404,2621440:0,3670016:67109120,4718592:67108868,5767168:65536,6815744:65540,7864320:260,8912896:4,9961472:256,11010048:67174400,12058624:65796,13107200:65792,14155776:67109124,15204352:67174660,16252928:67108864,16777216:67174656,17825792:65540,18874368:65536,19922944:67109120,20971520:256,22020096:67174660,23068672:67108868,24117248:0,25165824:67109124,26214400:67108864,27262976:4,28311552:65792,29360128:67174400,30408704:260,31457280:65796,32505856:67174404,17301504:67108864,18350080:260,19398656:67174656,20447232:0,21495808:65540,22544384:67109120,23592960:256,24641536:67174404,25690112:65536,26738688:67174660,27787264:65796,28835840:67108868,29884416:67109124,30932992:67174400,31981568:4,33030144:65792},{0:2151682048,65536:2147487808,131072:4198464,196608:2151677952,262144:0,327680:4198400,393216:2147483712,458752:4194368,524288:2147483648,589824:4194304,655360:64,720896:2147487744,786432:2151678016,851968:4160,917504:4096,983040:2151682112,32768:2147487808,98304:64,163840:2151678016,229376:2147487744,294912:4198400,360448:2151682112,425984:0,491520:2151677952,557056:4096,622592:2151682048,688128:4194304,753664:4160,819200:2147483648,884736:4194368,950272:4198464,1015808:2147483712,1048576:4194368,1114112:4198400,1179648:2147483712,1245184:0,1310720:4160,1376256:2151678016,1441792:2151682048,1507328:2147487808,1572864:2151682112,1638400:2147483648,1703936:2151677952,1769472:4198464,1835008:2147487744,1900544:4194304,1966080:64,2031616:4096,1081344:2151677952,1146880:2151682112,1212416:0,1277952:4198400,1343488:4194368,1409024:2147483648,1474560:2147487808,1540096:64,1605632:2147483712,1671168:4096,1736704:2147487744,1802240:2151678016,1867776:4160,1933312:2151682048,1998848:4194304,2064384:4198464},{0:128,4096:17039360,8192:262144,12288:536870912,16384:537133184,20480:16777344,24576:553648256,28672:262272,32768:16777216,36864:537133056,40960:536871040,45056:553910400,49152:553910272,53248:0,57344:17039488,61440:553648128,2048:17039488,6144:553648256,10240:128,14336:17039360,18432:262144,22528:537133184,26624:553910272,30720:536870912,34816:537133056,38912:0,43008:553910400,47104:16777344,51200:536871040,55296:553648128,59392:16777216,63488:262272,65536:262144,69632:128,73728:536870912,77824:553648256,81920:16777344,86016:553910272,90112:537133184,94208:16777216,98304:553910400,102400:553648128,106496:17039360,110592:537133056,114688:262272,118784:536871040,122880:0,126976:17039488,67584:553648256,71680:16777216,75776:17039360,79872:537133184,83968:536870912,88064:17039488,92160:128,96256:553910272,100352:262272,104448:553910400,108544:0,112640:553648128,116736:16777344,120832:262144,124928:537133056,129024:536871040},{0:268435464,256:8192,512:270532608,768:270540808,1024:268443648,1280:2097152,1536:2097160,1792:268435456,2048:0,2304:268443656,2560:2105344,2816:8,3072:270532616,3328:2105352,3584:8200,3840:270540800,128:270532608,384:270540808,640:8,896:2097152,1152:2105352,1408:268435464,1664:268443648,1920:8200,2176:2097160,2432:8192,2688:268443656,2944:270532616,3200:0,3456:270540800,3712:2105344,3968:268435456,4096:268443648,4352:270532616,4608:270540808,4864:8200,5120:2097152,5376:268435456,5632:268435464,5888:2105344,6144:2105352,6400:0,6656:8,6912:270532608,7168:8192,7424:268443656,7680:270540800,7936:2097160,4224:8,4480:2105344,4736:2097152,4992:268435464,5248:268443648,5504:8200,5760:270540808,6016:270532608,6272:270540800,6528:270532616,6784:8192,7040:2105352,7296:2097160,7552:0,7808:268435456,8064:268443656},{0:1048576,16:33555457,32:1024,48:1049601,64:34604033,80:0,96:1,112:34603009,128:33555456,144:1048577,160:33554433,176:34604032,192:34603008,208:1025,224:1049600,240:33554432,8:34603009,24:0,40:33555457,56:34604032,72:1048576,88:33554433,104:33554432,120:1025,136:1049601,152:33555456,168:34603008,184:1048577,200:1024,216:34604033,232:1,248:1049600,256:33554432,272:1048576,288:33555457,304:34603009,320:1048577,336:33555456,352:34604032,368:1049601,384:1025,400:34604033,416:1049600,432:1,448:0,464:34603008,480:33554433,496:1024,264:1049600,280:33555457,296:34603009,312:1,328:33554432,344:1048576,360:1025,376:34604032,392:33554433,408:34603008,424:0,440:34604033,456:1049601,472:1024,488:33555456,504:1048577},{0:134219808,1:131072,2:134217728,3:32,4:131104,5:134350880,6:134350848,7:2048,8:134348800,9:134219776,10:133120,11:134348832,12:2080,13:0,14:134217760,15:133152,2147483648:2048,2147483649:134350880,2147483650:134219808,2147483651:134217728,2147483652:134348800,2147483653:133120,2147483654:133152,2147483655:32,2147483656:134217760,2147483657:2080,2147483658:131104,2147483659:134350848,2147483660:0,2147483661:134348832,2147483662:134219776,2147483663:131072,16:133152,17:134350848,18:32,19:2048,20:134219776,21:134217760,22:134348832,23:131072,24:0,25:131104,26:134348800,27:134219808,28:134350880,29:133120,30:2080,31:134217728,2147483664:131072,2147483665:2048,2147483666:134348832,2147483667:133152,2147483668:32,2147483669:134348800,2147483670:134217728,2147483671:134219808,2147483672:134350880,2147483673:134217760,2147483674:134219776,2147483675:0,2147483676:133120,2147483677:2080,2147483678:131104,2147483679:134350848}],qt=[4160749569,528482304,33030144,2064384,129024,8064,504,2147483679],Ot=_e.DES=j.extend({_doReset:function(){for(var er=this._key,tr=er.words,sr=[],ar=0;ar<56;ar++){var hr=pt[ar]-1;sr[ar]=tr[hr>>>5]>>>31-hr%32&1}for(var _r=this._subKeys=[],dr=0;dr<16;dr++){for(var ur=_r[dr]=[],lr=ct[dr],ar=0;ar<24;ar++)ur[ar/6|0]|=sr[(yt[ar]-1+lr)%28]<<31-ar%6,ur[4+(ar/6|0)]|=sr[28+(yt[ar+24]-1+lr)%28]<<31-ar%6;ur[0]=ur[0]<<1|ur[0]>>>31;for(var ar=1;ar<7;ar++)ur[ar]=ur[ar]>>>(ar-1)*4+3;ur[7]=ur[7]<<5|ur[7]>>>27}for(var gr=this._invSubKeys=[],ar=0;ar<16;ar++)gr[ar]=_r[15-ar]},encryptBlock:function(er,tr){this._doCryptBlock(er,tr,this._subKeys)},decryptBlock:function(er,tr){this._doCryptBlock(er,tr,this._invSubKeys)},_doCryptBlock:function(er,tr,sr){this._lBlock=er[tr],this._rBlock=er[tr+1],Lt.call(this,4,252645135),Lt.call(this,16,65535),Qt.call(this,2,858993459),Qt.call(this,8,16711935),Lt.call(this,1,1431655765);for(var ar=0;ar<16;ar++){for(var hr=sr[ar],_r=this._lBlock,dr=this._rBlock,ur=0,lr=0;lr<8;lr++)ur|=Ct[lr][((dr^hr[lr])&qt[lr])>>>0];this._lBlock=dr,this._rBlock=_r^ur}var gr=this._lBlock;this._lBlock=this._rBlock,this._rBlock=gr,Lt.call(this,1,1431655765),Qt.call(this,8,16711935),Qt.call(this,2,858993459),Lt.call(this,16,65535),Lt.call(this,4,252645135),er[tr]=this._lBlock,er[tr+1]=this._rBlock},keySize:64/32,ivSize:64/32,blockSize:64/32});function Lt(er,tr){var sr=(this._lBlock>>>er^this._rBlock)&tr;this._rBlock^=sr,this._lBlock^=sr<<er}function Qt(er,tr){var sr=(this._rBlock>>>er^this._lBlock)&tr;this._lBlock^=sr,this._rBlock^=sr<<er}a.DES=j._createHelper(Ot);var ir=_e.TripleDES=j.extend({_doReset:function(){var er=this._key,tr=er.words;if(tr.length!==2&&tr.length!==4&&tr.length<6)throw new Error("Invalid key length - 3DES requires the key length to be 64, 128, 192 or >192.");var sr=tr.slice(0,2),ar=tr.length<4?tr.slice(0,2):tr.slice(2,4),hr=tr.length<6?tr.slice(0,2):tr.slice(4,6);this._des1=Ot.createEncryptor(c.create(sr)),this._des2=Ot.createEncryptor(c.create(ar)),this._des3=Ot.createEncryptor(c.create(hr))},encryptBlock:function(er,tr){this._des1.encryptBlock(er,tr),this._des2.decryptBlock(er,tr),this._des3.encryptBlock(er,tr)},decryptBlock:function(er,tr){this._des3.decryptBlock(er,tr),this._des2.encryptBlock(er,tr),this._des1.decryptBlock(er,tr)},keySize:192/32,ivSize:64/32,blockSize:64/32});a.TripleDES=j._createHelper(ir)}(),o.TripleDES})}(tripledes)),tripledes.exports}var rc4={exports:{}},hasRequiredRc4;function requireRc4(){return hasRequiredRc4||(hasRequiredRc4=1,function(s,e){(function(o,a,d){s.exports=a(requireCore(),requireEncBase64(),requireMd5(),requireEvpkdf(),requireCipherCore())})(commonjsGlobal$2,function(o){return function(){var a=o,d=a.lib,c=d.StreamCipher,j=a.algo,_e=j.RC4=c.extend({_doReset:function(){for(var ct=this._key,Ct=ct.words,qt=ct.sigBytes,Ot=this._S=[],Lt=0;Lt<256;Lt++)Ot[Lt]=Lt;for(var Lt=0,Qt=0;Lt<256;Lt++){var ir=Lt%qt,er=Ct[ir>>>2]>>>24-ir%4*8&255;Qt=(Qt+Ot[Lt]+er)%256;var tr=Ot[Lt];Ot[Lt]=Ot[Qt],Ot[Qt]=tr}this._i=this._j=0},_doProcessBlock:function(ct,Ct){ct[Ct]^=pt.call(this)},keySize:256/32,ivSize:0});function pt(){for(var ct=this._S,Ct=this._i,qt=this._j,Ot=0,Lt=0;Lt<4;Lt++){Ct=(Ct+1)%256,qt=(qt+ct[Ct])%256;var Qt=ct[Ct];ct[Ct]=ct[qt],ct[qt]=Qt,Ot|=ct[(ct[Ct]+ct[qt])%256]<<24-Lt*8}return this._i=Ct,this._j=qt,Ot}a.RC4=c._createHelper(_e);var yt=j.RC4Drop=_e.extend({cfg:_e.cfg.extend({drop:192}),_doReset:function(){_e._doReset.call(this);for(var ct=this.cfg.drop;ct>0;ct--)pt.call(this)}});a.RC4Drop=c._createHelper(yt)}(),o.RC4})}(rc4)),rc4.exports}var rabbit={exports:{}},hasRequiredRabbit;function requireRabbit(){return hasRequiredRabbit||(hasRequiredRabbit=1,function(s,e){(function(o,a,d){s.exports=a(requireCore(),requireEncBase64(),requireMd5(),requireEvpkdf(),requireCipherCore())})(commonjsGlobal$2,function(o){return function(){var a=o,d=a.lib,c=d.StreamCipher,j=a.algo,_e=[],pt=[],yt=[],ct=j.Rabbit=c.extend({_doReset:function(){for(var qt=this._key.words,Ot=this.cfg.iv,Lt=0;Lt<4;Lt++)qt[Lt]=(qt[Lt]<<8|qt[Lt]>>>24)&16711935|(qt[Lt]<<24|qt[Lt]>>>8)&4278255360;var Qt=this._X=[qt[0],qt[3]<<16|qt[2]>>>16,qt[1],qt[0]<<16|qt[3]>>>16,qt[2],qt[1]<<16|qt[0]>>>16,qt[3],qt[2]<<16|qt[1]>>>16],ir=this._C=[qt[2]<<16|qt[2]>>>16,qt[0]&4294901760|qt[1]&65535,qt[3]<<16|qt[3]>>>16,qt[1]&4294901760|qt[2]&65535,qt[0]<<16|qt[0]>>>16,qt[2]&4294901760|qt[3]&65535,qt[1]<<16|qt[1]>>>16,qt[3]&4294901760|qt[0]&65535];this._b=0;for(var Lt=0;Lt<4;Lt++)Ct.call(this);for(var Lt=0;Lt<8;Lt++)ir[Lt]^=Qt[Lt+4&7];if(Ot){var er=Ot.words,tr=er[0],sr=er[1],ar=(tr<<8|tr>>>24)&16711935|(tr<<24|tr>>>8)&4278255360,hr=(sr<<8|sr>>>24)&16711935|(sr<<24|sr>>>8)&4278255360,_r=ar>>>16|hr&4294901760,dr=hr<<16|ar&65535;ir[0]^=ar,ir[1]^=_r,ir[2]^=hr,ir[3]^=dr,ir[4]^=ar,ir[5]^=_r,ir[6]^=hr,ir[7]^=dr;for(var Lt=0;Lt<4;Lt++)Ct.call(this)}},_doProcessBlock:function(qt,Ot){var Lt=this._X;Ct.call(this),_e[0]=Lt[0]^Lt[5]>>>16^Lt[3]<<16,_e[1]=Lt[2]^Lt[7]>>>16^Lt[5]<<16,_e[2]=Lt[4]^Lt[1]>>>16^Lt[7]<<16,_e[3]=Lt[6]^Lt[3]>>>16^Lt[1]<<16;for(var Qt=0;Qt<4;Qt++)_e[Qt]=(_e[Qt]<<8|_e[Qt]>>>24)&16711935|(_e[Qt]<<24|_e[Qt]>>>8)&4278255360,qt[Ot+Qt]^=_e[Qt]},blockSize:128/32,ivSize:64/32});function Ct(){for(var qt=this._X,Ot=this._C,Lt=0;Lt<8;Lt++)pt[Lt]=Ot[Lt];Ot[0]=Ot[0]+1295307597+this._b|0,Ot[1]=Ot[1]+3545052371+(Ot[0]>>>0<pt[0]>>>0?1:0)|0,Ot[2]=Ot[2]+886263092+(Ot[1]>>>0<pt[1]>>>0?1:0)|0,Ot[3]=Ot[3]+1295307597+(Ot[2]>>>0<pt[2]>>>0?1:0)|0,Ot[4]=Ot[4]+3545052371+(Ot[3]>>>0<pt[3]>>>0?1:0)|0,Ot[5]=Ot[5]+886263092+(Ot[4]>>>0<pt[4]>>>0?1:0)|0,Ot[6]=Ot[6]+1295307597+(Ot[5]>>>0<pt[5]>>>0?1:0)|0,Ot[7]=Ot[7]+3545052371+(Ot[6]>>>0<pt[6]>>>0?1:0)|0,this._b=Ot[7]>>>0<pt[7]>>>0?1:0;for(var Lt=0;Lt<8;Lt++){var Qt=qt[Lt]+Ot[Lt],ir=Qt&65535,er=Qt>>>16,tr=((ir*ir>>>17)+ir*er>>>15)+er*er,sr=((Qt&4294901760)*Qt|0)+((Qt&65535)*Qt|0);yt[Lt]=tr^sr}qt[0]=yt[0]+(yt[7]<<16|yt[7]>>>16)+(yt[6]<<16|yt[6]>>>16)|0,qt[1]=yt[1]+(yt[0]<<8|yt[0]>>>24)+yt[7]|0,qt[2]=yt[2]+(yt[1]<<16|yt[1]>>>16)+(yt[0]<<16|yt[0]>>>16)|0,qt[3]=yt[3]+(yt[2]<<8|yt[2]>>>24)+yt[1]|0,qt[4]=yt[4]+(yt[3]<<16|yt[3]>>>16)+(yt[2]<<16|yt[2]>>>16)|0,qt[5]=yt[5]+(yt[4]<<8|yt[4]>>>24)+yt[3]|0,qt[6]=yt[6]+(yt[5]<<16|yt[5]>>>16)+(yt[4]<<16|yt[4]>>>16)|0,qt[7]=yt[7]+(yt[6]<<8|yt[6]>>>24)+yt[5]|0}a.Rabbit=c._createHelper(ct)}(),o.Rabbit})}(rabbit)),rabbit.exports}var rabbitLegacy={exports:{}},hasRequiredRabbitLegacy;function requireRabbitLegacy(){return hasRequiredRabbitLegacy||(hasRequiredRabbitLegacy=1,function(s,e){(function(o,a,d){s.exports=a(requireCore(),requireEncBase64(),requireMd5(),requireEvpkdf(),requireCipherCore())})(commonjsGlobal$2,function(o){return function(){var a=o,d=a.lib,c=d.StreamCipher,j=a.algo,_e=[],pt=[],yt=[],ct=j.RabbitLegacy=c.extend({_doReset:function(){var qt=this._key.words,Ot=this.cfg.iv,Lt=this._X=[qt[0],qt[3]<<16|qt[2]>>>16,qt[1],qt[0]<<16|qt[3]>>>16,qt[2],qt[1]<<16|qt[0]>>>16,qt[3],qt[2]<<16|qt[1]>>>16],Qt=this._C=[qt[2]<<16|qt[2]>>>16,qt[0]&4294901760|qt[1]&65535,qt[3]<<16|qt[3]>>>16,qt[1]&4294901760|qt[2]&65535,qt[0]<<16|qt[0]>>>16,qt[2]&4294901760|qt[3]&65535,qt[1]<<16|qt[1]>>>16,qt[3]&4294901760|qt[0]&65535];this._b=0;for(var ir=0;ir<4;ir++)Ct.call(this);for(var ir=0;ir<8;ir++)Qt[ir]^=Lt[ir+4&7];if(Ot){var er=Ot.words,tr=er[0],sr=er[1],ar=(tr<<8|tr>>>24)&16711935|(tr<<24|tr>>>8)&4278255360,hr=(sr<<8|sr>>>24)&16711935|(sr<<24|sr>>>8)&4278255360,_r=ar>>>16|hr&4294901760,dr=hr<<16|ar&65535;Qt[0]^=ar,Qt[1]^=_r,Qt[2]^=hr,Qt[3]^=dr,Qt[4]^=ar,Qt[5]^=_r,Qt[6]^=hr,Qt[7]^=dr;for(var ir=0;ir<4;ir++)Ct.call(this)}},_doProcessBlock:function(qt,Ot){var Lt=this._X;Ct.call(this),_e[0]=Lt[0]^Lt[5]>>>16^Lt[3]<<16,_e[1]=Lt[2]^Lt[7]>>>16^Lt[5]<<16,_e[2]=Lt[4]^Lt[1]>>>16^Lt[7]<<16,_e[3]=Lt[6]^Lt[3]>>>16^Lt[1]<<16;for(var Qt=0;Qt<4;Qt++)_e[Qt]=(_e[Qt]<<8|_e[Qt]>>>24)&16711935|(_e[Qt]<<24|_e[Qt]>>>8)&4278255360,qt[Ot+Qt]^=_e[Qt]},blockSize:128/32,ivSize:64/32});function Ct(){for(var qt=this._X,Ot=this._C,Lt=0;Lt<8;Lt++)pt[Lt]=Ot[Lt];Ot[0]=Ot[0]+1295307597+this._b|0,Ot[1]=Ot[1]+3545052371+(Ot[0]>>>0<pt[0]>>>0?1:0)|0,Ot[2]=Ot[2]+886263092+(Ot[1]>>>0<pt[1]>>>0?1:0)|0,Ot[3]=Ot[3]+1295307597+(Ot[2]>>>0<pt[2]>>>0?1:0)|0,Ot[4]=Ot[4]+3545052371+(Ot[3]>>>0<pt[3]>>>0?1:0)|0,Ot[5]=Ot[5]+886263092+(Ot[4]>>>0<pt[4]>>>0?1:0)|0,Ot[6]=Ot[6]+1295307597+(Ot[5]>>>0<pt[5]>>>0?1:0)|0,Ot[7]=Ot[7]+3545052371+(Ot[6]>>>0<pt[6]>>>0?1:0)|0,this._b=Ot[7]>>>0<pt[7]>>>0?1:0;for(var Lt=0;Lt<8;Lt++){var Qt=qt[Lt]+Ot[Lt],ir=Qt&65535,er=Qt>>>16,tr=((ir*ir>>>17)+ir*er>>>15)+er*er,sr=((Qt&4294901760)*Qt|0)+((Qt&65535)*Qt|0);yt[Lt]=tr^sr}qt[0]=yt[0]+(yt[7]<<16|yt[7]>>>16)+(yt[6]<<16|yt[6]>>>16)|0,qt[1]=yt[1]+(yt[0]<<8|yt[0]>>>24)+yt[7]|0,qt[2]=yt[2]+(yt[1]<<16|yt[1]>>>16)+(yt[0]<<16|yt[0]>>>16)|0,qt[3]=yt[3]+(yt[2]<<8|yt[2]>>>24)+yt[1]|0,qt[4]=yt[4]+(yt[3]<<16|yt[3]>>>16)+(yt[2]<<16|yt[2]>>>16)|0,qt[5]=yt[5]+(yt[4]<<8|yt[4]>>>24)+yt[3]|0,qt[6]=yt[6]+(yt[5]<<16|yt[5]>>>16)+(yt[4]<<16|yt[4]>>>16)|0,qt[7]=yt[7]+(yt[6]<<8|yt[6]>>>24)+yt[5]|0}a.RabbitLegacy=c._createHelper(ct)}(),o.RabbitLegacy})}(rabbitLegacy)),rabbitLegacy.exports}var blowfish={exports:{}},hasRequiredBlowfish;function requireBlowfish(){return hasRequiredBlowfish||(hasRequiredBlowfish=1,function(s,e){(function(o,a,d){s.exports=a(requireCore(),requireEncBase64(),requireMd5(),requireEvpkdf(),requireCipherCore())})(commonjsGlobal$2,function(o){return function(){var a=o,d=a.lib,c=d.BlockCipher,j=a.algo;const _e=16,pt=[608135816,2242054355,320440878,57701188,2752067618,698298832,137296536,3964562569,1160258022,953160567,3193202383,887688300,3232508343,3380367581,1065670069,3041331479,2450970073,2306472731],yt=[[3509652390,2564797868,805139163,3491422135,3101798381,1780907670,3128725573,4046225305,614570311,3012652279,134345442,2240740374,1667834072,1901547113,2757295779,4103290238,227898511,1921955416,1904987480,2182433518,2069144605,3260701109,2620446009,720527379,3318853667,677414384,3393288472,3101374703,2390351024,1614419982,1822297739,2954791486,3608508353,3174124327,2024746970,1432378464,3864339955,2857741204,1464375394,1676153920,1439316330,715854006,3033291828,289532110,2706671279,2087905683,3018724369,1668267050,732546397,1947742710,3462151702,2609353502,2950085171,1814351708,2050118529,680887927,999245976,1800124847,3300911131,1713906067,1641548236,4213287313,1216130144,1575780402,4018429277,3917837745,3693486850,3949271944,596196993,3549867205,258830323,2213823033,772490370,2760122372,1774776394,2652871518,566650946,4142492826,1728879713,2882767088,1783734482,3629395816,2517608232,2874225571,1861159788,326777828,3124490320,2130389656,2716951837,967770486,1724537150,2185432712,2364442137,1164943284,2105845187,998989502,3765401048,2244026483,1075463327,1455516326,1322494562,910128902,469688178,1117454909,936433444,3490320968,3675253459,1240580251,122909385,2157517691,634681816,4142456567,3825094682,3061402683,2540495037,79693498,3249098678,1084186820,1583128258,426386531,1761308591,1047286709,322548459,995290223,1845252383,2603652396,3431023940,2942221577,3202600964,3727903485,1712269319,422464435,3234572375,1170764815,3523960633,3117677531,1434042557,442511882,3600875718,1076654713,1738483198,4213154764,2393238008,3677496056,1014306527,4251020053,793779912,2902807211,842905082,4246964064,1395751752,1040244610,2656851899,3396308128,445077038,3742853595,3577915638,679411651,2892444358,2354009459,1767581616,3150600392,3791627101,3102740896,284835224,4246832056,1258075500,768725851,2589189241,3069724005,3532540348,1274779536,3789419226,2764799539,1660621633,3471099624,4011903706,913787905,3497959166,737222580,2514213453,2928710040,3937242737,1804850592,3499020752,2949064160,2386320175,2390070455,2415321851,4061277028,2290661394,2416832540,1336762016,1754252060,3520065937,3014181293,791618072,3188594551,3933548030,2332172193,3852520463,3043980520,413987798,3465142937,3030929376,4245938359,2093235073,3534596313,375366246,2157278981,2479649556,555357303,3870105701,2008414854,3344188149,4221384143,3956125452,2067696032,3594591187,2921233993,2428461,544322398,577241275,1471733935,610547355,4027169054,1432588573,1507829418,2025931657,3646575487,545086370,48609733,2200306550,1653985193,298326376,1316178497,3007786442,2064951626,458293330,2589141269,3591329599,3164325604,727753846,2179363840,146436021,1461446943,4069977195,705550613,3059967265,3887724982,4281599278,3313849956,1404054877,2845806497,146425753,1854211946],[1266315497,3048417604,3681880366,3289982499,290971e4,1235738493,2632868024,2414719590,3970600049,1771706367,1449415276,3266420449,422970021,1963543593,2690192192,3826793022,1062508698,1531092325,1804592342,2583117782,2714934279,4024971509,1294809318,4028980673,1289560198,2221992742,1669523910,35572830,157838143,1052438473,1016535060,1802137761,1753167236,1386275462,3080475397,2857371447,1040679964,2145300060,2390574316,1461121720,2956646967,4031777805,4028374788,33600511,2920084762,1018524850,629373528,3691585981,3515945977,2091462646,2486323059,586499841,988145025,935516892,3367335476,2599673255,2839830854,265290510,3972581182,2759138881,3795373465,1005194799,847297441,406762289,1314163512,1332590856,1866599683,4127851711,750260880,613907577,1450815602,3165620655,3734664991,3650291728,3012275730,3704569646,1427272223,778793252,1343938022,2676280711,2052605720,1946737175,3164576444,3914038668,3967478842,3682934266,1661551462,3294938066,4011595847,840292616,3712170807,616741398,312560963,711312465,1351876610,322626781,1910503582,271666773,2175563734,1594956187,70604529,3617834859,1007753275,1495573769,4069517037,2549218298,2663038764,504708206,2263041392,3941167025,2249088522,1514023603,1998579484,1312622330,694541497,2582060303,2151582166,1382467621,776784248,2618340202,3323268794,2497899128,2784771155,503983604,4076293799,907881277,423175695,432175456,1378068232,4145222326,3954048622,3938656102,3820766613,2793130115,2977904593,26017576,3274890735,3194772133,1700274565,1756076034,4006520079,3677328699,720338349,1533947780,354530856,688349552,3973924725,1637815568,332179504,3949051286,53804574,2852348879,3044236432,1282449977,3583942155,3416972820,4006381244,1617046695,2628476075,3002303598,1686838959,431878346,2686675385,1700445008,1080580658,1009431731,832498133,3223435511,2605976345,2271191193,2516031870,1648197032,4164389018,2548247927,300782431,375919233,238389289,3353747414,2531188641,2019080857,1475708069,455242339,2609103871,448939670,3451063019,1395535956,2413381860,1841049896,1491858159,885456874,4264095073,4001119347,1565136089,3898914787,1108368660,540939232,1173283510,2745871338,3681308437,4207628240,3343053890,4016749493,1699691293,1103962373,3625875870,2256883143,3830138730,1031889488,3479347698,1535977030,4236805024,3251091107,2132092099,1774941330,1199868427,1452454533,157007616,2904115357,342012276,595725824,1480756522,206960106,497939518,591360097,863170706,2375253569,3596610801,1814182875,2094937945,3421402208,1082520231,3463918190,2785509508,435703966,3908032597,1641649973,2842273706,3305899714,1510255612,2148256476,2655287854,3276092548,4258621189,236887753,3681803219,274041037,1734335097,3815195456,3317970021,1899903192,1026095262,4050517792,356393447,2410691914,3873677099,3682840055],[3913112168,2491498743,4132185628,2489919796,1091903735,1979897079,3170134830,3567386728,3557303409,857797738,1136121015,1342202287,507115054,2535736646,337727348,3213592640,1301675037,2528481711,1895095763,1721773893,3216771564,62756741,2142006736,835421444,2531993523,1442658625,3659876326,2882144922,676362277,1392781812,170690266,3921047035,1759253602,3611846912,1745797284,664899054,1329594018,3901205900,3045908486,2062866102,2865634940,3543621612,3464012697,1080764994,553557557,3656615353,3996768171,991055499,499776247,1265440854,648242737,3940784050,980351604,3713745714,1749149687,3396870395,4211799374,3640570775,1161844396,3125318951,1431517754,545492359,4268468663,3499529547,1437099964,2702547544,3433638243,2581715763,2787789398,1060185593,1593081372,2418618748,4260947970,69676912,2159744348,86519011,2512459080,3838209314,1220612927,3339683548,133810670,1090789135,1078426020,1569222167,845107691,3583754449,4072456591,1091646820,628848692,1613405280,3757631651,526609435,236106946,48312990,2942717905,3402727701,1797494240,859738849,992217954,4005476642,2243076622,3870952857,3732016268,765654824,3490871365,2511836413,1685915746,3888969200,1414112111,2273134842,3281911079,4080962846,172450625,2569994100,980381355,4109958455,2819808352,2716589560,2568741196,3681446669,3329971472,1835478071,660984891,3704678404,4045999559,3422617507,3040415634,1762651403,1719377915,3470491036,2693910283,3642056355,3138596744,1364962596,2073328063,1983633131,926494387,3423689081,2150032023,4096667949,1749200295,3328846651,309677260,2016342300,1779581495,3079819751,111262694,1274766160,443224088,298511866,1025883608,3806446537,1145181785,168956806,3641502830,3584813610,1689216846,3666258015,3200248200,1692713982,2646376535,4042768518,1618508792,1610833997,3523052358,4130873264,2001055236,3610705100,2202168115,4028541809,2961195399,1006657119,2006996926,3186142756,1430667929,3210227297,1314452623,4074634658,4101304120,2273951170,1399257539,3367210612,3027628629,1190975929,2062231137,2333990788,2221543033,2438960610,1181637006,548689776,2362791313,3372408396,3104550113,3145860560,296247880,1970579870,3078560182,3769228297,1714227617,3291629107,3898220290,166772364,1251581989,493813264,448347421,195405023,2709975567,677966185,3703036547,1463355134,2715995803,1338867538,1343315457,2802222074,2684532164,233230375,2599980071,2000651841,3277868038,1638401717,4028070440,3237316320,6314154,819756386,300326615,590932579,1405279636,3267499572,3150704214,2428286686,3959192993,3461946742,1862657033,1266418056,963775037,2089974820,2263052895,1917689273,448879540,3550394620,3981727096,150775221,3627908307,1303187396,508620638,2975983352,2726630617,1817252668,1876281319,1457606340,908771278,3720792119,3617206836,2455994898,1729034894,1080033504],[976866871,3556439503,2881648439,1522871579,1555064734,1336096578,3548522304,2579274686,3574697629,3205460757,3593280638,3338716283,3079412587,564236357,2993598910,1781952180,1464380207,3163844217,3332601554,1699332808,1393555694,1183702653,3581086237,1288719814,691649499,2847557200,2895455976,3193889540,2717570544,1781354906,1676643554,2592534050,3230253752,1126444790,2770207658,2633158820,2210423226,2615765581,2414155088,3127139286,673620729,2805611233,1269405062,4015350505,3341807571,4149409754,1057255273,2012875353,2162469141,2276492801,2601117357,993977747,3918593370,2654263191,753973209,36408145,2530585658,25011837,3520020182,2088578344,530523599,2918365339,1524020338,1518925132,3760827505,3759777254,1202760957,3985898139,3906192525,674977740,4174734889,2031300136,2019492241,3983892565,4153806404,3822280332,352677332,2297720250,60907813,90501309,3286998549,1016092578,2535922412,2839152426,457141659,509813237,4120667899,652014361,1966332200,2975202805,55981186,2327461051,676427537,3255491064,2882294119,3433927263,1307055953,942726286,933058658,2468411793,3933900994,4215176142,1361170020,2001714738,2830558078,3274259782,1222529897,1679025792,2729314320,3714953764,1770335741,151462246,3013232138,1682292957,1483529935,471910574,1539241949,458788160,3436315007,1807016891,3718408830,978976581,1043663428,3165965781,1927990952,4200891579,2372276910,3208408903,3533431907,1412390302,2931980059,4132332400,1947078029,3881505623,4168226417,2941484381,1077988104,1320477388,886195818,18198404,3786409e3,2509781533,112762804,3463356488,1866414978,891333506,18488651,661792760,1628790961,3885187036,3141171499,876946877,2693282273,1372485963,791857591,2686433993,3759982718,3167212022,3472953795,2716379847,445679433,3561995674,3504004811,3574258232,54117162,3331405415,2381918588,3769707343,4154350007,1140177722,4074052095,668550556,3214352940,367459370,261225585,2610173221,4209349473,3468074219,3265815641,314222801,3066103646,3808782860,282218597,3406013506,3773591054,379116347,1285071038,846784868,2669647154,3771962079,3550491691,2305946142,453669953,1268987020,3317592352,3279303384,3744833421,2610507566,3859509063,266596637,3847019092,517658769,3462560207,3443424879,370717030,4247526661,2224018117,4143653529,4112773975,2788324899,2477274417,1456262402,2901442914,1517677493,1846949527,2295493580,3734397586,2176403920,1280348187,1908823572,3871786941,846861322,1172426758,3287448474,3383383037,1655181056,3139813346,901632758,1897031941,2986607138,3066810236,3447102507,1393639104,373351379,950779232,625454576,3124240540,4148612726,2007998917,544563296,2244738638,2330496472,2058025392,1291430526,424198748,50039436,29584100,3605783033,2429876329,2791104160,1057563949,3255363231,3075367218,3463963227,1469046755,985887462]];var ct={pbox:[],sbox:[]};function Ct(ir,er){let tr=er>>24&255,sr=er>>16&255,ar=er>>8&255,hr=er&255,_r=ir.sbox[0][tr]+ir.sbox[1][sr];return _r=_r^ir.sbox[2][ar],_r=_r+ir.sbox[3][hr],_r}function qt(ir,er,tr){let sr=er,ar=tr,hr;for(let _r=0;_r<_e;++_r)sr=sr^ir.pbox[_r],ar=Ct(ir,sr)^ar,hr=sr,sr=ar,ar=hr;return hr=sr,sr=ar,ar=hr,ar=ar^ir.pbox[_e],sr=sr^ir.pbox[_e+1],{left:sr,right:ar}}function Ot(ir,er,tr){let sr=er,ar=tr,hr;for(let _r=_e+1;_r>1;--_r)sr=sr^ir.pbox[_r],ar=Ct(ir,sr)^ar,hr=sr,sr=ar,ar=hr;return hr=sr,sr=ar,ar=hr,ar=ar^ir.pbox[1],sr=sr^ir.pbox[0],{left:sr,right:ar}}function Lt(ir,er,tr){for(let dr=0;dr<4;dr++){ir.sbox[dr]=[];for(let ur=0;ur<256;ur++)ir.sbox[dr][ur]=yt[dr][ur]}let sr=0;for(let dr=0;dr<_e+2;dr++)ir.pbox[dr]=pt[dr]^er[sr],sr++,sr>=tr&&(sr=0);let ar=0,hr=0,_r=0;for(let dr=0;dr<_e+2;dr+=2)_r=qt(ir,ar,hr),ar=_r.left,hr=_r.right,ir.pbox[dr]=ar,ir.pbox[dr+1]=hr;for(let dr=0;dr<4;dr++)for(let ur=0;ur<256;ur+=2)_r=qt(ir,ar,hr),ar=_r.left,hr=_r.right,ir.sbox[dr][ur]=ar,ir.sbox[dr][ur+1]=hr;return!0}var Qt=j.Blowfish=c.extend({_doReset:function(){if(this._keyPriorReset!==this._key){var ir=this._keyPriorReset=this._key,er=ir.words,tr=ir.sigBytes/4;Lt(ct,er,tr)}},encryptBlock:function(ir,er){var tr=qt(ct,ir[er],ir[er+1]);ir[er]=tr.left,ir[er+1]=tr.right},decryptBlock:function(ir,er){var tr=Ot(ct,ir[er],ir[er+1]);ir[er]=tr.left,ir[er+1]=tr.right},blockSize:64/32,keySize:128/32,ivSize:64/32});a.Blowfish=c._createHelper(Qt)}(),o.Blowfish})}(blowfish)),blowfish.exports}(function(s,e){(function(o,a,d){s.exports=a(requireCore(),requireX64Core(),requireLibTypedarrays(),requireEncUtf16(),requireEncBase64(),requireEncBase64url(),requireMd5(),requireSha1(),requireSha256(),requireSha224(),requireSha512(),requireSha384(),requireSha3(),requireRipemd160(),requireHmac(),requirePbkdf2(),requireEvpkdf(),requireCipherCore(),requireModeCfb(),requireModeCtr(),requireModeCtrGladman(),requireModeOfb(),requireModeEcb(),requirePadAnsix923(),requirePadIso10126(),requirePadIso97971(),requirePadZeropadding(),requirePadNopadding(),requireFormatHex(),requireAes(),requireTripledes(),requireRc4(),requireRabbit(),requireRabbitLegacy(),requireBlowfish())})(commonjsGlobal$2,function(o){return o})})(cryptoJs);class $e8379818650e2442$export$93654d4f2d6cd524{constructor(){this.encoder=new TextEncoder,this._pieces=[],this._parts=[]}append_buffer(e){this.flush(),this._parts.push(e)}append(e){this._pieces.push(e)}flush(){if(this._pieces.length>0){const e=new Uint8Array(this._pieces);this._parts.push(e),this._pieces=[]}}toArrayBuffer(){const e=[];for(const o of this._parts)e.push(o);return $e8379818650e2442$var$concatArrayBuffers(e).buffer}}function $e8379818650e2442$var$concatArrayBuffers(s){let e=0;for(const d of s)e+=d.byteLength;const o=new Uint8Array(e);let a=0;for(const d of s){const c=new Uint8Array(d.buffer,d.byteOffset,d.byteLength);o.set(c,a),a+=d.byteLength}return o}function $0cfd7828ad59115f$export$417857010dc9287f(s){return new $0cfd7828ad59115f$var$Unpacker(s).unpack()}function $0cfd7828ad59115f$export$2a703dbb0cb35339(s){const e=new $0cfd7828ad59115f$export$b9ec4b114aa40074,o=e.pack(s);return o instanceof Promise?o.then(()=>e.getBuffer()):e.getBuffer()}class $0cfd7828ad59115f$var$Unpacker{constructor(e){this.index=0,this.dataBuffer=e,this.dataView=new Uint8Array(this.dataBuffer),this.length=this.dataBuffer.byteLength}unpack(){const e=this.unpack_uint8();if(e<128)return e;if((e^224)<32)return(e^224)-32;let o;if((o=e^160)<=15)return this.unpack_raw(o);if((o=e^176)<=15)return this.unpack_string(o);if((o=e^144)<=15)return this.unpack_array(o);if((o=e^128)<=15)return this.unpack_map(o);switch(e){case 192:return null;case 193:return;case 194:return!1;case 195:return!0;case 202:return this.unpack_float();case 203:return this.unpack_double();case 204:return this.unpack_uint8();case 205:return this.unpack_uint16();case 206:return this.unpack_uint32();case 207:return this.unpack_uint64();case 208:return this.unpack_int8();case 209:return this.unpack_int16();case 210:return this.unpack_int32();case 211:return this.unpack_int64();case 212:return;case 213:return;case 214:return;case 215:return;case 216:return o=this.unpack_uint16(),this.unpack_string(o);case 217:return o=this.unpack_uint32(),this.unpack_string(o);case 218:return o=this.unpack_uint16(),this.unpack_raw(o);case 219:return o=this.unpack_uint32(),this.unpack_raw(o);case 220:return o=this.unpack_uint16(),this.unpack_array(o);case 221:return o=this.unpack_uint32(),this.unpack_array(o);case 222:return o=this.unpack_uint16(),this.unpack_map(o);case 223:return o=this.unpack_uint32(),this.unpack_map(o)}}unpack_uint8(){const e=this.dataView[this.index]&255;return this.index++,e}unpack_uint16(){const e=this.read(2),o=(e[0]&255)*256+(e[1]&255);return this.index+=2,o}unpack_uint32(){const e=this.read(4),o=((e[0]*256+e[1])*256+e[2])*256+e[3];return this.index+=4,o}unpack_uint64(){const e=this.read(8),o=((((((e[0]*256+e[1])*256+e[2])*256+e[3])*256+e[4])*256+e[5])*256+e[6])*256+e[7];return this.index+=8,o}unpack_int8(){const e=this.unpack_uint8();return e<128?e:e-256}unpack_int16(){const e=this.unpack_uint16();return e<32768?e:e-65536}unpack_int32(){const e=this.unpack_uint32();return e<2**31?e:e-2**32}unpack_int64(){const e=this.unpack_uint64();return e<2**63?e:e-2**64}unpack_raw(e){if(this.length<this.index+e)throw new Error(`BinaryPackFailure: index is out of range ${this.index} ${e} ${this.length}`);const o=this.dataBuffer.slice(this.index,this.index+e);return this.index+=e,o}unpack_string(e){const o=this.read(e);let a=0,d="",c,j;for(;a<e;)c=o[a],c<160?(j=c,a++):(c^192)<32?(j=(c&31)<<6|o[a+1]&63,a+=2):(c^224)<16?(j=(c&15)<<12|(o[a+1]&63)<<6|o[a+2]&63,a+=3):(j=(c&7)<<18|(o[a+1]&63)<<12|(o[a+2]&63)<<6|o[a+3]&63,a+=4),d+=String.fromCodePoint(j);return this.index+=e,d}unpack_array(e){const o=new Array(e);for(let a=0;a<e;a++)o[a]=this.unpack();return o}unpack_map(e){const o={};for(let a=0;a<e;a++){const d=this.unpack();o[d]=this.unpack()}return o}unpack_float(){const e=this.unpack_uint32(),o=e>>31,a=(e>>23&255)-127,d=e&8388607|8388608;return(o===0?1:-1)*d*2**(a-23)}unpack_double(){const e=this.unpack_uint32(),o=this.unpack_uint32(),a=e>>31,d=(e>>20&2047)-1023,j=(e&1048575|1048576)*2**(d-20)+o*2**(d-52);return(a===0?1:-1)*j}read(e){const o=this.index;if(o+e<=this.length)return this.dataView.subarray(o,o+e);throw new Error("BinaryPackFailure: read index out of range")}}class $0cfd7828ad59115f$export$b9ec4b114aa40074{getBuffer(){return this._bufferBuilder.toArrayBuffer()}pack(e){if(typeof e=="string")this.pack_string(e);else if(typeof e=="number")Math.floor(e)===e?this.pack_integer(e):this.pack_double(e);else if(typeof e=="boolean")e===!0?this._bufferBuilder.append(195):e===!1&&this._bufferBuilder.append(194);else if(e===void 0)this._bufferBuilder.append(192);else if(typeof e=="object")if(e===null)this._bufferBuilder.append(192);else{const o=e.constructor;if(e instanceof Array){const a=this.pack_array(e);if(a instanceof Promise)return a.then(()=>this._bufferBuilder.flush())}else if(e instanceof ArrayBuffer)this.pack_bin(new Uint8Array(e));else if("BYTES_PER_ELEMENT"in e){const a=e;this.pack_bin(new Uint8Array(a.buffer,a.byteOffset,a.byteLength))}else if(e instanceof Date)this.pack_string(e.toString());else{if(e instanceof Blob)return e.arrayBuffer().then(a=>{this.pack_bin(new Uint8Array(a)),this._bufferBuilder.flush()});if(o==Object||o.toString().startsWith("class")){const a=this.pack_object(e);if(a instanceof Promise)return a.then(()=>this._bufferBuilder.flush())}else throw new Error(`Type "${o.toString()}" not yet supported`)}}else throw new Error(`Type "${typeof e}" not yet supported`);this._bufferBuilder.flush()}pack_bin(e){const o=e.length;if(o<=15)this.pack_uint8(160+o);else if(o<=65535)this._bufferBuilder.append(218),this.pack_uint16(o);else if(o<=4294967295)this._bufferBuilder.append(219),this.pack_uint32(o);else throw new Error("Invalid length");this._bufferBuilder.append_buffer(e)}pack_string(e){const o=this._textEncoder.encode(e),a=o.length;if(a<=15)this.pack_uint8(176+a);else if(a<=65535)this._bufferBuilder.append(216),this.pack_uint16(a);else if(a<=4294967295)this._bufferBuilder.append(217),this.pack_uint32(a);else throw new Error("Invalid length");this._bufferBuilder.append_buffer(o)}pack_array(e){const o=e.length;if(o<=15)this.pack_uint8(144+o);else if(o<=65535)this._bufferBuilder.append(220),this.pack_uint16(o);else if(o<=4294967295)this._bufferBuilder.append(221),this.pack_uint32(o);else throw new Error("Invalid length");const a=d=>{if(d<o){const c=this.pack(e[d]);return c instanceof Promise?c.then(()=>a(d+1)):a(d+1)}};return a(0)}pack_integer(e){if(e>=-32&&e<=127)this._bufferBuilder.append(e&255);else if(e>=0&&e<=255)this._bufferBuilder.append(204),this.pack_uint8(e);else if(e>=-128&&e<=127)this._bufferBuilder.append(208),this.pack_int8(e);else if(e>=0&&e<=65535)this._bufferBuilder.append(205),this.pack_uint16(e);else if(e>=-32768&&e<=32767)this._bufferBuilder.append(209),this.pack_int16(e);else if(e>=0&&e<=4294967295)this._bufferBuilder.append(206),this.pack_uint32(e);else if(e>=-2147483648&&e<=2147483647)this._bufferBuilder.append(210),this.pack_int32(e);else if(e>=-9223372036854776e3&&e<=9223372036854776e3)this._bufferBuilder.append(211),this.pack_int64(e);else if(e>=0&&e<=18446744073709552e3)this._bufferBuilder.append(207),this.pack_uint64(e);else throw new Error("Invalid integer")}pack_double(e){let o=0;e<0&&(o=1,e=-e);const a=Math.floor(Math.log(e)/Math.LN2),d=e/2**a-1,c=Math.floor(d*2**52),j=2**32,_e=o<<31|a+1023<<20|c/j&1048575,pt=c%j;this._bufferBuilder.append(203),this.pack_int32(_e),this.pack_int32(pt)}pack_object(e){const o=Object.keys(e),a=o.length;if(a<=15)this.pack_uint8(128+a);else if(a<=65535)this._bufferBuilder.append(222),this.pack_uint16(a);else if(a<=4294967295)this._bufferBuilder.append(223),this.pack_uint32(a);else throw new Error("Invalid length");const d=c=>{if(c<o.length){const j=o[c];if(e.hasOwnProperty(j)){this.pack(j);const _e=this.pack(e[j]);if(_e instanceof Promise)return _e.then(()=>d(c+1))}return d(c+1)}};return d(0)}pack_uint8(e){this._bufferBuilder.append(e)}pack_uint16(e){this._bufferBuilder.append(e>>8),this._bufferBuilder.append(e&255)}pack_uint32(e){const o=e&4294967295;this._bufferBuilder.append((o&4278190080)>>>24),this._bufferBuilder.append((o&16711680)>>>16),this._bufferBuilder.append((o&65280)>>>8),this._bufferBuilder.append(o&255)}pack_uint64(e){const o=e/4294967296,a=e%2**32;this._bufferBuilder.append((o&4278190080)>>>24),this._bufferBuilder.append((o&16711680)>>>16),this._bufferBuilder.append((o&65280)>>>8),this._bufferBuilder.append(o&255),this._bufferBuilder.append((a&4278190080)>>>24),this._bufferBuilder.append((a&16711680)>>>16),this._bufferBuilder.append((a&65280)>>>8),this._bufferBuilder.append(a&255)}pack_int8(e){this._bufferBuilder.append(e&255)}pack_int16(e){this._bufferBuilder.append((e&65280)>>8),this._bufferBuilder.append(e&255)}pack_int32(e){this._bufferBuilder.append(e>>>24&255),this._bufferBuilder.append((e&16711680)>>>16),this._bufferBuilder.append((e&65280)>>>8),this._bufferBuilder.append(e&255)}pack_int64(e){const o=Math.floor(e/4294967296),a=e%2**32;this._bufferBuilder.append((o&4278190080)>>>24),this._bufferBuilder.append((o&16711680)>>>16),this._bufferBuilder.append((o&65280)>>>8),this._bufferBuilder.append(o&255),this._bufferBuilder.append((a&4278190080)>>>24),this._bufferBuilder.append((a&16711680)>>>16),this._bufferBuilder.append((a&65280)>>>8),this._bufferBuilder.append(a&255)}constructor(){this._bufferBuilder=new $e8379818650e2442$export$93654d4f2d6cd524,this._textEncoder=new TextEncoder}}let logDisabled_=!0,deprecationWarnings_=!0;function extractVersion(s,e,o){const a=s.match(e);return a&&a.length>=o&&parseFloat(a[o],10)}function wrapPeerConnectionEvent(s,e,o){if(!s.RTCPeerConnection)return;const a=s.RTCPeerConnection.prototype,d=a.addEventListener;a.addEventListener=function(j,_e){if(j!==e)return d.apply(this,arguments);const pt=yt=>{const ct=o(yt);ct&&(_e.handleEvent?_e.handleEvent(ct):_e(ct))};return this._eventMap=this._eventMap||{},this._eventMap[e]||(this._eventMap[e]=new Map),this._eventMap[e].set(_e,pt),d.apply(this,[j,pt])};const c=a.removeEventListener;a.removeEventListener=function(j,_e){if(j!==e||!this._eventMap||!this._eventMap[e])return c.apply(this,arguments);if(!this._eventMap[e].has(_e))return c.apply(this,arguments);const pt=this._eventMap[e].get(_e);return this._eventMap[e].delete(_e),this._eventMap[e].size===0&&delete this._eventMap[e],Object.keys(this._eventMap).length===0&&delete this._eventMap,c.apply(this,[j,pt])},Object.defineProperty(a,"on"+e,{get(){return this["_on"+e]},set(j){this["_on"+e]&&(this.removeEventListener(e,this["_on"+e]),delete this["_on"+e]),j&&this.addEventListener(e,this["_on"+e]=j)},enumerable:!0,configurable:!0})}function disableLog(s){return typeof s!="boolean"?new Error("Argument type: "+typeof s+". Please use a boolean."):(logDisabled_=s,s?"adapter.js logging disabled":"adapter.js logging enabled")}function disableWarnings(s){return typeof s!="boolean"?new Error("Argument type: "+typeof s+". Please use a boolean."):(deprecationWarnings_=!s,"adapter.js deprecation warnings "+(s?"disabled":"enabled"))}function log(){if(typeof window=="object"){if(logDisabled_)return;typeof console<"u"&&typeof console.log=="function"&&console.log.apply(console,arguments)}}function deprecated(s,e){deprecationWarnings_&&console.warn(s+" is deprecated, please use "+e+" instead.")}function detectBrowser(s){const e={browser:null,version:null};if(typeof s>"u"||!s.navigator||!s.navigator.userAgent)return e.browser="Not a browser.",e;const{navigator:o}=s;if(o.userAgentData&&o.userAgentData.brands){const a=o.userAgentData.brands.find(d=>d.brand==="Chromium");if(a)return{browser:"chrome",version:parseInt(a.version,10)}}if(o.mozGetUserMedia)e.browser="firefox",e.version=parseInt(extractVersion(o.userAgent,/Firefox\/(\d+)\./,1));else if(o.webkitGetUserMedia||s.isSecureContext===!1&&s.webkitRTCPeerConnection)e.browser="chrome",e.version=parseInt(extractVersion(o.userAgent,/Chrom(e|ium)\/(\d+)\./,2));else if(s.RTCPeerConnection&&o.userAgent.match(/AppleWebKit\/(\d+)\./))e.browser="safari",e.version=parseInt(extractVersion(o.userAgent,/AppleWebKit\/(\d+)\./,1)),e.supportsUnifiedPlan=s.RTCRtpTransceiver&&"currentDirection"in s.RTCRtpTransceiver.prototype,e._safariVersion=extractVersion(o.userAgent,/Version\/(\d+(\.?\d+))/,1);else return e.browser="Not a supported browser.",e;return e}function isObject(s){return Object.prototype.toString.call(s)==="[object Object]"}function compactObject(s){return isObject(s)?Object.keys(s).reduce(function(e,o){const a=isObject(s[o]),d=a?compactObject(s[o]):s[o],c=a&&!Object.keys(d).length;return d===void 0||c?e:Object.assign(e,{[o]:d})},{}):s}function walkStats(s,e,o){!e||o.has(e.id)||(o.set(e.id,e),Object.keys(e).forEach(a=>{a.endsWith("Id")?walkStats(s,s.get(e[a]),o):a.endsWith("Ids")&&e[a].forEach(d=>{walkStats(s,s.get(d),o)})}))}function filterStats(s,e,o){const a=o?"outbound-rtp":"inbound-rtp",d=new Map;if(e===null)return d;const c=[];return s.forEach(j=>{j.type==="track"&&j.trackIdentifier===e.id&&c.push(j)}),c.forEach(j=>{s.forEach(_e=>{_e.type===a&&_e.trackId===j.id&&walkStats(s,_e,d)})}),d}const logging=log;function shimGetUserMedia$2(s,e){const o=s&&s.navigator;if(!o.mediaDevices)return;const a=function(_e){if(typeof _e!="object"||_e.mandatory||_e.optional)return _e;const pt={};return Object.keys(_e).forEach(yt=>{if(yt==="require"||yt==="advanced"||yt==="mediaSource")return;const ct=typeof _e[yt]=="object"?_e[yt]:{ideal:_e[yt]};ct.exact!==void 0&&typeof ct.exact=="number"&&(ct.min=ct.max=ct.exact);const Ct=function(qt,Ot){return qt?qt+Ot.charAt(0).toUpperCase()+Ot.slice(1):Ot==="deviceId"?"sourceId":Ot};if(ct.ideal!==void 0){pt.optional=pt.optional||[];let qt={};typeof ct.ideal=="number"?(qt[Ct("min",yt)]=ct.ideal,pt.optional.push(qt),qt={},qt[Ct("max",yt)]=ct.ideal,pt.optional.push(qt)):(qt[Ct("",yt)]=ct.ideal,pt.optional.push(qt))}ct.exact!==void 0&&typeof ct.exact!="number"?(pt.mandatory=pt.mandatory||{},pt.mandatory[Ct("",yt)]=ct.exact):["min","max"].forEach(qt=>{ct[qt]!==void 0&&(pt.mandatory=pt.mandatory||{},pt.mandatory[Ct(qt,yt)]=ct[qt])})}),_e.advanced&&(pt.optional=(pt.optional||[]).concat(_e.advanced)),pt},d=function(_e,pt){if(e.version>=61)return pt(_e);if(_e=JSON.parse(JSON.stringify(_e)),_e&&typeof _e.audio=="object"){const yt=function(ct,Ct,qt){Ct in ct&&!(qt in ct)&&(ct[qt]=ct[Ct],delete ct[Ct])};_e=JSON.parse(JSON.stringify(_e)),yt(_e.audio,"autoGainControl","googAutoGainControl"),yt(_e.audio,"noiseSuppression","googNoiseSuppression"),_e.audio=a(_e.audio)}if(_e&&typeof _e.video=="object"){let yt=_e.video.facingMode;yt=yt&&(typeof yt=="object"?yt:{ideal:yt});const ct=e.version<66;if(yt&&(yt.exact==="user"||yt.exact==="environment"||yt.ideal==="user"||yt.ideal==="environment")&&!(o.mediaDevices.getSupportedConstraints&&o.mediaDevices.getSupportedConstraints().facingMode&&!ct)){delete _e.video.facingMode;let Ct;if(yt.exact==="environment"||yt.ideal==="environment"?Ct=["back","rear"]:(yt.exact==="user"||yt.ideal==="user")&&(Ct=["front"]),Ct)return o.mediaDevices.enumerateDevices().then(qt=>{qt=qt.filter(Lt=>Lt.kind==="videoinput");let Ot=qt.find(Lt=>Ct.some(Qt=>Lt.label.toLowerCase().includes(Qt)));return!Ot&&qt.length&&Ct.includes("back")&&(Ot=qt[qt.length-1]),Ot&&(_e.video.deviceId=yt.exact?{exact:Ot.deviceId}:{ideal:Ot.deviceId}),_e.video=a(_e.video),logging("chrome: "+JSON.stringify(_e)),pt(_e)})}_e.video=a(_e.video)}return logging("chrome: "+JSON.stringify(_e)),pt(_e)},c=function(_e){return e.version>=64?_e:{name:{PermissionDeniedError:"NotAllowedError",PermissionDismissedError:"NotAllowedError",InvalidStateError:"NotAllowedError",DevicesNotFoundError:"NotFoundError",ConstraintNotSatisfiedError:"OverconstrainedError",TrackStartError:"NotReadableError",MediaDeviceFailedDueToShutdown:"NotAllowedError",MediaDeviceKillSwitchOn:"NotAllowedError",TabCaptureError:"AbortError",ScreenCaptureError:"AbortError",DeviceCaptureError:"AbortError"}[_e.name]||_e.name,message:_e.message,constraint:_e.constraint||_e.constraintName,toString(){return this.name+(this.message&&": ")+this.message}}},j=function(_e,pt,yt){d(_e,ct=>{o.webkitGetUserMedia(ct,pt,Ct=>{yt&&yt(c(Ct))})})};if(o.getUserMedia=j.bind(o),o.mediaDevices.getUserMedia){const _e=o.mediaDevices.getUserMedia.bind(o.mediaDevices);o.mediaDevices.getUserMedia=function(pt){return d(pt,yt=>_e(yt).then(ct=>{if(yt.audio&&!ct.getAudioTracks().length||yt.video&&!ct.getVideoTracks().length)throw ct.getTracks().forEach(Ct=>{Ct.stop()}),new DOMException("","NotFoundError");return ct},ct=>Promise.reject(c(ct))))}}}function shimMediaStream(s){s.MediaStream=s.MediaStream||s.webkitMediaStream}function shimOnTrack$1(s){if(typeof s=="object"&&s.RTCPeerConnection&&!("ontrack"in s.RTCPeerConnection.prototype)){Object.defineProperty(s.RTCPeerConnection.prototype,"ontrack",{get(){return this._ontrack},set(o){this._ontrack&&this.removeEventListener("track",this._ontrack),this.addEventListener("track",this._ontrack=o)},enumerable:!0,configurable:!0});const e=s.RTCPeerConnection.prototype.setRemoteDescription;s.RTCPeerConnection.prototype.setRemoteDescription=function(){return this._ontrackpoly||(this._ontrackpoly=a=>{a.stream.addEventListener("addtrack",d=>{let c;s.RTCPeerConnection.prototype.getReceivers?c=this.getReceivers().find(_e=>_e.track&&_e.track.id===d.track.id):c={track:d.track};const j=new Event("track");j.track=d.track,j.receiver=c,j.transceiver={receiver:c},j.streams=[a.stream],this.dispatchEvent(j)}),a.stream.getTracks().forEach(d=>{let c;s.RTCPeerConnection.prototype.getReceivers?c=this.getReceivers().find(_e=>_e.track&&_e.track.id===d.id):c={track:d};const j=new Event("track");j.track=d,j.receiver=c,j.transceiver={receiver:c},j.streams=[a.stream],this.dispatchEvent(j)})},this.addEventListener("addstream",this._ontrackpoly)),e.apply(this,arguments)}}else wrapPeerConnectionEvent(s,"track",e=>(e.transceiver||Object.defineProperty(e,"transceiver",{value:{receiver:e.receiver}}),e))}function shimGetSendersWithDtmf(s){if(typeof s=="object"&&s.RTCPeerConnection&&!("getSenders"in s.RTCPeerConnection.prototype)&&"createDTMFSender"in s.RTCPeerConnection.prototype){const e=function(d,c){return{track:c,get dtmf(){return this._dtmf===void 0&&(c.kind==="audio"?this._dtmf=d.createDTMFSender(c):this._dtmf=null),this._dtmf},_pc:d}};if(!s.RTCPeerConnection.prototype.getSenders){s.RTCPeerConnection.prototype.getSenders=function(){return this._senders=this._senders||[],this._senders.slice()};const d=s.RTCPeerConnection.prototype.addTrack;s.RTCPeerConnection.prototype.addTrack=function(_e,pt){let yt=d.apply(this,arguments);return yt||(yt=e(this,_e),this._senders.push(yt)),yt};const c=s.RTCPeerConnection.prototype.removeTrack;s.RTCPeerConnection.prototype.removeTrack=function(_e){c.apply(this,arguments);const pt=this._senders.indexOf(_e);pt!==-1&&this._senders.splice(pt,1)}}const o=s.RTCPeerConnection.prototype.addStream;s.RTCPeerConnection.prototype.addStream=function(c){this._senders=this._senders||[],o.apply(this,[c]),c.getTracks().forEach(j=>{this._senders.push(e(this,j))})};const a=s.RTCPeerConnection.prototype.removeStream;s.RTCPeerConnection.prototype.removeStream=function(c){this._senders=this._senders||[],a.apply(this,[c]),c.getTracks().forEach(j=>{const _e=this._senders.find(pt=>pt.track===j);_e&&this._senders.splice(this._senders.indexOf(_e),1)})}}else if(typeof s=="object"&&s.RTCPeerConnection&&"getSenders"in s.RTCPeerConnection.prototype&&"createDTMFSender"in s.RTCPeerConnection.prototype&&s.RTCRtpSender&&!("dtmf"in s.RTCRtpSender.prototype)){const e=s.RTCPeerConnection.prototype.getSenders;s.RTCPeerConnection.prototype.getSenders=function(){const a=e.apply(this,[]);return a.forEach(d=>d._pc=this),a},Object.defineProperty(s.RTCRtpSender.prototype,"dtmf",{get(){return this._dtmf===void 0&&(this.track.kind==="audio"?this._dtmf=this._pc.createDTMFSender(this.track):this._dtmf=null),this._dtmf}})}}function shimSenderReceiverGetStats(s){if(!(typeof s=="object"&&s.RTCPeerConnection&&s.RTCRtpSender&&s.RTCRtpReceiver))return;if(!("getStats"in s.RTCRtpSender.prototype)){const o=s.RTCPeerConnection.prototype.getSenders;o&&(s.RTCPeerConnection.prototype.getSenders=function(){const c=o.apply(this,[]);return c.forEach(j=>j._pc=this),c});const a=s.RTCPeerConnection.prototype.addTrack;a&&(s.RTCPeerConnection.prototype.addTrack=function(){const c=a.apply(this,arguments);return c._pc=this,c}),s.RTCRtpSender.prototype.getStats=function(){const c=this;return this._pc.getStats().then(j=>filterStats(j,c.track,!0))}}if(!("getStats"in s.RTCRtpReceiver.prototype)){const o=s.RTCPeerConnection.prototype.getReceivers;o&&(s.RTCPeerConnection.prototype.getReceivers=function(){const d=o.apply(this,[]);return d.forEach(c=>c._pc=this),d}),wrapPeerConnectionEvent(s,"track",a=>(a.receiver._pc=a.srcElement,a)),s.RTCRtpReceiver.prototype.getStats=function(){const d=this;return this._pc.getStats().then(c=>filterStats(c,d.track,!1))}}if(!("getStats"in s.RTCRtpSender.prototype&&"getStats"in s.RTCRtpReceiver.prototype))return;const e=s.RTCPeerConnection.prototype.getStats;s.RTCPeerConnection.prototype.getStats=function(){if(arguments.length>0&&arguments[0]instanceof s.MediaStreamTrack){const a=arguments[0];let d,c,j;return this.getSenders().forEach(_e=>{_e.track===a&&(d?j=!0:d=_e)}),this.getReceivers().forEach(_e=>(_e.track===a&&(c?j=!0:c=_e),_e.track===a)),j||d&&c?Promise.reject(new DOMException("There are more than one sender or receiver for the track.","InvalidAccessError")):d?d.getStats():c?c.getStats():Promise.reject(new DOMException("There is no sender or receiver for the track.","InvalidAccessError"))}return e.apply(this,arguments)}}function shimAddTrackRemoveTrackWithNative(s){s.RTCPeerConnection.prototype.getLocalStreams=function(){return this._shimmedLocalStreams=this._shimmedLocalStreams||{},Object.keys(this._shimmedLocalStreams).map(j=>this._shimmedLocalStreams[j][0])};const e=s.RTCPeerConnection.prototype.addTrack;s.RTCPeerConnection.prototype.addTrack=function(j,_e){if(!_e)return e.apply(this,arguments);this._shimmedLocalStreams=this._shimmedLocalStreams||{};const pt=e.apply(this,arguments);return this._shimmedLocalStreams[_e.id]?this._shimmedLocalStreams[_e.id].indexOf(pt)===-1&&this._shimmedLocalStreams[_e.id].push(pt):this._shimmedLocalStreams[_e.id]=[_e,pt],pt};const o=s.RTCPeerConnection.prototype.addStream;s.RTCPeerConnection.prototype.addStream=function(j){this._shimmedLocalStreams=this._shimmedLocalStreams||{},j.getTracks().forEach(yt=>{if(this.getSenders().find(Ct=>Ct.track===yt))throw new DOMException("Track already exists.","InvalidAccessError")});const _e=this.getSenders();o.apply(this,arguments);const pt=this.getSenders().filter(yt=>_e.indexOf(yt)===-1);this._shimmedLocalStreams[j.id]=[j].concat(pt)};const a=s.RTCPeerConnection.prototype.removeStream;s.RTCPeerConnection.prototype.removeStream=function(j){return this._shimmedLocalStreams=this._shimmedLocalStreams||{},delete this._shimmedLocalStreams[j.id],a.apply(this,arguments)};const d=s.RTCPeerConnection.prototype.removeTrack;s.RTCPeerConnection.prototype.removeTrack=function(j){return this._shimmedLocalStreams=this._shimmedLocalStreams||{},j&&Object.keys(this._shimmedLocalStreams).forEach(_e=>{const pt=this._shimmedLocalStreams[_e].indexOf(j);pt!==-1&&this._shimmedLocalStreams[_e].splice(pt,1),this._shimmedLocalStreams[_e].length===1&&delete this._shimmedLocalStreams[_e]}),d.apply(this,arguments)}}function shimAddTrackRemoveTrack(s,e){if(!s.RTCPeerConnection)return;if(s.RTCPeerConnection.prototype.addTrack&&e.version>=65)return shimAddTrackRemoveTrackWithNative(s);const o=s.RTCPeerConnection.prototype.getLocalStreams;s.RTCPeerConnection.prototype.getLocalStreams=function(){const ct=o.apply(this);return this._reverseStreams=this._reverseStreams||{},ct.map(Ct=>this._reverseStreams[Ct.id])};const a=s.RTCPeerConnection.prototype.addStream;s.RTCPeerConnection.prototype.addStream=function(ct){if(this._streams=this._streams||{},this._reverseStreams=this._reverseStreams||{},ct.getTracks().forEach(Ct=>{if(this.getSenders().find(Ot=>Ot.track===Ct))throw new DOMException("Track already exists.","InvalidAccessError")}),!this._reverseStreams[ct.id]){const Ct=new s.MediaStream(ct.getTracks());this._streams[ct.id]=Ct,this._reverseStreams[Ct.id]=ct,ct=Ct}a.apply(this,[ct])};const d=s.RTCPeerConnection.prototype.removeStream;s.RTCPeerConnection.prototype.removeStream=function(ct){this._streams=this._streams||{},this._reverseStreams=this._reverseStreams||{},d.apply(this,[this._streams[ct.id]||ct]),delete this._reverseStreams[this._streams[ct.id]?this._streams[ct.id].id:ct.id],delete this._streams[ct.id]},s.RTCPeerConnection.prototype.addTrack=function(ct,Ct){if(this.signalingState==="closed")throw new DOMException("The RTCPeerConnection's signalingState is 'closed'.","InvalidStateError");const qt=[].slice.call(arguments,1);if(qt.length!==1||!qt[0].getTracks().find(Qt=>Qt===ct))throw new DOMException("The adapter.js addTrack polyfill only supports a single  stream which is associated with the specified track.","NotSupportedError");if(this.getSenders().find(Qt=>Qt.track===ct))throw new DOMException("Track already exists.","InvalidAccessError");this._streams=this._streams||{},this._reverseStreams=this._reverseStreams||{};const Lt=this._streams[Ct.id];if(Lt)Lt.addTrack(ct),Promise.resolve().then(()=>{this.dispatchEvent(new Event("negotiationneeded"))});else{const Qt=new s.MediaStream([ct]);this._streams[Ct.id]=Qt,this._reverseStreams[Qt.id]=Ct,this.addStream(Qt)}return this.getSenders().find(Qt=>Qt.track===ct)};function c(yt,ct){let Ct=ct.sdp;return Object.keys(yt._reverseStreams||[]).forEach(qt=>{const Ot=yt._reverseStreams[qt],Lt=yt._streams[Ot.id];Ct=Ct.replace(new RegExp(Lt.id,"g"),Ot.id)}),new RTCSessionDescription({type:ct.type,sdp:Ct})}function j(yt,ct){let Ct=ct.sdp;return Object.keys(yt._reverseStreams||[]).forEach(qt=>{const Ot=yt._reverseStreams[qt],Lt=yt._streams[Ot.id];Ct=Ct.replace(new RegExp(Ot.id,"g"),Lt.id)}),new RTCSessionDescription({type:ct.type,sdp:Ct})}["createOffer","createAnswer"].forEach(function(yt){const ct=s.RTCPeerConnection.prototype[yt],Ct={[yt](){const qt=arguments;return arguments.length&&typeof arguments[0]=="function"?ct.apply(this,[Lt=>{const Qt=c(this,Lt);qt[0].apply(null,[Qt])},Lt=>{qt[1]&&qt[1].apply(null,Lt)},arguments[2]]):ct.apply(this,arguments).then(Lt=>c(this,Lt))}};s.RTCPeerConnection.prototype[yt]=Ct[yt]});const _e=s.RTCPeerConnection.prototype.setLocalDescription;s.RTCPeerConnection.prototype.setLocalDescription=function(){return!arguments.length||!arguments[0].type?_e.apply(this,arguments):(arguments[0]=j(this,arguments[0]),_e.apply(this,arguments))};const pt=Object.getOwnPropertyDescriptor(s.RTCPeerConnection.prototype,"localDescription");Object.defineProperty(s.RTCPeerConnection.prototype,"localDescription",{get(){const yt=pt.get.apply(this);return yt.type===""?yt:c(this,yt)}}),s.RTCPeerConnection.prototype.removeTrack=function(ct){if(this.signalingState==="closed")throw new DOMException("The RTCPeerConnection's signalingState is 'closed'.","InvalidStateError");if(!ct._pc)throw new DOMException("Argument 1 of RTCPeerConnection.removeTrack does not implement interface RTCRtpSender.","TypeError");if(!(ct._pc===this))throw new DOMException("Sender was not created by this connection.","InvalidAccessError");this._streams=this._streams||{};let qt;Object.keys(this._streams).forEach(Ot=>{this._streams[Ot].getTracks().find(Qt=>ct.track===Qt)&&(qt=this._streams[Ot])}),qt&&(qt.getTracks().length===1?this.removeStream(this._reverseStreams[qt.id]):qt.removeTrack(ct.track),this.dispatchEvent(new Event("negotiationneeded")))}}function shimPeerConnection$1(s,e){!s.RTCPeerConnection&&s.webkitRTCPeerConnection&&(s.RTCPeerConnection=s.webkitRTCPeerConnection),s.RTCPeerConnection&&e.version<53&&["setLocalDescription","setRemoteDescription","addIceCandidate"].forEach(function(o){const a=s.RTCPeerConnection.prototype[o],d={[o](){return arguments[0]=new(o==="addIceCandidate"?s.RTCIceCandidate:s.RTCSessionDescription)(arguments[0]),a.apply(this,arguments)}};s.RTCPeerConnection.prototype[o]=d[o]})}function fixNegotiationNeeded(s,e){wrapPeerConnectionEvent(s,"negotiationneeded",o=>{const a=o.target;if(!((e.version<72||a.getConfiguration&&a.getConfiguration().sdpSemantics==="plan-b")&&a.signalingState!=="stable"))return o})}const chromeShim=Object.freeze(Object.defineProperty({__proto__:null,fixNegotiationNeeded,shimAddTrackRemoveTrack,shimAddTrackRemoveTrackWithNative,shimGetSendersWithDtmf,shimGetUserMedia:shimGetUserMedia$2,shimMediaStream,shimOnTrack:shimOnTrack$1,shimPeerConnection:shimPeerConnection$1,shimSenderReceiverGetStats},Symbol.toStringTag,{value:"Module"}));function shimGetUserMedia$1(s,e){const o=s&&s.navigator,a=s&&s.MediaStreamTrack;if(o.getUserMedia=function(d,c,j){deprecated("navigator.getUserMedia","navigator.mediaDevices.getUserMedia"),o.mediaDevices.getUserMedia(d).then(c,j)},!(e.version>55&&"autoGainControl"in o.mediaDevices.getSupportedConstraints())){const d=function(j,_e,pt){_e in j&&!(pt in j)&&(j[pt]=j[_e],delete j[_e])},c=o.mediaDevices.getUserMedia.bind(o.mediaDevices);if(o.mediaDevices.getUserMedia=function(j){return typeof j=="object"&&typeof j.audio=="object"&&(j=JSON.parse(JSON.stringify(j)),d(j.audio,"autoGainControl","mozAutoGainControl"),d(j.audio,"noiseSuppression","mozNoiseSuppression")),c(j)},a&&a.prototype.getSettings){const j=a.prototype.getSettings;a.prototype.getSettings=function(){const _e=j.apply(this,arguments);return d(_e,"mozAutoGainControl","autoGainControl"),d(_e,"mozNoiseSuppression","noiseSuppression"),_e}}if(a&&a.prototype.applyConstraints){const j=a.prototype.applyConstraints;a.prototype.applyConstraints=function(_e){return this.kind==="audio"&&typeof _e=="object"&&(_e=JSON.parse(JSON.stringify(_e)),d(_e,"autoGainControl","mozAutoGainControl"),d(_e,"noiseSuppression","mozNoiseSuppression")),j.apply(this,[_e])}}}}function shimGetDisplayMedia(s,e){s.navigator.mediaDevices&&"getDisplayMedia"in s.navigator.mediaDevices||s.navigator.mediaDevices&&(s.navigator.mediaDevices.getDisplayMedia=function(a){if(!(a&&a.video)){const d=new DOMException("getDisplayMedia without video constraints is undefined");return d.name="NotFoundError",d.code=8,Promise.reject(d)}return a.video===!0?a.video={mediaSource:e}:a.video.mediaSource=e,s.navigator.mediaDevices.getUserMedia(a)})}function shimOnTrack(s){typeof s=="object"&&s.RTCTrackEvent&&"receiver"in s.RTCTrackEvent.prototype&&!("transceiver"in s.RTCTrackEvent.prototype)&&Object.defineProperty(s.RTCTrackEvent.prototype,"transceiver",{get(){return{receiver:this.receiver}}})}function shimPeerConnection(s,e){if(typeof s!="object"||!(s.RTCPeerConnection||s.mozRTCPeerConnection))return;!s.RTCPeerConnection&&s.mozRTCPeerConnection&&(s.RTCPeerConnection=s.mozRTCPeerConnection),e.version<53&&["setLocalDescription","setRemoteDescription","addIceCandidate"].forEach(function(d){const c=s.RTCPeerConnection.prototype[d],j={[d](){return arguments[0]=new(d==="addIceCandidate"?s.RTCIceCandidate:s.RTCSessionDescription)(arguments[0]),c.apply(this,arguments)}};s.RTCPeerConnection.prototype[d]=j[d]});const o={inboundrtp:"inbound-rtp",outboundrtp:"outbound-rtp",candidatepair:"candidate-pair",localcandidate:"local-candidate",remotecandidate:"remote-candidate"},a=s.RTCPeerConnection.prototype.getStats;s.RTCPeerConnection.prototype.getStats=function(){const[c,j,_e]=arguments;return a.apply(this,[c||null]).then(pt=>{if(e.version<53&&!j)try{pt.forEach(yt=>{yt.type=o[yt.type]||yt.type})}catch(yt){if(yt.name!=="TypeError")throw yt;pt.forEach((ct,Ct)=>{pt.set(Ct,Object.assign({},ct,{type:o[ct.type]||ct.type}))})}return pt}).then(j,_e)}}function shimSenderGetStats(s){if(!(typeof s=="object"&&s.RTCPeerConnection&&s.RTCRtpSender)||s.RTCRtpSender&&"getStats"in s.RTCRtpSender.prototype)return;const e=s.RTCPeerConnection.prototype.getSenders;e&&(s.RTCPeerConnection.prototype.getSenders=function(){const d=e.apply(this,[]);return d.forEach(c=>c._pc=this),d});const o=s.RTCPeerConnection.prototype.addTrack;o&&(s.RTCPeerConnection.prototype.addTrack=function(){const d=o.apply(this,arguments);return d._pc=this,d}),s.RTCRtpSender.prototype.getStats=function(){return this.track?this._pc.getStats(this.track):Promise.resolve(new Map)}}function shimReceiverGetStats(s){if(!(typeof s=="object"&&s.RTCPeerConnection&&s.RTCRtpSender)||s.RTCRtpSender&&"getStats"in s.RTCRtpReceiver.prototype)return;const e=s.RTCPeerConnection.prototype.getReceivers;e&&(s.RTCPeerConnection.prototype.getReceivers=function(){const a=e.apply(this,[]);return a.forEach(d=>d._pc=this),a}),wrapPeerConnectionEvent(s,"track",o=>(o.receiver._pc=o.srcElement,o)),s.RTCRtpReceiver.prototype.getStats=function(){return this._pc.getStats(this.track)}}function shimRemoveStream(s){!s.RTCPeerConnection||"removeStream"in s.RTCPeerConnection.prototype||(s.RTCPeerConnection.prototype.removeStream=function(o){deprecated("removeStream","removeTrack"),this.getSenders().forEach(a=>{a.track&&o.getTracks().includes(a.track)&&this.removeTrack(a)})})}function shimRTCDataChannel(s){s.DataChannel&&!s.RTCDataChannel&&(s.RTCDataChannel=s.DataChannel)}function shimAddTransceiver(s){if(!(typeof s=="object"&&s.RTCPeerConnection))return;const e=s.RTCPeerConnection.prototype.addTransceiver;e&&(s.RTCPeerConnection.prototype.addTransceiver=function(){this.setParametersPromises=[];let a=arguments[1]&&arguments[1].sendEncodings;a===void 0&&(a=[]),a=[...a];const d=a.length>0;d&&a.forEach(j=>{if("rid"in j&&!/^[a-z0-9]{0,16}$/i.test(j.rid))throw new TypeError("Invalid RID value provided.");if("scaleResolutionDownBy"in j&&!(parseFloat(j.scaleResolutionDownBy)>=1))throw new RangeError("scale_resolution_down_by must be >= 1.0");if("maxFramerate"in j&&!(parseFloat(j.maxFramerate)>=0))throw new RangeError("max_framerate must be >= 0.0")});const c=e.apply(this,arguments);if(d){const{sender:j}=c,_e=j.getParameters();(!("encodings"in _e)||_e.encodings.length===1&&Object.keys(_e.encodings[0]).length===0)&&(_e.encodings=a,j.sendEncodings=a,this.setParametersPromises.push(j.setParameters(_e).then(()=>{delete j.sendEncodings}).catch(()=>{delete j.sendEncodings})))}return c})}function shimGetParameters(s){if(!(typeof s=="object"&&s.RTCRtpSender))return;const e=s.RTCRtpSender.prototype.getParameters;e&&(s.RTCRtpSender.prototype.getParameters=function(){const a=e.apply(this,arguments);return"encodings"in a||(a.encodings=[].concat(this.sendEncodings||[{}])),a})}function shimCreateOffer(s){if(!(typeof s=="object"&&s.RTCPeerConnection))return;const e=s.RTCPeerConnection.prototype.createOffer;s.RTCPeerConnection.prototype.createOffer=function(){return this.setParametersPromises&&this.setParametersPromises.length?Promise.all(this.setParametersPromises).then(()=>e.apply(this,arguments)).finally(()=>{this.setParametersPromises=[]}):e.apply(this,arguments)}}function shimCreateAnswer(s){if(!(typeof s=="object"&&s.RTCPeerConnection))return;const e=s.RTCPeerConnection.prototype.createAnswer;s.RTCPeerConnection.prototype.createAnswer=function(){return this.setParametersPromises&&this.setParametersPromises.length?Promise.all(this.setParametersPromises).then(()=>e.apply(this,arguments)).finally(()=>{this.setParametersPromises=[]}):e.apply(this,arguments)}}const firefoxShim=Object.freeze(Object.defineProperty({__proto__:null,shimAddTransceiver,shimCreateAnswer,shimCreateOffer,shimGetDisplayMedia,shimGetParameters,shimGetUserMedia:shimGetUserMedia$1,shimOnTrack,shimPeerConnection,shimRTCDataChannel,shimReceiverGetStats,shimRemoveStream,shimSenderGetStats},Symbol.toStringTag,{value:"Module"}));function shimLocalStreamsAPI(s){if(!(typeof s!="object"||!s.RTCPeerConnection)){if("getLocalStreams"in s.RTCPeerConnection.prototype||(s.RTCPeerConnection.prototype.getLocalStreams=function(){return this._localStreams||(this._localStreams=[]),this._localStreams}),!("addStream"in s.RTCPeerConnection.prototype)){const e=s.RTCPeerConnection.prototype.addTrack;s.RTCPeerConnection.prototype.addStream=function(a){this._localStreams||(this._localStreams=[]),this._localStreams.includes(a)||this._localStreams.push(a),a.getAudioTracks().forEach(d=>e.call(this,d,a)),a.getVideoTracks().forEach(d=>e.call(this,d,a))},s.RTCPeerConnection.prototype.addTrack=function(a,...d){return d&&d.forEach(c=>{this._localStreams?this._localStreams.includes(c)||this._localStreams.push(c):this._localStreams=[c]}),e.apply(this,arguments)}}"removeStream"in s.RTCPeerConnection.prototype||(s.RTCPeerConnection.prototype.removeStream=function(o){this._localStreams||(this._localStreams=[]);const a=this._localStreams.indexOf(o);if(a===-1)return;this._localStreams.splice(a,1);const d=o.getTracks();this.getSenders().forEach(c=>{d.includes(c.track)&&this.removeTrack(c)})})}}function shimRemoteStreamsAPI(s){if(!(typeof s!="object"||!s.RTCPeerConnection)&&("getRemoteStreams"in s.RTCPeerConnection.prototype||(s.RTCPeerConnection.prototype.getRemoteStreams=function(){return this._remoteStreams?this._remoteStreams:[]}),!("onaddstream"in s.RTCPeerConnection.prototype))){Object.defineProperty(s.RTCPeerConnection.prototype,"onaddstream",{get(){return this._onaddstream},set(o){this._onaddstream&&(this.removeEventListener("addstream",this._onaddstream),this.removeEventListener("track",this._onaddstreampoly)),this.addEventListener("addstream",this._onaddstream=o),this.addEventListener("track",this._onaddstreampoly=a=>{a.streams.forEach(d=>{if(this._remoteStreams||(this._remoteStreams=[]),this._remoteStreams.includes(d))return;this._remoteStreams.push(d);const c=new Event("addstream");c.stream=d,this.dispatchEvent(c)})})}});const e=s.RTCPeerConnection.prototype.setRemoteDescription;s.RTCPeerConnection.prototype.setRemoteDescription=function(){const a=this;return this._onaddstreampoly||this.addEventListener("track",this._onaddstreampoly=function(d){d.streams.forEach(c=>{if(a._remoteStreams||(a._remoteStreams=[]),a._remoteStreams.indexOf(c)>=0)return;a._remoteStreams.push(c);const j=new Event("addstream");j.stream=c,a.dispatchEvent(j)})}),e.apply(a,arguments)}}}function shimCallbacksAPI(s){if(typeof s!="object"||!s.RTCPeerConnection)return;const e=s.RTCPeerConnection.prototype,o=e.createOffer,a=e.createAnswer,d=e.setLocalDescription,c=e.setRemoteDescription,j=e.addIceCandidate;e.createOffer=function(yt,ct){const Ct=arguments.length>=2?arguments[2]:arguments[0],qt=o.apply(this,[Ct]);return ct?(qt.then(yt,ct),Promise.resolve()):qt},e.createAnswer=function(yt,ct){const Ct=arguments.length>=2?arguments[2]:arguments[0],qt=a.apply(this,[Ct]);return ct?(qt.then(yt,ct),Promise.resolve()):qt};let _e=function(pt,yt,ct){const Ct=d.apply(this,[pt]);return ct?(Ct.then(yt,ct),Promise.resolve()):Ct};e.setLocalDescription=_e,_e=function(pt,yt,ct){const Ct=c.apply(this,[pt]);return ct?(Ct.then(yt,ct),Promise.resolve()):Ct},e.setRemoteDescription=_e,_e=function(pt,yt,ct){const Ct=j.apply(this,[pt]);return ct?(Ct.then(yt,ct),Promise.resolve()):Ct},e.addIceCandidate=_e}function shimGetUserMedia(s){const e=s&&s.navigator;if(e.mediaDevices&&e.mediaDevices.getUserMedia){const o=e.mediaDevices,a=o.getUserMedia.bind(o);e.mediaDevices.getUserMedia=d=>a(shimConstraints(d))}!e.getUserMedia&&e.mediaDevices&&e.mediaDevices.getUserMedia&&(e.getUserMedia=(function(a,d,c){e.mediaDevices.getUserMedia(a).then(d,c)}).bind(e))}function shimConstraints(s){return s&&s.video!==void 0?Object.assign({},s,{video:compactObject(s.video)}):s}function shimRTCIceServerUrls(s){if(!s.RTCPeerConnection)return;const e=s.RTCPeerConnection;s.RTCPeerConnection=function(a,d){if(a&&a.iceServers){const c=[];for(let j=0;j<a.iceServers.length;j++){let _e=a.iceServers[j];_e.urls===void 0&&_e.url?(deprecated("RTCIceServer.url","RTCIceServer.urls"),_e=JSON.parse(JSON.stringify(_e)),_e.urls=_e.url,delete _e.url,c.push(_e)):c.push(a.iceServers[j])}a.iceServers=c}return new e(a,d)},s.RTCPeerConnection.prototype=e.prototype,"generateCertificate"in e&&Object.defineProperty(s.RTCPeerConnection,"generateCertificate",{get(){return e.generateCertificate}})}function shimTrackEventTransceiver(s){typeof s=="object"&&s.RTCTrackEvent&&"receiver"in s.RTCTrackEvent.prototype&&!("transceiver"in s.RTCTrackEvent.prototype)&&Object.defineProperty(s.RTCTrackEvent.prototype,"transceiver",{get(){return{receiver:this.receiver}}})}function shimCreateOfferLegacy(s){const e=s.RTCPeerConnection.prototype.createOffer;s.RTCPeerConnection.prototype.createOffer=function(a){if(a){typeof a.offerToReceiveAudio<"u"&&(a.offerToReceiveAudio=!!a.offerToReceiveAudio);const d=this.getTransceivers().find(j=>j.receiver.track.kind==="audio");a.offerToReceiveAudio===!1&&d?d.direction==="sendrecv"?d.setDirection?d.setDirection("sendonly"):d.direction="sendonly":d.direction==="recvonly"&&(d.setDirection?d.setDirection("inactive"):d.direction="inactive"):a.offerToReceiveAudio===!0&&!d&&this.addTransceiver("audio",{direction:"recvonly"}),typeof a.offerToReceiveVideo<"u"&&(a.offerToReceiveVideo=!!a.offerToReceiveVideo);const c=this.getTransceivers().find(j=>j.receiver.track.kind==="video");a.offerToReceiveVideo===!1&&c?c.direction==="sendrecv"?c.setDirection?c.setDirection("sendonly"):c.direction="sendonly":c.direction==="recvonly"&&(c.setDirection?c.setDirection("inactive"):c.direction="inactive"):a.offerToReceiveVideo===!0&&!c&&this.addTransceiver("video",{direction:"recvonly"})}return e.apply(this,arguments)}}function shimAudioContext(s){typeof s!="object"||s.AudioContext||(s.AudioContext=s.webkitAudioContext)}const safariShim=Object.freeze(Object.defineProperty({__proto__:null,shimAudioContext,shimCallbacksAPI,shimConstraints,shimCreateOfferLegacy,shimGetUserMedia,shimLocalStreamsAPI,shimRTCIceServerUrls,shimRemoteStreamsAPI,shimTrackEventTransceiver},Symbol.toStringTag,{value:"Module"}));var sdp$1={exports:{}};(function(s){const e={};e.generateIdentifier=function(){return Math.random().toString(36).substring(2,12)},e.localCName=e.generateIdentifier(),e.splitLines=function(o){return o.trim().split(`
`).map(a=>a.trim())},e.splitSections=function(o){return o.split(`
m=`).map((d,c)=>(c>0?"m="+d:d).trim()+`\r
`)},e.getDescription=function(o){const a=e.splitSections(o);return a&&a[0]},e.getMediaSections=function(o){const a=e.splitSections(o);return a.shift(),a},e.matchPrefix=function(o,a){return e.splitLines(o).filter(d=>d.indexOf(a)===0)},e.parseCandidate=function(o){let a;o.indexOf("a=candidate:")===0?a=o.substring(12).split(" "):a=o.substring(10).split(" ");const d={foundation:a[0],component:{1:"rtp",2:"rtcp"}[a[1]]||a[1],protocol:a[2].toLowerCase(),priority:parseInt(a[3],10),ip:a[4],address:a[4],port:parseInt(a[5],10),type:a[7]};for(let c=8;c<a.length;c+=2)switch(a[c]){case"raddr":d.relatedAddress=a[c+1];break;case"rport":d.relatedPort=parseInt(a[c+1],10);break;case"tcptype":d.tcpType=a[c+1];break;case"ufrag":d.ufrag=a[c+1],d.usernameFragment=a[c+1];break;default:d[a[c]]===void 0&&(d[a[c]]=a[c+1]);break}return d},e.writeCandidate=function(o){const a=[];a.push(o.foundation);const d=o.component;d==="rtp"?a.push(1):d==="rtcp"?a.push(2):a.push(d),a.push(o.protocol.toUpperCase()),a.push(o.priority),a.push(o.address||o.ip),a.push(o.port);const c=o.type;return a.push("typ"),a.push(c),c!=="host"&&o.relatedAddress&&o.relatedPort&&(a.push("raddr"),a.push(o.relatedAddress),a.push("rport"),a.push(o.relatedPort)),o.tcpType&&o.protocol.toLowerCase()==="tcp"&&(a.push("tcptype"),a.push(o.tcpType)),(o.usernameFragment||o.ufrag)&&(a.push("ufrag"),a.push(o.usernameFragment||o.ufrag)),"candidate:"+a.join(" ")},e.parseIceOptions=function(o){return o.substring(14).split(" ")},e.parseRtpMap=function(o){let a=o.substring(9).split(" ");const d={payloadType:parseInt(a.shift(),10)};return a=a[0].split("/"),d.name=a[0],d.clockRate=parseInt(a[1],10),d.channels=a.length===3?parseInt(a[2],10):1,d.numChannels=d.channels,d},e.writeRtpMap=function(o){let a=o.payloadType;o.preferredPayloadType!==void 0&&(a=o.preferredPayloadType);const d=o.channels||o.numChannels||1;return"a=rtpmap:"+a+" "+o.name+"/"+o.clockRate+(d!==1?"/"+d:"")+`\r
`},e.parseExtmap=function(o){const a=o.substring(9).split(" ");return{id:parseInt(a[0],10),direction:a[0].indexOf("/")>0?a[0].split("/")[1]:"sendrecv",uri:a[1],attributes:a.slice(2).join(" ")}},e.writeExtmap=function(o){return"a=extmap:"+(o.id||o.preferredId)+(o.direction&&o.direction!=="sendrecv"?"/"+o.direction:"")+" "+o.uri+(o.attributes?" "+o.attributes:"")+`\r
`},e.parseFmtp=function(o){const a={};let d;const c=o.substring(o.indexOf(" ")+1).split(";");for(let j=0;j<c.length;j++)d=c[j].trim().split("="),a[d[0].trim()]=d[1];return a},e.writeFmtp=function(o){let a="",d=o.payloadType;if(o.preferredPayloadType!==void 0&&(d=o.preferredPayloadType),o.parameters&&Object.keys(o.parameters).length){const c=[];Object.keys(o.parameters).forEach(j=>{o.parameters[j]!==void 0?c.push(j+"="+o.parameters[j]):c.push(j)}),a+="a=fmtp:"+d+" "+c.join(";")+`\r
`}return a},e.parseRtcpFb=function(o){const a=o.substring(o.indexOf(" ")+1).split(" ");return{type:a.shift(),parameter:a.join(" ")}},e.writeRtcpFb=function(o){let a="",d=o.payloadType;return o.preferredPayloadType!==void 0&&(d=o.preferredPayloadType),o.rtcpFeedback&&o.rtcpFeedback.length&&o.rtcpFeedback.forEach(c=>{a+="a=rtcp-fb:"+d+" "+c.type+(c.parameter&&c.parameter.length?" "+c.parameter:"")+`\r
`}),a},e.parseSsrcMedia=function(o){const a=o.indexOf(" "),d={ssrc:parseInt(o.substring(7,a),10)},c=o.indexOf(":",a);return c>-1?(d.attribute=o.substring(a+1,c),d.value=o.substring(c+1)):d.attribute=o.substring(a+1),d},e.parseSsrcGroup=function(o){const a=o.substring(13).split(" ");return{semantics:a.shift(),ssrcs:a.map(d=>parseInt(d,10))}},e.getMid=function(o){const a=e.matchPrefix(o,"a=mid:")[0];if(a)return a.substring(6)},e.parseFingerprint=function(o){const a=o.substring(14).split(" ");return{algorithm:a[0].toLowerCase(),value:a[1].toUpperCase()}},e.getDtlsParameters=function(o,a){return{role:"auto",fingerprints:e.matchPrefix(o+a,"a=fingerprint:").map(e.parseFingerprint)}},e.writeDtlsParameters=function(o,a){let d="a=setup:"+a+`\r
`;return o.fingerprints.forEach(c=>{d+="a=fingerprint:"+c.algorithm+" "+c.value+`\r
`}),d},e.parseCryptoLine=function(o){const a=o.substring(9).split(" ");return{tag:parseInt(a[0],10),cryptoSuite:a[1],keyParams:a[2],sessionParams:a.slice(3)}},e.writeCryptoLine=function(o){return"a=crypto:"+o.tag+" "+o.cryptoSuite+" "+(typeof o.keyParams=="object"?e.writeCryptoKeyParams(o.keyParams):o.keyParams)+(o.sessionParams?" "+o.sessionParams.join(" "):"")+`\r
`},e.parseCryptoKeyParams=function(o){if(o.indexOf("inline:")!==0)return null;const a=o.substring(7).split("|");return{keyMethod:"inline",keySalt:a[0],lifeTime:a[1],mkiValue:a[2]?a[2].split(":")[0]:void 0,mkiLength:a[2]?a[2].split(":")[1]:void 0}},e.writeCryptoKeyParams=function(o){return o.keyMethod+":"+o.keySalt+(o.lifeTime?"|"+o.lifeTime:"")+(o.mkiValue&&o.mkiLength?"|"+o.mkiValue+":"+o.mkiLength:"")},e.getCryptoParameters=function(o,a){return e.matchPrefix(o+a,"a=crypto:").map(e.parseCryptoLine)},e.getIceParameters=function(o,a){const d=e.matchPrefix(o+a,"a=ice-ufrag:")[0],c=e.matchPrefix(o+a,"a=ice-pwd:")[0];return d&&c?{usernameFragment:d.substring(12),password:c.substring(10)}:null},e.writeIceParameters=function(o){let a="a=ice-ufrag:"+o.usernameFragment+`\r
a=ice-pwd:`+o.password+`\r
`;return o.iceLite&&(a+=`a=ice-lite\r
`),a},e.parseRtpParameters=function(o){const a={codecs:[],headerExtensions:[],fecMechanisms:[],rtcp:[]},c=e.splitLines(o)[0].split(" ");a.profile=c[2];for(let _e=3;_e<c.length;_e++){const pt=c[_e],yt=e.matchPrefix(o,"a=rtpmap:"+pt+" ")[0];if(yt){const ct=e.parseRtpMap(yt),Ct=e.matchPrefix(o,"a=fmtp:"+pt+" ");switch(ct.parameters=Ct.length?e.parseFmtp(Ct[0]):{},ct.rtcpFeedback=e.matchPrefix(o,"a=rtcp-fb:"+pt+" ").map(e.parseRtcpFb),a.codecs.push(ct),ct.name.toUpperCase()){case"RED":case"ULPFEC":a.fecMechanisms.push(ct.name.toUpperCase());break}}}e.matchPrefix(o,"a=extmap:").forEach(_e=>{a.headerExtensions.push(e.parseExtmap(_e))});const j=e.matchPrefix(o,"a=rtcp-fb:* ").map(e.parseRtcpFb);return a.codecs.forEach(_e=>{j.forEach(pt=>{_e.rtcpFeedback.find(ct=>ct.type===pt.type&&ct.parameter===pt.parameter)||_e.rtcpFeedback.push(pt)})}),a},e.writeRtpDescription=function(o,a){let d="";d+="m="+o+" ",d+=a.codecs.length>0?"9":"0",d+=" "+(a.profile||"UDP/TLS/RTP/SAVPF")+" ",d+=a.codecs.map(j=>j.preferredPayloadType!==void 0?j.preferredPayloadType:j.payloadType).join(" ")+`\r
`,d+=`c=IN IP4 0.0.0.0\r
`,d+=`a=rtcp:9 IN IP4 0.0.0.0\r
`,a.codecs.forEach(j=>{d+=e.writeRtpMap(j),d+=e.writeFmtp(j),d+=e.writeRtcpFb(j)});let c=0;return a.codecs.forEach(j=>{j.maxptime>c&&(c=j.maxptime)}),c>0&&(d+="a=maxptime:"+c+`\r
`),a.headerExtensions&&a.headerExtensions.forEach(j=>{d+=e.writeExtmap(j)}),d},e.parseRtpEncodingParameters=function(o){const a=[],d=e.parseRtpParameters(o),c=d.fecMechanisms.indexOf("RED")!==-1,j=d.fecMechanisms.indexOf("ULPFEC")!==-1,_e=e.matchPrefix(o,"a=ssrc:").map(qt=>e.parseSsrcMedia(qt)).filter(qt=>qt.attribute==="cname"),pt=_e.length>0&&_e[0].ssrc;let yt;const ct=e.matchPrefix(o,"a=ssrc-group:FID").map(qt=>qt.substring(17).split(" ").map(Lt=>parseInt(Lt,10)));ct.length>0&&ct[0].length>1&&ct[0][0]===pt&&(yt=ct[0][1]),d.codecs.forEach(qt=>{if(qt.name.toUpperCase()==="RTX"&&qt.parameters.apt){let Ot={ssrc:pt,codecPayloadType:parseInt(qt.parameters.apt,10)};pt&&yt&&(Ot.rtx={ssrc:yt}),a.push(Ot),c&&(Ot=JSON.parse(JSON.stringify(Ot)),Ot.fec={ssrc:pt,mechanism:j?"red+ulpfec":"red"},a.push(Ot))}}),a.length===0&&pt&&a.push({ssrc:pt});let Ct=e.matchPrefix(o,"b=");return Ct.length&&(Ct[0].indexOf("b=TIAS:")===0?Ct=parseInt(Ct[0].substring(7),10):Ct[0].indexOf("b=AS:")===0?Ct=parseInt(Ct[0].substring(5),10)*1e3*.95-50*40*8:Ct=void 0,a.forEach(qt=>{qt.maxBitrate=Ct})),a},e.parseRtcpParameters=function(o){const a={},d=e.matchPrefix(o,"a=ssrc:").map(_e=>e.parseSsrcMedia(_e)).filter(_e=>_e.attribute==="cname")[0];d&&(a.cname=d.value,a.ssrc=d.ssrc);const c=e.matchPrefix(o,"a=rtcp-rsize");a.reducedSize=c.length>0,a.compound=c.length===0;const j=e.matchPrefix(o,"a=rtcp-mux");return a.mux=j.length>0,a},e.writeRtcpParameters=function(o){let a="";return o.reducedSize&&(a+=`a=rtcp-rsize\r
`),o.mux&&(a+=`a=rtcp-mux\r
`),o.ssrc!==void 0&&o.cname&&(a+="a=ssrc:"+o.ssrc+" cname:"+o.cname+`\r
`),a},e.parseMsid=function(o){let a;const d=e.matchPrefix(o,"a=msid:");if(d.length===1)return a=d[0].substring(7).split(" "),{stream:a[0],track:a[1]};const c=e.matchPrefix(o,"a=ssrc:").map(j=>e.parseSsrcMedia(j)).filter(j=>j.attribute==="msid");if(c.length>0)return a=c[0].value.split(" "),{stream:a[0],track:a[1]}},e.parseSctpDescription=function(o){const a=e.parseMLine(o),d=e.matchPrefix(o,"a=max-message-size:");let c;d.length>0&&(c=parseInt(d[0].substring(19),10)),isNaN(c)&&(c=65536);const j=e.matchPrefix(o,"a=sctp-port:");if(j.length>0)return{port:parseInt(j[0].substring(12),10),protocol:a.fmt,maxMessageSize:c};const _e=e.matchPrefix(o,"a=sctpmap:");if(_e.length>0){const pt=_e[0].substring(10).split(" ");return{port:parseInt(pt[0],10),protocol:pt[1],maxMessageSize:c}}},e.writeSctpDescription=function(o,a){let d=[];return o.protocol!=="DTLS/SCTP"?d=["m="+o.kind+" 9 "+o.protocol+" "+a.protocol+`\r
`,`c=IN IP4 0.0.0.0\r
`,"a=sctp-port:"+a.port+`\r
`]:d=["m="+o.kind+" 9 "+o.protocol+" "+a.port+`\r
`,`c=IN IP4 0.0.0.0\r
`,"a=sctpmap:"+a.port+" "+a.protocol+` 65535\r
`],a.maxMessageSize!==void 0&&d.push("a=max-message-size:"+a.maxMessageSize+`\r
`),d.join("")},e.generateSessionId=function(){return Math.random().toString().substr(2,22)},e.writeSessionBoilerplate=function(o,a,d){let c;const j=a!==void 0?a:2;return o?c=o:c=e.generateSessionId(),`v=0\r
o=`+(d||"thisisadapterortc")+" "+c+" "+j+` IN IP4 127.0.0.1\r
s=-\r
t=0 0\r
`},e.getDirection=function(o,a){const d=e.splitLines(o);for(let c=0;c<d.length;c++)switch(d[c]){case"a=sendrecv":case"a=sendonly":case"a=recvonly":case"a=inactive":return d[c].substring(2)}return a?e.getDirection(a):"sendrecv"},e.getKind=function(o){return e.splitLines(o)[0].split(" ")[0].substring(2)},e.isRejected=function(o){return o.split(" ",2)[1]==="0"},e.parseMLine=function(o){const d=e.splitLines(o)[0].substring(2).split(" ");return{kind:d[0],port:parseInt(d[1],10),protocol:d[2],fmt:d.slice(3).join(" ")}},e.parseOLine=function(o){const d=e.matchPrefix(o,"o=")[0].substring(2).split(" ");return{username:d[0],sessionId:d[1],sessionVersion:parseInt(d[2],10),netType:d[3],addressType:d[4],address:d[5]}},e.isValidSDP=function(o){if(typeof o!="string"||o.length===0)return!1;const a=e.splitLines(o);for(let d=0;d<a.length;d++)if(a[d].length<2||a[d].charAt(1)!=="=")return!1;return!0},s.exports=e})(sdp$1);var sdpExports=sdp$1.exports;const SDPUtils=getDefaultExportFromCjs$1(sdpExports),sdp=_mergeNamespaces({__proto__:null,default:SDPUtils},[sdpExports]);function shimRTCIceCandidate(s){if(!s.RTCIceCandidate||s.RTCIceCandidate&&"foundation"in s.RTCIceCandidate.prototype)return;const e=s.RTCIceCandidate;s.RTCIceCandidate=function(a){if(typeof a=="object"&&a.candidate&&a.candidate.indexOf("a=")===0&&(a=JSON.parse(JSON.stringify(a)),a.candidate=a.candidate.substring(2)),a.candidate&&a.candidate.length){const d=new e(a),c=SDPUtils.parseCandidate(a.candidate);for(const j in c)j in d||Object.defineProperty(d,j,{value:c[j]});return d.toJSON=function(){return{candidate:d.candidate,sdpMid:d.sdpMid,sdpMLineIndex:d.sdpMLineIndex,usernameFragment:d.usernameFragment}},d}return new e(a)},s.RTCIceCandidate.prototype=e.prototype,wrapPeerConnectionEvent(s,"icecandidate",o=>(o.candidate&&Object.defineProperty(o,"candidate",{value:new s.RTCIceCandidate(o.candidate),writable:"false"}),o))}function shimRTCIceCandidateRelayProtocol(s){!s.RTCIceCandidate||s.RTCIceCandidate&&"relayProtocol"in s.RTCIceCandidate.prototype||wrapPeerConnectionEvent(s,"icecandidate",e=>{if(e.candidate){const o=SDPUtils.parseCandidate(e.candidate.candidate);o.type==="relay"&&(e.candidate.relayProtocol={0:"tls",1:"tcp",2:"udp"}[o.priority>>24])}return e})}function shimMaxMessageSize(s,e){if(!s.RTCPeerConnection)return;"sctp"in s.RTCPeerConnection.prototype||Object.defineProperty(s.RTCPeerConnection.prototype,"sctp",{get(){return typeof this._sctp>"u"?null:this._sctp}});const o=function(_e){if(!_e||!_e.sdp)return!1;const pt=SDPUtils.splitSections(_e.sdp);return pt.shift(),pt.some(yt=>{const ct=SDPUtils.parseMLine(yt);return ct&&ct.kind==="application"&&ct.protocol.indexOf("SCTP")!==-1})},a=function(_e){const pt=_e.sdp.match(/mozilla...THIS_IS_SDPARTA-(\d+)/);if(pt===null||pt.length<2)return-1;const yt=parseInt(pt[1],10);return yt!==yt?-1:yt},d=function(_e){let pt=65536;return e.browser==="firefox"&&(e.version<57?_e===-1?pt=16384:pt=2147483637:e.version<60?pt=e.version===57?65535:65536:pt=2147483637),pt},c=function(_e,pt){let yt=65536;e.browser==="firefox"&&e.version===57&&(yt=65535);const ct=SDPUtils.matchPrefix(_e.sdp,"a=max-message-size:");return ct.length>0?yt=parseInt(ct[0].substring(19),10):e.browser==="firefox"&&pt!==-1&&(yt=2147483637),yt},j=s.RTCPeerConnection.prototype.setRemoteDescription;s.RTCPeerConnection.prototype.setRemoteDescription=function(){if(this._sctp=null,e.browser==="chrome"&&e.version>=76){const{sdpSemantics:pt}=this.getConfiguration();pt==="plan-b"&&Object.defineProperty(this,"sctp",{get(){return typeof this._sctp>"u"?null:this._sctp},enumerable:!0,configurable:!0})}if(o(arguments[0])){const pt=a(arguments[0]),yt=d(pt),ct=c(arguments[0],pt);let Ct;yt===0&&ct===0?Ct=Number.POSITIVE_INFINITY:yt===0||ct===0?Ct=Math.max(yt,ct):Ct=Math.min(yt,ct);const qt={};Object.defineProperty(qt,"maxMessageSize",{get(){return Ct}}),this._sctp=qt}return j.apply(this,arguments)}}function shimSendThrowTypeError(s){if(!(s.RTCPeerConnection&&"createDataChannel"in s.RTCPeerConnection.prototype))return;function e(a,d){const c=a.send;a.send=function(){const _e=arguments[0],pt=_e.length||_e.size||_e.byteLength;if(a.readyState==="open"&&d.sctp&&pt>d.sctp.maxMessageSize)throw new TypeError("Message too large (can send a maximum of "+d.sctp.maxMessageSize+" bytes)");return c.apply(a,arguments)}}const o=s.RTCPeerConnection.prototype.createDataChannel;s.RTCPeerConnection.prototype.createDataChannel=function(){const d=o.apply(this,arguments);return e(d,this),d},wrapPeerConnectionEvent(s,"datachannel",a=>(e(a.channel,a.target),a))}function shimConnectionState(s){if(!s.RTCPeerConnection||"connectionState"in s.RTCPeerConnection.prototype)return;const e=s.RTCPeerConnection.prototype;Object.defineProperty(e,"connectionState",{get(){return{completed:"connected",checking:"connecting"}[this.iceConnectionState]||this.iceConnectionState},enumerable:!0,configurable:!0}),Object.defineProperty(e,"onconnectionstatechange",{get(){return this._onconnectionstatechange||null},set(o){this._onconnectionstatechange&&(this.removeEventListener("connectionstatechange",this._onconnectionstatechange),delete this._onconnectionstatechange),o&&this.addEventListener("connectionstatechange",this._onconnectionstatechange=o)},enumerable:!0,configurable:!0}),["setLocalDescription","setRemoteDescription"].forEach(o=>{const a=e[o];e[o]=function(){return this._connectionstatechangepoly||(this._connectionstatechangepoly=d=>{const c=d.target;if(c._lastConnectionState!==c.connectionState){c._lastConnectionState=c.connectionState;const j=new Event("connectionstatechange",d);c.dispatchEvent(j)}return d},this.addEventListener("iceconnectionstatechange",this._connectionstatechangepoly)),a.apply(this,arguments)}})}function removeExtmapAllowMixed(s,e){if(!s.RTCPeerConnection||e.browser==="chrome"&&e.version>=71||e.browser==="safari"&&e._safariVersion>=13.1)return;const o=s.RTCPeerConnection.prototype.setRemoteDescription;s.RTCPeerConnection.prototype.setRemoteDescription=function(d){if(d&&d.sdp&&d.sdp.indexOf(`
a=extmap-allow-mixed`)!==-1){const c=d.sdp.split(`
`).filter(j=>j.trim()!=="a=extmap-allow-mixed").join(`
`);s.RTCSessionDescription&&d instanceof s.RTCSessionDescription?arguments[0]=new s.RTCSessionDescription({type:d.type,sdp:c}):d.sdp=c}return o.apply(this,arguments)}}function shimAddIceCandidateNullOrEmpty(s,e){if(!(s.RTCPeerConnection&&s.RTCPeerConnection.prototype))return;const o=s.RTCPeerConnection.prototype.addIceCandidate;!o||o.length===0||(s.RTCPeerConnection.prototype.addIceCandidate=function(){return arguments[0]?(e.browser==="chrome"&&e.version<78||e.browser==="firefox"&&e.version<68||e.browser==="safari")&&arguments[0]&&arguments[0].candidate===""?Promise.resolve():o.apply(this,arguments):(arguments[1]&&arguments[1].apply(null),Promise.resolve())})}function shimParameterlessSetLocalDescription(s,e){if(!(s.RTCPeerConnection&&s.RTCPeerConnection.prototype))return;const o=s.RTCPeerConnection.prototype.setLocalDescription;!o||o.length===0||(s.RTCPeerConnection.prototype.setLocalDescription=function(){let d=arguments[0]||{};if(typeof d!="object"||d.type&&d.sdp)return o.apply(this,arguments);if(d={type:d.type,sdp:d.sdp},!d.type)switch(this.signalingState){case"stable":case"have-local-offer":case"have-remote-pranswer":d.type="offer";break;default:d.type="answer";break}return d.sdp||d.type!=="offer"&&d.type!=="answer"?o.apply(this,[d]):(d.type==="offer"?this.createOffer:this.createAnswer).apply(this).then(j=>o.apply(this,[j]))})}const commonShim=Object.freeze(Object.defineProperty({__proto__:null,removeExtmapAllowMixed,shimAddIceCandidateNullOrEmpty,shimConnectionState,shimMaxMessageSize,shimParameterlessSetLocalDescription,shimRTCIceCandidate,shimRTCIceCandidateRelayProtocol,shimSendThrowTypeError},Symbol.toStringTag,{value:"Module"}));function adapterFactory({window:s}={},e={shimChrome:!0,shimFirefox:!0,shimSafari:!0}){const o=log,a=detectBrowser(s),d={browserDetails:a,commonShim,extractVersion,disableLog,disableWarnings,sdp};switch(a.browser){case"chrome":if(!chromeShim||!shimPeerConnection$1||!e.shimChrome)return o("Chrome shim is not included in this adapter release."),d;if(a.version===null)return o("Chrome shim can not determine version, not shimming."),d;o("adapter.js shimming chrome."),d.browserShim=chromeShim,shimAddIceCandidateNullOrEmpty(s,a),shimParameterlessSetLocalDescription(s),shimGetUserMedia$2(s,a),shimMediaStream(s),shimPeerConnection$1(s,a),shimOnTrack$1(s),shimAddTrackRemoveTrack(s,a),shimGetSendersWithDtmf(s),shimSenderReceiverGetStats(s),fixNegotiationNeeded(s,a),shimRTCIceCandidate(s),shimRTCIceCandidateRelayProtocol(s),shimConnectionState(s),shimMaxMessageSize(s,a),shimSendThrowTypeError(s),removeExtmapAllowMixed(s,a);break;case"firefox":if(!firefoxShim||!shimPeerConnection||!e.shimFirefox)return o("Firefox shim is not included in this adapter release."),d;o("adapter.js shimming firefox."),d.browserShim=firefoxShim,shimAddIceCandidateNullOrEmpty(s,a),shimParameterlessSetLocalDescription(s),shimGetUserMedia$1(s,a),shimPeerConnection(s,a),shimOnTrack(s),shimRemoveStream(s),shimSenderGetStats(s),shimReceiverGetStats(s),shimRTCDataChannel(s),shimAddTransceiver(s),shimGetParameters(s),shimCreateOffer(s),shimCreateAnswer(s),shimRTCIceCandidate(s),shimConnectionState(s),shimMaxMessageSize(s,a),shimSendThrowTypeError(s);break;case"safari":if(!safariShim||!e.shimSafari)return o("Safari shim is not included in this adapter release."),d;o("adapter.js shimming safari."),d.browserShim=safariShim,shimAddIceCandidateNullOrEmpty(s,a),shimParameterlessSetLocalDescription(s),shimRTCIceServerUrls(s),shimCreateOfferLegacy(s),shimCallbacksAPI(s),shimLocalStreamsAPI(s),shimRemoteStreamsAPI(s),shimTrackEventTransceiver(s),shimGetUserMedia(s),shimAudioContext(s),shimRTCIceCandidate(s),shimRTCIceCandidateRelayProtocol(s),shimMaxMessageSize(s,a),shimSendThrowTypeError(s),removeExtmapAllowMixed(s,a);break;default:o("Unsupported browser!");break}return d}const adapter=adapterFactory({window:typeof window>"u"?void 0:window});function $parcel$export(s,e,o,a){Object.defineProperty(s,e,{get:o,set:a,enumerable:!0,configurable:!0})}class $fcbcc7538a6776d5$export$f1c5f4c9cb95390b{constructor(){this.chunkedMTU=16300,this._dataCount=1,this.chunk=e=>{const o=[],a=e.byteLength,d=Math.ceil(a/this.chunkedMTU);let c=0,j=0;for(;j<a;){const _e=Math.min(a,j+this.chunkedMTU),pt=e.slice(j,_e),yt={__peerData:this._dataCount,n:c,data:pt,total:d};o.push(yt),j=_e,c++}return this._dataCount++,o}}}function $fcbcc7538a6776d5$export$52c89ebcdc4f53f2(s){let e=0;for(const d of s)e+=d.byteLength;const o=new Uint8Array(e);let a=0;for(const d of s)o.set(d,a),a+=d.byteLength;return o}const $fb63e766cfafaab9$var$webRTCAdapter=adapter.default||adapter,$fb63e766cfafaab9$export$25be9502477c137d=new class{isWebRTCSupported(){return typeof RTCPeerConnection<"u"}isBrowserSupported(){const s=this.getBrowser(),e=this.getVersion();return this.supportedBrowsers.includes(s)?s==="chrome"?e>=this.minChromeVersion:s==="firefox"?e>=this.minFirefoxVersion:s==="safari"?!this.isIOS&&e>=this.minSafariVersion:!1:!1}getBrowser(){return $fb63e766cfafaab9$var$webRTCAdapter.browserDetails.browser}getVersion(){return $fb63e766cfafaab9$var$webRTCAdapter.browserDetails.version||0}isUnifiedPlanSupported(){const s=this.getBrowser(),e=$fb63e766cfafaab9$var$webRTCAdapter.browserDetails.version||0;if(s==="chrome"&&e<this.minChromeVersion)return!1;if(s==="firefox"&&e>=this.minFirefoxVersion)return!0;if(!window.RTCRtpTransceiver||!("currentDirection"in RTCRtpTransceiver.prototype))return!1;let o,a=!1;try{o=new RTCPeerConnection,o.addTransceiver("audio"),a=!0}catch{}finally{o&&o.close()}return a}toString(){return`Supports:
    browser:${this.getBrowser()}
    version:${this.getVersion()}
    isIOS:${this.isIOS}
    isWebRTCSupported:${this.isWebRTCSupported()}
    isBrowserSupported:${this.isBrowserSupported()}
    isUnifiedPlanSupported:${this.isUnifiedPlanSupported()}`}constructor(){this.isIOS=typeof navigator<"u"?["iPad","iPhone","iPod"].includes(navigator.platform):!1,this.supportedBrowsers=["firefox","chrome","safari"],this.minFirefoxVersion=59,this.minChromeVersion=72,this.minSafariVersion=605}},$9a84a32bf0bf36bb$export$f35f128fd59ea256=s=>!s||/^[A-Za-z0-9]+(?:[ _-][A-Za-z0-9]+)*$/.test(s),$0e5fd1585784c252$export$4e61f672936bec77=()=>Math.random().toString(36).slice(2),$4f4134156c446392$var$DEFAULT_CONFIG={iceServers:[{urls:"stun:stun.l.google.com:19302"},{urls:["turn:eu-0.turn.peerjs.com:3478","turn:us-0.turn.peerjs.com:3478"],username:"peerjs",credential:"peerjsp"}],sdpSemantics:"unified-plan"};class $4f4134156c446392$export$f8f26dd395d7e1bd extends $fcbcc7538a6776d5$export$f1c5f4c9cb95390b{noop(){}blobToArrayBuffer(e,o){const a=new FileReader;return a.onload=function(d){d.target&&o(d.target.result)},a.readAsArrayBuffer(e),a}binaryStringToArrayBuffer(e){const o=new Uint8Array(e.length);for(let a=0;a<e.length;a++)o[a]=e.charCodeAt(a)&255;return o.buffer}isSecure(){return location.protocol==="https:"}constructor(...e){super(...e),this.CLOUD_HOST="0.peerjs.com",this.CLOUD_PORT=443,this.chunkedBrowsers={Chrome:1,chrome:1},this.defaultConfig=$4f4134156c446392$var$DEFAULT_CONFIG,this.browser=$fb63e766cfafaab9$export$25be9502477c137d.getBrowser(),this.browserVersion=$fb63e766cfafaab9$export$25be9502477c137d.getVersion(),this.pack=$0cfd7828ad59115f$export$2a703dbb0cb35339,this.unpack=$0cfd7828ad59115f$export$417857010dc9287f,this.supports=function(){const o={browser:$fb63e766cfafaab9$export$25be9502477c137d.isBrowserSupported(),webRTC:$fb63e766cfafaab9$export$25be9502477c137d.isWebRTCSupported(),audioVideo:!1,data:!1,binaryBlob:!1,reliable:!1};if(!o.webRTC)return o;let a;try{a=new RTCPeerConnection($4f4134156c446392$var$DEFAULT_CONFIG),o.audioVideo=!0;let d;try{d=a.createDataChannel("_PEERJSTEST",{ordered:!0}),o.data=!0,o.reliable=!!d.ordered;try{d.binaryType="blob",o.binaryBlob=!$fb63e766cfafaab9$export$25be9502477c137d.isIOS}catch{}}catch{}finally{d&&d.close()}}catch{}finally{a&&a.close()}return o}(),this.validateId=$9a84a32bf0bf36bb$export$f35f128fd59ea256,this.randomToken=$0e5fd1585784c252$export$4e61f672936bec77}}const $4f4134156c446392$export$7debb50ef11d5e0b=new $4f4134156c446392$export$f8f26dd395d7e1bd,$257947e92926277a$var$LOG_PREFIX="PeerJS: ";var $257947e92926277a$export$243e62d78d3b544d;(function(s){s[s.Disabled=0]="Disabled",s[s.Errors=1]="Errors",s[s.Warnings=2]="Warnings",s[s.All=3]="All"})($257947e92926277a$export$243e62d78d3b544d||($257947e92926277a$export$243e62d78d3b544d={}));class $257947e92926277a$var$Logger{get logLevel(){return this._logLevel}set logLevel(e){this._logLevel=e}log(...e){this._logLevel>=3&&this._print(3,...e)}warn(...e){this._logLevel>=2&&this._print(2,...e)}error(...e){this._logLevel>=1&&this._print(1,...e)}setLogFunction(e){this._print=e}_print(e,...o){const a=[$257947e92926277a$var$LOG_PREFIX,...o];for(const d in a)a[d]instanceof Error&&(a[d]="("+a[d].name+") "+a[d].message);e>=3?console.log(...a):e>=2?console.warn("WARNING",...a):e>=1&&console.error("ERROR",...a)}constructor(){this._logLevel=0}}var $257947e92926277a$export$2e2bcd8739ae039=new $257947e92926277a$var$Logger,$c4dcfd1d1ea86647$exports={},$c4dcfd1d1ea86647$var$has=Object.prototype.hasOwnProperty,$c4dcfd1d1ea86647$var$prefix="~";function $c4dcfd1d1ea86647$var$Events(){}Object.create&&($c4dcfd1d1ea86647$var$Events.prototype=Object.create(null),new $c4dcfd1d1ea86647$var$Events().__proto__||($c4dcfd1d1ea86647$var$prefix=!1));function $c4dcfd1d1ea86647$var$EE(s,e,o){this.fn=s,this.context=e,this.once=o||!1}function $c4dcfd1d1ea86647$var$addListener(s,e,o,a,d){if(typeof o!="function")throw new TypeError("The listener must be a function");var c=new $c4dcfd1d1ea86647$var$EE(o,a||s,d),j=$c4dcfd1d1ea86647$var$prefix?$c4dcfd1d1ea86647$var$prefix+e:e;return s._events[j]?s._events[j].fn?s._events[j]=[s._events[j],c]:s._events[j].push(c):(s._events[j]=c,s._eventsCount++),s}function $c4dcfd1d1ea86647$var$clearEvent(s,e){--s._eventsCount===0?s._events=new $c4dcfd1d1ea86647$var$Events:delete s._events[e]}function $c4dcfd1d1ea86647$var$EventEmitter(){this._events=new $c4dcfd1d1ea86647$var$Events,this._eventsCount=0}$c4dcfd1d1ea86647$var$EventEmitter.prototype.eventNames=function s(){var e=[],o,a;if(this._eventsCount===0)return e;for(a in o=this._events)$c4dcfd1d1ea86647$var$has.call(o,a)&&e.push($c4dcfd1d1ea86647$var$prefix?a.slice(1):a);return Object.getOwnPropertySymbols?e.concat(Object.getOwnPropertySymbols(o)):e};$c4dcfd1d1ea86647$var$EventEmitter.prototype.listeners=function s(e){var o=$c4dcfd1d1ea86647$var$prefix?$c4dcfd1d1ea86647$var$prefix+e:e,a=this._events[o];if(!a)return[];if(a.fn)return[a.fn];for(var d=0,c=a.length,j=new Array(c);d<c;d++)j[d]=a[d].fn;return j};$c4dcfd1d1ea86647$var$EventEmitter.prototype.listenerCount=function s(e){var o=$c4dcfd1d1ea86647$var$prefix?$c4dcfd1d1ea86647$var$prefix+e:e,a=this._events[o];return a?a.fn?1:a.length:0};$c4dcfd1d1ea86647$var$EventEmitter.prototype.emit=function s(e,o,a,d,c,j){var _e=$c4dcfd1d1ea86647$var$prefix?$c4dcfd1d1ea86647$var$prefix+e:e;if(!this._events[_e])return!1;var pt=this._events[_e],yt=arguments.length,ct,Ct;if(pt.fn){switch(pt.once&&this.removeListener(e,pt.fn,void 0,!0),yt){case 1:return pt.fn.call(pt.context),!0;case 2:return pt.fn.call(pt.context,o),!0;case 3:return pt.fn.call(pt.context,o,a),!0;case 4:return pt.fn.call(pt.context,o,a,d),!0;case 5:return pt.fn.call(pt.context,o,a,d,c),!0;case 6:return pt.fn.call(pt.context,o,a,d,c,j),!0}for(Ct=1,ct=new Array(yt-1);Ct<yt;Ct++)ct[Ct-1]=arguments[Ct];pt.fn.apply(pt.context,ct)}else{var qt=pt.length,Ot;for(Ct=0;Ct<qt;Ct++)switch(pt[Ct].once&&this.removeListener(e,pt[Ct].fn,void 0,!0),yt){case 1:pt[Ct].fn.call(pt[Ct].context);break;case 2:pt[Ct].fn.call(pt[Ct].context,o);break;case 3:pt[Ct].fn.call(pt[Ct].context,o,a);break;case 4:pt[Ct].fn.call(pt[Ct].context,o,a,d);break;default:if(!ct)for(Ot=1,ct=new Array(yt-1);Ot<yt;Ot++)ct[Ot-1]=arguments[Ot];pt[Ct].fn.apply(pt[Ct].context,ct)}}return!0};$c4dcfd1d1ea86647$var$EventEmitter.prototype.on=function s(e,o,a){return $c4dcfd1d1ea86647$var$addListener(this,e,o,a,!1)};$c4dcfd1d1ea86647$var$EventEmitter.prototype.once=function s(e,o,a){return $c4dcfd1d1ea86647$var$addListener(this,e,o,a,!0)};$c4dcfd1d1ea86647$var$EventEmitter.prototype.removeListener=function s(e,o,a,d){var c=$c4dcfd1d1ea86647$var$prefix?$c4dcfd1d1ea86647$var$prefix+e:e;if(!this._events[c])return this;if(!o)return $c4dcfd1d1ea86647$var$clearEvent(this,c),this;var j=this._events[c];if(j.fn)j.fn===o&&(!d||j.once)&&(!a||j.context===a)&&$c4dcfd1d1ea86647$var$clearEvent(this,c);else{for(var _e=0,pt=[],yt=j.length;_e<yt;_e++)(j[_e].fn!==o||d&&!j[_e].once||a&&j[_e].context!==a)&&pt.push(j[_e]);pt.length?this._events[c]=pt.length===1?pt[0]:pt:$c4dcfd1d1ea86647$var$clearEvent(this,c)}return this};$c4dcfd1d1ea86647$var$EventEmitter.prototype.removeAllListeners=function s(e){var o;return e?(o=$c4dcfd1d1ea86647$var$prefix?$c4dcfd1d1ea86647$var$prefix+e:e,this._events[o]&&$c4dcfd1d1ea86647$var$clearEvent(this,o)):(this._events=new $c4dcfd1d1ea86647$var$Events,this._eventsCount=0),this};$c4dcfd1d1ea86647$var$EventEmitter.prototype.off=$c4dcfd1d1ea86647$var$EventEmitter.prototype.removeListener;$c4dcfd1d1ea86647$var$EventEmitter.prototype.addListener=$c4dcfd1d1ea86647$var$EventEmitter.prototype.on;$c4dcfd1d1ea86647$var$EventEmitter.prefixed=$c4dcfd1d1ea86647$var$prefix;$c4dcfd1d1ea86647$var$EventEmitter.EventEmitter=$c4dcfd1d1ea86647$var$EventEmitter;$c4dcfd1d1ea86647$exports=$c4dcfd1d1ea86647$var$EventEmitter;var $78455e22dea96b8c$exports={};$parcel$export($78455e22dea96b8c$exports,"ConnectionType",()=>$78455e22dea96b8c$export$3157d57b4135e3bc);$parcel$export($78455e22dea96b8c$exports,"PeerErrorType",()=>$78455e22dea96b8c$export$9547aaa2e39030ff);$parcel$export($78455e22dea96b8c$exports,"BaseConnectionErrorType",()=>$78455e22dea96b8c$export$7974935686149686);$parcel$export($78455e22dea96b8c$exports,"DataConnectionErrorType",()=>$78455e22dea96b8c$export$49ae800c114df41d);$parcel$export($78455e22dea96b8c$exports,"SerializationType",()=>$78455e22dea96b8c$export$89f507cf986a947);$parcel$export($78455e22dea96b8c$exports,"SocketEventType",()=>$78455e22dea96b8c$export$3b5c4a4b6354f023);$parcel$export($78455e22dea96b8c$exports,"ServerMessageType",()=>$78455e22dea96b8c$export$adb4a1754da6f10d);var $78455e22dea96b8c$export$3157d57b4135e3bc;(function(s){s.Data="data",s.Media="media"})($78455e22dea96b8c$export$3157d57b4135e3bc||($78455e22dea96b8c$export$3157d57b4135e3bc={}));var $78455e22dea96b8c$export$9547aaa2e39030ff;(function(s){s.BrowserIncompatible="browser-incompatible",s.Disconnected="disconnected",s.InvalidID="invalid-id",s.InvalidKey="invalid-key",s.Network="network",s.PeerUnavailable="peer-unavailable",s.SslUnavailable="ssl-unavailable",s.ServerError="server-error",s.SocketError="socket-error",s.SocketClosed="socket-closed",s.UnavailableID="unavailable-id",s.WebRTC="webrtc"})($78455e22dea96b8c$export$9547aaa2e39030ff||($78455e22dea96b8c$export$9547aaa2e39030ff={}));var $78455e22dea96b8c$export$7974935686149686;(function(s){s.NegotiationFailed="negotiation-failed",s.ConnectionClosed="connection-closed"})($78455e22dea96b8c$export$7974935686149686||($78455e22dea96b8c$export$7974935686149686={}));var $78455e22dea96b8c$export$49ae800c114df41d;(function(s){s.NotOpenYet="not-open-yet",s.MessageToBig="message-too-big"})($78455e22dea96b8c$export$49ae800c114df41d||($78455e22dea96b8c$export$49ae800c114df41d={}));var $78455e22dea96b8c$export$89f507cf986a947;(function(s){s.Binary="binary",s.BinaryUTF8="binary-utf8",s.JSON="json",s.None="raw"})($78455e22dea96b8c$export$89f507cf986a947||($78455e22dea96b8c$export$89f507cf986a947={}));var $78455e22dea96b8c$export$3b5c4a4b6354f023;(function(s){s.Message="message",s.Disconnected="disconnected",s.Error="error",s.Close="close"})($78455e22dea96b8c$export$3b5c4a4b6354f023||($78455e22dea96b8c$export$3b5c4a4b6354f023={}));var $78455e22dea96b8c$export$adb4a1754da6f10d;(function(s){s.Heartbeat="HEARTBEAT",s.Candidate="CANDIDATE",s.Offer="OFFER",s.Answer="ANSWER",s.Open="OPEN",s.Error="ERROR",s.IdTaken="ID-TAKEN",s.InvalidKey="INVALID-KEY",s.Leave="LEAVE",s.Expire="EXPIRE"})($78455e22dea96b8c$export$adb4a1754da6f10d||($78455e22dea96b8c$export$adb4a1754da6f10d={}));var $f5f881ec4575f1fc$exports={};$f5f881ec4575f1fc$exports=JSON.parse('{"name":"peerjs","version":"1.5.4","keywords":["peerjs","webrtc","p2p","rtc"],"description":"PeerJS client","homepage":"https://peerjs.com","bugs":{"url":"https://github.com/peers/peerjs/issues"},"repository":{"type":"git","url":"https://github.com/peers/peerjs"},"license":"MIT","contributors":["Michelle Bu <michelle@michellebu.com>","afrokick <devbyru@gmail.com>","ericz <really.ez@gmail.com>","Jairo <kidandcat@gmail.com>","Jonas Gloning <34194370+jonasgloning@users.noreply.github.com>","Jairo Caro-Accino Viciana <jairo@galax.be>","Carlos Caballero <carlos.caballero.gonzalez@gmail.com>","hc <hheennrryy@gmail.com>","Muhammad Asif <capripio@gmail.com>","PrashoonB <prashoonbhattacharjee@gmail.com>","Harsh Bardhan Mishra <47351025+HarshCasper@users.noreply.github.com>","akotynski <aleksanderkotbury@gmail.com>","lmb <i@lmb.io>","Jairooo <jairocaro@msn.com>","Moritz Stckler <moritz.stueckler@gmail.com>","Simon <crydotsnakegithub@gmail.com>","Denis Lukov <denismassters@gmail.com>","Philipp Hancke <fippo@andyet.net>","Hans Oksendahl <hansoksendahl@gmail.com>","Jess <jessachandler@gmail.com>","khankuan <khankuan@gmail.com>","DUODVK <kurmanov.work@gmail.com>","XiZhao <kwang1imsa@gmail.com>","Matthias Lohr <matthias@lohr.me>","=frank tree <=frnktrb@googlemail.com>","Andre Eckardt <aeckardt@outlook.com>","Chris Cowan <agentme49@gmail.com>","Alex Chuev <alex@chuev.com>","alxnull <alxnull@e.mail.de>","Yemel Jardi <angel.jardi@gmail.com>","Ben Parnell <benjaminparnell.94@gmail.com>","Benny Lichtner <bennlich@gmail.com>","fresheneesz <bitetrudpublic@gmail.com>","bob.barstead@exaptive.com <bob.barstead@exaptive.com>","chandika <chandika@gmail.com>","emersion <contact@emersion.fr>","Christopher Van <cvan@users.noreply.github.com>","eddieherm <edhermoso@gmail.com>","Eduardo Pinho <enet4mikeenet@gmail.com>","Evandro Zanatta <ezanatta@tray.net.br>","Gardner Bickford <gardner@users.noreply.github.com>","Gian Luca <gianluca.cecchi@cynny.com>","PatrickJS <github@gdi2290.com>","jonnyf <github@jonathanfoss.co.uk>","Hizkia Felix <hizkifw@gmail.com>","Hristo Oskov <hristo.oskov@gmail.com>","Isaac Madwed <i.madwed@gmail.com>","Ilya Konanykhin <ilya.konanykhin@gmail.com>","jasonbarry <jasbarry@me.com>","Jonathan Burke <jonathan.burke.1311@googlemail.com>","Josh Hamit <josh.hamit@gmail.com>","Jordan Austin <jrax86@gmail.com>","Joel Wetzell <jwetzell@yahoo.com>","xizhao <kevin.wang@cloudera.com>","Alberto Torres <kungfoobar@gmail.com>","Jonathan Mayol <mayoljonathan@gmail.com>","Jefferson Felix <me@jsfelix.dev>","Rolf Erik Lekang <me@rolflekang.com>","Kevin Mai-Husan Chia <mhchia@users.noreply.github.com>","Pepijn de Vos <pepijndevos@gmail.com>","JooYoung <qkdlql@naver.com>","Tobias Speicher <rootcommander@gmail.com>","Steve Blaurock <sblaurock@gmail.com>","Kyrylo Shegeda <shegeda@ualberta.ca>","Diwank Singh Tomer <singh@diwank.name>","Soren Balko <Soeren.Balko@gmail.com>","Arpit Solanki <solankiarpit1997@gmail.com>","Yuki Ito <yuki@gnnk.net>","Artur Zayats <zag2art@gmail.com>"],"funding":{"type":"opencollective","url":"https://opencollective.com/peer"},"collective":{"type":"opencollective","url":"https://opencollective.com/peer"},"files":["dist/*"],"sideEffects":["lib/global.ts","lib/supports.ts"],"main":"dist/bundler.cjs","module":"dist/bundler.mjs","browser-minified":"dist/peerjs.min.js","browser-unminified":"dist/peerjs.js","browser-minified-msgpack":"dist/serializer.msgpack.mjs","types":"dist/types.d.ts","engines":{"node":">= 14"},"targets":{"types":{"source":"lib/exports.ts"},"main":{"source":"lib/exports.ts","sourceMap":{"inlineSources":true}},"module":{"source":"lib/exports.ts","includeNodeModules":["eventemitter3"],"sourceMap":{"inlineSources":true}},"browser-minified":{"context":"browser","outputFormat":"global","optimize":true,"engines":{"browsers":"chrome >= 83, edge >= 83, firefox >= 80, safari >= 15"},"source":"lib/global.ts"},"browser-unminified":{"context":"browser","outputFormat":"global","optimize":false,"engines":{"browsers":"chrome >= 83, edge >= 83, firefox >= 80, safari >= 15"},"source":"lib/global.ts"},"browser-minified-msgpack":{"context":"browser","outputFormat":"esmodule","isLibrary":true,"optimize":true,"engines":{"browsers":"chrome >= 83, edge >= 83, firefox >= 102, safari >= 15"},"source":"lib/dataconnection/StreamConnection/MsgPack.ts"}},"scripts":{"contributors":"git-authors-cli --print=false && prettier --write package.json && git add package.json package-lock.json && git commit -m \\"chore(contributors): update and sort contributors list\\"","check":"tsc --noEmit && tsc -p e2e/tsconfig.json --noEmit","watch":"parcel watch","build":"rm -rf dist && parcel build","prepublishOnly":"npm run build","test":"jest","test:watch":"jest --watch","coverage":"jest --coverage --collectCoverageFrom=\\"./lib/**\\"","format":"prettier --write .","format:check":"prettier --check .","semantic-release":"semantic-release","e2e":"wdio run e2e/wdio.local.conf.ts","e2e:bstack":"wdio run e2e/wdio.bstack.conf.ts"},"devDependencies":{"@parcel/config-default":"^2.9.3","@parcel/packager-ts":"^2.9.3","@parcel/transformer-typescript-tsc":"^2.9.3","@parcel/transformer-typescript-types":"^2.9.3","@semantic-release/changelog":"^6.0.1","@semantic-release/git":"^10.0.1","@swc/core":"^1.3.27","@swc/jest":"^0.2.24","@types/jasmine":"^4.3.4","@wdio/browserstack-service":"^8.11.2","@wdio/cli":"^8.11.2","@wdio/globals":"^8.11.2","@wdio/jasmine-framework":"^8.11.2","@wdio/local-runner":"^8.11.2","@wdio/spec-reporter":"^8.11.2","@wdio/types":"^8.10.4","http-server":"^14.1.1","jest":"^29.3.1","jest-environment-jsdom":"^29.3.1","mock-socket":"^9.0.0","parcel":"^2.9.3","prettier":"^3.0.0","semantic-release":"^21.0.0","ts-node":"^10.9.1","typescript":"^5.0.0","wdio-geckodriver-service":"^5.0.1"},"dependencies":{"@msgpack/msgpack":"^2.8.0","eventemitter3":"^4.0.7","peerjs-js-binarypack":"^2.1.0","webrtc-adapter":"^9.0.0"},"alias":{"process":false,"buffer":false}}');class $8f5bfa60836d261d$export$4798917dbf149b79 extends $c4dcfd1d1ea86647$exports.EventEmitter{constructor(e,o,a,d,c,j=5e3){super(),this.pingInterval=j,this._disconnected=!0,this._messagesQueue=[];const _e=e?"wss://":"ws://";this._baseUrl=_e+o+":"+a+d+"peerjs?key="+c}start(e,o){this._id=e;const a=`${this._baseUrl}&id=${e}&token=${o}`;this._socket||!this._disconnected||(this._socket=new WebSocket(a+"&version="+$f5f881ec4575f1fc$exports.version),this._disconnected=!1,this._socket.onmessage=d=>{let c;try{c=JSON.parse(d.data),$257947e92926277a$export$2e2bcd8739ae039.log("Server message received:",c)}catch{$257947e92926277a$export$2e2bcd8739ae039.log("Invalid server message",d.data);return}this.emit($78455e22dea96b8c$export$3b5c4a4b6354f023.Message,c)},this._socket.onclose=d=>{this._disconnected||($257947e92926277a$export$2e2bcd8739ae039.log("Socket closed.",d),this._cleanup(),this._disconnected=!0,this.emit($78455e22dea96b8c$export$3b5c4a4b6354f023.Disconnected))},this._socket.onopen=()=>{this._disconnected||(this._sendQueuedMessages(),$257947e92926277a$export$2e2bcd8739ae039.log("Socket open"),this._scheduleHeartbeat())})}_scheduleHeartbeat(){this._wsPingTimer=setTimeout(()=>{this._sendHeartbeat()},this.pingInterval)}_sendHeartbeat(){if(!this._wsOpen()){$257947e92926277a$export$2e2bcd8739ae039.log("Cannot send heartbeat, because socket closed");return}const e=JSON.stringify({type:$78455e22dea96b8c$export$adb4a1754da6f10d.Heartbeat});this._socket.send(e),this._scheduleHeartbeat()}_wsOpen(){return!!this._socket&&this._socket.readyState===1}_sendQueuedMessages(){const e=[...this._messagesQueue];this._messagesQueue=[];for(const o of e)this.send(o)}send(e){if(this._disconnected)return;if(!this._id){this._messagesQueue.push(e);return}if(!e.type){this.emit($78455e22dea96b8c$export$3b5c4a4b6354f023.Error,"Invalid message");return}if(!this._wsOpen())return;const o=JSON.stringify(e);this._socket.send(o)}close(){this._disconnected||(this._cleanup(),this._disconnected=!0)}_cleanup(){this._socket&&(this._socket.onopen=this._socket.onmessage=this._socket.onclose=null,this._socket.close(),this._socket=void 0),clearTimeout(this._wsPingTimer)}}class $b82fb8fc0514bfc1$export$89e6bb5ad64bf4a{constructor(e){this.connection=e}startConnection(e){const o=this._startPeerConnection();if(this.connection.peerConnection=o,this.connection.type===$78455e22dea96b8c$export$3157d57b4135e3bc.Media&&e._stream&&this._addTracksToConnection(e._stream,o),e.originator){const a=this.connection,d={ordered:!!e.reliable},c=o.createDataChannel(a.label,d);a._initializeDataChannel(c),this._makeOffer()}else this.handleSDP("OFFER",e.sdp)}_startPeerConnection(){$257947e92926277a$export$2e2bcd8739ae039.log("Creating RTCPeerConnection.");const e=new RTCPeerConnection(this.connection.provider.options.config);return this._setupListeners(e),e}_setupListeners(e){const o=this.connection.peer,a=this.connection.connectionId,d=this.connection.type,c=this.connection.provider;$257947e92926277a$export$2e2bcd8739ae039.log("Listening for ICE candidates."),e.onicecandidate=j=>{!j.candidate||!j.candidate.candidate||($257947e92926277a$export$2e2bcd8739ae039.log(`Received ICE candidates for ${o}:`,j.candidate),c.socket.send({type:$78455e22dea96b8c$export$adb4a1754da6f10d.Candidate,payload:{candidate:j.candidate,type:d,connectionId:a},dst:o}))},e.oniceconnectionstatechange=()=>{switch(e.iceConnectionState){case"failed":$257947e92926277a$export$2e2bcd8739ae039.log("iceConnectionState is failed, closing connections to "+o),this.connection.emitError($78455e22dea96b8c$export$7974935686149686.NegotiationFailed,"Negotiation of connection to "+o+" failed."),this.connection.close();break;case"closed":$257947e92926277a$export$2e2bcd8739ae039.log("iceConnectionState is closed, closing connections to "+o),this.connection.emitError($78455e22dea96b8c$export$7974935686149686.ConnectionClosed,"Connection to "+o+" closed."),this.connection.close();break;case"disconnected":$257947e92926277a$export$2e2bcd8739ae039.log("iceConnectionState changed to disconnected on the connection with "+o);break;case"completed":e.onicecandidate=()=>{};break}this.connection.emit("iceStateChanged",e.iceConnectionState)},$257947e92926277a$export$2e2bcd8739ae039.log("Listening for data channel"),e.ondatachannel=j=>{$257947e92926277a$export$2e2bcd8739ae039.log("Received data channel");const _e=j.channel;c.getConnection(o,a)._initializeDataChannel(_e)},$257947e92926277a$export$2e2bcd8739ae039.log("Listening for remote stream"),e.ontrack=j=>{$257947e92926277a$export$2e2bcd8739ae039.log("Received remote stream");const _e=j.streams[0],pt=c.getConnection(o,a);if(pt.type===$78455e22dea96b8c$export$3157d57b4135e3bc.Media){const yt=pt;this._addStreamToMediaConnection(_e,yt)}}}cleanup(){$257947e92926277a$export$2e2bcd8739ae039.log("Cleaning up PeerConnection to "+this.connection.peer);const e=this.connection.peerConnection;if(!e)return;this.connection.peerConnection=null,e.onicecandidate=e.oniceconnectionstatechange=e.ondatachannel=e.ontrack=()=>{};const o=e.signalingState!=="closed";let a=!1;const d=this.connection.dataChannel;d&&(a=!!d.readyState&&d.readyState!=="closed"),(o||a)&&e.close()}async _makeOffer(){const e=this.connection.peerConnection,o=this.connection.provider;try{const a=await e.createOffer(this.connection.options.constraints);$257947e92926277a$export$2e2bcd8739ae039.log("Created offer."),this.connection.options.sdpTransform&&typeof this.connection.options.sdpTransform=="function"&&(a.sdp=this.connection.options.sdpTransform(a.sdp)||a.sdp);try{await e.setLocalDescription(a),$257947e92926277a$export$2e2bcd8739ae039.log("Set localDescription:",a,`for:${this.connection.peer}`);let d={sdp:a,type:this.connection.type,connectionId:this.connection.connectionId,metadata:this.connection.metadata};if(this.connection.type===$78455e22dea96b8c$export$3157d57b4135e3bc.Data){const c=this.connection;d={...d,label:c.label,reliable:c.reliable,serialization:c.serialization}}o.socket.send({type:$78455e22dea96b8c$export$adb4a1754da6f10d.Offer,payload:d,dst:this.connection.peer})}catch(d){d!="OperationError: Failed to set local offer sdp: Called in wrong state: kHaveRemoteOffer"&&(o.emitError($78455e22dea96b8c$export$9547aaa2e39030ff.WebRTC,d),$257947e92926277a$export$2e2bcd8739ae039.log("Failed to setLocalDescription, ",d))}}catch(a){o.emitError($78455e22dea96b8c$export$9547aaa2e39030ff.WebRTC,a),$257947e92926277a$export$2e2bcd8739ae039.log("Failed to createOffer, ",a)}}async _makeAnswer(){const e=this.connection.peerConnection,o=this.connection.provider;try{const a=await e.createAnswer();$257947e92926277a$export$2e2bcd8739ae039.log("Created answer."),this.connection.options.sdpTransform&&typeof this.connection.options.sdpTransform=="function"&&(a.sdp=this.connection.options.sdpTransform(a.sdp)||a.sdp);try{await e.setLocalDescription(a),$257947e92926277a$export$2e2bcd8739ae039.log("Set localDescription:",a,`for:${this.connection.peer}`),o.socket.send({type:$78455e22dea96b8c$export$adb4a1754da6f10d.Answer,payload:{sdp:a,type:this.connection.type,connectionId:this.connection.connectionId},dst:this.connection.peer})}catch(d){o.emitError($78455e22dea96b8c$export$9547aaa2e39030ff.WebRTC,d),$257947e92926277a$export$2e2bcd8739ae039.log("Failed to setLocalDescription, ",d)}}catch(a){o.emitError($78455e22dea96b8c$export$9547aaa2e39030ff.WebRTC,a),$257947e92926277a$export$2e2bcd8739ae039.log("Failed to create answer, ",a)}}async handleSDP(e,o){o=new RTCSessionDescription(o);const a=this.connection.peerConnection,d=this.connection.provider;$257947e92926277a$export$2e2bcd8739ae039.log("Setting remote description",o);const c=this;try{await a.setRemoteDescription(o),$257947e92926277a$export$2e2bcd8739ae039.log(`Set remoteDescription:${e} for:${this.connection.peer}`),e==="OFFER"&&await c._makeAnswer()}catch(j){d.emitError($78455e22dea96b8c$export$9547aaa2e39030ff.WebRTC,j),$257947e92926277a$export$2e2bcd8739ae039.log("Failed to setRemoteDescription, ",j)}}async handleCandidate(e){$257947e92926277a$export$2e2bcd8739ae039.log("handleCandidate:",e);try{await this.connection.peerConnection.addIceCandidate(e),$257947e92926277a$export$2e2bcd8739ae039.log(`Added ICE candidate for:${this.connection.peer}`)}catch(o){this.connection.provider.emitError($78455e22dea96b8c$export$9547aaa2e39030ff.WebRTC,o),$257947e92926277a$export$2e2bcd8739ae039.log("Failed to handleCandidate, ",o)}}_addTracksToConnection(e,o){if($257947e92926277a$export$2e2bcd8739ae039.log(`add tracks from stream ${e.id} to peer connection`),!o.addTrack)return $257947e92926277a$export$2e2bcd8739ae039.error("Your browser does't support RTCPeerConnection#addTrack. Ignored.");e.getTracks().forEach(a=>{o.addTrack(a,e)})}_addStreamToMediaConnection(e,o){$257947e92926277a$export$2e2bcd8739ae039.log(`add stream ${e.id} to media connection ${o.connectionId}`),o.addStream(e)}}class $23779d1881157a18$export$6a678e589c8a4542 extends $c4dcfd1d1ea86647$exports.EventEmitter{emitError(e,o){$257947e92926277a$export$2e2bcd8739ae039.error("Error:",o),this.emit("error",new $23779d1881157a18$export$98871882f492de82(`${e}`,o))}}class $23779d1881157a18$export$98871882f492de82 extends Error{constructor(e,o){typeof o=="string"?super(o):(super(),Object.assign(this,o)),this.type=e}}class $5045192fc6d387ba$export$23a2a68283c24d80 extends $23779d1881157a18$export$6a678e589c8a4542{get open(){return this._open}constructor(e,o,a){super(),this.peer=e,this.provider=o,this.options=a,this._open=!1,this.metadata=a.metadata}}var js;const Rs=class Rs extends $5045192fc6d387ba$export$23a2a68283c24d80{get type(){return $78455e22dea96b8c$export$3157d57b4135e3bc.Media}get localStream(){return this._localStream}get remoteStream(){return this._remoteStream}constructor(e,o,a){super(e,o,a),this._localStream=this.options._stream,this.connectionId=this.options.connectionId||Rs.ID_PREFIX+$4f4134156c446392$export$7debb50ef11d5e0b.randomToken(),this._negotiator=new $b82fb8fc0514bfc1$export$89e6bb5ad64bf4a(this),this._localStream&&this._negotiator.startConnection({_stream:this._localStream,originator:!0})}_initializeDataChannel(e){this.dataChannel=e,this.dataChannel.onopen=()=>{$257947e92926277a$export$2e2bcd8739ae039.log(`DC#${this.connectionId} dc connection success`),this.emit("willCloseOnRemote")},this.dataChannel.onclose=()=>{$257947e92926277a$export$2e2bcd8739ae039.log(`DC#${this.connectionId} dc closed for:`,this.peer),this.close()}}addStream(e){$257947e92926277a$export$2e2bcd8739ae039.log("Receiving stream",e),this._remoteStream=e,super.emit("stream",e)}handleMessage(e){const o=e.type,a=e.payload;switch(e.type){case $78455e22dea96b8c$export$adb4a1754da6f10d.Answer:this._negotiator.handleSDP(o,a.sdp),this._open=!0;break;case $78455e22dea96b8c$export$adb4a1754da6f10d.Candidate:this._negotiator.handleCandidate(a.candidate);break;default:$257947e92926277a$export$2e2bcd8739ae039.warn(`Unrecognized message type:${o} from peer:${this.peer}`);break}}answer(e,o={}){if(this._localStream){$257947e92926277a$export$2e2bcd8739ae039.warn("Local stream already exists on this MediaConnection. Are you answering a call twice?");return}this._localStream=e,o&&o.sdpTransform&&(this.options.sdpTransform=o.sdpTransform),this._negotiator.startConnection({...this.options._payload,_stream:e});const a=this.provider._getMessages(this.connectionId);for(const d of a)this.handleMessage(d);this._open=!0}close(){this._negotiator&&(this._negotiator.cleanup(),this._negotiator=null),this._localStream=null,this._remoteStream=null,this.provider&&(this.provider._removeConnection(this),this.provider=null),this.options&&this.options._stream&&(this.options._stream=null),this.open&&(this._open=!1,super.emit("close"))}};js=new WeakMap,As(Rs,js,Rs.ID_PREFIX="mc_");let $5c1d08c7c57da9a3$export$4a84e95a2324ac29=Rs;class $abf266641927cd89$export$2c4e825dc9120f87{constructor(e){this._options=e}_buildRequest(e){const o=this._options.secure?"https":"http",{host:a,port:d,path:c,key:j}=this._options,_e=new URL(`${o}://${a}:${d}${c}${j}/${e}`);return _e.searchParams.set("ts",`${Date.now()}${Math.random()}`),_e.searchParams.set("version",$f5f881ec4575f1fc$exports.version),fetch(_e.href,{referrerPolicy:this._options.referrerPolicy})}async retrieveId(){try{const e=await this._buildRequest("id");if(e.status!==200)throw new Error(`Error. Status:${e.status}`);return e.text()}catch(e){$257947e92926277a$export$2e2bcd8739ae039.error("Error retrieving ID",e);let o="";throw this._options.path==="/"&&this._options.host!==$4f4134156c446392$export$7debb50ef11d5e0b.CLOUD_HOST&&(o=" If you passed in a `path` to your self-hosted PeerServer, you'll also need to pass in that same path when creating a new Peer."),new Error("Could not get an ID from the server."+o)}}async listAllPeers(){try{const e=await this._buildRequest("peers");if(e.status!==200){if(e.status===401){let o="";throw this._options.host===$4f4134156c446392$export$7debb50ef11d5e0b.CLOUD_HOST?o="It looks like you're using the cloud server. You can email team@peerjs.com to enable peer listing for your API key.":o="You need to enable `allow_discovery` on your self-hosted PeerServer to use this feature.",new Error("It doesn't look like you have permission to list peers IDs. "+o)}throw new Error(`Error. Status:${e.status}`)}return e.json()}catch(e){throw $257947e92926277a$export$2e2bcd8739ae039.error("Error retrieving list peers",e),new Error("Could not get list peers from the server."+e)}}}var zs,Hs;const ds=class ds extends $5045192fc6d387ba$export$23a2a68283c24d80{get type(){return $78455e22dea96b8c$export$3157d57b4135e3bc.Data}constructor(e,o,a){super(e,o,a),this.connectionId=this.options.connectionId||ds.ID_PREFIX+$0e5fd1585784c252$export$4e61f672936bec77(),this.label=this.options.label||this.connectionId,this.reliable=!!this.options.reliable,this._negotiator=new $b82fb8fc0514bfc1$export$89e6bb5ad64bf4a(this),this._negotiator.startConnection(this.options._payload||{originator:!0,reliable:this.reliable})}_initializeDataChannel(e){this.dataChannel=e,this.dataChannel.onopen=()=>{$257947e92926277a$export$2e2bcd8739ae039.log(`DC#${this.connectionId} dc connection success`),this._open=!0,this.emit("open")},this.dataChannel.onmessage=o=>{$257947e92926277a$export$2e2bcd8739ae039.log(`DC#${this.connectionId} dc onmessage:`,o.data)},this.dataChannel.onclose=()=>{$257947e92926277a$export$2e2bcd8739ae039.log(`DC#${this.connectionId} dc closed for:`,this.peer),this.close()}}close(e){if(e!=null&&e.flush){this.send({__peerData:{type:"close"}});return}this._negotiator&&(this._negotiator.cleanup(),this._negotiator=null),this.provider&&(this.provider._removeConnection(this),this.provider=null),this.dataChannel&&(this.dataChannel.onopen=null,this.dataChannel.onmessage=null,this.dataChannel.onclose=null,this.dataChannel=null),this.open&&(this._open=!1,super.emit("close"))}send(e,o=!1){if(!this.open){this.emitError($78455e22dea96b8c$export$49ae800c114df41d.NotOpenYet,"Connection is not open. You should listen for the `open` event before sending messages.");return}return this._send(e,o)}async handleMessage(e){const o=e.payload;switch(e.type){case $78455e22dea96b8c$export$adb4a1754da6f10d.Answer:await this._negotiator.handleSDP(e.type,o.sdp);break;case $78455e22dea96b8c$export$adb4a1754da6f10d.Candidate:await this._negotiator.handleCandidate(o.candidate);break;default:$257947e92926277a$export$2e2bcd8739ae039.warn("Unrecognized message type:",e.type,"from peer:",this.peer);break}}};zs=new WeakMap,Hs=new WeakMap,As(ds,zs,ds.ID_PREFIX="dc_"),As(ds,Hs,ds.MAX_BUFFERED_AMOUNT=8388608);let $6366c4ca161bc297$export$d365f7ad9d7df9c9=ds;class $a229bedbcaa6ca23$export$ff7c9d4c11d94e8b extends $6366c4ca161bc297$export$d365f7ad9d7df9c9{get bufferSize(){return this._bufferSize}_initializeDataChannel(e){super._initializeDataChannel(e),this.dataChannel.binaryType="arraybuffer",this.dataChannel.addEventListener("message",o=>this._handleDataMessage(o))}_bufferedSend(e){(this._buffering||!this._trySend(e))&&(this._buffer.push(e),this._bufferSize=this._buffer.length)}_trySend(e){if(!this.open)return!1;if(this.dataChannel.bufferedAmount>$6366c4ca161bc297$export$d365f7ad9d7df9c9.MAX_BUFFERED_AMOUNT)return this._buffering=!0,setTimeout(()=>{this._buffering=!1,this._tryBuffer()},50),!1;try{this.dataChannel.send(e)}catch(o){return $257947e92926277a$export$2e2bcd8739ae039.error(`DC#:${this.connectionId} Error when sending:`,o),this._buffering=!0,this.close(),!1}return!0}_tryBuffer(){if(!this.open||this._buffer.length===0)return;const e=this._buffer[0];this._trySend(e)&&(this._buffer.shift(),this._bufferSize=this._buffer.length,this._tryBuffer())}close(e){if(e!=null&&e.flush){this.send({__peerData:{type:"close"}});return}this._buffer=[],this._bufferSize=0,super.close()}constructor(...e){super(...e),this._buffer=[],this._bufferSize=0,this._buffering=!1}}class $9fcfddb3ae148f88$export$f0a5a64d5bb37108 extends $a229bedbcaa6ca23$export$ff7c9d4c11d94e8b{close(e){super.close(e),this._chunkedData={}}constructor(e,o,a){super(e,o,a),this.chunker=new $fcbcc7538a6776d5$export$f1c5f4c9cb95390b,this.serialization=$78455e22dea96b8c$export$89f507cf986a947.Binary,this._chunkedData={}}_handleDataMessage({data:e}){const o=$0cfd7828ad59115f$export$417857010dc9287f(e),a=o.__peerData;if(a){if(a.type==="close"){this.close();return}this._handleChunk(o);return}this.emit("data",o)}_handleChunk(e){const o=e.__peerData,a=this._chunkedData[o]||{data:[],count:0,total:e.total};if(a.data[e.n]=new Uint8Array(e.data),a.count++,this._chunkedData[o]=a,a.total===a.count){delete this._chunkedData[o];const d=$fcbcc7538a6776d5$export$52c89ebcdc4f53f2(a.data);this._handleDataMessage({data:d})}}_send(e,o){const a=$0cfd7828ad59115f$export$2a703dbb0cb35339(e);if(a instanceof Promise)return this._send_blob(a);if(!o&&a.byteLength>this.chunker.chunkedMTU){this._sendChunks(a);return}this._bufferedSend(a)}async _send_blob(e){const o=await e;if(o.byteLength>this.chunker.chunkedMTU){this._sendChunks(o);return}this._bufferedSend(o)}_sendChunks(e){const o=this.chunker.chunk(e);$257947e92926277a$export$2e2bcd8739ae039.log(`DC#${this.connectionId} Try to send ${o.length} chunks...`);for(const a of o)this.send(a,!0)}}class $bbaee3f15f714663$export$6f88fe47d32c9c94 extends $a229bedbcaa6ca23$export$ff7c9d4c11d94e8b{_handleDataMessage({data:e}){super.emit("data",e)}_send(e,o){this._bufferedSend(e)}constructor(...e){super(...e),this.serialization=$78455e22dea96b8c$export$89f507cf986a947.None}}class $817f931e3f9096cf$export$48880ac635f47186 extends $a229bedbcaa6ca23$export$ff7c9d4c11d94e8b{_handleDataMessage({data:e}){const o=this.parse(this.decoder.decode(e)),a=o.__peerData;if(a&&a.type==="close"){this.close();return}this.emit("data",o)}_send(e,o){const a=this.encoder.encode(this.stringify(e));if(a.byteLength>=$4f4134156c446392$export$7debb50ef11d5e0b.chunkedMTU){this.emitError($78455e22dea96b8c$export$49ae800c114df41d.MessageToBig,"Message too big for JSON channel");return}this._bufferedSend(a)}constructor(...e){super(...e),this.serialization=$78455e22dea96b8c$export$89f507cf986a947.JSON,this.encoder=new TextEncoder,this.decoder=new TextDecoder,this.stringify=JSON.stringify,this.parse=JSON.parse}}var Ws;const Ms=class Ms extends $23779d1881157a18$export$6a678e589c8a4542{get id(){return this._id}get options(){return this._options}get open(){return this._open}get socket(){return this._socket}get connections(){const e=Object.create(null);for(const[o,a]of this._connections)e[o]=a;return e}get destroyed(){return this._destroyed}get disconnected(){return this._disconnected}constructor(e,o){super(),this._serializers={raw:$bbaee3f15f714663$export$6f88fe47d32c9c94,json:$817f931e3f9096cf$export$48880ac635f47186,binary:$9fcfddb3ae148f88$export$f0a5a64d5bb37108,"binary-utf8":$9fcfddb3ae148f88$export$f0a5a64d5bb37108,default:$9fcfddb3ae148f88$export$f0a5a64d5bb37108},this._id=null,this._lastServerId=null,this._destroyed=!1,this._disconnected=!1,this._open=!1,this._connections=new Map,this._lostMessages=new Map;let a;if(e&&e.constructor==Object?o=e:e&&(a=e.toString()),o={debug:0,host:$4f4134156c446392$export$7debb50ef11d5e0b.CLOUD_HOST,port:$4f4134156c446392$export$7debb50ef11d5e0b.CLOUD_PORT,path:"/",key:Ms.DEFAULT_KEY,token:$4f4134156c446392$export$7debb50ef11d5e0b.randomToken(),config:$4f4134156c446392$export$7debb50ef11d5e0b.defaultConfig,referrerPolicy:"strict-origin-when-cross-origin",serializers:{},...o},this._options=o,this._serializers={...this._serializers,...this.options.serializers},this._options.host==="/"&&(this._options.host=window.location.hostname),this._options.path&&(this._options.path[0]!=="/"&&(this._options.path="/"+this._options.path),this._options.path[this._options.path.length-1]!=="/"&&(this._options.path+="/")),this._options.secure===void 0&&this._options.host!==$4f4134156c446392$export$7debb50ef11d5e0b.CLOUD_HOST?this._options.secure=$4f4134156c446392$export$7debb50ef11d5e0b.isSecure():this._options.host==$4f4134156c446392$export$7debb50ef11d5e0b.CLOUD_HOST&&(this._options.secure=!0),this._options.logFunction&&$257947e92926277a$export$2e2bcd8739ae039.setLogFunction(this._options.logFunction),$257947e92926277a$export$2e2bcd8739ae039.logLevel=this._options.debug||0,this._api=new $abf266641927cd89$export$2c4e825dc9120f87(o),this._socket=this._createServerConnection(),!$4f4134156c446392$export$7debb50ef11d5e0b.supports.audioVideo&&!$4f4134156c446392$export$7debb50ef11d5e0b.supports.data){this._delayedAbort($78455e22dea96b8c$export$9547aaa2e39030ff.BrowserIncompatible,"The current browser does not support WebRTC");return}if(a&&!$4f4134156c446392$export$7debb50ef11d5e0b.validateId(a)){this._delayedAbort($78455e22dea96b8c$export$9547aaa2e39030ff.InvalidID,`ID "${a}" is invalid`);return}a?this._initialize(a):this._api.retrieveId().then(d=>this._initialize(d)).catch(d=>this._abort($78455e22dea96b8c$export$9547aaa2e39030ff.ServerError,d))}_createServerConnection(){const e=new $8f5bfa60836d261d$export$4798917dbf149b79(this._options.secure,this._options.host,this._options.port,this._options.path,this._options.key,this._options.pingInterval);return e.on($78455e22dea96b8c$export$3b5c4a4b6354f023.Message,o=>{this._handleMessage(o)}),e.on($78455e22dea96b8c$export$3b5c4a4b6354f023.Error,o=>{this._abort($78455e22dea96b8c$export$9547aaa2e39030ff.SocketError,o)}),e.on($78455e22dea96b8c$export$3b5c4a4b6354f023.Disconnected,()=>{this.disconnected||(this.emitError($78455e22dea96b8c$export$9547aaa2e39030ff.Network,"Lost connection to server."),this.disconnect())}),e.on($78455e22dea96b8c$export$3b5c4a4b6354f023.Close,()=>{this.disconnected||this._abort($78455e22dea96b8c$export$9547aaa2e39030ff.SocketClosed,"Underlying socket is already closed.")}),e}_initialize(e){this._id=e,this.socket.start(e,this._options.token)}_handleMessage(e){const o=e.type,a=e.payload,d=e.src;switch(o){case $78455e22dea96b8c$export$adb4a1754da6f10d.Open:this._lastServerId=this.id,this._open=!0,this.emit("open",this.id);break;case $78455e22dea96b8c$export$adb4a1754da6f10d.Error:this._abort($78455e22dea96b8c$export$9547aaa2e39030ff.ServerError,a.msg);break;case $78455e22dea96b8c$export$adb4a1754da6f10d.IdTaken:this._abort($78455e22dea96b8c$export$9547aaa2e39030ff.UnavailableID,`ID "${this.id}" is taken`);break;case $78455e22dea96b8c$export$adb4a1754da6f10d.InvalidKey:this._abort($78455e22dea96b8c$export$9547aaa2e39030ff.InvalidKey,`API KEY "${this._options.key}" is invalid`);break;case $78455e22dea96b8c$export$adb4a1754da6f10d.Leave:$257947e92926277a$export$2e2bcd8739ae039.log(`Received leave message from ${d}`),this._cleanupPeer(d),this._connections.delete(d);break;case $78455e22dea96b8c$export$adb4a1754da6f10d.Expire:this.emitError($78455e22dea96b8c$export$9547aaa2e39030ff.PeerUnavailable,`Could not connect to peer ${d}`);break;case $78455e22dea96b8c$export$adb4a1754da6f10d.Offer:{const c=a.connectionId;let j=this.getConnection(d,c);if(j&&(j.close(),$257947e92926277a$export$2e2bcd8739ae039.warn(`Offer received for existing Connection ID:${c}`)),a.type===$78455e22dea96b8c$export$3157d57b4135e3bc.Media){const pt=new $5c1d08c7c57da9a3$export$4a84e95a2324ac29(d,this,{connectionId:c,_payload:a,metadata:a.metadata});j=pt,this._addConnection(d,j),this.emit("call",pt)}else if(a.type===$78455e22dea96b8c$export$3157d57b4135e3bc.Data){const pt=new this._serializers[a.serialization](d,this,{connectionId:c,_payload:a,metadata:a.metadata,label:a.label,serialization:a.serialization,reliable:a.reliable});j=pt,this._addConnection(d,j),this.emit("connection",pt)}else{$257947e92926277a$export$2e2bcd8739ae039.warn(`Received malformed connection type:${a.type}`);return}const _e=this._getMessages(c);for(const pt of _e)j.handleMessage(pt);break}default:{if(!a){$257947e92926277a$export$2e2bcd8739ae039.warn(`You received a malformed message from ${d} of type ${o}`);return}const c=a.connectionId,j=this.getConnection(d,c);j&&j.peerConnection?j.handleMessage(e):c?this._storeMessage(c,e):$257947e92926277a$export$2e2bcd8739ae039.warn("You received an unrecognized message:",e);break}}}_storeMessage(e,o){this._lostMessages.has(e)||this._lostMessages.set(e,[]),this._lostMessages.get(e).push(o)}_getMessages(e){const o=this._lostMessages.get(e);return o?(this._lostMessages.delete(e),o):[]}connect(e,o={}){if(o={serialization:"default",...o},this.disconnected){$257947e92926277a$export$2e2bcd8739ae039.warn("You cannot connect to a new Peer because you called .disconnect() on this Peer and ended your connection with the server. You can create a new Peer to reconnect, or call reconnect on this peer if you believe its ID to still be available."),this.emitError($78455e22dea96b8c$export$9547aaa2e39030ff.Disconnected,"Cannot connect to new Peer after disconnecting from server.");return}const a=new this._serializers[o.serialization](e,this,o);return this._addConnection(e,a),a}call(e,o,a={}){if(this.disconnected){$257947e92926277a$export$2e2bcd8739ae039.warn("You cannot connect to a new Peer because you called .disconnect() on this Peer and ended your connection with the server. You can create a new Peer to reconnect."),this.emitError($78455e22dea96b8c$export$9547aaa2e39030ff.Disconnected,"Cannot connect to new Peer after disconnecting from server.");return}if(!o){$257947e92926277a$export$2e2bcd8739ae039.error("To call a peer, you must provide a stream from your browser's `getUserMedia`.");return}const d=new $5c1d08c7c57da9a3$export$4a84e95a2324ac29(e,this,{...a,_stream:o});return this._addConnection(e,d),d}_addConnection(e,o){$257947e92926277a$export$2e2bcd8739ae039.log(`add connection ${o.type}:${o.connectionId} to peerId:${e}`),this._connections.has(e)||this._connections.set(e,[]),this._connections.get(e).push(o)}_removeConnection(e){const o=this._connections.get(e.peer);if(o){const a=o.indexOf(e);a!==-1&&o.splice(a,1)}this._lostMessages.delete(e.connectionId)}getConnection(e,o){const a=this._connections.get(e);if(!a)return null;for(const d of a)if(d.connectionId===o)return d;return null}_delayedAbort(e,o){setTimeout(()=>{this._abort(e,o)},0)}_abort(e,o){$257947e92926277a$export$2e2bcd8739ae039.error("Aborting!"),this.emitError(e,o),this._lastServerId?this.disconnect():this.destroy()}destroy(){this.destroyed||($257947e92926277a$export$2e2bcd8739ae039.log(`Destroy peer with ID:${this.id}`),this.disconnect(),this._cleanup(),this._destroyed=!0,this.emit("close"))}_cleanup(){for(const e of this._connections.keys())this._cleanupPeer(e),this._connections.delete(e);this.socket.removeAllListeners()}_cleanupPeer(e){const o=this._connections.get(e);if(o)for(const a of o)a.close()}disconnect(){if(this.disconnected)return;const e=this.id;$257947e92926277a$export$2e2bcd8739ae039.log(`Disconnect peer with ID:${e}`),this._disconnected=!0,this._open=!1,this.socket.close(),this._lastServerId=e,this._id=null,this.emit("disconnected",e)}reconnect(){if(this.disconnected&&!this.destroyed)$257947e92926277a$export$2e2bcd8739ae039.log(`Attempting reconnection to server with ID ${this._lastServerId}`),this._disconnected=!1,this._initialize(this._lastServerId);else{if(this.destroyed)throw new Error("This peer cannot reconnect to the server. It has already been destroyed.");if(!this.disconnected&&!this.open)$257947e92926277a$export$2e2bcd8739ae039.error("In a hurry? We're still trying to make the initial connection!");else throw new Error(`Peer ${this.id} cannot reconnect because it is not disconnected from the server!`)}}listAllPeers(e=o=>{}){this._api.listAllPeers().then(o=>e(o)).catch(o=>this._abort($78455e22dea96b8c$export$9547aaa2e39030ff.ServerError,o))}};Ws=new WeakMap,As(Ms,Ws,Ms.DEFAULT_KEY="peerjs");let $416260bce337df90$export$ecd1fc136c422448=Ms;var $dd0187d7f28e386f$export$2e2bcd8739ae039=$416260bce337df90$export$ecd1fc136c422448,Ao;const subtle=(Ao=globalThis.crypto)==null?void 0:Ao.subtle;if(!subtle)throw new Error("Web Crypto API is not available in this environment");async function loadKeypair(s){return new Promise((e,o)=>{try{const c=s.transaction("store","readonly").objectStore("store").get("dcrypt_identity");c.onsuccess=()=>{var _e;const j=(_e=c.result)==null?void 0:_e.value;j&&typeof j=="string"?(console.log("Loaded keypair from IndexedDB:",j),e(j)):(console.log("No valid keypair found in IndexedDB."),e(null))},c.onerror=()=>{console.error("Failed to load keypair from IndexedDB:",c.error),o(new Error("Failed to load keypair from IndexedDB"))}}catch(a){console.error('Error accessing "store" object store:',a),o(a)}})}let indexedDBInstance=null;const initializeIndexedDB=async()=>{if(indexedDBInstance)return console.log("IndexedDB already initialized"),indexedDBInstance;const s=5;return new Promise((e,o)=>{const a=indexedDB.open("dcrypt_db");a.onsuccess=()=>{const d=a.result,c=d.version;d.close();const j=indexedDB.open("dcrypt_db",Math.max(c,s));j.onupgradeneeded=_e=>{const pt=j.result;pt.objectStoreNames.contains("store")||pt.createObjectStore("store",{keyPath:"id"}),pt.objectStoreNames.contains("transactions")||pt.createObjectStore("transactions",{keyPath:"id",autoIncrement:!0}),pt.objectStoreNames.contains("offlineQueue")||pt.createObjectStore("offlineQueue",{keyPath:"id",autoIncrement:!0}),pt.objectStoreNames.contains("chunkCache")||pt.createObjectStore("chunkCache",{keyPath:"id"})},j.onsuccess=()=>{indexedDBInstance=j.result,console.log("IndexedDB opened successfully at version",indexedDBInstance.version),e(indexedDBInstance)},j.onerror=()=>{o(new Error(`Failed to open IndexedDB: ${j.error.message}`))}},a.onerror=()=>{o(new Error(`Failed to check IndexedDB version: ${a.error.message}`))}})};function generateNonce(){const s=new Uint8Array(12);for(let e=0;e<12;e++)s[e]=Math.floor(Math.random()*256);return s}function createIntellectualProperty(s,e,o,a,d,c,j){return{content:new Uint8Array(s),content_type:e,tags:o||[],is_premium:a,price_usd:d,creator_id:new Uint8Array(c),file_type:j}}function getIpContent(s){return s.content}async function computeFullHash(s){const e=await subtle.digest("SHA-256",s);return new Uint8Array(e)}function getChunkHash(s){const e=new Uint8Array(new Int32Array([s.index]).buffer),o=new Uint8Array([...s.data,...s.nonce,...e]);return computeFullHash(o)}function getChunkIndex(s){return s.index}function stringToArrayBuffer(s){return new TextEncoder().encode(s).buffer}async function chunkEncrypt(s,e,o){const a=s.content,d=Math.ceil(a.length/o),c=[];Array.isArray(e)&&(e=e.join(""));const j=await subtle.digest("SHA-256",stringToArrayBuffer(e)),_e=await subtle.importKey("raw",j,{name:"AES-GCM"},!1,["encrypt"]);for(let pt=0;pt<o;pt++){const yt=pt*d,ct=Math.min(yt+d,a.length),Ct=a.slice(yt,ct),qt=generateNonce(),Ot=await subtle.encrypt({name:"AES-GCM",iv:qt},_e,Ct),Lt={data:new Uint8Array(Ot),nonce:qt,index:pt,file_type:s.file_type};c.push(Lt)}return c}async function decryptChunk(s,e){Array.isArray(e)&&(e=e.join(""));const o=await subtle.digest("SHA-256",stringToArrayBuffer(e)),a=await subtle.importKey("raw",o,{name:"AES-GCM"},!1,["decrypt"]),d=await subtle.decrypt({name:"AES-GCM",iv:s.nonce},a,s.data);return new Uint8Array(d)}function getChunkFileType(s){return s.file_type}class DHT{constructor(e,o=!1){this.peers=new Map,this.knownObjects=new Map,this.chunkToPeerMap=new Map,this.pendingRequests=new Map,this.db=null,this.keypair=e,this.activeNodes=new Set,this.nodes=new Set,this.offlineQueue=[],this.isNode=o,this.peerId=null,this.peer=null,this.connectionAttempts=new Map,this.maxConnectionAttempts=3,this.connectionRetryDelay=5e3,this.averageLatency=0,console.log("DHT initialized with keypair:",e),this.initializeKnownNodes()}async initializeKnownNodes(){const e=async()=>{try{if(!db){console.error("Firestore db is not initialized");return}const o=await getDocs(collection(db,"nodes"));this.nodes.clear(),o.empty||o.forEach(a=>this.nodes.add(`node-${a.id}`)),console.log("Fetched nodes:",Array.from(this.nodes))}catch(o){console.error("Failed to fetch nodes from Firestore:",o),this.nodes.clear()}};await e(),setInterval(e,5*60*1e3)}async measureLatency(){const e=[],o=Array.from(this.activeNodes).slice(0,5);for(const a of o){const d=this.peers.get(a);if(d&&d.connected&&d.conn){const c=Date.now();await new Promise(_e=>{const pt=`${a}-ping-${Date.now()}`;d.conn.send({type:"ping",requestId:pt}),this.pendingRequests.set(pt,{resolve:_e}),setTimeout(()=>{this.pendingRequests.has(pt)&&(this.pendingRequests.delete(pt),_e())},2e3)});const j=Date.now()-c;e.push(j)}}this.averageLatency=e.length>0?e.reduce((a,d)=>a+d,0)/e.length:0,console.log(`Average latency: ${this.averageLatency} ms`)}async initDB(){return new Promise((e,o)=>{const d=indexedDB.open("dcrypt_db",5);let c;d.onupgradeneeded=j=>{c=d.result,c.objectStoreNames.contains("store")||c.createObjectStore("store",{keyPath:"id"}),c.objectStoreNames.contains("transactions")||c.createObjectStore("transactions",{keyPath:"id",autoIncrement:!0}),c.objectStoreNames.contains("offlineQueue")||c.createObjectStore("offlineQueue",{keyPath:"id",autoIncrement:!0}),c.objectStoreNames.contains("chunkCache")||c.createObjectStore("chunkCache",{keyPath:"id"}),console.log("DHT database upgraded to version",5)},d.onsuccess=()=>{this.db=d.result,console.log("DHT IndexedDB opened at version",this.db.version),e()},d.onerror=j=>o(new Error(`Failed to open IndexedDB: ${j.target.error.message}`))})}async loadKnownObjects(){if(!this.db)throw new Error("IndexedDB not initialized");try{const a=this.db.transaction("store","readonly").objectStore("store").getAll();a.onsuccess=()=>{a.result.forEach(d=>{if(d.id!=="dcrypt_identity")try{const{metadata:c,chunks:j}=JSON.parse(d.value);this.knownObjects.set(d.id,{metadata:c,chunks:j})}catch(c){console.error("Failed to parse known object:",d.id,c)}}),console.log("Loaded known objects from IndexedDB")}}catch(e){console.error("Failed to load known objects:",e)}}async syncUserData(){if(!this.db)throw new Error("IndexedDB not initialized");try{await this.dbPut("store",{id:"dcrypt_identity",value:this.keypair}),await this.updateBalance(),this.activeNodes.size>0&&await this.processOfflineQueue();const e={type:"userData",peerId:this.peerId,keypair:this.keypair,balance:await this.getBalance(this.keypair),timestamp:Date.now()};this.broadcast(e),console.log("User data synced successfully")}catch(e){throw console.error("Sync failed:",e),e}}async saveUserData(){if(!this.db)throw new Error("IndexedDB not initialized");try{await this.dbPut("store",{id:"dcrypt_identity",value:this.keypair}),await this.updateBalance(),console.log("User data saved to IndexedDB")}catch(e){throw console.error("Save failed:",e),e}}async initSwarm(){try{return this.peerId=this.isNode?`node-${this.keypair}`:this.keypair,console.log("Initializing PeerJS with Peer ID:",this.peerId),this.peer=new $dd0187d7f28e386f$export$2e2bcd8739ae039(this.peerId,{host:"0.peerjs.com",port:443,path:"/",secure:!0,debug:2}),await new Promise((e,o)=>{this.peer.on("open",a=>{console.log(`PeerJS connection opened with ID: ${a}`),this.activeNodes.add(this.peerId),this.peer.on("connection",d=>this.handleConnection(d)),this.peer.on("error",d=>{var c;if(console.error("PeerJS error:",d.type,d.message),d.type==="peer-unavailable"){const j=(c=d.message.match(/Peer (.+) is unavailable/))==null?void 0:c[1];j&&this.handlePeerDisconnect(j)}}),this.peer.on("disconnected",()=>{console.log("PeerJS disconnected. Attempting to reconnect..."),this.peer.reconnect()}),window.addEventListener("beforeunload",()=>{this.peer&&!this.peer.destroyed&&(this.peer.destroy(),console.log("PeerJS peer destroyed on page unload"))}),setInterval(()=>this.discoverPeers(),3e3),setInterval(()=>this.measureLatency(),6e4),e()}),this.peer.on("error",a=>o(a))})}catch(e){throw console.error("initSwarm failed:",e),e}}discoverPeers(){console.log("Discovering peers...");const e=[...Array.from(this.nodes)].filter(o=>o!==this.peerId);if(e.length===0){console.warn("No known peers to connect to.");return}e.forEach(o=>{this.peers.has(o)?this.peers.get(o).connected||this.connectToPeer(o):(this.peers.set(o,{connected:!1,conn:null}),console.log("Discovered peer:",o),this.connectToPeer(o))}),this.peers.forEach((o,a)=>{!o.connected&&(this.connectionAttempts.get(a)||0)>=this.maxConnectionAttempts&&(console.log(`Removing unreachable peer: ${a}`),this.peers.delete(a),this.connectionAttempts.delete(a),this.activeNodes.delete(a))})}connectToPeer(e){var d;if((d=this.peers.get(e))!=null&&d.connected)return;const o=this.connectionAttempts.get(e)||0;if(o>=this.maxConnectionAttempts)return;console.log(`Connecting to peer: ${e} (Attempt ${o+1}/${this.maxConnectionAttempts})`);const a=this.peer.connect(e,{reliable:!0});a.on("open",()=>{console.log(`Connected to peer: ${e}`),this.peers.set(e,{connected:!0,conn:a}),this.activeNodes.add(e),this.connectionAttempts.delete(e),a.send({type:"handshake",peerId:this.peerId})}),a.on("data",c=>this.handlePeerData(c,e)),a.on("close",()=>this.handlePeerDisconnect(e)),a.on("error",c=>{console.warn(`Connection error with peer ${e}: ${c.message}`),this.handlePeerDisconnect(e)}),this.connectionAttempts.set(e,o+1)}handleConnection(e){const o=e.peer;console.log(`Incoming connection from peer: ${o}`),this.peers.set(o,{connected:!0,conn:e}),this.activeNodes.add(o),e.on("data",a=>this.handlePeerData(a,o)),e.on("close",()=>this.handlePeerDisconnect(o)),e.on("error",a=>{console.error(`Connection error with peer ${o}:`,a),this.handlePeerDisconnect(o)})}handlePeerDisconnect(e){const o=this.peers.get(e);o&&(o.connected=!1,o.conn=null,this.activeNodes.delete(e),console.log(`Peer disconnected: ${e}. Will reconnect on next discovery.`))}handlePeerData(e,o){switch(console.log(`Received data from peer ${o}:`,e),e.type){case"handshake":console.log(`Handshake from peer: ${o}`),this.activeNodes.add(o);break;case"chunk":this.chunkToPeerMap.set(e.chunkHash,new Set([...this.chunkToPeerMap.get(e.chunkHash)||[],o])),console.log(`Updated chunkToPeerMap for chunk ${e.chunkHash} with peer ${o}`);break;case"ip":this.knownObjects.set(e.ipHash,{metadata:e.metadata,chunks:e.chunkHashes}),this.dbPut("store",{id:e.ipHash,value:JSON.stringify({metadata:e.metadata,chunks:e.chunkHashes})}),console.log(`Received IP ${e.ipHash} from peer ${o}`);break;case"chunkRequest":this.handleChunkRequest(e,o);break;case"chunkResponse":this.handleChunkResponse(e);break;case"userData":console.log(`Received user data from peer ${o}:`,e);break;case"storeChunk":this.storeChunkFromPeer(e.chunkHash,e.chunkData,o);break;case"ping":const a=this.peers.get(o);a&&a.connected&&a.conn&&a.conn.send({type:"pong",requestId:e.requestId});break;case"pong":const d=this.pendingRequests.get(e.requestId);d&&(d.resolve(),this.pendingRequests.delete(e.requestId));break;case"commission":console.log(`Received commission of ${e.amount}. New balance: ${e.newBalance}`);break;default:console.warn(`Unknown data type from peer ${o}:`,e.type)}}async storeChunkFromPeer(e,o,a){try{await this.dbPut("chunkCache",{id:e,value:o});let d=this.chunkToPeerMap.get(e)||new Set;d.add(this.peerId),this.chunkToPeerMap.set(e,d),console.log(`Stored chunk ${e} from peer ${a}`)}catch(d){console.error(`Failed to store chunk ${e} from peer ${a}:`,d)}}async publishChunk(e,o,a,d){if(!this.db)throw new Error("IndexedDB not initialized");try{if(!e||typeof e!="string"||e.trim()==="")throw new Error("Invalid chunk hash");await this.dbPut("chunkCache",{id:e,value:o});let c=this.chunkToPeerMap.get(e)||new Set;if(c.add(this.peerId),this.chunkToPeerMap.set(e,c),this.activeNodes.size>0){const j=Array.from(this.activeNodes).filter(pt=>pt.startsWith("node-"));if(j.length>0){const pt=a%j.length,yt=j[pt],ct=this.peers.get(yt);ct&&ct.connected&&ct.conn&&(ct.conn.send({type:"storeChunk",chunkHash:e,chunkData:o,peerId:this.peerId}),c.add(yt),this.chunkToPeerMap.set(e,c),console.log(`Sent chunk ${e} to node ${yt}`))}const _e=Array.from(this.activeNodes).filter(pt=>!pt.startsWith("node-")&&pt!==this.peerId);if(_e.length>0){const pt=_e[Math.floor(Math.random()*_e.length)],yt=this.peers.get(pt);yt&&yt.connected&&yt.conn&&(yt.conn.send({type:"storeChunk",chunkHash:e,chunkData:o,peerId:this.peerId}),c.add(pt),this.chunkToPeerMap.set(e,c),console.log(`Sent chunk ${e} to peer ${pt}`))}}else await this.queueOfflineOperation({type:"publishChunk",chunkHash:e,chunkData:o,chunkIndex:a,totalChunks:d});this.broadcastChunk(e)}catch(c){throw console.error("publishChunk failed:",c),c}}broadcastChunk(e){const o={type:"chunk",chunkHash:e,peerId:this.peerId};this.broadcast(o),console.log(`Broadcasted chunk ${e} to ${this.activeNodes.size} peers`)}async publishIP(e,o,a){if(!this.db||!this.keypair)throw new Error("IndexedDB or keypair not initialized");try{const d=Array.isArray(e.tags)?e.tags.map(hr=>String(hr).trim()).filter(hr=>hr!==""):[],c=!!e.isPremium,j=c?e.priceUsd||30:0,_e=new Uint8Array(o),pt=e.content_type||"",yt=this.keypair,Ct=createIntellectualProperty(_e,pt,d,c,j,yt,a||"text/plain"),qt=getIpContent(Ct),Ot=await computeFullHash(qt),Lt=this.uint8ArrayToBase64Url(Ot),Qt=Array.from(this.activeNodes).filter(hr=>hr.startsWith("node-")),ir=Qt.length>0?Qt.length:1,er=await chunkEncrypt(Ct,this.keypair,ir),tr=await Promise.all(er.map(hr=>getChunkHash(hr).then(_r=>this.uint8ArrayToBase64Url(_r)))),sr={...e,chunk_count:er.length,isPremium:c,priceUsd:j},ar={metadata:sr,chunks:tr};this.knownObjects.set(Lt,ar),await this.dbPut("store",{id:Lt,value:JSON.stringify(ar)});for(let hr=0;hr<er.length;hr++)await this.publishChunk(tr[hr],er[hr],hr,er.length);return this.activeNodes.size>0?this.broadcastIP(Lt,sr,tr):await this.queueOfflineOperation({type:"publishIP",ipHash:Lt,metadata:sr,chunkHashes:tr}),Lt}catch(d){throw console.error("publishIP failed:",d),d}}broadcastIP(e,o,a){const d={type:"ip",ipHash:e,metadata:o,chunkHashes:a,peerId:this.peerId};this.broadcast(d),console.log(`Broadcasted IP ${e} to ${this.activeNodes.size} peers`)}async requestData(e){if(!this.db)throw new Error("IndexedDB not initialized");try{if(!e||typeof e!="string")throw new Error("Invalid IP hash");const o=this.knownObjects.get(e);if(!o)throw new Error("IP not found");const a=[];for(const yt of o.chunks){const ct=await this.dbGet("chunkCache",yt);if(ct&&ct.value){a.push({chunk:ct.value,hash:yt});continue}const Ct=this.chunkToPeerMap.get(yt);if(!Ct||Ct.size===0)throw new Error(`No peers found with chunk ${yt}`);const qt=Array.from(Ct).filter(ir=>ir.startsWith("node-")),Ot=Array.from(Ct).filter(ir=>!ir.startsWith("node-"));let Lt=!1,Qt=null;for(const ir of[...qt,...Ot])if(this.activeNodes.has(ir))try{const er=await this.fetchChunkFromPeer(ir,yt);await this.dbPut("chunkCache",{id:yt,value:er}),a.push({chunk:er,hash:yt}),Lt=!0;break}catch(er){Qt=er,console.error(`Failed to fetch chunk ${yt} from peer ${ir}:`,er)}if(!Lt)throw Qt||new Error(`No available peer for chunk ${yt}`)}const d=a.sort((yt,ct)=>getChunkIndex(yt.chunk)-getChunkIndex(ct.chunk)),c=await Promise.all(d.map(({chunk:yt})=>decryptChunk(yt,this.keypair))),j=new Uint8Array(c.reduce((yt,ct)=>yt+ct.length,0));let _e=0;for(const yt of c)j.set(yt,_e),_e+=yt.length;const pt=getChunkFileType(d[0].chunk);return{data:j,fileType:pt}}catch(o){throw console.error("requestData failed:",o),o}}async fetchChunkFromPeer(e,o){const a=this.peers.get(e);if(!a||!a.connected||!a.conn)throw new Error(`Peer ${e} is not connected`);const d=`${e}-${o}-${Date.now()}`,c={type:"chunkRequest",requestId:d,chunkHash:o,peerId:this.peerId};return a.conn.send(c),new Promise((j,_e)=>{this.pendingRequests.set(d,{resolve:j,reject:_e,hash:o}),setTimeout(()=>{this.pendingRequests.has(d)&&(this.pendingRequests.delete(d),_e(new Error(`Request for chunk ${o} from peer ${e} timed out`)))},1e4)})}handleChunkRequest(e,o){const{requestId:a,chunkHash:d}=e;this.dbGet("chunkCache",d).then(c=>{if(c&&c.value){const j=this.peers.get(o);j&&j.connected&&j.conn&&(j.conn.send({type:"chunkResponse",requestId:a,chunkHash:d,chunkData:c.value,peerId:this.peerId}),console.log(`Sent chunk ${d} to peer ${o}`))}else console.warn(`Chunk ${d} not found for peer ${o}`)}).catch(c=>console.error(`Failed to retrieve chunk ${d} for peer ${o}:`,c))}handleChunkResponse(e){const{requestId:o,chunkHash:a,chunkData:d}=e,c=this.pendingRequests.get(o);c&&(c.hash===a?c.resolve(d):c.reject(new Error(`Received chunk hash ${a} does not match requested hash ${c.hash}`)),this.pendingRequests.delete(o))}async distributeCommission(e){const o=Array.from(this.activeNodes).filter(d=>d.startsWith("node-"));if(o.length===0){console.log("No active nodes to distribute commission to.");return}const a=e/o.length;console.log(`Distributing commission of ${e} to ${o.length} nodes (${a} per node)`);for(const d of o){const c=d.replace("node-",""),j=this.base64UrlToUint8Array(c),pt=await this.getBalance(j)+a;await this.putBalance(j,pt);const yt=this.peers.get(d);yt&&yt.connected&&yt.conn&&yt.conn.send({type:"commission",amount:a,newBalance:pt,peerId:this.peerId})}}async getBalance(e){if(!this.db)throw new Error("IndexedDB not initialized");const o=await this.dbGet("store","balance_"+e);return o&&o.value?parseFloat(o.value):0}async putBalance(e,o){if(!this.db)throw new Error("IndexedDB not initialized");if(typeof o!="number"||o<0)throw new Error("Invalid balance amount");await this.dbPut("store",{id:"balance_"+e,value:o.toString()}),this.activeNodes.size>0&&this.broadcast({type:"userData",peerId:this.peerId,keypair:this.keypair,balance:o,timestamp:Date.now()})}async updateBalance(){if(!this.db)throw new Error("IndexedDB not initialized");const e=await this.getBalance(this.keypair);await this.putBalance(this.keypair,e)}async queueOfflineOperation(e){if(!this.db)throw new Error("IndexedDB not initialized");this.offlineQueue.push(e),await this.dbAdd("offlineQueue",{id:Date.now().toString(),value:e}),console.log("Queued offline operation:",e)}async processOfflineQueue(){if(this.offlineQueue.length===0)return;console.log("Processing offline queue...");const e=[...this.offlineQueue];this.offlineQueue=[];const a=this.db.transaction("offlineQueue","readwrite").objectStore("offlineQueue");await new Promise(d=>a.clear().onsuccess=d);for(const d of e)try{switch(d.type){case"publishChunk":await this.publishChunk(d.chunkHash,d.chunkData,d.chunkIndex,d.totalChunks);break;case"publishIP":await this.broadcastIP(d.ipHash,d.metadata,d.chunkHashes);break;default:console.warn("Unknown offline operation type:",d.type)}}catch(c){console.error(`Failed to process offline operation ${d.type}:`,c),this.offlineQueue.push(d),await this.dbAdd("offlineQueue",{id:Date.now().toString(),value:d})}}async dbPut(e,o){if(!this.db)throw new Error("IndexedDB not initialized");return new Promise((a,d)=>{const _e=this.db.transaction(e,"readwrite").objectStore(e).put(o);_e.onsuccess=()=>a(),_e.onerror=pt=>d(new Error(`DB put failed: ${pt.target.error.message}`))})}async dbAdd(e,o){if(!this.db)throw new Error("IndexedDB not initialized");return new Promise((a,d)=>{const _e=this.db.transaction(e,"readwrite").objectStore(e).add(o);_e.onsuccess=()=>a(),_e.onerror=pt=>d(new Error(`DB add failed: ${pt.target.error.message}`))})}async dbGet(e,o){if(!this.db)throw new Error("IndexedDB not initialized");return new Promise((a,d)=>{const _e=this.db.transaction(e,"readonly").objectStore(e).get(o);_e.onsuccess=()=>a(_e.result),_e.onerror=pt=>d(new Error(`DB get failed: ${pt.target.error.message}`))})}async dbGetAll(e){if(!this.db)throw new Error("IndexedDB not initialized");return new Promise((o,a)=>{const j=this.db.transaction(e,"readonly").objectStore(e).getAll();j.onsuccess=()=>o(j.result),j.onerror=_e=>a(new Error(`DB getAll failed: ${_e.target.error.message}`))})}broadcast(e){this.activeNodes.forEach(o=>{if(o!==this.peerId){const a=this.peers.get(o);a&&a.connected&&a.conn&&a.conn.send(e)}})}uint8ArrayToBase64Url(e){const o=String.fromCharCode(...e);return btoa(o).replace(/\+/g,"-").replace(/\//g,"_").replace(/=+$/,"")}base64UrlToUint8Array(e){let o=e.replace(/-/g,"+").replace(/_/g,"/");for(;o.length%4;)o+="=";const a=atob(o),d=new Uint8Array(a.length);for(let c=0;c<a.length;c++)d[c]=a.charCodeAt(c);return d}destroy(){this.peer&&!this.peer.destroyed&&(this.peer.destroy(),console.log("PeerJS peer destroyed")),this.peers.clear(),this.activeNodes.clear(),this.pendingRequests.clear()}}function uint8ArrayToBase64Url(s){const e=String.fromCharCode(...s);return btoa(e).replace(/\+/g,"-").replace(/\//g,"_").replace(/=+$/,"")}let isAppInitialized=!1,isSigningUp=!1;const useAuth=()=>{const[s,e]=reactExports.useState(null),[o,a]=reactExports.useState(localStorage.getItem("role")),[d,c]=reactExports.useState(localStorage.getItem("nodeId")),j=useNavigate(),_e=reactExports.useRef(!1),pt=reactExports.useRef(!1),yt=reactExports.useRef(null);console.log("useAuth hook instantiated");const ct=reactExports.useCallback(async()=>{try{await setPersistence(auth,browserLocalPersistence),console.log("Firebase services initialized with local persistence")}catch(ur){throw console.error("Failed to initialize Firebase services:",ur),ur}},[]),Ct=reactExports.useCallback(()=>!!auth.currentUser||localStorage.getItem("role")==="node",[]),qt=reactExports.useCallback(async()=>{try{await ct();const ur=new GoogleAuthProvider,lr=await signInWithPopup(auth,ur);console.log("Sign-in successful, user:",lr.user),e(lr.user),s=lr.user}catch(ur){throw console.error("Login failed:",ur),ur}},[ct]),Ot=reactExports.useCallback(async()=>{try{localStorage.getItem("role")==="node"?(localStorage.removeItem("nodeId"),localStorage.removeItem("role"),a(null),c(null)):await signOut(auth);const gr=(await initializeIndexedDB()).transaction("store","readwrite").objectStore("store");await new Promise((Mt,h)=>{const _=gr.delete("dcrypt_identity");_.onsuccess=()=>Mt(),_.onerror=()=>h(new Error("Failed to delete keypair from IndexedDB"))}),e(null),sr(),_e.current=!1,isAppInitialized=!1,pt.current=!1,window.dht&&(window.dht.destroy(),window.dht=null),console.log("Signed out successfully, reset initialization flags")}catch(ur){throw console.error("Sign-out failed:",ur),ur}},[]),Lt=reactExports.useCallback(async(ur,lr)=>{if(!isSigningUp){isSigningUp=!0,localStorage.setItem("pendingRole","user");try{const gr=new GoogleAuthProvider,Mt=await signInWithPopup(auth,gr),h=lr?await Qt(Mt.user.uid,lr):null,_=doc(db,"users",Mt.user.uid);await setDoc(_,{username:ur||Mt.user.displayName||"Anonymous User",profileImageUrl:h||null,createdAt:Date.now(),snippetsPosted:0},{merge:!0}),e(Mt.user),s=Mt.user,j("/")}finally{isSigningUp=!1,localStorage.removeItem("pendingRole")}}},[j]),Qt=async(ur,lr)=>{if(!lr)return null;try{const gr=ref$2(storage,`profile_images/${ur}/${lr.name}`);return await uploadBytes(gr,lr),await getDownloadURL(gr)}catch(gr){throw console.error("Failed to upload profile image:",gr),gr}},ir=reactExports.useCallback(async()=>{const ur=generateUUID();localStorage.setItem("nodeId",ur),localStorage.setItem("role","node"),c(ur),a("node");const lr=doc(db,"nodes",ur);await setDoc(lr,{role:"node",createdAt:Date.now(),status:"active"},{merge:!0}),j("/node-instructions")},[j]),er=reactExports.useCallback(async()=>{try{const ur=localStorage.getItem("nodeId"),lr=localStorage.getItem("role");localStorage.removeItem("nodeId"),localStorage.removeItem("role"),sessionStorage.setItem("nodeId",ur),sessionStorage.setItem("role",lr),c(ur),a(lr)}catch(ur){throw console.error("Error initializing node instructions:",ur),ur}},[]),tr=reactExports.useCallback(async ur=>{if(ur)try{const lr=doc(db,"users",ur),gr=await getDoc$1(lr);if(gr.exists()){const Mt=gr.data(),h=document.getElementById("userName"),_=document.querySelector(".user-avatar"),b=document.getElementById("snippetsPosted");h&&(h.textContent=Mt.username||"Anonymous User"),_&&(_.innerHTML=Mt.profileImageUrl?`<img src="${Mt.profileImageUrl}" alt="Profile Image" class="w-12 h-12 rounded-full object-cover">`:'<i class="fas fa-user text-lg"></i>'),b&&(b.textContent=Mt.snippetsPosted||0)}}catch(lr){throw console.error("Failed to fetch user profile:",lr),lr}},[]),sr=reactExports.useCallback(()=>{var lr,gr;const ur={publishedItemsTableBody:(lr=document.getElementById("publishedItems"))==null?void 0:lr.querySelector("tbody"),mySnippetsTableBody:(gr=document.getElementById("mySnippets"))==null?void 0:gr.querySelector("tbody"),transactionList:document.getElementById("transactionList"),userBalanceElement:document.getElementById("userBalance"),userNameElement:document.getElementById("userName"),userAvatarElement:document.querySelector(".user-avatar"),snippetsPostedElement:document.getElementById("snippetsPosted")};ur.publishedItemsTableBody&&(ur.publishedItemsTableBody.innerHTML=""),ur.mySnippetsTableBody&&(ur.mySnippetsTableBody.innerHTML=""),ur.transactionList&&(ur.transactionList.innerHTML="No transactions yet."),ur.userBalanceElement&&(ur.userBalanceElement.textContent="Balance: 0 DCT"),ur.userNameElement&&(ur.userNameElement.textContent="Guest User"),ur.userAvatarElement&&(ur.userAvatarElement.innerHTML='<i class="fas fa-user text-lg"></i>'),ur.snippetsPostedElement&&(ur.snippetsPostedElement.textContent="0"),localStorage.removeItem("userKeypair"),localStorage.removeItem("peerId"),localStorage.removeItem("dhtInitialized")},[]),ar=reactExports.useCallback(async ur=>{if(isAppInitialized||_e.current){console.log("Application already initialized, skipping for userId:",ur);return}console.log("Initializing application for userId:",ur),console.log("isAppInitialized:",isAppInitialized,"isInitializedRef.current:",_e.current);try{isAppInitialized=!0,_e.current=!0,console.log("Set initialization flags: isAppInitialized:",isAppInitialized,"isInitializedRef.current:",_e.current);const lr=await initializeIndexedDB();let gr=await loadKeypair(lr);if(gr instanceof Uint8Array&&(gr=uint8ArrayToBase64Url(gr)),!gr&&ur)await storeKeypair(lr,ur),gr=ur;else if(gr)gr.length>40&&(gr=ur,await storeKeypair(lr,ur));else throw new Error("No keypair available and no userId provided to create one");const Mt=await hr(ur);window.dht&&window.dht.destroy(),window.dht=new DHT(gr,Mt),await window.dht.initDB(),await window.dht.initSwarm(),await window.dht.syncUserData(),console.log("Application initialized successfully for userId:",ur)}catch(lr){throw console.error("Error initializing application for userId:",ur,lr),isAppInitialized=!1,_e.current=!1,lr}},[]),hr=async ur=>{try{console.log("Checking node status for userId:",ur,"with db:",db);const lr=doc(db,"nodes",ur);return(await getDoc$1(lr)).exists()}catch(lr){return console.error("Error in checkIfUserIsNode:",lr),!1}},_r=reactExports.useCallback(()=>{if(!auth){console.warn("Auth is not initialized");return}if(yt.current){console.log("Already subscribed to auth changes, skipping");return}console.log("Setting up onAuthStateChanged listener");const ur=onAuthStateChanged(auth,async lr=>{if(pt.current){console.log("Auth state already handled, skipping for user:",lr==null?void 0:lr.uid);return}pt.current=!0,console.log("onAuthStateChanged triggered with user:",lr==null?void 0:lr.uid);try{if(e(lr),s=lr,lr&&!_e.current)console.log("Calling init for authenticated user:",lr.uid),await ar(lr.uid);else if(!lr&&!_e.current){const gr=await initializeIndexedDB(),Mt=await loadKeypair(gr);Mt?(console.log("Calling init for keypair:",Mt),await ar(Mt)):(console.log("No user or keypair available for initialization"),sr())}else console.log("Initialization skipped: isInitializedRef.current:",_e.current)}catch(gr){console.error("Error handling auth state change:",gr),pt.current=!1}});return yt.current=ur,ur},[ar,sr]),dr=reactExports.useCallback(()=>{yt.current&&(console.log("Cleaning up onAuthStateChanged listener"),yt.current(),yt.current=null)},[]);return{user:s,role:o,nodeId:d,initializeFirebase:ct,isAuthenticated:Ct,signIn:qt,signOutUser:Ot,handleSignup:Lt,becomeNode:ir,initNode:er,updateUserProfile:tr,updateUIForSignOut:sr,init:ar,subscribeToAuthChanges:_r,unsubscribeFromAuthChanges:dr}},generateUUID=()=>"xxxxxxxx-xxxx-4xxx-yxxx-xxxxxxxxxxxx".replace(/[xy]/g,s=>{const e=Math.random()*16|0;return(s==="x"?e:e&3|8).toString(16)}),storeKeypair=(s,e)=>new Promise((o,a)=>{try{const j=s.transaction("store","readwrite").objectStore("store").put({id:"dcrypt_identity",value:e});j.onsuccess=()=>o(),j.onerror=()=>a(new Error("Failed to store keypair in IndexedDB"))}catch(d){a(d)}}),AppContent=({user:s,role:e,nodeId:o,signIn:a,signOutUser:d,handleSignup:c,becomeNode:j,initNode:_e,updateUserProfile:pt,updateUIForSignOut:yt,isAuthenticated:ct,dht:Ct})=>{const{addToast:qt}=useToast(),Ot=(ir,er)=>{qt(ir,er?"error":"success")},[Lt,Qt]=reactExports.useState(!1);return reactExports.useEffect(()=>{Qt(!!(e&&o&&Ct!==null))},[e,o,Ct]),jsxRuntimeExports.jsxs(Routes,{children:[jsxRuntimeExports.jsx(Route,{path:"/",element:jsxRuntimeExports.jsx(Dashboard,{user:s,signIn:a,signOutUser:d,updateUserProfile:pt,updateUIForSignOut:yt,isAuthenticated:ct,showToast:Ot})}),jsxRuntimeExports.jsx(Route,{path:"/signup",element:jsxRuntimeExports.jsx(Signup,{handleSignup:c,becomeNode:j,showToast:Ot})}),jsxRuntimeExports.jsx(Route,{path:"/node-instructions",element:e==="node"&&o&&Lt?jsxRuntimeExports.jsx(NodeInstructions,{initNode:_e,dht:Ct,showToast:Ot}):jsxRuntimeExports.jsx(Navigate,{to:"/signup",replace:!0})}),jsxRuntimeExports.jsx(Route,{path:"*",element:jsxRuntimeExports.jsx(Navigate,{to:"/",replace:!0})})]})},App=()=>{const{user:s,role:e,nodeId:o,signIn:a,signOutUser:d,handleSignup:c,becomeNode:j,initNode:_e,updateUserProfile:pt,updateUIForSignOut:yt,isAuthenticated:ct}=useAuth(),{dht:Ct}=useDHT({user:s});return jsxRuntimeExports.jsx(ToastProvider,{children:jsxRuntimeExports.jsx(AppContent,{user:s,role:e,nodeId:o,signIn:a,signOutUser:d,handleSignup:c,becomeNode:j,initNode:_e,updateUserProfile:pt,updateUIForSignOut:yt,isAuthenticated:ct,dht:Ct})})},root=client.createRoot(document.getElementById("root"));root.render(jsxRuntimeExports.jsx(BrowserRouter,{basename:"/datasharingApp",children:jsxRuntimeExports.jsx(App,{})}));
